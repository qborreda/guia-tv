function createCookie(t,e,i){var n;if(i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),n="; expires="+r.toGMTString()}else n="";document.cookie=escape(t)+"="+escape(e)+n+"; path=/"}function readCookie(t){for(var e=escape(t)+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return unescape(r.substring(e.length,r.length))}return null}function eraseCookie(t){createCookie(t,"",-1)}function leftPad(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}!function(t,e,i,n){function r(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),n=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+n}function o(e,i,n,r){var o=e.length,s=r?"offset":"position";for(n=n||0;o--;){var a=e[o].el?e[o].el:t(e[o]),l=a[s]();l.left+=parseInt(a.css("margin-left"),10),l.top+=parseInt(a.css("margin-top"),10),i[o]=[l.left-n,l.left+a.outerWidth()+n,l.top-n,l.top+a.outerHeight()+n]}}function s(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function a(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var n,o=t.length,s=[];o--;)n=t[o],s[o]=[o,r(n,e),i&&r(n,i)];return s=s.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function l(e){this.options=t.extend({},p,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=n))}function c(e,i){this.el=e,this.options=t.extend({},u,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var n=this.rootGroup.options.itemPath;this.target=n?this.el.find(n):this.el,this.target.on(h.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var h,u={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},p={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",placeholderClass:"placeholder",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(t,e){t.css(e)},onDragStart:function(e,i){e.css({height:e.height(),width:e.width()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){return i.target.nodeName.match(/^(input|select|textarea)$/i)?void 0:(i.preventDefault(),!0)},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(e,i,n){var r=t.extend({},e.data());return n?[i]:(i[0]&&(r.children=i),delete r.subContainers,delete r.sortable,r)},tolerance:0},f={},d=0,g={left:0,top:0,bottom:0,right:0},h={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},v="subContainers";l.get=function(t){return f[t.group]||(t.group===n&&(t.group=d++),f[t.group]=new l(t)),f[t.group]},l.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,p.onMousedown,e)&&(this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,p.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,s(this.pointer,this.item.offsetParent()),p.onDrag,t);var e=t.pageX||t.originalEvent.pageX,i=t.pageY||t.originalEvent.pageY,r=this.sameResultBox,o=this.options.tolerance;(!r||r.top-o>i||r.bottom+o<i||r.left-o>e||r.right+o<e)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=n))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,p.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),p.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),r=i.length;r--;){var o=i[r][0],l=i[r][1];if(!l||this.options.pullPlaceholder){var c=this.containers[o];if(!c.disabled){if(!this.$getOffsetParent()){var h=c.getItemOffsetParent();t=s(t,h),e=s(e,h)}if(c.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(t,e,i,n){var r=this.lastAppendedItem;(n||!r||r[0]!==e[0])&&(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=n,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||o(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===n){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=s(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){return{left:t.pageX||t.originalEvent.pageX,top:t.pageY||t.originalEvent.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,n=["drag","drop","scroll"];t.each(n,function(t,n){i.$document[e](h[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=n},_destroy:function(){f[this.options.group]=n}},c.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=a(this.getItemDimensions(),t,e),n=i.length,r=this.rootGroup,o=!r.options.isValidTarget||r.options.isValidTarget(r.item,this);if(!n&&o)return r.movePlaceholder(this,this.target,"append"),!0;for(;n--;){var s=i[n][0],l=i[n][1];if(!l&&this.hasChildGroup(s)){var c=this.getContainerGroup(s).searchValidTarget(t,e);if(c)return!0}else if(o)return this.movePlaceholder(s,t),!0}},movePlaceholder:function(e,i){var n=t(this.items[e]),r=this.itemDimensions[e],o="after",s=n.outerWidth(),a=n.outerHeight(),l=n.offset(),c={left:l.left,right:l.left+s,top:l.top,bottom:l.top+a};if(this.options.vertical){var h=(r[2]+r[3])/2,u=i.top<=h;u?(o="before",c.bottom-=a/2):c.top+=a/2}else{var p=(r[0]+r[1])/2,f=i.left<=p;f?(o="before",c.right-=s/2):c.left+=s/2}this.hasChildGroup(e)&&(c=g),this.rootGroup.movePlaceholder(this,n,o,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),o(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var r=t.data(this.items[e],v);if(r===n){var o=this.$getChildren(this.items[e],"container");if(r=!1,o[0]){var s=t.extend({},this.options,{rootGroup:this.rootGroup,group:d++});r=o[i](s).data(i).group}t.data(this.items[e],v,r)}return r},$getChildren:function(e,i){var n=this.rootGroup.options,r=n[i+"Path"],o=n[i+"Selector"];return e=t(e),r&&(e=e.find(r)),e.children(o)},_serialize:function(e,i){var n=this,r=i?"item":"container",o=this.$getChildren(e,r).not(this.options.exclude).map(function(){return n._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,o,i)},traverse:function(e){t.each(this.items||[],function(){var i=t.data(this,v);i&&i.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=n},_destroy:function(){var e=this;this.target.off(h.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,v)})}};var m={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(c.prototype,m),t.fn[i]=function(e){var r=Array.prototype.slice.call(arguments,1);return this.map(function(){var o=t(this),s=o.data(i);return s&&m[e]?m[e].apply(s,r)||this:(s||e!==n&&"object"!=typeof e||o.data(i,new c(o,e)),this)})}}(jq111,window,"sortable"),function(t,e,i){"use strict";var n,r,o,s,a,l,c,h,u,p,f,d,g,v,m,b,w,T,S,y,x,C,M,P,D,k,O,E,I,_,$;M={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},T="scrollbar",w="scroll",u="mousedown",p="mouseenter",f="mousemove",g="mousewheel",d="mouseup",b="resize",a="drag",l="enter",y="up",m="panedown",o="DOMMouseScroll",s="down",x="wheel",c="keydown",h="keyup",S="touchmove",n="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,r=null,O=e.requestAnimationFrame,C=e.cancelAnimationFrame,I=i.createElement("div").style,$=function(){var t,e,i,n,r,o;for(n=["t","webkitT","MozT","msT","OT"],t=r=0,o=n.length;o>r;t=++r)if(i=n[t],e=n[t]+"ransform",e in I)return n[t].substr(0,n[t].length-1);return!1}(),_=function(t){return $===!1?!1:""===$?t:$+t.charAt(0).toUpperCase()+t.substr(1)},E=_("transform"),D=E!==!1,P=function(){var t,e,n;return t=i.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=w,e.top="-9999px",i.body.appendChild(t),n=t.offsetWidth-t.clientWidth,i.body.removeChild(t),n},k=function(){var t,i,n;return i=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),t&&+n>23):!1},v=function(){function c(n,o){this.el=n,this.options=o,r||(r=P()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+o.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===o)(e===s&&t.originalEvent.detail>0||e===y&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===g){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===s&&t.originalEvent.wheelDelta<0||e===y&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;D?(t={},t[E]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},O?(C&&this.scrollRAF&&C(this.scrollRAF),this.scrollRAF=O(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(f,t.events[a]).bind(d,t.events[y]),t.body.bind(p,t.events[l]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(f,t.events[a]).unbind(d,t.events[y]),t.body.unbind(p,t.events[l]),!1}}(this),resize:function(t){return function(){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,s),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,y),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var i;if(null!=e)return i=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,i&&(t.sliderY+=-i/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var i;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(i=t.events)[y].apply(i,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(b,t[b]),this.iOSNativeScrolling||(this.slider.bind(u,t[s]),this.pane.bind(u,t[m]).bind(""+g+" "+o,t[x])),this.$content.bind(""+w+" "+g+" "+o+" "+S,t[w])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(b,t[b]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+w+" "+g+" "+o+" "+S,t[w])},c.prototype.generate=function(){var t,i,n,o,s,a,l;return o=this.options,a=o.paneClass,l=o.sliderClass,t=o.contentClass,(s=this.$el.children("."+a)).length||s.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===r&&k()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+n+14}):r&&(i={right:-r},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,i,o,s,a,l,c,h,u,p,f;return this.iOSNativeScrolling?(this.contentHeight=this.content.scrollHeight,void 0):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,o=t.style,s=o.overflowY,n&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+r,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>u?u:t.scrollHeight)),l=this.pane.outerHeight(!1),h=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+h+a,f=Math.round(c/e*c),f<this.options.sliderMinHeight?f=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&f>this.options.sliderMaxHeight&&(f=this.options.sliderMaxHeight),s===w&&o.overflowX!==w&&(f+=r),this.maxSliderTop=c-f,this.contentHeight=e,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=f,this.paneTop=h,this.slider.height(f),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&s!==w?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&s===w?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),("static"===i||"relative"===i)&&(p=parseInt(this.$content.css("right"),10),p&&this.$content.css({right:"",marginRight:p})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return C&&this.scrollRAF&&(C(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=t.extend({},M,e),this.nanoscroller=n=new v(this,i)),e&&"object"==typeof e){if(t.extend(n.options,e),null!=e.scrollBottom)return n.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return n.scrollTop(e.scrollTop);if(e.scrollTo)return n.scrollTo(e.scrollTo);if("bottom"===e.scroll)return n.scrollBottom(0);if("top"===e.scroll)return n.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return n.scrollTo(e.scroll);if(e.stop)return n.stop();if(e.destroy)return n.destroy();if(e.flash)return n.flash()}return n.reset()})},t.fn.nanoScroller.Constructor=v}(jq111,window,document),function(t){"function"==typeof define&&define.amd&&define.amd.jq111?define(["jquery"],t):t(jq111)}(function(t){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=c),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each(function(){var n=t(this),r=n.data(D);r||(r=new i(this,e),n.data(D,r))})}function i(e,i){function k(e){if(!(ce()||t(e.target).closest(i.excludedElements,Be).length>0)){var n,r=e.originalEvent?e.originalEvent:e,o=C?r.touches[0]:r;return Fe=T,C?Ue=r.touches.length:e.preventDefault(),Ae=0,Le=null,Ge=null,Re=0,Ne=0,Ve=0,ze=1,Ye=0,qe=de(),je=me(),ae(),!C||Ue===i.fingers||i.fingers===b||j()?(ue(0,o),Xe=Pe(),2==Ue&&(ue(1,r.touches[1]),Ne=Ve=Te(qe[0].start,qe[1].start)),(i.swipeStatus||i.pinchStatus)&&(n=A(r,Fe))):n=!1,n===!1?(Fe=x,A(r,Fe),n):(i.hold&&(ti=setTimeout(t.proxy(function(){Be.trigger("hold",[r.target]),i.hold&&(n=i.hold.call(Be,r,r.target))},this),i.longTapThreshold)),he(!0),null)}}function O(t){var e=t.originalEvent?t.originalEvent:t;if(Fe!==y&&Fe!==x&&!le()){var n,r=C?e.touches[0]:e,o=pe(r);if(We=Pe(),C&&(Ue=e.touches.length),i.hold&&clearTimeout(ti),Fe=S,2==Ue&&(0==Ne?(ue(1,e.touches[1]),Ne=Ve=Te(qe[0].start,qe[1].start)):(pe(e.touches[1]),Ve=Te(qe[0].end,qe[1].end),Ge=ye(qe[0].end,qe[1].end)),ze=Se(Ne,Ve),Ye=Math.abs(Ne-Ve)),Ue===i.fingers||i.fingers===b||!C||j()){if(Le=Me(o.start,o.end),Y(t,Le),Ae=xe(o.start,o.end),Re=we(),ge(Le,Ae),(i.swipeStatus||i.pinchStatus)&&(n=A(e,Fe)),!i.triggerOnTouchEnd||i.triggerOnTouchLeave){var s=!0;if(i.triggerOnTouchLeave){var a=De(this);s=ke(o.end,a)}!i.triggerOnTouchEnd&&s?Fe=H(S):i.triggerOnTouchLeave&&!s&&(Fe=H(y)),(Fe==x||Fe==y)&&A(e,Fe)}}else Fe=x,A(e,Fe);n===!1&&(Fe=x,A(e,Fe))}}function E(t){var e=t.originalEvent;return C&&e.touches.length>0?(se(),!0):(le()&&(Ue=Je),We=Pe(),Re=we(),N()||!R()?(Fe=x,A(e,Fe)):i.triggerOnTouchEnd||0==i.triggerOnTouchEnd&&Fe===S?(t.preventDefault(),Fe=y,A(e,Fe)):!i.triggerOnTouchEnd&&Q()?(Fe=y,L(e,Fe,f)):Fe===S&&(Fe=x,A(e,Fe)),he(!1),null)}function I(){Ue=0,We=0,Xe=0,Ne=0,Ve=0,ze=1,ae(),he(!1)}function _(t){var e=t.originalEvent;i.triggerOnTouchLeave&&(Fe=H(y),A(e,Fe))}function $(){Be.unbind(Ee,k),Be.unbind(He,I),Be.unbind(Ie,O),Be.unbind(_e,E),$e&&Be.unbind($e,_),he(!1)}function H(t){var e=t,n=z(),r=R(),o=N();return!n||o?e=x:!r||t!=S||i.triggerOnTouchEnd&&!i.triggerOnTouchLeave?!r&&t==y&&i.triggerOnTouchLeave&&(e=x):e=y,e}function A(t,e){var i=void 0;return q()||U()?i=L(t,e,u):(B()||j())&&i!==!1&&(i=L(t,e,p)),re()&&i!==!1?i=L(t,e,d):oe()&&i!==!1?i=L(t,e,g):ne()&&i!==!1&&(i=L(t,e,f)),e===x&&I(t),e===y&&(C?0==t.touches.length&&I(t):I(t)),i}function L(e,c,h){var v=void 0;if(h==u){if(Be.trigger("swipeStatus",[c,Le||null,Ae||0,Re||0,Ue,qe]),i.swipeStatus&&(v=i.swipeStatus.call(Be,e,c,Le||null,Ae||0,Re||0,Ue,qe),v===!1))return!1;if(c==y&&F()){if(Be.trigger("swipe",[Le,Ae,Re,Ue,qe]),i.swipe&&(v=i.swipe.call(Be,e,Le,Ae,Re,Ue,qe),v===!1))return!1;switch(Le){case n:Be.trigger("swipeLeft",[Le,Ae,Re,Ue,qe]),i.swipeLeft&&(v=i.swipeLeft.call(Be,e,Le,Ae,Re,Ue,qe));break;case r:Be.trigger("swipeRight",[Le,Ae,Re,Ue,qe]),i.swipeRight&&(v=i.swipeRight.call(Be,e,Le,Ae,Re,Ue,qe));break;case o:Be.trigger("swipeUp",[Le,Ae,Re,Ue,qe]),i.swipeUp&&(v=i.swipeUp.call(Be,e,Le,Ae,Re,Ue,qe));break;case s:Be.trigger("swipeDown",[Le,Ae,Re,Ue,qe]),i.swipeDown&&(v=i.swipeDown.call(Be,e,Le,Ae,Re,Ue,qe))}}}if(h==p){if(Be.trigger("pinchStatus",[c,Ge||null,Ye||0,Re||0,Ue,ze,qe]),i.pinchStatus&&(v=i.pinchStatus.call(Be,e,c,Ge||null,Ye||0,Re||0,Ue,ze,qe),v===!1))return!1;if(c==y&&G())switch(Ge){case a:Be.trigger("pinchIn",[Ge||null,Ye||0,Re||0,Ue,ze,qe]),i.pinchIn&&(v=i.pinchIn.call(Be,e,Ge||null,Ye||0,Re||0,Ue,ze,qe));break;case l:Be.trigger("pinchOut",[Ge||null,Ye||0,Re||0,Ue,ze,qe]),i.pinchOut&&(v=i.pinchOut.call(Be,e,Ge||null,Ye||0,Re||0,Ue,ze,qe))}}return h==f?(c===x||c===y)&&(clearTimeout(Ke),clearTimeout(ti),J()&&!te()?(Ze=Pe(),Ke=setTimeout(t.proxy(function(){Ze=null,Be.trigger("tap",[e.target]),i.tap&&(v=i.tap.call(Be,e,e.target))},this),i.doubleTapThreshold)):(Ze=null,Be.trigger("tap",[e.target]),i.tap&&(v=i.tap.call(Be,e,e.target)))):h==d?(c===x||c===y)&&(clearTimeout(Ke),Ze=null,Be.trigger("doubletap",[e.target]),i.doubleTap&&(v=i.doubleTap.call(Be,e,e.target))):h==g&&(c===x||c===y)&&(clearTimeout(Ke),Ze=null,Be.trigger("longtap",[e.target]),i.longTap&&(v=i.longTap.call(Be,e,e.target))),v}function R(){var t=!0;return null!==i.threshold&&(t=Ae>=i.threshold),t}function N(){var t=!1;return null!==i.cancelThreshold&&null!==Le&&(t=ve(Le)-Ae>=i.cancelThreshold),t}function V(){return null!==i.pinchThreshold?Ye>=i.pinchThreshold:!0}function z(){var t;return t=i.maxTimeThreshold?Re>=i.maxTimeThreshold?!1:!0:!0}function Y(t,e){if(i.allowPageScroll===c||j())t.preventDefault();else{var a=i.allowPageScroll===h;switch(e){case n:(i.swipeLeft&&a||!a&&i.allowPageScroll!=v)&&t.preventDefault();break;case r:(i.swipeRight&&a||!a&&i.allowPageScroll!=v)&&t.preventDefault();break;case o:(i.swipeUp&&a||!a&&i.allowPageScroll!=m)&&t.preventDefault();break;case s:(i.swipeDown&&a||!a&&i.allowPageScroll!=m)&&t.preventDefault()}}}function G(){var t=X(),e=W(),i=V();return t&&e&&i}function j(){return!!(i.pinchStatus||i.pinchIn||i.pinchOut)}function B(){return!(!G()||!j())}function F(){var t=z(),e=R(),i=X(),n=W(),r=N(),o=!r&&n&&i&&e&&t;return o}function U(){return!!(i.swipe||i.swipeStatus||i.swipeLeft||i.swipeRight||i.swipeUp||i.swipeDown)}function q(){return!(!F()||!U())}function X(){return Ue===i.fingers||i.fingers===b||!C}function W(){return 0!==qe[0].end.x}function Q(){return!!i.tap}function J(){return!!i.doubleTap}function Z(){return!!i.longTap}function K(){if(null==Ze)return!1;var t=Pe();return J()&&t-Ze<=i.doubleTapThreshold}function te(){return K()}function ee(){return(1===Ue||!C)&&(isNaN(Ae)||Ae<i.threshold)}function ie(){return Re>i.longTapThreshold&&w>Ae}function ne(){return!(!ee()||!Q())}function re(){return!(!K()||!J())}function oe(){return!(!ie()||!Z())}function se(){Qe=Pe(),Je=event.touches.length+1}function ae(){Qe=0,Je=0}function le(){var t=!1;if(Qe){var e=Pe()-Qe;e<=i.fingerReleaseThreshold&&(t=!0)}return t}function ce(){return!(Be.data(D+"_intouch")!==!0)}function he(t){t===!0?(Be.bind(Ie,O),Be.bind(_e,E),$e&&Be.bind($e,_)):(Be.unbind(Ie,O,!1),Be.unbind(_e,E,!1),$e&&Be.unbind($e,_,!1)),Be.data(D+"_intouch",t===!0)}function ue(t,e){var i=void 0!==e.identifier?e.identifier:0;return qe[t].identifier=i,qe[t].start.x=qe[t].end.x=e.pageX||e.clientX,qe[t].start.y=qe[t].end.y=e.pageY||e.clientY,qe[t]}function pe(t){var e=void 0!==t.identifier?t.identifier:0,i=fe(e);return i.end.x=t.pageX||t.clientX,i.end.y=t.pageY||t.clientY,i}function fe(t){for(var e=0;e<qe.length;e++)if(qe[e].identifier==t)return qe[e]}function de(){for(var t=[],e=0;5>=e;e++)t.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return t}function ge(t,e){e=Math.max(e,ve(t)),je[t].distance=e}function ve(t){return je[t]?je[t].distance:void 0}function me(){var t={};return t[n]=be(n),t[r]=be(r),t[o]=be(o),t[s]=be(s),t}function be(t){return{direction:t,distance:0}}function we(){return We-Xe}function Te(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.round(Math.sqrt(i*i+n*n))}function Se(t,e){var i=e/t*1;return i.toFixed(2)}function ye(){return 1>ze?l:a}function xe(t,e){return Math.round(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}function Ce(t,e){var i=t.x-e.x,n=e.y-t.y,r=Math.atan2(n,i),o=Math.round(180*r/Math.PI);return 0>o&&(o=360-Math.abs(o)),o}function Me(t,e){var i=Ce(t,e);return 45>=i&&i>=0?n:360>=i&&i>=315?n:i>=135&&225>=i?r:i>45&&135>i?s:o}function Pe(){var t=new Date;return t.getTime()}function De(e){e=t(e);var i=e.offset(),n={left:i.left,right:i.left+e.outerWidth(),top:i.top,bottom:i.top+e.outerHeight()};return n}function ke(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}var Oe=C||P||!i.fallbackToMouseEvents,Ee=Oe?P?M?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ie=Oe?P?M?"MSPointerMove":"pointermove":"touchmove":"mousemove",_e=Oe?P?M?"MSPointerUp":"pointerup":"touchend":"mouseup",$e=Oe?null:"mouseleave",He=P?M?"MSPointerCancel":"pointercancel":"touchcancel",Ae=0,Le=null,Re=0,Ne=0,Ve=0,ze=1,Ye=0,Ge=0,je=null,Be=t(e),Fe="start",Ue=0,qe=null,Xe=0,We=0,Qe=0,Je=0,Ze=0,Ke=null,ti=null;try{Be.bind(Ee,k),Be.bind(He,I)}catch(ei){t.error("events not supported "+Ee+","+He+" on jQuery.swipe")}this.enable=function(){return Be.bind(Ee,k),Be.bind(He,I),Be},this.disable=function(){return $(),Be},this.destroy=function(){return $(),Be.data(D,null),Be},this.option=function(e,n){if(void 0!==i[e]){if(void 0===n)return i[e];i[e]=n}else t.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}var n="left",r="right",o="up",s="down",a="in",l="out",c="none",h="auto",u="swipe",p="pinch",f="tap",d="doubletap",g="longtap",v="horizontal",m="vertical",b="all",w=10,T="start",S="move",y="end",x="cancel",C="ontouchstart"in window,M=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,P=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,D="TouchSwipe",k={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};t.fn.swipe=function(i){var n=t(this),r=n.data(D);if(r&&"string"==typeof i){if(r[i])return r[i].apply(this,Array.prototype.slice.call(arguments,1));t.error("Method "+i+" does not exist on jQuery.swipe")}else if(!(r||"object"!=typeof i&&i))return e.apply(this,arguments);return n},t.fn.swipe.defaults=k,t.fn.swipe.phases={PHASE_START:T,PHASE_MOVE:S,PHASE_END:y,PHASE_CANCEL:x},t.fn.swipe.directions={LEFT:n,RIGHT:r,UP:o,DOWN:s,IN:a,OUT:l},t.fn.swipe.pageScroll={NONE:c,HORIZONTAL:v,VERTICAL:m,AUTO:h},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:b}});var Mark={includes:{},globals:{},delimiter:">",compact:!1,_copy:function(t,e){e=e||[];for(var i in t)e[i]=t[i];return e},_size:function(t){return t instanceof Array?t.length:t||0},_iter:function(t,e){this.idx=t,this.size=e,this.length=e,this.sign="#",this.toString=function(){return this.idx+this.sign.length-1}},_pipe:function(t,e){var i,n,r,o;if(i=e.shift()){n=i.split(this.delimiter),r=n.shift().trim();try{o=Mark.pipes[r].apply(null,[t].concat(n)),t=this._pipe(o,e)}catch(s){}}return t},_eval:function(t,e,i){var n,r,o=this._pipe(t,e),s=o,a=-1;if(o instanceof Array)for(o="",n=s.length;++a<n;)r={iter:new this._iter(a,n)},o+=i?Mark.up(i,s[a],r):s[a];else o instanceof Object&&(o=Mark.up(i,s));return o},_test:function(t,e,i,n){var r=Mark.up(e,i,n).split(/\{\{\s*else\s*\}\}/);return(t===!1?r[1]:r[0])||""},_bridge:function(t,e){"."==e&&(e="\\.");var i,n,r="{{\\s*"+e+"([^/}]+\\w*)?}}|{{/"+e+"\\s*}}",o=new RegExp(r,"g"),s=t.match(o)||[],a=0,l=0,c=-1,h=0;for(n=0;n<s.length&&(i=n,c=t.indexOf(s[i],c+1),s[i].indexOf("{{/")>-1?l++:a++,a!==l);n++);return a=t.indexOf(s[0]),l=a+s[0].length,h=c+s[i].length,[t.substring(a,h),t.substring(l,c)]}};Mark.up=function(t,e,i){e=e||{},i=i||{};var n,r,o,s,a,l,c,h,u,p,f=/\{\{(.+?)\}\}/g,d=t.match(f)||[],g=[],v=0,m=0;for(i.pipes&&this._copy(i.pipes,this.pipes),i.includes&&this._copy(i.includes,this.includes),i.globals&&this._copy(i.globals,this.globals),i.delimiter&&(this.delimiter=i.delimiter),void 0!==i.compact&&(this.compact=i.compact);n=d[v++];)if(c=void 0,l="",s=n.indexOf("/}}")>-1,r=n.substr(2,n.length-(s?5:4)),r=r.replace(/`(.+?)`/g,function(t,i){return Mark.up("{{"+i+"}}",e)}),a=0===r.trim().indexOf("if "),g=r.split("|"),g.shift(),r=r.replace(/^\s*if/,"").split("|").shift().trim(),o=a?"if":r.split("|")[0],p=e[r],a&&!g.length&&(g=["notempty"]),!s&&t.indexOf("{{/"+o)>-1&&(c=this._bridge(t,o),n=c[0],l=c[1],v+=n.match(f).length-1),!/^\{\{\s*else\s*\}\}$/.test(n)){if(void 0!==(h=this.globals[r]))c=this._eval(h,g,l);
else if(u=this.includes[r])u instanceof Function&&(u=u()),c=this._pipe(Mark.up(u,e,i),g);else if(r.indexOf("#")>-1)i.iter.sign=r,c=this._pipe(i.iter,g);else if("."===r)c=this._pipe(e,g);else if(r.indexOf(".")>-1){for(r=r.split("."),p=Mark.globals[r[0]],p?m=1:(m=0,p=e);p&&m<r.length;)p=p[r[m++]];c=this._eval(p,g,l)}else a?c=this._pipe(p,g):p instanceof Array?c=this._eval(p,g,l):l?c=p?Mark.up(l,p):void 0:e.hasOwnProperty(r)&&(c=this._pipe(p,g));c instanceof Array&&(c=this._eval(c,g,l)),a&&(c=this._test(c,l,e,i)),t=t.replace(n,void 0===c?"???":c)}return this.compact?t.replace(/>\s+</g,"><"):t},Mark.pipes={empty:function(t){return t&&0!==(t+"").trim().length?!1:t},notempty:function(t){return t&&(t+"").trim().length?t:!1},blank:function(t,e){return t||0===t?t:e},more:function(t,e){return Mark._size(t)>e?t:!1},less:function(t,e){return Mark._size(t)<e?t:!1},ormore:function(t,e){return Mark._size(t)>=e?t:!1},orless:function(t,e){return Mark._size(t)<=e?t:!1},between:function(t,e,i){return t=Mark._size(t),t>=e&&i>=t?t:!1},equals:function(t,e){return t==e?t:!1},notequals:function(t,e){return t!=e?t:!1},like:function(t,e){return new RegExp(e,"i").test(t)?t:!1},notlike:function(t,e){return Mark.pipes.like(t,e)?!1:t},upcase:function(t){return String(t).toUpperCase()},downcase:function(t){return String(t).toLowerCase()},capcase:function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},chop:function(t,e){return t.length>e?t.substr(0,e)+"...":t},tease:function(t,e){var i=t.split(/\s+/);return i.slice(0,e).join(" ")+(i.length>e?"...":"")},trim:function(t){return t.trim()},pack:function(t){return t.trim().replace(/\s{2,}/g," ")},round:function(t){return Math.round(+t)},clean:function(t){return String(t).replace(/<\/?[^>]+>/gi,"")},size:function(t){return t.length},length:function(t){return t.length},reverse:function(t){return[].concat(t).reverse()},join:function(t,e){return t.join(e)},limit:function(t,e,i){return t.slice(+i||0,+e+(+i||0))},split:function(t,e){return t.split(e||",")},choose:function(t,e,i){return t?e:i||""},toggle:function(t,e,i,n){return i.split(",")[e.match(/\w+/g).indexOf(t+"")]||n},sort:function(t,e){var i=function(t,i){return t[e]>i[e]?1:-1};return[].concat(t).sort(e?i:void 0)},fix:function(t,e){return(+t).toFixed(e)},mod:function(t,e){return+t%+e},divisible:function(t,e){return t&&+t%e===0?t:!1},even:function(t){return t&&0===(1&+t)?t:!1},odd:function(t){return t&&1===(1&+t)?t:!1},number:function(t){return parseFloat(t.replace(/[^\-\d\.]/g,""))},url:function(t){return encodeURI(t)},bool:function(t){return!!t},falsy:function(t){return!t},first:function(t){return 0===t.idx},last:function(t){return t.idx===t.size-1},call:function(t,e){return t[e].apply(t,[].slice.call(arguments,2))},set:function(t,e){return Mark.globals[e]=t,""},log:function(t){return console.log(t),t}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof module&&module.exports?module.exports=Mark:"function"==typeof define&&define.amd&&define(function(){return Mark});var guiaTV=function(t){"use strict";function e(){var e,i=t.Deferred();return setTimeout(function(){e=["telecinco","antena3","la2","la1","cuatro","lasexta","historia"],v=[1,2,3,4,5,6,7],i.resolve(e)},3e3),i.promise()}function i(e){{var i=[],n=[];e.length}return t.when.apply(null,t.map(e,function(e,r){var o="datos/"+e+".json";n.push(t.get(o).done(function(t){m[r]=i[r]=t}).fail(function(){m[r]=i[r]=""}))})),t.when.apply(null,n).promise()}function n(e,i){var n=e||d,o=i||m,s={},a='<div id="{{idcanal}}" class="lineaCanal clearfix"></div>';t.each(n,function(t,e){s.idcanal=e;var i=Mark.up(a,s);D.append(i)}),t.each(o,function(e,i){var n=i.canal.nombre,o=t("#"+n);t.each(i.programas,function(t,e){var i=r(t,e);o.append(i)})})}function r(t,e){var i,n,r={},o='<div class="itemPrograma" id="{{id_programa}}" data-url="{{url_ficha}}"style="width:{{dur}}; left:{{diffHoraDia}};"><div class="itemProgramaInner {{clase}}"><a href="http://elmundo.es/television/programa/{{id_programa}}" style="display:none;">{{nombre}}</a><span class="categoria">{{categoria}}</span><h4>{{nombre}}</h4>{{if episodio}}<p>{{episodio}}</p>{{/if}}<span class="duracion">{{duracion}}</span><span class="fecha">{{infoHoraDuracion}}</span>{{if fav}}<span class="favorito"><i class="fa fa-star"></i></span>{{/if}}{{if ale}}<span class="alerta"><i class="fa fa-clock-o"></i></span>{{/if}}</div>{{if saleCruz}}<div class="mascara"><i class="fa fa-plus"></i></div>{{/if}}</div>',s=e.categoria;switch(s){case"1":n="catSeries",i="series";break;case"104":n="catCine",i="cine";break;case"31":n="catMagazines",i="magazines";break;case"20":n="catInformativos",i="informativos";break;case"90":n="catDeportes",i="deportes";break;case"INT_2":n="catConcursos",i="concursos";break;case"INT_1":n="catCorazon",i="corazón"}var a=e.duracion+" mins.",l=Math.ceil(y*e.duracion),c=new Date(e.hora_inicio),h=new Date(e.hora_fin),u=c-x;u=Math.floor(Math.floor(u/1e3)/60*y);var p=c.getHours();p=leftPad(p,2);var f=c.getMinutes();f=leftPad(f,2);var d=h.getHours();d=leftPad(d,2);var g=h.getMinutes();g=leftPad(g,2);var v=""+p+":"+f+" - "+d+":"+g;if(100*Math.random()<5)var m=!0;if(100*Math.random()<5)var b=!0;if(e.duracion<15)var w=!0;r={clase:n,dur:l+"px",diffHoraDia:u+"px",id_programa:e.id_programa,url_ficha:e.url_ficha,infoHoraDuracion:v,duracion:a,categoria:i.toUpperCase(),nombre:e.nombre,episodio:e.episodio,fav:void 0|m,ale:void 0|b,saleCruz:void 0|w};var T=Mark.up(o,r);return T}function o(e){var i=e||d,n={},r='<div class="itemCanal"><img src="http://estaticos.elmundo.es{{icono}}" /></div>';t.each(i,function(t){n.icono=m[t].canal.icono;var e=Mark.up(r,n);k.append(e)})}function s(){var t,e,i=new Date,n={};n.dias=[],n.horas=[];var r='{{dias}}<div class="itemDia" style="left:{{pos}}px">{{dia}}</div>{{/dias}}{{horas}}<div class="itemHoras" style="left:{{pos}}px;">{{texto}}</div>{{/horas}}';for(e=0;3>=e;e++){i.setTime(x.getTime()+864e5*e);var o=i.toLocaleDateString("es-ES",{weekday:"long",month:"long",day:"numeric"}),s=e*S*24;for(n.dias.push({dia:o,pos:s}),b.push([o,s]),t=0;24>t;t++){var a=leftPad(t,2)+":00",l=e*S*24+t*S;n.horas.push({texto:a,pos:l})}}var c=Mark.up(r,n);O.append(c)}function a(){var t={},e='<li class="itemDia" data-px="{{px}}"><a href="javascript://">{{diaText}}</a></li>';b.forEach(function(i){var n=i[0],r=i[1];t={diaText:n,px:r};var o=Mark.up(e,t);P.find("ul").append(o)})}function l(){var t=C.h,e=C.m,i=I.hide().find("p").text(t+":"+e).end().show(),n=parseInt(t)*S+parseInt(e)*y;i.css({left:n})}function c(){var t=.5*M.width(),e=parseInt(I.css("left"));e=parseInt(t-e),D.stop().animate({left:e+"px"},300),O.stop().animate({left:e+"px"},300);var i=parseInt(C.h)*S,n=parseInt(C.m)*y,r=i+n+e;I.stop().animate({left:r+"px"},300)}function h(){function e(t,e,i,n){if("start"==e)this.startTop=parseInt(this.css("top")),this.startLeft=parseInt(this.css("left")),D.addClass("dragging");else if("move"==e){var r=0,o=0;("up"==i||"down"==i)&&(o="up"==i?-n:n),("left"==i||"right"==i)&&(r="left"==i?-n:n);var s=this.startTop+o,a=this.startLeft+r;s>w&&(s=w),u-f>s&&(s=u-f),a>d+Math.abs(b)+50&&(a=d+Math.abs(b)+50),a<p-50-Math.abs(L)&&(a=p-50-Math.abs(L)),D.css({top:s+"px",left:a+"px"}),k.css({top:s+"px"}),O.css({left:a+"px"});var l=parseInt(C.h)*S,c=parseInt(C.m)*y,h=l+c+a;I.css({left:h+"px"})}else if("cancel"==e)D.removeClass("dragging");else if("end"==e)return D.removeClass("dragging"),!1}function i(){var e=parseInt(t(this).css("left"));e=parseInt(.5*p-e),l(e)}function n(){var e=-1*parseInt(t(this).data("px"));l(e+d)}function r(e,i){var n=t(i).is(".itemPrograma")?t(i):t(i).closest(".itemPrograma"),r=n.find("a").attr("href"),s=n.attr("id");o(s,r);var a=parseInt(n.css("left"))+.5*n.width();a=parseInt(.5*p-a),l(a)}function o(e){function i(){0===parseInt(_.css("right"))&&_.stop().animate({right:-S},300,"swing")}i(),t.ajax({url:"fichaPrograma.html",data:{progId:e},dataType:"html",cache:!1}).done(function(t){_.find(".contenido").html(t),_.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0,iOSNativeScrolling:!0}),_.animate({right:0},500,"swing",function(){_.find(".cierra").on("click",function(t){t.preventDefault(),i()})})})}function s(e){var i=t(e.currentTarget).attr("class").split(" ")[0];D.hasClass(i)?(D.removeClass(i),t(this).removeClass("activo")):(D.addClass(i),t(this).addClass("activo"))}function a(){v.length>=1&&t.each(v,function(t,e){e++,$.find("li:nth-child("+e+")").trigger("click")})}function l(t){var e=t||0;D.stop().animate({left:e+"px"},300),O.stop().animate({left:e+"px"},300);var i=parseInt(C.h)*S,n=parseInt(C.m)*y,r=i+n+e;I.stop().animate({left:r+"px"},300)}function c(e){var i=t(e.currentTarget).attr("class").split(" ")[1],n=D.css("top").split("px")[0],r=k.css("top").split("px")[0],o=k.length;switch(i){case"btnArriba":r-T>w?(k.css("top",r-T),D.css("top",n-T)):(k.css("top",w+"px"),D.css("top",w+"px"));break;case"btnAbajo":var s=r-o*T;s>r+T?(k.css("top",r+T),D.css("top",n+T)):(k.css("top",s+"px"),D.css("top",s+"px"))}}function h(e){var i=t(e.currentTarget).attr("class").split(" ")[1],n=parseInt(D.css("left"));switch(e.stopPropagation(),console.log(n),i){case"btnIzda":l(Math.floor(parseInt(n+S)));break;case"btnDrcha":l(Math.floor(parseInt(n-S)))}}var u=M.height(),p=M.width(),f=D.height(),d=(D.offsetWidth,k.width()),g=t("#contProgramas > div > div:first-child"),m=[];t.each(g,function(){m.push(this.offsetLeft)});var b=m.min(),x=t("#contProgramas > div > div:last-child"),A=[];t.each(x,function(){A.push(this.offsetLeft+t(this).width())});var L=A.max();M.find(".preload-wrapper").remove(),D.swipe({tap:function(t,e){r(t,e)},triggerOnTouchEnd:!0,swipeStatus:e,threshold:10,allowPageScroll:!1,excludedElements:t.fn.swipe.defaults.excludedElements+", #horaActual",fingers:"all"}),O.on("click",".itemHoras",i),$.on("click","li",s),a(),P.on("click","li",n),H.on("click",".btn",c),E.on("click",".btn",h)}function u(){var e=t('<ul class="listaCanales clearfix">'),i="datos/listadocanales.json",n={},r='{{letras}}<li class="itemLetra" data-letra="{{.}}">{{.}}</li>{{/letras}}';n.letras=[],t.get(i).done(function(i){g=i;var o={},s='{{canales}}<li class="itemCanal" data-letra="{{currentLetra}}" data-idcanal="{{id_programa}}"><span class="check"></span>{{nombre_completo|chop>23}}</li>{{/canales}}';t.each(g,function(t,i){Mark.globals.currentLetra=t,o={letra:t,canales:i},n.letras.push(t);var r=Mark.up(s,o);e.append(r)});var a=Mark.up(r,n);N.find(".listaLetras").append(a),N.find(".nano-content").html(e),t.each(N.find(".itemCanal"),function(){-1!=d.indexOf(t(this).data("idcanal"))&&t(this).find(".check").addClass("sel")}),N.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0,iOSNativeScrolling:!0})})}function p(){var e=t('<ul class="orden vertical">'),i={},n='<li class="itemCanal" data-idcanal="{{nombre}}"><span class="check sel"></span>{{nombre_completo|chop>23}}</li>';t.each(m,function(t,r){i=r.canal;var o=Mark.up(n,i);e.append(o)}),R.find(".nano-content").html(e),R.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0,iOSNativeScrolling:!0})}function f(){function e(){var e=t(this).find(".check"),i=e.hasClass("sel"),n=t(this).data("idcanal"),r=R.find(".itemCanal").filter(function(){return t(this).data("idcanal")===n});i?(e.toggleClass("sel"),r.find(".check").toggleClass("sel")):(e.toggleClass("sel"),r.length?r.find(".check").toggleClass("sel"):t(this).clone().appendTo(R.find("ul"))),R.find(".nano").nanoScroller().nanoScroller({scroll:"bottom",alwaysVisible:!0})}function i(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var i=t(this).parent(".itemCanal").data("idcanal"),n=N.find(".itemCanal").filter(function(){return t(this).data("idcanal")===i});t(this).toggleClass("sel"),n.find(".check").toggleClass("sel")}function n(){t(this).toggleClass("activo"),L.toggle("fast"),R.find(".nano").nanoScroller().nanoScroller({scroll:"top",alwaysVisible:!0}),N.find(".nano").nanoScroller().nanoScroller({scroll:"top",alwaysVisible:!0})}function r(){var e=t(this),i=t(this).siblings(".itemLetra"),n=e.data("letra"),r=N.find(".itemCanal"),o=e.hasClass("activo");if(o)r.show(),e.removeClass("activo"),i.removeClass("activo");else{var s=r.filter(function(){return t(this).data("letra")==n});s.show(),r.not(s).hide(),i.removeClass("activo"),e.addClass("activo")}N.find(".nano").nanoScroller().nanoScroller({scroll:"top",alwaysVisible:!0})}function o(){var e,i=t("#txtBuscar"),n=i.val(),r=N.find(".itemCanal");n.length>=3&&" "!=n&&""!=n&&void 0!=n?(e=r.filter(function(){var e=t.trim(t(this).text());return e.indexOf(n)>-1}),e.show(),r.not(e).hide()):(N.find(".itemLetra").removeClass("activo"),r.show())}N.on("click",".itemCanal",e),R.on("click",".check",i),A.on("click",n),N.on("click",".itemLetra",r),N.on("click",".fa-search",o),t("#txtBuscar").on("keyup",o);var s,a=R.find("ul.orden").sortable({group:"orden",pullPlaceholder:!0,onDrop:function(e,i,n){var r=a.sortable("serialize").get(),o=(JSON.stringify(r,null," "),t("<li/>").css({height:0}));e.before(o),o.detach(),n(e,i)},onDragStart:function(t,e,i){var n=t.offset(),r=e.rootGroup.pointer,o=R.find(".nano-content").get(0).scrollTop;o=Math.floor(o),s={left:r.left-n.left,top:r.top-n.top-o},i(t,e)},onDrag:function(t,e){t.css({left:e.left-s.left,top:e.top-s.top})}})}var d=["la1","la2","antena3","cuatro","telecinco","lasexta"],g={},v=[],m=[],b=[],w=60,T=90,S=320,y=S/60,x=new Date,C={h:leftPad(x.getHours(),2),m:leftPad(x.getMinutes(),2)};x.setTime(Date.parse("Mon, Jul 14 2014"));var M=t("#viewPort"),P=t("#selectorDias"),D=t("#contProgramas"),k=t("#contCanales"),O=t("#barraHoras"),E=t("#iconosHoras"),I=t("#horaActual"),_=t("#fichaPrograma"),$=t("#selectorCategorias"),H=t("#botonesCanales"),A=t("#suscribirCanales"),L=t("#selectorCanales"),R=t("#ordenCanales"),N=t("#barraLetras");return function(){L.hide();{var t=e();t.then(function(t){return d=t,i(d)}).then(function(){o(d),n(d,m),s(),a(),l(),c(),h(),p(),u(),f()})}}(),t.fn.exists=function(){return this.length>0},this}(jq111);Array.prototype.max=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]>t&&(t=this[i]);return t},Array.prototype.min=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]<t&&(t=this[i]);return t};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS1zb3J0YWJsZS5qcyIsImpxdWVyeS5uYW5vc2Nyb2xsZXIuanMiLCJqcXVlcnkudG91Y2hTd2lwZS5qcyIsIm1hcmt1cC5qcyIsImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE4aUNBLFFBQUEsY0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBRUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEdBQUEsS0FDQSxHQUFBLFFBQUEsRUFBQSxVQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsS0FDQSxFQUFBLGFBQUEsRUFBQSxrQkFFQSxHQUFBLEVBRUEsVUFBQSxPQUFBLE9BQUEsR0FBQSxJQUFBLE9BQUEsR0FBQSxFQUFBLFdBT0EsUUFBQSxZQUFBLEdBR0EsSUFBQSxHQUZBLEdBQUEsT0FBQSxHQUFBLElBQ0EsRUFBQSxTQUFBLE9BQUEsTUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLENBRUEsSUFEQSxHQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLE9BQ0EsSUFBQSxJQUFBLEVBQUEsUUFBQSxHQUFBLE1BQUEsVUFBQSxFQUFBLFVBQUEsRUFBQSxPQUFBLEVBQUEsU0FFQSxNQUFBLE1BT0EsUUFBQSxhQUFBLEdBQ0EsYUFBQSxFQUFBLEdBQUEsSUFTQSxRQUFBLFNBQUEsRUFBQSxHQUVBLElBREEsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLElBQUEsQ0FFQSxPQUFBLElDaGtDQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBaUlBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FDQSxPQUFBLEdBQUEsRUFHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxTQUFBLFVBR0EsS0FGQSxFQUFBLEdBQUEsRUFFQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxJQUNBLEdBQUEsTUFBQSxTQUFBLEVBQUEsSUFBQSxlQUFBLElBQ0EsRUFBQSxLQUFBLFNBQUEsRUFBQSxJQUFBLGNBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQUEsYUFBQSxFQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGNBQUEsSUFLQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsUUFDQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxLQUlBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLElBTUEsS0FKQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQ0EsS0FFQSxLQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBT0EsT0FMQSxHQUFBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxLQU9BLFFBQUEsR0FBQSxHQUNBLEtBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxHQUNBLEtBQUEsY0FFQSxLQUFBLFFBQUEsWUFDQSxLQUFBLFlBQUEsRUFBQSxNQUFBLEtBQUEsT0FBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLE1BQUEsS0FBQSxLQUFBLE1BQ0EsS0FBQSxVQUFBLEVBQUEsTUFBQSxLQUFBLEtBQUEsTUFDQSxLQUFBLFlBQUEsRUFBQSxLQUFBLFFBQUEsYUFFQSxFQUFBLGdCQUNBLEtBQUEsUUFBQSxjQUFBLElBbU9BLFFBQUEsR0FBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQUEsVUFBQSxFQUFBLEdBRUEsS0FBQSxNQUFBLEVBQUEsSUFBQSxLQUFBLFNBQ0EsS0FBQSxVQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUEsTUFDQSxLQUFBLE9BQUEsS0FBQSxVQUFBLFFBQUEsUUFBQSxLQUFBLFVBQUEsUUFBQSxZQUVBLElBQUEsR0FBQSxLQUFBLFVBQUEsUUFBQSxRQUNBLE1BQUEsT0FBQSxFQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQSxHQUVBLEtBQUEsT0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsRUFBQSxNQUFBLEtBQUEsU0FBQSxPQUVBLEtBQUEsUUFBQSxNQUNBLEtBQUEsTUFBQSxXQUFBLEtBQUEsTUFsYkEsR0FBQSxHQUNBLEdBRUEsTUFBQSxFQUVBLE1BQUEsRUFHQSxRQUFBLEdBRUEsUUFBQSxFQUVBLFVBQUEsR0FFQSxHQUtBLFVBQUEsYUFFQSxjQUFBLEdBRUEsa0JBQUEsU0FFQSxTQUFBLEVBR0EsTUFBQSxFQUVBLE9BQUEsR0FFQSxTQUFBLEdBRUEsYUFBQSxLQUVBLFVBQUEsV0FFQSxhQUFBLFVBRUEsaUJBQUEsY0FJQSxjQUFBLFdBQ0EsT0FBQSxHQUlBLFNBQUEsYUFHQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxJQU9BLFlBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLE9BQUEsRUFBQSxTQUNBLE1BQUEsRUFBQSxVQUVBLEVBQUEsU0FBQSxFQUFBLE1BQUEsUUFBQSxjQUNBLEVBQUEsUUFBQSxTQUFBLEVBQUEsTUFBQSxRQUFBLFlBR0EsT0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFlBQUEsRUFBQSxNQUFBLFFBQUEsY0FBQSxXQUFBLFNBQ0EsRUFBQSxRQUFBLFlBQUEsRUFBQSxNQUFBLFFBQUEsWUFJQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE9BQUEsU0FBQSxNQUFBLDhCQUFBLFFBQ0EsRUFBQSxrQkFDQSxJQU1BLFlBQUEsNEJBR0EsaUJBQUEsRUFHQSxVQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLE9BRUEsT0FBQSxJQUNBLElBQ0EsRUFBQSxLQUNBLEVBQUEsU0FBQSxTQUdBLEdBQUEsb0JBQ0EsR0FBQSxTQUVBLElBSUEsVUFBQSxHQUVBLEtBQ0EsRUFBQSxFQUNBLEdBQ0EsS0FBQSxFQUNBLElBQUEsRUFDQSxPQUFBLEVBQ0EsTUFBQSxHQUVBLEdBQ0EsTUFBQSx5Q0FDQSxLQUFBLDBEQUNBLEtBQUEsd0NBQ0EsT0FBQSxtQkFFQSxFQUFBLGVBMkVBLEdBQUEsSUFBQSxTQUFBLEdBUUEsTUFQQSxHQUFBLEVBQUEsU0FDQSxFQUFBLFFBQUEsSUFDQSxFQUFBLE1BQUEsS0FFQSxFQUFBLEVBQUEsT0FBQSxHQUFBLEdBQUEsSUFHQSxFQUFBLEVBQUEsUUFHQSxFQUFBLFdBQ0EsU0FBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLFVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxlQUdBLEtBQUEsS0FBQSxFQUFBLEVBQUEsUUFBQSxRQUFBLEtBQUEsUUFBQSxjQUNBLEtBQUEsY0FBQSxHQUVBLEtBQUEsS0FBQSxHQUFBLEtBQUEsUUFBQSxVQUNBLEtBQUEsUUFBQSxZQUFBLEtBQUEsS0FBQSxFQUFBLFlBQUEsS0FJQSxLQUFBLFdBQUEsR0FDQSxLQUFBLGdCQUFBLE1BRUEsS0FBQSxrQkFDQSxLQUFBLGNBQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxJQUFBLEtBQUEsU0FBQSxDQUNBLElBQUEsS0FBQSxZQUFBLEtBQUEsS0FBQSxTQUNBLE1BRUEsTUFBQSxRQUFBLFlBQUEsS0FBQSxLQUFBLEtBQUEsY0FBQSxFQUFBLFlBQUEsR0FDQSxLQUFBLEtBQUEsT0FBQSxLQUFBLGFBQ0EsS0FBQSxVQUFBLEVBR0EsS0FBQSxXQUFBLEdBRUEsS0FBQSxRQUFBLE9BQUEsS0FBQSxLQUNBLEVBQUEsS0FBQSxRQUFBLEtBQUEsS0FBQSxnQkFDQSxFQUFBLE9BQ0EsRUFFQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLEVBQUEsS0FBQSxjQUNBLEVBQUEsS0FBQSxRQUFBLFlBRUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxLQUNBLEtBQUEsc0JBQ0EsS0FBQSxZQUFBLFNBQ0EsS0FBQSxpQkFBQSxLQUdBLEtBQUEsU0FBQSxHQUNBLEtBQUEsZ0JBQUEsT0FFQSxLQUFBLGNBQUEsRUFFQSxLQUFBLFdBRUEsS0FBQSxZQUFBLFFBQUEsUUFBQSxHQUNBLEtBQUEsWUFBQSxPQUFBLEtBQUEsTUFBQSxTQUVBLEtBQUEsUUFBQSxTQUFBLEtBQUEsS0FBQSxLQUFBLGNBQUEsRUFBQSxTQUFBLEdBRUEsS0FBQSxRQUFBLE9BQUEsS0FBQSxLQUFBLEtBQUEsYUFBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEdBR0EsS0FBQSxrQkFDQSxLQUFBLG9CQUNBLEtBQUEsaUJBQUEsS0FBQSxjQUFBLEVBQ0EsS0FBQSxVQUFBLElBR0Esa0JBQUEsU0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEtBQUEsaUJBQUEsS0FBQSxRQUNBLEVBQUEsS0FBQSxxQkFBQSxLQUFBLFlBUUEsS0FMQSxHQUFBLEdBQUEsRUFBQSxLQUFBLHlCQUNBLEVBQ0EsR0FDQSxFQUFBLEVBQUEsT0FFQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBRUEsS0FBQSxHQUFBLEtBQUEsUUFBQSxnQkFBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFDQSxLQUFBLEVBQUEsU0FBQSxDQUNBLElBQUEsS0FBQSxtQkFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLHFCQUNBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsa0JBQUEsRUFBQSxHQUNBLE9BQUEsSUFJQSxLQUFBLGdCQUNBLEtBQUEsY0FBQSxJQUVBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxrQkFDQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsTUFHQSxFQUFBLEdBQUEsS0FBQSxhQUNBLEtBQUEsaUJBQUEsRUFDQSxLQUFBLGNBQUEsRUFDQSxLQUFBLFFBQUEsVUFBQSxLQUFBLFlBQUEsRUFBQSxLQUVBLHVCQUFBLFdBR0EsTUFGQSxNQUFBLHFCQUNBLEVBQUEsS0FBQSxXQUFBLEtBQUEsdUJBQUEsS0FBQSxRQUFBLFdBQUEsS0FBQSxvQkFDQSxLQUFBLHFCQUVBLGFBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUFBLEtBQUEsUUFBQSxtQkFBQSxLQUFBLElBRUEsaUJBQUEsV0FDQSxHQUFBLEtBQUEsZUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxPQUFBLEVBQ0EsRUFBQSxLQUFBLFdBQUEsR0FBQSxxQkFFQSxLQUFBLEtBQUEsUUFBQSxVQUNBLEtBQUEsS0FDQSxHQUFBLEVBQUEsSUFBQSxLQUFBLFdBQUEsR0FBQSxzQkFBQSxHQUFBLENBS0EsR0FBQSxDQUNBLE9BS0EsS0FBQSxhQUFBLEVBRUEsTUFBQSxNQUFBLGNBRUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxFQUVBLElBQUEsS0FBQSxtQkFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxtQkFDQSxNQUFBLG9CQUFBLEtBQUEsZ0JBQ0EsS0FBQSxnQkFBQSxFQUdBLEtBQUEsWUFBQSxLQUFBLFFBQ0EsS0FBQSxRQUFBLEdBRUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxFQUNBLE9BQUEsTUFBQSxJQUNBLEtBQUEsSUFBQSxLQUFBLFFBQUEsS0FBQSxFQUFBLE1BQ0EsS0FBQSxJQUFBLEtBQUEsUUFBQSxJQUFBLEVBQUEsT0FDQSxLQUFBLFFBQUEsVUFFQSxXQUFBLFNBQUEsR0FDQSxPQUNBLEtBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxRQUdBLGdCQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsTUFBQSxVQUFBLEtBQUEsUUFBQSxNQUdBLEtBQUEsV0FDQSxhQUFBLEtBQUEsa0JBQ0EsS0FBQSxpQkFBQSxXQUFBLFdBQ0EsRUFBQSxVQUFBLEdBQ0EsS0FBQSxRQUFBLFNBR0EsT0FBQSxXQUNBLEtBQUEsa0JBQ0EsS0FBQSxxQkFFQSxnQkFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsR0FBQSxPQUFBLE9BQUEsU0FFQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLGFBR0Esa0JBQUEsV0FDQSxLQUFBLGFBQUEsR0FHQSxnQkFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxzQkFHQSxTQUFBLFNBQUEsR0FDQSxFQUFBLEtBRUEsS0FEQSxHQUFBLEdBQUEsS0FBQSxXQUFBLE9BQ0EsS0FDQSxLQUFBLFdBQUEsR0FBQSxTQUFBLElBR0EsaUJBQUEsV0FDQSxLQUFBLG9CQUFBLEdBRUEsU0FBQSxXQUNBLEVBQUEsS0FBQSxRQUFBLE9BQUEsSUFxQkEsRUFBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBRUEsS0FBQSxXQUNBLEVBQUEsY0FDQSxLQUFBLFFBQUEsTUFDQSxLQUFBLFlBQUEsSUFDQSxFQUFBLFNBQUEsRUFBQSxPQUdBLFlBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLE9BQ0EsY0FBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLGNBQUEsUUFBQSxRQUVBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsb0JBQ0EsRUFDQSxHQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxVQUNBLEdBQUEsRUFBQSxRQUFBLGVBQ0EsRUFBQSxRQUFBLGNBQUEsRUFBQSxLQUFBLEtBRUEsS0FBQSxHQUFBLEVBRUEsTUFEQSxHQUFBLGdCQUFBLEtBQUEsS0FBQSxPQUFBLFdBQ0EsQ0FFQSxNQUFBLEtBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsRUFDQSxLQUFBLEdBQUEsS0FBQSxjQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLGtCQUFBLEVBQUEsRUFDQSxJQUFBLEVBQ0EsT0FBQSxNQUNBLElBQUEsRUFFQSxNQURBLE1BQUEsZ0JBQUEsRUFBQSxJQUNBLElBSUEsZ0JBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxNQUFBLElBQ0EsRUFBQSxLQUFBLGVBQUEsR0FDQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLFNBQ0EsR0FDQSxLQUFBLEVBQUEsS0FDQSxNQUFBLEVBQUEsS0FBQSxFQUNBLElBQUEsRUFBQSxJQUNBLE9BQUEsRUFBQSxJQUFBLEVBRUEsSUFBQSxLQUFBLFFBQUEsU0FBQSxDQUNBLEdBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsQ0FDQSxJQUNBLEVBQUEsU0FDQSxFQUFBLFFBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsQ0FDQSxHQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLENBQ0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEVBQUEsR0FFQSxFQUFBLE1BQUEsRUFBQSxFQUVBLEtBQUEsY0FBQSxLQUNBLEVBQUEsR0FDQSxLQUFBLFVBQUEsZ0JBQUEsS0FBQSxFQUFBLEVBQUEsSUFFQSxrQkFBQSxXQU9BLE1BTkEsTUFBQSxpQkFDQSxLQUFBLE1BQUEsS0FBQSxhQUFBLEtBQUEsR0FBQSxRQUFBLE9BQ0EsU0FBQSxLQUFBLE1BQUEsUUFBQSxpQkFBQSxNQUFBLEtBQUEsTUFBQSxRQUFBLGFBQUEsS0FDQSxNQUNBLEVBQUEsS0FBQSxNQUFBLEtBQUEsa0JBQUEsS0FBQSxRQUFBLFlBRUEsS0FBQSxnQkFFQSxvQkFBQSxXQUNBLEdBQUEsR0FDQSxFQUFBLEtBQUEsRUFPQSxPQUhBLEdBREEsYUFBQSxFQUFBLElBQUEsYUFBQSxhQUFBLEVBQUEsSUFBQSxhQUFBLFVBQUEsRUFBQSxJQUFBLFlBQ0EsRUFFQSxFQUFBLGdCQUdBLGNBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxRQUFBLFFBQUEsS0FBQSxrQkFBQSxJQUVBLGtCQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxHQUFBLEVBQ0EsSUFBQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxhQUFBLEtBQUEsTUFBQSxHQUFBLFlBR0EsSUFGQSxHQUFBLEVBRUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsVUFBQSxLQUFBLFNBQ0EsVUFBQSxLQUFBLFVBQ0EsTUFBQSxLQUVBLEdBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBLE1BRUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsR0FFQSxNQUFBLElBRUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxVQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxXQU1BLE9BSkEsR0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsS0FBQSxJQUVBLEVBQUEsU0FBQSxJQUVBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLE9BQUEsWUFFQSxFQUFBLEtBQUEsYUFBQSxFQUFBLEdBQUEsSUFBQSxLQUFBLFFBQUEsU0FBQSxJQUFBLFdBQ0EsTUFBQSxHQUFBLFdBQUEsRUFBQSxPQUFBLEtBQ0EsS0FFQSxPQUFBLE1BQUEsVUFBQSxRQUFBLFVBQUEsRUFBQSxFQUFBLElBRUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEtBQUEsVUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsS0FBQSxFQUNBLElBQ0EsRUFBQSxTQUFBLEtBR0EsRUFBQSxPQUVBLGlCQUFBLFdBQ0EsS0FBQSxlQUFBLEdBRUEsU0FBQSxXQUNBLEdBQUEsR0FBQSxJQUVBLE1BQUEsT0FBQSxJQUFBLEVBQUEsTUFBQSxLQUFBLFFBQ0EsS0FBQSxHQUFBLFdBQUEsR0FFQSxLQUFBLFFBQUEsT0FDQSxLQUFBLE1BQUEsV0FBQSxFQUFBLEtBQUEsS0FBQSxNQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUdBLEVBQUEsS0FBQSxLQUFBLFVBQUEsV0FDQSxFQUFBLFdBQUEsS0FBQSxNQUtBLElBQUEsSUFDQSxPQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsS0FHQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsS0FHQSxVQUFBLFdBQ0EsTUFBQSxNQUFBLFdBQUEsS0FBQSxJQUFBLElBRUEsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxzQkFHQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLGNBS0EsR0FBQSxPQUFBLEVBQUEsVUFBQSxHQVNBLEVBQUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsTUFBQSxVQUFBLE1BQUEsS0FBQSxVQUFBLEVBRUEsT0FBQSxNQUFBLElBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxLQUFBLEVBRUEsT0FBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLElBQUEsTUFDQSxHQUFBLElBQUEsR0FDQSxnQkFBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBRUEsVUFJQSxNQUFBLE9BQUEsWUN6cUJBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsWUFDQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsSUFRQSxVQUFBLFlBUUEsWUFBQSxjQVFBLGFBQUEsZUFRQSxvQkFBQSxFQVNBLHNCQUFBLEVBUUEsZUFBQSxFQVFBLGVBQUEsRUFRQSxXQUFBLEtBUUEsZ0JBQUEsR0FRQSxnQkFBQSxLQVFBLGdCQUFBLEtBUUEsY0FBQSxNQVVBLEVBQUEsWUFTQSxFQUFBLFNBUUEsRUFBQSxZQVFBLEVBQUEsYUFTQSxFQUFBLFlBUUEsRUFBQSxhQVNBLEVBQUEsVUFRQSxFQUFBLFNBU0EsRUFBQSxPQVNBLEVBQUEsUUFTQSxFQUFBLEtBU0EsRUFBQSxXQVNBLEVBQUEsaUJBU0EsRUFBQSxPQVNBLEVBQUEsUUFTQSxFQUFBLFVBU0EsRUFBQSxRQVNBLEVBQUEsWUFTQSxFQUFBLGdDQUFBLEVBQUEsVUFBQSxTQUFBLFdBQUEsS0FBQSxFQUFBLFVBQUEsYUFBQSxFQUFBLGNBU0EsRUFBQSxLQUNBLEVBQUEsRUFBQSxzQkFDQSxFQUFBLEVBQUEscUJBQ0EsRUFBQSxFQUFBLGNBQUEsT0FBQSxNQUNBLEVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUVBLEtBREEsR0FBQSxJQUFBLFVBQUEsT0FBQSxNQUFBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsRUFHQSxHQUZBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLFdBQ0EsSUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxFQUdBLFFBQUEsS0FFQSxFQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsR0FDQSxFQUVBLEtBQUEsRUFDQSxFQUVBLEVBQUEsRUFBQSxPQUFBLEdBQUEsY0FBQSxFQUFBLE9BQUEsSUFFQSxFQUFBLEVBQUEsYUFDQSxFQUFBLEtBQUEsRUFTQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FXQSxPQVZBLEdBQUEsRUFBQSxjQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxTQUFBLFdBQ0EsRUFBQSxNQUFBLFFBQ0EsRUFBQSxPQUFBLFFBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxJQUFBLFVBQ0EsRUFBQSxLQUFBLFlBQUEsR0FDQSxFQUFBLEVBQUEsWUFBQSxFQUFBLFlBQ0EsRUFBQSxLQUFBLFlBQUEsR0FDQSxHQUVBLEVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxDQUdBLE9BRkEsR0FBQSxFQUFBLFVBQUEsV0FDQSxFQUFBLDhCQUFBLEtBQUEsS0FJQSxFQUFBLG1CQUFBLEtBQUEsR0FDQSxJQUNBLEVBQUEsRUFBQSxHQUFBLFFBQUEsT0FBQSxLQUVBLElBQUEsRUFBQSxLQU5BLEdBZUEsRUFBQSxXQUNBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsSUFBQSxFQUFBLEtBQ0EsS0FBQSxJQUFBLEVBQUEsS0FBQSxJQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxpQkFBQSxHQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxlQUFBLEdBQ0EsS0FBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLFFBQ0EsS0FBQSxTQUFBLEtBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxjQUNBLEtBQUEsU0FBQSxLQUFBLFdBQUEsS0FBQSxRQUFBLFVBQUEsR0FDQSxLQUFBLFFBQUEsS0FBQSxTQUFBLEdBQ0EsS0FBQSxpQkFBQSxFQUNBLEtBQUEsUUFBQSxvQkFBQSxNQUFBLEtBQUEsR0FBQSxNQUFBLHdCQUNBLEtBQUEsa0JBRUEsS0FBQSxXQUVBLEtBQUEsZUFDQSxLQUFBLFlBQ0EsS0FBQSxRQXNpQkEsTUF6aEJBLEdBQUEsVUFBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEtBQUEsU0FHQSxHQUFBLEVBQUEsT0FBQSxHQUNBLElBQUEsR0FBQSxFQUFBLGNBQUEsT0FBQSxHQUFBLElBQUEsR0FBQSxFQUFBLGNBQUEsT0FBQSxJQUNBLEVBQUEscUJBRUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxDQUNBLElBQUEsRUFBQSxnQkFBQSxFQUFBLGNBQUEsV0FDQSxRQUVBLElBQUEsR0FBQSxFQUFBLGNBQUEsV0FBQSxHQUFBLElBQUEsR0FBQSxFQUFBLGNBQUEsV0FBQSxJQUNBLEVBQUEsbUJBWUEsRUFBQSxVQUFBLGdCQUFBLFdBQ0EsS0FBQSxTQUFBLEtBQ0Esd0JBQUEsVUFFQSxLQUFBLG9CQUFBLEVBQ0EsS0FBQSxVQUFBLEdBV0EsRUFBQSxVQUFBLG1CQUFBLFdBQ0EsR0FBQSxHQUFBLENBQ0EsR0FBQSxLQUFBLFFBQ0EsS0FBQSxhQUFBLEVBQUEsYUFBQSxFQUFBLGFBQ0EsS0FBQSxjQUFBLEtBQUEsa0JBQUEsRUFDQSxLQUFBLGlCQUFBLEVBQUEsVUFDQSxFQUFBLEtBQUEsaUJBQUEsS0FBQSxpQkFBQSxPQUFBLEtBQUEsaUJBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxpQkFBQSxLQUFBLGlCQUNBLFNBQUEsR0FDQSxLQUFBLElBQUEsUUFBQSxVQUNBLFNBQUEsS0FBQSxpQkFDQSxRQUFBLEtBQUEsYUFDQSxVQUFBLElBR0EsS0FBQSxxQkFDQSxLQUFBLGFBQUEsS0FBQSxXQUFBLEtBQUEsYUFDQSxLQUFBLFVBQUEsSUFBQSxLQUFBLGFBQUEsRUFBQSxLQUFBLGlCQUFBLEtBQUEsYUFBQSxLQUFBLGVBWUEsRUFBQSxVQUFBLGtCQUFBLFdBQ0EsR0FBQSxFQUNBLElBQ0EsS0FDQSxFQUFBLEdBQUEsZ0JBQUEsS0FBQSxVQUFBLE9BRUEsR0FDQSxJQUFBLEtBQUEsV0FHQSxHQUNBLEdBQUEsS0FBQSxXQUNBLEVBQUEsS0FBQSxXQUVBLEtBQUEsVUFBQSxFQUFBLFNBQUEsR0FDQSxNQUFBLFlBRUEsTUFEQSxHQUFBLFVBQUEsS0FDQSxFQUFBLE9BQUEsSUFBQSxLQUVBLFFBRUEsS0FBQSxPQUFBLElBQUEsSUFXQSxFQUFBLFVBQUEsYUFBQSxXQUNBLEtBQUEsUUFDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FTQSxNQVJBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxTQUFBLElBQ0EsRUFBQSxPQUFBLEdBQUEsRUFBQSxVQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLEtBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLEtBQUEsRUFBQSxFQUFBLE9BQUEsS0FDQSxJQUVBLE1BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBUUEsTUFQQSxHQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLEVBQUEsY0FDQSxFQUFBLFNBQ0EsRUFBQSxrQkFBQSxFQUFBLGNBQUEsRUFBQSxnQkFBQSxFQUFBLGFBQ0EsRUFBQSxJQUFBLFFBQUEsYUFDQSxJQUFBLEVBQUEsa0JBQUEsSUFBQSxFQUFBLGVBQ0EsRUFBQSxJQUFBLFFBQUEsY0FFQSxJQUVBLE1BQ0EsR0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUtBLE1BSkEsR0FBQSxnQkFBQSxFQUNBLEVBQUEsS0FBQSxZQUFBLFVBQ0EsRUFBQSxJQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsS0FDQSxJQUVBLE1BQ0EsT0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUNBLEVBQUEsVUFFQSxNQUNBLFNBQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUlBLE1BSEEsR0FBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLGNBQUEsUUFBQSxHQUFBLEVBQUEsYUFDQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEtBQUEsSUFDQSxJQUVBLE1BQ0EsT0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsRUFBQSxxQkFDQSxFQUFBLGlCQUdBLEVBQUEscUJBQ0EsRUFBQSxRQUFBLEVBQUEsVUFDQSxFQUFBLHFCQUVBLE1BQUEsSUFHQSxFQUFBLGtCQUFBLEVBQUEsY0FDQSxFQUFBLFFBQUEsc0JBQ0EsRUFBQSxpQkFBQSxFQUFBLEdBRUEsRUFBQSxnQkFBQSxFQUFBLGNBQ0EsRUFBQSxJQUFBLFFBQUEsY0FFQSxJQUFBLEVBQUEsbUJBQ0EsRUFBQSxRQUFBLHNCQUNBLEVBQUEsaUJBQUEsRUFBQSxHQUVBLElBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLGtCQUlBLE1BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsTUFBQSxFQVFBLE1BTEEsR0FBQSxFQUFBLE9BQUEsRUFBQSxZQUFBLEVBQUEsZUFBQSxFQUFBLGNBQUEsYUFBQSxFQUFBLFFBQUEsRUFBQSxnQkFBQSxFQUFBLGNBQUEsT0FDQSxJQUNBLEVBQUEsVUFBQSxFQUFBLEdBRUEsRUFBQSxVQUNBLElBRUEsTUFDQSxNQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FDQSxHQUFBLEVBQ0EsSUFBQSxFQUFBLGVBR0EsTUFBQSxNQUFBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFFBQUEsR0FBQSxNQUFBLEVBQUEsV0FEQSxTQUlBLFFBV0EsRUFBQSxVQUFBLFVBQUEsV0FDQSxHQUFBLEVBQ0EsTUFBQSxlQUNBLEVBQUEsS0FBQSxPQUNBLEtBQUEsUUFBQSxlQUNBLEtBQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxJQUVBLEtBQUEscUJBQ0EsS0FBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FFQSxLQUFBLFNBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxLQVVBLEVBQUEsVUFBQSxhQUFBLFdBQ0EsR0FBQSxFQUNBLEdBQUEsS0FBQSxPQUNBLEtBQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEscUJBQ0EsS0FBQSxPQUFBLFNBQ0EsS0FBQSxLQUFBLFVBRUEsS0FBQSxTQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FXQSxFQUFBLFVBQUEsU0FBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0F1QkEsT0F0QkEsR0FBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLGNBQ0EsRUFBQSxLQUFBLElBQUEsU0FBQSxJQUFBLElBQUEsUUFBQSxFQUFBLFNBQUEsSUFBQSxHQUFBLFFBQ0EsS0FBQSxJQUFBLE9BQUEsZUFBQSxFQUFBLGlCQUFBLEVBQUEsY0FFQSxLQUFBLEtBQUEsS0FBQSxJQUFBLFNBQUEsSUFBQSxHQUNBLEtBQUEsT0FBQSxLQUFBLEtBQUEsS0FBQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLGlCQUFBLEtBQUEsUUFBQSxNQUFBLGlCQUFBLGlCQUFBLFFBQUEsWUFBQSxJQUNBLEdBQ0EsTUFBQSxJQUNBLGNBQUEsRUFBQSxLQUVBLElBQ0EsR0FDQSxPQUFBLEdBRUEsS0FBQSxJQUFBLFNBQUEsa0JBRUEsTUFBQSxHQUNBLEtBQUEsU0FBQSxJQUFBLEdBRUEsTUFTQSxFQUFBLFVBQUEsUUFBQSxXQUNBLEtBQUEsU0FBQSxFQUNBLEtBQUEsb0JBQ0EsS0FBQSxLQUFBLE9BRUEsS0FBQSxhQVlBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FDQSxPQUFBLE1BQUEsb0JBQ0EsS0FBQSxjQUFBLEtBQUEsUUFBQSxhQUNBLFNBRUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFFBQUEsV0FBQSxRQUNBLEtBQUEsV0FBQSxPQUVBLEtBQUEsU0FDQSxLQUFBLFVBRUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLFVBQ0EsR0FDQSxLQUFBLFNBQUEsS0FDQSxPQUFBLEtBQUEsU0FBQSxXQUdBLEVBQUEsRUFBQSxhQUFBLEVBQ0EsRUFBQSxTQUFBLEtBQUEsSUFBQSxJQUFBLGNBQUEsSUFDQSxFQUFBLElBQ0EsS0FBQSxJQUFBLE9BQUEsSUFDQSxLQUFBLElBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLEVBQUEsZUFFQSxFQUFBLEtBQUEsS0FBQSxhQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQUEsS0FBQSxJQUFBLE9BQUEsSUFDQSxFQUFBLFNBQUEsS0FBQSxLQUFBLElBQUEsVUFBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsZ0JBQ0EsRUFBQSxLQUFBLFFBQUEsZ0JBQ0EsTUFBQSxLQUFBLFFBQUEsaUJBQUEsRUFBQSxLQUFBLFFBQUEsa0JBQ0EsRUFBQSxLQUFBLFFBQUEsaUJBRUEsSUFBQSxHQUFBLEVBQUEsWUFBQSxJQUNBLEdBQUEsR0FFQSxLQUFBLGFBQUEsRUFBQSxFQUNBLEtBQUEsY0FBQSxFQUNBLEtBQUEsV0FBQSxFQUNBLEtBQUEsZ0JBQUEsRUFDQSxLQUFBLGFBQUEsRUFDQSxLQUFBLFFBQUEsRUFDQSxLQUFBLE9BQUEsT0FBQSxHQUNBLEtBQUEsT0FBQSxTQUNBLEtBQUEsS0FBQSxPQUNBLEtBQUEsVUFBQSxFQUNBLEVBQUEsZUFBQSxFQUFBLGNBQUEsS0FBQSxLQUFBLGFBQUEsSUFBQSxFQUFBLGNBQUEsSUFBQSxHQUNBLEtBQUEsS0FBQSxPQUNBLEtBQUEsVUFBQSxHQUNBLEtBQUEsR0FBQSxlQUFBLEVBQUEsY0FBQSxJQUFBLEVBQ0EsS0FBQSxPQUFBLE9BRUEsS0FBQSxPQUFBLE9BRUEsS0FBQSxLQUFBLEtBQ0EsUUFBQSxLQUFBLFFBQUEsY0FBQSxFQUFBLEdBQ0EsV0FBQSxLQUFBLFFBQUEsY0FBQSxVQUFBLEtBRUEsRUFBQSxLQUFBLFNBQUEsSUFBQSxhQUNBLFdBQUEsR0FBQSxhQUFBLEtBQ0EsRUFBQSxTQUFBLEtBQUEsU0FBQSxJQUFBLFNBQUEsSUFDQSxHQUNBLEtBQUEsU0FBQSxLQUNBLE1BQUEsR0FDQSxZQUFBLEtBSUEsT0FXQSxFQUFBLFVBQUEsT0FBQSxXQUNBLE1BQUEsTUFBQSxVQUdBLEtBQUEsUUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLEtBQUEsSUFBQSxLQUFBLGFBQUEsS0FBQSxTQUNBLEtBQUEsU0FBQSxVQUFBLEtBQUEsYUFBQSxLQUFBLFFBQUEsS0FBQSxjQUNBLEtBQUEscUJBQ0EsS0FBQSxxQkFDQSxLQUFBLHFCQUVBLE1BVkEsUUF1QkEsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxVQUdBLEtBQUEsU0FBQSxVQUFBLEtBQUEsY0FBQSxLQUFBLFNBQUEsU0FBQSxHQUFBLFFBQUEsR0FDQSxLQUFBLE9BQUEsVUFDQSxNQUxBLFFBa0JBLEVBQUEsVUFBQSxVQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFNBQUEsV0FBQSxHQUFBLFFBQUEsR0FDQSxLQUFBLE9BQUEsVUFDQSxNQUxBLFFBa0JBLEVBQUEsVUFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFVBQUEsS0FBQSxJQUFBLEtBQUEsR0FBQSxJQUFBLEdBQUEsV0FDQSxNQUpBLFFBaUJBLEVBQUEsVUFBQSxLQUFBLFdBVUEsTUFUQSxJQUFBLEtBQUEsWUFDQSxFQUFBLEtBQUEsV0FDQSxLQUFBLFVBQUEsTUFFQSxLQUFBLFNBQUEsRUFDQSxLQUFBLGVBQ0EsS0FBQSxvQkFDQSxLQUFBLEtBQUEsT0FFQSxNQVlBLEVBQUEsVUFBQSxRQUFBLFdBaUJBLE1BaEJBLE1BQUEsU0FDQSxLQUFBLFFBRUEsS0FBQSxvQkFBQSxLQUFBLEtBQUEsUUFDQSxLQUFBLEtBQUEsU0FFQSxHQUNBLEtBQUEsU0FBQSxPQUFBLElBRUEsS0FBQSxTQUFBLFdBQUEsWUFDQSxLQUFBLElBQUEsU0FBQSxtQkFDQSxLQUFBLElBQUEsWUFBQSxpQkFDQSxLQUFBLFNBQUEsS0FDQSxNQUFBLE1BR0EsTUFhQSxFQUFBLFVBQUEsTUFBQSxXQUNBLE9BQUEsS0FBQSxvQkFHQSxLQUFBLFVBR0EsS0FBQSxRQUNBLEtBQUEsS0FBQSxTQUFBLFdBQ0EsV0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUNBLEVBQUEsS0FBQSxZQUFBLGFBRUEsTUFBQSxLQUFBLFFBQUEsWUFDQSxNQWJBLFFBZ0JBLEtBR0EsRUFBQSxHQUFBLGFBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLENBS0EsS0FKQSxFQUFBLEtBQUEsZ0JBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxHQUNBLEtBQUEsYUFBQSxFQUFBLEdBQUEsR0FBQSxLQUFBLElBRUEsR0FBQSxnQkFBQSxHQUFBLENBRUEsR0FEQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEdBQ0EsTUFBQSxFQUFBLGFBQ0EsTUFBQSxHQUFBLGFBQUEsRUFBQSxhQUVBLElBQUEsTUFBQSxFQUFBLFVBQ0EsTUFBQSxHQUFBLFVBQUEsRUFBQSxVQUVBLElBQUEsRUFBQSxTQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsU0FFQSxJQUFBLFdBQUEsRUFBQSxPQUNBLE1BQUEsR0FBQSxhQUFBLEVBRUEsSUFBQSxRQUFBLEVBQUEsT0FDQSxNQUFBLEdBQUEsVUFBQSxFQUVBLElBQUEsRUFBQSxRQUFBLEVBQUEsaUJBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLE9BRUEsSUFBQSxFQUFBLEtBQ0EsTUFBQSxHQUFBLE1BRUEsSUFBQSxFQUFBLFFBQ0EsTUFBQSxHQUFBLFNBRUEsSUFBQSxFQUFBLE1BQ0EsTUFBQSxHQUFBLFFBR0EsTUFBQSxHQUFBLFdBR0EsRUFBQSxHQUFBLGFBQUEsWUFBQSxHQUNBLE1BQUEsT0FBQSxVQ3I3QkEsU0FBQSxHQUNBLGtCQUFBLFNBQUEsT0FBQSxLQUFBLE9BQUEsSUFBQSxNQUVBLFFBQUEsVUFBQSxHQUdBLEVBQUEsUUFFQSxTQUFBLEdBQ0EsWUFtT0EsU0FBQSxHQUFBLEdBb0JBLE9BbEJBLEdBQUEsU0FBQSxFQUFBLGlCQUFBLFNBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxjQUNBLEVBQUEsZ0JBQUEsR0FLQSxTQUFBLEVBQUEsT0FBQSxTQUFBLEVBQUEsTUFDQSxFQUFBLElBQUEsRUFBQSxPQUdBLElBQ0EsTUFJQSxFQUFBLEVBQUEsVUFBQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEdBR0EsS0FBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFHQSxFQUFBLEVBQUEsS0FBQSxFQUVBLEtBQ0EsRUFBQSxHQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE1BZ0JBLFFBQUEsR0FBQSxFQUFBLEdBd0lBLFFBQUEsR0FBQSxHQUVBLEtBQUEsTUFJQSxFQUFBLEVBQUEsUUFBQSxRQUFBLEVBQUEsaUJBQUEsSUFBQSxPQUFBLEdBQUEsQ0FLQSxHQUVBLEdBRkEsRUFBQSxFQUFBLGNBQUEsRUFBQSxjQUFBLEVBR0EsRUFBQSxFQUFBLEVBQUEsUUFBQSxHQUFBLENBa0RBLE9BaERBLElBQUEsRUFHQSxFQUVBLEdBQUEsRUFBQSxRQUFBLE9BSUEsRUFBQSxpQkFJQSxHQUFBLEVBQ0EsR0FBQSxLQUNBLEdBQUEsS0FDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsS0FDQSxHQUFBLEtBQ0EsTUFJQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsVUFBQSxHQUFBLEtBRUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxLQUVBLEdBQUEsS0FHQSxHQUFBLEVBQUEsRUFBQSxRQUFBLElBQ0EsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLE1BQUEsR0FBQSxHQUFBLFNBR0EsRUFBQSxhQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxNQUlBLEdBQUEsRUFJQSxLQUFBLEdBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxJQUNBLElBRUEsRUFBQSxPQUNBLEdBQUEsV0FBQSxFQUFBLE1BQUEsV0FFQSxHQUFBLFFBQUEsUUFBQSxFQUFBLFNBRUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxLQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFFQSxNQUFBLEVBQUEsbUJBR0EsSUFBQSxHQUdBLE9BV0EsUUFBQSxHQUFBLEdBSUEsR0FBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLGNBQUEsQ0FHQSxJQUFBLEtBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxDQUdBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUFBLEdBQUEsRUFJQSxFQUFBLEdBQUEsRUFvQ0EsSUFuQ0EsR0FBQSxLQUVBLElBQ0EsR0FBQSxFQUFBLFFBQUEsUUFHQSxFQUFBLE1BQ0EsYUFBQSxJQUVBLEdBQUEsRUFHQSxHQUFBLEtBSUEsR0FBQSxJQUVBLEdBQUEsRUFBQSxFQUFBLFFBQUEsSUFFQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsU0FHQSxHQUFBLEVBQUEsUUFBQSxJQUVBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEdBQUEsS0FDQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBQUEsR0FBQSxHQUFBLE1BSUEsR0FBQSxHQUFBLEdBQUEsSUFDQSxHQUFBLEtBQUEsSUFBQSxHQUFBLEtBSUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxVQUFBLElBQUEsR0FBQSxLQXFCQSxHQW5CQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FHQSxFQUFBLEVBQUEsSUFHQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FDQSxHQUFBLEtBR0EsR0FBQSxHQUFBLEtBR0EsRUFBQSxhQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxNQUtBLEVBQUEsbUJBQUEsRUFBQSxvQkFBQSxDQUVBLEdBQUEsSUFBQSxDQUdBLElBQUEsRUFBQSxvQkFBQSxDQUNBLEdBQUEsR0FBQSxHQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsSUFBQSxJQUlBLEVBQUEsbUJBQUEsRUFDQSxHQUFBLEVBQUEsR0FHQSxFQUFBLHNCQUFBLElBQ0EsR0FBQSxFQUFBLEtBR0EsSUFBQSxHQUFBLElBQUEsSUFDQSxFQUFBLEVBQUEsU0FJQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEdBR0EsTUFBQSxJQUNBLEdBQUEsRUFDQSxFQUFBLEVBQUEsTUFZQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxhQUtBLE9BQUEsSUFDQSxFQUFBLFFBQUEsT0FBQSxHQUNBLE1BQ0EsSUFNQSxPQUNBLEdBQUEsSUFJQSxHQUFBLEtBR0EsR0FBQSxLQUdBLE1BQUEsS0FDQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxtQkFBQSxHQUFBLEVBQUEsbUJBQUEsS0FBQSxHQUVBLEVBQUEsaUJBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxNQUtBLEVBQUEsbUJBQUEsS0FFQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsSUFDQSxLQUFBLElBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxLQUdBLElBQUEsR0FFQSxNQVVBLFFBQUEsS0FFQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFHQSxLQUVBLElBQUEsR0FVQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxhQUdBLEdBQUEsc0JBQ0EsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEtBUUEsUUFBQSxLQUNBLEdBQUEsT0FBQSxHQUFBLEdBQ0EsR0FBQSxPQUFBLEdBQUEsR0FDQSxHQUFBLE9BQUEsR0FBQSxHQUNBLEdBQUEsT0FBQSxHQUFBLEdBR0EsSUFDQSxHQUFBLE9BQUEsR0FBQSxHQUdBLElBQUEsR0FPQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsRUFHQSxFQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsR0FlQSxRQVpBLEdBQUEsRUFDQSxFQUFBLEdBR0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxvQkFBQSxFQUFBLHFCQUlBLEdBQUEsR0FBQSxHQUFBLEVBQUEsc0JBQ0EsRUFBQSxHQUpBLEVBQUEsRUFPQSxFQVdBLFFBQUEsR0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLE1BbURBLE9BaERBLE1BQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsS0FBQSxNQUFBLEtBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsTUFBQSxLQUFBLEVBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUlBLE1BQUEsS0FBQSxFQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FJQSxNQUFBLEtBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBTUEsSUFBQSxHQUNBLEVBQUEsR0FJQSxJQUFBLElBRUEsRUFDQSxHQUFBLEVBQUEsUUFBQSxRQUNBLEVBQUEsR0FHQSxFQUFBLElBSUEsRUFjQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLE1BR0EsSUFBQSxHQUFBLEVBQUEsQ0FPQSxHQUhBLEdBQUEsUUFBQSxlQUFBLEVBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsY0FDQSxFQUFBLEVBQUEsWUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsSUFFQSxLQUFBLEdBQUEsT0FBQSxDQU1BLElBQUEsR0FBQSxHQUFBLElBQUEsQ0FLQSxHQUhBLEdBQUEsUUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUVBLEtBQUEsR0FBQSxPQUFBLENBSUEsUUFBQSxJQUNBLElBQUEsR0FFQSxHQUFBLFFBQUEsYUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxZQUNBLEVBQUEsRUFBQSxVQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsY0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxhQUNBLEVBQUEsRUFBQSxXQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsV0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxVQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsYUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxZQUNBLEVBQUEsRUFBQSxVQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsT0FTQSxHQUFBLEdBQUEsRUFBQSxDQUtBLEdBSEEsR0FBQSxRQUFBLGVBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLFlBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsSUFFQSxLQUFBLEdBQUEsT0FBQSxDQUdBLElBQUEsR0FBQSxHQUFBLElBRUEsT0FBQSxJQUNBLElBQUEsR0FFQSxHQUFBLFFBQUEsV0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLElBRUEsTUFFQSxLQUFBLEdBRUEsR0FBQSxRQUFBLFlBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxXQUNBLEVBQUEsRUFBQSxTQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsR0FBQSxNQWtGQSxNQXZFQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLElBQUEsS0FJQSxhQUFBLElBRUEsYUFBQSxJQUdBLE1BQUEsTUFFQSxHQUFBLEtBSUEsR0FBQSxXQUFBLEVBQUEsTUFBQSxXQUNBLEdBQUEsS0FFQSxHQUFBLFFBQUEsT0FBQSxFQUFBLFNBSUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxJQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFFQSxNQUFBLEVBQUEsc0JBR0EsR0FBQSxLQUdBLEdBQUEsUUFBQSxPQUFBLEVBQUEsU0FJQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLElBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxXQUlBLEdBQUEsR0FDQSxJQUFBLEdBQUEsSUFBQSxLQUVBLGFBQUEsSUFDQSxHQUFBLEtBR0EsR0FBQSxRQUFBLGFBQUEsRUFBQSxTQUdBLEVBQUEsWUFDQSxFQUFBLEVBQUEsVUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLFVBR0EsR0FBQSxJQUNBLElBQUEsR0FBQSxJQUFBLEtBRUEsYUFBQSxJQUNBLEdBQUEsS0FHQSxHQUFBLFFBQUEsV0FBQSxFQUFBLFNBR0EsRUFBQSxVQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFLQSxFQWdCQSxRQUFBLEtBQ0EsR0FBQSxJQUFBLENBTUEsT0FKQSxRQUFBLEVBQUEsWUFDQSxFQUFBLElBQUEsRUFBQSxXQUdBLEVBU0EsUUFBQSxLQUNBLEdBQUEsSUFBQSxDQUtBLE9BSkEsUUFBQSxFQUFBLGlCQUFBLE9BQUEsS0FDQSxFQUFBLEdBQUEsSUFBQSxJQUFBLEVBQUEsaUJBR0EsRUFTQSxRQUFBLEtBQ0EsTUFBQSxRQUFBLEVBQUEsZUFDQSxJQUFBLEVBQUEsZ0JBRUEsRUFRQSxRQUFBLEtBQ0EsR0FBQSxFQWFBLE9BUkEsR0FGQSxFQUFBLGlCQUNBLElBQUEsRUFBQSxrQkFDQSxHQUVBLEdBR0EsRUFlQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxrQkFBQSxHQUFBLElBQ0EsRUFBQSxxQkFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGtCQUFBLENBRUEsUUFBQSxHQUNBLElBQUEsSUFDQSxFQUFBLFdBQUEsSUFBQSxHQUFBLEVBQUEsaUJBQUEsSUFDQSxFQUFBLGdCQUVBLE1BRUEsS0FBQSxJQUNBLEVBQUEsWUFBQSxJQUFBLEdBQUEsRUFBQSxpQkFBQSxJQUNBLEVBQUEsZ0JBRUEsTUFFQSxLQUFBLElBQ0EsRUFBQSxTQUFBLElBQUEsR0FBQSxFQUFBLGlCQUFBLElBQ0EsRUFBQSxnQkFFQSxNQUVBLEtBQUEsSUFDQSxFQUFBLFdBQUEsSUFBQSxHQUFBLEVBQUEsaUJBQUEsSUFDQSxFQUFBLG1CQWVBLFFBQUEsS0FDQSxHQUFBLEdBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxHQUNBLE9BQUEsSUFBQSxHQUFBLEVBU0EsUUFBQSxLQUVBLFNBQUEsRUFBQSxhQUFBLEVBQUEsU0FBQSxFQUFBLFVBUUEsUUFBQSxLQUVBLFNBQUEsTUFBQSxLQVlBLFFBQUEsS0FFQSxHQUFBLEdBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsSUFDQSxFQUFBLElBSUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLENBRUEsT0FBQSxHQVFBLFFBQUEsS0FFQSxTQUFBLEVBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxXQUFBLEVBQUEsWUFBQSxFQUFBLFNBQUEsRUFBQSxXQVNBLFFBQUEsS0FFQSxTQUFBLE1BQUEsS0FRQSxRQUFBLEtBRUEsTUFBQSxNQUFBLEVBQUEsU0FBQSxFQUFBLFVBQUEsSUFBQSxFQVFBLFFBQUEsS0FFQSxNQUFBLEtBQUEsR0FBQSxHQUFBLElBQUEsRUFTQSxRQUFBLEtBRUEsUUFBQSxFQUFBLElBUUEsUUFBQSxLQUVBLFFBQUEsRUFBQSxVQVFBLFFBQUEsS0FFQSxRQUFBLEVBQUEsUUFRQSxRQUFBLEtBQ0EsR0FBQSxNQUFBLEdBQ0EsT0FBQSxDQUVBLElBQUEsR0FBQSxJQUNBLE9BQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxtQkFRQSxRQUFBLE1BQ0EsTUFBQSxLQVNBLFFBQUEsTUFDQSxPQUFBLElBQUEsS0FBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsV0FRQSxRQUFBLE1BRUEsTUFBQSxJQUFBLEVBQUEsa0JBQUEsRUFBQSxHQVFBLFFBQUEsTUFFQSxTQUFBLE9BQUEsS0FTQSxRQUFBLE1BRUEsU0FBQSxNQUFBLEtBUUEsUUFBQSxNQUVBLFNBQUEsT0FBQSxLQVdBLFFBQUEsTUFDQSxHQUFBLEtBQ0EsR0FBQSxNQUFBLFFBQUEsT0FBQSxFQU9BLFFBQUEsTUFDQSxHQUFBLEVBQ0EsR0FBQSxFQVFBLFFBQUEsTUFFQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxFQUNBLElBQUEsRUFBQSx5QkFDQSxHQUFBLEdBSUEsTUFBQSxHQVNBLFFBQUEsTUFFQSxRQUFBLEdBQUEsS0FBQSxFQUFBLGVBQUEsR0FRQSxRQUFBLElBQUEsR0FHQSxLQUFBLEdBQ0EsR0FBQSxLQUFBLEdBQUEsR0FDQSxHQUFBLEtBQUEsR0FBQSxHQUdBLElBQ0EsR0FBQSxLQUFBLEdBQUEsS0FHQSxHQUFBLE9BQUEsR0FBQSxHQUFBLEdBQ0EsR0FBQSxPQUFBLEdBQUEsR0FBQSxHQUdBLElBQ0EsR0FBQSxPQUFBLEdBQUEsR0FBQSxJQU1BLEdBQUEsS0FBQSxFQUFBLFdBQUEsS0FBQSxHQVdBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxXQUFBLEVBQUEsV0FBQSxDQU1BLE9BSkEsSUFBQSxHQUFBLFdBQUEsRUFDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFFQSxHQUFBLEdBU0EsUUFBQSxJQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxXQUFBLEVBQUEsV0FBQSxFQUNBLEVBQUEsR0FBQSxFQUtBLE9BSEEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxRQUVBLEVBV0EsUUFBQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxJQUNBLEdBQUEsR0FBQSxHQUFBLFlBQUEsRUFDQSxNQUFBLElBQUEsR0FVQSxRQUFBLE1BRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsTUFDQSxPQUNBLEVBQUEsRUFDQSxFQUFBLEdBRUEsS0FDQSxFQUFBLEVBQ0EsRUFBQSxHQUVBLFdBQUEsR0FJQSxPQUFBLEdBVUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEdBQUEsSUFDQSxHQUFBLEdBQUEsU0FBQSxFQVNBLFFBQUEsSUFBQSxHQUNBLE1BQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxTQUNBLE9BUUEsUUFBQSxNQUNBLEdBQUEsS0FNQSxPQUxBLEdBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxHQUFBLEdBRUEsRUFTQSxRQUFBLElBQUEsR0FDQSxPQUNBLFVBQUEsRUFDQSxTQUFBLEdBY0EsUUFBQSxNQUNBLE1BQUEsSUFBQSxHQVVBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBRUEsT0FBQSxNQUFBLE1BQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLElBVUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxHQUFBLFFBQUEsR0FVQSxRQUFBLE1BQ0EsTUFBQSxHQUFBLEdBQ0EsRUFFQSxFQVlBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsS0FVQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsSUFBQSxFQUFBLEtBQUEsR0FPQSxPQUpBLEdBQUEsSUFDQSxFQUFBLElBQUEsS0FBQSxJQUFBLElBR0EsRUFZQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsRUFFQSxPQUFBLEtBQUEsR0FBQSxHQUFBLEVBQ0EsRUFDQSxLQUFBLEdBQUEsR0FBQSxJQUNBLEVBQ0EsR0FBQSxLQUFBLEtBQUEsRUFDQSxFQUNBLEVBQUEsSUFBQSxJQUFBLEVBQ0EsRUFFQSxFQVVBLFFBQUEsTUFDQSxHQUFBLEdBQUEsR0FBQSxLQUNBLE9BQUEsR0FBQSxVQVNBLFFBQUEsSUFBQSxHQUNBLEVBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLFNBRUEsR0FDQSxLQUFBLEVBQUEsS0FDQSxNQUFBLEVBQUEsS0FBQSxFQUFBLGFBQ0EsSUFBQSxFQUFBLElBQ0EsT0FBQSxFQUFBLElBQUEsRUFBQSxjQUdBLE9BQUEsR0FlQSxRQUFBLElBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsT0E5NUNBLEdBQUEsSUFBQSxHQUFBLElBQUEsRUFBQSxzQkFDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGdCQUFBLGNBQUEsYUFBQSxZQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsZ0JBQUEsY0FBQSxZQUFBLFlBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxjQUFBLFlBQUEsV0FBQSxVQUNBLEdBQUEsR0FBQSxLQUFBLGFBQ0EsR0FBQSxFQUFBLEVBQUEsa0JBQUEsZ0JBQUEsY0FLQSxHQUFBLEVBQ0EsR0FBQSxLQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsS0FLQSxHQUFBLEVBQUEsR0FHQSxHQUFBLFFBR0EsR0FBQSxFQUdBLEdBQUEsS0FHQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUdBLEdBQUEsS0FDQSxHQUFBLElBR0EsS0FDQSxHQUFBLEtBQUEsR0FBQSxHQUNBLEdBQUEsS0FBQSxHQUFBLEdBQ0EsTUFBQSxJQUNBLEVBQUEsTUFBQSx3QkFBQSxHQUFBLElBQUEsR0FBQSxvQkFjQSxLQUFBLE9BQUEsV0FHQSxNQUZBLElBQUEsS0FBQSxHQUFBLEdBQ0EsR0FBQSxLQUFBLEdBQUEsR0FDQSxJQVVBLEtBQUEsUUFBQSxXQUVBLE1BREEsS0FDQSxJQVVBLEtBQUEsUUFBQSxXQUdBLE1BRkEsS0FDQSxHQUFBLEtBQUEsRUFBQSxNQUNBLElBZ0JBLEtBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLFNBQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxTQUFBLEVBQ0EsTUFBQSxHQUFBLEVBRUEsR0FBQSxHQUFBLE1BR0EsR0FBQSxNQUFBLFVBQUEsRUFBQSwwQ0FHQSxPQUFBLE9BcFlBLEdBQUEsR0FBQSxPQUNBLEVBQUEsUUFDQSxFQUFBLEtBQ0EsRUFBQSxPQUNBLEVBQUEsS0FDQSxFQUFBLE1BRUEsRUFBQSxPQUNBLEVBQUEsT0FFQSxFQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsTUFDQSxFQUFBLFlBQ0EsRUFBQSxVQUdBLEVBQUEsYUFDQSxFQUFBLFdBRUEsRUFBQSxNQUVBLEVBQUEsR0FFQSxFQUFBLFFBQ0EsRUFBQSxPQUNBLEVBQUEsTUFDQSxFQUFBLFNBRUEsRUFBQSxnQkFBQSxRQUVBLEVBQUEsT0FBQSxVQUFBLG1CQUFBLE9BQUEsVUFBQSxlQUVBLEVBQUEsT0FBQSxVQUFBLGdCQUFBLE9BQUEsVUFBQSxpQkFFQSxFQUFBLGFBeUNBLEdBQ0EsUUFBQSxFQUNBLFVBQUEsR0FDQSxnQkFBQSxLQUNBLGVBQUEsR0FDQSxpQkFBQSxLQUNBLHVCQUFBLElBQ0EsaUJBQUEsSUFDQSxtQkFBQSxJQUNBLE1BQUEsS0FDQSxVQUFBLEtBQ0EsV0FBQSxLQUNBLFFBQUEsS0FDQSxVQUFBLEtBQ0EsWUFBQSxLQUNBLFFBQUEsS0FDQSxTQUFBLEtBQ0EsWUFBQSxLQUNBLE1BQUEsS0FDQSxJQUFBLEtBQ0EsVUFBQSxLQUNBLFFBQUEsS0FDQSxLQUFBLEtBQ0EsbUJBQUEsRUFDQSxxQkFBQSxFQUNBLGdCQUFBLE9BQ0EsdUJBQUEsRUFDQSxpQkFBQSxzREFpQkEsR0FBQSxHQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQUEsRUFHQSxJQUFBLEdBQUEsZ0JBQUEsR0FBQSxDQUNBLEdBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLE1BQUEsS0FBQSxNQUFBLFVBQUEsTUFBQSxLQUFBLFVBQUEsR0FFQSxHQUFBLE1BQUEsVUFBQSxFQUFBLHVDQUlBLE1BQUEsR0FBQSxnQkFBQSxJQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxVQUdBLE9BQUEsSUFJQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEVBWUEsRUFBQSxHQUFBLE1BQUEsUUFDQSxZQUFBLEVBQ0EsV0FBQSxFQUNBLFVBQUEsRUFDQSxhQUFBLEdBZUEsRUFBQSxHQUFBLE1BQUEsWUFDQSxLQUFBLEVBQ0EsTUFBQSxFQUNBLEdBQUEsRUFDQSxLQUFBLEVBQ0EsR0FBQSxFQUNBLElBQUEsR0FjQSxFQUFBLEdBQUEsTUFBQSxZQUNBLEtBQUEsRUFDQSxXQUFBLEVBQ0EsU0FBQSxFQUNBLEtBQUEsR0FlQSxFQUFBLEdBQUEsTUFBQSxTQUNBLElBQUEsRUFDQSxJQUFBLEVBQ0EsTUFBQSxFQUNBLElBQUEsSUM1T0EsSUFBQSxPQUVBLFlBR0EsV0FHQSxVQUFBLElBR0EsU0FBQSxFQUdBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUVBLEtBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFHQSxPQUFBLElBSUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxhQUFBLE9BQUEsRUFBQSxPQUFBLEdBQUEsR0FJQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsS0FBQSxFQUNBLEtBQUEsT0FBQSxFQUNBLEtBQUEsS0FBQSxJQUdBLEtBQUEsU0FBQSxXQUNBLE1BQUEsTUFBQSxJQUFBLEtBQUEsS0FBQSxPQUFBLElBS0EsTUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBR0EsSUFBQSxFQUFBLEVBQUEsUUFBQSxDQUdBLEVBQUEsRUFBQSxNQUFBLEtBQUEsV0FHQSxFQUFBLEVBQUEsUUFBQSxNQUVBLEtBRUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxNQUFBLE1BQUEsR0FBQSxPQUFBLElBR0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUVBLE1BQUEsS0FLQSxNQUFBLElBSUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBR0EsR0FDQSxFQUpBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUlBLElBQUEsWUFBQSxPQUlBLElBSEEsRUFBQSxHQUNBLEVBQUEsRUFBQSxTQUVBLEVBQUEsR0FDQSxHQUNBLEtBQUEsR0FBQSxNQUFBLE1BQUEsRUFBQSxJQUVBLEdBQUEsRUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BR0EsYUFBQSxVQUNBLEVBQUEsS0FBQSxHQUFBLEVBQUEsR0FHQSxPQUFBLElBSUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLHFCQUdBLFFBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsSUFJQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsSUFDQSxFQUFBLE1BQ0EsSUFHQSxHQUNBLEVBSkEsRUFBQSxTQUFBLEVBQUEsc0JBQUEsRUFBQSxTQUNBLEVBQUEsR0FBQSxRQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsTUFBQSxPQUdBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxHQUNBLEVBQUEsQ0FFQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEVBQUEsR0FFQSxFQUFBLEdBQUEsUUFBQSxPQUFBLEdBQ0EsSUFHQSxJQUdBLElBQUEsR0FYQSxLQXFCQSxNQUxBLEdBQUEsRUFBQSxRQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUdBLEVBQUEsVUFBQSxFQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FLQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsRUFBQSxLQUdBLElBSUEsR0FFQSxFQUVBLEVBSUEsRUFFQSxFQUVBLEVBRUEsRUFFQSxFQUVBLEVBRUEsRUF4QkEsRUFBQSxpQkFFQSxFQUFBLEVBQUEsTUFBQSxPQVFBLEtBZ0JBLEVBQUEsRUFDQSxFQUFBLENBNEJBLEtBekJBLEVBQUEsT0FDQSxLQUFBLE1BQUEsRUFBQSxNQUFBLEtBQUEsT0FJQSxFQUFBLFVBQ0EsS0FBQSxNQUFBLEVBQUEsU0FBQSxLQUFBLFVBSUEsRUFBQSxTQUNBLEtBQUEsTUFBQSxFQUFBLFFBQUEsS0FBQSxTQUlBLEVBQUEsWUFDQSxLQUFBLFVBQUEsRUFBQSxXQUlBLFNBQUEsRUFBQSxVQUNBLEtBQUEsUUFBQSxFQUFBLFNBSUEsRUFBQSxFQUFBLE1BNkJBLEdBNUJBLEVBQUEsT0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFFBQUEsT0FBQSxHQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxRQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEtBQUEsS0FFQSxFQUFBLElBQUEsRUFBQSxPQUFBLFFBQUEsT0FDQSxFQUFBLEVBQUEsTUFBQSxLQUNBLEVBQUEsUUFDQSxFQUFBLEVBQUEsUUFBQSxTQUFBLElBQUEsTUFBQSxLQUFBLFFBQUEsT0FDQSxFQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsS0FBQSxHQUNBLEVBQUEsRUFBQSxHQUdBLElBQUEsRUFBQSxTQUNBLEdBQUEsY0FJQSxHQUFBLEVBQUEsUUFBQSxNQUFBLEdBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLE1BQUEsR0FBQSxPQUFBLElBSUEsdUJBQUEsS0FBQSxHQUFBLENBS0EsR0FBQSxVQUFBLEVBQUEsS0FBQSxRQUFBLElBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBO0lBSUEsSUFBQSxFQUFBLEtBQUEsU0FBQSxHQUNBLFlBQUEsWUFDQSxFQUFBLEtBRUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLE9BSUEsSUFBQSxFQUFBLFFBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE9BSUEsSUFBQSxNQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxPQUlBLElBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxDQWFBLElBWkEsRUFBQSxFQUFBLE1BQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxFQUFBLElBRUEsRUFDQSxFQUFBLEdBR0EsRUFBQSxFQUNBLEVBQUEsR0FJQSxHQUFBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLEtBR0EsR0FBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLE9BSUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBSUEsWUFBQSxPQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxHQUlBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsT0FJQSxFQUFBLGVBQUEsS0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBSUEsYUFBQSxTQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxJQUlBLElBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsSUFJQSxFQUFBLEVBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxNQUFBLEdBR0EsTUFBQSxNQUFBLFFBQUEsRUFBQSxRQUFBLFNBQUEsTUFBQSxHQUlBLEtBQUEsT0FDQSxNQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxFQUFBLElBQUEsT0FBQSxRQUFBLEVBQUEsR0FFQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxJQUFBLE9BQUEsT0FBQSxHQUFBLEdBRUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsSUFBQSxFQUFBLEVBQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLEdBQUEsRUFBQSxHQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxHQUVBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLE1BREEsR0FBQSxLQUFBLE1BQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxVQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxRQUFBLEVBQUEsS0FBQSxLQUFBLEdBQUEsR0FBQSxHQUVBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxHQUVBLE9BQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLGVBRUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxRQUFBLEdBQUEsZUFFQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxjQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsaUJBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxHQUVBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxNQUNBLE9BQUEsR0FBQSxNQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLFFBQUEsVUFBQSxNQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxPQUFBLElBRUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxRQUFBLEdBQUEsUUFBQSxlQUFBLEtBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBRUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBRUEsUUFBQSxTQUFBLEdBQ0EsU0FBQSxPQUFBLEdBQUEsV0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLElBRUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLEdBQUEsR0FBQSxJQUFBLEdBQUEsS0FFQSxNQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEdBQUEsTUFFQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsR0FBQSxJQUVBLE9BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEtBQUEsRUFBQSxNQUFBLFFBQUEsUUFBQSxFQUFBLE1BQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUVBLFVBQUEsT0FBQSxHQUFBLEtBQUEsRUFBQSxFQUFBLFNBRUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxRQUFBLEdBQUEsUUFBQSxJQUVBLElBQUEsU0FBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEdBRUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUFBLEdBQUEsR0FBQSxHQUFBLEdBRUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsR0FBQSxHQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsR0FDQSxNQUFBLFlBQUEsRUFBQSxRQUFBLGFBQUEsTUFFQSxJQUFBLFNBQUEsR0FDQSxNQUFBLFdBQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxRQUFBLEdBRUEsTUFBQSxTQUFBLEdBQ0EsT0FBQSxHQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsS0FBQSxFQUFBLEtBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQUEsRUFBQSxLQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxNQUFBLEtBQUEsTUFBQSxLQUFBLFVBQUEsS0FFQSxJQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxRQUFBLEdBQUEsRUFBQSxJQUVBLElBQUEsU0FBQSxHQUVBLE1BREEsU0FBQSxJQUFBLEdBQ0EsSUFLQSxrQkFBQSxRQUFBLFVBQUEsT0FDQSxPQUFBLFVBQUEsS0FBQSxXQUNBLE1BQUEsTUFBQSxRQUFBLGFBQUEsTUFLQSxtQkFBQSxTQUFBLE9BQUEsUUFDQSxPQUFBLFFBQUEsS0FFQSxrQkFBQSxTQUFBLE9BQUEsS0FDQSxPQUFBLFdBQ0EsTUFBQSxPSmhlQSxJQUFBLFFBQUEsU0FBQSxHQUVBLFlBNkNBLFNBQUEsS0FJQSxHQUNBLEdBREEsRUFBQSxFQUFBLFVBT0EsT0FMQSxZQUFBLFdBQ0EsR0FBQSxZQUFBLFVBQUEsTUFBQSxNQUFBLFNBQUEsVUFBQSxZQUNBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsSUFDQSxLQUNBLEVBQUEsVUFRQSxRQUFBLEdBQUEsR0FHQSxDQUFBLEdBQUEsTUFDQSxJQUNBLEdBQUEsT0FhQSxNQVhBLEdBQUEsS0FBQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxPQUVBLEdBQUEsS0FBQSxFQUFBLElBQUEsR0FBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLElBQ0EsS0FBQSxXQUNBLEVBQUEsR0FBQSxFQUFBLEdBQUEsU0FLQSxFQUFBLEtBQUEsTUFBQSxLQUFBLEdBQUEsVUFRQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEVBRUEsS0FDQSxFQUFBLDBEQUVBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxDQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQUlBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsT0FDQSxFQUFBLEVBQUEsSUFBQSxFQUVBLEdBQUEsS0FBQSxFQUFBLFVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxPQVVBLFFBQUEsR0FBQSxFQUFBLEdBRUEsR0FxQkEsR0FDQSxFQXRCQSxLQUNBLEVBQUEsK3FCQW1CQSxFQUFBLEVBQUEsU0FHQSxRQUFBLEdBQ0EsSUFBQSxJQUNBLEVBQUEsWUFDQSxFQUFBLFFBQ0EsTUFDQSxLQUFBLE1BQ0EsRUFBQSxVQUNBLEVBQUEsTUFDQSxNQUNBLEtBQUEsS0FDQSxFQUFBLGVBQ0EsRUFBQSxXQUNBLE1BQ0EsS0FBQSxLQUNBLEVBQUEsa0JBQ0EsRUFBQSxjQUNBLE1BQ0EsS0FBQSxLQUNBLEVBQUEsY0FDQSxFQUFBLFVBQ0EsTUFDQSxLQUFBLFFBQ0EsRUFBQSxlQUNBLEVBQUEsV0FDQSxNQUNBLEtBQUEsUUFDQSxFQUFBLGFBQ0EsRUFBQSxVQUtBLEdBQUEsR0FBQSxFQUFBLFNBQUEsU0FDQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUEsVUFDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLGFBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxDQUNBLEdBQUEsS0FBQSxNQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsR0FBQSxFQUVBLElBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxRQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxZQUNBLEdBQUEsUUFBQSxFQUFBLEVBRUEsSUFBQSxHQUFBLEVBQUEsVUFDQSxHQUFBLFFBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLFlBQ0EsR0FBQSxRQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxDQUdBLElBQUEsSUFBQSxLQUFBLFNBQUEsRUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLElBQUEsS0FBQSxTQUFBLEVBQ0EsR0FBQSxJQUFBLENBSUEsSUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsQ0FHQSxJQUNBLE1BQUEsRUFDQSxJQUFBLEVBQUEsS0FDQSxZQUFBLEVBQUEsS0FDQSxZQUFBLEVBQUEsWUFDQSxVQUFBLEVBQUEsVUFDQSxpQkFBQSxFQUNBLFNBQUEsRUFDQSxVQUFBLEVBQUEsY0FDQSxPQUFBLEVBQUEsT0FDQSxTQUFBLEVBQUEsU0FDQSxJQUFBLE9BQUEsRUFDQSxJQUFBLE9BQUEsRUFDQSxTQUFBLE9BQUEsRUFHQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBTUEsUUFBQSxHQUFBLEdBRUEsR0FBQSxHQUFBLEdBQUEsRUFDQSxLQUNBLEVBQUEsaUZBRUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLEdBQUEsTUFBQSxLQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQVFBLFFBQUEsS0FDQSxHQUNBLEdBQUEsRUFEQSxFQUFBLEdBQUEsTUFHQSxJQUNBLEdBQUEsUUFDQSxFQUFBLFFBQ0EsSUFBQSxHQUFBLDZKQUtBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLENBRUEsRUFBQSxRQUFBLEVBQUEsVUFBQSxNQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsbUJBQUEsU0FDQSxRQUFBLE9BRUEsTUFBQSxPQUNBLElBQUEsWUFHQSxFQUFBLEVBQUEsRUFBQSxFQU9BLEtBTkEsRUFBQSxLQUFBLE1BQ0EsSUFBQSxFQUNBLElBQUEsSUFFQSxFQUFBLE1BQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLEVBQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxDQUVBLEdBQUEsTUFBQSxNQUNBLE1BQUEsRUFDQSxJQUFBLEtBS0EsR0FBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEdBU0EsUUFBQSxLQUVBLEdBQUEsTUFDQSxFQUFBLG1GQUVBLEdBQUEsUUFBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFFQSxJQUNBLFFBQUEsRUFDQSxHQUFBLEVBR0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxLQUFBLE1BQUEsT0FBQSxLQVFBLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUVBLEVBQUEsRUFDQSxPQUNBLEtBQUEsS0FBQSxLQUFBLEVBQUEsSUFBQSxHQUFBLE1BQ0EsT0FFQSxFQUFBLFNBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxDQUNBLEdBQUEsS0FDQSxLQUFBLElBUUEsUUFBQSxLQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsUUFDQSxFQUFBLFNBQUEsRUFBQSxJQUFBLFFBQ0EsR0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxLQUNBLEVBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLElBQ0EsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsS0FtQkEsUUFBQSxLQWlFQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLFNBQUEsRUFDQSxLQUFBLFNBQUEsU0FBQSxLQUFBLElBQUEsUUFDQSxLQUFBLFVBQUEsU0FBQSxLQUFBLElBQUEsU0FDQSxFQUFBLFNBQUEsZ0JBRUEsSUFBQSxRQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsS0FDQSxFQUFBLE1BQUEsR0FBQSxFQUFBLElBRUEsUUFBQSxHQUFBLFNBQUEsS0FDQSxFQUFBLFFBQUEsR0FBQSxFQUFBLEVBR0EsSUFBQSxHQUFBLEtBQUEsU0FBQSxFQUNBLEVBQUEsS0FBQSxVQUFBLENBRUEsR0FBQSxJQUNBLEVBQUEsR0FHQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEVBQUEsS0FBQSxJQUFBLEdBQUEsS0FDQSxFQUFBLEVBQUEsS0FBQSxJQUFBLEdBQUEsSUFHQSxFQUFBLEVBQUEsR0FBQSxLQUFBLElBQUEsS0FDQSxFQUFBLEVBQUEsR0FBQSxLQUFBLElBQUEsSUFHQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLEtBQ0EsS0FBQSxFQUFBLE9BRUEsRUFBQSxLQUNBLElBQUEsRUFBQSxPQUVBLEVBQUEsS0FDQSxLQUFBLEVBQUEsTUFFQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEtBQ0EsS0FBQSxFQUFBLFdBSUEsSUFBQSxVQUFBLEVBQ0EsRUFBQSxZQUFBLGdCQUNBLElBQUEsT0FBQSxFQUVBLE1BREEsR0FBQSxZQUFBLGFBQ0EsRUFTQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxNQUFBLElBQUEsUUFDQSxHQUFBLFNBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQVFBLFFBQUEsS0FDQSxHQUFBLEdBQUEsR0FBQSxTQUFBLEVBQUEsTUFBQSxLQUFBLE1BQ0EsR0FBQSxFQUFBLEdBU0EsUUFBQSxHQUFBLEVBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsaUJBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxRQUFBLGlCQUVBLEVBQUEsRUFBQSxLQUFBLEtBQUEsS0FBQSxRQUNBLEVBQUEsRUFBQSxLQUFBLEtBQ0EsR0FBQSxFQUFBLEVBRUEsSUFBQSxHQUFBLFNBQUEsRUFBQSxJQUFBLFNBQUEsR0FBQSxFQUFBLE9BQ0EsR0FBQSxTQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsR0EwQkEsUUFBQSxHQUFBLEdBa0NBLFFBQUEsS0FDQSxJQUFBLFNBQUEsRUFBQSxJQUFBLFdBQ0EsRUFBQSxPQUFBLFNBQ0EsT0FBQSxHQUNBLElBQUEsU0FuQ0EsSUFFQSxFQUFBLE1BQ0EsSUFBQSxxQkFDQSxNQUNBLE9BQUEsR0FFQSxTQUFBLE9BQ0EsT0FBQSxJQUVBLEtBQUEsU0FBQSxHQUNBLEVBQ0EsS0FBQSxjQUNBLEtBQUEsR0FDQSxFQUNBLEtBQUEsU0FBQSxjQUNBLE9BQUEsTUFDQSxzQkFBQSxFQUNBLGVBQUEsRUFDQSxvQkFBQSxJQUVBLEVBQUEsU0FDQSxNQUFBLEdBQ0EsSUFBQSxRQUFBLFdBQ0EsRUFBQSxLQUFBLFdBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGlCQUNBLFVBb0JBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsZUFBQSxLQUFBLFNBQUEsTUFBQSxLQUFBLEVBRUEsR0FBQSxTQUFBLElBQ0EsRUFBQSxZQUFBLEdBQ0EsRUFBQSxNQUFBLFlBQUEsWUFFQSxFQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsU0FBQSxXQU9BLFFBQUEsS0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxJQUNBLEVBQUEsS0FBQSxnQkFBQSxFQUFBLEtBQUEsUUFBQSxXQVVBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLENBQ0EsR0FBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsS0FDQSxFQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxJQUNBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLEtBUUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxlQUFBLEtBQUEsU0FBQSxNQUFBLEtBQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSxPQUFBLE1BQUEsTUFBQSxHQUNBLEVBQUEsRUFBQSxJQUFBLE9BQUEsTUFBQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQ0EsUUFBQSxHQUNBLElBQUEsWUFFQSxFQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxLQUVBLEVBQUEsSUFBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLElBQUEsTUFBQSxFQUFBLE1BRUEsTUFDQSxLQUFBLFdBRUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsTUFBQSxFQUFBLEtBRUEsRUFBQSxJQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsUUFXQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGVBQUEsS0FBQSxTQUFBLE1BQUEsS0FBQSxHQUNBLEVBQUEsU0FBQSxFQUFBLElBQUEsUUFJQSxRQUhBLEVBQUEsa0JBQ0EsUUFBQSxJQUFBLEdBRUEsR0FDQSxJQUFBLFVBQ0EsRUFBQSxLQUFBLE1BQUEsU0FBQSxFQUFBLElBQ0EsTUFDQSxLQUFBLFdBQ0EsRUFBQSxLQUFBLE1BQUEsU0FBQSxFQUFBLE1BN1VBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFNBRUEsR0FEQSxFQUFBLFlBQ0EsRUFBQSxTQUtBLEVBQUEsRUFBQSwwQ0FDQSxJQUNBLEdBQUEsS0FBQSxFQUFBLFdBQ0EsRUFBQSxLQUFBLEtBQUEsYUFFQSxJQUFBLEdBQUEsRUFBQSxNQUVBLEVBQUEsRUFBQSx5Q0FDQSxJQUNBLEdBQUEsS0FBQSxFQUFBLFdBQ0EsRUFBQSxLQUFBLEtBQUEsV0FBQSxFQUFBLE1BQUEsVUFFQSxJQUFBLEdBQUEsRUFBQSxLQUdBLEdBQUEsS0FBQSxvQkFBQSxTQUlBLEVBQUEsT0FDQSxJQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsRUFBQSxJQUVBLG1CQUFBLEVBQ0EsWUFBQSxFQUNBLFVBQUEsR0FDQSxpQkFBQSxFQUNBLGlCQUFBLEVBQUEsR0FBQSxNQUFBLFNBQUEsaUJBQUEsZ0JBQ0EsUUFBQSxRQUlBLEVBQUEsR0FBQSxRQUFBLGFBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxLQUFBLEdBQ0EsSUFHQSxFQUFBLEdBQUEsUUFBQSxLQUFBLEdBR0EsRUFBQSxHQUFBLFFBQUEsT0FBQSxHQUVBLEVBQUEsR0FBQSxRQUFBLE9BQUEsR0FpU0EsUUFBQSxLQUVBLEdBQUEsR0FBQSxFQUFBLHNDQUNBLEVBQUEsNEJBRUEsS0FDQSxFQUFBLDBFQUVBLEdBQUEsVUFHQSxFQUFBLElBQUEsR0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLENBRUEsSUFBQSxNQUNBLEVBQUEsdUtBTUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBRUEsS0FBQSxRQUFBLGFBQUEsRUFDQSxHQUNBLE1BQUEsRUFDQSxRQUFBLEdBR0EsRUFBQSxPQUFBLEtBQUEsRUFFQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsSUFJQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEtBQUEsZ0JBQUEsT0FBQSxHQUVBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLEdBR0EsRUFBQSxLQUFBLEVBQUEsS0FBQSxjQUFBLFdBRUEsSUFBQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEtBQUEsYUFDQSxFQUFBLE1BQUEsS0FBQSxVQUFBLFNBQUEsU0FJQSxFQUNBLEtBQUEsU0FBQSxjQUNBLE9BQUEsTUFDQSxzQkFBQSxFQUNBLGVBQUEsRUFDQSxvQkFBQSxNQVdBLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSwrQkFFQSxLQUNBLEVBQUEsaUhBS0EsR0FBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEtBQ0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEtBR0EsRUFBQSxLQUFBLGlCQUFBLEtBQUEsR0FDQSxFQUNBLEtBQUEsU0FDQSxjQUNBLE9BQUEsTUFDQSxzQkFBQSxFQUNBLGVBQUEsRUFDQSxvQkFBQSxJQVFBLFFBQUEsS0FtRUEsUUFBQSxLQUVBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxVQUNBLEVBQUEsRUFBQSxTQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxXQUNBLEVBQUEsRUFBQSxLQUFBLGNBQUEsT0FBQSxXQUNBLE1BQUEsR0FBQSxNQUFBLEtBQUEsYUFBQSxHQUdBLElBVUEsRUFBQSxZQUFBLE9BQ0EsRUFBQSxLQUFBLFVBQUEsWUFBQSxTQVRBLEVBQUEsWUFBQSxPQUNBLEVBQUEsT0FDQSxFQUFBLEtBQUEsVUFBQSxZQUFBLE9BRUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxFQUFBLEtBQUEsUUFRQSxFQUNBLEtBQUEsU0FDQSxlQUNBLGNBQ0EsT0FBQSxTQUNBLGVBQUEsSUFTQSxRQUFBLEdBQUEsR0FDQSxFQUFBLGlCQUNBLEVBQUEsa0JBQ0EsRUFBQSwwQkFDQSxJQUFBLEdBQUEsRUFBQSxNQUFBLE9BQUEsY0FBQSxLQUFBLFdBQ0EsRUFBQSxFQUFBLEtBQUEsY0FBQSxPQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxhQUFBLEdBR0EsR0FBQSxNQUFBLFlBQUEsT0FDQSxFQUFBLEtBQUEsVUFBQSxZQUFBLE9BUUEsUUFBQSxLQUNBLEVBQUEsTUFBQSxZQUFBLFVBQ0EsRUFBQSxPQUFBLFFBQ0EsRUFDQSxLQUFBLFNBQ0EsZUFDQSxjQUNBLE9BQUEsTUFDQSxlQUFBLElBRUEsRUFDQSxLQUFBLFNBQ0EsZUFDQSxjQUNBLE9BQUEsTUFDQSxlQUFBLElBU0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLE1BQUEsU0FBQSxjQUNBLEVBQUEsRUFBQSxLQUFBLFNBQ0EsRUFBQSxFQUFBLEtBQUEsY0FDQSxFQUFBLEVBQUEsU0FBQSxTQUVBLElBQUEsRUFDQSxFQUFBLE9BQ0EsRUFBQSxZQUFBLFVBQ0EsRUFBQSxZQUFBLGNBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxVQUFBLEdBRUEsR0FBQSxPQUNBLEVBQUEsSUFBQSxHQUFBLE9BQ0EsRUFBQSxZQUFBLFVBQ0EsRUFBQSxTQUFBLFVBR0EsRUFDQSxLQUFBLFNBQ0EsZUFDQSxjQUNBLE9BQUEsTUFDQSxlQUFBLElBUUEsUUFBQSxLQUVBLEdBRUEsR0FGQSxFQUFBLEVBQUEsY0FDQSxFQUFBLEVBQUEsTUFFQSxFQUFBLEVBQUEsS0FBQSxhQUNBLEdBQUEsUUFBQSxHQUFBLEtBQUEsR0FBQSxJQUFBLEdBQUEsUUFBQSxHQUNBLEVBQUEsRUFBQSxPQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsT0FDQSxPQUFBLEdBQUEsUUFBQSxHQUFBLEtBRUEsRUFBQSxPQUNBLEVBQUEsSUFBQSxHQUFBLFNBRUEsRUFBQSxLQUFBLGNBQUEsWUFBQSxVQUNBLEVBQUEsUUFoTUEsRUFBQSxHQUFBLFFBQUEsYUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLFNBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLGFBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxhQUFBLEdBQ0EsRUFBQSxjQUFBLEdBQUEsUUFBQSxFQUdBLElBQUEsR0FDQSxFQUFBLEVBQUEsS0FBQSxZQUFBLFVBQ0EsTUFBQSxRQUNBLGlCQUFBLEVBRUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsYUFBQSxNQUdBLEdBRkEsS0FBQSxVQUFBLEVBQUEsS0FBQSxLQUVBLEVBQUEsU0FBQSxLQUNBLE9BQUEsSUFFQSxHQUFBLE9BQUEsR0FDQSxFQUFBLFNBRUEsRUFBQSxFQUFBLElBSUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLFVBQUEsUUFHQSxFQUFBLEVBQUEsS0FBQSxpQkFBQSxJQUFBLEdBQUEsU0FDQSxHQUFBLEtBQUEsTUFBQSxHQUVBLEdBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxHQUdBLEVBQUEsRUFBQSxJQUVBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FDQSxJQUFBLEVBQUEsSUFBQSxFQUFBLFNBejJCQSxHQUFBLElBQUEsTUFBQSxNQUFBLFVBQUEsU0FBQSxZQUFBLFdBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxFQUFBLEdBRUEsRUFBQSxHQUNBLEVBQUEsSUFFQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEdBQUEsTUFDQSxHQUNBLEVBQUEsUUFBQSxFQUFBLFdBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxhQUFBLEdBR0EsR0FBQSxRQUFBLEtBQUEsTUFBQSxvQkFFQSxJQUFBLEdBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLEVBQUEsa0JBQ0EsRUFBQSxFQUFBLGdCQUVBLEVBQUEsRUFBQSxlQUNBLEVBQUEsRUFBQSxnQkFDQSxFQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsa0JBRUEsRUFBQSxFQUFBLHVCQUNBLEVBQUEsRUFBQSxtQkFDQSxFQUFBLEVBQUEscUJBQ0EsRUFBQSxFQUFBLG9CQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLEVBQUEsZUEwL0JBLE9BbkNBLFlBRUEsRUFBQSxNQUVBLEVBQUEsR0FBQSxHQUFBLEdBQ0EsR0FBQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsRUFDQSxFQUFBLEtBRUEsS0FBQSxXQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxJQUNBLElBRUEsSUFDQSxJQUNBLElBRUEsSUFDQSxJQUVBLFVBU0EsRUFBQSxHQUFBLE9BQUEsV0FDQSxNQUFBLE1BQUEsT0FBQSxHQUdBLE1BRUEsTUErREEsT0FBQSxVQUFBLElBQUEsV0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxHQUNBLE9BQUEsSUFFQSxNQUFBLFVBQUEsSUFBQSxXQUdBLElBQUEsR0FGQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLElBQUEsRUFBQSxLQUFBLEdBQ0EsT0FBQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICBqcXVlcnktc29ydGFibGUuanMgdjAuOS4xMlxyXG4gKiAgaHR0cDovL2pvaG5ueS5naXRodWIuY29tL2pxdWVyeS1zb3J0YWJsZS9cclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTIgSm9uYXMgdm9uIEFuZHJpYW5cclxuICogIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqICBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcclxuICogIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxyXG4gKiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxyXG4gKiAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXHJcbiAqICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XHJcbiAqICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGVcclxuICogICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cclxuICogICogVGhlIG5hbWUgb2YgdGhlIGF1dGhvciBtYXkgbm90IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzXHJcbiAqICAgIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxyXG4gKlxyXG4gKiAgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXHJcbiAqICBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxyXG4gKiAgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxyXG4gKiAgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgPENPUFlSSUdIVCBIT0xERVI+IEJFIExJQUJMRSBGT1IgQU5ZXHJcbiAqICBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xyXG4gKiAgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xyXG4gKiAgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EXHJcbiAqICBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxyXG4gKiAgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcclxuICogIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG4oZnVuY3Rpb24oJCwgd2luZG93LCBwbHVnaW5OYW1lLCB1bmRlZmluZWQpIHtcclxuICAgIHZhciBldmVudE5hbWVzLFxyXG4gICAgICAgIGNvbnRhaW5lckRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCBpdGVtcyBjYW4gYmUgZHJhZ2dlZCBmcm9tIHRoaXMgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGRyYWc6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIGl0ZW1zIGNhbiBiZSBkcm9wZWQgb250byB0aGlzIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBkcm9wOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBFeGNsdWRlIGl0ZW1zIGZyb20gYmVpbmcgZHJhZ2dhYmxlLCBpZiB0aGVcclxuICAgICAgICAgICAgLy8gc2VsZWN0b3IgbWF0Y2hlcyB0aGUgaXRlbVxyXG4gICAgICAgICAgICBleGNsdWRlOiBcIlwiLFxyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCBzZWFyY2ggZm9yIG5lc3RlZCBjb250YWluZXJzIHdpdGhpbiBhbiBpdGVtXHJcbiAgICAgICAgICAgIG5lc3RlZDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgdGhlIGl0ZW1zIGFyZSBhc3N1bWVkIHRvIGJlIGFycmFuZ2VkIHZlcnRpY2FsbHlcclxuICAgICAgICAgICAgdmVydGljYWw6IHRydWVcclxuICAgICAgICB9LCAvLyBlbmQgY29udGFpbmVyIGRlZmF1bHRzXHJcbiAgICAgICAgZ3JvdXBEZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBleGVjdXRlZCBhZnRlciB0aGUgcGxhY2Vob2xkZXIgaGFzIGJlZW4gbW92ZWQuXHJcbiAgICAgICAgICAgIC8vICRjbG9zZXN0SXRlbU9yQ29udGFpbmVyIGNvbnRhaW5zIHRoZSBjbG9zZXN0IGl0ZW0sIHRoZSBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAvLyBoYXMgYmVlbiBwdXQgYXQgb3IgdGhlIGNsb3Nlc3QgZW1wdHkgQ29udGFpbmVyLCB0aGUgcGxhY2Vob2xkZXIgaGFzXHJcbiAgICAgICAgICAgIC8vIGJlZW4gYXBwZW5kZWQgdG8uXHJcbiAgICAgICAgICAgIGFmdGVyTW92ZTogZnVuY3Rpb24oJHBsYWNlaG9sZGVyLCBjb250YWluZXIsICRjbG9zZXN0SXRlbU9yQ29udGFpbmVyKSB7fSxcclxuICAgICAgICAgICAgLy8gVGhlIGV4YWN0IGNzcyBwYXRoIGJldHdlZW4gdGhlIGNvbnRhaW5lciBhbmQgaXRzIGl0ZW1zLCBlLmcuIFwiPiB0Ym9keVwiXHJcbiAgICAgICAgICAgIGNvbnRhaW5lclBhdGg6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjc3Mgc2VsZWN0b3Igb2YgdGhlIGNvbnRhaW5lcnNcclxuICAgICAgICAgICAgY29udGFpbmVyU2VsZWN0b3I6IFwib2wsIHVsXCIsXHJcbiAgICAgICAgICAgIC8vIERpc3RhbmNlIHRoZSBtb3VzZSBoYXMgdG8gdHJhdmVsIHRvIHN0YXJ0IGRyYWdnaW5nXHJcbiAgICAgICAgICAgIGRpc3RhbmNlOiAwLFxyXG4gICAgICAgICAgICAvLyBUaW1lIGluIG1pbGxpc2Vjb25kcyBhZnRlciBtb3VzZWRvd24gdW50aWwgZHJhZ2dpbmcgc2hvdWxkIHN0YXJ0LlxyXG4gICAgICAgICAgICAvLyBUaGlzIG9wdGlvbiBjYW4gYmUgdXNlZCB0byBwcmV2ZW50IHVud2FudGVkIGRyYWdzIHdoZW4gY2xpY2tpbmcgb24gYW4gZWxlbWVudC5cclxuICAgICAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjc3Mgc2VsZWN0b3Igb2YgdGhlIGRyYWcgaGFuZGxlXHJcbiAgICAgICAgICAgIGhhbmRsZTogXCJcIixcclxuICAgICAgICAgICAgLy8gVGhlIGV4YWN0IGNzcyBwYXRoIGJldHdlZW4gdGhlIGl0ZW0gYW5kIGl0cyBzdWJjb250YWluZXJzXHJcbiAgICAgICAgICAgIGl0ZW1QYXRoOiBcIlwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY3NzIHNlbGVjdG9yIG9mIHRoZSBpdGVtc1xyXG4gICAgICAgICAgICBpdGVtU2VsZWN0b3I6IFwibGlcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNsYXNzIGdpdmVuIHRvIFwiYm9keVwiIHdoaWxlIGFuIGl0ZW0gaXMgYmVpbmcgZHJhZ2dlZFxyXG4gICAgICAgICAgICBib2R5Q2xhc3M6IFwiZHJhZ2dpbmdcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNsYXNzIGdpdmluZyB0byBhbiBpdGVtIHdoaWxlIGJlaW5nIGRyYWdnZWRcclxuICAgICAgICAgICAgZHJhZ2dlZENsYXNzOiBcImRyYWdnZWRcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNsYXNzIG9mIHRoZSBwbGFjZWhvbGRlciAobXVzdCBtYXRjaCBwbGFjZWhvbGRlciBvcHRpb24gbWFya3VwKVxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlckNsYXNzOiBcInBsYWNlaG9sZGVyXCIsXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBkcmFnZ2VkIGl0ZW0gbWF5IGJlIGluc2lkZSB0aGUgY29udGFpbmVyLlxyXG4gICAgICAgICAgICAvLyBVc2Ugd2l0aCBjYXJlLCBzaW5jZSB0aGUgc2VhcmNoIGZvciBhIHZhbGlkIGNvbnRhaW5lciBlbnRhaWxzIGEgZGVwdGggZmlyc3Qgc2VhcmNoXHJcbiAgICAgICAgICAgIC8vIGFuZCBtYXkgYmUgcXVpdGUgZXhwZW5zaXZlLlxyXG4gICAgICAgICAgICBpc1ZhbGlkVGFyZ2V0OiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBFeGVjdXRlZCBiZWZvcmUgb25Ecm9wIGlmIHBsYWNlaG9sZGVyIGlzIGRldGFjaGVkLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGhhcHBlbnMgaWYgcHVsbFBsYWNlaG9sZGVyIGlzIHNldCB0byBmYWxzZSBhbmQgdGhlIGRyb3Agb2NjdXJzIG91dHNpZGUgYSBjb250YWluZXIuXHJcbiAgICAgICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIsIGV2ZW50KSB7fSxcclxuICAgICAgICAgICAgLy8gRXhlY3V0ZWQgYXQgdGhlIGJlZ2lubmluZyBvZiBhIG1vdXNlIG1vdmUgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIFRoZSBQbGFjZWhvbGRlciBoYXMgbm90IGJlZW4gbW92ZWQgeWV0LlxyXG4gICAgICAgICAgICBvbkRyYWc6IGZ1bmN0aW9uKCRpdGVtLCBwb3NpdGlvbiwgX3N1cGVyLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0uY3NzKHBvc2l0aW9uKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBDYWxsZWQgYWZ0ZXIgdGhlIGRyYWcgaGFzIGJlZW4gc3RhcnRlZCxcclxuICAgICAgICAgICAgLy8gdGhhdCBpcyB0aGUgbW91c2UgYnV0dG9uIGlzIGJlZWluZyBoZWxkIGRvd24gYW5kXHJcbiAgICAgICAgICAgIC8vIHRoZSBtb3VzZSBpcyBtb3ZpbmcuXHJcbiAgICAgICAgICAgIC8vIFRoZSBjb250YWluZXIgaXMgdGhlIGNsb3Nlc3QgaW5pdGlhbGl6ZWQgY29udGFpbmVyLlxyXG4gICAgICAgICAgICAvLyBUaGVyZWZvcmUgaXQgbWlnaHQgbm90IGJlIHRoZSBjb250YWluZXIsIHRoYXQgYWN0dWFsbHkgY29udGFpbnMgdGhlIGl0ZW0uXHJcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJGl0ZW0uaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICRpdGVtLndpZHRoKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAkaXRlbS5hZGRDbGFzcyhjb250YWluZXIuZ3JvdXAub3B0aW9ucy5kcmFnZ2VkQ2xhc3MpXHJcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhjb250YWluZXIuZ3JvdXAub3B0aW9ucy5ib2R5Q2xhc3MpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENhbGxlZCB3aGVuIHRoZSBtb3VzZSBidXR0b24gaXMgYmVlaW5nIHJlbGVhc2VkXHJcbiAgICAgICAgICAgIG9uRHJvcDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoY29udGFpbmVyLmdyb3VwLm9wdGlvbnMuZHJhZ2dlZENsYXNzKS5yZW1vdmVBdHRyKFwic3R5bGVcIilcclxuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKGNvbnRhaW5lci5ncm91cC5vcHRpb25zLmJvZHlDbGFzcylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gQ2FsbGVkIG9uIG1vdXNlZG93bi4gSWYgZmFsc3kgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBkcmFnZ2luZyB3aWxsIG5vdCBzdGFydC5cclxuICAgICAgICAgICAgLy8gSWdub3JlIGlmIGVsZW1lbnQgY2xpY2tlZCBpcyBpbnB1dCwgc2VsZWN0IG9yIHRleHRhcmVhXHJcbiAgICAgICAgICAgIG9uTW91c2Vkb3duOiBmdW5jdGlvbigkaXRlbSwgX3N1cGVyLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQubm9kZU5hbWUubWF0Y2goL14oaW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gVGVtcGxhdGUgZm9yIHRoZSBwbGFjZWhvbGRlci4gQ2FuIGJlIGFueSB2YWxpZCBqUXVlcnkgaW5wdXRcclxuICAgICAgICAgICAgLy8gZS5nLiBhIHN0cmluZywgYSBET00gZWxlbWVudC5cclxuICAgICAgICAgICAgLy8gVGhlIHBsYWNlaG9sZGVyIG11c3QgaGF2ZSB0aGUgY2xhc3MgXCJwbGFjZWhvbGRlclwiXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnPGxpIGNsYXNzPVwicGxhY2Vob2xkZXJcIi8+JyxcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgdGhlIHBvc2l0aW9uIG9mIHRoZSBwbGFjZWhvbGRlciBpcyBjYWxjdWxhdGVkIG9uIGV2ZXJ5IG1vdXNlbW92ZS5cclxuICAgICAgICAgICAgLy8gSWYgZmFsc2UsIGl0IGlzIG9ubHkgY2FsY3VsYXRlZCB3aGVuIHRoZSBtb3VzZSBpcyBhYm92ZSBhIGNvbnRhaW5lci5cclxuICAgICAgICAgICAgcHVsbFBsYWNlaG9sZGVyOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBTcGVjaWZpZXMgc2VyaWFsaXphdGlvbiBvZiB0aGUgY29udGFpbmVyIGdyb3VwLlxyXG4gICAgICAgICAgICAvLyBUaGUgcGFpciAkcGFyZW50LyRjaGlsZHJlbiBpcyBlaXRoZXIgY29udGFpbmVyL2l0ZW1zIG9yIGl0ZW0vc3ViY29udGFpbmVycy5cclxuICAgICAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbigkcGFyZW50LCAkY2hpbGRyZW4sIHBhcmVudElzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gJC5leHRlbmQoe30sICRwYXJlbnQuZGF0YSgpKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRJc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyRjaGlsZHJlbl1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCRjaGlsZHJlblswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5jaGlsZHJlbiA9ICRjaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuc3ViQ29udGFpbmVyc1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5zb3J0YWJsZVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gU2V0IHRvbGVyYW5jZSB3aGlsZSBkcmFnZ2luZy4gUG9zaXRpdmUgdmFsdWVzIGRlY3JlYXNlIHNlbnNpdGl2aXR5LFxyXG4gICAgICAgICAgICAvLyBuZWdhdGl2ZSB2YWx1ZXMgaW5jcmVhc2UgaXQuXHJcbiAgICAgICAgICAgIHRvbGVyYW5jZTogMFxyXG4gICAgICAgIH0sIC8vIGVuZCBncm91cCBkZWZhdWx0c1xyXG4gICAgICAgIGNvbnRhaW5lckdyb3VwcyA9IHt9LFxyXG4gICAgICAgIGdyb3VwQ291bnRlciA9IDAsXHJcbiAgICAgICAgZW1wdHlCb3ggPSB7XHJcbiAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgYm90dG9tOiAwLFxyXG4gICAgICAgICAgICByaWdodDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXZlbnROYW1lcyA9IHtcclxuICAgICAgICAgICAgc3RhcnQ6IFwidG91Y2hzdGFydC5zb3J0YWJsZSBtb3VzZWRvd24uc29ydGFibGVcIixcclxuICAgICAgICAgICAgZHJvcDogXCJ0b3VjaGVuZC5zb3J0YWJsZSB0b3VjaGNhbmNlbC5zb3J0YWJsZSBtb3VzZXVwLnNvcnRhYmxlXCIsXHJcbiAgICAgICAgICAgIGRyYWc6IFwidG91Y2htb3ZlLnNvcnRhYmxlIG1vdXNlbW92ZS5zb3J0YWJsZVwiLFxyXG4gICAgICAgICAgICBzY3JvbGw6IFwic2Nyb2xsLnNvcnRhYmxlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1YkNvbnRhaW5lcktleSA9IFwic3ViQ29udGFpbmVyc1wiXHJcblxyXG4gICAgLypcclxuICAgICAqIGEgaXMgQXJyYXkgW2xlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbV1cclxuICAgICAqIGIgaXMgYXJyYXkgW2xlZnQsIHRvcF1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZChhLCBiKSB7XHJcbiAgICAgICAgdmFyIHggPSBNYXRoLm1heCgwLCBhWzBdIC0gYlswXSwgYlswXSAtIGFbMV0pLFxyXG4gICAgICAgICAgICB5ID0gTWF0aC5tYXgoMCwgYVsyXSAtIGJbMV0sIGJbMV0gLSBhWzNdKVxyXG4gICAgICAgIHJldHVybiB4ICsgeTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXREaW1lbnNpb25zKGFycmF5LCBkaW1lbnNpb25zLCB0b2xlcmFuY2UsIHVzZU9mZnNldCkge1xyXG4gICAgICAgIHZhciBpID0gYXJyYXkubGVuZ3RoLFxyXG4gICAgICAgICAgICBvZmZzZXRNZXRob2QgPSB1c2VPZmZzZXQgPyBcIm9mZnNldFwiIDogXCJwb3NpdGlvblwiXHJcbiAgICAgICAgdG9sZXJhbmNlID0gdG9sZXJhbmNlIHx8IDBcclxuXHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICB2YXIgZWwgPSBhcnJheVtpXS5lbCA/IGFycmF5W2ldLmVsIDogJChhcnJheVtpXSksXHJcbiAgICAgICAgICAgICAgICAvLyB1c2UgZml0dGluZyBtZXRob2RcclxuICAgICAgICAgICAgICAgIHBvcyA9IGVsW29mZnNldE1ldGhvZF0oKVxyXG4gICAgICAgICAgICBwb3MubGVmdCArPSBwYXJzZUludChlbC5jc3MoJ21hcmdpbi1sZWZ0JyksIDEwKVxyXG4gICAgICAgICAgICBwb3MudG9wICs9IHBhcnNlSW50KGVsLmNzcygnbWFyZ2luLXRvcCcpLCAxMClcclxuICAgICAgICAgICAgZGltZW5zaW9uc1tpXSA9IFtcclxuICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC0gdG9sZXJhbmNlLFxyXG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgKyBlbC5vdXRlcldpZHRoKCkgKyB0b2xlcmFuY2UsXHJcbiAgICAgICAgICAgICAgICBwb3MudG9wIC0gdG9sZXJhbmNlLFxyXG4gICAgICAgICAgICAgICAgcG9zLnRvcCArIGVsLm91dGVySGVpZ2h0KCkgKyB0b2xlcmFuY2VcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRSZWxhdGl2ZVBvc2l0aW9uKHBvaW50ZXIsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gZWxlbWVudC5vZmZzZXQoKVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHBvaW50ZXIubGVmdCAtIG9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICB0b3A6IHBvaW50ZXIudG9wIC0gb2Zmc2V0LnRvcFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzb3J0QnlEaXN0YW5jZURlc2MoZGltZW5zaW9ucywgcG9pbnRlciwgbGFzdFBvaW50ZXIpIHtcclxuICAgICAgICBwb2ludGVyID0gW3BvaW50ZXIubGVmdCwgcG9pbnRlci50b3BdXHJcbiAgICAgICAgbGFzdFBvaW50ZXIgPSBsYXN0UG9pbnRlciAmJiBbbGFzdFBvaW50ZXIubGVmdCwgbGFzdFBvaW50ZXIudG9wXVxyXG5cclxuICAgICAgICB2YXIgZGltLFxyXG4gICAgICAgICAgICBpID0gZGltZW5zaW9ucy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGRpc3RhbmNlcyA9IFtdXHJcblxyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgZGltID0gZGltZW5zaW9uc1tpXVxyXG4gICAgICAgICAgICBkaXN0YW5jZXNbaV0gPSBbaSwgZChkaW0sIHBvaW50ZXIpLCBsYXN0UG9pbnRlciAmJiBkKGRpbSwgbGFzdFBvaW50ZXIpXVxyXG4gICAgICAgIH1cclxuICAgICAgICBkaXN0YW5jZXMgPSBkaXN0YW5jZXMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiWzFdIC0gYVsxXSB8fCBiWzJdIC0gYVsyXSB8fCBiWzBdIC0gYVswXVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIGxhc3QgZW50cnkgaXMgdGhlIGNsb3Nlc3RcclxuICAgICAgICByZXR1cm4gZGlzdGFuY2VzXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udGFpbmVyR3JvdXAob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBncm91cERlZmF1bHRzLCBvcHRpb25zKVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVycyA9IFtdXHJcblxyXG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnJvb3RHcm91cCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFByb3h5ID0gJC5wcm94eSh0aGlzLnNjcm9sbCwgdGhpcylcclxuICAgICAgICAgICAgdGhpcy5kcmFnUHJveHkgPSAkLnByb3h5KHRoaXMuZHJhZywgdGhpcylcclxuICAgICAgICAgICAgdGhpcy5kcm9wUHJveHkgPSAkLnByb3h5KHRoaXMuZHJvcCwgdGhpcylcclxuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9ICQodGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyKVxyXG5cclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmlzVmFsaWRUYXJnZXQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuaXNWYWxpZFRhcmdldCA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBDb250YWluZXJHcm91cC5nZXQgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCFjb250YWluZXJHcm91cHNbb3B0aW9ucy5ncm91cF0pIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ3JvdXAgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZ3JvdXAgPSBncm91cENvdW50ZXIrK1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lckdyb3Vwc1tvcHRpb25zLmdyb3VwXSA9IG5ldyBDb250YWluZXJHcm91cChvcHRpb25zKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lckdyb3Vwc1tvcHRpb25zLmdyb3VwXVxyXG4gICAgfVxyXG5cclxuICAgIENvbnRhaW5lckdyb3VwLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBkcmFnSW5pdDogZnVuY3Rpb24oZSwgaXRlbUNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLiRkb2N1bWVudCA9ICQoaXRlbUNvbnRhaW5lci5lbFswXS5vd25lckRvY3VtZW50KVxyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IGl0ZW0gdG8gZHJhZ1xyXG4gICAgICAgICAgICB0aGlzLml0ZW0gPSAkKGUudGFyZ2V0KS5jbG9zZXN0KHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpXHJcbiAgICAgICAgICAgIHRoaXMuaXRlbUNvbnRhaW5lciA9IGl0ZW1Db250YWluZXJcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLml0ZW0uaXModGhpcy5vcHRpb25zLmV4Y2x1ZGUpIHx8XHJcbiAgICAgICAgICAgICAgICAhdGhpcy5vcHRpb25zLm9uTW91c2Vkb3duKHRoaXMuaXRlbSwgZ3JvdXBEZWZhdWx0cy5vbk1vdXNlZG93biwgZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFBvaW50ZXIoZSlcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVMaXN0ZW5lcnMoJ29uJylcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBEZWxheVRpbWVyKClcclxuICAgICAgICAgICAgdGhpcy5kcmFnSW5pdERvbmUgPSB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmFnOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRpc3RhbmNlTWV0KGUpIHx8ICF0aGlzLmRlbGF5TWV0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRyYWdTdGFydCh0aGlzLml0ZW0sIHRoaXMuaXRlbUNvbnRhaW5lciwgZ3JvdXBEZWZhdWx0cy5vbkRyYWdTdGFydCwgZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbS5iZWZvcmUodGhpcy5wbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9pbnRlcihlKVxyXG4gICAgICAgICAgICAvLyBwbGFjZSBpdGVtIHVuZGVyIHRoZSBjdXJzb3JcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRHJhZyh0aGlzLml0ZW0sXHJcbiAgICAgICAgICAgICAgICBnZXRSZWxhdGl2ZVBvc2l0aW9uKHRoaXMucG9pbnRlciwgdGhpcy5pdGVtLm9mZnNldFBhcmVudCgpKSxcclxuICAgICAgICAgICAgICAgIGdyb3VwRGVmYXVsdHMub25EcmFnLFxyXG4gICAgICAgICAgICAgICAgZSlcclxuXHJcbiAgICAgICAgICAgIHZhciB4ID0gZS5wYWdlWCB8fCBlLm9yaWdpbmFsRXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgICAgICB5ID0gZS5wYWdlWSB8fCBlLm9yaWdpbmFsRXZlbnQucGFnZVksXHJcbiAgICAgICAgICAgICAgICBib3ggPSB0aGlzLnNhbWVSZXN1bHRCb3gsXHJcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy5vcHRpb25zLnRvbGVyYW5jZVxyXG5cclxuICAgICAgICAgICAgaWYgKCFib3ggfHwgYm94LnRvcCAtIHQgPiB5IHx8IGJveC5ib3R0b20gKyB0IDwgeSB8fCBib3gubGVmdCAtIHQgPiB4IHx8IGJveC5yaWdodCArIHQgPCB4KVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlYXJjaFZhbGlkVGFyZ2V0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLmRldGFjaCgpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0QXBwZW5kZWRJdGVtID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcm9wOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTGlzdGVuZXJzKCdvZmYnKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kcmFnSW5pdERvbmUgPSBmYWxzZVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIHByb2Nlc3NpbmcgRHJvcCwgY2hlY2sgaWYgcGxhY2Vob2xkZXIgaXMgZGV0YWNoZWRcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyLmNsb3Nlc3QoXCJodG1sXCIpWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuYmVmb3JlKHRoaXMuaXRlbSkuZGV0YWNoKClcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25DYW5jZWwodGhpcy5pdGVtLCB0aGlzLml0ZW1Db250YWluZXIsIGdyb3VwRGVmYXVsdHMub25DYW5jZWwsIGUpXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRHJvcCh0aGlzLml0ZW0sIHRoaXMuZ2V0Q29udGFpbmVyKHRoaXMuaXRlbSksIGdyb3VwRGVmYXVsdHMub25Ecm9wLCBlKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNsZWFudXBcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJEaW1lbnNpb25zKClcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJPZmZzZXRQYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0QXBwZW5kZWRJdGVtID0gdGhpcy5zYW1lUmVzdWx0Qm94ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VhcmNoVmFsaWRUYXJnZXQ6IGZ1bmN0aW9uKHBvaW50ZXIsIGxhc3RQb2ludGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghcG9pbnRlcikge1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlciA9IHRoaXMucmVsYXRpdmVQb2ludGVyIHx8IHRoaXMucG9pbnRlclxyXG4gICAgICAgICAgICAgICAgbGFzdFBvaW50ZXIgPSB0aGlzLmxhc3RSZWxhdGl2ZVBvaW50ZXIgfHwgdGhpcy5sYXN0UG9pbnRlclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlzdGFuY2VzID0gc29ydEJ5RGlzdGFuY2VEZXNjKHRoaXMuZ2V0Q29udGFpbmVyRGltZW5zaW9ucygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXIpLFxyXG4gICAgICAgICAgICAgICAgaSA9IGRpc3RhbmNlcy5sZW5ndGhcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGRpc3RhbmNlc1tpXVswXSxcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGRpc3RhbmNlc1tpXVsxXVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZGlzdGFuY2UgfHwgdGhpcy5vcHRpb25zLnB1bGxQbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcnNbaW5kZXhdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250YWluZXIuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLiRnZXRPZmZzZXRQYXJlbnQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IGNvbnRhaW5lci5nZXRJdGVtT2Zmc2V0UGFyZW50KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXIgPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKHBvaW50ZXIsIG9mZnNldFBhcmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihsYXN0UG9pbnRlciwgb2Zmc2V0UGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIuc2VhcmNoVmFsaWRUYXJnZXQocG9pbnRlciwgbGFzdFBvaW50ZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2FtZVJlc3VsdEJveClcclxuICAgICAgICAgICAgICAgIHRoaXMuc2FtZVJlc3VsdEJveCA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW92ZVBsYWNlaG9sZGVyOiBmdW5jdGlvbihjb250YWluZXIsIGl0ZW0sIG1ldGhvZCwgc2FtZVJlc3VsdEJveCkge1xyXG4gICAgICAgICAgICB2YXIgbGFzdEFwcGVuZGVkSXRlbSA9IHRoaXMubGFzdEFwcGVuZGVkSXRlbVxyXG4gICAgICAgICAgICBpZiAoIXNhbWVSZXN1bHRCb3ggJiYgbGFzdEFwcGVuZGVkSXRlbSAmJiBsYXN0QXBwZW5kZWRJdGVtWzBdID09PSBpdGVtWzBdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaXRlbVttZXRob2RdKHRoaXMucGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgIHRoaXMubGFzdEFwcGVuZGVkSXRlbSA9IGl0ZW1cclxuICAgICAgICAgICAgdGhpcy5zYW1lUmVzdWx0Qm94ID0gc2FtZVJlc3VsdEJveFxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWZ0ZXJNb3ZlKHRoaXMucGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgaXRlbSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldENvbnRhaW5lckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyRGltZW5zaW9ucylcclxuICAgICAgICAgICAgICAgIHNldERpbWVuc2lvbnModGhpcy5jb250YWluZXJzLCB0aGlzLmNvbnRhaW5lckRpbWVuc2lvbnMgPSBbXSwgdGhpcy5vcHRpb25zLnRvbGVyYW5jZSwgIXRoaXMuJGdldE9mZnNldFBhcmVudCgpKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJEaW1lbnNpb25zXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRDb250YWluZXI6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2xvc2VzdCh0aGlzLm9wdGlvbnMuY29udGFpbmVyU2VsZWN0b3IpLmRhdGEocGx1Z2luTmFtZSlcclxuICAgICAgICB9LFxyXG4gICAgICAgICRnZXRPZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vZmZzZXRQYXJlbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMSxcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSB0aGlzLmNvbnRhaW5lcnNbaV0uZ2V0SXRlbU9mZnNldFBhcmVudCgpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucm9vdEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0UGFyZW50WzBdICE9IHRoaXMuY29udGFpbmVyc1tpXS5nZXRJdGVtT2Zmc2V0UGFyZW50KClbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGV2ZXJ5IGNvbnRhaW5lciBoYXMgdGhlIHNhbWUgb2Zmc2V0IHBhcmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZSBwb3NpdGlvbigpIHdoaWNoIGlzIHJlbGF0aXZlIHRvIHRoaXMgcGFyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHVzZSBvZmZzZXQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGFyZSAjc2V0RGltZW5zaW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0UGFyZW50XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRQb2ludGVyOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludGVyID0gdGhpcy5nZXRQb2ludGVyKGUpXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy4kZ2V0T2Zmc2V0UGFyZW50KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWxhdGl2ZVBvaW50ZXIgPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKHBvaW50ZXIsIHRoaXMuJGdldE9mZnNldFBhcmVudCgpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVsYXRpdmVQb2ludGVyID0gdGhpcy5yZWxhdGl2ZVBvaW50ZXJcclxuICAgICAgICAgICAgICAgIHRoaXMucmVsYXRpdmVQb2ludGVyID0gcmVsYXRpdmVQb2ludGVyXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFBvaW50ZXIgPSB0aGlzLnBvaW50ZXJcclxuICAgICAgICAgICAgdGhpcy5wb2ludGVyID0gcG9pbnRlclxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGlzdGFuY2VNZXQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQb2ludGVyID0gdGhpcy5nZXRQb2ludGVyKGUpXHJcbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLnBvaW50ZXIubGVmdCAtIGN1cnJlbnRQb2ludGVyLmxlZnQpLFxyXG4gICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5wb2ludGVyLnRvcCAtIGN1cnJlbnRQb2ludGVyLnRvcClcclxuICAgICAgICAgICAgKSA+PSB0aGlzLm9wdGlvbnMuZGlzdGFuY2UpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQb2ludGVyOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBlLnBhZ2VYIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWCxcclxuICAgICAgICAgICAgICAgIHRvcDogZS5wYWdlWSB8fCBlLm9yaWdpbmFsRXZlbnQucGFnZVlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dXBEZWxheVRpbWVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzXHJcbiAgICAgICAgICAgIHRoaXMuZGVsYXlNZXQgPSAhdGhpcy5vcHRpb25zLmRlbGF5XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGRlbGF5IHRpbWVyIGlmIG5lZWRlZFxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGVsYXlNZXQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9tb3VzZURlbGF5VGltZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbW91c2VEZWxheVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmRlbGF5TWV0ID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zLmRlbGF5KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckRpbWVuc2lvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhck9mZnNldFBhcmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG9nZ2xlTGlzdGVuZXJzOiBmdW5jdGlvbihtZXRob2QpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRzID0gWydkcmFnJywgJ2Ryb3AnLCAnc2Nyb2xsJ11cclxuXHJcbiAgICAgICAgICAgICQuZWFjaChldmVudHMsIGZ1bmN0aW9uKGksIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LiRkb2N1bWVudFttZXRob2RdKGV2ZW50TmFtZXNbZXZlbnRdLCB0aGF0W2V2ZW50ICsgJ1Byb3h5J10pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbGVhck9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0UGFyZW50ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBSZWN1cnNpdmVseSBjbGVhciBjb250YWluZXIgYW5kIGl0ZW0gZGltZW5zaW9uc1xyXG4gICAgICAgIGNsZWFyRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuX2NsZWFyRGltZW5zaW9ucygpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0cmF2ZXJzZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sodGhpcylcclxuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoXHJcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyc1tpXS50cmF2ZXJzZShjYWxsYmFjaylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2NsZWFyRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRGltZW5zaW9ucyA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb250YWluZXJHcm91cHNbdGhpcy5vcHRpb25zLmdyb3VwXSA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBDb250YWluZXIoZWxlbWVudCwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuZWwgPSBlbGVtZW50XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIGNvbnRhaW5lckRlZmF1bHRzLCBvcHRpb25zKVxyXG5cclxuICAgICAgICB0aGlzLmdyb3VwID0gQ29udGFpbmVyR3JvdXAuZ2V0KHRoaXMub3B0aW9ucylcclxuICAgICAgICB0aGlzLnJvb3RHcm91cCA9IHRoaXMub3B0aW9ucy5yb290R3JvdXAgfHwgdGhpcy5ncm91cFxyXG4gICAgICAgIHRoaXMuaGFuZGxlID0gdGhpcy5yb290R3JvdXAub3B0aW9ucy5oYW5kbGUgfHwgdGhpcy5yb290R3JvdXAub3B0aW9ucy5pdGVtU2VsZWN0b3JcclxuXHJcbiAgICAgICAgdmFyIGl0ZW1QYXRoID0gdGhpcy5yb290R3JvdXAub3B0aW9ucy5pdGVtUGF0aFxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gaXRlbVBhdGggPyB0aGlzLmVsLmZpbmQoaXRlbVBhdGgpIDogdGhpcy5lbFxyXG5cclxuICAgICAgICB0aGlzLnRhcmdldC5vbihldmVudE5hbWVzLnN0YXJ0LCB0aGlzLmhhbmRsZSwgJC5wcm94eSh0aGlzLmRyYWdJbml0LCB0aGlzKSlcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kcm9wKVxyXG4gICAgICAgICAgICB0aGlzLmdyb3VwLmNvbnRhaW5lcnMucHVzaCh0aGlzKVxyXG4gICAgfVxyXG5cclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgZHJhZ0luaXQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIHJvb3RHcm91cCA9IHRoaXMucm9vdEdyb3VwXHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiZcclxuICAgICAgICAgICAgICAgICFyb290R3JvdXAuZHJhZ0luaXREb25lICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZHJhZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1ZhbGlkRHJhZyhlKSkge1xyXG4gICAgICAgICAgICAgICAgcm9vdEdyb3VwLmRyYWdJbml0KGUsIHRoaXMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzVmFsaWREcmFnOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlLndoaWNoID09IDEgfHxcclxuICAgICAgICAgICAgICAgIGUudHlwZSA9PSBcInRvdWNoc3RhcnRcIiAmJiBlLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VhcmNoVmFsaWRUYXJnZXQ6IGZ1bmN0aW9uKHBvaW50ZXIsIGxhc3RQb2ludGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZXMgPSBzb3J0QnlEaXN0YW5jZURlc2ModGhpcy5nZXRJdGVtRGltZW5zaW9ucygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXIpLFxyXG4gICAgICAgICAgICAgICAgaSA9IGRpc3RhbmNlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICByb290R3JvdXAgPSB0aGlzLnJvb3RHcm91cCxcclxuICAgICAgICAgICAgICAgIHZhbGlkVGFyZ2V0ID0gIXJvb3RHcm91cC5vcHRpb25zLmlzVmFsaWRUYXJnZXQgfHxcclxuICAgICAgICAgICAgICAgIHJvb3RHcm91cC5vcHRpb25zLmlzVmFsaWRUYXJnZXQocm9vdEdyb3VwLml0ZW0sIHRoaXMpXHJcblxyXG4gICAgICAgICAgICBpZiAoIWkgJiYgdmFsaWRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJvb3RHcm91cC5tb3ZlUGxhY2Vob2xkZXIodGhpcywgdGhpcy50YXJnZXQsIFwiYXBwZW5kXCIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBkaXN0YW5jZXNbaV1bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gZGlzdGFuY2VzW2ldWzFdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkaXN0YW5jZSAmJiB0aGlzLmhhc0NoaWxkR3JvdXAoaW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IHRoaXMuZ2V0Q29udGFpbmVyR3JvdXAoaW5kZXgpLnNlYXJjaFZhbGlkVGFyZ2V0KHBvaW50ZXIsIGxhc3RQb2ludGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsaWRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlUGxhY2Vob2xkZXIoaW5kZXgsIHBvaW50ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW92ZVBsYWNlaG9sZGVyOiBmdW5jdGlvbihpbmRleCwgcG9pbnRlcikge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9ICQodGhpcy5pdGVtc1tpbmRleF0pLFxyXG4gICAgICAgICAgICAgICAgZGltID0gdGhpcy5pdGVtRGltZW5zaW9uc1tpbmRleF0sXHJcbiAgICAgICAgICAgICAgICBtZXRob2QgPSBcImFmdGVyXCIsXHJcbiAgICAgICAgICAgICAgICB3aWR0aCA9IGl0ZW0ub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gaXRlbS5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gaXRlbS5vZmZzZXQoKSxcclxuICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3ggPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IG9mZnNldC5sZWZ0ICsgd2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogb2Zmc2V0LnRvcCArIGhlaWdodFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeUNlbnRlciA9IChkaW1bMl0gKyBkaW1bM10pIC8gMixcclxuICAgICAgICAgICAgICAgICAgICBpblVwcGVySGFsZiA9IHBvaW50ZXIudG9wIDw9IHlDZW50ZXJcclxuICAgICAgICAgICAgICAgIGlmIChpblVwcGVySGFsZikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiYmVmb3JlXCJcclxuICAgICAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94LmJvdHRvbSAtPSBoZWlnaHQgLyAyXHJcbiAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94LnRvcCArPSBoZWlnaHQgLyAyXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeENlbnRlciA9IChkaW1bMF0gKyBkaW1bMV0pIC8gMixcclxuICAgICAgICAgICAgICAgICAgICBpbkxlZnRIYWxmID0gcG9pbnRlci5sZWZ0IDw9IHhDZW50ZXJcclxuICAgICAgICAgICAgICAgIGlmIChpbkxlZnRIYWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gXCJiZWZvcmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3gucmlnaHQgLT0gd2lkdGggLyAyXHJcbiAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94LmxlZnQgKz0gd2lkdGggLyAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzQ2hpbGRHcm91cChpbmRleCkpXHJcbiAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94ID0gZW1wdHlCb3hcclxuICAgICAgICAgICAgdGhpcy5yb290R3JvdXAubW92ZVBsYWNlaG9sZGVyKHRoaXMsIGl0ZW0sIG1ldGhvZCwgc2FtZVJlc3VsdEJveClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldEl0ZW1EaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLml0ZW1EaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy4kZ2V0Q2hpbGRyZW4odGhpcy5lbCwgXCJpdGVtXCIpLmZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgICBcIjpub3QoLlwiICsgdGhpcy5ncm91cC5vcHRpb25zLnBsYWNlaG9sZGVyQ2xhc3MgKyBcIiwgLlwiICsgdGhpcy5ncm91cC5vcHRpb25zLmRyYWdnZWRDbGFzcyArIFwiKVwiXHJcbiAgICAgICAgICAgICAgICApLmdldCgpXHJcbiAgICAgICAgICAgICAgICBzZXREaW1lbnNpb25zKHRoaXMuaXRlbXMsIHRoaXMuaXRlbURpbWVuc2lvbnMgPSBbXSwgdGhpcy5vcHRpb25zLnRvbGVyYW5jZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGltZW5zaW9uc1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0SXRlbU9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQsXHJcbiAgICAgICAgICAgICAgICBlbCA9IHRoaXMuZWxcclxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIGVsIG1pZ2h0IGJlIGVtcHR5IHdlIGhhdmUgdG8gY2hlY2sgZWwgaXRzZWxmIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIG5vdCBkbyBzb21ldGhpbmcgbGlrZSBlbC5jaGlsZHJlbigpLmZpcnN0KCkub2Zmc2V0UGFyZW50KClcclxuICAgICAgICAgICAgaWYgKGVsLmNzcyhcInBvc2l0aW9uXCIpID09PSBcInJlbGF0aXZlXCIgfHwgZWwuY3NzKFwicG9zaXRpb25cIikgPT09IFwiYWJzb2x1dGVcIiB8fCBlbC5jc3MoXCJwb3NpdGlvblwiKSA9PT0gXCJmaXhlZFwiKVxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gZWxcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gZWwub2Zmc2V0UGFyZW50KClcclxuICAgICAgICAgICAgcmV0dXJuIG9mZnNldFBhcmVudFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFzQ2hpbGRHcm91cDogZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5uZXN0ZWQgJiYgdGhpcy5nZXRDb250YWluZXJHcm91cChpbmRleClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldENvbnRhaW5lckdyb3VwOiBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRHcm91cCA9ICQuZGF0YSh0aGlzLml0ZW1zW2luZGV4XSwgc3ViQ29udGFpbmVyS2V5KVxyXG4gICAgICAgICAgICBpZiAoY2hpbGRHcm91cCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRDb250YWluZXJzID0gdGhpcy4kZ2V0Q2hpbGRyZW4odGhpcy5pdGVtc1tpbmRleF0sIFwiY29udGFpbmVyXCIpXHJcbiAgICAgICAgICAgICAgICBjaGlsZEdyb3VwID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDb250YWluZXJzWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RHcm91cDogdGhpcy5yb290R3JvdXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwOiBncm91cENvdW50ZXIrK1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRHcm91cCA9IGNoaWxkQ29udGFpbmVyc1twbHVnaW5OYW1lXShvcHRpb25zKS5kYXRhKHBsdWdpbk5hbWUpLmdyb3VwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkLmRhdGEodGhpcy5pdGVtc1tpbmRleF0sIHN1YkNvbnRhaW5lcktleSwgY2hpbGRHcm91cClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGRHcm91cFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJGdldENoaWxkcmVuOiBmdW5jdGlvbihwYXJlbnQsIHR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLnJvb3RHcm91cC5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IG9wdGlvbnNbdHlwZSArIFwiUGF0aFwiXSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gb3B0aW9uc1t0eXBlICsgXCJTZWxlY3RvclwiXVxyXG5cclxuICAgICAgICAgICAgcGFyZW50ID0gJChwYXJlbnQpXHJcbiAgICAgICAgICAgIGlmIChwYXRoKVxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LmZpbmQocGF0aClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnQuY2hpbGRyZW4oc2VsZWN0b3IpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfc2VyaWFsaXplOiBmdW5jdGlvbihwYXJlbnQsIGlzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGNoaWxkVHlwZSA9IGlzQ29udGFpbmVyID8gXCJpdGVtXCIgOiBcImNvbnRhaW5lclwiLFxyXG5cclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gdGhpcy4kZ2V0Q2hpbGRyZW4ocGFyZW50LCBjaGlsZFR5cGUpLm5vdCh0aGlzLm9wdGlvbnMuZXhjbHVkZSkubWFwKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0Ll9zZXJpYWxpemUoJCh0aGlzKSwgIWlzQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgfSkuZ2V0KClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvb3RHcm91cC5vcHRpb25zLnNlcmlhbGl6ZShwYXJlbnQsIGNoaWxkcmVuLCBpc0NvbnRhaW5lcilcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyYXZlcnNlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAkLmVhY2godGhpcy5pdGVtcyB8fCBbXSwgZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gJC5kYXRhKHRoaXMsIHN1YkNvbnRhaW5lcktleSlcclxuICAgICAgICAgICAgICAgIGlmIChncm91cClcclxuICAgICAgICAgICAgICAgICAgICBncm91cC50cmF2ZXJzZShjYWxsYmFjaylcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2NsZWFyRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbURpbWVuc2lvbnMgPSB1bmRlZmluZWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50YXJnZXQub2ZmKGV2ZW50TmFtZXMuc3RhcnQsIHRoaXMuaGFuZGxlKTtcclxuICAgICAgICAgICAgdGhpcy5lbC5yZW1vdmVEYXRhKHBsdWdpbk5hbWUpXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRyb3ApXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwLmNvbnRhaW5lcnMgPSAkLmdyZXAodGhpcy5ncm91cC5jb250YWluZXJzLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsICE9IHRoYXRcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAkLmVhY2godGhpcy5pdGVtcyB8fCBbXSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkLnJlbW92ZURhdGEodGhpcywgc3ViQ29udGFpbmVyS2V5KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgQVBJID0ge1xyXG4gICAgICAgIGVuYWJsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuZGlzYWJsZWQgPSBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuZGlzYWJsZWQgPSB0cnVlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VyaWFsaXplKHRoaXMuZWwsIHRydWUpXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5fY2xlYXJEaW1lbnNpb25zKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Ll9kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICQuZXh0ZW5kKENvbnRhaW5lci5wcm90b3R5cGUsIEFQSSlcclxuXHJcbiAgICAvKipcclxuICAgICAqIGpRdWVyeSBBUElcclxuICAgICAqXHJcbiAgICAgKiBQYXJhbWV0ZXJzIGFyZVxyXG4gICAgICogICBlaXRoZXIgb3B0aW9ucyBvbiBpbml0XHJcbiAgICAgKiAgIG9yIGEgbWV0aG9kIG5hbWUgZm9sbG93ZWQgYnkgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIG1ldGhvZFxyXG4gICAgICovXHJcbiAgICAkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24obWV0aG9kT3JPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyICR0ID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIG9iamVjdCA9ICR0LmRhdGEocGx1Z2luTmFtZSlcclxuXHJcbiAgICAgICAgICAgIGlmIChvYmplY3QgJiYgQVBJW21ldGhvZE9yT3B0aW9uc10pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQVBJW21ldGhvZE9yT3B0aW9uc10uYXBwbHkob2JqZWN0LCBhcmdzKSB8fCB0aGlzXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFvYmplY3QgJiYgKG1ldGhvZE9yT3B0aW9ucyA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSBcIm9iamVjdFwiKSlcclxuICAgICAgICAgICAgICAgICR0LmRhdGEocGx1Z2luTmFtZSwgbmV3IENvbnRhaW5lcigkdCwgbWV0aG9kT3JPcHRpb25zKSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxufSkoanExMTEsIHdpbmRvdywgJ3NvcnRhYmxlJyk7IiwiLyohIG5hbm9TY3JvbGxlckpTIC0gdjAuOC40IC0gMjAxNFxuICogaHR0cDovL2phbWVzZmxvcmVudGluby5naXRodWIuY29tL25hbm9TY3JvbGxlckpTL1xuICogQ29weXJpZ2h0IChjKSAyMDE0IEphbWVzIEZsb3JlbnRpbm87IExpY2Vuc2VkIE1JVCAqL1xuKGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgQlJPV1NFUl9JU19JRTcsIEJST1dTRVJfU0NST0xMQkFSX1dJRFRILCBET01TQ1JPTEwsIERPV04sIERSQUcsIEVOVEVSLCBLRVlET1dOLCBLRVlVUCwgTU9VU0VET1dOLCBNT1VTRUVOVEVSLCBNT1VTRU1PVkUsIE1PVVNFVVAsIE1PVVNFV0hFRUwsIE5hbm9TY3JvbGwsIFBBTkVET1dOLCBSRVNJWkUsIFNDUk9MTCwgU0NST0xMQkFSLCBUT1VDSE1PVkUsIFVQLCBXSEVFTCwgY0FGLCBkZWZhdWx0cywgZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoLCBoYXNUcmFuc2Zvcm0sIGlzRkZXaXRoQnVnZ3lTY3JvbGxiYXIsIHJBRiwgdHJhbnNmb3JtLCBfZWxlbWVudFN0eWxlLCBfcHJlZml4U3R5bGUsIF92ZW5kb3I7XG4gICAgZGVmYXVsdHMgPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICBhIGNsYXNzbmFtZSBmb3IgdGhlIHBhbmUgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBwYW5lQ2xhc3NcbiAgICAgIEB0eXBlIFN0cmluZ1xuICAgICAgQGRlZmF1bHQgJ25hbm8tcGFuZSdcbiAgICAgKi9cbiAgICAgICAgcGFuZUNsYXNzOiAnbmFuby1wYW5lJyxcblxuICAgICAgICAvKipcbiAgICAgIGEgY2xhc3NuYW1lIGZvciB0aGUgc2xpZGVyIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgc2xpZGVyQ2xhc3NcbiAgICAgIEB0eXBlIFN0cmluZ1xuICAgICAgQGRlZmF1bHQgJ25hbm8tc2xpZGVyJ1xuICAgICAqL1xuICAgICAgICBzbGlkZXJDbGFzczogJ25hbm8tc2xpZGVyJyxcblxuICAgICAgICAvKipcbiAgICAgIGEgY2xhc3NuYW1lIGZvciB0aGUgY29udGVudCBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IGNvbnRlbnRDbGFzc1xuICAgICAgQHR5cGUgU3RyaW5nXG4gICAgICBAZGVmYXVsdCAnbmFuby1jb250ZW50J1xuICAgICAqL1xuICAgICAgICBjb250ZW50Q2xhc3M6ICduYW5vLWNvbnRlbnQnLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBzZXR0aW5nIHRvIGVuYWJsZSBuYXRpdmUgc2Nyb2xsaW5nIGluIGlPUyBkZXZpY2VzLlxuICAgICAgQHByb3BlcnR5IGlPU05hdGl2ZVNjcm9sbGluZ1xuICAgICAgQHR5cGUgQm9vbGVhblxuICAgICAgQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICAgICAgaU9TTmF0aXZlU2Nyb2xsaW5nOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgIGEgc2V0dGluZyB0byBwcmV2ZW50IHRoZSByZXN0IG9mIHRoZSBwYWdlIGJlaW5nXG4gICAgICBzY3JvbGxlZCB3aGVuIHVzZXIgc2Nyb2xscyB0aGUgYC5jb250ZW50YCBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHByZXZlbnRQYWdlU2Nyb2xsaW5nXG4gICAgICBAdHlwZSBCb29sZWFuXG4gICAgICBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgICAgICBwcmV2ZW50UGFnZVNjcm9sbGluZzogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIHNldHRpbmcgdG8gZGlzYWJsZSBiaW5kaW5nIHRvIHRoZSByZXNpemUgZXZlbnQuXG4gICAgICBAcHJvcGVydHkgZGlzYWJsZVJlc2l6ZVxuICAgICAgQHR5cGUgQm9vbGVhblxuICAgICAgQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICAgICAgZGlzYWJsZVJlc2l6ZTogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIHNldHRpbmcgdG8gbWFrZSB0aGUgc2Nyb2xsYmFyIGFsd2F5cyB2aXNpYmxlLlxuICAgICAgQHByb3BlcnR5IGFsd2F5c1Zpc2libGVcbiAgICAgIEB0eXBlIEJvb2xlYW5cbiAgICAgIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgICAgIGFsd2F5c1Zpc2libGU6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBkZWZhdWx0IHRpbWVvdXQgZm9yIHRoZSBgZmxhc2goKWAgbWV0aG9kLlxuICAgICAgQHByb3BlcnR5IGZsYXNoRGVsYXlcbiAgICAgIEB0eXBlIE51bWJlclxuICAgICAgQGRlZmF1bHQgMTUwMFxuICAgICAqL1xuICAgICAgICBmbGFzaERlbGF5OiAxNTAwLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBtaW5pbXVtIGhlaWdodCBmb3IgdGhlIGAuc2xpZGVyYCBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHNsaWRlck1pbkhlaWdodFxuICAgICAgQHR5cGUgTnVtYmVyXG4gICAgICBAZGVmYXVsdCAyMFxuICAgICAqL1xuICAgICAgICBzbGlkZXJNaW5IZWlnaHQ6IDIwLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBtYXhpbXVtIGhlaWdodCBmb3IgdGhlIGAuc2xpZGVyYCBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHNsaWRlck1heEhlaWdodFxuICAgICAgQHR5cGUgTnVtYmVyXG4gICAgICBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgICAgIHNsaWRlck1heEhlaWdodDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgIGFuIGFsdGVybmF0ZSBkb2N1bWVudCBjb250ZXh0LlxuICAgICAgQHByb3BlcnR5IGRvY3VtZW50Q29udGV4dFxuICAgICAgQHR5cGUgRG9jdW1lbnRcbiAgICAgIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICAgICAgZG9jdW1lbnRDb250ZXh0OiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgYW4gYWx0ZXJuYXRlIHdpbmRvdyBjb250ZXh0LlxuICAgICAgQHByb3BlcnR5IHdpbmRvd0NvbnRleHRcbiAgICAgIEB0eXBlIFdpbmRvd1xuICAgICAgQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgICAgICB3aW5kb3dDb250ZXh0OiBudWxsXG4gICAgfTtcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBTQ1JPTExCQVJcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgU0NST0xMQkFSID0gJ3Njcm9sbGJhcic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgU0NST0xMXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFNDUk9MTCA9ICdzY3JvbGwnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFRE9XTlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFRE9XTiA9ICdtb3VzZWRvd24nO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFRU5URVJcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRUVOVEVSID0gJ21vdXNlZW50ZXInO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFTU9WRVxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRU1PVkUgPSAnbW91c2Vtb3ZlJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRVdIRUVMXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VXSEVFTCA9ICdtb3VzZXdoZWVsJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRVVQXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFVVAgPSAnbW91c2V1cCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgUkVTSVpFXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgUkVTSVpFID0gJ3Jlc2l6ZSc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgRFJBR1xuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBEUkFHID0gJ2RyYWcnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEVOVEVSXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEVOVEVSID0gJ2VudGVyJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBVUFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBVUCA9ICd1cCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgUEFORURPV05cbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgUEFORURPV04gPSAncGFuZWRvd24nO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IERPTVNDUk9MTFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBET01TQ1JPTEwgPSAnRE9NTW91c2VTY3JvbGwnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IERPV05cbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgRE9XTiA9ICdkb3duJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBXSEVFTFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBXSEVFTCA9ICd3aGVlbCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgS0VZRE9XTlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBLRVlET1dOID0gJ2tleWRvd24nO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEtFWVVQXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEtFWVVQID0gJ2tleXVwJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBUT1VDSE1PVkVcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgVE9VQ0hNT1ZFID0gJ3RvdWNobW92ZSc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgQlJPV1NFUl9JU19JRTdcbiAgICBAdHlwZSBCb29sZWFuXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEJST1dTRVJfSVNfSUU3ID0gd2luZG93Lm5hdmlnYXRvci5hcHBOYW1lID09PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJyAmJiAvbXNpZSA3Li9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci5hcHBWZXJzaW9uKSAmJiB3aW5kb3cuQWN0aXZlWE9iamVjdDtcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSFxuICAgIEB0eXBlIE51bWJlclxuICAgIEBzdGF0aWNcbiAgICBAZGVmYXVsdCBudWxsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggPSBudWxsO1xuICAgIHJBRiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgY0FGID0gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lO1xuICAgIF9lbGVtZW50U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcbiAgICBfdmVuZG9yID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSwgdHJhbnNmb3JtLCB2ZW5kb3IsIHZlbmRvcnMsIF9pLCBfbGVuO1xuICAgICAgICB2ZW5kb3JzID0gWyd0JywgJ3dlYmtpdFQnLCAnTW96VCcsICdtc1QnLCAnT1QnXTtcbiAgICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gdmVuZG9ycy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgICAgIHZlbmRvciA9IHZlbmRvcnNbaV07XG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSB2ZW5kb3JzW2ldICsgJ3JhbnNmb3JtJztcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0gaW4gX2VsZW1lbnRTdHlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2ZW5kb3JzW2ldLnN1YnN0cigwLCB2ZW5kb3JzW2ldLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KSgpO1xuICAgIF9wcmVmaXhTdHlsZSA9IGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgIGlmIChfdmVuZG9yID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfdmVuZG9yID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdmVuZG9yICsgc3R5bGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHlsZS5zdWJzdHIoMSk7XG4gICAgfTtcbiAgICB0cmFuc2Zvcm0gPSBfcHJlZml4U3R5bGUoJ3RyYW5zZm9ybScpO1xuICAgIGhhc1RyYW5zZm9ybSA9IHRyYW5zZm9ybSAhPT0gZmFsc2U7XG5cbiAgICAvKipcbiAgICBSZXR1cm5zIGJyb3dzZXIncyBuYXRpdmUgc2Nyb2xsYmFyIHdpZHRoXG4gICAgQG1ldGhvZCBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGhcbiAgICBAcmV0dXJuIHtOdW1iZXJ9IHRoZSBzY3JvbGxiYXIgd2lkdGggaW4gcGl4ZWxzXG4gICAgQHN0YXRpY1xuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3V0ZXIsIG91dGVyU3R5bGUsIHNjcm9sbGJhcldpZHRoO1xuICAgICAgICBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdXRlclN0eWxlID0gb3V0ZXIuc3R5bGU7XG4gICAgICAgIG91dGVyU3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBvdXRlclN0eWxlLndpZHRoID0gJzEwMHB4JztcbiAgICAgICAgb3V0ZXJTdHlsZS5oZWlnaHQgPSAnMTAwcHgnO1xuICAgICAgICBvdXRlclN0eWxlLm92ZXJmbG93ID0gU0NST0xMO1xuICAgICAgICBvdXRlclN0eWxlLnRvcCA9ICctOTk5OXB4JztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG4gICAgICAgIHNjcm9sbGJhcldpZHRoID0gb3V0ZXIub2Zmc2V0V2lkdGggLSBvdXRlci5jbGllbnRXaWR0aDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlcik7XG4gICAgICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcbiAgICB9O1xuICAgIGlzRkZXaXRoQnVnZ3lTY3JvbGxiYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlzT1NYRkYsIHVhLCB2ZXJzaW9uO1xuICAgICAgICB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgICBpc09TWEZGID0gLyg/PS4rTWFjIE9TIFgpKD89LitGaXJlZm94KS8udGVzdCh1YSk7XG4gICAgICAgIGlmICghaXNPU1hGRikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZlcnNpb24gPSAvRmlyZWZveFxcL1xcZHsyfVxcLi8uZXhlYyh1YSk7XG4gICAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvblswXS5yZXBsYWNlKC9cXEQrL2csICcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNPU1hGRiAmJiArdmVyc2lvbiA+IDIzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICBAY2xhc3MgTmFub1Njcm9sbFxuICAgIEBwYXJhbSBlbGVtZW50IHtIVE1MRWxlbWVudHxOb2RlfSB0aGUgbWFpbiBlbGVtZW50XG4gICAgQHBhcmFtIG9wdGlvbnMge09iamVjdH0gbmFub1Njcm9sbGVyJ3Mgb3B0aW9uc1xuICAgIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgICBOYW5vU2Nyb2xsID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBOYW5vU2Nyb2xsKGVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmVsID0gZWw7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggfHwgKEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID0gZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoKCkpO1xuICAgICAgICAgICAgdGhpcy4kZWwgPSAkKHRoaXMuZWwpO1xuICAgICAgICAgICAgdGhpcy5kb2MgPSAkKHRoaXMub3B0aW9ucy5kb2N1bWVudENvbnRleHQgfHwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgdGhpcy53aW4gPSAkKHRoaXMub3B0aW9ucy53aW5kb3dDb250ZXh0IHx8IHdpbmRvdyk7XG4gICAgICAgICAgICB0aGlzLmJvZHkgPSB0aGlzLmRvYy5maW5kKCdib2R5Jyk7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50ID0gdGhpcy4kZWwuY2hpbGRyZW4oXCIuXCIgKyBvcHRpb25zLmNvbnRlbnRDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LmF0dHIoJ3RhYmluZGV4JywgdGhpcy5vcHRpb25zLnRhYkluZGV4IHx8IDApO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy4kY29udGVudFswXTtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmlPU05hdGl2ZVNjcm9sbGluZyAmJiAodGhpcy5lbC5zdHlsZS5XZWJraXRPdmVyZmxvd1Njcm9sbGluZyAhPSBudWxsKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlU2Nyb2xsaW5nKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgIFByZXZlbnRzIHRoZSByZXN0IG9mIHRoZSBwYWdlIGJlaW5nIHNjcm9sbGVkXG4gICAgICB3aGVuIHVzZXIgc2Nyb2xscyB0aGUgYC5uYW5vLWNvbnRlbnRgIGVsZW1lbnQuXG4gICAgICBAbWV0aG9kIHByZXZlbnRTY3JvbGxpbmdcbiAgICAgIEBwYXJhbSBldmVudCB7RXZlbnR9XG4gICAgICBAcGFyYW0gZGlyZWN0aW9uIHtTdHJpbmd9IFNjcm9sbCBkaXJlY3Rpb24gKHVwIG9yIGRvd24pXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnByZXZlbnRTY3JvbGxpbmcgPSBmdW5jdGlvbihlLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09IERPTVNDUk9MTCkge1xuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IERPV04gJiYgZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA+IDAgfHwgZGlyZWN0aW9uID09PSBVUCAmJiBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09IE1PVVNFV0hFRUwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWUub3JpZ2luYWxFdmVudCB8fCAhZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBET1dOICYmIGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhIDwgMCB8fCBkaXJlY3Rpb24gPT09IFVQICYmIGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBFbmFibGUgaU9TIG5hdGl2ZSBzY3JvbGxpbmdcbiAgICAgIEBtZXRob2QgbmF0aXZlU2Nyb2xsaW5nXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLm5hdGl2ZVNjcm9sbGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xuICAgICAgICAgICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBVcGRhdGVzIHRob3NlIG5hbm9TY3JvbGxlciBwcm9wZXJ0aWVzIHRoYXRcbiAgICAgIGFyZSByZWxhdGVkIHRvIGN1cnJlbnQgc2Nyb2xsYmFyIHBvc2l0aW9uLlxuICAgICAgQG1ldGhvZCB1cGRhdGVTY3JvbGxWYWx1ZXNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUudXBkYXRlU2Nyb2xsVmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCwgZGlyZWN0aW9uO1xuICAgICAgICAgICAgY29udGVudCA9IHRoaXMuY29udGVudDtcbiAgICAgICAgICAgIHRoaXMubWF4U2Nyb2xsVG9wID0gY29udGVudC5zY3JvbGxIZWlnaHQgLSBjb250ZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucHJldlNjcm9sbFRvcCA9IHRoaXMuY29udGVudFNjcm9sbFRvcCB8fCAwO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50U2Nyb2xsVG9wID0gY29udGVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgPiB0aGlzLnByZXZpb3VzUG9zaXRpb24gPyBcImRvd25cIiA6IHRoaXMuY29udGVudFNjcm9sbFRvcCA8IHRoaXMucHJldmlvdXNQb3NpdGlvbiA/IFwidXBcIiA6IFwic2FtZVwiO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gdGhpcy5jb250ZW50U2Nyb2xsVG9wO1xuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiAhPT0gXCJzYW1lXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKCd1cGRhdGUnLCB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLmNvbnRlbnRTY3JvbGxUb3AsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMubWF4U2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4U2xpZGVyVG9wID0gdGhpcy5wYW5lSGVpZ2h0IC0gdGhpcy5zbGlkZXJIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJUb3AgPSB0aGlzLm1heFNjcm9sbFRvcCA9PT0gMCA/IDAgOiB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgKiB0aGlzLm1heFNsaWRlclRvcCAvIHRoaXMubWF4U2Nyb2xsVG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBVcGRhdGVzIENTUyBzdHlsZXMgZm9yIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uLlxuICAgICAgVXNlcyBDU1MgMmQgdHJhbnNmcm9tcyBhbmQgYHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVgIGlmIGF2YWlsYWJsZS5cbiAgICAgIEBtZXRob2Qgc2V0T25TY3JvbGxTdHlsZXNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2V0T25TY3JvbGxTdHlsZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjc3NWYWx1ZTtcbiAgICAgICAgICAgIGlmIChoYXNUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICBjc3NWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICAgIGNzc1ZhbHVlW3RyYW5zZm9ybV0gPSBcInRyYW5zbGF0ZSgwLCBcIiArIHRoaXMuc2xpZGVyVG9wICsgXCJweClcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3NzVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogdGhpcy5zbGlkZXJUb3BcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJBRikge1xuICAgICAgICAgICAgICAgIGlmIChjQUYgJiYgdGhpcy5zY3JvbGxSQUYpIHtcbiAgICAgICAgICAgICAgICAgICAgY0FGKHRoaXMuc2Nyb2xsUkFGKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxSQUYgPSByQUYoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbFJBRiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2xpZGVyLmNzcyhjc3NWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcykpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci5jc3MoY3NzVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBDcmVhdGVzIGV2ZW50IHJlbGF0ZWQgbWV0aG9kc1xuICAgICAgQG1ldGhvZCBjcmVhdGVFdmVudHNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuY3JlYXRlRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICAgICAgICAgICBkb3duOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzQmVpbmdEcmFnZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZnNldFkgPSBlLnBhZ2VZIC0gX3RoaXMuc2xpZGVyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuc2xpZGVyLmlzKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZnNldFkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFuZS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2MuYmluZChNT1VTRU1PVkUsIF90aGlzLmV2ZW50c1tEUkFHXSkuYmluZChNT1VTRVVQLCBfdGhpcy5ldmVudHNbVVBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJvZHkuYmluZChNT1VTRUVOVEVSLCBfdGhpcy5ldmVudHNbRU5URVJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICBkcmFnOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlclkgPSBlLnBhZ2VZIC0gX3RoaXMuJGVsLm9mZnNldCgpLnRvcCAtIF90aGlzLnBhbmVUb3AgLSAoX3RoaXMub2Zmc2V0WSB8fCBfdGhpcy5zbGlkZXJIZWlnaHQgKiAwLjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA+PSBfdGhpcy5tYXhTY3JvbGxUb3AgJiYgX3RoaXMucHJldlNjcm9sbFRvcCAhPT0gX3RoaXMubWF4U2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ3Njcm9sbGVuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID09PSAwICYmIF90aGlzLnByZXZTY3JvbGxUb3AgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsdG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgdXA6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNCZWluZ0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBhbmUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jLnVuYmluZChNT1VTRU1PVkUsIF90aGlzLmV2ZW50c1tEUkFHXSkudW5iaW5kKE1PVVNFVVAsIF90aGlzLmV2ZW50c1tVUF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYm9keS51bmJpbmQoTU9VU0VFTlRFUiwgX3RoaXMuZXZlbnRzW0VOVEVSXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgcmVzaXplOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgcGFuZWRvd246IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSA9IChlLm9mZnNldFkgfHwgZS5vcmlnaW5hbEV2ZW50LmxheWVyWSkgLSAoX3RoaXMuc2xpZGVySGVpZ2h0ICogMC41KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXZlbnRzLmRvd24oZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgc2Nyb2xsOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVNjcm9sbFZhbHVlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQmVpbmdEcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZID0gX3RoaXMuc2xpZGVyVG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldE9uU2Nyb2xsU3R5bGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPj0gX3RoaXMubWF4U2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMucHJldmVudFBhZ2VTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJldmVudFNjcm9sbGluZyhlLCBET1dOKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZTY3JvbGxUb3AgIT09IF90aGlzLm1heFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMucHJldmVudFBhZ2VTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJldmVudFNjcm9sbGluZyhlLCBVUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGx0b3AnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgd2hlZWw6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhID0gZS5kZWx0YSB8fCBlLndoZWVsRGVsdGEgfHwgKGUub3JpZ2luYWxFdmVudCAmJiBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSkgfHwgLWUuZGV0YWlsIHx8IChlLm9yaWdpbmFsRXZlbnQgJiYgLWUub3JpZ2luYWxFdmVudC5kZXRhaWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSArPSAtZGVsdGEgLyAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgZW50ZXI6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmVpbmdEcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChlLmJ1dHRvbnMgfHwgZS53aGljaCkgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9yZWYgPSBfdGhpcy5ldmVudHMpW1VQXS5hcHBseShfcmVmLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBBZGRzIGV2ZW50IGxpc3RlbmVycyB3aXRoIGpRdWVyeS5cbiAgICAgIEBtZXRob2QgYWRkRXZlbnRzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmFkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50cztcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRzKCk7XG4gICAgICAgICAgICBldmVudHMgPSB0aGlzLmV2ZW50cztcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRpc2FibGVSZXNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpbi5iaW5kKFJFU0laRSwgZXZlbnRzW1JFU0laRV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLmJpbmQoTU9VU0VET1dOLCBldmVudHNbRE9XTl0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5iaW5kKE1PVVNFRE9XTiwgZXZlbnRzW1BBTkVET1dOXSkuYmluZChcIlwiICsgTU9VU0VXSEVFTCArIFwiIFwiICsgRE9NU0NST0xMLCBldmVudHNbV0hFRUxdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuYmluZChcIlwiICsgU0NST0xMICsgXCIgXCIgKyBNT1VTRVdIRUVMICsgXCIgXCIgKyBET01TQ1JPTEwgKyBcIiBcIiArIFRPVUNITU9WRSwgZXZlbnRzW1NDUk9MTF0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBSZW1vdmVzIGV2ZW50IGxpc3RlbmVycyB3aXRoIGpRdWVyeS5cbiAgICAgIEBtZXRob2QgcmVtb3ZlRXZlbnRzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnJlbW92ZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50cztcbiAgICAgICAgICAgIGV2ZW50cyA9IHRoaXMuZXZlbnRzO1xuICAgICAgICAgICAgdGhpcy53aW4udW5iaW5kKFJFU0laRSwgZXZlbnRzW1JFU0laRV0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLnVuYmluZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS51bmJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQudW5iaW5kKFwiXCIgKyBTQ1JPTEwgKyBcIiBcIiArIE1PVVNFV0hFRUwgKyBcIiBcIiArIERPTVNDUk9MTCArIFwiIFwiICsgVE9VQ0hNT1ZFLCBldmVudHNbU0NST0xMXSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEdlbmVyYXRlcyBuYW5vU2Nyb2xsZXIncyBzY3JvbGxiYXIgYW5kIGVsZW1lbnRzIGZvciBpdC5cbiAgICAgIEBtZXRob2QgZ2VuZXJhdGVcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50Q2xhc3MsIGNzc1J1bGUsIGN1cnJlbnRQYWRkaW5nLCBvcHRpb25zLCBwYW5lLCBwYW5lQ2xhc3MsIHNsaWRlckNsYXNzO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHBhbmVDbGFzcyA9IG9wdGlvbnMucGFuZUNsYXNzLCBzbGlkZXJDbGFzcyA9IG9wdGlvbnMuc2xpZGVyQ2xhc3MsIGNvbnRlbnRDbGFzcyA9IG9wdGlvbnMuY29udGVudENsYXNzO1xuICAgICAgICAgICAgaWYgKCEocGFuZSA9IHRoaXMuJGVsLmNoaWxkcmVuKFwiLlwiICsgcGFuZUNsYXNzKSkubGVuZ3RoICYmICFwYW5lLmNoaWxkcmVuKFwiLlwiICsgc2xpZGVyQ2xhc3MpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmFwcGVuZChcIjxkaXYgY2xhc3M9XFxcIlwiICsgcGFuZUNsYXNzICsgXCJcXFwiPjxkaXYgY2xhc3M9XFxcIlwiICsgc2xpZGVyQ2xhc3MgKyBcIlxcXCIgLz48L2Rpdj5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhbmUgPSB0aGlzLiRlbC5jaGlsZHJlbihcIi5cIiArIHBhbmVDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLnNsaWRlciA9IHRoaXMucGFuZS5maW5kKFwiLlwiICsgc2xpZGVyQ2xhc3MpO1xuICAgICAgICAgICAgaWYgKEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID09PSAwICYmIGlzRkZXaXRoQnVnZ3lTY3JvbGxiYXIoKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWRkaW5nID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5jb250ZW50LCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXJpZ2h0JykucmVwbGFjZSgvW14wLTkuXSsvZywgJycpO1xuICAgICAgICAgICAgICAgIGNzc1J1bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtMTQsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogK2N1cnJlbnRQYWRkaW5nICsgMTRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCkge1xuICAgICAgICAgICAgICAgIGNzc1J1bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdoYXMtc2Nyb2xsYmFyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3NzUnVsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3MoY3NzUnVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgQG1ldGhvZCByZXN0b3JlXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50cygpO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBSZXNldHMgbmFub1Njcm9sbGVyJ3Mgc2Nyb2xsYmFyLlxuICAgICAgQG1ldGhvZCByZXNldFxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKCk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50LCBjb250ZW50SGVpZ2h0LCBjb250ZW50UG9zaXRpb24sIGNvbnRlbnRTdHlsZSwgY29udGVudFN0eWxlT3ZlcmZsb3dZLCBwYW5lQm90dG9tLCBwYW5lSGVpZ2h0LCBwYW5lT3V0ZXJIZWlnaHQsIHBhbmVUb3AsIHBhcmVudE1heEhlaWdodCwgcmlnaHQsIHNsaWRlckhlaWdodDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEhlaWdodCA9IHRoaXMuY29udGVudC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLiRlbC5maW5kKFwiLlwiICsgdGhpcy5vcHRpb25zLnBhbmVDbGFzcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZSgpLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7XG4gICAgICAgICAgICBjb250ZW50U3R5bGUgPSBjb250ZW50LnN0eWxlO1xuICAgICAgICAgICAgY29udGVudFN0eWxlT3ZlcmZsb3dZID0gY29udGVudFN0eWxlLm92ZXJmbG93WTtcbiAgICAgICAgICAgIGlmIChCUk9XU0VSX0lTX0lFNykge1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLiRjb250ZW50LmhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50SGVpZ2h0ID0gY29udGVudC5zY3JvbGxIZWlnaHQgKyBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSDtcbiAgICAgICAgICAgIHBhcmVudE1heEhlaWdodCA9IHBhcnNlSW50KHRoaXMuJGVsLmNzcyhcIm1heC1oZWlnaHRcIiksIDEwKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRNYXhIZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuaGVpZ2h0KFwiXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmhlaWdodChjb250ZW50LnNjcm9sbEhlaWdodCA+IHBhcmVudE1heEhlaWdodCA/IHBhcmVudE1heEhlaWdodCA6IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhbmVIZWlnaHQgPSB0aGlzLnBhbmUub3V0ZXJIZWlnaHQoZmFsc2UpO1xuICAgICAgICAgICAgcGFuZVRvcCA9IHBhcnNlSW50KHRoaXMucGFuZS5jc3MoJ3RvcCcpLCAxMCk7XG4gICAgICAgICAgICBwYW5lQm90dG9tID0gcGFyc2VJbnQodGhpcy5wYW5lLmNzcygnYm90dG9tJyksIDEwKTtcbiAgICAgICAgICAgIHBhbmVPdXRlckhlaWdodCA9IHBhbmVIZWlnaHQgKyBwYW5lVG9wICsgcGFuZUJvdHRvbTtcbiAgICAgICAgICAgIHNsaWRlckhlaWdodCA9IE1hdGgucm91bmQocGFuZU91dGVySGVpZ2h0IC8gY29udGVudEhlaWdodCAqIHBhbmVPdXRlckhlaWdodCk7XG4gICAgICAgICAgICBpZiAoc2xpZGVySGVpZ2h0IDwgdGhpcy5vcHRpb25zLnNsaWRlck1pbkhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNsaWRlckhlaWdodCA9IHRoaXMub3B0aW9ucy5zbGlkZXJNaW5IZWlnaHQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCh0aGlzLm9wdGlvbnMuc2xpZGVyTWF4SGVpZ2h0ICE9IG51bGwpICYmIHNsaWRlckhlaWdodCA+IHRoaXMub3B0aW9ucy5zbGlkZXJNYXhIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzbGlkZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuc2xpZGVyTWF4SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRlbnRTdHlsZU92ZXJmbG93WSA9PT0gU0NST0xMICYmIGNvbnRlbnRTdHlsZS5vdmVyZmxvd1ggIT09IFNDUk9MTCkge1xuICAgICAgICAgICAgICAgIHNsaWRlckhlaWdodCArPSBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF4U2xpZGVyVG9wID0gcGFuZU91dGVySGVpZ2h0IC0gc2xpZGVySGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5jb250ZW50SGVpZ2h0ID0gY29udGVudEhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucGFuZUhlaWdodCA9IHBhbmVIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnBhbmVPdXRlckhlaWdodCA9IHBhbmVPdXRlckhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVySGVpZ2h0ID0gc2xpZGVySGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wYW5lVG9wID0gcGFuZVRvcDtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyLmhlaWdodChzbGlkZXJIZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5ldmVudHMuc2Nyb2xsKCk7XG4gICAgICAgICAgICB0aGlzLnBhbmUuc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAoKGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ID09PSBjb250ZW50LmNsaWVudEhlaWdodCkgfHwgKHRoaXMucGFuZS5vdXRlckhlaWdodCh0cnVlKSA+PSBjb250ZW50LnNjcm9sbEhlaWdodCAmJiBjb250ZW50U3R5bGVPdmVyZmxvd1kgIT09IFNDUk9MTCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbC5jbGllbnRIZWlnaHQgPT09IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICYmIGNvbnRlbnRTdHlsZU92ZXJmbG93WSA9PT0gU0NST0xMKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhbmUuY3NzKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAodGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGUgPyAxIDogJycpLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICh0aGlzLm9wdGlvbnMuYWx3YXlzVmlzaWJsZSA/ICd2aXNpYmxlJyA6ICcnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250ZW50UG9zaXRpb24gPSB0aGlzLiRjb250ZW50LmNzcygncG9zaXRpb24nKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50UG9zaXRpb24gPT09ICdzdGF0aWMnIHx8IGNvbnRlbnRQb3NpdGlvbiA9PT0gJ3JlbGF0aXZlJykge1xuICAgICAgICAgICAgICAgIHJpZ2h0ID0gcGFyc2VJbnQodGhpcy4kY29udGVudC5jc3MoJ3JpZ2h0JyksIDEwKTtcbiAgICAgICAgICAgICAgICBpZiAocmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IHJpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBAbWV0aG9kIHNjcm9sbFxuICAgICAgQHByaXZhdGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbDogJ3RvcCcgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNsaWRlclkgPSBNYXRoLm1heCgwLCB0aGlzLnNsaWRlclkpO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXJZID0gTWF0aC5taW4odGhpcy5tYXhTbGlkZXJUb3AsIHRoaXMuc2xpZGVyWSk7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnNjcm9sbFRvcCh0aGlzLm1heFNjcm9sbFRvcCAqIHRoaXMuc2xpZGVyWSAvIHRoaXMubWF4U2xpZGVyVG9wKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbFZhbHVlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0T25TY3JvbGxTdHlsZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBTY3JvbGwgYXQgdGhlIGJvdHRvbSB3aXRoIGFuIG9mZnNldCB2YWx1ZVxuICAgICAgQG1ldGhvZCBzY3JvbGxCb3R0b21cbiAgICAgIEBwYXJhbSBvZmZzZXRZIHtOdW1iZXJ9XG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGxCb3R0b206IHZhbHVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbEJvdHRvbSA9IGZ1bmN0aW9uKG9mZnNldFkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuc2Nyb2xsVG9wKHRoaXMuY29udGVudEhlaWdodCAtIHRoaXMuJGNvbnRlbnQuaGVpZ2h0KCkgLSBvZmZzZXRZKS50cmlnZ2VyKE1PVVNFV0hFRUwpO1xuICAgICAgICAgICAgdGhpcy5zdG9wKCkucmVzdG9yZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFNjcm9sbCBhdCB0aGUgdG9wIHdpdGggYW4gb2Zmc2V0IHZhbHVlXG4gICAgICBAbWV0aG9kIHNjcm9sbFRvcFxuICAgICAgQHBhcmFtIG9mZnNldFkge051bWJlcn1cbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbFRvcDogdmFsdWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsVG9wID0gZnVuY3Rpb24ob2Zmc2V0WSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC5zY3JvbGxUb3AoK29mZnNldFkpLnRyaWdnZXIoTU9VU0VXSEVFTCk7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKS5yZXN0b3JlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgU2Nyb2xsIHRvIGFuIGVsZW1lbnRcbiAgICAgIEBtZXRob2Qgc2Nyb2xsVG9cbiAgICAgIEBwYXJhbSBub2RlIHtOb2RlfSBBIG5vZGUgdG8gc2Nyb2xsIHRvLlxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsVG86ICQoJyNhX25vZGUnKSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGxUbyA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wKHRoaXMuJGVsLmZpbmQobm9kZSkuZ2V0KDApLm9mZnNldFRvcCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgVG8gc3RvcCB0aGUgb3BlcmF0aW9uLlxuICAgICAgVGhpcyBvcHRpb24gd2lsbCB0ZWxsIHRoZSBwbHVnaW4gdG8gZGlzYWJsZSBhbGwgZXZlbnQgYmluZGluZ3MgYW5kIGhpZGUgdGhlIGdhZGdldCBzY3JvbGxiYXIgZnJvbSB0aGUgVUkuXG4gICAgICBAbWV0aG9kIHN0b3BcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHN0b3A6IHRydWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGNBRiAmJiB0aGlzLnNjcm9sbFJBRikge1xuICAgICAgICAgICAgICAgIGNBRih0aGlzLnNjcm9sbFJBRik7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxSQUYgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBEZXN0cm95cyBuYW5vU2Nyb2xsZXIgYW5kIHJlc3RvcmVzIGJyb3dzZXIncyBuYXRpdmUgc2Nyb2xsYmFyLlxuICAgICAgQG1ldGhvZCBkZXN0cm95XG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBkZXN0cm95OiB0cnVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nICYmIHRoaXMucGFuZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQlJPV1NFUl9JU19JRTcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmhlaWdodCgnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnJlbW92ZUF0dHIoJ3RhYmluZGV4Jyk7XG4gICAgICAgICAgICBpZiAodGhpcy4kZWwuaGFzQ2xhc3MoJ2hhcy1zY3JvbGxiYXInKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdoYXMtc2Nyb2xsYmFyJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICByaWdodDogJydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBUbyBmbGFzaCB0aGUgc2Nyb2xsYmFyIGdhZGdldCBmb3IgYW4gYW1vdW50IG9mIHRpbWUgZGVmaW5lZCBpbiBwbHVnaW4gc2V0dGluZ3MgKGRlZmF1bHRzIHRvIDEsNXMpLlxuICAgICAgVXNlZnVsIGlmIHlvdSB3YW50IHRvIHNob3cgdGhlIHVzZXIgKGUuZy4gb24gcGFnZWxvYWQpIHRoYXQgdGhlcmUgaXMgbW9yZSBjb250ZW50IHdhaXRpbmcgZm9yIGhpbS5cbiAgICAgIEBtZXRob2QgZmxhc2hcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IGZsYXNoOiB0cnVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmZsYXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLnBhbmUuYWRkQ2xhc3MoJ2ZsYXNoZWQnKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYW5lLnJlbW92ZUNsYXNzKCdmbGFzaGVkJyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKHRoaXMpLCB0aGlzLm9wdGlvbnMuZmxhc2hEZWxheSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gTmFub1Njcm9sbDtcblxuICAgIH0pKCk7XG4gICAgJC5mbi5uYW5vU2Nyb2xsZXIgPSBmdW5jdGlvbihzZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMsIHNjcm9sbGJhcjtcbiAgICAgICAgICAgIGlmICghKHNjcm9sbGJhciA9IHRoaXMubmFub3Njcm9sbGVyKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5hbm9zY3JvbGxlciA9IHNjcm9sbGJhciA9IG5ldyBOYW5vU2Nyb2xsKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNldHRpbmdzICYmIHR5cGVvZiBzZXR0aW5ncyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICQuZXh0ZW5kKHNjcm9sbGJhci5vcHRpb25zLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbEJvdHRvbSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsQm90dG9tKHNldHRpbmdzLnNjcm9sbEJvdHRvbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGxUb3AgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvcChzZXR0aW5ncy5zY3JvbGxUb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUbyhzZXR0aW5ncy5zY3JvbGxUbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGwgPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsQm90dG9tKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsID09PSAndG9wJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbCAmJiBzZXR0aW5ncy5zY3JvbGwgaW5zdGFuY2VvZiAkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsVG8oc2V0dGluZ3Muc2Nyb2xsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5kZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuZmxhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5mbGFzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIucmVzZXQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAkLmZuLm5hbm9TY3JvbGxlci5Db25zdHJ1Y3RvciA9IE5hbm9TY3JvbGw7XG59KShqcTExMSwgd2luZG93LCBkb2N1bWVudCk7IiwiLypcbiAqIEBmaWxlT3ZlcnZpZXcgVG91Y2hTd2lwZSAtIGpRdWVyeSBQbHVnaW5cbiAqIEB2ZXJzaW9uIDEuNi42XG4gKlxuICogQGF1dGhvciBNYXR0IEJyeXNvbiBodHRwOi8vd3d3LmdpdGh1Yi5jb20vbWF0dGJyeXNvblxuICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vbWF0dGJyeXNvbi9Ub3VjaFN3aXBlLUpxdWVyeS1QbHVnaW5cbiAqIEBzZWUgaHR0cDovL2xhYnMuc2tpbmtlcnMuY29tL3RvdWNoU3dpcGUvXG4gKiBAc2VlIGh0dHA6Ly9wbHVnaW5zLmpxdWVyeS5jb20vcHJvamVjdC90b3VjaFN3aXBlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEwIE1hdHQgQnJ5c29uXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgb3IgR1BMIFZlcnNpb24gMiBsaWNlbnNlcy5cbiAqXG4gKi9cblxuKGZ1bmN0aW9uKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICYmIGRlZmluZS5hbWQuanExMTEpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzLlxuICAgICAgICBmYWN0b3J5KGpxMTExKTtcbiAgICB9XG59KGZ1bmN0aW9uKCQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8vQ29uc3RhbnRzXG4gICAgdmFyIExFRlQgPSBcImxlZnRcIixcbiAgICAgICAgUklHSFQgPSBcInJpZ2h0XCIsXG4gICAgICAgIFVQID0gXCJ1cFwiLFxuICAgICAgICBET1dOID0gXCJkb3duXCIsXG4gICAgICAgIElOID0gXCJpblwiLFxuICAgICAgICBPVVQgPSBcIm91dFwiLFxuXG4gICAgICAgIE5PTkUgPSBcIm5vbmVcIixcbiAgICAgICAgQVVUTyA9IFwiYXV0b1wiLFxuXG4gICAgICAgIFNXSVBFID0gXCJzd2lwZVwiLFxuICAgICAgICBQSU5DSCA9IFwicGluY2hcIixcbiAgICAgICAgVEFQID0gXCJ0YXBcIixcbiAgICAgICAgRE9VQkxFX1RBUCA9IFwiZG91YmxldGFwXCIsXG4gICAgICAgIExPTkdfVEFQID0gXCJsb25ndGFwXCIsXG4gICAgICAgIEhPTEQgPSBcImhvbGRcIixcblxuICAgICAgICBIT1JJWk9OVEFMID0gXCJob3Jpem9udGFsXCIsXG4gICAgICAgIFZFUlRJQ0FMID0gXCJ2ZXJ0aWNhbFwiLFxuXG4gICAgICAgIEFMTF9GSU5HRVJTID0gXCJhbGxcIixcblxuICAgICAgICBET1VCTEVfVEFQX1RIUkVTSE9MRCA9IDEwLFxuXG4gICAgICAgIFBIQVNFX1NUQVJUID0gXCJzdGFydFwiLFxuICAgICAgICBQSEFTRV9NT1ZFID0gXCJtb3ZlXCIsXG4gICAgICAgIFBIQVNFX0VORCA9IFwiZW5kXCIsXG4gICAgICAgIFBIQVNFX0NBTkNFTCA9IFwiY2FuY2VsXCIsXG5cbiAgICAgICAgU1VQUE9SVFNfVE9VQ0ggPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3csXG5cbiAgICAgICAgU1VQUE9SVFNfUE9JTlRFUl9JRTEwID0gd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkICYmICF3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkLFxuXG4gICAgICAgIFNVUFBPUlRTX1BPSU5URVIgPSB3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkIHx8IHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCxcblxuICAgICAgICBQTFVHSU5fTlMgPSAnVG91Y2hTd2lwZSc7XG5cblxuXG4gICAgLyoqXG5cdCogVGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbiwgYW5kIGF2YWlsYWJsZSBvcHRpb25zIHRvIGNvbmZpZ3VyZSB0b3VjaCBzd2lwZSB3aXRoLlxuXHQqIFlvdSBjYW4gc2V0IHRoZSBkZWZhdWx0IHZhbHVlcyBieSB1cGRhdGluZyBhbnkgb2YgdGhlIHByb3BlcnRpZXMgcHJpb3IgdG8gaW5zdGFudGlhdGlvbi5cblx0KiBAbmFtZSAkLmZuLnN3aXBlLmRlZmF1bHRzXG5cdCogQG5hbWVzcGFjZVxuXHQqIEBwcm9wZXJ0eSB7aW50fSBbZmluZ2Vycz0xXSBUaGUgbnVtYmVyIG9mIGZpbmdlcnMgdG8gZGV0ZWN0IGluIGEgc3dpcGUuIEFueSBzd2lwZXMgdGhhdCBkbyBub3QgbWVldCB0aGlzIHJlcXVpcmVtZW50IHdpbGwgTk9UIHRyaWdnZXIgc3dpcGUgaGFuZGxlcnMuXG5cdCogQHByb3BlcnR5IHtpbnR9IFt0aHJlc2hvbGQ9NzVdIFRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoYXQgdGhlIHVzZXIgbXVzdCBtb3ZlIHRoZWlyIGZpbmdlciBieSBiZWZvcmUgaXQgaXMgY29uc2lkZXJlZCBhIHN3aXBlLlxuXHQqIEBwcm9wZXJ0eSB7aW50fSBbY2FuY2VsVGhyZXNob2xkPW51bGxdIFRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoYXQgdGhlIHVzZXIgbXVzdCBtb3ZlIHRoZWlyIGZpbmdlciBiYWNrIGZyb20gdGhlIG9yaWdpbmFsIHN3aXBlIGRpcmVjdGlvbiB0byBjYW5jZWwgdGhlIGdlc3R1cmUuXG5cdCogQHByb3BlcnR5IHtpbnR9IFtwaW5jaFRocmVzaG9sZD0yMF0gVGhlIG51bWJlciBvZiBwaXhlbHMgdGhhdCB0aGUgdXNlciBtdXN0IHBpbmNoIHRoZWlyIGZpbmdlciBieSBiZWZvcmUgaXQgaXMgY29uc2lkZXJlZCBhIHBpbmNoLlxuXHQqIEBwcm9wZXJ0eSB7aW50fSBbbWF4VGltZVRocmVzaG9sZD1udWxsXSBUaW1lLCBpbiBtaWxsaXNlY29uZHMsIGJldHdlZW4gdG91Y2hTdGFydCBhbmQgdG91Y2hFbmQgbXVzdCBOT1QgZXhjZWVkIGluIG9yZGVyIHRvIGJlIGNvbnNpZGVyZWQgYSBzd2lwZS5cblx0KiBAcHJvcGVydHkge2ludH0gW2ZpbmdlclJlbGVhc2VUaHJlc2hvbGQ9MjUwXSBUaW1lIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHJlbGVhc2luZyBtdWx0aXBsZSBmaW5nZXJzLiAgSWYgMiBmaW5nZXJzIGFyZSBkb3duLCBhbmQgYXJlIHJlbGVhc2VkIG9uZSBhZnRlciB0aGUgb3RoZXIsIGlmIHRoZXkgYXJlIHdpdGhpbiB0aGlzIHRocmVzaG9sZCwgaXQgY291bnRzIGFzIGEgc2ltdWx0YW5lb3VzIHJlbGVhc2UuXG5cdCogQHByb3BlcnR5IHtpbnR9IFtsb25nVGFwVGhyZXNob2xkPTUwMF0gVGltZSBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiB0YXAgYW5kIHJlbGVhc2UgZm9yIGEgbG9uZyB0YXBcblx0KiBAcHJvcGVydHkge2ludH0gW2RvdWJsZVRhcFRocmVzaG9sZD0yMDBdIFRpbWUgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gMiB0YXBzIHRvIGNvdW50IGFzIGEgZG91YmxlIHRhcFxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtzd2lwZT1udWxsXSBBIGhhbmRsZXIgdG8gY2F0Y2ggYWxsIHN3aXBlcy4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnN3aXBlfVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtzd2lwZUxlZnQ9bnVsbF0gQSBoYW5kbGVyIHRoYXQgaXMgdHJpZ2dlcmVkIGZvciBcImxlZnRcIiBzd2lwZXMuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpzd2lwZUxlZnR9XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3N3aXBlUmlnaHQ9bnVsbF0gQSBoYW5kbGVyIHRoYXQgaXMgdHJpZ2dlcmVkIGZvciBcInJpZ2h0XCIgc3dpcGVzLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6c3dpcGVSaWdodH1cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbc3dpcGVVcD1udWxsXSBBIGhhbmRsZXIgdGhhdCBpcyB0cmlnZ2VyZWQgZm9yIFwidXBcIiBzd2lwZXMuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpzd2lwZVVwfVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtzd2lwZURvd249bnVsbF0gQSBoYW5kbGVyIHRoYXQgaXMgdHJpZ2dlcmVkIGZvciBcImRvd25cIiBzd2lwZXMuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpzd2lwZURvd259XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3N3aXBlU3RhdHVzPW51bGxdIEEgaGFuZGxlciB0cmlnZ2VyZWQgZm9yIGV2ZXJ5IHBoYXNlIG9mIHRoZSBzd2lwZS4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnN3aXBlU3RhdHVzfVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtwaW5jaEluPW51bGxdIEEgaGFuZGxlciB0cmlnZ2VyZWQgZm9yIHBpbmNoIGluIGV2ZW50cy4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnBpbmNoSW59XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3BpbmNoT3V0PW51bGxdIEEgaGFuZGxlciB0cmlnZ2VyZWQgZm9yIHBpbmNoIG91dCBldmVudHMuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpwaW5jaE91dH1cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbcGluY2hTdGF0dXM9bnVsbF0gQSBoYW5kbGVyIHRyaWdnZXJlZCBmb3IgZXZlcnkgcGhhc2Ugb2YgYSBwaW5jaC4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnBpbmNoU3RhdHVzfVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFt0YXA9bnVsbF0gQSBoYW5kbGVyIHRyaWdnZXJlZCB3aGVuIGEgdXNlciBqdXN0IHRhcHMgb24gdGhlIGl0ZW0sIHJhdGhlciB0aGFuIHN3aXBlcyBpdC4gSWYgdGhleSBkbyBub3QgbW92ZSwgdGFwIGlzIHRyaWdnZXJlZCwgaWYgdGhleSBkbyBtb3ZlLCBpdCBpcyBub3QuXG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW2RvdWJsZVRhcD1udWxsXSBBIGhhbmRsZXIgdHJpZ2dlcmVkIHdoZW4gYSB1c2VyIGRvdWJsZSB0YXBzIG9uIHRoZSBpdGVtLiBUaGUgZGVsYXkgYmV0d2VlbiB0YXBzIGNhbiBiZSBzZXQgd2l0aCB0aGUgZG91YmxlVGFwVGhyZXNob2xkIHByb3BlcnR5LiBTZWUge0BsaW5rICQuZm4uc3dpcGUuZGVmYXVsdHMjZG91YmxlVGFwVGhyZXNob2xkfVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtsb25nVGFwPW51bGxdIEEgaGFuZGxlciB0cmlnZ2VyZWQgd2hlbiBhIHVzZXIgbG9uZyB0YXBzIG9uIHRoZSBpdGVtLiBUaGUgZGVsYXkgYmV0d2VlbiBzdGFydCBhbmQgZW5kIGNhbiBiZSBzZXQgd2l0aCB0aGUgbG9uZ1RhcFRocmVzaG9sZCBwcm9wZXJ0eS4gU2VlIHtAbGluayAkLmZuLnN3aXBlLmRlZmF1bHRzI2xvbmdUYXBUaHJlc2hvbGR9XG5cdCogQHByb3BlcnR5IChmdW5jdGlvbikgW2hvbGQ9bnVsbF0gQSBoYW5kbGVyIHRyaWdnZXJlZCB3aGVuIGEgdXNlciByZWFjaGVzIGxvbmdUYXBUaHJlc2hvbGQgb24gdGhlIGl0ZW0uIFNlZSB7QGxpbmsgJC5mbi5zd2lwZS5kZWZhdWx0cyNsb25nVGFwVGhyZXNob2xkfVxuXHQqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3RyaWdnZXJPblRvdWNoRW5kPXRydWVdIElmIHRydWUsIHRoZSBzd2lwZSBldmVudHMgYXJlIHRyaWdnZXJlZCB3aGVuIHRoZSB0b3VjaCBlbmQgZXZlbnQgaXMgcmVjZWl2ZWQgKHVzZXIgcmVsZWFzZXMgZmluZ2VyKS4gIElmIGZhbHNlLCBpdCB3aWxsIGJlIHRyaWdnZXJlZCBvbiByZWFjaGluZyB0aGUgdGhyZXNob2xkLCBhbmQgdGhlbiBjYW5jZWwgdGhlIHRvdWNoIGV2ZW50IGF1dG9tYXRpY2FsbHkuXG5cdCogQHByb3BlcnR5IHtib29sZWFufSBbdHJpZ2dlck9uVG91Y2hMZWF2ZT1mYWxzZV0gSWYgdHJ1ZSwgdGhlbiB3aGVuIHRoZSB1c2VyIGxlYXZlcyB0aGUgc3dpcGUgb2JqZWN0LCB0aGUgc3dpcGUgd2lsbCBlbmQgYW5kIHRyaWdnZXIgYXBwcm9wcmlhdGUgaGFuZGxlcnMuXG5cdCogQHByb3BlcnR5IHtzdHJpbmd8dW5kZWZpbmVkfSBbYWxsb3dQYWdlU2Nyb2xsPSdhdXRvJ10gSG93IHRoZSBicm93c2VyIGhhbmRsZXMgcGFnZSBzY3JvbGxzIHdoZW4gdGhlIHVzZXIgaXMgc3dpcGluZyBvbiBhIHRvdWNoU3dpcGUgb2JqZWN0LiBTZWUge0BsaW5rICQuZm4uc3dpcGUucGFnZVNjcm9sbH0uICA8YnIvPjxici8+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxjb2RlPlwiYXV0b1wiPC9jb2RlPiA6IGFsbCB1bmRlZmluZWQgc3dpcGVzIHdpbGwgY2F1c2UgdGhlIHBhZ2UgdG8gc2Nyb2xsIGluIHRoYXQgZGlyZWN0aW9uLiA8YnIvPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8Y29kZT5cIm5vbmVcIjwvY29kZT4gOiB0aGUgcGFnZSB3aWxsIG5vdCBzY3JvbGwgd2hlbiB1c2VyIHN3aXBlcy4gPGJyLz5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGNvZGU+XCJob3Jpem9udGFsXCI8L2NvZGU+IDogd2lsbCBmb3JjZSBwYWdlIHRvIHNjcm9sbCBvbiBob3Jpem9udGFsIHN3aXBlcy4gPGJyLz5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGNvZGU+XCJ2ZXJ0aWNhbFwiPC9jb2RlPiA6IHdpbGwgZm9yY2UgcGFnZSB0byBzY3JvbGwgb24gdmVydGljYWwgc3dpcGVzLiA8YnIvPlxuXHQqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ZhbGxiYWNrVG9Nb3VzZUV2ZW50cz10cnVlXSBJZiB0cnVlIG1vdXNlIGV2ZW50cyBhcmUgdXNlZCB3aGVuIHJ1biBvbiBhIG5vbiB0b3VjaCBkZXZpY2UsIGZhbHNlIHdpbGwgc3RvcCBzd2lwZXMgYmVpbmcgdHJpZ2dlcmVkIGJ5IG1vdXNlIGV2ZW50cyBvbiBub24gdG9jdWggZGV2aWNlcy5cblx0KiBAcHJvcGVydHkge3N0cmluZ30gW2V4Y2x1ZGVkRWxlbWVudHM9XCJidXR0b24sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhLCAubm9Td2lwZVwiXSBBIGpxdWVyeSBzZWxlY3RvciB0aGF0IHNwZWNpZmllcyBjaGlsZCBlbGVtZW50cyB0aGF0IGRvIE5PVCB0cmlnZ2VyIHN3aXBlcy4gQnkgZGVmYXVsdCB0aGlzIGV4Y2x1ZGVzIGFsbCBmb3JtLCBpbnB1dCwgc2VsZWN0LCBidXR0b24sIGFuY2hvciBhbmQgLm5vU3dpcGUgZWxlbWVudHMuXG5cblx0Ki9cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIGZpbmdlcnM6IDEsXG4gICAgICAgIHRocmVzaG9sZDogNzUsXG4gICAgICAgIGNhbmNlbFRocmVzaG9sZDogbnVsbCxcbiAgICAgICAgcGluY2hUaHJlc2hvbGQ6IDIwLFxuICAgICAgICBtYXhUaW1lVGhyZXNob2xkOiBudWxsLFxuICAgICAgICBmaW5nZXJSZWxlYXNlVGhyZXNob2xkOiAyNTAsXG4gICAgICAgIGxvbmdUYXBUaHJlc2hvbGQ6IDUwMCxcbiAgICAgICAgZG91YmxlVGFwVGhyZXNob2xkOiAyMDAsXG4gICAgICAgIHN3aXBlOiBudWxsLFxuICAgICAgICBzd2lwZUxlZnQ6IG51bGwsXG4gICAgICAgIHN3aXBlUmlnaHQ6IG51bGwsXG4gICAgICAgIHN3aXBlVXA6IG51bGwsXG4gICAgICAgIHN3aXBlRG93bjogbnVsbCxcbiAgICAgICAgc3dpcGVTdGF0dXM6IG51bGwsXG4gICAgICAgIHBpbmNoSW46IG51bGwsXG4gICAgICAgIHBpbmNoT3V0OiBudWxsLFxuICAgICAgICBwaW5jaFN0YXR1czogbnVsbCxcbiAgICAgICAgY2xpY2s6IG51bGwsIC8vRGVwcmVjYXRlZCBzaW5jZSAxLjYuMlxuICAgICAgICB0YXA6IG51bGwsXG4gICAgICAgIGRvdWJsZVRhcDogbnVsbCxcbiAgICAgICAgbG9uZ1RhcDogbnVsbCxcbiAgICAgICAgaG9sZDogbnVsbCxcbiAgICAgICAgdHJpZ2dlck9uVG91Y2hFbmQ6IHRydWUsXG4gICAgICAgIHRyaWdnZXJPblRvdWNoTGVhdmU6IGZhbHNlLFxuICAgICAgICBhbGxvd1BhZ2VTY3JvbGw6IFwiYXV0b1wiLFxuICAgICAgICBmYWxsYmFja1RvTW91c2VFdmVudHM6IHRydWUsXG4gICAgICAgIGV4Y2x1ZGVkRWxlbWVudHM6IFwibGFiZWwsIGJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGEsIC5ub1N3aXBlXCJcbiAgICB9O1xuXG5cblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgVG91Y2hTd2lwZSBiZWhhdmlvdXIgdG8gb25lIG9yIG1vcmUgalF1ZXJ5IG9iamVjdHMuXG4gICAgICogVGhlIFRvdWNoU3dpcGUgcGx1Z2luIGNhbiBiZSBpbnN0YW50aWF0ZWQgdmlhIHRoaXMgbWV0aG9kLCBvciBtZXRob2RzIHdpdGhpblxuICAgICAqIFRvdWNoU3dpcGUgY2FuIGJlIGV4ZWN1dGVkIHZpYSB0aGlzIG1ldGhvZCBhcyBwZXIgalF1ZXJ5IHBsdWdpbiBhcmNoaXRlY3R1cmUuXG4gICAgICogQHNlZSBUb3VjaFN3aXBlXG4gICAgICogQGNsYXNzXG4gICAgICogQHBhcmFtIHtNaXhlZH0gbWV0aG9kIElmIHRoZSBjdXJyZW50IERPTU5vZGUgaXMgYSBUb3VjaFN3aXBlIG9iamVjdCwgYW5kIDxjb2RlPm1ldGhvZDwvY29kZT4gaXMgYSBUb3VjaFN3aXBlIG1ldGhvZCwgdGhlblxuICAgICAqIHRoZSA8Y29kZT5tZXRob2Q8L2NvZGU+IGlzIGV4ZWN1dGVkLCBhbmQgYW55IGZvbGxvd2luZyBhcmd1bWVudHMgYXJlIHBhc3NlZCB0byB0aGUgVG91Y2hTd2lwZSBtZXRob2QuXG4gICAgICogSWYgPGNvZGU+bWV0aG9kPC9jb2RlPiBpcyBhbiBvYmplY3QsIHRoZW4gdGhlIFRvdWNoU3dpcGUgY2xhc3MgaXMgaW5zdGFudGlhdGVkIG9uIHRoZSBjdXJyZW50IERPTU5vZGUsIHBhc3NpbmcgdGhlXG4gICAgICogY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzIGRlZmluZWQgaW4gdGhlIG9iamVjdC4gU2VlIFRvdWNoU3dpcGVcbiAgICAgKlxuICAgICAqL1xuICAgICQuZm4uc3dpcGUgPSBmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgIHBsdWdpbiA9ICR0aGlzLmRhdGEoUExVR0lOX05TKTtcblxuICAgICAgICAvL0NoZWNrIGlmIHdlIGFyZSBhbHJlYWR5IGluc3RhbnRpYXRlZCBhbmQgdHJ5aW5nIHRvIGV4ZWN1dGUgYSBtZXRob2RcbiAgICAgICAgaWYgKHBsdWdpbiAmJiB0eXBlb2YgbWV0aG9kID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKHBsdWdpblttZXRob2RdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpblttZXRob2RdLmFwcGx5KHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKCdNZXRob2QgJyArIG1ldGhvZCArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN3aXBlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy9FbHNlIG5vdCBpbnN0YW50aWF0ZWQgYW5kIHRyeWluZyB0byBwYXNzIGluaXQgb2JqZWN0IChvciBub3RoaW5nKVxuICAgICAgICBlbHNlIGlmICghcGx1Z2luICYmICh0eXBlb2YgbWV0aG9kID09PSAnb2JqZWN0JyB8fCAhbWV0aG9kKSkge1xuICAgICAgICAgICAgcmV0dXJuIGluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAkdGhpcztcbiAgICB9O1xuXG4gICAgLy9FeHBvc2Ugb3VyIGRlZmF1bHRzIHNvIGEgdXNlciBjb3VsZCBvdmVycmlkZSB0aGUgcGx1Z2luIGRlZmF1bHRzXG4gICAgJC5mbi5zd2lwZS5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHBoYXNlcyB0aGF0IGEgdG91Y2ggZXZlbnQgZ29lcyB0aHJvdWdoLiAgVGhlIDxjb2RlPnBoYXNlPC9jb2RlPiBpcyBwYXNzZWQgdG8gdGhlIGV2ZW50IGhhbmRsZXJzLlxuICAgICAqIFRoZXNlIHByb3BlcnRpZXMgYXJlIHJlYWQgb25seSwgYXR0ZW1wdGluZyB0byBjaGFuZ2UgdGhlbSB3aWxsIG5vdCBhbHRlciB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgZXZlbnQgaGFuZGxlcnMuXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBQSEFTRV9TVEFSVCBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSBzdGFydCBwaGFzZSBvZiB0aGUgdG91Y2ggZXZlbnQuIFZhbHVlIGlzIDxjb2RlPlwic3RhcnRcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFBIQVNFX01PVkUgQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgbW92ZSBwaGFzZSBvZiB0aGUgdG91Y2ggZXZlbnQuIFZhbHVlIGlzIDxjb2RlPlwibW92ZVwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gUEhBU0VfRU5EIENvbnN0YW50IGluZGljYXRpbmcgdGhlIGVuZCBwaGFzZSBvZiB0aGUgdG91Y2ggZXZlbnQuIFZhbHVlIGlzIDxjb2RlPlwiZW5kXCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBQSEFTRV9DQU5DRUwgQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgY2FuY2VsIHBoYXNlIG9mIHRoZSB0b3VjaCBldmVudC4gVmFsdWUgaXMgPGNvZGU+XCJjYW5jZWxcIjwvY29kZT4uXG4gICAgICovXG4gICAgJC5mbi5zd2lwZS5waGFzZXMgPSB7XG4gICAgICAgIFBIQVNFX1NUQVJUOiBQSEFTRV9TVEFSVCxcbiAgICAgICAgUEhBU0VfTU9WRTogUEhBU0VfTU9WRSxcbiAgICAgICAgUEhBU0VfRU5EOiBQSEFTRV9FTkQsXG4gICAgICAgIFBIQVNFX0NBTkNFTDogUEhBU0VfQ0FOQ0VMXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBkaXJlY3Rpb24gY29uc3RhbnRzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGUgZXZlbnQgaGFuZGxlcnMuXG4gICAgICogVGhlc2UgcHJvcGVydGllcyBhcmUgcmVhZCBvbmx5LCBhdHRlbXB0aW5nIHRvIGNoYW5nZSB0aGVtIHdpbGwgbm90IGFsdGVyIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSBldmVudCBoYW5kbGVycy5cbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IExFRlQgQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgbGVmdCBkaXJlY3Rpb24uIFZhbHVlIGlzIDxjb2RlPlwibGVmdFwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gUklHSFQgQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgcmlnaHQgZGlyZWN0aW9uLiBWYWx1ZSBpcyA8Y29kZT5cInJpZ2h0XCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBVUCBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSB1cCBkaXJlY3Rpb24uIFZhbHVlIGlzIDxjb2RlPlwidXBcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IERPV04gQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgZG93biBkaXJlY3Rpb24uIFZhbHVlIGlzIDxjb2RlPlwiY2FuY2VsXCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBJTiBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSBpbiBkaXJlY3Rpb24uIFZhbHVlIGlzIDxjb2RlPlwiaW5cIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IE9VVCBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSBvdXQgZGlyZWN0aW9uLiBWYWx1ZSBpcyA8Y29kZT5cIm91dFwiPC9jb2RlPi5cbiAgICAgKi9cbiAgICAkLmZuLnN3aXBlLmRpcmVjdGlvbnMgPSB7XG4gICAgICAgIExFRlQ6IExFRlQsXG4gICAgICAgIFJJR0hUOiBSSUdIVCxcbiAgICAgICAgVVA6IFVQLFxuICAgICAgICBET1dOOiBET1dOLFxuICAgICAgICBJTjogSU4sXG4gICAgICAgIE9VVDogT1VUXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBwYWdlIHNjcm9sbCBjb25zdGFudHMgdGhhdCBjYW4gYmUgdXNlZCB0byBzZXQgdGhlIHZhbHVlIG9mIDxjb2RlPmFsbG93UGFnZVNjcm9sbDwvY29kZT4gb3B0aW9uXG4gICAgICogVGhlc2UgcHJvcGVydGllcyBhcmUgcmVhZCBvbmx5XG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBzZWUgJC5mbi5zd2lwZS5kZWZhdWx0cyNhbGxvd1BhZ2VTY3JvbGxcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gTk9ORSBDb25zdGFudCBpbmRpY2F0aW5nIG5vIHBhZ2Ugc2Nyb2xsaW5nIGlzIGFsbG93ZWQuIFZhbHVlIGlzIDxjb2RlPlwibm9uZVwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gSE9SSVpPTlRBTCBDb25zdGFudCBpbmRpY2F0aW5nIGhvcml6b250YWwgcGFnZSBzY3JvbGxpbmcgaXMgYWxsb3dlZC4gVmFsdWUgaXMgPGNvZGU+XCJob3Jpem9udGFsXCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBWRVJUSUNBTCBDb25zdGFudCBpbmRpY2F0aW5nIHZlcnRpY2FsIHBhZ2Ugc2Nyb2xsaW5nIGlzIGFsbG93ZWQuIFZhbHVlIGlzIDxjb2RlPlwidmVydGljYWxcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IEFVVE8gQ29uc3RhbnQgaW5kaWNhdGluZyBlaXRoZXIgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCB3aWxsIGJlIGFsbG93ZWQsIGRlcGVuZGluZyBvbiB0aGUgc3dpcGUgaGFuZGxlcnMgcmVnaXN0ZXJlZC4gVmFsdWUgaXMgPGNvZGU+XCJhdXRvXCI8L2NvZGU+LlxuICAgICAqL1xuICAgICQuZm4uc3dpcGUucGFnZVNjcm9sbCA9IHtcbiAgICAgICAgTk9ORTogTk9ORSxcbiAgICAgICAgSE9SSVpPTlRBTDogSE9SSVpPTlRBTCxcbiAgICAgICAgVkVSVElDQUw6IFZFUlRJQ0FMLFxuICAgICAgICBBVVRPOiBBVVRPXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0YW50cyByZXByZXNlbnRpbmcgdGhlIG51bWJlciBvZiBmaW5nZXJzIHVzZWQgaW4gYSBzd2lwZS4gIFRoZXNlIGFyZSB1c2VkIHRvIHNldCBib3RoIHRoZSB2YWx1ZSBvZiA8Y29kZT5maW5nZXJzPC9jb2RlPiBpbiB0aGVcbiAgICAgKiBvcHRpb25zIG9iamVjdCwgYXMgd2VsbCBhcyB0aGUgdmFsdWUgb2YgdGhlIDxjb2RlPmZpbmdlcnM8L2NvZGU+IGV2ZW50IHByb3BlcnR5LlxuICAgICAqIFRoZXNlIHByb3BlcnRpZXMgYXJlIHJlYWQgb25seSwgYXR0ZW1wdGluZyB0byBjaGFuZ2UgdGhlbSB3aWxsIG5vdCBhbHRlciB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgZXZlbnQgaGFuZGxlcnMuXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBzZWUgJC5mbi5zd2lwZS5kZWZhdWx0cyNmaW5nZXJzXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IE9ORSBDb25zdGFudCBpbmRpY2F0aW5nIDEgZmluZ2VyIGlzIHRvIGJlIGRldGVjdGVkIC8gd2FzIGRldGVjdGVkLiBWYWx1ZSBpcyA8Y29kZT4xPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gVFdPIENvbnN0YW50IGluZGljYXRpbmcgMiBmaW5nZXJzIGFyZSB0byBiZSBkZXRlY3RlZCAvIHdlcmUgZGV0ZWN0ZWQuIFZhbHVlIGlzIDxjb2RlPjE8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBUSFJFRSBDb25zdGFudCBpbmRpY2F0aW5nIDMgZmluZ2VyIGFyZSB0byBiZSBkZXRlY3RlZCAvIHdlcmUgZGV0ZWN0ZWQuIFZhbHVlIGlzIDxjb2RlPjE8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBBTEwgQ29uc3RhbnQgaW5kaWNhdGluZyBhbnkgY29tYmluYXRpb24gb2YgZmluZ2VyIGFyZSB0byBiZSBkZXRlY3RlZC4gIFZhbHVlIGlzIDxjb2RlPlwiYWxsXCI8L2NvZGU+LlxuICAgICAqL1xuICAgICQuZm4uc3dpcGUuZmluZ2VycyA9IHtcbiAgICAgICAgT05FOiAxLFxuICAgICAgICBUV086IDIsXG4gICAgICAgIFRIUkVFOiAzLFxuICAgICAgICBBTEw6IEFMTF9GSU5HRVJTXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpc2UgdGhlIHBsdWdpbiBmb3IgZWFjaCBET00gZWxlbWVudCBtYXRjaGVkXG4gICAgICogVGhpcyBjcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBtYWluIFRvdWNoU3dpcGUgY2xhc3MgZm9yIGVhY2ggRE9NIGVsZW1lbnQsIGFuZCB0aGVuXG4gICAgICogc2F2ZXMgYSByZWZlcmVuY2UgdG8gdGhhdCBpbnN0YW5jZSBpbiB0aGUgZWxlbWVudHMgZGF0YSBwcm9wZXJ0eS5cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0KG9wdGlvbnMpIHtcbiAgICAgICAgLy9QcmVwIGFuZCBleHRlbmQgdGhlIG9wdGlvbnNcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgKG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsID09PSB1bmRlZmluZWQgJiYgKG9wdGlvbnMuc3dpcGUgIT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnN3aXBlU3RhdHVzICE9PSB1bmRlZmluZWQpKSkge1xuICAgICAgICAgICAgb3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwgPSBOT05FO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9DaGVjayBmb3IgZGVwcmVjYXRlZCBvcHRpb25zXG4gICAgICAgIC8vRW5zdXJlIHRoYXQgYW55IG9sZCBjbGljayBoYW5kbGVycyBhcmUgYXNzaWduZWQgdG8gdGhlIG5ldyB0YXAsIHVubGVzcyB3ZSBoYXZlIGEgdGFwXG4gICAgICAgIGlmIChvcHRpb25zLmNsaWNrICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy50YXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3B0aW9ucy50YXAgPSBvcHRpb25zLmNsaWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge307XG4gICAgICAgIH1cblxuICAgICAgICAvL3Bhc3MgZW1wdHkgb2JqZWN0IHNvIHdlIGRvbnQgbW9kaWZ5IHRoZSBkZWZhdWx0c1xuICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoe30sICQuZm4uc3dpcGUuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vRm9yIGVhY2ggZWxlbWVudCBpbnN0YW50aWF0ZSB0aGUgcGx1Z2luXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAvL0NoZWNrIHdlIGhhdmVudCBhbHJlYWR5IGluaXRpYWxpc2VkIHRoZSBwbHVnaW5cbiAgICAgICAgICAgIHZhciBwbHVnaW4gPSAkdGhpcy5kYXRhKFBMVUdJTl9OUyk7XG5cbiAgICAgICAgICAgIGlmICghcGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luID0gbmV3IFRvdWNoU3dpcGUodGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgJHRoaXMuZGF0YShQTFVHSU5fTlMsIHBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1haW4gVG91Y2hTd2lwZSBQbHVnaW4gQ2xhc3MuXG4gICAgICogRG8gbm90IHVzZSB0aGlzIHRvIGNvbnN0cnVjdCB5b3VyIFRvdWNoU3dpcGUgb2JqZWN0LCB1c2UgdGhlIGpRdWVyeSBwbHVnaW4gbWV0aG9kICQuZm4uc3dpcGUoKTsge0BsaW5rICQuZm4uc3dpcGV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAbmFtZSBUb3VjaFN3aXBlXG4gICAgICogQHBhcmFtIHtET01Ob2RlfSBlbGVtZW50IFRoZSBIVE1MIERPTSBvYmplY3QgdG8gYXBwbHkgdG8gcGx1Z2luIHRvXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgVGhlIG9wdGlvbnMgdG8gY29uZmlndXJlIHRoZSBwbHVnaW4gd2l0aC4gIEBsaW5rIHskLmZuLnN3aXBlLmRlZmF1bHRzfVxuICAgICAqIEBzZWUgJC5maC5zd2lwZS5kZWZhdWx0c1xuICAgICAqIEBzZWUgJC5maC5zd2lwZVxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRvdWNoU3dpcGUoZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgdXNlVG91Y2hFdmVudHMgPSAoU1VQUE9SVFNfVE9VQ0ggfHwgU1VQUE9SVFNfUE9JTlRFUiB8fCAhb3B0aW9ucy5mYWxsYmFja1RvTW91c2VFdmVudHMpLFxuICAgICAgICAgICAgU1RBUlRfRVYgPSB1c2VUb3VjaEV2ZW50cyA/IChTVVBQT1JUU19QT0lOVEVSID8gKFNVUFBPUlRTX1BPSU5URVJfSUUxMCA/ICdNU1BvaW50ZXJEb3duJyA6ICdwb2ludGVyZG93bicpIDogJ3RvdWNoc3RhcnQnKSA6ICdtb3VzZWRvd24nLFxuICAgICAgICAgICAgTU9WRV9FViA9IHVzZVRvdWNoRXZlbnRzID8gKFNVUFBPUlRTX1BPSU5URVIgPyAoU1VQUE9SVFNfUE9JTlRFUl9JRTEwID8gJ01TUG9pbnRlck1vdmUnIDogJ3BvaW50ZXJtb3ZlJykgOiAndG91Y2htb3ZlJykgOiAnbW91c2Vtb3ZlJyxcbiAgICAgICAgICAgIEVORF9FViA9IHVzZVRvdWNoRXZlbnRzID8gKFNVUFBPUlRTX1BPSU5URVIgPyAoU1VQUE9SVFNfUE9JTlRFUl9JRTEwID8gJ01TUG9pbnRlclVwJyA6ICdwb2ludGVydXAnKSA6ICd0b3VjaGVuZCcpIDogJ21vdXNldXAnLFxuICAgICAgICAgICAgTEVBVkVfRVYgPSB1c2VUb3VjaEV2ZW50cyA/IG51bGwgOiAnbW91c2VsZWF2ZScsIC8vd2UgbWFudWFsbHkgZGV0ZWN0IGxlYXZlIG9uIHRvdWNoIGRldmljZXMsIHNvIG51bGwgZXZlbnQgaGVyZVxuICAgICAgICAgICAgQ0FOQ0VMX0VWID0gKFNVUFBPUlRTX1BPSU5URVIgPyAoU1VQUE9SVFNfUE9JTlRFUl9JRTEwID8gJ01TUG9pbnRlckNhbmNlbCcgOiAncG9pbnRlcmNhbmNlbCcpIDogJ3RvdWNoY2FuY2VsJyk7XG5cblxuXG4gICAgICAgIC8vdG91Y2ggcHJvcGVydGllc1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSAwLFxuICAgICAgICAgICAgZGlyZWN0aW9uID0gbnVsbCxcbiAgICAgICAgICAgIGR1cmF0aW9uID0gMCxcbiAgICAgICAgICAgIHN0YXJ0VG91Y2hlc0Rpc3RhbmNlID0gMCxcbiAgICAgICAgICAgIGVuZFRvdWNoZXNEaXN0YW5jZSA9IDAsXG4gICAgICAgICAgICBwaW5jaFpvb20gPSAxLFxuICAgICAgICAgICAgcGluY2hEaXN0YW5jZSA9IDAsXG4gICAgICAgICAgICBwaW5jaERpcmVjdGlvbiA9IDAsXG4gICAgICAgICAgICBtYXhpbXVtc01hcCA9IG51bGw7XG5cblxuXG4gICAgICAgIC8valF1ZXJ5IHdyYXBwZWQgZWxlbWVudCBmb3IgdGhpcyBpbnN0YW5jZVxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuXG4gICAgICAgIC8vQ3VycmVudCBwaGFzZSBvZiB0aCB0b3VjaCBjeWNsZVxuICAgICAgICB2YXIgcGhhc2UgPSBcInN0YXJ0XCI7XG5cbiAgICAgICAgLy8gdGhlIGN1cnJlbnQgbnVtYmVyIG9mIGZpbmdlcnMgYmVpbmcgdXNlZC5cbiAgICAgICAgdmFyIGZpbmdlckNvdW50ID0gMDtcblxuICAgICAgICAvL3RyYWNrIG1vdXNlIHBvaW50cyAvIGRlbHRhXG4gICAgICAgIHZhciBmaW5nZXJEYXRhID0gbnVsbDtcblxuICAgICAgICAvL3RyYWNrIHRpbWVzXG4gICAgICAgIHZhciBzdGFydFRpbWUgPSAwLFxuICAgICAgICAgICAgZW5kVGltZSA9IDAsXG4gICAgICAgICAgICBwcmV2aW91c1RvdWNoRW5kVGltZSA9IDAsXG4gICAgICAgICAgICBwcmV2aW91c1RvdWNoRmluZ2VyQ291bnQgPSAwLFxuICAgICAgICAgICAgZG91YmxlVGFwU3RhcnRUaW1lID0gMDtcblxuICAgICAgICAvL1RpbWVvdXRzXG4gICAgICAgIHZhciBzaW5nbGVUYXBUaW1lb3V0ID0gbnVsbCxcbiAgICAgICAgICAgIGhvbGRUaW1lb3V0ID0gbnVsbDtcblxuICAgICAgICAvLyBBZGQgZ2VzdHVyZXMgdG8gYWxsIHN3aXBhYmxlIGFyZWFzIGlmIHN1cHBvcnRlZFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgJGVsZW1lbnQuYmluZChTVEFSVF9FViwgdG91Y2hTdGFydCk7XG4gICAgICAgICAgICAkZWxlbWVudC5iaW5kKENBTkNFTF9FViwgdG91Y2hDYW5jZWwpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAkLmVycm9yKCdldmVudHMgbm90IHN1cHBvcnRlZCAnICsgU1RBUlRfRVYgKyAnLCcgKyBDQU5DRUxfRVYgKyAnIG9uIGpRdWVyeS5zd2lwZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy9QdWJsaWMgbWV0aG9kc1xuICAgICAgICAvL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiByZS1lbmFibGVzIHRoZSBzd2lwZSBwbHVnaW4gd2l0aCB0aGUgcHJldmlvdXMgY29uZmlndXJhdGlvblxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQG5hbWUgJC5mbi5zd2lwZSNlbmFibGVcbiAgICAgICAgICogQHJldHVybiB7RE9NTm9kZX0gVGhlIERvbSBlbGVtZW50IHRoYXQgd2FzIHJlZ2lzdGVyZWQgd2l0aCBUb3VjaFN3aXBlXG4gICAgICAgICAqIEBleGFtcGxlICQoXCIjZWxlbWVudFwiKS5zd2lwZShcImVuYWJsZVwiKTtcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZW5hYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkZWxlbWVudC5iaW5kKFNUQVJUX0VWLCB0b3VjaFN0YXJ0KTtcbiAgICAgICAgICAgICRlbGVtZW50LmJpbmQoQ0FOQ0VMX0VWLCB0b3VjaENhbmNlbCk7XG4gICAgICAgICAgICByZXR1cm4gJGVsZW1lbnQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRpc2FibGVzIHRoZSBzd2lwZSBwbHVnaW5cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBuYW1lICQuZm4uc3dpcGUjZGlzYWJsZVxuICAgICAgICAgKiBAcmV0dXJuIHtET01Ob2RlfSBUaGUgRG9tIGVsZW1lbnQgdGhhdCBpcyBub3cgcmVnaXN0ZXJlZCB3aXRoIFRvdWNoU3dpcGVcbiAgICAgICAgICogQGV4YW1wbGUgJChcIiNlbGVtZW50XCIpLnN3aXBlKFwiZGlzYWJsZVwiKTtcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICByZXR1cm4gJGVsZW1lbnQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlc3Ryb3kgdGhlIHN3aXBlIHBsdWdpbiBjb21wbGV0ZWx5LiBUbyB1c2UgYW55IHN3aXBlIG1ldGhvZHMsIHlvdSBtdXN0IHJlIGluaXRpYWxpc2UgdGhlIHBsdWdpbi5cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBuYW1lICQuZm4uc3dpcGUjZGVzdHJveVxuICAgICAgICAgKiBAcmV0dXJuIHtET01Ob2RlfSBUaGUgRG9tIGVsZW1lbnQgdGhhdCB3YXMgcmVnaXN0ZXJlZCB3aXRoIFRvdWNoU3dpcGVcbiAgICAgICAgICogQGV4YW1wbGUgJChcIiNlbGVtZW50XCIpLnN3aXBlKFwiZGVzdHJveVwiKTtcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICAkZWxlbWVudC5kYXRhKFBMVUdJTl9OUywgbnVsbCk7XG4gICAgICAgICAgICByZXR1cm4gJGVsZW1lbnQ7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxsb3dzIHJ1biB0aW1lIHVwZGF0aW5nIG9mIHRoZSBzd2lwZSBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAbmFtZSAkLmZuLnN3aXBlI29wdGlvblxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHkgVGhlIG9wdGlvbiBwcm9wZXJ0eSB0byBnZXQgb3Igc2V0XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbdmFsdWVdIFRoZSB2YWx1ZSB0byBzZXQgdGhlIHByb3BlcnR5IHRvXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gSWYgb25seSBhIHByb3BlcnR5IG5hbWUgaXMgcGFzc2VkLCB0aGVuIHRoYXQgcHJvcGVydHkgdmFsdWUgaXMgcmV0dXJuZWQuXG4gICAgICAgICAqIEBleGFtcGxlICQoXCIjZWxlbWVudFwiKS5zd2lwZShcIm9wdGlvblwiLCBcInRocmVzaG9sZFwiKTsgLy8gcmV0dXJuIHRoZSB0aHJlc2hvbGRcbiAgICAgICAgICogQGV4YW1wbGUgJChcIiNlbGVtZW50XCIpLnN3aXBlKFwib3B0aW9uXCIsIFwidGhyZXNob2xkXCIsIDEwMCk7IC8vIHNldCB0aGUgdGhyZXNob2xkIGFmdGVyIGluaXRcbiAgICAgICAgICogQHNlZSAkLmZuLnN3aXBlLmRlZmF1bHRzXG4gICAgICAgICAqXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9wdGlvbiA9IGZ1bmN0aW9uKHByb3BlcnR5LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnNbcHJvcGVydHldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uc1twcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1twcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoJ09wdGlvbiAnICsgcHJvcGVydHkgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5zd2lwZS5vcHRpb25zJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gUHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIC8vXG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gRVZFTlRTXG4gICAgICAgIC8vXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBhIHRvdWNoIHN0YXJ0IGV2ZW50LlxuICAgICAgICAgKiBTdG9wcyB0aGUgZGVmYXVsdCBjbGljayBldmVudCBmcm9tIHRyaWdnZXJpbmcgYW5kIHN0b3JlcyB3aGVyZSB3ZSB0b3VjaGVkXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0ganFFdmVudCBUaGUgbm9ybWFsaXNlZCBqUXVlcnkgZXZlbnQgb2JqZWN0LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG91Y2hTdGFydChqcUV2ZW50KSB7XG4gICAgICAgICAgICAvL0lmIHdlIGFscmVhZHkgaW4gYSB0b3VjaCBldmVudCAoYSBmaW5nZXIgYWxyZWFkeSBpbiB1c2UpIHRoZW4gaWdub3JlIHN1YnNlcXVlbnQgb25lcy4uXG4gICAgICAgICAgICBpZiAoZ2V0VG91Y2hJblByb2dyZXNzKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAvL0NoZWNrIGlmIHRoaXMgZWxlbWVudCBtYXRjaGVzIGFueSBpbiB0aGUgZXhjbHVkZWQgZWxlbWVudHMgc2VsZWN0b3JzLCAgb3IgaXRzIHBhcmVudCBpcyBleGNsdWRlZCwgaWYgc28sIERPTidUIHN3aXBlXG4gICAgICAgICAgICBpZiAoJChqcUV2ZW50LnRhcmdldCkuY2xvc2VzdChvcHRpb25zLmV4Y2x1ZGVkRWxlbWVudHMsICRlbGVtZW50KS5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgLy9BcyB3ZSB1c2UgSnF1ZXJ5IGJpbmQgZm9yIGV2ZW50cywgd2UgbmVlZCB0byB0YXJnZXQgdGhlIG9yaWdpbmFsIGV2ZW50IG9iamVjdFxuICAgICAgICAgICAgLy9JZiB0aGVzZSBldmVudHMgYXJlIGJlaW5nIHByb2dyYW1tYXRpY2FsbHkgdHJpZ2dlcmVkLCB3ZSBkb24ndCBoYXZlIGFuIG9yaWdpbmFsIGV2ZW50IG9iamVjdCwgc28gdXNlIHRoZSBKcSBvbmUuXG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBqcUV2ZW50Lm9yaWdpbmFsRXZlbnQgPyBqcUV2ZW50Lm9yaWdpbmFsRXZlbnQgOiBqcUV2ZW50O1xuXG4gICAgICAgICAgICB2YXIgcmV0LFxuICAgICAgICAgICAgICAgIGV2dCA9IFNVUFBPUlRTX1RPVUNIID8gZXZlbnQudG91Y2hlc1swXSA6IGV2ZW50O1xuXG4gICAgICAgICAgICBwaGFzZSA9IFBIQVNFX1NUQVJUO1xuXG4gICAgICAgICAgICAvL0lmIHdlIHN1cHBvcnQgdG91Y2hlcywgZ2V0IHRoZSBmaW5nZXIgY291bnRcbiAgICAgICAgICAgIGlmIChTVVBQT1JUU19UT1VDSCkge1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgdG90YWwgbnVtYmVyIG9mIGZpbmdlcnMgdG91Y2hpbmcgdGhlIHNjcmVlblxuICAgICAgICAgICAgICAgIGZpbmdlckNvdW50ID0gZXZlbnQudG91Y2hlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL0Vsc2UgdGhpcyBpcyB0aGUgZGVza3RvcCwgc28gc3RvcCB0aGUgYnJvd3NlciBmcm9tIGRyYWdnaW5nIHRoZSBpbWFnZVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAganFFdmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvL2NhbGwgdGhpcyBvbiBqcSBldmVudCBzbyB3ZSBhcmUgY3Jvc3MgYnJvd3NlclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2NsZWFyIHZhcnMuLlxuICAgICAgICAgICAgZGlzdGFuY2UgPSAwO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIHBpbmNoRGlyZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIGR1cmF0aW9uID0gMDtcbiAgICAgICAgICAgIHN0YXJ0VG91Y2hlc0Rpc3RhbmNlID0gMDtcbiAgICAgICAgICAgIGVuZFRvdWNoZXNEaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICBwaW5jaFpvb20gPSAxO1xuICAgICAgICAgICAgcGluY2hEaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICBmaW5nZXJEYXRhID0gY3JlYXRlQWxsRmluZ2VyRGF0YSgpO1xuICAgICAgICAgICAgbWF4aW11bXNNYXAgPSBjcmVhdGVNYXhpbXVtc0RhdGEoKTtcbiAgICAgICAgICAgIGNhbmNlbE11bHRpRmluZ2VyUmVsZWFzZSgpO1xuXG5cbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSBudW1iZXIgb2YgZmluZ2VycyBpcyB3aGF0IHdlIGFyZSBsb29raW5nIGZvciwgb3Igd2UgYXJlIGNhcHR1cmluZyBwaW5jaGVzXG4gICAgICAgICAgICBpZiAoIVNVUFBPUlRTX1RPVUNIIHx8IChmaW5nZXJDb3VudCA9PT0gb3B0aW9ucy5maW5nZXJzIHx8IG9wdGlvbnMuZmluZ2VycyA9PT0gQUxMX0ZJTkdFUlMpIHx8IGhhc1BpbmNoZXMoKSkge1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHRvdWNoXG4gICAgICAgICAgICAgICAgY3JlYXRlRmluZ2VyRGF0YSgwLCBldnQpO1xuICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IGdldFRpbWVTdGFtcCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZpbmdlckNvdW50ID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9LZWVwIHRyYWNrIG9mIHRoZSBpbml0aWFsIHBpbmNoIGRpc3RhbmNlLCBzbyB3ZSBjYW4gY2FsY3VsYXRlIHRoZSBkaWZmIGxhdGVyXG4gICAgICAgICAgICAgICAgICAgIC8vU3RvcmUgc2Vjb25kIGZpbmdlciBkYXRhIGFzIHN0YXJ0XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZpbmdlckRhdGEoMSwgZXZlbnQudG91Y2hlc1sxXSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VG91Y2hlc0Rpc3RhbmNlID0gZW5kVG91Y2hlc0Rpc3RhbmNlID0gY2FsY3VsYXRlVG91Y2hlc0Rpc3RhbmNlKGZpbmdlckRhdGFbMF0uc3RhcnQsIGZpbmdlckRhdGFbMV0uc3RhcnQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN3aXBlU3RhdHVzIHx8IG9wdGlvbnMucGluY2hTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vQSB0b3VjaCB3aXRoIG1vcmUgb3IgbGVzcyB0aGFuIHRoZSBmaW5nZXJzIHdlIGFyZSBsb29raW5nIGZvciwgc28gY2FuY2VsXG4gICAgICAgICAgICAgICAgcmV0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vSWYgd2UgaGF2ZSBhIHJldHVybiB2YWx1ZSBmcm9tIHRoZSB1c2VycyBoYW5kbGVyLCB0aGVuIHJldHVybiBhbmQgY2FuY2VsXG4gICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfQ0FOQ0VMO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICBob2xkVGltZW91dCA9IHNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ2hvbGQnLCBbZXZlbnQudGFyZ2V0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5ob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5ob2xkLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzKSwgb3B0aW9ucy5sb25nVGFwVGhyZXNob2xkKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzZXRUb3VjaEluUHJvZ3Jlc3ModHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBmb3IgYSB0b3VjaCBtb3ZlIGV2ZW50LlxuICAgICAgICAgKiBJZiB3ZSBjaGFuZ2UgZmluZ2VycyBkdXJpbmcgbW92ZSwgdGhlbiBjYW5jZWwgdGhlIGV2ZW50XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0ganFFdmVudCBUaGUgbm9ybWFsaXNlZCBqUXVlcnkgZXZlbnQgb2JqZWN0LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG91Y2hNb3ZlKGpxRXZlbnQpIHtcblxuICAgICAgICAgICAgLy9BcyB3ZSB1c2UgSnF1ZXJ5IGJpbmQgZm9yIGV2ZW50cywgd2UgbmVlZCB0byB0YXJnZXQgdGhlIG9yaWdpbmFsIGV2ZW50IG9iamVjdFxuICAgICAgICAgICAgLy9JZiB0aGVzZSBldmVudHMgYXJlIGJlaW5nIHByb2dyYW1tYXRpY2FsbHkgdHJpZ2dlcmVkLCB3ZSBkb24ndCBoYXZlIGFuIG9yaWdpbmFsIGV2ZW50IG9iamVjdCwgc28gdXNlIHRoZSBKcSBvbmUuXG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBqcUV2ZW50Lm9yaWdpbmFsRXZlbnQgPyBqcUV2ZW50Lm9yaWdpbmFsRXZlbnQgOiBqcUV2ZW50O1xuXG4gICAgICAgICAgICAvL0lmIHdlIGFyZSBlbmRpbmcsIGNhbmNlbGxpbmcsIG9yIHdpdGhpbiB0aGUgdGhyZXNob2xkIG9mIDIgZmluZ2VycyBiZWluZyByZWxlYXNlZCwgZG9uJ3QgdHJhY2sgYW55dGhpbmcuLlxuICAgICAgICAgICAgaWYgKHBoYXNlID09PSBQSEFTRV9FTkQgfHwgcGhhc2UgPT09IFBIQVNFX0NBTkNFTCB8fCBpbk11bHRpRmluZ2VyUmVsZWFzZSgpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIHJldCxcbiAgICAgICAgICAgICAgICBldnQgPSBTVVBQT1JUU19UT1VDSCA/IGV2ZW50LnRvdWNoZXNbMF0gOiBldmVudDtcblxuXG4gICAgICAgICAgICAvL1VwZGF0ZSB0aGUgIGZpbmdlciBkYXRhXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpbmdlciA9IHVwZGF0ZUZpbmdlckRhdGEoZXZ0KTtcbiAgICAgICAgICAgIGVuZFRpbWUgPSBnZXRUaW1lU3RhbXAoKTtcblxuICAgICAgICAgICAgaWYgKFNVUFBPUlRTX1RPVUNIKSB7XG4gICAgICAgICAgICAgICAgZmluZ2VyQ291bnQgPSBldmVudC50b3VjaGVzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaG9sZClcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaG9sZFRpbWVvdXQpO1xuXG4gICAgICAgICAgICBwaGFzZSA9IFBIQVNFX01PVkU7XG5cbiAgICAgICAgICAgIC8vSWYgd2UgaGF2ZSAyIGZpbmdlcnMgZ2V0IFRvdWNoZXMgZGlzdGFuY2UgYXMgd2VsbFxuICAgICAgICAgICAgaWYgKGZpbmdlckNvdW50ID09IDIpIHtcblxuICAgICAgICAgICAgICAgIC8vS2VlcCB0cmFjayBvZiB0aGUgaW5pdGlhbCBwaW5jaCBkaXN0YW5jZSwgc28gd2UgY2FuIGNhbGN1bGF0ZSB0aGUgZGlmZiBsYXRlclxuICAgICAgICAgICAgICAgIC8vV2UgZG8gdGhpcyBoZXJlIGFzIHdlbGwgYXMgdGhlIHN0YXJ0IGV2ZW50LCBpbiBjYXNlIHRoZXkgc3RhcnQgd2l0aCAxIGZpbmdlciwgYW5kIHRoZSBwcmVzcyAyIGZpbmdlcnNcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRUb3VjaGVzRGlzdGFuY2UgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvL0NyZWF0ZSBzZWNvbmQgZmluZ2VyIGlmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUuLi5cbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmluZ2VyRGF0YSgxLCBldmVudC50b3VjaGVzWzFdKTtcblxuICAgICAgICAgICAgICAgICAgICBzdGFydFRvdWNoZXNEaXN0YW5jZSA9IGVuZFRvdWNoZXNEaXN0YW5jZSA9IGNhbGN1bGF0ZVRvdWNoZXNEaXN0YW5jZShmaW5nZXJEYXRhWzBdLnN0YXJ0LCBmaW5nZXJEYXRhWzFdLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL0Vsc2UganVzdCB1cGRhdGUgdGhlIHNlY29uZCBmaW5nZXJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRmluZ2VyRGF0YShldmVudC50b3VjaGVzWzFdKTtcblxuICAgICAgICAgICAgICAgICAgICBlbmRUb3VjaGVzRGlzdGFuY2UgPSBjYWxjdWxhdGVUb3VjaGVzRGlzdGFuY2UoZmluZ2VyRGF0YVswXS5lbmQsIGZpbmdlckRhdGFbMV0uZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgcGluY2hEaXJlY3Rpb24gPSBjYWxjdWxhdGVQaW5jaERpcmVjdGlvbihmaW5nZXJEYXRhWzBdLmVuZCwgZmluZ2VyRGF0YVsxXS5lbmQpO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgcGluY2hab29tID0gY2FsY3VsYXRlUGluY2hab29tKHN0YXJ0VG91Y2hlc0Rpc3RhbmNlLCBlbmRUb3VjaGVzRGlzdGFuY2UpO1xuICAgICAgICAgICAgICAgIHBpbmNoRGlzdGFuY2UgPSBNYXRoLmFicyhzdGFydFRvdWNoZXNEaXN0YW5jZSAtIGVuZFRvdWNoZXNEaXN0YW5jZSk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgaWYgKChmaW5nZXJDb3VudCA9PT0gb3B0aW9ucy5maW5nZXJzIHx8IG9wdGlvbnMuZmluZ2VycyA9PT0gQUxMX0ZJTkdFUlMpIHx8ICFTVVBQT1JUU19UT1VDSCB8fCBoYXNQaW5jaGVzKCkpIHtcblxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGNhbGN1bGF0ZURpcmVjdGlvbihjdXJyZW50RmluZ2VyLnN0YXJ0LCBjdXJyZW50RmluZ2VyLmVuZCk7XG5cbiAgICAgICAgICAgICAgICAvL0NoZWNrIGlmIHdlIG5lZWQgdG8gcHJldmVudCBkZWZhdWx0IGV2ZW50IChwYWdlIHNjcm9sbCAvIHBpbmNoIHpvb20pIG9yIG5vdFxuICAgICAgICAgICAgICAgIHZhbGlkYXRlRGVmYXVsdEV2ZW50KGpxRXZlbnQsIGRpcmVjdGlvbik7XG5cbiAgICAgICAgICAgICAgICAvL0Rpc3RhbmNlIGFuZCBkdXJhdGlvbiBhcmUgYWxsIG9mZiB0aGUgbWFpbiBmaW5nZXJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGNhbGN1bGF0ZURpc3RhbmNlKGN1cnJlbnRGaW5nZXIuc3RhcnQsIGN1cnJlbnRGaW5nZXIuZW5kKTtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IGNhbGN1bGF0ZUR1cmF0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAvL0NhY2hlIHRoZSBtYXhpbXVtIGRpc3RhbmNlIHdlIG1hZGUgaW4gdGhpcyBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICBzZXRNYXhEaXN0YW5jZShkaXJlY3Rpb24sIGRpc3RhbmNlKTtcblxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dpcGVTdGF0dXMgfHwgb3B0aW9ucy5waW5jaFN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICByZXQgPSB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgLy9JZiB3ZSB0cmlnZ2VyIGVuZCBldmVudHMgd2hlbiB0aHJlc2hvbGQgYXJlIG1ldCwgb3IgdHJpZ2dlciBldmVudHMgd2hlbiB0b3VjaCBsZWF2ZXMgZWxlbWVudFxuICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZCB8fCBvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5Cb3VuZHMgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vSWYgY2hlY2tpbmcgaWYgd2UgbGVhdmUgdGhlIGVsZW1lbnQsIHJ1biB0aGUgYm91bmRzIGNoZWNrICh3ZSBjYW4gdXNlIHRvdWNobGVhdmUgYXMgaXRzIG5vdCBzdXBwb3J0ZWQgb24gd2Via2l0KVxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gZ2V0Ym91bmRzKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5Cb3VuZHMgPSBpc0luQm91bmRzKGN1cnJlbnRGaW5nZXIuZW5kLCBib3VuZHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIGVuZCBoYW5kbGVzIGFzIHdlIHN3aXBlIGlmIHRocmVzaG9sZHMgbWV0IG9yIGlmIHdlIGhhdmUgbGVmdCB0aGUgZWxlbWVudCBpZiB0aGUgdXNlciBoYXMgYXNrZWQgdG8gY2hlY2sgdGhlc2UuLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQgJiYgaW5Cb3VuZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBoYXNlID0gZ2V0TmV4dFBoYXNlKFBIQVNFX01PVkUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vV2UgZW5kIGlmIG91dCBvZiBib3VuZHMgaGVyZSwgc28gc2V0IGN1cnJlbnQgcGhhc2UgdG8gRU5ELCBhbmQgY2hlY2sgaWYgaXRzIG1vZGlmaWVkXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudHJpZ2dlck9uVG91Y2hMZWF2ZSAmJiAhaW5Cb3VuZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBoYXNlID0gZ2V0TmV4dFBoYXNlKFBIQVNFX0VORCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocGhhc2UgPT0gUEhBU0VfQ0FOQ0VMIHx8IHBoYXNlID09IFBIQVNFX0VORCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9DQU5DRUw7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBwaGFzZSA9IFBIQVNFX0NBTkNFTDtcbiAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBhIHRvdWNoIGVuZCBldmVudC5cbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSBkaXJlY3Rpb24gYW5kIHRyaWdnZXIgZXZlbnRzXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0ganFFdmVudCBUaGUgbm9ybWFsaXNlZCBqUXVlcnkgZXZlbnQgb2JqZWN0LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG91Y2hFbmQoanFFdmVudCkge1xuICAgICAgICAgICAgLy9BcyB3ZSB1c2UgSnF1ZXJ5IGJpbmQgZm9yIGV2ZW50cywgd2UgbmVlZCB0byB0YXJnZXQgdGhlIG9yaWdpbmFsIGV2ZW50IG9iamVjdFxuICAgICAgICAgICAgdmFyIGV2ZW50ID0ganFFdmVudC5vcmlnaW5hbEV2ZW50O1xuXG5cbiAgICAgICAgICAgIC8vSWYgd2UgYXJlIHN0aWxsIGluIGEgdG91Y2ggd2l0aCBhbm90aGVyIGZpbmdlciByZXR1cm5cbiAgICAgICAgICAgIC8vVGhpcyBhbGxvd3MgdXMgdG8gd2FpdCBhIGZyYWN0aW9uIGFuZCBzZWUgaWYgdGhlIG90aGVyIGZpbmdlciBjb21lcyB1cCwgaWYgaXQgZG9lcyB3aXRoaW4gdGhlIHRocmVzaG9sZCwgdGhlbiB3ZSB0cmVhdCBpdCBhcyBhIG11bHRpIHJlbGVhc2UsIG5vdCBhIHNpbmdsZSByZWxlYXNlLlxuICAgICAgICAgICAgaWYgKFNVUFBPUlRTX1RPVUNIKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdGFydE11bHRpRmluZ2VyUmVsZWFzZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vSWYgYSBwcmV2aW91cyBmaW5nZXIgaGFzIGJlZW4gcmVsZWFzZWQsIGNoZWNrIGhvdyBsb25nIGFnbywgaWYgd2l0aGluIHRoZSB0aHJlc2hvbGQsIHRoZW4gYXNzdW1lIGl0IHdhcyBhIG11bHRpZmluZ2VyIHJlbGVhc2UuXG4gICAgICAgICAgICAvL1RoaXMgaXMgdXNlZCB0byBhbGxvdyAyIGZpbmdlcnMgdG8gcmVsZWFzZSBmcmFjdGlvbmFsbHkgYWZ0ZXIgZWFjaCBvdGhlciwgd2hpbHN0IG1haW50YWluaWcgdGhlIGV2ZW50IGFzIGNvbnRhaW5nIDIgZmluZ2Vycywgbm90IDFcbiAgICAgICAgICAgIGlmIChpbk11bHRpRmluZ2VyUmVsZWFzZSgpKSB7XG4gICAgICAgICAgICAgICAgZmluZ2VyQ291bnQgPSBwcmV2aW91c1RvdWNoRmluZ2VyQ291bnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vU2V0IGVuZCBvZiBzd2lwZVxuICAgICAgICAgICAgZW5kVGltZSA9IGdldFRpbWVTdGFtcCgpO1xuXG4gICAgICAgICAgICAvL0dldCBkdXJhdGlvbiBpbmNhc2UgbW92ZSB3YXMgbmV2ZXIgZmlyZWRcbiAgICAgICAgICAgIGR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24oKTtcblxuICAgICAgICAgICAgLy9JZiB3ZSB0cmlnZ2VyIGhhbmRsZXJzIGF0IGVuZCBvZiBzd2lwZSBPUiwgd2UgdHJpZ2dlciBkdXJpbmcsIGJ1dCB0aGV5IGRpZG50IHRyaWdnZXIgYW5kIHdlIGFyZSBzdGlsbCBpbiB0aGUgbW92ZSBwaGFzZVxuICAgICAgICAgICAgaWYgKGRpZFN3aXBlQmFja1RvQ2FuY2VsKCkgfHwgIXZhbGlkYXRlU3dpcGVEaXN0YW5jZSgpKSB7XG4gICAgICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9DQU5DRUw7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZCB8fCAob3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZCA9PSBmYWxzZSAmJiBwaGFzZSA9PT0gUEhBU0VfTU9WRSkpIHtcbiAgICAgICAgICAgICAgICAvL2NhbGwgdGhpcyBvbiBqcSBldmVudCBzbyB3ZSBhcmUgY3Jvc3MgYnJvd3NlclxuICAgICAgICAgICAgICAgIGpxRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBwaGFzZSA9IFBIQVNFX0VORDtcbiAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9TcGVjaWFsIGNhc2VzIC0gQSB0YXAgc2hvdWxkIGFsd2F5cyBmaXJlIG9uIHRvdWNoIGVuZCByZWdhcmRsZXNzLFxuICAgICAgICAgICAgLy9TbyBoZXJlIHdlIG1hbnVhbGx5IHRyaWdnZXIgdGhlIHRhcCBlbmQgaGFuZGxlciBieSBpdHNlbGZcbiAgICAgICAgICAgIC8vV2UgZG9udCBydW4gdHJpZ2dlciBoYW5kbGVyIGFzIGl0IHdpbGwgcmUtdHJpZ2dlciBldmVudHMgdGhhdCBtYXkgaGF2ZSBmaXJlZCBhbHJlYWR5XG4gICAgICAgICAgICBlbHNlIGlmICghb3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZCAmJiBoYXNUYXAoKSkge1xuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgcGluY2ggZXZlbnRzLi4uXG4gICAgICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9FTkQ7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LCBwaGFzZSwgVEFQKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGhhc2UgPT09IFBIQVNFX01PVkUpIHtcbiAgICAgICAgICAgICAgICBwaGFzZSA9IFBIQVNFX0NBTkNFTDtcbiAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRUb3VjaEluUHJvZ3Jlc3MoZmFsc2UpO1xuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBmb3IgYSB0b3VjaCBjYW5jZWwgZXZlbnQuXG4gICAgICAgICAqIENsZWFycyBjdXJyZW50IHZhcnNcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0b3VjaENhbmNlbCgpIHtcbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSB2YXJpYWJsZXMgYmFjayB0byBkZWZhdWx0IHZhbHVlc1xuICAgICAgICAgICAgZmluZ2VyQ291bnQgPSAwO1xuICAgICAgICAgICAgZW5kVGltZSA9IDA7XG4gICAgICAgICAgICBzdGFydFRpbWUgPSAwO1xuICAgICAgICAgICAgc3RhcnRUb3VjaGVzRGlzdGFuY2UgPSAwO1xuICAgICAgICAgICAgZW5kVG91Y2hlc0Rpc3RhbmNlID0gMDtcbiAgICAgICAgICAgIHBpbmNoWm9vbSA9IDE7XG5cbiAgICAgICAgICAgIC8vSWYgd2Ugd2VyZSBpbiBwcm9ncmVzcyBvZiB0cmFja2luZyBhIHBvc3NpYmxlIG11bHRpIHRvdWNoIGVuZCwgdGhlbiByZSBzZXQgaXQuXG4gICAgICAgICAgICBjYW5jZWxNdWx0aUZpbmdlclJlbGVhc2UoKTtcblxuICAgICAgICAgICAgc2V0VG91Y2hJblByb2dyZXNzKGZhbHNlKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIGEgdG91Y2ggbGVhdmUgZXZlbnQuXG4gICAgICAgICAqIFRoaXMgaXMgb25seSB0cmlnZ2VyZWQgb24gZGVza3RvcHMsIGluIHRvdWNoIHdlIHdvcmsgdGhpcyBvdXQgbWFudWFsbHlcbiAgICAgICAgICogYXMgdGhlIHRvdWNobGVhdmUgZXZlbnQgaXMgbm90IHN1cHBvcnRlZCBpbiB3ZWJraXRcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0b3VjaExlYXZlKGpxRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IGpxRXZlbnQub3JpZ2luYWxFdmVudDtcblxuICAgICAgICAgICAgLy9JZiB3ZSBoYXZlIHRoZSB0cmlnZ2VyIG9uIGxlYXZlIHByb3BlcnR5IHNldC4uLi5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUpIHtcbiAgICAgICAgICAgICAgICBwaGFzZSA9IGdldE5leHRQaGFzZShQSEFTRV9FTkQpO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmVtb3ZlcyBhbGwgbGlzdGVuZXJzIHRoYXQgd2VyZSBhc3NvY2lhdGVkIHdpdGggdGhlIHBsdWdpblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVycygpIHtcbiAgICAgICAgICAgICRlbGVtZW50LnVuYmluZChTVEFSVF9FViwgdG91Y2hTdGFydCk7XG4gICAgICAgICAgICAkZWxlbWVudC51bmJpbmQoQ0FOQ0VMX0VWLCB0b3VjaENhbmNlbCk7XG4gICAgICAgICAgICAkZWxlbWVudC51bmJpbmQoTU9WRV9FViwgdG91Y2hNb3ZlKTtcbiAgICAgICAgICAgICRlbGVtZW50LnVuYmluZChFTkRfRVYsIHRvdWNoRW5kKTtcblxuICAgICAgICAgICAgLy93ZSBvbmx5IGhhdmUgbGVhdmUgZXZlbnRzIG9uIGRlc2t0b3AsIHdlIG1hbnVhbGx5IGNhbGN1bGF0ZSBsZWF2ZSBvbiB0b3VjaCBhcyBpdHMgbm90IHN1cHBvcnRlZCBpbiB3ZWJraXRcbiAgICAgICAgICAgIGlmIChMRUFWRV9FVikge1xuICAgICAgICAgICAgICAgICRlbGVtZW50LnVuYmluZChMRUFWRV9FViwgdG91Y2hMZWF2ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFRvdWNoSW5Qcm9ncmVzcyhmYWxzZSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgaWYgdGhlIHRpbWUgYW5kIGRpc3RhbmNlIHRocmVzaG9sZHMgaGF2ZSBiZWVuIG1ldCwgYW5kIGlmIHNvIHRoZW4gdGhlIGFwcHJvcHJpYXRlIGhhbmRsZXJzIGFyZSBmaXJlZC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldE5leHRQaGFzZShjdXJyZW50UGhhc2UpIHtcblxuICAgICAgICAgICAgdmFyIG5leHRQaGFzZSA9IGN1cnJlbnRQaGFzZTtcblxuICAgICAgICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgdmFsaWQgc3dpcGUgKHVuZGVyIHRpbWUgYW5kIG92ZXIgZGlzdGFuY2UgIGFuZCBjaGVjayBpZiB3ZSBhcmUgb3V0IG9mIGJvdW5kLi4uKVxuICAgICAgICAgICAgdmFyIHZhbGlkVGltZSA9IHZhbGlkYXRlU3dpcGVUaW1lKCk7XG4gICAgICAgICAgICB2YXIgdmFsaWREaXN0YW5jZSA9IHZhbGlkYXRlU3dpcGVEaXN0YW5jZSgpO1xuICAgICAgICAgICAgdmFyIGRpZENhbmNlbCA9IGRpZFN3aXBlQmFja1RvQ2FuY2VsKCk7XG5cbiAgICAgICAgICAgIC8vSWYgd2UgaGF2ZSBleGNlZWRlZCBvdXIgdGltZSwgdGhlbiBjYW5jZWxcbiAgICAgICAgICAgIGlmICghdmFsaWRUaW1lIHx8IGRpZENhbmNlbCkge1xuICAgICAgICAgICAgICAgIG5leHRQaGFzZSA9IFBIQVNFX0NBTkNFTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vRWxzZSBpZiB3ZSBhcmUgbW92aW5nLCBhbmQgaGF2ZSByZWFjaGVkIGRpc3RhbmNlIHRoZW4gZW5kXG4gICAgICAgICAgICBlbHNlIGlmICh2YWxpZERpc3RhbmNlICYmIGN1cnJlbnRQaGFzZSA9PSBQSEFTRV9NT1ZFICYmICghb3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZCB8fCBvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUpKSB7XG4gICAgICAgICAgICAgICAgbmV4dFBoYXNlID0gUEhBU0VfRU5EO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9FbHNlIGlmIHdlIGhhdmUgZW5kZWQgYnkgbGVhdmluZyBhbmQgZGlkbid0IHJlYWNoIGRpc3RhbmNlLCB0aGVuIGNhbmNlbFxuICAgICAgICAgICAgZWxzZSBpZiAoIXZhbGlkRGlzdGFuY2UgJiYgY3VycmVudFBoYXNlID09IFBIQVNFX0VORCAmJiBvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUpIHtcbiAgICAgICAgICAgICAgICBuZXh0UGhhc2UgPSBQSEFTRV9DQU5DRUw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBuZXh0UGhhc2U7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlnZ2VyIHRoZSByZWxldmFudCBldmVudCBoYW5kbGVyXG4gICAgICAgICAqIFRoZSBoYW5kbGVycyBhcmUgcGFzc2VkIHRoZSBvcmlnaW5hbCBldmVudCwgdGhlIGVsZW1lbnQgdGhhdCB3YXMgc3dpcGVkLCBhbmQgaW4gdGhlIGNhc2Ugb2YgdGhlIGNhdGNoIGFsbCBoYW5kbGVyLCB0aGUgZGlyZWN0aW9uIHRoYXQgd2FzIHN3aXBlZCwgXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJ1cFwiLCBvciBcImRvd25cIlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgdGhlIG9yaWdpbmFsIGV2ZW50IG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGhhc2UgdGhlIHBoYXNlIG9mIHRoZSBzd2lwZSAoc3RhcnQsIGVuZCBjYW5jZWwgZXRjKSB7QGxpbmsgJC5mbi5zd2lwZS5waGFzZXN9XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKSB7XG5cbiAgICAgICAgICAgIHZhciByZXQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIC8vIFNXSVBFIEdFU1RVUkVTXG4gICAgICAgICAgICBpZiAoZGlkU3dpcGUoKSB8fCBoYXNTd2lwZXMoKSkgeyAvL2hhc1N3aXBlcyBhcyBzdGF0dXMgbmVlZHMgdG8gZmlyZSBldmVuIGlmIHN3aXBlIGlzIGludmFsaWRcbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIHN3aXBlIGV2ZW50cy4uLlxuICAgICAgICAgICAgICAgIHJldCA9IHRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCwgcGhhc2UsIFNXSVBFKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUElOQ0ggR0VTVFVSRVMgKGlmIHRoZSBhYm92ZSBkaWRuJ3QgY2FuY2VsKVxuICAgICAgICAgICAgZWxzZSBpZiAoKGRpZFBpbmNoKCkgfHwgaGFzUGluY2hlcygpKSAmJiByZXQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBwaW5jaCBldmVudHMuLi5cbiAgICAgICAgICAgICAgICByZXQgPSB0cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQsIHBoYXNlLCBQSU5DSCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENMSUNLIC8gVEFQIChpZiB0aGUgYWJvdmUgZGlkbid0IGNhbmNlbClcbiAgICAgICAgICAgIGlmIChkaWREb3VibGVUYXAoKSAmJiByZXQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSB0YXAgZXZlbnRzLi4uXG4gICAgICAgICAgICAgICAgcmV0ID0gdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LCBwaGFzZSwgRE9VQkxFX1RBUCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENMSUNLIC8gVEFQIChpZiB0aGUgYWJvdmUgZGlkbid0IGNhbmNlbClcbiAgICAgICAgICAgIGVsc2UgaWYgKGRpZExvbmdUYXAoKSAmJiByZXQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSB0YXAgZXZlbnRzLi4uXG4gICAgICAgICAgICAgICAgcmV0ID0gdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LCBwaGFzZSwgTE9OR19UQVApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDTElDSyAvIFRBUCAoaWYgdGhlIGFib3ZlIGRpZG4ndCBjYW5jZWwpXG4gICAgICAgICAgICBlbHNlIGlmIChkaWRUYXAoKSAmJiByZXQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSB0YXAgZXZlbnQuLlxuICAgICAgICAgICAgICAgIHJldCA9IHRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCwgcGhhc2UsIFRBUCk7XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgY2FuY2VsbGluZyB0aGUgZ2VzdHVyZSwgdGhlbiBtYW51YWxseSB0cmlnZ2VyIHRoZSByZXNldCBoYW5kbGVyXG4gICAgICAgICAgICBpZiAocGhhc2UgPT09IFBIQVNFX0NBTkNFTCkge1xuICAgICAgICAgICAgICAgIHRvdWNoQ2FuY2VsKGV2ZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGVuZGluZyB0aGUgZ2VzdHVyZSwgdGhlbiBtYW51YWxseSB0cmlnZ2VyIHRoZSByZXNldCBoYW5kbGVyIElGIGFsbCBmaW5nZXJzIGFyZSBvZmZcbiAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gUEhBU0VfRU5EKSB7XG4gICAgICAgICAgICAgICAgLy9JZiB3ZSBzdXBwb3J0IHRvdWNoLCB0aGVuIGNoZWNrIHRoYXQgYWxsIGZpbmdlcnMgYXJlIG9mZiBiZWZvcmUgd2UgY2FuY2VsXG4gICAgICAgICAgICAgICAgaWYgKFNVUFBPUlRTX1RPVUNIKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaENhbmNlbChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaENhbmNlbChldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG5cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmlnZ2VyIHRoZSByZWxldmFudCBldmVudCBoYW5kbGVyXG4gICAgICAgICAqIFRoZSBoYW5kbGVycyBhcmUgcGFzc2VkIHRoZSBvcmlnaW5hbCBldmVudCwgdGhlIGVsZW1lbnQgdGhhdCB3YXMgc3dpcGVkLCBhbmQgaW4gdGhlIGNhc2Ugb2YgdGhlIGNhdGNoIGFsbCBoYW5kbGVyLCB0aGUgZGlyZWN0aW9uIHRoYXQgd2FzIHN3aXBlZCwgXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJ1cFwiLCBvciBcImRvd25cIlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgdGhlIG9yaWdpbmFsIGV2ZW50IG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGhhc2UgdGhlIHBoYXNlIG9mIHRoZSBzd2lwZSAoc3RhcnQsIGVuZCBjYW5jZWwgZXRjKSB7QGxpbmsgJC5mbi5zd2lwZS5waGFzZXN9XG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBnZXN0dXJlIHRoZSBnZXN0dXJlIHRvIHRyaWdnZXIgYSBoYW5kbGVyIGZvciA6IFBJTkNIIG9yIFNXSVBFIHtAbGluayAkLmZuLnN3aXBlLmdlc3R1cmVzfVxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW4gRmFsc2UsIHRvIGluZGljYXRlIHRoYXQgdGhlIGV2ZW50IHNob3VsZCBzdG9wIHByb3BhZ2F0aW9uLCBvciB2b2lkLlxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCwgcGhhc2UsIGdlc3R1cmUpIHtcblxuICAgICAgICAgICAgdmFyIHJldCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgLy9TV0lQRVMuLi4uXG4gICAgICAgICAgICBpZiAoZ2VzdHVyZSA9PSBTV0lQRSkge1xuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciBzdGF0dXMgZXZlcnkgdGltZS4uXG5cbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50Li4uXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignc3dpcGVTdGF0dXMnLCBbcGhhc2UsIGRpcmVjdGlvbiB8fCBudWxsLCBkaXN0YW5jZSB8fCAwLCBkdXJhdGlvbiB8fCAwLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN3aXBlU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMuc3dpcGVTdGF0dXMuY2FsbCgkZWxlbWVudCwgZXZlbnQsIHBoYXNlLCBkaXJlY3Rpb24gfHwgbnVsbCwgZGlzdGFuY2UgfHwgMCwgZHVyYXRpb24gfHwgMCwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZSBzdGF0dXMgY2FuY2VscywgdGhlbiBkb250IHJ1biB0aGUgc3Vic2VxdWVudCBldmVudCBoYW5kbGVycy4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG5cblxuXG4gICAgICAgICAgICAgICAgaWYgKHBoYXNlID09IFBIQVNFX0VORCAmJiB2YWxpZGF0ZVN3aXBlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYXRjaCBhbGwgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignc3dpcGUnLCBbZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9GaXJlIGNhdGNoIGFsbCBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zd2lwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5zd2lwZS5jYWxsKCRlbGVtZW50LCBldmVudCwgZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgdGhlIHN0YXR1cyBjYW5jZWxzLCB0aGVuIGRvbnQgcnVuIHRoZSBzdWJzZXF1ZW50IGV2ZW50IGhhbmRsZXJzLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL3RyaWdnZXIgZGlyZWN0aW9uIHNwZWNpZmljIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIExFRlQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3N3aXBlTGVmdCcsIFtkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zd2lwZUxlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5zd2lwZUxlZnQuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGRpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFJJR0hUOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdzd2lwZVJpZ2h0JywgW2RpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN3aXBlUmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5zd2lwZVJpZ2h0LmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBVUDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignc3dpcGVVcCcsIFtkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zd2lwZVVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMuc3dpcGVVcC5jYWxsKCRlbGVtZW50LCBldmVudCwgZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignc3dpcGVEb3duJywgW2RpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN3aXBlRG93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnN3aXBlRG93bi5jYWxsKCRlbGVtZW50LCBldmVudCwgZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy9QSU5DSEVTLi4uLlxuICAgICAgICAgICAgaWYgKGdlc3R1cmUgPT0gUElOQ0gpIHtcbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcigncGluY2hTdGF0dXMnLCBbcGhhc2UsIHBpbmNoRGlyZWN0aW9uIHx8IG51bGwsIHBpbmNoRGlzdGFuY2UgfHwgMCwgZHVyYXRpb24gfHwgMCwgZmluZ2VyQ291bnQsIHBpbmNoWm9vbSwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnBpbmNoU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMucGluY2hTdGF0dXMuY2FsbCgkZWxlbWVudCwgZXZlbnQsIHBoYXNlLCBwaW5jaERpcmVjdGlvbiB8fCBudWxsLCBwaW5jaERpc3RhbmNlIHx8IDAsIGR1cmF0aW9uIHx8IDAsIGZpbmdlckNvdW50LCBwaW5jaFpvb20sIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZSBzdGF0dXMgY2FuY2VscywgdGhlbiBkb250IHJ1biB0aGUgc3Vic2VxdWVudCBldmVudCBoYW5kbGVycy4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHBoYXNlID09IFBIQVNFX0VORCAmJiB2YWxpZGF0ZVBpbmNoKCkpIHtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBpbmNoRGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIElOOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdwaW5jaEluJywgW3BpbmNoRGlyZWN0aW9uIHx8IG51bGwsIHBpbmNoRGlzdGFuY2UgfHwgMCwgZHVyYXRpb24gfHwgMCwgZmluZ2VyQ291bnQsIHBpbmNoWm9vbSwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnBpbmNoSW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5waW5jaEluLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBwaW5jaERpcmVjdGlvbiB8fCBudWxsLCBwaW5jaERpc3RhbmNlIHx8IDAsIGR1cmF0aW9uIHx8IDAsIGZpbmdlckNvdW50LCBwaW5jaFpvb20sIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBPVVQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3BpbmNoT3V0JywgW3BpbmNoRGlyZWN0aW9uIHx8IG51bGwsIHBpbmNoRGlzdGFuY2UgfHwgMCwgZHVyYXRpb24gfHwgMCwgZmluZ2VyQ291bnQsIHBpbmNoWm9vbSwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnBpbmNoT3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMucGluY2hPdXQuY2FsbCgkZWxlbWVudCwgZXZlbnQsIHBpbmNoRGlyZWN0aW9uIHx8IG51bGwsIHBpbmNoRGlzdGFuY2UgfHwgMCwgZHVyYXRpb24gfHwgMCwgZmluZ2VyQ291bnQsIHBpbmNoWm9vbSwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cblxuXG5cbiAgICAgICAgICAgIGlmIChnZXN0dXJlID09IFRBUCkge1xuICAgICAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gUEhBU0VfQ0FOQ0VMIHx8IHBoYXNlID09PSBQSEFTRV9FTkQpIHtcblxuXG4gICAgICAgICAgICAgICAgICAgIC8vQ2FuY2VsIGFueSBleGlzdGluZyBkb3VibGUgdGFwXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzaW5nbGVUYXBUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgLy9DYW5jZWwgaG9sZCB0aW1lb3V0XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob2xkVGltZW91dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9JZiB3ZSBhcmUgYWxzbyBsb29raW5nIGZvciBkb3ViZWxUYXBzLCB3YWl0IGluY2FzZSB0aGlzIGlzIG9uZS4uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzRG91YmxlVGFwKCkgJiYgIWluRG91YmxlVGFwKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2FjaGUgdGhlIHRpbWUgb2YgdGhpcyB0YXBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZVRhcFN0YXJ0VGltZSA9IGdldFRpbWVTdGFtcCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL05vdyB3YWl0IGZvciB0aGUgZG91YmxlIHRhcCB0aW1lb3V0LCBhbmQgdHJpZ2dlciB0aGlzIHNpbmdsZSB0YXBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgaXRzIG5vdCBjYW5jZWxsZWQgYnkgYSBkb3VibGUgdGFwXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGVUYXBUaW1lb3V0ID0gc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZVRhcFN0YXJ0VGltZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3RhcCcsIFtldmVudC50YXJnZXRdKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRhcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnRhcC5jYWxsKCRlbGVtZW50LCBldmVudCwgZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzKSwgb3B0aW9ucy5kb3VibGVUYXBUaHJlc2hvbGQpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVUYXBTdGFydFRpbWUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCd0YXAnLCBbZXZlbnQudGFyZ2V0XSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy50YXAuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdlc3R1cmUgPT0gRE9VQkxFX1RBUCkge1xuICAgICAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gUEhBU0VfQ0FOQ0VMIHx8IHBoYXNlID09PSBQSEFTRV9FTkQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9DYW5jZWwgYW55IHBlbmRpbmcgc2luZ2xldGFwXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzaW5nbGVUYXBUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgZG91YmxlVGFwU3RhcnRUaW1lID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ2RvdWJsZXRhcCcsIFtldmVudC50YXJnZXRdKTtcblxuICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRvdWJsZVRhcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5kb3VibGVUYXAuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdlc3R1cmUgPT0gTE9OR19UQVApIHtcbiAgICAgICAgICAgICAgICBpZiAocGhhc2UgPT09IFBIQVNFX0NBTkNFTCB8fCBwaGFzZSA9PT0gUEhBU0VfRU5EKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vQ2FuY2VsIGFueSBwZW5kaW5nIHNpbmdsZXRhcCAoc2hvdWxkbnQgYmUgb25lKVxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2luZ2xlVGFwVGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIGRvdWJsZVRhcFN0YXJ0VGltZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdsb25ndGFwJywgW2V2ZW50LnRhcmdldF0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubG9uZ1RhcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5sb25nVGFwLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG5cblxuXG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gR0VTVFVSRSBWQUxJREFUSU9OXG4gICAgICAgIC8vXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyB0aGUgdXNlciBoYXMgc3dpcGUgZmFyIGVub3VnaFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW4gaWYgPGNvZGU+dGhyZXNob2xkPC9jb2RlPiBoYXMgYmVlbiBzZXQsIHJldHVybiB0cnVlIGlmIHRoZSB0aHJlc2hvbGQgd2FzIG1ldCwgZWxzZSBmYWxzZS5cbiAgICAgICAgICogSWYgbm8gdGhyZXNob2xkIHdhcyBzZXQsIHRoZW4gd2UgcmV0dXJuIHRydWUuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVTd2lwZURpc3RhbmNlKCkge1xuICAgICAgICAgICAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vSWYgd2UgbWFkZSBpdCBwYXN0IHRoZSBtaW4gc3dpcGUgZGlzdGFuY2UuLlxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudGhyZXNob2xkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSBkaXN0YW5jZSA+PSBvcHRpb25zLnRocmVzaG9sZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyB0aGUgdXNlciBoYXMgc3dpcGVkIGJhY2sgdG8gY2FuY2VsLlxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW4gaWYgPGNvZGU+Y2FuY2VsVGhyZXNob2xkPC9jb2RlPiBoYXMgYmVlbiBzZXQsIHJldHVybiB0cnVlIGlmIHRoZSBjYW5jZWxUaHJlc2hvbGQgd2FzIG1ldCwgZWxzZSBmYWxzZS5cbiAgICAgICAgICogSWYgbm8gY2FuY2VsVGhyZXNob2xkIHdhcyBzZXQsIHRoZW4gd2UgcmV0dXJuIHRydWUuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGlkU3dpcGVCYWNrVG9DYW5jZWwoKSB7XG4gICAgICAgICAgICB2YXIgY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jYW5jZWxUaHJlc2hvbGQgIT09IG51bGwgJiYgZGlyZWN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsbGVkID0gKGdldE1heERpc3RhbmNlKGRpcmVjdGlvbikgLSBkaXN0YW5jZSkgPj0gb3B0aW9ucy5jYW5jZWxUaHJlc2hvbGQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjYW5jZWxsZWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIHRoZSB1c2VyIGhhcyBwaW5jaGVkIGZhciBlbm91Z2hcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuIGlmIDxjb2RlPnBpbmNoVGhyZXNob2xkPC9jb2RlPiBoYXMgYmVlbiBzZXQsIHJldHVybiB0cnVlIGlmIHRoZSB0aHJlc2hvbGQgd2FzIG1ldCwgZWxzZSBmYWxzZS5cbiAgICAgICAgICogSWYgbm8gdGhyZXNob2xkIHdhcyBzZXQsIHRoZW4gd2UgcmV0dXJuIHRydWUuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVQaW5jaERpc3RhbmNlKCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGluY2hUaHJlc2hvbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGluY2hEaXN0YW5jZSA+PSBvcHRpb25zLnBpbmNoVGhyZXNob2xkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIHRoYXQgdGhlIHRpbWUgdGFrZW4gdG8gc3dpcGUgbWVldHMgdGhlIG1pbmltdW0gLyBtYXhpbXVtIHJlcXVpcmVtZW50c1xuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVN3aXBlVGltZSgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICAvL0lmIG5vIHRpbWUgc2V0LCB0aGVuIHJldHVybiB0cnVlXG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLm1heFRpbWVUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZHVyYXRpb24gPj0gb3B0aW9ucy5tYXhUaW1lVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIGRpcmVjdGlvbiBvZiB0aGUgc3dpcGUgYW5kIHRoZSB2YWx1ZSBhbGxvd1BhZ2VTY3JvbGwgdG8gc2VlIGlmIHdlIHNob3VsZCBhbGxvdyBvciBwcmV2ZW50IHRoZSBkZWZhdWx0IGJlaGF2aW91ciBmcm9tIG9jY3VycmluZy5cbiAgICAgICAgICogVGhpcyB3aWxsIGVzc2VudGlhbGx5IGFsbG93IHBhZ2Ugc2Nyb2xsaW5nIG9yIG5vdCB3aGVuIHRoZSB1c2VyIGlzIHN3aXBpbmcgb24gYSB0b3VjaFN3aXBlIG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGpxRXZlbnQgVGhlIG5vcm1hbGlzZWQgalF1ZXJ5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBldmVudCBvYmplY3QuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaXJlY3Rpb24gVGhlIGRpcmVjdGlvbiBvZiB0aGUgZXZlbnQuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZS5kaXJlY3Rpb25zfVxuICAgICAgICAgKiBAc2VlICQuZm4uc3dpcGUuZGlyZWN0aW9uc1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlRGVmYXVsdEV2ZW50KGpxRXZlbnQsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsID09PSBOT05FIHx8IGhhc1BpbmNoZXMoKSkge1xuICAgICAgICAgICAgICAgIGpxRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGF1dG8gPSBvcHRpb25zLmFsbG93UGFnZVNjcm9sbCA9PT0gQVVUTztcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgTEVGVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgob3B0aW9ucy5zd2lwZUxlZnQgJiYgYXV0bykgfHwgKCFhdXRvICYmIG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsICE9IEhPUklaT05UQUwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBSSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgob3B0aW9ucy5zd2lwZVJpZ2h0ICYmIGF1dG8pIHx8ICghYXV0byAmJiBvcHRpb25zLmFsbG93UGFnZVNjcm9sbCAhPSBIT1JJWk9OVEFMKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpxRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG9wdGlvbnMuc3dpcGVVcCAmJiBhdXRvKSB8fCAoIWF1dG8gJiYgb3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwgIT0gVkVSVElDQUwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBET1dOOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChvcHRpb25zLnN3aXBlRG93biAmJiBhdXRvKSB8fCAoIWF1dG8gJiYgb3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwgIT0gVkVSVElDQUwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIFBJTkNIRVNcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBvZiB0aGUgY3VycmVudCBwaW5jaCBtZWV0cyB0aGUgdGhyZXNob2xkc1xuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVBpbmNoKCkge1xuICAgICAgICAgICAgdmFyIGhhc0NvcnJlY3RGaW5nZXJDb3VudCA9IHZhbGlkYXRlRmluZ2VycygpO1xuICAgICAgICAgICAgdmFyIGhhc0VuZFBvaW50ID0gdmFsaWRhdGVFbmRQb2ludCgpO1xuICAgICAgICAgICAgdmFyIGhhc0NvcnJlY3REaXN0YW5jZSA9IHZhbGlkYXRlUGluY2hEaXN0YW5jZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGhhc0NvcnJlY3RGaW5nZXJDb3VudCAmJiBoYXNFbmRQb2ludCAmJiBoYXNDb3JyZWN0RGlzdGFuY2U7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55IFBpbmNoIGV2ZW50cyBoYXZlIGJlZW4gcmVnaXN0ZXJlZFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBoYXNQaW5jaGVzKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKG9wdGlvbnMucGluY2hTdGF0dXMgfHwgb3B0aW9ucy5waW5jaEluIHx8IG9wdGlvbnMucGluY2hPdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgZGV0ZWN0aW5nIHBpbmNoZXMsIGFuZCBoYXZlIG9uZVxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkaWRQaW5jaCgpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhISh2YWxpZGF0ZVBpbmNoKCkgJiYgaGFzUGluY2hlcygpKTtcbiAgICAgICAgfVxuXG5cblxuXG4gICAgICAgIC8vIFNXSVBFU1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBjdXJyZW50IHN3aXBlIG1lZXRzIHRoZSB0aHJlc2hvbGRzXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlU3dpcGUoKSB7XG4gICAgICAgICAgICAvL0NoZWNrIHZhbGlkaXR5IG9mIHN3aXBlXG4gICAgICAgICAgICB2YXIgaGFzVmFsaWRUaW1lID0gdmFsaWRhdGVTd2lwZVRpbWUoKTtcbiAgICAgICAgICAgIHZhciBoYXNWYWxpZERpc3RhbmNlID0gdmFsaWRhdGVTd2lwZURpc3RhbmNlKCk7XG4gICAgICAgICAgICB2YXIgaGFzQ29ycmVjdEZpbmdlckNvdW50ID0gdmFsaWRhdGVGaW5nZXJzKCk7XG4gICAgICAgICAgICB2YXIgaGFzRW5kUG9pbnQgPSB2YWxpZGF0ZUVuZFBvaW50KCk7XG4gICAgICAgICAgICB2YXIgZGlkQ2FuY2VsID0gZGlkU3dpcGVCYWNrVG9DYW5jZWwoKTtcblxuICAgICAgICAgICAgLy8gaWYgdGhlIHVzZXIgc3dpcGVkIG1vcmUgdGhhbiB0aGUgbWluaW11bSBsZW5ndGgsIHBlcmZvcm0gdGhlIGFwcHJvcHJpYXRlIGFjdGlvblxuICAgICAgICAgICAgLy8gaGFzVmFsaWREaXN0YW5jZSBpcyBudWxsIHdoZW4gbm8gZGlzdGFuY2UgaXMgc2V0XG4gICAgICAgICAgICB2YXIgdmFsaWQgPSAhZGlkQ2FuY2VsICYmIGhhc0VuZFBvaW50ICYmIGhhc0NvcnJlY3RGaW5nZXJDb3VudCAmJiBoYXNWYWxpZERpc3RhbmNlICYmIGhhc1ZhbGlkVGltZTtcblxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnkgU3dpcGUgZXZlbnRzIGhhdmUgYmVlbiByZWdpc3RlcmVkXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc1N3aXBlcygpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhIShvcHRpb25zLnN3aXBlIHx8IG9wdGlvbnMuc3dpcGVTdGF0dXMgfHwgb3B0aW9ucy5zd2lwZUxlZnQgfHwgb3B0aW9ucy5zd2lwZVJpZ2h0IHx8IG9wdGlvbnMuc3dpcGVVcCB8fCBvcHRpb25zLnN3aXBlRG93bik7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIGRldGVjdGluZyBzd2lwZXMgYW5kIGhhdmUgb25lXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRpZFN3aXBlKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKHZhbGlkYXRlU3dpcGUoKSAmJiBoYXNTd2lwZXMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGhhdmUgbWF0Y2hlZCB0aGUgbnVtYmVyIG9mIGZpbmdlcnMgd2UgYXJlIGxvb2tpbmcgZm9yXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlRmluZ2VycygpIHtcbiAgICAgICAgICAgIC8vVGhlIG51bWJlciBvZiBmaW5nZXJzIHdlIHdhbnQgd2VyZSBtYXRjaGVkLCBvciBvbiBkZXNrdG9wIHdlIGlnbm9yZVxuICAgICAgICAgICAgcmV0dXJuICgoZmluZ2VyQ291bnQgPT09IG9wdGlvbnMuZmluZ2VycyB8fCBvcHRpb25zLmZpbmdlcnMgPT09IEFMTF9GSU5HRVJTKSB8fCAhU1VQUE9SVFNfVE9VQ0gpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBoYXZlIGFuIGVuZCBwb2ludCBmb3IgdGhlIHN3aXBlXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlRW5kUG9pbnQoKSB7XG4gICAgICAgICAgICAvL1dlIGhhdmUgYW4gZW5kIHZhbHVlIGZvciB0aGUgZmluZ2VyXG4gICAgICAgICAgICByZXR1cm4gZmluZ2VyRGF0YVswXS5lbmQueCAhPT0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRBUCAvIENMSUNLXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgYSBjbGljayAvIHRhcCBldmVudHMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWRcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaGFzVGFwKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKG9wdGlvbnMudGFwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgYSBkb3VibGUgdGFwIGV2ZW50cyBoYXZlIGJlZW4gcmVnaXN0ZXJlZFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBoYXNEb3VibGVUYXAoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEob3B0aW9ucy5kb3VibGVUYXApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnkgbG9uZyB0YXAgZXZlbnRzIGhhdmUgYmVlbiByZWdpc3RlcmVkXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc0xvbmdUYXAoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEob3B0aW9ucy5sb25nVGFwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgY291bGQgYmUgaW4gdGhlIHByb2Nlc3Mgb2YgYSBkb3VibGUgdGFwIChvbmUgdGFwIGhhcyBvY2N1cnJlZCwgd2UgYXJlIGxpc3RlbmluZyBmb3IgZG91YmxlIHRhcHMsIGFuZCB0aGUgdGhyZXNob2xkIGhhc24ndCBwYXN0LlxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZURvdWJsZVRhcCgpIHtcbiAgICAgICAgICAgIGlmIChkb3VibGVUYXBTdGFydFRpbWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBub3cgPSBnZXRUaW1lU3RhbXAoKTtcbiAgICAgICAgICAgIHJldHVybiAoaGFzRG91YmxlVGFwKCkgJiYgKChub3cgLSBkb3VibGVUYXBTdGFydFRpbWUpIDw9IG9wdGlvbnMuZG91YmxlVGFwVGhyZXNob2xkKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGNvdWxkIGJlIGluIHRoZSBwcm9jZXNzIG9mIGEgZG91YmxlIHRhcCAob25lIHRhcCBoYXMgb2NjdXJyZWQsIHdlIGFyZSBsaXN0ZW5pbmcgZm9yIGRvdWJsZSB0YXBzLCBhbmQgdGhlIHRocmVzaG9sZCBoYXNuJ3QgcGFzdC5cbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW5Eb3VibGVUYXAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVEb3VibGVUYXAoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBoYXZlIGEgdmFsaWQgdGFwXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlVGFwKCkge1xuICAgICAgICAgICAgcmV0dXJuICgoZmluZ2VyQ291bnQgPT09IDEgfHwgIVNVUFBPUlRTX1RPVUNIKSAmJiAoaXNOYU4oZGlzdGFuY2UpIHx8IGRpc3RhbmNlIDwgb3B0aW9ucy50aHJlc2hvbGQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgaGF2ZSBhIHZhbGlkIGxvbmcgdGFwXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlTG9uZ1RhcCgpIHtcbiAgICAgICAgICAgIC8vc2xpZ2h0IHRocmVzaG9sZCBvbiBtb3ZpbmcgZmluZ2VyXG4gICAgICAgICAgICByZXR1cm4gKChkdXJhdGlvbiA+IG9wdGlvbnMubG9uZ1RhcFRocmVzaG9sZCkgJiYgKGRpc3RhbmNlIDwgRE9VQkxFX1RBUF9USFJFU0hPTEQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIGRldGVjdGluZyB0YXBzIGFuZCBoYXZlIG9uZVxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkaWRUYXAoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEodmFsaWRhdGVUYXAoKSAmJiBoYXNUYXAoKSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIGRldGVjdGluZyBkb3VibGUgdGFwcyBhbmQgaGF2ZSBvbmVcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGlkRG91YmxlVGFwKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKHZhbGlkYXRlRG91YmxlVGFwKCkgJiYgaGFzRG91YmxlVGFwKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgZGV0ZWN0aW5nIGxvbmcgdGFwcyBhbmQgaGF2ZSBvbmVcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGlkTG9uZ1RhcCgpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhISh2YWxpZGF0ZUxvbmdUYXAoKSAmJiBoYXNMb25nVGFwKCkpO1xuICAgICAgICB9XG5cblxuXG5cbiAgICAgICAgLy8gTVVMVEkgRklOR0VSIFRPVUNIXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdGFydHMgdHJhY2tpbmcgdGhlIHRpbWUgYmV0d2VlbiAyIGZpbmdlciByZWxlYXNlcywgYW5kIGtlZXBzIHRyYWNrIG9mIGhvdyBtYW55IGZpbmdlcnMgd2UgaW5pdGlhbGx5IGhhZCB1cFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0TXVsdGlGaW5nZXJSZWxlYXNlKCkge1xuICAgICAgICAgICAgcHJldmlvdXNUb3VjaEVuZFRpbWUgPSBnZXRUaW1lU3RhbXAoKTtcbiAgICAgICAgICAgIHByZXZpb3VzVG91Y2hGaW5nZXJDb3VudCA9IGV2ZW50LnRvdWNoZXMubGVuZ3RoICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW5jZWxzIHRoZSB0cmFja2luZyBvZiB0aW1lIGJldHdlZW4gMiBmaW5nZXIgcmVsZWFzZXMsIGFuZCByZXNldHMgY291bnRlcnNcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYW5jZWxNdWx0aUZpbmdlclJlbGVhc2UoKSB7XG4gICAgICAgICAgICBwcmV2aW91c1RvdWNoRW5kVGltZSA9IDA7XG4gICAgICAgICAgICBwcmV2aW91c1RvdWNoRmluZ2VyQ291bnQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyBpZiB3ZSBhcmUgaW4gdGhlIHRocmVzaG9sZCBiZXR3ZWVuIDIgZmluZ2VycyBiZWluZyByZWxlYXNlZFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbk11bHRpRmluZ2VyUmVsZWFzZSgpIHtcblxuICAgICAgICAgICAgdmFyIHdpdGhpblRocmVzaG9sZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAocHJldmlvdXNUb3VjaEVuZFRpbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IGdldFRpbWVTdGFtcCgpIC0gcHJldmlvdXNUb3VjaEVuZFRpbWVcbiAgICAgICAgICAgICAgICBpZiAoZGlmZiA8PSBvcHRpb25zLmZpbmdlclJlbGVhc2VUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgd2l0aGluVGhyZXNob2xkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB3aXRoaW5UaHJlc2hvbGQ7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBnZXRzIGEgZGF0YSBmbGFnIHRvIGluZGljYXRlIHRoYXQgYSB0b3VjaCBpcyBpbiBwcm9ncmVzc1xuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRUb3VjaEluUHJvZ3Jlc3MoKSB7XG4gICAgICAgICAgICAvL3N0cmljdCBlcXVhbGl0eSB0byBlbnN1cmUgb25seSB0cnVlIGFuZCBmYWxzZSBhcmUgcmV0dXJuZWRcbiAgICAgICAgICAgIHJldHVybiAhISgkZWxlbWVudC5kYXRhKFBMVUdJTl9OUyArICdfaW50b3VjaCcpID09PSB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIGEgZGF0YSBmbGFnIHRvIGluZGljYXRlIHRoYXQgYSB0b3VjaCBpcyBpbiBwcm9ncmVzc1xuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbCBUaGUgdmFsdWUgdG8gc2V0IHRoZSBwcm9wZXJ0eSB0b1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldFRvdWNoSW5Qcm9ncmVzcyh2YWwpIHtcblxuICAgICAgICAgICAgLy9BZGQgb3IgcmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBkZXBlbmRpbmcgb24gdG91Y2ggc3RhdHVzXG4gICAgICAgICAgICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgJGVsZW1lbnQuYmluZChNT1ZFX0VWLCB0b3VjaE1vdmUpO1xuICAgICAgICAgICAgICAgICRlbGVtZW50LmJpbmQoRU5EX0VWLCB0b3VjaEVuZCk7XG5cbiAgICAgICAgICAgICAgICAvL3dlIG9ubHkgaGF2ZSBsZWF2ZSBldmVudHMgb24gZGVza3RvcCwgd2UgbWFudWFsbHkgY2FsY3VhdGUgbGVhdmUgb24gdG91Y2ggYXMgaXRzIG5vdCBzdXBwb3J0ZWQgaW4gd2Via2l0XG4gICAgICAgICAgICAgICAgaWYgKExFQVZFX0VWKSB7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LmJpbmQoTEVBVkVfRVYsIHRvdWNoTGVhdmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJGVsZW1lbnQudW5iaW5kKE1PVkVfRVYsIHRvdWNoTW92ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICRlbGVtZW50LnVuYmluZChFTkRfRVYsIHRvdWNoRW5kLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICAvL3dlIG9ubHkgaGF2ZSBsZWF2ZSBldmVudHMgb24gZGVza3RvcCwgd2UgbWFudWFsbHkgY2FsY3VhdGUgbGVhdmUgb24gdG91Y2ggYXMgaXRzIG5vdCBzdXBwb3J0ZWQgaW4gd2Via2l0XG4gICAgICAgICAgICAgICAgaWYgKExFQVZFX0VWKSB7XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnVuYmluZChMRUFWRV9FViwgdG91Y2hMZWF2ZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvL3N0cmljdCBlcXVhbGl0eSB0byBlbnN1cmUgb25seSB0cnVlIGFuZCBmYWxzZSBjYW4gdXBkYXRlIHRoZSB2YWx1ZVxuICAgICAgICAgICAgJGVsZW1lbnQuZGF0YShQTFVHSU5fTlMgKyAnX2ludG91Y2gnLCB2YWwgPT09IHRydWUpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyB0aGUgZmluZ2VyIGRhdGEgZm9yIHRoZSB0b3VjaC9maW5nZXIgaW4gdGhlIGV2ZW50IG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIHtpbnR9IGluZGV4IFRoZSBpbmRleCBpbiB0aGUgYXJyYXkgdG8gc3RvcmUgdGhlIGZpbmdlciBkYXRhICh1c3VhbGx5IHRoZSBvcmRlciB0aGUgZmluZ2VycyB3ZXJlIHByZXNzZWQpXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBldnQgVGhlIGV2ZW50IG9iamVjdCBjb250YWluaW5nIGZpbmdlciBkYXRhXG4gICAgICAgICAqIEByZXR1cm4gZmluZ2VyIGRhdGEgb2JqZWN0XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlRmluZ2VyRGF0YShpbmRleCwgZXZ0KSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBldnQuaWRlbnRpZmllciAhPT0gdW5kZWZpbmVkID8gZXZ0LmlkZW50aWZpZXIgOiAwO1xuXG4gICAgICAgICAgICBmaW5nZXJEYXRhW2luZGV4XS5pZGVudGlmaWVyID0gaWQ7XG4gICAgICAgICAgICBmaW5nZXJEYXRhW2luZGV4XS5zdGFydC54ID0gZmluZ2VyRGF0YVtpbmRleF0uZW5kLnggPSBldnQucGFnZVggfHwgZXZ0LmNsaWVudFg7XG4gICAgICAgICAgICBmaW5nZXJEYXRhW2luZGV4XS5zdGFydC55ID0gZmluZ2VyRGF0YVtpbmRleF0uZW5kLnkgPSBldnQucGFnZVkgfHwgZXZ0LmNsaWVudFk7XG5cbiAgICAgICAgICAgIHJldHVybiBmaW5nZXJEYXRhW2luZGV4XTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGVzIHRoZSBmaW5nZXIgZGF0YSBmb3IgYSBwYXJ0aWN1bGFyIGV2ZW50IG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZXZ0IFRoZSBldmVudCBvYmplY3QgY29udGFpbmluZyB0aGUgdG91Y2gvZmluZ2VyIGRhdGEgdG8gdXBhZHRlXG4gICAgICAgICAqIEByZXR1cm4gYSBmaW5nZXIgZGF0YSBvYmplY3QuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlRmluZ2VyRGF0YShldnQpIHtcblxuICAgICAgICAgICAgdmFyIGlkID0gZXZ0LmlkZW50aWZpZXIgIT09IHVuZGVmaW5lZCA/IGV2dC5pZGVudGlmaWVyIDogMDtcbiAgICAgICAgICAgIHZhciBmID0gZ2V0RmluZ2VyRGF0YShpZCk7XG5cbiAgICAgICAgICAgIGYuZW5kLnggPSBldnQucGFnZVggfHwgZXZ0LmNsaWVudFg7XG4gICAgICAgICAgICBmLmVuZC55ID0gZXZ0LnBhZ2VZIHx8IGV2dC5jbGllbnRZO1xuXG4gICAgICAgICAgICByZXR1cm4gZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgZmluZ2VyIGRhdGEgb2JqZWN0IGJ5IGl0cyBldmVudCBJRC5cbiAgICAgICAgICogRWFjaCB0b3VjaCBldmVudCBoYXMgYW4gaWRlbnRpZmllciBwcm9wZXJ0eSwgd2hpY2ggaXMgdXNlZFxuICAgICAgICAgKiB0byB0cmFjayByZXBlYXQgdG91Y2hlc1xuICAgICAgICAgKiBAcGFyYW0ge2ludH0gaWQgVGhlIHVuaXF1ZSBpZCBvZiB0aGUgZmluZ2VyIGluIHRoZSBzZXF1ZW5jZSBvZiB0b3VjaCBldmVudHMuXG4gICAgICAgICAqIEByZXR1cm4gYSBmaW5nZXIgZGF0YSBvYmplY3QuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0RmluZ2VyRGF0YShpZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaW5nZXJEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmdlckRhdGFbaV0uaWRlbnRpZmllciA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmluZ2VyRGF0YVtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRzIGFsbCB0aGUgZmluZ2VyIG9uamVjdHMgYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgZmluZ2VyIGRhdGFcbiAgICAgICAgICogQHJldHVybiBBcnJheSBvZiBmaW5nZXIgb2JqZWN0c1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUFsbEZpbmdlckRhdGEoKSB7XG4gICAgICAgICAgICB2YXIgZmluZ2VyRGF0YSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gNTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZmluZ2VyRGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVuZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcjogMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmluZ2VyRGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBtYXhpbXVtIGRpc3RhbmNlIHN3aXBlZCBpbiB0aGUgZ2l2ZW4gZGlyZWN0aW9uLlxuICAgICAgICAgKiBJZiB0aGUgbmV3IHZhbHVlIGlzIGxvd2VyIHRoYW4gdGhlIGN1cnJlbnQgdmFsdWUsIHRoZSBtYXggdmFsdWUgaXMgbm90IGNoYW5nZWQuXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgZGlyZWN0aW9uIFRoZSBkaXJlY3Rpb24gb2YgdGhlIHN3aXBlXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSAgZGlzdGFuY2UgVGhlIGRpc3RhbmNlIG9mIHRoZSBzd2lwZVxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHNldE1heERpc3RhbmNlKGRpcmVjdGlvbiwgZGlzdGFuY2UpIHtcbiAgICAgICAgICAgIGRpc3RhbmNlID0gTWF0aC5tYXgoZGlzdGFuY2UsIGdldE1heERpc3RhbmNlKGRpcmVjdGlvbikpO1xuICAgICAgICAgICAgbWF4aW11bXNNYXBbZGlyZWN0aW9uXS5kaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGdldHMgdGhlIG1heGltdW0gZGlzdGFuY2Ugc3dpcGVkIGluIHRoZSBnaXZlbiBkaXJlY3Rpb24uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSAgZGlyZWN0aW9uIFRoZSBkaXJlY3Rpb24gb2YgdGhlIHN3aXBlXG4gICAgICAgICAqIEByZXR1cm4gaW50ICBUaGUgZGlzdGFuY2Ugb2YgdGhlIHN3aXBlXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0TWF4RGlzdGFuY2UoZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAobWF4aW11bXNNYXBbZGlyZWN0aW9uXSkgcmV0dXJuIG1heGltdW1zTWFwW2RpcmVjdGlvbl0uZGlzdGFuY2U7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0cyBhIG1hcCBvZiBkaXJlY3Rpb25zIHRvIG1heGltdW0gc3dpcGVkIHZhbHVlcy5cbiAgICAgICAgICogQHJldHVybiBPYmplY3QgQSBkaWN0aW9uYXJ5IG9mIG1heGltdW0gdmFsdWVzLCBpbmRleGVkIGJ5IGRpcmVjdGlvbi5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVNYXhpbXVtc0RhdGEoKSB7XG4gICAgICAgICAgICB2YXIgbWF4RGF0YSA9IHt9O1xuICAgICAgICAgICAgbWF4RGF0YVtMRUZUXSA9IGNyZWF0ZU1heGltdW1WTyhMRUZUKTtcbiAgICAgICAgICAgIG1heERhdGFbUklHSFRdID0gY3JlYXRlTWF4aW11bVZPKFJJR0hUKTtcbiAgICAgICAgICAgIG1heERhdGFbVVBdID0gY3JlYXRlTWF4aW11bVZPKFVQKTtcbiAgICAgICAgICAgIG1heERhdGFbRE9XTl0gPSBjcmVhdGVNYXhpbXVtVk8oRE9XTik7XG5cbiAgICAgICAgICAgIHJldHVybiBtYXhEYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBtYXAgbWF4aW11bSBzd2lwZWQgdmFsdWVzIGZvciBhIGdpdmVuIHN3aXBlIGRpcmVjdGlvblxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gVGhlIGRpcmVjdGlvbiB0aGF0IHRoZXNlIHZhbHVlcyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxuICAgICAgICAgKiBAcmV0dXJuIE9iamVjdCBNYXhpbXVtIHZhbHVlc1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU1heGltdW1WTyhkaXIpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkaXIsXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gTUFUSFMgLyBVVElMU1xuICAgICAgICAvL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGR1cmF0aW9uIG9mIHRoZSBzd2lwZVxuICAgICAgICAgKiBAcmV0dXJuIGludFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUR1cmF0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIDIgdG91Y2hlcyAocGluY2gpXG4gICAgICAgICAqIEBwYXJhbSB7cG9pbnR9IHN0YXJ0UG9pbnQgQSBwb2ludCBvYmplY3QgY29udGFpbmluZyB4IGFuZCB5IGNvLW9yZGluYXRlc1xuICAgICAgICAgKiBAcGFyYW0ge3BvaW50fSBlbmRQb2ludCBBIHBvaW50IG9iamVjdCBjb250YWluaW5nIHggYW5kIHkgY28tb3JkaW5hdGVzXG4gICAgICAgICAqIEByZXR1cm4gaW50O1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVRvdWNoZXNEaXN0YW5jZShzdGFydFBvaW50LCBlbmRQb2ludCkge1xuICAgICAgICAgICAgdmFyIGRpZmZYID0gTWF0aC5hYnMoc3RhcnRQb2ludC54IC0gZW5kUG9pbnQueCk7XG4gICAgICAgICAgICB2YXIgZGlmZlkgPSBNYXRoLmFicyhzdGFydFBvaW50LnkgLSBlbmRQb2ludC55KTtcblxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoTWF0aC5zcXJ0KGRpZmZYICogZGlmZlggKyBkaWZmWSAqIGRpZmZZKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSB6b29tIGZhY3RvciBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIGRpc3RhbmNlc1xuICAgICAgICAgKiBAcGFyYW0ge2ludH0gc3RhcnREaXN0YW5jZSBEaXN0YW5jZSAoYmV0d2VlbiAyIGZpbmdlcnMpIHRoZSB1c2VyIHN0YXJ0ZWQgcGluY2hpbmcgYXRcbiAgICAgICAgICogQHBhcmFtIHtpbnR9IGVuZERpc3RhbmNlIERpc3RhbmNlIChiZXR3ZWVuIDIgZmluZ2VycykgdGhlIHVzZXIgZW5kZWQgcGluY2hpbmcgYXRcbiAgICAgICAgICogQHJldHVybiBmbG9hdCBUaGUgem9vbSB2YWx1ZSBmcm9tIDAgdG8gMS5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVQaW5jaFpvb20oc3RhcnREaXN0YW5jZSwgZW5kRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHZhciBwZXJjZW50ID0gKGVuZERpc3RhbmNlIC8gc3RhcnREaXN0YW5jZSkgKiAxO1xuICAgICAgICAgICAgcmV0dXJuIHBlcmNlbnQudG9GaXhlZCgyKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIHBpbmNoIGRpcmVjdGlvbiwgZWl0aGVyIElOIG9yIE9VVCBmb3IgdGhlIGdpdmVuIHBvaW50c1xuICAgICAgICAgKiBAcmV0dXJuIHN0cmluZyBFaXRoZXIge0BsaW5rICQuZm4uc3dpcGUuZGlyZWN0aW9ucy5JTn0gb3Ige0BsaW5rICQuZm4uc3dpcGUuZGlyZWN0aW9ucy5PVVR9XG4gICAgICAgICAqIEBzZWUgJC5mbi5zd2lwZS5kaXJlY3Rpb25zXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlUGluY2hEaXJlY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAocGluY2hab29tIDwgMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBPVVQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgbGVuZ3RoIC8gZGlzdGFuY2Ugb2YgdGhlIHN3aXBlXG4gICAgICAgICAqIEBwYXJhbSB7cG9pbnR9IHN0YXJ0UG9pbnQgQSBwb2ludCBvYmplY3QgY29udGFpbmluZyB4IGFuZCB5IGNvLW9yZGluYXRlc1xuICAgICAgICAgKiBAcGFyYW0ge3BvaW50fSBlbmRQb2ludCBBIHBvaW50IG9iamVjdCBjb250YWluaW5nIHggYW5kIHkgY28tb3JkaW5hdGVzXG4gICAgICAgICAqIEByZXR1cm4gaW50XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlRGlzdGFuY2Uoc3RhcnRQb2ludCwgZW5kUG9pbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKE1hdGguc3FydChNYXRoLnBvdyhlbmRQb2ludC54IC0gc3RhcnRQb2ludC54LCAyKSArIE1hdGgucG93KGVuZFBvaW50LnkgLSBzdGFydFBvaW50LnksIDIpKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSBhbmdsZSBvZiB0aGUgc3dpcGVcbiAgICAgICAgICogQHBhcmFtIHtwb2ludH0gc3RhcnRQb2ludCBBIHBvaW50IG9iamVjdCBjb250YWluaW5nIHggYW5kIHkgY28tb3JkaW5hdGVzXG4gICAgICAgICAqIEBwYXJhbSB7cG9pbnR9IGVuZFBvaW50IEEgcG9pbnQgb2JqZWN0IGNvbnRhaW5pbmcgeCBhbmQgeSBjby1vcmRpbmF0ZXNcbiAgICAgICAgICogQHJldHVybiBpbnRcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVBbmdsZShzdGFydFBvaW50LCBlbmRQb2ludCkge1xuICAgICAgICAgICAgdmFyIHggPSBzdGFydFBvaW50LnggLSBlbmRQb2ludC54O1xuICAgICAgICAgICAgdmFyIHkgPSBlbmRQb2ludC55IC0gc3RhcnRQb2ludC55O1xuICAgICAgICAgICAgdmFyIHIgPSBNYXRoLmF0YW4yKHksIHgpOyAvL3JhZGlhbnNcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IE1hdGgucm91bmQociAqIDE4MCAvIE1hdGguUEkpOyAvL2RlZ3JlZXNcblxuICAgICAgICAgICAgLy9lbnN1cmUgdmFsdWUgaXMgcG9zaXRpdmVcbiAgICAgICAgICAgIGlmIChhbmdsZSA8IDApIHtcbiAgICAgICAgICAgICAgICBhbmdsZSA9IDM2MCAtIE1hdGguYWJzKGFuZ2xlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFuZ2xlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgZGlyZWN0aW9uIG9mIHRoZSBzd2lwZVxuICAgICAgICAgKiBUaGlzIHdpbGwgYWxzbyBjYWxsIGNhbGN1bGF0ZUFuZ2xlIHRvIGdldCB0aGUgbGF0ZXN0IGFuZ2xlIG9mIHN3aXBlXG4gICAgICAgICAqIEBwYXJhbSB7cG9pbnR9IHN0YXJ0UG9pbnQgQSBwb2ludCBvYmplY3QgY29udGFpbmluZyB4IGFuZCB5IGNvLW9yZGluYXRlc1xuICAgICAgICAgKiBAcGFyYW0ge3BvaW50fSBlbmRQb2ludCBBIHBvaW50IG9iamVjdCBjb250YWluaW5nIHggYW5kIHkgY28tb3JkaW5hdGVzXG4gICAgICAgICAqIEByZXR1cm4gc3RyaW5nIEVpdGhlciB7QGxpbmsgJC5mbi5zd2lwZS5kaXJlY3Rpb25zLkxFRlR9IC8ge0BsaW5rICQuZm4uc3dpcGUuZGlyZWN0aW9ucy5SSUdIVH0gLyB7QGxpbmsgJC5mbi5zd2lwZS5kaXJlY3Rpb25zLkRPV059IC8ge0BsaW5rICQuZm4uc3dpcGUuZGlyZWN0aW9ucy5VUH1cbiAgICAgICAgICogQHNlZSAkLmZuLnN3aXBlLmRpcmVjdGlvbnNcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVEaXJlY3Rpb24oc3RhcnRQb2ludCwgZW5kUG9pbnQpIHtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IGNhbGN1bGF0ZUFuZ2xlKHN0YXJ0UG9pbnQsIGVuZFBvaW50KTtcblxuICAgICAgICAgICAgaWYgKChhbmdsZSA8PSA0NSkgJiYgKGFuZ2xlID49IDApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIExFRlQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChhbmdsZSA8PSAzNjApICYmIChhbmdsZSA+PSAzMTUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIExFRlQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChhbmdsZSA+PSAxMzUpICYmIChhbmdsZSA8PSAyMjUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJJR0hUO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoYW5nbGUgPiA0NSkgJiYgKGFuZ2xlIDwgMTM1KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBET1dOO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVVA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgTVMgdGltZSBzdGFtcCBvZiB0aGUgY3VycmVudCB0aW1lXG4gICAgICAgICAqIEByZXR1cm4gaW50XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0VGltZVN0YW1wKCkge1xuICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gbm93LmdldFRpbWUoKTtcbiAgICAgICAgfVxuXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIGJvdW5kcyBvYmplY3Qgd2l0aCBsZWZ0LCByaWdodCwgdG9wIGFuZCBib3R0b20gcHJvcGVydGllcyBmb3IgdGhlIGVsZW1lbnQgc3BlY2lmaWVkLlxuICAgICAgICAgKiBAcGFyYW0ge0RvbU5vZGV9IFRoZSBET00gbm9kZSB0byBnZXQgdGhlIGJvdW5kcyBmb3IuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRib3VuZHMoZWwpIHtcbiAgICAgICAgICAgIGVsID0gJChlbCk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gZWwub2Zmc2V0KCk7XG5cbiAgICAgICAgICAgIHZhciBib3VuZHMgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IG9mZnNldC5sZWZ0ICsgZWwub3V0ZXJXaWR0aCgpLFxuICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0LnRvcCxcbiAgICAgICAgICAgICAgICBib3R0b206IG9mZnNldC50b3AgKyBlbC5vdXRlckhlaWdodCgpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBib3VuZHM7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgaWYgdGhlIHBvaW50IG9iamVjdCBpcyBpbiB0aGUgYm91bmRzIG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHBvaW50IEEgcG9pbnQgb2JqZWN0LlxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gcG9pbnQueCBUaGUgeCB2YWx1ZSBvZiB0aGUgcG9pbnQuXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBwb2ludC55IFRoZSB4IHZhbHVlIG9mIHRoZSBwb2ludC5cbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGJvdW5kcyBUaGUgYm91bmRzIG9iamVjdCB0byB0ZXN0XG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBib3VuZHMubGVmdCBUaGUgbGVmdG1vc3QgdmFsdWVcbiAgICAgICAgICogQHBhcmFtIHtpbnR9IGJvdW5kcy5yaWdodCBUaGUgcmlnaHR0bW9zdCB2YWx1ZVxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gYm91bmRzLnRvcCBUaGUgdG9wbW9zdCB2YWx1ZVxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gYm91bmRzLmJvdHRvbSBUaGUgYm90dG9tbW9zdCB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaXNJbkJvdW5kcyhwb2ludCwgYm91bmRzKSB7XG4gICAgICAgICAgICByZXR1cm4gKHBvaW50LnggPiBib3VuZHMubGVmdCAmJiBwb2ludC54IDwgYm91bmRzLnJpZ2h0ICYmIHBvaW50LnkgPiBib3VuZHMudG9wICYmIHBvaW50LnkgPCBib3VuZHMuYm90dG9tKTtcbiAgICAgICAgfTtcblxuXG4gICAgfVxufSkpOyIsIi8qXG4gIE1hcmt1cC5qcyB2MS41LjIwOiBodHRwOi8vZ2l0aHViLmNvbS9hZGFtbWFyay9NYXJrdXAuanNcbiAgTUlUIExpY2Vuc2VcbiAgKGMpIDIwMTEgLSAyMDE0IEFkYW0gTWFya1xuKi9cbnZhciBNYXJrID0ge1xuICAgIC8vIFRlbXBsYXRlcyB0byBpbmNsdWRlLCBieSBuYW1lLiBBIHRlbXBsYXRlIGlzIGEgc3RyaW5nLlxuICAgIGluY2x1ZGVzOiB7fSxcblxuICAgIC8vIEdsb2JhbCB2YXJpYWJsZXMsIGJ5IG5hbWUuIEdsb2JhbCB2YXJpYWJsZXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgY29udGV4dCB2YXJpYWJsZXMuXG4gICAgZ2xvYmFsczoge30sXG5cbiAgICAvLyBUaGUgZGVsaW1pdGVyIHRvIHVzZSBpbiBwaXBlIGV4cHJlc3Npb25zLCBlLmcuIHt7aWYgY29sb3J8bGlrZT5yZWR9fS5cbiAgICBkZWxpbWl0ZXI6IFwiPlwiLFxuXG4gICAgLy8gQ29sbGFwc2Ugd2hpdGUgc3BhY2UgYmV0d2VlbiBIVE1MIGVsZW1lbnRzIGluIHRoZSByZXN1bHRpbmcgc3RyaW5nLlxuICAgIGNvbXBhY3Q6IGZhbHNlLFxuXG4gICAgLy8gU2hhbGxvdy1jb3B5IGFuIG9iamVjdC5cbiAgICBfY29weTogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgYiA9IGIgfHwgW107XG5cbiAgICAgICAgZm9yICh2YXIgaSBpbiBhKSB7XG4gICAgICAgICAgICBiW2ldID0gYVtpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBiO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIHZhbHVlIG9mIGEgbnVtYmVyIG9yIHNpemUgb2YgYW4gYXJyYXkuIFRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gZm9yIHNldmVyYWwgcGlwZXMuXG4gICAgX3NpemU6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiBhIGluc3RhbmNlb2YgQXJyYXkgPyBhLmxlbmd0aCA6IChhIHx8IDApO1xuICAgIH0sXG5cbiAgICAvLyBUaGlzIG9iamVjdCByZXByZXNlbnRzIGFuIGl0ZXJhdGlvbi4gSXQgaGFzIGFuIGluZGV4IGFuZCBsZW5ndGguXG4gICAgX2l0ZXI6IGZ1bmN0aW9uIChpZHgsIHNpemUpIHtcbiAgICAgICAgdGhpcy5pZHggPSBpZHg7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gc2l6ZTtcbiAgICAgICAgdGhpcy5zaWduID0gXCIjXCI7XG5cbiAgICAgICAgLy8gUHJpbnQgdGhlIGluZGV4IGlmIFwiI1wiIG9yIHRoZSBjb3VudCBpZiBcIiMjXCIuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pZHggKyB0aGlzLnNpZ24ubGVuZ3RoIC0gMTtcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgLy8gUGFzcyBhIHZhbHVlIHRocm91Z2ggYSBzZXJpZXMgb2YgcGlwZSBleHByZXNzaW9ucywgZS5nLiBfcGlwZSgxMjMsIFtcImFkZD4xMFwiLFwidGltZXM+NVwiXSkuXG4gICAgX3BpcGU6IGZ1bmN0aW9uICh2YWwsIGV4cHJlc3Npb25zKSB7XG4gICAgICAgIHZhciBleHByZXNzaW9uLCBwYXJ0cywgZm4sIHJlc3VsdDtcblxuICAgICAgICAvLyBJZiB3ZSBoYXZlIGV4cHJlc3Npb25zLCBwdWxsIG91dCB0aGUgZmlyc3Qgb25lLCBlLmcuIFwiYWRkPjEwXCIuXG4gICAgICAgIGlmICgoZXhwcmVzc2lvbiA9IGV4cHJlc3Npb25zLnNoaWZ0KCkpKSB7XG5cbiAgICAgICAgICAgIC8vIFNwbGl0IHRoZSBleHByZXNzaW9uIGludG8gaXRzIGNvbXBvbmVudCBwYXJ0cywgZS5nLiBbXCJhZGRcIiwgXCIxMFwiXS5cbiAgICAgICAgICAgIHBhcnRzID0gZXhwcmVzc2lvbi5zcGxpdCh0aGlzLmRlbGltaXRlcik7XG5cbiAgICAgICAgICAgIC8vIFB1bGwgb3V0IHRoZSBmdW5jdGlvbiBuYW1lLCBlLmcuIFwiYWRkXCIuXG4gICAgICAgICAgICBmbiA9IHBhcnRzLnNoaWZ0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFJ1biB0aGUgZnVuY3Rpb24sIGUuZy4gYWRkKDEyMywgMTApIC4uLlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IE1hcmsucGlwZXNbZm5dLmFwcGx5KG51bGwsIFt2YWxdLmNvbmNhdChwYXJ0cykpO1xuXG4gICAgICAgICAgICAgICAgLy8gLi4uIHRoZW4gcGlwZSBhZ2FpbiB3aXRoIHJlbWFpbmluZyBleHByZXNzaW9ucy5cbiAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLl9waXBlKHJlc3VsdCwgZXhwcmVzc2lvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgcGlwZWQgdmFsdWUuXG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcblxuICAgIC8vIFRPRE8gZG9jXG4gICAgX2V2YWw6IGZ1bmN0aW9uIChjb250ZXh0LCBmaWx0ZXJzLCBjaGlsZCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fcGlwZShjb250ZXh0LCBmaWx0ZXJzKSxcbiAgICAgICAgICAgIGN0eCA9IHJlc3VsdCxcbiAgICAgICAgICAgIGkgPSAtMSxcbiAgICAgICAgICAgIGosXG4gICAgICAgICAgICBvcHRzO1xuXG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgICAgIGogPSBjdHgubGVuZ3RoO1xuXG4gICAgICAgICAgICB3aGlsZSAoKytpIDwgaikge1xuICAgICAgICAgICAgICAgIG9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXI6IG5ldyB0aGlzLl9pdGVyKGksIGopXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gY2hpbGQgPyBNYXJrLnVwKGNoaWxkLCBjdHhbaV0sIG9wdHMpIDogY3R4W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gTWFyay51cChjaGlsZCwgY3R4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIC8vIFByb2Nlc3MgdGhlIGNvbnRlbnRzIG9mIGFuIElGIG9yIElGL0VMU0UgYmxvY2suXG4gICAgX3Rlc3Q6IGZ1bmN0aW9uIChib29sLCBjaGlsZCwgY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBQcm9jZXNzIHRoZSBjaGlsZCBzdHJpbmcsIHRoZW4gc3BsaXQgaXQgaW50byB0aGUgSUYgYW5kIEVMU0UgcGFydHMuXG4gICAgICAgIHZhciBzdHIgPSBNYXJrLnVwKGNoaWxkLCBjb250ZXh0LCBvcHRpb25zKS5zcGxpdCgvXFx7XFx7XFxzKmVsc2VcXHMqXFx9XFx9Lyk7XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBJRiBvciBFTFNFIHBhcnQuIElmIG5vIEVMU0UsIHJldHVybiBhbiBlbXB0eSBzdHJpbmcuXG4gICAgICAgIHJldHVybiAoYm9vbCA9PT0gZmFsc2UgPyBzdHJbMV0gOiBzdHJbMF0pIHx8IFwiXCI7XG4gICAgfSxcblxuICAgIC8vIERldGVybWluZSB0aGUgZXh0ZW50IG9mIGEgYmxvY2sgZXhwcmVzc2lvbiwgZS5nLiBcInt7Zm9vfX0uLi57ey9mb299fVwiXG4gICAgX2JyaWRnZTogZnVuY3Rpb24gKHRwbCwgdGtuKSB7XG4gICAgICAgIGlmICh0a24gPT0gXCIuXCIpXG4gICAgICAgICAgICB0a24gPSBcIlxcXFwuXCI7ICAgIC8vIHJlZ2V4LXNhZmVcbiAgICAgICAgdmFyIGV4cCA9IFwie3tcXFxccypcIiArIHRrbiArIFwiKFteL31dK1xcXFx3Kik/fX18e3svXCIgKyB0a24gKyBcIlxcXFxzKn19XCIsXG4gICAgICAgICAgICByZSA9IG5ldyBSZWdFeHAoZXhwLCBcImdcIiksXG4gICAgICAgICAgICB0YWdzID0gdHBsLm1hdGNoKHJlKSB8fCBbXSxcbiAgICAgICAgICAgIHQsXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgYSA9IDAsXG4gICAgICAgICAgICBiID0gMCxcbiAgICAgICAgICAgIGMgPSAtMSxcbiAgICAgICAgICAgIGQgPSAwO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0ID0gaTtcbiAgICAgICAgICAgIGMgPSB0cGwuaW5kZXhPZih0YWdzW3RdLCBjICsgMSk7XG5cbiAgICAgICAgICAgIGlmICh0YWdzW3RdLmluZGV4T2YoXCJ7ey9cIikgPiAtMSkge1xuICAgICAgICAgICAgICAgIGIrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGErKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGEgPSB0cGwuaW5kZXhPZih0YWdzWzBdKTtcbiAgICAgICAgYiA9IGEgKyB0YWdzWzBdLmxlbmd0aDtcbiAgICAgICAgZCA9IGMgKyB0YWdzW3RdLmxlbmd0aDtcblxuICAgICAgICAvLyBSZXR1cm4gdGhlIGJsb2NrLCBlLmcuIFwie3tmb299fWJhcnt7L2Zvb319XCIgYW5kIGl0cyBjaGlsZCwgZS5nLiBcImJhclwiLlxuICAgICAgICByZXR1cm4gW3RwbC5zdWJzdHJpbmcoYSwgZCksIHRwbC5zdWJzdHJpbmcoYiwgYyldO1xuICAgIH1cbn07XG5cbi8vIEluamVjdCBhIHRlbXBsYXRlIHN0cmluZyB3aXRoIGNvbnRleHR1YWwgZGF0YSBhbmQgcmV0dXJuIGEgbmV3IHN0cmluZy5cbk1hcmsudXAgPSBmdW5jdGlvbiAodGVtcGxhdGUsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCB7fTtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIC8vIE1hdGNoIGFsbCB0YWdzIGxpa2UgXCJ7ey4uLn19XCIuXG4gICAgdmFyIHJlID0gL1xce1xceyguKz8pXFx9XFx9L2csXG4gICAgICAgIC8vIEFsbCB0YWdzIGluIHRoZSB0ZW1wbGF0ZS5cbiAgICAgICAgdGFncyA9IHRlbXBsYXRlLm1hdGNoKHJlKSB8fCBbXSxcbiAgICAgICAgLy8gVGhlIHRhZyBiZWluZyBldmFsdWF0ZWQsIGUuZy4gXCJ7e2hhbXN0ZXJ8ZGFuY2V9fVwiLlxuICAgICAgICB0YWcsXG4gICAgICAgIC8vIFRoZSBleHByZXNzaW9uIHRvIGV2YWx1YXRlIGluc2lkZSB0aGUgdGFnLCBlLmcuIFwiaGFtc3RlcnxkYW5jZVwiLlxuICAgICAgICBwcm9wLFxuICAgICAgICAvLyBUaGUgdG9rZW4gaXRzZWxmLCBlLmcuIFwiaGFtc3RlclwiLlxuICAgICAgICB0b2tlbixcbiAgICAgICAgLy8gQW4gYXJyYXkgb2YgcGlwZSBleHByZXNzaW9ucywgZS5nLiBbXCJtb3JlPjFcIiwgXCJsZXNzPjJcIl0uXG4gICAgICAgIGZpbHRlcnMgPSBbXSxcbiAgICAgICAgLy8gRG9lcyB0aGUgdGFnIGNsb3NlIGl0c2VsZj8gZS5nLiBcInt7c3R1ZmYvfX1cIi5cbiAgICAgICAgc2VsZnksXG4gICAgICAgIC8vIElzIHRoZSB0YWcgYW4gXCJpZlwiIHN0YXRlbWVudD9cbiAgICAgICAgdGVzdHksXG4gICAgICAgIC8vIFRoZSBjb250ZW50cyBvZiBhIGJsb2NrIHRhZywgZS5nLiBcInt7YWF9fWJie3svYWF9fVwiIC0+IFwiYmJcIi5cbiAgICAgICAgY2hpbGQsXG4gICAgICAgIC8vIFRoZSByZXN1bHRpbmcgc3RyaW5nLlxuICAgICAgICByZXN1bHQsXG4gICAgICAgIC8vIFRoZSBnbG9iYWwgdmFyaWFibGUgYmVpbmcgZXZhbHVhdGVkLCBvciB1bmRlZmluZWQuXG4gICAgICAgIGdsb2JhbCxcbiAgICAgICAgLy8gVGhlIGluY2x1ZGVkIHRlbXBsYXRlIGJlaW5nIGV2YWx1YXRlZCwgb3IgdW5kZWZpbmVkLlxuICAgICAgICBpbmNsdWRlLFxuICAgICAgICAvLyBBIHBsYWNlaG9sZGVyIHZhcmlhYmxlLlxuICAgICAgICBjdHgsXG4gICAgICAgIC8vIEl0ZXJhdG9ycy5cbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGogPSAwO1xuXG4gICAgLy8gU2V0IGN1c3RvbSBwaXBlcywgaWYgcHJvdmlkZWQuXG4gICAgaWYgKG9wdGlvbnMucGlwZXMpIHtcbiAgICAgICAgdGhpcy5fY29weShvcHRpb25zLnBpcGVzLCB0aGlzLnBpcGVzKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGVtcGxhdGVzIHRvIGluY2x1ZGUsIGlmIHByb3ZpZGVkLlxuICAgIGlmIChvcHRpb25zLmluY2x1ZGVzKSB7XG4gICAgICAgIHRoaXMuX2NvcHkob3B0aW9ucy5pbmNsdWRlcywgdGhpcy5pbmNsdWRlcyk7XG4gICAgfVxuXG4gICAgLy8gU2V0IGdsb2JhbCB2YXJpYWJsZXMsIGlmIHByb3ZpZGVkLlxuICAgIGlmIChvcHRpb25zLmdsb2JhbHMpIHtcbiAgICAgICAgdGhpcy5fY29weShvcHRpb25zLmdsb2JhbHMsIHRoaXMuZ2xvYmFscyk7XG4gICAgfVxuXG4gICAgLy8gT3B0aW9uYWxseSBvdmVycmlkZSB0aGUgZGVsaW1pdGVyLlxuICAgIGlmIChvcHRpb25zLmRlbGltaXRlcikge1xuICAgICAgICB0aGlzLmRlbGltaXRlciA9IG9wdGlvbnMuZGVsaW1pdGVyO1xuICAgIH1cblxuICAgIC8vIE9wdGlvbmFsbHkgY29sbGFwc2Ugd2hpdGUgc3BhY2UuXG4gICAgaWYgKG9wdGlvbnMuY29tcGFjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuY29tcGFjdCA9IG9wdGlvbnMuY29tcGFjdDtcbiAgICB9XG5cbiAgICAvLyBMb29wIHRocm91Z2ggdGFncywgZS5nLiB7e2F9fSwge3tifX0sIHt7Y319LCB7ey9jfX0uXG4gICAgd2hpbGUgKCh0YWcgPSB0YWdzW2krK10pKSB7XG4gICAgICAgIHJlc3VsdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY2hpbGQgPSBcIlwiO1xuICAgICAgICBzZWxmeSA9IHRhZy5pbmRleE9mKFwiL319XCIpID4gLTE7XG4gICAgICAgIHByb3AgPSB0YWcuc3Vic3RyKDIsIHRhZy5sZW5ndGggLSAoc2VsZnkgPyA1IDogNCkpO1xuICAgICAgICBwcm9wID0gcHJvcC5yZXBsYWNlKC9gKC4rPylgL2csIGZ1bmN0aW9uIChzLCBwMSkge1xuICAgICAgICAgICAgcmV0dXJuIE1hcmsudXAoXCJ7e1wiICsgcDEgKyBcIn19XCIsIGNvbnRleHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGVzdHkgPSBwcm9wLnRyaW0oKS5pbmRleE9mKFwiaWYgXCIpID09PSAwO1xuICAgICAgICBmaWx0ZXJzID0gcHJvcC5zcGxpdChcInxcIik7XG4gICAgICAgIGZpbHRlcnMuc2hpZnQoKTsgLy8gaW5zdGVhZCBvZiBzcGxpY2UoMSlcbiAgICAgICAgcHJvcCA9IHByb3AucmVwbGFjZSgvXlxccyppZi8sIFwiXCIpLnNwbGl0KFwifFwiKS5zaGlmdCgpLnRyaW0oKTtcbiAgICAgICAgdG9rZW4gPSB0ZXN0eSA/IFwiaWZcIiA6IHByb3Auc3BsaXQoXCJ8XCIpWzBdO1xuICAgICAgICBjdHggPSBjb250ZXh0W3Byb3BdO1xuXG4gICAgICAgIC8vIElmIGFuIFwiaWZcIiBzdGF0ZW1lbnQgd2l0aG91dCBmaWx0ZXJzLCBhc3N1bWUgXCJ7e2lmIGZvb3xub3RlbXB0eX19XCJcbiAgICAgICAgaWYgKHRlc3R5ICYmICFmaWx0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgZmlsdGVycyA9IFtcIm5vdGVtcHR5XCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG9lcyB0aGUgdGFnIGhhdmUgYSBjb3JyZXNwb25kaW5nIGNsb3NpbmcgdGFnPyBJZiBzbywgZmluZCBpdCBhbmQgbW92ZSB0aGUgY3Vyc29yLlxuICAgICAgICBpZiAoIXNlbGZ5ICYmIHRlbXBsYXRlLmluZGV4T2YoXCJ7ey9cIiArIHRva2VuKSA+IC0xKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9icmlkZ2UodGVtcGxhdGUsIHRva2VuKTtcbiAgICAgICAgICAgIHRhZyA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgIGNoaWxkID0gcmVzdWx0WzFdO1xuICAgICAgICAgICAgaSArPSB0YWcubWF0Y2gocmUpLmxlbmd0aCAtIDE7IC8vIGZhc3QgZm9yd2FyZFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2tpcCBcImVsc2VcIiB0YWdzLiBUaGVzZSBhcmUgcHVsbGVkIG91dCBpbiBfdGVzdCgpLlxuICAgICAgICBpZiAoL15cXHtcXHtcXHMqZWxzZVxccypcXH1cXH0kLy50ZXN0KHRhZykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhIGdsb2JhbCB2YXJpYWJsZS5cbiAgICAgICAgZWxzZSBpZiAoKGdsb2JhbCA9IHRoaXMuZ2xvYmFsc1twcm9wXSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZXZhbChnbG9iYWwsIGZpbHRlcnMsIGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW4gaW5jbHVkZWQgdGVtcGxhdGUuXG4gICAgICAgIGVsc2UgaWYgKChpbmNsdWRlID0gdGhpcy5pbmNsdWRlc1twcm9wXSkpIHtcbiAgICAgICAgICAgIGlmIChpbmNsdWRlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShNYXJrLnVwKGluY2x1ZGUsIGNvbnRleHQsIG9wdGlvbnMpLCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYSBsb29wIGNvdW50ZXIgKFwiI1wiIG9yIFwiIyNcIikuXG4gICAgICAgIGVsc2UgaWYgKHByb3AuaW5kZXhPZihcIiNcIikgPiAtMSkge1xuICAgICAgICAgICAgb3B0aW9ucy5pdGVyLnNpZ24gPSBwcm9wO1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShvcHRpb25zLml0ZXIsIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyB0aGUgY3VycmVudCBjb250ZXh0LlxuICAgICAgICBlbHNlIGlmIChwcm9wID09PSBcIi5cIikge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShjb250ZXh0LCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYSB2YXJpYWJsZSB3aXRoIGRvdCBub3RhdGlvbiwgZS5nLiBcImEuYi5jXCJcbiAgICAgICAgZWxzZSBpZiAocHJvcC5pbmRleE9mKFwiLlwiKSA+IC0xKSB7XG4gICAgICAgICAgICBwcm9wID0gcHJvcC5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICBjdHggPSBNYXJrLmdsb2JhbHNbcHJvcFswXV07XG5cbiAgICAgICAgICAgIGlmIChjdHgpIHtcbiAgICAgICAgICAgICAgICBqID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgIGN0eCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgYWN0dWFsIGNvbnRleHRcbiAgICAgICAgICAgIHdoaWxlIChjdHggJiYgaiA8IHByb3AubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY3R4ID0gY3R4W3Byb3BbaisrXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2V2YWwoY3R4LCBmaWx0ZXJzLCBjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFuIFwiaWZcIiBzdGF0ZW1lbnQuXG4gICAgICAgIGVsc2UgaWYgKHRlc3R5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKGN0eCwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFuIGFycmF5LCB3aGljaCBtaWdodCBiZSBhIGJsb2NrIGV4cHJlc3Npb24uXG4gICAgICAgIGVsc2UgaWYgKGN0eCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsKGN0eCwgZmlsdGVycywgY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhIGJsb2NrIGV4cHJlc3Npb24uXG4gICAgICAgIGVsc2UgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjdHggPyBNYXJrLnVwKGNoaWxkLCBjdHgpIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbnl0aGluZyBlbHNlLlxuICAgICAgICBlbHNlIGlmIChjb250ZXh0Lmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKGN0eCwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIHNwZWNpYWwgY2FzZTogaWYgdGhlIHJlc3VsdGluZyBjb250ZXh0IGlzIGFjdHVhbGx5IGFuIEFycmF5XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZXZhbChyZXN1bHQsIGZpbHRlcnMsIGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW4gXCJpZlwiIHN0YXRlbWVudC5cbiAgICAgICAgaWYgKHRlc3R5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl90ZXN0KHJlc3VsdCwgY2hpbGQsIGNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgdGFnLCBlLmcuIFwie3tuYW1lfX1cIiwgd2l0aCB0aGUgcmVzdWx0LCBlLmcuIFwiQWRhbVwiLlxuICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UodGFnLCByZXN1bHQgPT09IHVuZGVmaW5lZCA/IFwiPz8/XCIgOiByZXN1bHQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbXBhY3QgPyB0ZW1wbGF0ZS5yZXBsYWNlKC8+XFxzKzwvZywgXCI+PFwiKSA6IHRlbXBsYXRlO1xufTtcblxuLy8gRnJlZWJpZSBwaXBlcy4gU2VlIHVzYWdlIGluIFJFQURNRS5tZFxuTWFyay5waXBlcyA9IHtcbiAgICBlbXB0eTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gIW9iaiB8fCAob2JqICsgXCJcIikudHJpbSgpLmxlbmd0aCA9PT0gMCA/IG9iaiA6IGZhbHNlO1xuICAgIH0sXG4gICAgbm90ZW1wdHk6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiAob2JqICsgXCJcIikudHJpbSgpLmxlbmd0aCA/IG9iaiA6IGZhbHNlO1xuICAgIH0sXG4gICAgYmxhbms6IGZ1bmN0aW9uIChzdHIsIHZhbCkge1xuICAgICAgICByZXR1cm4gISFzdHIgfHwgc3RyID09PSAwID8gc3RyIDogdmFsO1xuICAgIH0sXG4gICAgbW9yZTogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hcmsuX3NpemUoYSkgPiBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgbGVzczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hcmsuX3NpemUoYSkgPCBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgb3Jtb3JlOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gTWFyay5fc2l6ZShhKSA+PSBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgb3JsZXNzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gTWFyay5fc2l6ZShhKSA8PSBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgYmV0d2VlbjogZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgICAgYSA9IE1hcmsuX3NpemUoYSk7XG4gICAgICAgIHJldHVybiBhID49IGIgJiYgYSA8PSBjID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgZXF1YWxzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA9PSBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgbm90ZXF1YWxzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYSAhPSBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgbGlrZTogZnVuY3Rpb24gKHN0ciwgcGF0dGVybikge1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuLCBcImlcIikudGVzdChzdHIpID8gc3RyIDogZmFsc2U7XG4gICAgfSxcbiAgICBub3RsaWtlOiBmdW5jdGlvbiAoc3RyLCBwYXR0ZXJuKSB7XG4gICAgICAgIHJldHVybiAhTWFyay5waXBlcy5saWtlKHN0ciwgcGF0dGVybikgPyBzdHIgOiBmYWxzZTtcbiAgICB9LFxuICAgIHVwY2FzZTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHN0cikudG9VcHBlckNhc2UoKTtcbiAgICB9LFxuICAgIGRvd25jYXNlOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoc3RyKS50b0xvd2VyQ2FzZSgpO1xuICAgIH0sXG4gICAgY2FwY2FzZTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyg/Ol58XFxzKVxcUy9nLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1VwcGVyQ2FzZSgpOyB9KTtcbiAgICB9LFxuICAgIGNob3A6IGZ1bmN0aW9uIChzdHIsIG4pIHtcbiAgICAgICAgcmV0dXJuIHN0ci5sZW5ndGggPiBuID8gc3RyLnN1YnN0cigwLCBuKSArIFwiLi4uXCIgOiBzdHI7XG4gICAgfSxcbiAgICB0ZWFzZTogZnVuY3Rpb24gKHN0ciwgbikge1xuICAgICAgICB2YXIgYSA9IHN0ci5zcGxpdCgvXFxzKy8pO1xuICAgICAgICByZXR1cm4gYS5zbGljZSgwLCBuKS5qb2luKFwiIFwiKSArIChhLmxlbmd0aCA+IG4gPyBcIi4uLlwiIDogXCJcIik7XG4gICAgfSxcbiAgICB0cmltOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIudHJpbSgpO1xuICAgIH0sXG4gICAgcGFjazogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnRyaW0oKS5yZXBsYWNlKC9cXHN7Mix9L2csIFwiIFwiKTtcbiAgICB9LFxuICAgIHJvdW5kOiBmdW5jdGlvbiAobnVtKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKCtudW0pO1xuICAgIH0sXG4gICAgY2xlYW46IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoLzxcXC8/W14+XSs+L2dpLCBcIlwiKTtcbiAgICB9LFxuICAgIHNpemU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iai5sZW5ndGg7XG4gICAgfSxcbiAgICBsZW5ndGg6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iai5sZW5ndGg7XG4gICAgfSxcbiAgICByZXZlcnNlOiBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQoYXJyKS5yZXZlcnNlKCk7XG4gICAgfSxcbiAgICBqb2luOiBmdW5jdGlvbiAoYXJyLCBzZXBhcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIGFyci5qb2luKHNlcGFyYXRvcik7XG4gICAgfSxcbiAgICBsaW1pdDogZnVuY3Rpb24gKGFyciwgY291bnQsIGlkeCkge1xuICAgICAgICByZXR1cm4gYXJyLnNsaWNlKCtpZHggfHwgMCwgK2NvdW50ICsgKCtpZHggfHwgMCkpO1xuICAgIH0sXG4gICAgc3BsaXQ6IGZ1bmN0aW9uIChzdHIsIHNlcGFyYXRvcikge1xuICAgICAgICByZXR1cm4gc3RyLnNwbGl0KHNlcGFyYXRvciB8fCBcIixcIik7XG4gICAgfSxcbiAgICBjaG9vc2U6IGZ1bmN0aW9uIChib29sLCBpZmZ5LCBlbHN5KSB7XG4gICAgICAgIHJldHVybiAhIWJvb2wgPyBpZmZ5IDogKGVsc3kgfHwgXCJcIik7XG4gICAgfSxcbiAgICB0b2dnbGU6IGZ1bmN0aW9uIChvYmosIGNzdjEsIGNzdjIsIHN0cikge1xuICAgICAgICByZXR1cm4gY3N2Mi5zcGxpdChcIixcIilbY3N2MS5tYXRjaCgvXFx3Ky9nKS5pbmRleE9mKG9iaiArIFwiXCIpXSB8fCBzdHI7XG4gICAgfSxcbiAgICBzb3J0OiBmdW5jdGlvbiAoYXJyLCBwcm9wKSB7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYVtwcm9wXSA+IGJbcHJvcF0gPyAxIDogLTE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQoYXJyKS5zb3J0KHByb3AgPyBmbiA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBmaXg6IGZ1bmN0aW9uIChudW0sIG4pIHtcbiAgICAgICAgcmV0dXJuICgrbnVtKS50b0ZpeGVkKG4pO1xuICAgIH0sXG4gICAgbW9kOiBmdW5jdGlvbiAobnVtLCBuKSB7XG4gICAgICAgIHJldHVybiAoK251bSkgJSAoK24pO1xuICAgIH0sXG4gICAgZGl2aXNpYmxlOiBmdW5jdGlvbiAobnVtLCBuKSB7XG4gICAgICAgIHJldHVybiBudW0gJiYgKCtudW0gJSBuKSA9PT0gMCA/IG51bSA6IGZhbHNlO1xuICAgIH0sXG4gICAgZXZlbjogZnVuY3Rpb24gKG51bSkge1xuICAgICAgICByZXR1cm4gbnVtICYmICgrbnVtICYgMSkgPT09IDAgPyBudW0gOiBmYWxzZTtcbiAgICB9LFxuICAgIG9kZDogZnVuY3Rpb24gKG51bSkge1xuICAgICAgICByZXR1cm4gbnVtICYmICgrbnVtICYgMSkgPT09IDEgPyBudW0gOiBmYWxzZTtcbiAgICB9LFxuICAgIG51bWJlcjogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChzdHIucmVwbGFjZSgvW15cXC1cXGRcXC5dL2csIFwiXCIpKTtcbiAgICB9LFxuICAgIHVybDogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJKHN0cik7XG4gICAgfSxcbiAgICBib29sOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiAhIW9iajtcbiAgICB9LFxuICAgIGZhbHN5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiAhb2JqO1xuICAgIH0sXG4gICAgZmlyc3Q6IGZ1bmN0aW9uIChpdGVyKSB7XG4gICAgICAgIHJldHVybiBpdGVyLmlkeCA9PT0gMDtcbiAgICB9LFxuICAgIGxhc3Q6IGZ1bmN0aW9uIChpdGVyKSB7XG4gICAgICAgIHJldHVybiBpdGVyLmlkeCA9PT0gaXRlci5zaXplIC0gMTtcbiAgICB9LFxuICAgIGNhbGw6IGZ1bmN0aW9uIChvYmosIGZuKSB7XG4gICAgICAgIHJldHVybiBvYmpbZm5dLmFwcGx5KG9iaiwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgIE1hcmsuZ2xvYmFsc1trZXldID0gb2JqOyByZXR1cm4gXCJcIjtcbiAgICB9LFxuICAgIGxvZzogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBjb25zb2xlLmxvZyhvYmopO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbn07XG5cbi8vIFNoaW0gZm9yIElFLlxuaWYgKHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnRyaW0gIT09IFwiZnVuY3Rpb25cIikge1xuICAgIFN0cmluZy5wcm90b3R5cGUudHJpbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKTsgXG4gICAgfVxufVxuXG4vLyBFeHBvcnQgZm9yIE5vZGUuanMgYW5kIEFNRC5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBNYXJrO1xufVxuZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBNYXJrO1xuICAgIH0pO1xufVxuIiwidmFyIGd1aWFUViA9IChmdW5jdGlvbigkKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgLy9jb25zb2xlLmxvZygnVXNhIGpRdWVyeSB2ZXJzaW9uOiAnICsgJC5mbi5qcXVlcnkpO1xyXG5cclxuICAgIHZhciBjYW5hbGVzVXN1YXJpbyA9IFsnbGExJywgJ2xhMicsICdhbnRlbmEzJywgJ2N1YXRybycsICd0ZWxlY2luY28nLCAnbGFzZXh0YSddLFxyXG4gICAgICAgIGNhbmFsZXNHbG9iYWwgPSB7fSxcclxuICAgICAgICBjYXRlZ29yaWFzVXN1YXJpbyA9IFtdLFxyXG4gICAgICAgIGFycmF5Q2FuYWxlcyA9IFtdLFxyXG4gICAgICAgIGFycmF5RGlhcyA9IFtdO1xyXG4gICAgdmFyIGFsdG9CYXJyYUhvcmFzID0gNjAsXHJcbiAgICAgICAgLy9hbmNob0JhcnJhQ2FuYWxlcyA9IDE1MCxcclxuICAgICAgICBhbHRvQ2FuYWwgPSA5MCxcclxuICAgICAgICBwaXhlbHNQb3JIb3JhID0gMzIwLFxyXG4gICAgICAgIC8vIGFuY2hvUG9yRGlhID0gcGl4ZWxzUG9ySG9yYSAqIDI0LFxyXG4gICAgICAgIHBpeGVsc1Bvck1pbnV0byA9IHBpeGVsc1BvckhvcmEgLyA2MDtcclxuXHJcbiAgICAvLyBUT0RPIEFob3JhIG1pc21vIGZvcnphbW9zIGVzdGEgZmVjaGEgZGUgaW5pY2lvXHJcbiAgICB2YXIgZGlhQWN0dWFsID0gbmV3IERhdGUoKSxcclxuICAgICAgICBob3JhQWN0dWFsID0ge1xyXG4gICAgICAgICAgICAnaCc6IGxlZnRQYWQoZGlhQWN0dWFsLmdldEhvdXJzKCksIDIpLFxyXG4gICAgICAgICAgICAnbSc6IGxlZnRQYWQoZGlhQWN0dWFsLmdldE1pbnV0ZXMoKSwgMilcclxuICAgICAgICB9O1xyXG4gICAgLy9kaWFBY3R1YWwuc2V0VGltZShEYXRlLnBhcnNlKFwiTW9uLCBKdWwgMTQgMjAxNCAwMDowMDowMCBHTVQrMDIwMFwiKSk7XHJcbiAgICBkaWFBY3R1YWwuc2V0VGltZShEYXRlLnBhcnNlKCdNb24sIEp1bCAxNCAyMDE0JykpO1xyXG5cclxuICAgIHZhciAkdmlld1BvcnQgPSAkKCcjdmlld1BvcnQnKTtcclxuICAgIHZhciAkc2VsZWN0b3JEaWFzID0gJCgnI3NlbGVjdG9yRGlhcycpO1xyXG4gICAgdmFyICRjb250UHJvZ3JhbWFzID0gJCgnI2NvbnRQcm9ncmFtYXMnKTtcclxuICAgIHZhciAkY29udENhbmFsZXMgPSAkKCcjY29udENhbmFsZXMnKTtcclxuICAgIC8vdmFyICRpdGVtUHJvZ3JhbWEgPSAkKCcuaXRlbVByb2dyYW1hJyk7XHJcbiAgICB2YXIgJGJhcnJhSG9yYXMgPSAkKCcjYmFycmFIb3JhcycpO1xyXG4gICAgdmFyICRpY29ub3NIb3JhcyA9ICQoJyNpY29ub3NIb3JhcycpO1xyXG4gICAgdmFyICRob3JhQWN0dWFsID0gJCgnI2hvcmFBY3R1YWwnKTtcclxuICAgIHZhciAkZmljaGFQcm9ncmFtYSA9ICQoJyNmaWNoYVByb2dyYW1hJyk7XHJcbiAgICAvL3ZhciAkYmFycmFzQ2FuYWxlcyA9ICQoJy5iYXJyYXNDYW5hbGVzJyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yQ2F0ZWdvcmlhcyA9ICQoJyNzZWxlY3RvckNhdGVnb3JpYXMnKTtcclxuICAgIHZhciAkYm90b25lc0NhbmFsZXMgPSAkKCcjYm90b25lc0NhbmFsZXMnKTtcclxuICAgIHZhciAkc3VzY3JpYmlyQ2FuYWxlcyA9ICQoJyNzdXNjcmliaXJDYW5hbGVzJyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yQ2FuYWxlcyA9ICQoJyNzZWxlY3RvckNhbmFsZXMnKTtcclxuICAgIHZhciAkb3JkZW5DYW5hbGVzID0gJCgnI29yZGVuQ2FuYWxlcycpO1xyXG4gICAgdmFyICRiYXJyYUxldHJhcyA9ICQoJyNiYXJyYUxldHJhcycpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWNjZWRlIGEgbGFzIGNvb2tpZXMgZGVsIHVzdWFyaW8gcGFyYSB2ZXIgcGVyc29uYWxpemFjacOzbiBkZSBjYW5hbGVzXHJcbiAgICAgKiBAcmV0dXJuIHthcnJheX0gTGlzdGEgZGUgY2FuYWxlcyBwZXJzb25hbGl6YWRvcyBwb3IgZWwgdXN1YXJpb1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYXJnYUNvb2tpZXMoKSB7XHJcbiAgICAgICAgLy8gVE9ETyBDYXJnYXIgY2FuYWxlcyBkZXNkZSB1bmEgY29va2llLCB5IGdlbmVyYXIgw6lzdGEgY3VhbmRvIHNlIGFjY2VkZSBwb3IgcHJpbWVyYSB2ZXpcclxuICAgICAgICAvLyBUT0RPIENhcmdhciBkZSBsYXMgY29va2llcyBsb3MgY2FuYWxlcyByZXNhbHRhZG9zIGRlbCBzZWxlY3RvckNhdGVnb3JpYXNcclxuICAgICAgICAvLyBMw7NnaWNhIGRlIGxlY3R1cmEgZGUgY29va2llc1xyXG4gICAgICAgIHZhciBkZWYgPSAkLkRlZmVycmVkKCksXHJcbiAgICAgICAgICAgIGNhbmFsZXM7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY2FuYWxlcyA9IFsndGVsZWNpbmNvJywgJ2FudGVuYTMnLCAnbGEyJywgJ2xhMScsICdjdWF0cm8nLCAnbGFzZXh0YScsICdoaXN0b3JpYSddO1xyXG4gICAgICAgICAgICBjYXRlZ29yaWFzVXN1YXJpbyA9IFsxLCAyLCAzLCA0LCA1LCA2LCA3XTtcclxuICAgICAgICAgICAgZGVmLnJlc29sdmUoY2FuYWxlcyk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgcmV0dXJuIGRlZi5wcm9taXNlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjaWJlIGxhIGxpc3RhIGRlIGNhbmFsZXMgYSBjYXJnYXIgeSBoYWNlIGxhcyBsbGFtYWRhcyBhc8OtbmNyb25hc1xyXG4gICAgICogQHBhcmFtIHthcnJheX0gY2FuYWxlcyBMaXN0YWRvIGRlIGNhbmFsZXMgYSBjYXJnYXJcclxuICAgICAqIEByZXR1cm4ge2pzb259IERhdG9zIGpzb24gZGUgbGEgcHJvZ3JhbWFjacOzbiBhbCBjb21wbGV0byBwYXJhIGxvcyBjYW5hbGVzIHNlbGVjY2lvbmFkb3NcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY2FyZ2FEYXRvc0NhbmFsZXMoY2FuYWxlcykge1xyXG4gICAgICAgIC8vIENhcmdhcyBhc8OtbmNyb25hcyBkZSB2YXJpb3MgY2FuYWxlc1xyXG4gICAgICAgIC8vIHBvciBjYWRhIGNhbmFsLCBjYXJnYSB1biBqc29uXHJcbiAgICAgICAgdmFyIGpzb24gPSBbXSxcclxuICAgICAgICAgICAgcHJvbWlzZXMgPSBbXSxcclxuICAgICAgICAgICAgbnVtRWxlbWVudG9zID0gY2FuYWxlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgICQud2hlbi5hcHBseShudWxsLCAkLm1hcChjYW5hbGVzLCBmdW5jdGlvbihjYW5hbCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgZmljaGVybyA9ICdkYXRvcy8nICsgY2FuYWwgKyAnLmpzb24nO1xyXG5cclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgkLmdldChmaWNoZXJvKS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFycmF5Q2FuYWxlc1tpXSA9IGpzb25baV0gPSBkYXRhO1xyXG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlDYW5hbGVzW2ldID0ganNvbltpXSA9ICcnO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICAvLyBSZXNvbHZlciBkZWZlcnJlciBjdWFuZG8gc2UgaGF5YW4gY2FyZ2FkbyB0b2RvcyBsb3MganNvblxyXG4gICAgICAgIHJldHVybiAkLndoZW4uYXBwbHkobnVsbCwgcHJvbWlzZXMpLnByb21pc2UoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjaWJlIGxhIGxpc3RhIGRlIHByb2dyYW1hcyBhIHBpbnRhciBwb3IgY2FuYWwgeSBsYW56YSBlbCBwaW50YWRvIGRlbCBjYW5hbFxyXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhUGFycmlsbGEobGlzdGFDYW5hbGVzLCBhcnJheUNvbXBsZXRvKSB7XHJcbiAgICAgICAgdmFyIGxpc3RhID0gbGlzdGFDYW5hbGVzIHx8IGNhbmFsZXNVc3VhcmlvO1xyXG4gICAgICAgIHZhciBjb21wbGV0byA9IGFycmF5Q29tcGxldG8gfHwgYXJyYXlDYW5hbGVzO1xyXG5cclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGlkPVwie3tpZGNhbmFsfX1cIiBjbGFzcz1cImxpbmVhQ2FuYWwgY2xlYXJmaXhcIj48L2Rpdj4nO1xyXG5cclxuICAgICAgICAkLmVhY2gobGlzdGEsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgY29udGV4dC5pZGNhbmFsID0gdjtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkY29udFByb2dyYW1hcy5hcHBlbmQocmVzdWx0YWRvKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUGludGFtb3MgcHJvZ3JhbWFzIGVuIHN1cyBjYW5hbGVzXHJcbiAgICAgICAgJC5lYWNoKGNvbXBsZXRvLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIHZhciBjYW5hbCA9IHYuY2FuYWwubm9tYnJlO1xyXG4gICAgICAgICAgICB2YXIgZGl2Q2FuYWwgPSAkKCcjJyArIGNhbmFsKTtcclxuXHJcbiAgICAgICAgICAgICQuZWFjaCh2LnByb2dyYW1hcywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpdiA9IHBpbnRhUGFycmlsbGFQcm9ncmFtYShpLCB2KTtcclxuICAgICAgICAgICAgICAgIGRpdkNhbmFsLmFwcGVuZChkaXYpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNvcnJlIGVsIGpzb24gZGUgcHJvZ3JhbWFzIGRlIGRlIHVuIGNhbmFsIHkgbG9zIHBpbnRhIGVuICdjb250UHJvZ3JhbWFzJ1xyXG4gICAgICogQHBhcmFtICB7aW50fSBxQ2FuYWwgSWRlbnRpZmljYWRvciBkZSBxdcOpIGNhbmFsIHBpbnRhbW9zXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhUGFycmlsbGFQcm9ncmFtYShpLCB2KSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlUHJvZ3JhbWEgPSAnJyArXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaXRlbVByb2dyYW1hXCIgaWQ9XCJ7e2lkX3Byb2dyYW1hfX1cIiBkYXRhLXVybD1cInt7dXJsX2ZpY2hhfX1cIicgK1xyXG4gICAgICAgICAgICAnc3R5bGU9XCJ3aWR0aDp7e2R1cn19OyBsZWZ0Ont7ZGlmZkhvcmFEaWF9fTtcIj4nICtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpdGVtUHJvZ3JhbWFJbm5lciB7e2NsYXNlfX1cIj4nICtcclxuICAgICAgICAgICAgJzxhIGhyZWY9XCJodHRwOi8vZWxtdW5kby5lcy90ZWxldmlzaW9uL3Byb2dyYW1hL3t7aWRfcHJvZ3JhbWF9fVwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPnt7bm9tYnJlfX08L2E+JyArXHJcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNhdGVnb3JpYVwiPnt7Y2F0ZWdvcmlhfX08L3NwYW4+JyArXHJcbiAgICAgICAgICAgICc8aDQ+e3tub21icmV9fTwvaDQ+JyArXHJcbiAgICAgICAgICAgICd7e2lmIGVwaXNvZGlvfX08cD57e2VwaXNvZGlvfX08L3A+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJkdXJhY2lvblwiPnt7ZHVyYWNpb259fTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiZmVjaGFcIj57e2luZm9Ib3JhRHVyYWNpb259fTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJ3t7aWYgZmF2fX08c3BhbiBjbGFzcz1cImZhdm9yaXRvXCI+PGkgY2xhc3M9XCJmYSBmYS1zdGFyXCI+PC9pPjwvc3Bhbj57ey9pZn19JyArXHJcbiAgICAgICAgICAgICd7e2lmIGFsZX19PHNwYW4gY2xhc3M9XCJhbGVydGFcIj48aSBjbGFzcz1cImZhIGZhLWNsb2NrLW9cIj48L2k+PC9zcGFuPnt7L2lmfX0nICtcclxuICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAne3tpZiBzYWxlQ3J1en19PGRpdiBjbGFzcz1cIm1hc2NhcmFcIj48aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+PC9kaXY+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgLy8gU2VsZWNjacOzbiBkZSBjYXRlZ29yw61hXHJcbiAgICAgICAgLy8gbUNpbmUgXCIxMDRcIiAvIG1Db25jdXJzb3MgXCJJTlRfMlwiIC8gbUNvcmF6b24gLyBtRGVwb3J0ZXMgXCI5MFwiIC9cclxuICAgICAgICAvLyBtSW5mb3JtYXRpdm9zIFwiMjBcIiAvIG1NYWdhemluZXMgXCIzMVwiIC8gbVNlcmllcyBcIjFcIlxyXG4gICAgICAgIHZhciBjYXQgPSB2LmNhdGVnb3JpYSxcclxuICAgICAgICAgICAgY2F0ZWdvcmlhLFxyXG4gICAgICAgICAgICBjbGFzZTtcclxuICAgICAgICBzd2l0Y2ggKGNhdCkge1xyXG4gICAgICAgICAgICBjYXNlICcxJzpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gJ2NhdFNlcmllcyc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnc2VyaWVzJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcxMDQnOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSAnY2F0Q2luZSc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnY2luZSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnMzEnOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSAnY2F0TWFnYXppbmVzJztcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9ICdtYWdhemluZXMnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJzIwJzpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gJ2NhdEluZm9ybWF0aXZvcyc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnaW5mb3JtYXRpdm9zJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICc5MCc6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9ICdjYXREZXBvcnRlcyc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnZGVwb3J0ZXMnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0lOVF8yJzpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gJ2NhdENvbmN1cnNvcyc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnY29uY3Vyc29zJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdJTlRfMSc6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9ICdjYXRDb3Jhem9uJztcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9ICdjb3JhesOzbic7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEVsIGFuY2hvIHZhIGEgZGVwZW5kZXIgZGUgbGEgZHVyYWNpw7NuIGRlbCBwcm9ncmFtYVxyXG4gICAgICAgIHZhciBkdXJhY2lvbiA9IHYuZHVyYWNpb24gKyAnIG1pbnMuJztcclxuICAgICAgICB2YXIgZHVyID0gTWF0aC5jZWlsKHBpeGVsc1Bvck1pbnV0byAqIHYuZHVyYWNpb24pLFxyXG4gICAgICAgICAgICBob3JhX2luaWNpbyA9IG5ldyBEYXRlKHYuaG9yYV9pbmljaW8pLFxyXG4gICAgICAgICAgICBob3JhX2ZpbmFsID0gbmV3IERhdGUodi5ob3JhX2Zpbik7XHJcbiAgICAgICAgdmFyIGRpZmZIb3JhRGlhID0gaG9yYV9pbmljaW8gLSBkaWFBY3R1YWw7XHJcbiAgICAgICAgZGlmZkhvcmFEaWEgPSBNYXRoLmZsb29yKChNYXRoLmZsb29yKGRpZmZIb3JhRGlhIC8gMTAwMCkgLyA2MCkgKiBwaXhlbHNQb3JNaW51dG8pO1xyXG5cclxuICAgICAgICB2YXIgaG9yYV9pID0gaG9yYV9pbmljaW8uZ2V0SG91cnMoKTtcclxuICAgICAgICBob3JhX2kgPSBsZWZ0UGFkKGhvcmFfaSwgMik7XHJcbiAgICAgICAgdmFyIG1pbnNfaSA9IGhvcmFfaW5pY2lvLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBtaW5zX2kgPSBsZWZ0UGFkKG1pbnNfaSwgMik7XHJcblxyXG4gICAgICAgIHZhciBob3JhX2YgPSBob3JhX2ZpbmFsLmdldEhvdXJzKCk7XHJcbiAgICAgICAgaG9yYV9mID0gbGVmdFBhZChob3JhX2YsIDIpO1xyXG4gICAgICAgIHZhciBtaW5zX2YgPSBob3JhX2ZpbmFsLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBtaW5zX2YgPSBsZWZ0UGFkKG1pbnNfZiwgMik7XHJcblxyXG4gICAgICAgIHZhciBpbmZvSG9yYUR1cmFjaW9uID0gJycgKyBob3JhX2kgKyAnOicgKyBtaW5zX2kgKyAnIC0gJyArIGhvcmFfZiArICc6JyArIG1pbnNfZjtcclxuXHJcbiAgICAgICAgLy8gVE9ETyBSYW5kb20gcGFyYSBwb2RlciB2ZXIgcHJvZ3JhbWFzIGZhdm9yaXRvcyB5IGFsZXJ0YXMgZGUgcHJvZ3JhbWFzLiBFTElNSU5BUlxyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpICogMTAwIDwgNSkge1xyXG4gICAgICAgICAgICB2YXIgZmF2ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgKiAxMDAgPCA1KSB7XHJcbiAgICAgICAgICAgIHZhciBhbGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVE9ETyBTaSBlbCBwcm9ncmFtYSBlcyBtZW5vciBkZSAxNSBtaW51dG9zLCBhcGFyZWNlIHVuYSBjcnV6XHJcbiAgICAgICAgaWYgKHYuZHVyYWNpb24gPCAxNSkge1xyXG4gICAgICAgICAgICB2YXIgc2FsZUNydXogPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgY2xhc2U6IGNsYXNlLFxyXG4gICAgICAgICAgICBkdXI6IGR1ciArICdweCcsXHJcbiAgICAgICAgICAgIGRpZmZIb3JhRGlhOiBkaWZmSG9yYURpYSArICdweCcsXHJcbiAgICAgICAgICAgIGlkX3Byb2dyYW1hOiB2LmlkX3Byb2dyYW1hLFxyXG4gICAgICAgICAgICB1cmxfZmljaGE6IHYudXJsX2ZpY2hhLFxyXG4gICAgICAgICAgICBpbmZvSG9yYUR1cmFjaW9uOiBpbmZvSG9yYUR1cmFjaW9uLFxyXG4gICAgICAgICAgICBkdXJhY2lvbjogZHVyYWNpb24sXHJcbiAgICAgICAgICAgIGNhdGVnb3JpYTogY2F0ZWdvcmlhLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgIG5vbWJyZTogdi5ub21icmUsXHJcbiAgICAgICAgICAgIGVwaXNvZGlvOiB2LmVwaXNvZGlvLFxyXG4gICAgICAgICAgICBmYXY6IGZhdiB8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgYWxlOiBhbGUgfCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHNhbGVDcnV6OiBzYWxlQ3J1eiB8IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciByZXN1bHRhZG8gPSBNYXJrLnVwKHRlbXBsYXRlUHJvZ3JhbWEsIGNvbnRleHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRhZG87XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgbG9zIGljb25vcyBkZSBjYW5hbGVzIGVuIGVsIGNvbXBvbmVudGUgJ2NvbnRDYW5hbGVzJ1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUNhbmFsZXMobGlzdGFDYW5hbGVzKSB7XHJcblxyXG4gICAgICAgIHZhciBsaXN0YSA9IGxpc3RhQ2FuYWxlcyB8fCBjYW5hbGVzVXN1YXJpbztcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwiaXRlbUNhbmFsXCI+PGltZyBzcmM9XCJodHRwOi8vZXN0YXRpY29zLmVsbXVuZG8uZXN7e2ljb25vfX1cIiAvPjwvZGl2Pic7XHJcblxyXG4gICAgICAgICQuZWFjaChsaXN0YSwgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBjb250ZXh0Lmljb25vID0gYXJyYXlDYW5hbGVzW2ldLmNhbmFsLmljb25vO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICRjb250Q2FuYWxlcy5hcHBlbmQocmVzdWx0YWRvKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1bmEgYmFycmEgaG9yaXpvbmFsIGNvbiBsYSBtYXJjYSBkZSBob3JhcywgcXVlIHNlIGRlc3BsYXphIGNvbiBlbCB2aWV3UG9ydFxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUhvcmFzUGFycmlsbGEoKSB7XHJcbiAgICAgICAgdmFyIGRpYSA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGksIGo7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgY29udGV4dC5kaWFzID0gW107XHJcbiAgICAgICAgY29udGV4dC5ob3JhcyA9IFtdO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICcnICtcclxuICAgICAgICAgICAgJ3t7ZGlhc319PGRpdiBjbGFzcz1cIml0ZW1EaWFcIiBzdHlsZT1cImxlZnQ6e3twb3N9fXB4XCI+e3tkaWF9fTwvZGl2Pnt7L2RpYXN9fScgK1xyXG4gICAgICAgICAgICAne3tob3Jhc319PGRpdiBjbGFzcz1cIml0ZW1Ib3Jhc1wiIHN0eWxlPVwibGVmdDp7e3Bvc319cHg7XCI+e3t0ZXh0b319PC9kaXY+e3svaG9yYXN9fSc7XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1bmEgYmFycmEgcGFyYSBsb3MgZMOtYXMgKDQpIGRlIGxvcyBxdWUgZGlzcG9uZW1vcyBkZSBkYXRvc1xyXG4gICAgICAgIGZvciAoaiA9IDA7IGogPD0gMzsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICBkaWEuc2V0VGltZShkaWFBY3R1YWwuZ2V0VGltZSgpICsgKGogKiA4NjQwMDAwMCkpO1xyXG4gICAgICAgICAgICB2YXIgZGlhVGV4dCA9IGRpYS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywge1xyXG4gICAgICAgICAgICAgICAgd2Vla2RheTogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgICAgLy95ZWFyOiAnbnVtZXJpYycsXHJcbiAgICAgICAgICAgICAgICBtb250aDogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYydcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbERpYSA9IChqICogcGl4ZWxzUG9ySG9yYSAqIDI0KTtcclxuICAgICAgICAgICAgY29udGV4dC5kaWFzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgJ2RpYSc6IGRpYVRleHQsXHJcbiAgICAgICAgICAgICAgICAncG9zJzogbERpYVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXJyYXlEaWFzLnB1c2goW2RpYVRleHQsIGxEaWFdKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAyNDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGxlZnRQYWQoaSwgMikgKyAnOjAwJztcclxuICAgICAgICAgICAgICAgIHZhciBsID0gKGogKiBwaXhlbHNQb3JIb3JhICogMjQpICsgaSAqIHBpeGVsc1BvckhvcmE7XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5ob3Jhcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAndGV4dG8nOiB0LFxyXG4gICAgICAgICAgICAgICAgICAgICdwb3MnOiBsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICRiYXJyYUhvcmFzLmFwcGVuZChyZXN1bHRhZG8pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1biBzZWxlY3RvciBkZSBhY2Nlc28gZGlyZWN0byBhIGxvcyBkw61hcyBpbmNsdcOtZG9zIGVuIGxhIHByb2dyYW1hY2nDs25cclxuICAgICAqIERlcGVuZGVtb3MgZGUgYXJyYXlEaWFzIHF1ZSBoYSBnZW5lcmFkbyBkYXRvcyBlbiBwaW50YUhvcmFzUGFycmlsbGFcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFTZWxlY3RvckRpYXMoKSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaSBjbGFzcz1cIml0ZW1EaWFcIiBkYXRhLXB4PVwie3tweH19XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Ly9cIj57e2RpYVRleHR9fTwvYT48L2xpPic7XHJcblxyXG4gICAgICAgIGFycmF5RGlhcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlhVGV4dCA9IGl0ZW1bMF07XHJcbiAgICAgICAgICAgIHZhciBweCA9IGl0ZW1bMV07XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgZGlhVGV4dDogZGlhVGV4dCxcclxuICAgICAgICAgICAgICAgIHB4OiBweFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkc2VsZWN0b3JEaWFzLmZpbmQoJ3VsJykuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgdW5hIGZyYW5qYSBxdWUgbWFyY2EgbGEgaG9yYSBhY3R1YWwgZW4gZWwgY29tcG9uZW50ZSBQYXJyaWxsYVxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUhvcmFBY3R1YWwoKSB7XHJcblxyXG4gICAgICAgIHZhciBob3JhcyA9IGhvcmFBY3R1YWwuaCxcclxuICAgICAgICAgICAgbWludXRvcyA9IGhvcmFBY3R1YWwubTtcclxuXHJcbiAgICAgICAgdmFyIGRpdkhvcmEgPSAkaG9yYUFjdHVhbFxyXG4gICAgICAgICAgICAuaGlkZSgpXHJcbiAgICAgICAgICAgIC5maW5kKCdwJykudGV4dChob3JhcyArICc6JyArIG1pbnV0b3MpLmVuZCgpXHJcbiAgICAgICAgICAgIC5zaG93KCk7XHJcblxyXG4gICAgICAgIHZhciBwb3NYID0gcGFyc2VJbnQoaG9yYXMpICogcGl4ZWxzUG9ySG9yYSArIHBhcnNlSW50KG1pbnV0b3MpICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgIGRpdkhvcmEuY3NzKHtcclxuICAgICAgICAgICAgJ2xlZnQnOiBwb3NYXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2l0w7phIGxhIFBhcnJpbGxhIGVuIGVsIG1vbWVudG8gYWN0dWFsLCBmZWNoYSB5IGhvcmFcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2l0dWFQYXJyaWxsYUFob3JhKCkge1xyXG4gICAgICAgIHZhciBtaXRhZEFuY2hvVmlld3BvcnQgPSAkdmlld1BvcnQud2lkdGgoKSAqIDAuNTtcclxuICAgICAgICB2YXIgbXVldmVBID0gcGFyc2VJbnQoJGhvcmFBY3R1YWwuY3NzKCdsZWZ0JykpO1xyXG4gICAgICAgIG11ZXZlQSA9IHBhcnNlSW50KG1pdGFkQW5jaG9WaWV3cG9ydCAtIG11ZXZlQSk7XHJcblxyXG4gICAgICAgICRjb250UHJvZ3JhbWFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgJ2xlZnQnOiBtdWV2ZUEgKyAncHgnXHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAkYmFycmFIb3Jhcy5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogbXVldmVBICsgJ3B4J1xyXG4gICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgdmFyIGhvcmFMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5oKSAqIHBpeGVsc1BvckhvcmE7XHJcbiAgICAgICAgdmFyIG1pbnV0b3NMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5tKSAqIHBpeGVsc1Bvck1pbnV0bztcclxuICAgICAgICB2YXIgcG9zWCA9IGhvcmFMZWZ0ICsgbWludXRvc0xlZnQgKyBtdWV2ZUE7XHJcbiAgICAgICAgJGhvcmFBY3R1YWwuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAnbGVmdCc6IHBvc1ggKyAncHgnXHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRlbmRyw61hbW9zIGRhdG9zIGRlIGZhdm9yaXRvcyB5IGFsZXJ0YXMgZGUgdXN1YXJpbyB2YWxpZGFkbyAoc2kgaHViaWVyYSlcclxuICAgICAqIEByZXR1cm4ge2pzb259IE9iamV0byBqc29uIGNvbiB0b2RvcyBsb3MgcHJvZ3JhbWFzIGZhdm9yaXRvcyB5IGFsZXJ0YXMgZGVsIHVzdWFyaW9cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY2FyZ2FJbmZvVXN1YXJpbygpIHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVjb3JhIGxvcyBwcm9ncmFtYXMgZW4gUGFycmlsbGEgY29uIGxhcyBhbGVydGFzIHkgZmF2b3JpdG9zIHJlY29ycmllbmRvIGVsIGpzb24gZGUgdXN1YXJpb1xyXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhUHJvZ3NVc3VhcmlvKCkge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc29jaWEgdG9kb3MgbG9zIGV2ZW50IGxpc3RlbmVycyBhIGxvcyBkaWZlcmVudGVzIGVsZW1lbnRvcyBkZSB1aVxyXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGxhbnphSGFuZGxlcnMoKSB7XHJcblxyXG4gICAgICAgIHZhciBhbHRvVmlld3BvcnQgPSAkdmlld1BvcnQuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgIGFuY2hvVmlld3BvcnQgPSAkdmlld1BvcnQud2lkdGgoKSxcclxuICAgICAgICAgICAgYWx0b0NvbnRQcm9ncmFtYXMgPSAkY29udFByb2dyYW1hcy5oZWlnaHQoKSxcclxuICAgICAgICAgICAgYW5jaG9Db250UHJvZ3JhbWFzID0gJGNvbnRQcm9ncmFtYXMub2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgICAgIGFuY2hvQmFycmFDYW5hbGVzID0gJGNvbnRDYW5hbGVzLndpZHRoKCk7XHJcbiAgICAgICAgdmFyIGlzRHJhZyA9IGZhbHNlLFxyXG4gICAgICAgICAgICBzZUhhTW92aWRvID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIEhheWFtb3MgZWwgZWxlbWVudG8gaXRlbVByb2dyYW1hIG3DoXMgYSBsYSBpenF1aWVyZGFcclxuICAgICAgICB2YXIgcHJpbWVyb3NEaXYgPSAkKCcjY29udFByb2dyYW1hcyA+IGRpdiA+IGRpdjpmaXJzdC1jaGlsZCcpLFxyXG4gICAgICAgICAgICBvZmZzZXRzSXpkYSA9IFtdO1xyXG4gICAgICAgICQuZWFjaChwcmltZXJvc0RpdiwgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBvZmZzZXRzSXpkYS5wdXNoKHRoaXMub2Zmc2V0TGVmdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG1pbkl6ZGEgPSBvZmZzZXRzSXpkYS5taW4oKTtcclxuICAgICAgICAvLyBIYXlhbW9zIGVsIGVsZW1lbnRvIGl0ZW1Qcm9ncmFtYSBtw6FzIGEgbGEgZGVyZWNoYVxyXG4gICAgICAgIHZhciB1bHRpbW9zRGl2ID0gJCgnI2NvbnRQcm9ncmFtYXMgPiBkaXYgPiBkaXY6bGFzdC1jaGlsZCcpLFxyXG4gICAgICAgICAgICBvZmZzZXRzRHJjaCA9IFtdO1xyXG4gICAgICAgICQuZWFjaCh1bHRpbW9zRGl2LCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIG9mZnNldHNEcmNoLnB1c2godGhpcy5vZmZzZXRMZWZ0ICsgJCh0aGlzKS53aWR0aCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbWF4RHJjaCA9IG9mZnNldHNEcmNoLm1heCgpO1xyXG5cclxuICAgICAgICAvLyBOb3MgY2FyZ2Ftb3MgZWwgcHJlbG9hZGVyXHJcbiAgICAgICAgJHZpZXdQb3J0LmZpbmQoJy5wcmVsb2FkLXdyYXBwZXInKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIGV2ZW50b3MgdG91Y2ggc29icmUgY29udFByb2dyYW1hcyBwYXJhIGFycmFzdHJhciBsYSBwYXJyaWxsYVxyXG4gICAgICAgIC8vIFkgcGFyYSBldmVudG8gY2xpY2sgKHRhcCkgZW4gZWxlbWVudG9zIGl0ZW1Qcm9ncmFtYVxyXG4gICAgICAgICRjb250UHJvZ3JhbWFzLnN3aXBlKHtcclxuICAgICAgICAgICAgdGFwOiBmdW5jdGlvbihldmVudCwgdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnVGFwOicsIGV2ZW50LCB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgY2xpY2tQcm9ncmFtYShldmVudCwgdGFyZ2V0KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdHJpZ2dlck9uVG91Y2hFbmQ6IHRydWUsXHJcbiAgICAgICAgICAgIHN3aXBlU3RhdHVzOiBzd2lwZVN0YXR1cyxcclxuICAgICAgICAgICAgdGhyZXNob2xkOiAxMCxcclxuICAgICAgICAgICAgYWxsb3dQYWdlU2Nyb2xsOiBmYWxzZSxcclxuICAgICAgICAgICAgZXhjbHVkZWRFbGVtZW50czogJC5mbi5zd2lwZS5kZWZhdWx0cy5leGNsdWRlZEVsZW1lbnRzICsgJywgI2hvcmFBY3R1YWwnLFxyXG4gICAgICAgICAgICBmaW5nZXJzOiAnYWxsJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgbGEgc2VsZWNjacOzbiBkZSB1bmEgaG9yYVxyXG4gICAgICAgICRiYXJyYUhvcmFzLm9uKCdjbGljaycsICcuaXRlbUhvcmFzJywgY2xpY2tIb3JhKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIGZpbHRyYWRvIHBvciBjYXRlZ29yw61hc1xyXG4gICAgICAgICRzZWxlY3RvckNhdGVnb3JpYXMub24oJ2NsaWNrJywgJ2xpJywgbWFyY2FDYXRlZ29yaWEpO1xyXG4gICAgICAgIG1hcmNhckNhdGVnb3JpYXNTZWxlY2Npb25hZGFzKCk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZXIgcGFyYSBzZWxlY2Npw7NuIGRlIGTDrWFcclxuICAgICAgICAkc2VsZWN0b3JEaWFzLm9uKCdjbGljaycsICdsaScsIGNsaWNrRGlhKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIGJvdG9uZXMgYXJyaWJhL2FiYWpvIGRlIGNhbmFsZXNcclxuICAgICAgICAkYm90b25lc0NhbmFsZXMub24oJ2NsaWNrJywgJy5idG4nLCBjbGlja05hdkNhbmFsZXMpO1xyXG4gICAgICAgIC8vIEhhbmRsZXIgcGFyYSBib3RvbmVzIGl6ZGEvZHJjaGEgZGVsIHZpZXdwb3J0XHJcbiAgICAgICAgJGljb25vc0hvcmFzLm9uKCdjbGljaycsICcuYnRuJywgY2xpY2tOYXZIb3Jhcyk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZ1bmNpw7NuIHF1ZSBtYW5lamEgbGFzIGFjdHVhbGl6YWNpb25lcyBkZSBlc3RhZG8gZGUgbGEgcGFycmlsbGEgYWwgYXJyYXN0cmFyXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2ZW50ICAgICBPYmpldG8gY29tcGxldG8gZGVsIGV2ZW50byBsYW56YWRvXHJcbiAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSBwaGFzZSAgICAgRmFzZSBkZSBhcnJhc3RyZSBlbiBsYSBxdWUgbm9zIGVuY29udHJhbW9zXHJcbiAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSBkaXJlY3Rpb24gRGlyZWNjacOzbiBkZSBhcnJhc3RyZVxyXG4gICAgICAgICAqIEBwYXJhbSAge0ludH0gZGlzdGFuY2UgIERpc3RhbmNpYSBhcnJhc3RyYWRhIHBvciBlbCB1c3VhcmlvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gc3dpcGVTdGF0dXMoZXZlbnQsIHBoYXNlLCBkaXJlY3Rpb24sIGRpc3RhbmNlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAocGhhc2UgPT0gJ3N0YXJ0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydFRvcCA9IHBhcnNlSW50KHRoaXMuY3NzKCd0b3AnKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0TGVmdCA9IHBhcnNlSW50KHRoaXMuY3NzKCdsZWZ0JykpO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuYWRkQ2xhc3MoJ2RyYWdnaW5nJyk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBoYXNlID09ICdtb3ZlJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRYID0gMCxcclxuICAgICAgICAgICAgICAgICAgICBkWSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09ICd1cCcgfHwgZGlyZWN0aW9uID09ICdkb3duJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRZID0gKGRpcmVjdGlvbiA9PSAndXAnKSA/IC1kaXN0YW5jZSA6IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAnbGVmdCcgfHwgZGlyZWN0aW9uID09ICdyaWdodCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBkWCA9IChkaXJlY3Rpb24gPT0gJ2xlZnQnKSA/IC1kaXN0YW5jZSA6IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBudG9wID0gdGhpcy5zdGFydFRvcCArIGRZO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5sZWZ0ID0gdGhpcy5zdGFydExlZnQgKyBkWDtcclxuICAgICAgICAgICAgICAgIC8vIEzDrW1pdGUgdG9wIChhbHRvICRiYXJyYUhvcmFzKVxyXG4gICAgICAgICAgICAgICAgaWYgKG50b3AgPiBhbHRvQmFycmFIb3Jhcykge1xyXG4gICAgICAgICAgICAgICAgICAgIG50b3AgPSBhbHRvQmFycmFIb3JhcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEzDrW1pdGUgYm90dG9tIChhbHRvVmlld3BvcnQgLSBhbHRvUHJvZ3JhbWFzKVxyXG4gICAgICAgICAgICAgICAgaWYgKG50b3AgPCAoYWx0b1ZpZXdwb3J0IC0gYWx0b0NvbnRQcm9ncmFtYXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnRvcCA9IChhbHRvVmlld3BvcnQgLSBhbHRvQ29udFByb2dyYW1hcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIHJpZ2h0ICg3MHB4IGFuY2hvICRjb250Q2FuYWxlcylcclxuICAgICAgICAgICAgICAgIGlmIChubGVmdCA+IGFuY2hvQmFycmFDYW5hbGVzICsgTWF0aC5hYnMobWluSXpkYSkgKyA1MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5sZWZ0ID0gYW5jaG9CYXJyYUNhbmFsZXMgKyBNYXRoLmFicyhtaW5JemRhKSArIDUwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTMOtbWl0ZSBsZWZ0IChhbmNob1ZpZXdwb3J0IG1lbm9zIGVsIGFuY2hvIHRvdGFsIGRlIHByb2dyYW1hcylcclxuICAgICAgICAgICAgICAgIGlmIChubGVmdCA8IGFuY2hvVmlld3BvcnQgLSA1MCAtIE1hdGguYWJzKG1heERyY2gpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmxlZnQgPSBhbmNob1ZpZXdwb3J0IC0gNTAgLSBNYXRoLmFicyhtYXhEcmNoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiBudG9wICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IG5sZWZ0ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkY29udENhbmFsZXMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAndG9wJzogbnRvcCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGJhcnJhSG9yYXMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IG5sZWZ0ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG9yYUxlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLmgpICogcGl4ZWxzUG9ySG9yYSxcclxuICAgICAgICAgICAgICAgICAgICBtaW51dG9zTGVmdCA9IHBhcnNlSW50KGhvcmFBY3R1YWwubSkgKiBwaXhlbHNQb3JNaW51dG8sXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWCA9IGhvcmFMZWZ0ICsgbWludXRvc0xlZnQgKyBubGVmdDtcclxuICAgICAgICAgICAgICAgICRob3JhQWN0dWFsLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBwb3NYICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwaGFzZSA9PSAnY2FuY2VsJykge1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMucmVtb3ZlQ2xhc3MoJ2RyYWdnaW5nJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGhhc2UgPT0gJ2VuZCcpIHtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBkZWwgY2xpY2sgZW4gdW4gaXRlbUhvcmFzXHJcbiAgICAgICAgICogQHBhcmFtICB7ZXZlbnR9IGV2ZW50IE9iamV0byBldmVudG8gY29uIHRvZGEgbGEgaW5mbyBkZWwgY2xpY2tcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tIb3JhKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkKHRoaXMpLmNzcygnbGVmdCcpKTtcclxuICAgICAgICAgICAgbXVldmVBID0gcGFyc2VJbnQoKGFuY2hvVmlld3BvcnQgKiAuNSkgLSBtdWV2ZUEpO1xyXG4gICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhtdWV2ZUEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhbmRsZXIgZGVsIGNsaWNrIGVuIHVuIGTDrWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgT2JqZXRvIGV2ZW50IGNvbiB0b2RhIGxhIGluZm8gZGVsIGNsaWNrXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrRGlhKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkKHRoaXMpLmRhdGEoJ3B4JykpICogLTE7XHJcbiAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKG11ZXZlQSArIGFuY2hvQmFycmFDYW5hbGVzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYW5kbGVyIGRlbCBjbGljayBlbiB1biBpdGVtUHJvZ3JhbWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgT2JqZXRvIGV2ZW50byBjb24gdG9kYSBsYSBpbmZvIGRlbCBjbGlja1xyXG4gICAgICAgICAqIEBwYXJhbSAge2RvbU9ian0gdGFyZ2V0IE9iamV0byBET00gZW4gZWwgcXVlIGhlbW9zIGludGVyYWN0dWFkb1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja1Byb2dyYW1hKGV2ZW50LCB0YXJnZXQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkZWxlbVBhZHJlID0gJCh0YXJnZXQpLmlzKCcuaXRlbVByb2dyYW1hJykgPyAkKHRhcmdldCkgOiAkKHRhcmdldCkuY2xvc2VzdCgnLml0ZW1Qcm9ncmFtYScpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb2dVcmwgPSAkZWxlbVBhZHJlLmZpbmQoJ2EnKS5hdHRyKCdocmVmJyksXHJcbiAgICAgICAgICAgICAgICBwcm9nSWQgPSAkZWxlbVBhZHJlLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAgIGNhcmdhRmljaGFQcm9ncmFtYShwcm9nSWQsIHByb2dVcmwpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG11ZXZlQSA9IHBhcnNlSW50KCRlbGVtUGFkcmUuY3NzKCdsZWZ0JykpICsgJGVsZW1QYWRyZS53aWR0aCgpICogLjU7XHJcbiAgICAgICAgICAgIG11ZXZlQSA9IHBhcnNlSW50KChhbmNob1ZpZXdwb3J0ICogLjUpIC0gbXVldmVBKTtcclxuICAgICAgICAgICAgbXVldmVQcm9ncmFtYXNBUHVudG8obXVldmVBKTtcclxuXHJcbiAgICAgICAgICAgIC8qIFZlcmnDs24gbm8gbW9iaWxlXHJcbiAgICAgICAgICAgIGlmICghc2VIYU1vdmlkbykge1xyXG4gICAgICAgICAgICAgICAgaXNEcmFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPIENvbXBhdGliaWxpZGFkIGNvbiBpUGFkIGFudGlndW9zIC4uXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSksXHJcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1QYWRyZSA9ICQoZWxlbSkuaXMoJy5pdGVtUHJvZ3JhbWEnKSA/ICQoZWxlbSkgOiAkKGVsZW0pLmNsb3Nlc3QoJy5pdGVtUHJvZ3JhbWEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvZ1VybCA9ICRlbGVtUGFkcmUuZmluZCgnYScpLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9nSWQgPSAkZWxlbVBhZHJlLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgICBjYXJnYUZpY2hhUHJvZ3JhbWEocHJvZ0lkLCBwcm9nVXJsKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbXVldmVBID0gcGFyc2VJbnQoJGVsZW1QYWRyZS5jc3MoJ2xlZnQnKSkgKyAkZWxlbVBhZHJlLndpZHRoKCkgKiAuNTtcclxuICAgICAgICAgICAgICAgIG11ZXZlQSA9IHBhcnNlSW50KChhbmNob1ZpZXdwb3J0ICogLjUpIC0gbXVldmVBKTtcclxuICAgICAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKG11ZXZlQSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKi9cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXJnYSBwb3IgYWpheCBsYSBpbmZvcm1hY2nDs24gYsOhc2ljYSBkZSBsYSBmaWNoYSBkZSBwcm9ncmFtYVxyXG4gICAgICAgICAqIEBwYXJhbSAge2ludH0gcHJvZ0lkICBJZCBkZWwgcHJvZ3JhbWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHByb2dVcmwgVXJsIGNvbXBsZXRhIGRlIGxhIHJ1dGEgcGFyYSBjYXJnYXIgbGEgZmljaGFcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FyZ2FGaWNoYVByb2dyYW1hKHByb2dJZCwgcHJvZ1VybCkge1xyXG4gICAgICAgICAgICAvLyBUT0RPIFByb2JhciBlbiBlbnRvcm5vIGRlIHBydWViYXMgZWxtdW5kby5lc1xyXG4gICAgICAgICAgICAvL3Byb2dVcmwgPSAnaHR0cDovL3d3dy5lbG11bmRvLmVzJyArIHByb2dVcmw7XHJcbiAgICAgICAgICAgIGNpZXJyYUZpY2hhKCk7XHJcblxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcImZpY2hhUHJvZ3JhbWEuaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICdwcm9nSWQnOiBwcm9nSWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbihodG1sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5jb250ZW5pZG8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChodG1sKTtcclxuICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKS5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlPU05hdGl2ZVNjcm9sbGluZzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDAsICdzd2luZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYS5maW5kKCcuY2llcnJhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaWVycmFGaWNoYSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaWVycmFGaWNoYSgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCgkZmljaGFQcm9ncmFtYS5jc3MoJ3JpZ2h0JykpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWEuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogLXBpeGVsc1BvckhvcmFcclxuICAgICAgICAgICAgICAgICAgICB9LCAzMDAsICdzd2luZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXJjYSBjb21vIGFjdGl2YXMgbGFzIGNhdGVnb3LDrWFzIGRlIHByb2dyYW1hIHNlbGVjY2lvbmFkYXNcclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgT2JqZXRvIGRlIGV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtYXJjYUNhdGVnb3JpYShldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY2xhc2UgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkY29udFByb2dyYW1hcy5oYXNDbGFzcyhjbGFzZSkpIHtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLnJlbW92ZUNsYXNzKGNsYXNlKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuYWRkQ2xhc3MoY2xhc2UpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXJjYSB0b2RhcyBsYXMgY2F0ZWdvcsOtYXMgc2VsZWNjaW9uYWRhcyBwb3IgZGVmZWN0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtYXJjYXJDYXRlZ29yaWFzU2VsZWNjaW9uYWRhcygpIHtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3JpYXNVc3VhcmlvLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goY2F0ZWdvcmlhc1VzdWFyaW8sIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgICAgICAgICB2Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdG9yQ2F0ZWdvcmlhcy5maW5kKCdsaTpudGgtY2hpbGQoJyArIHYgKyAnKScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE11ZXZlIGVsIGNvbnRQcm9ncmFtYXMgYSBsYSBwb3NpY2nDs24gZGFkYVxyXG4gICAgICAgICAqIEBwYXJhbSAge2ludH0gY29vcmRYIENvb3JkZW5hZGEgbGVmdFxyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtdWV2ZVByb2dyYW1hc0FQdW50byhjb29yZFgpIHtcclxuICAgICAgICAgICAgdmFyIG5sZWZ0ID0gY29vcmRYIHx8IDA7XHJcbiAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogbmxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICRiYXJyYUhvcmFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogbmxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgIHZhciBob3JhTGVmdCA9IHBhcnNlSW50KGhvcmFBY3R1YWwuaCkgKiBwaXhlbHNQb3JIb3JhO1xyXG4gICAgICAgICAgICB2YXIgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgICAgICB2YXIgcG9zWCA9IGhvcmFMZWZ0ICsgbWludXRvc0xlZnQgKyBubGVmdDtcclxuICAgICAgICAgICAgJGhvcmFBY3R1YWwuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBwb3NYICsgJ3B4J1xyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlc3BsYXphIGxhIHZpc3RhIGRlIHZpZXdwb3J0IGFycmliYS9hYmFqb1xyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBPYmpldG8gY29uIHRvZGEgbGEgaW5mb3JtYWNpw7NuIGRlbCBldmVudG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tOYXZDYW5hbGVzKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzZSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgICAgICB2YXIgcG9zWVByb2dyYW1hcyA9ICRjb250UHJvZ3JhbWFzLmNzcygndG9wJykuc3BsaXQoJ3B4JylbMF07XHJcbiAgICAgICAgICAgIHZhciBwb3NZQ2FuYWxlcyA9ICRjb250Q2FuYWxlcy5jc3MoJ3RvcCcpLnNwbGl0KCdweCcpWzBdO1xyXG4gICAgICAgICAgICB2YXIgbnVtQ2FuYWxlcyA9ICRjb250Q2FuYWxlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoY2xhc2UpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2J0bkFycmliYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTW92ZW1vcyBjb250UHJvZ3JhbWFzIHkgY29udENhbmFsZXNcclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zWUNhbmFsZXMgLSBhbHRvQ2FuYWwgPiBhbHRvQmFycmFIb3Jhcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udENhbmFsZXMuY3NzKCd0b3AnLCBwb3NZQ2FuYWxlcyAtIGFsdG9DYW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmNzcygndG9wJywgcG9zWVByb2dyYW1hcyAtIGFsdG9DYW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRDYW5hbGVzLmNzcygndG9wJywgYWx0b0JhcnJhSG9yYXMgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuY3NzKCd0b3AnLCBhbHRvQmFycmFIb3JhcyArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2J0bkFiYWpvJzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlbW9zIGNvbnRQcm9ncmFtYXMgeSBjb250Q2FuYWxlc1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSBwb3NZQ2FuYWxlcyAtIG51bUNhbmFsZXMgKiBhbHRvQ2FuYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heCA+IHBvc1lDYW5hbGVzICsgYWx0b0NhbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250Q2FuYWxlcy5jc3MoJ3RvcCcsIHBvc1lDYW5hbGVzICsgYWx0b0NhbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuY3NzKCd0b3AnLCBwb3NZUHJvZ3JhbWFzICsgYWx0b0NhbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udENhbmFsZXMuY3NzKCd0b3AnLCBtYXggKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuY3NzKCd0b3AnLCBtYXggKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXNwbGF6YSBsYSB2aXN0YSBkZWwgdmlld3BvcnQgYSBsb3MgbGFkb3NcclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgT2JqZXRvIGNvbiB0b2RhIGxhIGluZm9ybWFjacOzbiBkZWwgZXZlbnRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrTmF2SG9yYXMoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNlID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMV07XHJcbiAgICAgICAgICAgIHZhciBwb3NYID0gcGFyc2VJbnQoJGNvbnRQcm9ncmFtYXMuY3NzKCdsZWZ0JykpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocG9zWCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGNsYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdidG5JemRhJzpcclxuICAgICAgICAgICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhNYXRoLmZsb29yKHBhcnNlSW50KHBvc1ggKyBwaXhlbHNQb3JIb3JhKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYnRuRHJjaGEnOlxyXG4gICAgICAgICAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKE1hdGguZmxvb3IocGFyc2VJbnQocG9zWCAtIHBpeGVsc1BvckhvcmEpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgZWwgdG90YWwgZGUgY2FuYWxlcyBhIGxvcyBxdWUgc2UgcHVlZGUgc3VzY3JpYmlyIHkgbGFzIGxldHJhcyBjb3JyZXNwb25kaWVudGVzXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhTGlzdGFkb0NhbmFsZXNTdXNjcmlwY2lvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIHVsTGV0cmFzID0gJCgnPHVsIGNsYXNzPVwibGlzdGFDYW5hbGVzIGNsZWFyZml4XCI+JyksXHJcbiAgICAgICAgICAgIGZpY2hlcm8gPSAnZGF0b3MvbGlzdGFkb2NhbmFsZXMuanNvbic7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0TGV0cmFzID0ge30sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlTGV0cmFzID0gJ3t7bGV0cmFzfX08bGkgY2xhc3M9XCJpdGVtTGV0cmFcIiBkYXRhLWxldHJhPVwie3sufX1cIj57ey59fTwvbGk+e3svbGV0cmFzfX0nO1xyXG5cclxuICAgICAgICBjb250ZXh0TGV0cmFzLmxldHJhcyA9IFtdO1xyXG5cclxuICAgICAgICAvLyAoR2VuZXJhIGVsIGJhY2tlbmQpXHJcbiAgICAgICAgJC5nZXQoZmljaGVybylcclxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FuYWxlc0dsb2JhbCA9IGRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHRDYW5hbGVzID0ge30sXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVDYW5hbGVzID0gJ3t7Y2FuYWxlc319PGxpIGNsYXNzPVwiaXRlbUNhbmFsXCIgZGF0YS1sZXRyYT1cInt7Y3VycmVudExldHJhfX1cIiAnICtcclxuICAgICAgICAgICAgICAgICAgICAnZGF0YS1pZGNhbmFsPVwie3tpZF9wcm9ncmFtYX19XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiY2hlY2tcIj48L3NwYW4+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgLy8nPGltZyBzcmM9XCJ7e2ljb25vfX1cIiAvPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICd7e25vbWJyZV9jb21wbGV0b3xjaG9wPjIzfX08L2xpPnt7L2NhbmFsZXN9fSc7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGNhbmFsZXNHbG9iYWwsIGZ1bmN0aW9uKGksIHYpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgTWFyay5nbG9iYWxzLmN1cnJlbnRMZXRyYSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dENhbmFsZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldHJhOiBpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5hbGVzOiB2XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dExldHJhcy5sZXRyYXMucHVzaChpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdENhbmFsZXMgPSBNYXJrLnVwKHRlbXBsYXRlQ2FuYWxlcywgY29udGV4dENhbmFsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVsTGV0cmFzLmFwcGVuZChyZXN1bHRDYW5hbGVzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIExpc3RhZG8gY29uIHRvZGFzIGxhcyBsZXRyYXNcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRMZXRyYXMgPSBNYXJrLnVwKHRlbXBsYXRlTGV0cmFzLCBjb250ZXh0TGV0cmFzKTtcclxuICAgICAgICAgICAgICAgICRiYXJyYUxldHJhcy5maW5kKCcubGlzdGFMZXRyYXMnKS5hcHBlbmQocmVzdWx0TGV0cmFzKTtcclxuICAgICAgICAgICAgICAgIC8vIExpc3RhZG8gZGUgdG9kb3MgbG9zIGNhbmFsZXNcclxuICAgICAgICAgICAgICAgICRiYXJyYUxldHJhcy5maW5kKCcubmFuby1jb250ZW50JykuaHRtbCh1bExldHJhcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9Db21wcm9iYW1vcyBzaSB5YSBlc3RhbW9zIHN1c2NyaXRvcyBhIGNhZGEgY2FuYWxcclxuICAgICAgICAgICAgICAgICQuZWFjaCgkYmFycmFMZXRyYXMuZmluZCgnLml0ZW1DYW5hbCcpLCBmdW5jdGlvbihpLCB2KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5hbGVzVXN1YXJpby5pbmRleE9mKCQodGhpcykuZGF0YSgnaWRjYW5hbCcpKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jaGVjaycpLmFkZENsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkYmFycmFMZXRyYXNcclxuICAgICAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKS5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGw6ICd0b3AnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50UGFnZVNjcm9sbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaU9TTmF0aXZlU2Nyb2xsaW5nOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSBsb3MgY2FuYWxlcyBhIGxvcyBxdWUgZXN0w6Egc3VzY3JpdG8gZWwgdXN1YXJpbyAobyBkZWZlY3RvKVxyXG4gICAgICogUGVybWl0ZSByZW9yZGVuYXIgbG9zIGNhbmFsZXMsIGRlc3VzY3JpYmlyc2UgeSBndWFyZGFyIGxhIGNvbmZpZ3VyYWNpw7NuXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhTGlzdGFkb0NhbmFsZXNTZWxlY2Npb25hZG9zKCkge1xyXG5cclxuICAgICAgICB2YXIgdWxDYW5hbGVzID0gJCgnPHVsIGNsYXNzPVwib3JkZW4gdmVydGljYWxcIj4nKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGxpIGNsYXNzPVwiaXRlbUNhbmFsXCIgZGF0YS1pZGNhbmFsPVwie3tub21icmV9fVwiPicgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjaGVjayBzZWxcIj48L3NwYW4+JyArXHJcbiAgICAgICAgICAgIC8vJzxpbWcgc3JjPVwiaHR0cDovL2VzdGF0aWNvcy5lbG11bmRvLmVze3tpY29ub319XCIgLz4nICtcclxuICAgICAgICAgICAgJ3t7bm9tYnJlX2NvbXBsZXRvfGNob3A+MjN9fTwvbGk+JztcclxuXHJcbiAgICAgICAgJC5lYWNoKGFycmF5Q2FuYWxlcywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBjb250ZXh0ID0gdi5jYW5hbDtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB1bENhbmFsZXMuYXBwZW5kKHJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRvcmRlbkNhbmFsZXMuZmluZCgnLm5hbm8tY29udGVudCcpLmh0bWwodWxDYW5hbGVzKTtcclxuICAgICAgICAkb3JkZW5DYW5hbGVzXHJcbiAgICAgICAgICAgIC5maW5kKCcubmFubycpXHJcbiAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGlPU05hdGl2ZVNjcm9sbGluZzogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBbbGFuemFIYW5kbGVyc1N1c2NyaXBpY2lvbiBkZXNjcmlwdGlvbl1cclxuICAgICAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBsYW56YUhhbmRsZXJzU3VzY3JpcGljaW9uKCkge1xyXG5cclxuICAgICAgICAvLyBDbGljayBlbiBpdGVtcyBkZSBzdXNjcmlwY2nDs25cclxuICAgICAgICAkYmFycmFMZXRyYXMub24oJ2NsaWNrJywgJy5pdGVtQ2FuYWwnLCBjbGlja0l0ZW1DYW5hbCk7XHJcblxyXG4gICAgICAgIC8vIENsaWNrIGVuIGNoZWNrcyBlbiBlbCBwYW5lbCBkZSBzdXNjcml0b3NcclxuICAgICAgICAkb3JkZW5DYW5hbGVzLm9uKCdjbGljaycsICcuY2hlY2snLCBjbGlja0NoZWNrT3JkZW5DYW5hbCk7XHJcblxyXG4gICAgICAgIC8vIENsaWNrIGVuIHN1c2NyaWJpckNhbmFsZXMgcXVlIGhhY2UgYXBhcmVjZXIgZWwgc2VsZWN0b3JcclxuICAgICAgICAkc3VzY3JpYmlyQ2FuYWxlcy5vbignY2xpY2snLCB0b2dnbGVTdXNjcmlwY2lvbik7XHJcblxyXG4gICAgICAgIC8vIENsaWNrIGVuIGxldHJhcyBkZSBmaWx0cm9cclxuICAgICAgICAkYmFycmFMZXRyYXMub24oJ2NsaWNrJywgJy5pdGVtTGV0cmEnLCBjbGlja0ZpbHRyb0xldHJhKTtcclxuXHJcbiAgICAgICAgLy8gSW50cm9kdWNjacOzbiBkZSB0ZXh0byBlbiBjYW1wbyB0eHRCdXNjYXJcclxuICAgICAgICAkYmFycmFMZXRyYXMub24oJ2NsaWNrJywgJy5mYS1zZWFyY2gnLCBmaWx0cm9DYW5hbCk7XHJcbiAgICAgICAgJCgnI3R4dEJ1c2NhcicpLm9uKCdrZXl1cCcsIGZpbHRyb0NhbmFsKTtcclxuXHJcbiAgICAgICAgLy8gUmVvcmRlbmFjacOzbiBkZSBlbGVtZW50b3MgZGUgY2FuYWwsIGRyYWcgJiBkcm9wXHJcbiAgICAgICAgdmFyIGFkanVzdG1lbnQ7XHJcbiAgICAgICAgdmFyIGdyb3VwID0gJG9yZGVuQ2FuYWxlcy5maW5kKCd1bC5vcmRlbicpLnNvcnRhYmxlKHtcclxuICAgICAgICAgICAgZ3JvdXA6ICdvcmRlbicsXHJcbiAgICAgICAgICAgIHB1bGxQbGFjZWhvbGRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gYW5pbWF0aW9uIG9uIGRyb3BcclxuICAgICAgICAgICAgb25Ecm9wOiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZ3JvdXAuc29ydGFibGUoXCJzZXJpYWxpemVcIikuZ2V0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsICcgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyICRjbG9uZWRJdGVtID0gJCgnPGxpLz4nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5iZWZvcmUoJGNsb25lZEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgJGNsb25lZEl0ZW0uZGV0YWNoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3N1cGVyKCRpdGVtLCBjb250YWluZXIpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gc2V0ICRpdGVtIHJlbGF0aXZlIHRvIGN1cnNvciBwb3NpdGlvblxyXG4gICAgICAgICAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gJGl0ZW0ub2Zmc2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlciA9IGNvbnRhaW5lci5yb290R3JvdXAucG9pbnRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZW5lbW9zIGVuIGN1ZW50YSBsYSBwb3NpY2nDs24gZGVsIG5hbm9TY3JvbGxlciBlbiBlc2UgbW9tZW50b1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvc0luaVNjcm9sbGVyID0gJG9yZGVuQ2FuYWxlcy5maW5kKCcubmFuby1jb250ZW50JykuZ2V0KDApLnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgIHBvc0luaVNjcm9sbGVyID0gTWF0aC5mbG9vcihwb3NJbmlTY3JvbGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgYWRqdXN0bWVudCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBwb2ludGVyLmxlZnQgLSBvZmZzZXQubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IHBvaW50ZXIudG9wIC0gb2Zmc2V0LnRvcCAtIHBvc0luaVNjcm9sbGVyXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIF9zdXBlcigkaXRlbSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25EcmFnOiBmdW5jdGlvbigkaXRlbSwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICRpdGVtLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCAtIGFkanVzdG1lbnQubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCAtIGFkanVzdG1lbnQudG9wXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBkZSBjbGlja2FyIGVuIHVuIGl0ZW1DYW5hbCBkZSBsYSBsaXN0YSBkZSBjYW5hbGVzIGRlIHN1c2NyaXBjacOzblxyXG4gICAgICAgICAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBFdmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tJdGVtQ2FuYWwoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkY2hlY2sgPSAkKHRoaXMpLmZpbmQoJy5jaGVjaycpO1xyXG4gICAgICAgICAgICB2YXIgYm9vbCA9ICRjaGVjay5oYXNDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgIHZhciBpZGNhbmFsID0gJCh0aGlzKS5kYXRhKCdpZGNhbmFsJyk7XHJcbiAgICAgICAgICAgIHZhciAkaXRlbXNDYW5hbCA9ICRvcmRlbkNhbmFsZXMuZmluZCgnLml0ZW1DYW5hbCcpLmZpbHRlcihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgnaWRjYW5hbCcpID09PSBpZGNhbmFsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghYm9vbCkgeyAvLyBzaSBudWVzdHJvIGVsZW1lbnRvIG5vIGVzdMOhIHNlbGVjY2lvbmFkb1xyXG5cclxuICAgICAgICAgICAgICAgICRjaGVjay50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJGl0ZW1zQ2FuYWwubGVuZ3RoKSB7IC8vIHNpIHlhIGV4aXN0ZSBlc3RlIGNhbmFsIGVuIGVsIHBhbmVsIGRlIG9yZGVuXHJcbiAgICAgICAgICAgICAgICAgICAgJGl0ZW1zQ2FuYWwuZmluZCgnLmNoZWNrJykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gc2kgbm8gZXhpc3RlIGVzdGUgY2FuYWwgZW4gZWwgcGFuZWwgZGUgb3JkZW5cclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb25lKCkuYXBwZW5kVG8oJG9yZGVuQ2FuYWxlcy5maW5kKCd1bCcpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIHNpIG51ZXN0cm8gZWxlbWVudG8gZXN0w6Egc2VsZWNjaW9uYWRvXHJcbiAgICAgICAgICAgICAgICAkY2hlY2sudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgJGl0ZW1zQ2FuYWwuZmluZCgnLmNoZWNrJykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkb3JkZW5DYW5hbGVzXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcigpXHJcbiAgICAgICAgICAgICAgICAubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6ICdib3R0b20nLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZ1bmNpb25hbGlkYWQgZGUgY2xpY2thciBlbCBjaGVja2JveCBlbiBsb3MgaXRlbXNDYW5hbCBkZWwgcGFuZWwgZGUgb3JkZW5cclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgRXZlbnRvIGNvbXBsZXRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrQ2hlY2tPcmRlbkNhbmFsKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdmFyIGlkY2FuYWwgPSAkKHRoaXMpLnBhcmVudCgnLml0ZW1DYW5hbCcpLmRhdGEoJ2lkY2FuYWwnKTtcclxuICAgICAgICAgICAgdmFyICRpdGVtc0NhbmFsID0gJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtQ2FuYWwnKS5maWx0ZXIoZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmRhdGEoJ2lkY2FuYWwnKSA9PT0gaWRjYW5hbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgJGl0ZW1zQ2FuYWwuZmluZCgnLmNoZWNrJykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhY2UgYXBhcmVjZXIgbyBkZXNhcGFyZWNlciBsYSBjYXBhIGNvbiB0b2RhIGxhIGluZm9ybWFjacOzbiBkZSBzdXNjcmlwY2nDs25cclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgRXZlbnRvIGNvbXBsZXRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZVN1c2NyaXBjaW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICAkc2VsZWN0b3JDYW5hbGVzLnRvZ2dsZSgnZmFzdCcpO1xyXG4gICAgICAgICAgICAkb3JkZW5DYW5hbGVzXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcigpXHJcbiAgICAgICAgICAgICAgICAubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6ICd0b3AnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkYmFycmFMZXRyYXNcclxuICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpXHJcbiAgICAgICAgICAgICAgICAubmFub1Njcm9sbGVyKClcclxuICAgICAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlsdHJhIGxhIHNlbGVjY2nDs24gZGUgY2FuYWxlcyBwb3Igc3UgbGV0cmEgZGUgY29taWVuem9cclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgRXZlbnRvIGNvbXBsZXRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrRmlsdHJvTGV0cmEoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyICRsZXRyYSA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciAkaGVybWFub3MgPSAkKHRoaXMpLnNpYmxpbmdzKCcuaXRlbUxldHJhJyk7XHJcbiAgICAgICAgICAgIHZhciBsZXRyYSA9ICRsZXRyYS5kYXRhKCdsZXRyYScpO1xyXG4gICAgICAgICAgICB2YXIgJGNvbGVjY2lvbiA9ICRiYXJyYUxldHJhcy5maW5kKCcuaXRlbUNhbmFsJyk7XHJcbiAgICAgICAgICAgIHZhciB5YUNsaWNrYWRvID0gJGxldHJhLmhhc0NsYXNzKCdhY3Rpdm8nKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh5YUNsaWNrYWRvKSB7XHJcbiAgICAgICAgICAgICAgICAkY29sZWNjaW9uLnNob3coKTtcclxuICAgICAgICAgICAgICAgICRsZXRyYS5yZW1vdmVDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgICAgICAkaGVybWFub3MucmVtb3ZlQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyICRzZWwgPSAkY29sZWNjaW9uLmZpbHRlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5kYXRhKCdsZXRyYScpID09IGxldHJhO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkc2VsLnNob3coKTtcclxuICAgICAgICAgICAgICAgICRjb2xlY2Npb24ubm90KCRzZWwpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICRoZXJtYW5vcy5yZW1vdmVDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgICAgICAkbGV0cmEuYWRkQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkYmFycmFMZXRyYXNcclxuICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpXHJcbiAgICAgICAgICAgICAgICAubmFub1Njcm9sbGVyKClcclxuICAgICAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaWx0cmEgbGEgc2VsZWNjacOzbiBkZSBjYW5hbGVzIHBvciB1bmEgY2FkZW5hIGRlIHRleHRvXHJcbiAgICAgICAgICogQHBhcmFtICB7U3RyaW5nfSBjYWRlbmEgVGV4dG8gcGFyYSBjb21wYXJhciBjb24gZWwgbm9tYnJlIGRlbCBjYW5hbFxyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBmaWx0cm9DYW5hbChldmVudCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldmVudC50eXBlKTtcclxuICAgICAgICAgICAgdmFyICRjYW1wb1R4dCA9ICQoJyN0eHRCdXNjYXInKSxcclxuICAgICAgICAgICAgICAgIGNhZGVuYSA9ICRjYW1wb1R4dC52YWwoKSxcclxuICAgICAgICAgICAgICAgICRzZWw7XHJcbiAgICAgICAgICAgIHZhciAkY29sZWNjaW9uID0gJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtQ2FuYWwnKTtcclxuICAgICAgICAgICAgaWYgKGNhZGVuYS5sZW5ndGggPj0gMyAmJiBjYWRlbmEgIT0gJyAnICYmIGNhZGVuYSAhPSAnJyAmJiBjYWRlbmEgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAkc2VsID0gJGNvbGVjY2lvbi5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vbWJyZUNhbmFsID0gJC50cmltKCQodGhpcykudGV4dCgpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9tYnJlQ2FuYWwuaW5kZXhPZihjYWRlbmEpID4gLTE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRzZWwuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJGNvbGVjY2lvbi5ub3QoJHNlbCkuaGlkZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtTGV0cmEnKS5yZW1vdmVDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgICAgICAkY29sZWNjaW9uLnNob3coKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKiogSU5JVCAqKi9cclxuICAgIChmdW5jdGlvbiBpbml0KCkge1xyXG5cclxuICAgICAgICAkc2VsZWN0b3JDYW5hbGVzLmhpZGUoKTtcclxuXHJcbiAgICAgICAgdmFyIGNhcmdhSW5mb0Nvb2tpZXMgPSBjYXJnYUNvb2tpZXMoKTtcclxuICAgICAgICB2YXIgY2FyZ2FJbmZvQ2FuYWxlcyA9IGNhcmdhSW5mb0Nvb2tpZXMudGhlbihmdW5jdGlvbihyZXMpIHtcclxuICAgICAgICAgICAgICAgIGNhbmFsZXNVc3VhcmlvID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhcmdhRGF0b3NDYW5hbGVzKGNhbmFsZXNVc3VhcmlvKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBwaW50YUNhbmFsZXMoY2FuYWxlc1VzdWFyaW8pOyAvLyBQaW50YXIgZW4gZWwgb3JkZW4gZW4gcXVlIGxsZWdhbiBkZSBsYSBjb29raWVcclxuICAgICAgICAgICAgICAgIHBpbnRhUGFycmlsbGEoY2FuYWxlc1VzdWFyaW8sIGFycmF5Q2FuYWxlcyk7IC8vIFBpbnRhciBlbiBlbCBvcmRlbiBlbiBxdWUgbGxlZ2FuIGRlIGxhIGNvb2tpZVxyXG4gICAgICAgICAgICAgICAgcGludGFIb3Jhc1BhcnJpbGxhKCk7IC8vIFBpbnRhciBsYSBiYXJyYSBzdXBlcmlvciBkZSBob3JhcmlvXHJcbiAgICAgICAgICAgICAgICBwaW50YVNlbGVjdG9yRGlhcygpOyAvLyBQaW50YW1vcyBsb3MgbGl0ZXJhbGVzIGRlIGxvcyBkw61hcyBjb250ZW1wbGFkb3MgZW4gcGFycmlsbGFcclxuXHJcbiAgICAgICAgICAgICAgICBwaW50YUhvcmFBY3R1YWwoKTsgLy8gUG9zaWNpb25hIGVsIG1hcmNhZG9yIGRlIGhvcmEgYWN0dWFsIGVuIGxhIHBhcnJpbGxhXHJcbiAgICAgICAgICAgICAgICBzaXR1YVBhcnJpbGxhQWhvcmEoKTsgLy8gUG9zaWNpb25hIGxhIHBhcnJpbGxhIHkgZWxlbWVudG9zIGVuIGxhIGZlY2hhIHkgaG9yYSBhY3R1YWxcclxuICAgICAgICAgICAgICAgIGxhbnphSGFuZGxlcnMoKTsgLy8gTGFuemEgdG9kb3MgbG9zIGV2ZW50IGxpc3RlbmVyc1xyXG5cclxuICAgICAgICAgICAgICAgIHBpbnRhTGlzdGFkb0NhbmFsZXNTZWxlY2Npb25hZG9zKCk7IC8vIFBpbnRhbW9zIGVsIMOhcmVhIGRlIGNhbmFsZXMgc2VsZWNjaW9uYWRvc1xyXG4gICAgICAgICAgICAgICAgcGludGFMaXN0YWRvQ2FuYWxlc1N1c2NyaXBjaW9uKCk7IC8vIFBpbnRhbW9zIGVsIHNlbGVjdG9yIGRlIGNhbmFsZXMgY29tcGxldG8gYWwgcGllXHJcblxyXG4gICAgICAgICAgICAgICAgbGFuemFIYW5kbGVyc1N1c2NyaXBpY2lvbigpOyAvLyBMYW56YSB0b2RvcyBsb3MgZXZlbnRzIGxpc3RlbmVycyBkZSBzdXNjcmlwY2nDs24gYSBjYW5hbGVzXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL2NhcmdhSW5mb1VzdWFyaW8oKTsgLy8gQ2FyZ2EgbGEgaW5mb3JtYWNpw7NuIHNvYnJlIHByb2dyYW1hcyBmYXZvcml0b3MgeSBhbGVydGFzIGRlIHVuIHVzdWFyaW8gdmFsaWRhZG9cclxuICAgICAgICAvL3BpbnRhUHJvZ3NVc3VhcmlvKCk7IC8vIE1vZGlmaWNhIGxhcyBjbGFzZXMgZGUgbG9zIHByb2dyYW1hcyBxdWUgZWwgdXN1YXJpbyB0ZW5nYSBjb21vIGZhdm9yaXRvcyBvIGFsZXJ0YXNcclxuXHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qKiBIZWxwZXIgKiovXHJcbiAgICAkLmZuLmV4aXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcblxyXG59KShqcTExMSk7XHJcblxyXG4vKipcclxuICogQ3JlYSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSAgTm9tYnJlIGRlIGxhIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtvYmplY3R9IHZhbHVlIFZhbG9yIGRlIGxhIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtpbnR9IGRheXMgIE7Dum1lcm8gZGUgZMOtYXMgZGUgdmlnZW5jaWFcclxuICogQHJldHVybiB7fVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ29va2llKG5hbWUsIHZhbHVlLCBkYXlzKSB7XHJcbiAgICB2YXIgZXhwaXJlcztcclxuXHJcbiAgICBpZiAoZGF5cykge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAoZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICBleHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvR01UU3RyaW5nKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV4cGlyZXMgPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgZG9jdW1lbnQuY29va2llID0gZXNjYXBlKG5hbWUpICsgXCI9XCIgKyBlc2NhcGUodmFsdWUpICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIjtcclxufVxyXG4vKipcclxuICogTGVlIHVuYSBjb29raWVcclxuICogQHBhcmFtICB7c3RyaW5nfSBuYW1lIE5vbWJyZSBkZSBsYSBjb29raWVcclxuICogQHJldHVybiB7c3RyaW5nfSAgICAgIFZhbG9yIGRlIGxhIGNvb2tpZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVhZENvb2tpZShuYW1lKSB7XHJcbiAgICB2YXIgbmFtZUVRID0gZXNjYXBlKG5hbWUpICsgXCI9XCI7XHJcbiAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IGNhW2ldO1xyXG4gICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PT0gJyAnKSBjID0gYy5zdWJzdHJpbmcoMSwgYy5sZW5ndGgpO1xyXG4gICAgICAgIGlmIChjLmluZGV4T2YobmFtZUVRKSA9PT0gMCkgcmV0dXJuIHVuZXNjYXBlKGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4vKipcclxuICogRWxpbWluYSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSBOb21icmUgZGUgbGEgY29va2llXHJcbiAqIEByZXR1cm4ge31cclxuICovXHJcbmZ1bmN0aW9uIGVyYXNlQ29va2llKG5hbWUpIHtcclxuICAgIGNyZWF0ZUNvb2tpZShuYW1lLCBcIlwiLCAtMSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXZ1ZWx2ZSB1biBuw7ptZXJvIGNvbW8gY2FkZW5hIGZvcm1hdGVhZGEgY29uIGNlcm9zIGEgbGEgaXpkYVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAgICAgICBFbCBuw7ptZXJvIG9yaWdpbmFsXHJcbiAqIEBwYXJhbSAge2ludGVnZXJ9IHRhcmdldExlbmd0aCBOw7ptZXJvIGRlIGNhcmFjdGVyZXMgcXVlIHF1ZXJlbW9zIG9idGVuZXJcclxuICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgICAgQ2FkZW5hIGNvbXB1ZXN0YSBkZSBjZXJvcyB5IGVsIG7Dum1lcm8gb3JpZ2luYWxcclxuICovXHJcbmZ1bmN0aW9uIGxlZnRQYWQobnVtYmVyLCB0YXJnZXRMZW5ndGgpIHtcclxuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgKyAnJztcclxuICAgIHdoaWxlIChvdXRwdXQubGVuZ3RoIDwgdGFyZ2V0TGVuZ3RoKSB7XHJcbiAgICAgICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb3RvdGlwbyBwYXJhIG9idGVuZXIgbsO6bWVyb3MgbcOheGltbyB5IG3DrW5pbW8gZW4gdW4gYXJyYXlcclxuICogQHJldHVybiB7aW50fSBEZXZ1ZWx2ZSBlbCBtYXgvbWluIGRlIHVuIGFycmF5IGRhZG9cclxuICovXHJcbkFycmF5LnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtYXggPSB0aGlzWzBdO1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKylcclxuICAgICAgICBpZiAodGhpc1tpXSA+IG1heCkgbWF4ID0gdGhpc1tpXTtcclxuICAgIHJldHVybiBtYXg7XHJcbn07XHJcbkFycmF5LnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtaW4gPSB0aGlzWzBdO1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKylcclxuICAgICAgICBpZiAodGhpc1tpXSA8IG1pbikgbWluID0gdGhpc1tpXTtcclxuICAgIHJldHVybiBtaW47XHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9