function createCookie(t,e,i){var n;if(i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),n="; expires="+r.toGMTString()}else n="";document.cookie=escape(t)+"="+escape(e)+n+"; path=/"}function readCookie(t){for(var e=escape(t)+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return unescape(r.substring(e.length,r.length))}return null}function eraseCookie(t){createCookie(t,"",-1)}function leftPad(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}!function(t,e,i,n){function r(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),n=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+n}function o(e,i,n,r){var o=e.length,s=r?"offset":"position";for(n=n||0;o--;){var a=e[o].el?e[o].el:t(e[o]),l=a[s]();l.left+=parseInt(a.css("margin-left"),10),l.top+=parseInt(a.css("margin-top"),10),i[o]=[l.left-n,l.left+a.outerWidth()+n,l.top-n,l.top+a.outerHeight()+n]}}function s(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function a(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var n,o=t.length,s=[];o--;)n=t[o],s[o]=[o,r(n,e),i&&r(n,i)];return s=s.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function l(e){this.options=t.extend({},p,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=n))}function c(e,i){this.el=e,this.options=t.extend({},u,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var n=this.rootGroup.options.itemPath;this.target=n?this.el.find(n):this.el,this.target.on(h.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var h,u={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},p={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",placeholderClass:"placeholder",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(t,e){t.css(e)},onDragStart:function(e,i){e.css({height:e.height(),width:e.width()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){return i.target.nodeName.match(/^(input|select|textarea)$/i)?void 0:(i.preventDefault(),!0)},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(e,i,n){var r=t.extend({},e.data());return n?[i]:(i[0]&&(r.children=i),delete r.subContainers,delete r.sortable,r)},tolerance:0},f={},d=0,g={left:0,top:0,bottom:0,right:0},h={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},v="subContainers";l.get=function(t){return f[t.group]||(t.group===n&&(t.group=d++),f[t.group]=new l(t)),f[t.group]},l.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,p.onMousedown,e)&&(this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,p.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,s(this.pointer,this.item.offsetParent()),p.onDrag,t);var e=t.pageX||t.originalEvent.pageX,i=t.pageY||t.originalEvent.pageY,r=this.sameResultBox,o=this.options.tolerance;(!r||r.top-o>i||r.bottom+o<i||r.left-o>e||r.right+o<e)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=n))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,p.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),p.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),r=i.length;r--;){var o=i[r][0],l=i[r][1];if(!l||this.options.pullPlaceholder){var c=this.containers[o];if(!c.disabled){if(!this.$getOffsetParent()){var h=c.getItemOffsetParent();t=s(t,h),e=s(e,h)}if(c.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(t,e,i,n){var r=this.lastAppendedItem;(n||!r||r[0]!==e[0])&&(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=n,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||o(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===n){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=s(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){return{left:t.pageX||t.originalEvent.pageX,top:t.pageY||t.originalEvent.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,n=["drag","drop","scroll"];t.each(n,function(t,n){i.$document[e](h[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=n},_destroy:function(){f[this.options.group]=n}},c.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=a(this.getItemDimensions(),t,e),n=i.length,r=this.rootGroup,o=!r.options.isValidTarget||r.options.isValidTarget(r.item,this);if(!n&&o)return r.movePlaceholder(this,this.target,"append"),!0;for(;n--;){var s=i[n][0],l=i[n][1];if(!l&&this.hasChildGroup(s)){var c=this.getContainerGroup(s).searchValidTarget(t,e);if(c)return!0}else if(o)return this.movePlaceholder(s,t),!0}},movePlaceholder:function(e,i){var n=t(this.items[e]),r=this.itemDimensions[e],o="after",s=n.outerWidth(),a=n.outerHeight(),l=n.offset(),c={left:l.left,right:l.left+s,top:l.top,bottom:l.top+a};if(this.options.vertical){var h=(r[2]+r[3])/2,u=i.top<=h;u?(o="before",c.bottom-=a/2):c.top+=a/2}else{var p=(r[0]+r[1])/2,f=i.left<=p;f?(o="before",c.right-=s/2):c.left+=s/2}this.hasChildGroup(e)&&(c=g),this.rootGroup.movePlaceholder(this,n,o,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),o(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var r=t.data(this.items[e],v);if(r===n){var o=this.$getChildren(this.items[e],"container");if(r=!1,o[0]){var s=t.extend({},this.options,{rootGroup:this.rootGroup,group:d++});r=o[i](s).data(i).group}t.data(this.items[e],v,r)}return r},$getChildren:function(e,i){var n=this.rootGroup.options,r=n[i+"Path"],o=n[i+"Selector"];return e=t(e),r&&(e=e.find(r)),e.children(o)},_serialize:function(e,i){var n=this,r=i?"item":"container",o=this.$getChildren(e,r).not(this.options.exclude).map(function(){return n._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,o,i)},traverse:function(e){t.each(this.items||[],function(){var i=t.data(this,v);i&&i.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=n},_destroy:function(){var e=this;this.target.off(h.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,v)})}};var m={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(c.prototype,m),t.fn[i]=function(e){var r=Array.prototype.slice.call(arguments,1);return this.map(function(){var o=t(this),s=o.data(i);return s&&m[e]?m[e].apply(s,r)||this:(s||e!==n&&"object"!=typeof e||o.data(i,new c(o,e)),this)})}}(jq111,window,"sortable"),function(t,e,i){"use strict";var n,r,o,s,a,l,c,h,u,p,f,d,g,v,m,b,w,T,S,y,x,C,M,P,D,k,O,E,I,_,$;M={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},T="scrollbar",w="scroll",u="mousedown",p="mouseenter",f="mousemove",g="mousewheel",d="mouseup",b="resize",a="drag",l="enter",y="up",m="panedown",o="DOMMouseScroll",s="down",x="wheel",c="keydown",h="keyup",S="touchmove",n="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,r=null,O=e.requestAnimationFrame,C=e.cancelAnimationFrame,I=i.createElement("div").style,$=function(){var t,e,i,n,r,o;for(n=["t","webkitT","MozT","msT","OT"],t=r=0,o=n.length;o>r;t=++r)if(i=n[t],e=n[t]+"ransform",e in I)return n[t].substr(0,n[t].length-1);return!1}(),_=function(t){return $===!1?!1:""===$?t:$+t.charAt(0).toUpperCase()+t.substr(1)},E=_("transform"),D=E!==!1,P=function(){var t,e,n;return t=i.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=w,e.top="-9999px",i.body.appendChild(t),n=t.offsetWidth-t.clientWidth,i.body.removeChild(t),n},k=function(){var t,i,n;return i=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),t&&+n>23):!1},v=function(){function c(n,o){this.el=n,this.options=o,r||(r=P()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+o.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===o)(e===s&&t.originalEvent.detail>0||e===y&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===g){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===s&&t.originalEvent.wheelDelta<0||e===y&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;D?(t={},t[E]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},O?(C&&this.scrollRAF&&C(this.scrollRAF),this.scrollRAF=O(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(f,t.events[a]).bind(d,t.events[y]),t.body.bind(p,t.events[l]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(f,t.events[a]).unbind(d,t.events[y]),t.body.unbind(p,t.events[l]),!1}}(this),resize:function(t){return function(){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,s),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,y),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var i;if(null!=e)return i=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,i&&(t.sliderY+=-i/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var i;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(i=t.events)[y].apply(i,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(b,t[b]),this.iOSNativeScrolling||(this.slider.bind(u,t[s]),this.pane.bind(u,t[m]).bind(""+g+" "+o,t[x])),this.$content.bind(""+w+" "+g+" "+o+" "+S,t[w])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(b,t[b]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+w+" "+g+" "+o+" "+S,t[w])},c.prototype.generate=function(){var t,i,n,o,s,a,l;return o=this.options,a=o.paneClass,l=o.sliderClass,t=o.contentClass,(s=this.$el.children("."+a)).length||s.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===r&&k()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+n+14}):r&&(i={right:-r},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,i,o,s,a,l,c,h,u,p,f;return this.iOSNativeScrolling?(this.contentHeight=this.content.scrollHeight,void 0):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,o=t.style,s=o.overflowY,n&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+r,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>u?u:t.scrollHeight)),l=this.pane.outerHeight(!1),h=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+h+a,f=Math.round(c/e*c),f<this.options.sliderMinHeight?f=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&f>this.options.sliderMaxHeight&&(f=this.options.sliderMaxHeight),s===w&&o.overflowX!==w&&(f+=r),this.maxSliderTop=c-f,this.contentHeight=e,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=f,this.paneTop=h,this.slider.height(f),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&s!==w?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&s===w?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),("static"===i||"relative"===i)&&(p=parseInt(this.$content.css("right"),10),p&&this.$content.css({right:"",marginRight:p})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return C&&this.scrollRAF&&(C(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=t.extend({},M,e),this.nanoscroller=n=new v(this,i)),e&&"object"==typeof e){if(t.extend(n.options,e),null!=e.scrollBottom)return n.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return n.scrollTop(e.scrollTop);if(e.scrollTo)return n.scrollTo(e.scrollTo);if("bottom"===e.scroll)return n.scrollBottom(0);if("top"===e.scroll)return n.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return n.scrollTo(e.scroll);if(e.stop)return n.stop();if(e.destroy)return n.destroy();if(e.flash)return n.flash()}return n.reset()})},t.fn.nanoScroller.Constructor=v}(jq111,window,document),function(t){"function"==typeof define&&define.amd&&define.amd.jq111?define(["jquery"],t):t(jq111)}(function(t){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=c),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each(function(){var n=t(this),r=n.data(D);r||(r=new i(this,e),n.data(D,r))})}function i(e,i){function k(e){if(!(ce()||t(e.target).closest(i.excludedElements,Be).length>0)){var n,r=e.originalEvent?e.originalEvent:e,o=C?r.touches[0]:r;return Fe=T,C?Ue=r.touches.length:e.preventDefault(),He=0,Le=null,Ge=null,Re=0,Ne=0,Ve=0,ze=1,Ye=0,qe=de(),je=me(),ae(),!C||Ue===i.fingers||i.fingers===b||j()?(ue(0,o),Xe=Pe(),2==Ue&&(ue(1,r.touches[1]),Ne=Ve=Te(qe[0].start,qe[1].start)),(i.swipeStatus||i.pinchStatus)&&(n=H(r,Fe))):n=!1,n===!1?(Fe=x,H(r,Fe),n):(i.hold&&(ti=setTimeout(t.proxy(function(){Be.trigger("hold",[r.target]),i.hold&&(n=i.hold.call(Be,r,r.target))},this),i.longTapThreshold)),he(!0),null)}}function O(t){var e=t.originalEvent?t.originalEvent:t;if(Fe!==y&&Fe!==x&&!le()){var n,r=C?e.touches[0]:e,o=pe(r);if(We=Pe(),C&&(Ue=e.touches.length),i.hold&&clearTimeout(ti),Fe=S,2==Ue&&(0==Ne?(ue(1,e.touches[1]),Ne=Ve=Te(qe[0].start,qe[1].start)):(pe(e.touches[1]),Ve=Te(qe[0].end,qe[1].end),Ge=ye(qe[0].end,qe[1].end)),ze=Se(Ne,Ve),Ye=Math.abs(Ne-Ve)),Ue===i.fingers||i.fingers===b||!C||j()){if(Le=Me(o.start,o.end),Y(t,Le),He=xe(o.start,o.end),Re=we(),ge(Le,He),(i.swipeStatus||i.pinchStatus)&&(n=H(e,Fe)),!i.triggerOnTouchEnd||i.triggerOnTouchLeave){var s=!0;if(i.triggerOnTouchLeave){var a=De(this);s=ke(o.end,a)}!i.triggerOnTouchEnd&&s?Fe=A(S):i.triggerOnTouchLeave&&!s&&(Fe=A(y)),(Fe==x||Fe==y)&&H(e,Fe)}}else Fe=x,H(e,Fe);n===!1&&(Fe=x,H(e,Fe))}}function E(t){var e=t.originalEvent;return C&&e.touches.length>0?(se(),!0):(le()&&(Ue=Je),We=Pe(),Re=we(),N()||!R()?(Fe=x,H(e,Fe)):i.triggerOnTouchEnd||0==i.triggerOnTouchEnd&&Fe===S?(t.preventDefault(),Fe=y,H(e,Fe)):!i.triggerOnTouchEnd&&Q()?(Fe=y,L(e,Fe,f)):Fe===S&&(Fe=x,H(e,Fe)),he(!1),null)}function I(){Ue=0,We=0,Xe=0,Ne=0,Ve=0,ze=1,ae(),he(!1)}function _(t){var e=t.originalEvent;i.triggerOnTouchLeave&&(Fe=A(y),H(e,Fe))}function $(){Be.unbind(Ee,k),Be.unbind(Ae,I),Be.unbind(Ie,O),Be.unbind(_e,E),$e&&Be.unbind($e,_),he(!1)}function A(t){var e=t,n=z(),r=R(),o=N();return!n||o?e=x:!r||t!=S||i.triggerOnTouchEnd&&!i.triggerOnTouchLeave?!r&&t==y&&i.triggerOnTouchLeave&&(e=x):e=y,e}function H(t,e){var i=void 0;return q()||U()?i=L(t,e,u):(B()||j())&&i!==!1&&(i=L(t,e,p)),re()&&i!==!1?i=L(t,e,d):oe()&&i!==!1?i=L(t,e,g):ne()&&i!==!1&&(i=L(t,e,f)),e===x&&I(t),e===y&&(C?0==t.touches.length&&I(t):I(t)),i}function L(e,c,h){var v=void 0;if(h==u){if(Be.trigger("swipeStatus",[c,Le||null,He||0,Re||0,Ue,qe]),i.swipeStatus&&(v=i.swipeStatus.call(Be,e,c,Le||null,He||0,Re||0,Ue,qe),v===!1))return!1;if(c==y&&F()){if(Be.trigger("swipe",[Le,He,Re,Ue,qe]),i.swipe&&(v=i.swipe.call(Be,e,Le,He,Re,Ue,qe),v===!1))return!1;switch(Le){case n:Be.trigger("swipeLeft",[Le,He,Re,Ue,qe]),i.swipeLeft&&(v=i.swipeLeft.call(Be,e,Le,He,Re,Ue,qe));break;case r:Be.trigger("swipeRight",[Le,He,Re,Ue,qe]),i.swipeRight&&(v=i.swipeRight.call(Be,e,Le,He,Re,Ue,qe));break;case o:Be.trigger("swipeUp",[Le,He,Re,Ue,qe]),i.swipeUp&&(v=i.swipeUp.call(Be,e,Le,He,Re,Ue,qe));break;case s:Be.trigger("swipeDown",[Le,He,Re,Ue,qe]),i.swipeDown&&(v=i.swipeDown.call(Be,e,Le,He,Re,Ue,qe))}}}if(h==p){if(Be.trigger("pinchStatus",[c,Ge||null,Ye||0,Re||0,Ue,ze,qe]),i.pinchStatus&&(v=i.pinchStatus.call(Be,e,c,Ge||null,Ye||0,Re||0,Ue,ze,qe),v===!1))return!1;if(c==y&&G())switch(Ge){case a:Be.trigger("pinchIn",[Ge||null,Ye||0,Re||0,Ue,ze,qe]),i.pinchIn&&(v=i.pinchIn.call(Be,e,Ge||null,Ye||0,Re||0,Ue,ze,qe));break;case l:Be.trigger("pinchOut",[Ge||null,Ye||0,Re||0,Ue,ze,qe]),i.pinchOut&&(v=i.pinchOut.call(Be,e,Ge||null,Ye||0,Re||0,Ue,ze,qe))}}return h==f?(c===x||c===y)&&(clearTimeout(Ke),clearTimeout(ti),J()&&!te()?(Ze=Pe(),Ke=setTimeout(t.proxy(function(){Ze=null,Be.trigger("tap",[e.target]),i.tap&&(v=i.tap.call(Be,e,e.target))},this),i.doubleTapThreshold)):(Ze=null,Be.trigger("tap",[e.target]),i.tap&&(v=i.tap.call(Be,e,e.target)))):h==d?(c===x||c===y)&&(clearTimeout(Ke),Ze=null,Be.trigger("doubletap",[e.target]),i.doubleTap&&(v=i.doubleTap.call(Be,e,e.target))):h==g&&(c===x||c===y)&&(clearTimeout(Ke),Ze=null,Be.trigger("longtap",[e.target]),i.longTap&&(v=i.longTap.call(Be,e,e.target))),v}function R(){var t=!0;return null!==i.threshold&&(t=He>=i.threshold),t}function N(){var t=!1;return null!==i.cancelThreshold&&null!==Le&&(t=ve(Le)-He>=i.cancelThreshold),t}function V(){return null!==i.pinchThreshold?Ye>=i.pinchThreshold:!0}function z(){var t;return t=i.maxTimeThreshold?Re>=i.maxTimeThreshold?!1:!0:!0}function Y(t,e){if(i.allowPageScroll===c||j())t.preventDefault();else{var a=i.allowPageScroll===h;switch(e){case n:(i.swipeLeft&&a||!a&&i.allowPageScroll!=v)&&t.preventDefault();break;case r:(i.swipeRight&&a||!a&&i.allowPageScroll!=v)&&t.preventDefault();break;case o:(i.swipeUp&&a||!a&&i.allowPageScroll!=m)&&t.preventDefault();break;case s:(i.swipeDown&&a||!a&&i.allowPageScroll!=m)&&t.preventDefault()}}}function G(){var t=X(),e=W(),i=V();return t&&e&&i}function j(){return!!(i.pinchStatus||i.pinchIn||i.pinchOut)}function B(){return!(!G()||!j())}function F(){var t=z(),e=R(),i=X(),n=W(),r=N(),o=!r&&n&&i&&e&&t;return o}function U(){return!!(i.swipe||i.swipeStatus||i.swipeLeft||i.swipeRight||i.swipeUp||i.swipeDown)}function q(){return!(!F()||!U())}function X(){return Ue===i.fingers||i.fingers===b||!C}function W(){return 0!==qe[0].end.x}function Q(){return!!i.tap}function J(){return!!i.doubleTap}function Z(){return!!i.longTap}function K(){if(null==Ze)return!1;var t=Pe();return J()&&t-Ze<=i.doubleTapThreshold}function te(){return K()}function ee(){return(1===Ue||!C)&&(isNaN(He)||He<i.threshold)}function ie(){return Re>i.longTapThreshold&&w>He}function ne(){return!(!ee()||!Q())}function re(){return!(!K()||!J())}function oe(){return!(!ie()||!Z())}function se(){Qe=Pe(),Je=event.touches.length+1}function ae(){Qe=0,Je=0}function le(){var t=!1;if(Qe){var e=Pe()-Qe;e<=i.fingerReleaseThreshold&&(t=!0)}return t}function ce(){return!(Be.data(D+"_intouch")!==!0)}function he(t){t===!0?(Be.bind(Ie,O),Be.bind(_e,E),$e&&Be.bind($e,_)):(Be.unbind(Ie,O,!1),Be.unbind(_e,E,!1),$e&&Be.unbind($e,_,!1)),Be.data(D+"_intouch",t===!0)}function ue(t,e){var i=void 0!==e.identifier?e.identifier:0;return qe[t].identifier=i,qe[t].start.x=qe[t].end.x=e.pageX||e.clientX,qe[t].start.y=qe[t].end.y=e.pageY||e.clientY,qe[t]}function pe(t){var e=void 0!==t.identifier?t.identifier:0,i=fe(e);return i.end.x=t.pageX||t.clientX,i.end.y=t.pageY||t.clientY,i}function fe(t){for(var e=0;e<qe.length;e++)if(qe[e].identifier==t)return qe[e]}function de(){for(var t=[],e=0;5>=e;e++)t.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return t}function ge(t,e){e=Math.max(e,ve(t)),je[t].distance=e}function ve(t){return je[t]?je[t].distance:void 0}function me(){var t={};return t[n]=be(n),t[r]=be(r),t[o]=be(o),t[s]=be(s),t}function be(t){return{direction:t,distance:0}}function we(){return We-Xe}function Te(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.round(Math.sqrt(i*i+n*n))}function Se(t,e){var i=e/t*1;return i.toFixed(2)}function ye(){return 1>ze?l:a}function xe(t,e){return Math.round(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}function Ce(t,e){var i=t.x-e.x,n=e.y-t.y,r=Math.atan2(n,i),o=Math.round(180*r/Math.PI);return 0>o&&(o=360-Math.abs(o)),o}function Me(t,e){var i=Ce(t,e);return 45>=i&&i>=0?n:360>=i&&i>=315?n:i>=135&&225>=i?r:i>45&&135>i?s:o}function Pe(){var t=new Date;return t.getTime()}function De(e){e=t(e);var i=e.offset(),n={left:i.left,right:i.left+e.outerWidth(),top:i.top,bottom:i.top+e.outerHeight()};return n}function ke(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}var Oe=C||P||!i.fallbackToMouseEvents,Ee=Oe?P?M?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ie=Oe?P?M?"MSPointerMove":"pointermove":"touchmove":"mousemove",_e=Oe?P?M?"MSPointerUp":"pointerup":"touchend":"mouseup",$e=Oe?null:"mouseleave",Ae=P?M?"MSPointerCancel":"pointercancel":"touchcancel",He=0,Le=null,Re=0,Ne=0,Ve=0,ze=1,Ye=0,Ge=0,je=null,Be=t(e),Fe="start",Ue=0,qe=null,Xe=0,We=0,Qe=0,Je=0,Ze=0,Ke=null,ti=null;try{Be.bind(Ee,k),Be.bind(Ae,I)}catch(ei){t.error("events not supported "+Ee+","+Ae+" on jQuery.swipe")}this.enable=function(){return Be.bind(Ee,k),Be.bind(Ae,I),Be},this.disable=function(){return $(),Be},this.destroy=function(){return $(),Be.data(D,null),Be},this.option=function(e,n){if(void 0!==i[e]){if(void 0===n)return i[e];i[e]=n}else t.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}var n="left",r="right",o="up",s="down",a="in",l="out",c="none",h="auto",u="swipe",p="pinch",f="tap",d="doubletap",g="longtap",v="horizontal",m="vertical",b="all",w=10,T="start",S="move",y="end",x="cancel",C="ontouchstart"in window,M=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,P=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,D="TouchSwipe",k={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};t.fn.swipe=function(i){var n=t(this),r=n.data(D);if(r&&"string"==typeof i){if(r[i])return r[i].apply(this,Array.prototype.slice.call(arguments,1));t.error("Method "+i+" does not exist on jQuery.swipe")}else if(!(r||"object"!=typeof i&&i))return e.apply(this,arguments);return n},t.fn.swipe.defaults=k,t.fn.swipe.phases={PHASE_START:T,PHASE_MOVE:S,PHASE_END:y,PHASE_CANCEL:x},t.fn.swipe.directions={LEFT:n,RIGHT:r,UP:o,DOWN:s,IN:a,OUT:l},t.fn.swipe.pageScroll={NONE:c,HORIZONTAL:v,VERTICAL:m,AUTO:h},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:b}});var Mark={includes:{},globals:{},delimiter:">",compact:!1,_copy:function(t,e){e=e||[];for(var i in t)e[i]=t[i];return e},_size:function(t){return t instanceof Array?t.length:t||0},_iter:function(t,e){this.idx=t,this.size=e,this.length=e,this.sign="#",this.toString=function(){return this.idx+this.sign.length-1}},_pipe:function(t,e){var i,n,r,o;if(i=e.shift()){n=i.split(this.delimiter),r=n.shift().trim();try{o=Mark.pipes[r].apply(null,[t].concat(n)),t=this._pipe(o,e)}catch(s){}}return t},_eval:function(t,e,i){var n,r,o=this._pipe(t,e),s=o,a=-1;if(o instanceof Array)for(o="",n=s.length;++a<n;)r={iter:new this._iter(a,n)},o+=i?Mark.up(i,s[a],r):s[a];else o instanceof Object&&(o=Mark.up(i,s));return o},_test:function(t,e,i,n){var r=Mark.up(e,i,n).split(/\{\{\s*else\s*\}\}/);return(t===!1?r[1]:r[0])||""},_bridge:function(t,e){"."==e&&(e="\\.");var i,n,r="{{\\s*"+e+"([^/}]+\\w*)?}}|{{/"+e+"\\s*}}",o=new RegExp(r,"g"),s=t.match(o)||[],a=0,l=0,c=-1,h=0;for(n=0;n<s.length&&(i=n,c=t.indexOf(s[i],c+1),s[i].indexOf("{{/")>-1?l++:a++,a!==l);n++);return a=t.indexOf(s[0]),l=a+s[0].length,h=c+s[i].length,[t.substring(a,h),t.substring(l,c)]}};Mark.up=function(t,e,i){e=e||{},i=i||{};var n,r,o,s,a,l,c,h,u,p,f=/\{\{(.+?)\}\}/g,d=t.match(f)||[],g=[],v=0,m=0;for(i.pipes&&this._copy(i.pipes,this.pipes),i.includes&&this._copy(i.includes,this.includes),i.globals&&this._copy(i.globals,this.globals),i.delimiter&&(this.delimiter=i.delimiter),void 0!==i.compact&&(this.compact=i.compact);n=d[v++];)if(c=void 0,l="",s=n.indexOf("/}}")>-1,r=n.substr(2,n.length-(s?5:4)),r=r.replace(/`(.+?)`/g,function(t,i){return Mark.up("{{"+i+"}}",e)}),a=0===r.trim().indexOf("if "),g=r.split("|"),g.shift(),r=r.replace(/^\s*if/,"").split("|").shift().trim(),o=a?"if":r.split("|")[0],p=e[r],a&&!g.length&&(g=["notempty"]),!s&&t.indexOf("{{/"+o)>-1&&(c=this._bridge(t,o),n=c[0],l=c[1],v+=n.match(f).length-1),!/^\{\{\s*else\s*\}\}$/.test(n)){if(void 0!==(h=this.globals[r]))c=this._eval(h,g,l);
else if(u=this.includes[r])u instanceof Function&&(u=u()),c=this._pipe(Mark.up(u,e,i),g);else if(r.indexOf("#")>-1)i.iter.sign=r,c=this._pipe(i.iter,g);else if("."===r)c=this._pipe(e,g);else if(r.indexOf(".")>-1){for(r=r.split("."),p=Mark.globals[r[0]],p?m=1:(m=0,p=e);p&&m<r.length;)p=p[r[m++]];c=this._eval(p,g,l)}else a?c=this._pipe(p,g):p instanceof Array?c=this._eval(p,g,l):l?c=p?Mark.up(l,p):void 0:e.hasOwnProperty(r)&&(c=this._pipe(p,g));c instanceof Array&&(c=this._eval(c,g,l)),a&&(c=this._test(c,l,e,i)),t=t.replace(n,void 0===c?"???":c)}return this.compact?t.replace(/>\s+</g,"><"):t},Mark.pipes={empty:function(t){return t&&0!==(t+"").trim().length?!1:t},notempty:function(t){return t&&(t+"").trim().length?t:!1},blank:function(t,e){return t||0===t?t:e},more:function(t,e){return Mark._size(t)>e?t:!1},less:function(t,e){return Mark._size(t)<e?t:!1},ormore:function(t,e){return Mark._size(t)>=e?t:!1},orless:function(t,e){return Mark._size(t)<=e?t:!1},between:function(t,e,i){return t=Mark._size(t),t>=e&&i>=t?t:!1},equals:function(t,e){return t==e?t:!1},notequals:function(t,e){return t!=e?t:!1},like:function(t,e){return new RegExp(e,"i").test(t)?t:!1},notlike:function(t,e){return Mark.pipes.like(t,e)?!1:t},upcase:function(t){return String(t).toUpperCase()},downcase:function(t){return String(t).toLowerCase()},capcase:function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},chop:function(t,e){return t.length>e?t.substr(0,e)+"...":t},tease:function(t,e){var i=t.split(/\s+/);return i.slice(0,e).join(" ")+(i.length>e?"...":"")},trim:function(t){return t.trim()},pack:function(t){return t.trim().replace(/\s{2,}/g," ")},round:function(t){return Math.round(+t)},clean:function(t){return String(t).replace(/<\/?[^>]+>/gi,"")},size:function(t){return t.length},length:function(t){return t.length},reverse:function(t){return[].concat(t).reverse()},join:function(t,e){return t.join(e)},limit:function(t,e,i){return t.slice(+i||0,+e+(+i||0))},split:function(t,e){return t.split(e||",")},choose:function(t,e,i){return t?e:i||""},toggle:function(t,e,i,n){return i.split(",")[e.match(/\w+/g).indexOf(t+"")]||n},sort:function(t,e){var i=function(t,i){return t[e]>i[e]?1:-1};return[].concat(t).sort(e?i:void 0)},fix:function(t,e){return(+t).toFixed(e)},mod:function(t,e){return+t%+e},divisible:function(t,e){return t&&+t%e===0?t:!1},even:function(t){return t&&0===(1&+t)?t:!1},odd:function(t){return t&&1===(1&+t)?t:!1},number:function(t){return parseFloat(t.replace(/[^\-\d\.]/g,""))},url:function(t){return encodeURI(t)},bool:function(t){return!!t},falsy:function(t){return!t},first:function(t){return 0===t.idx},last:function(t){return t.idx===t.size-1},call:function(t,e){return t[e].apply(t,[].slice.call(arguments,2))},set:function(t,e){return Mark.globals[e]=t,""},log:function(t){return console.log(t),t}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof module&&module.exports?module.exports=Mark:"function"==typeof define&&define.amd&&define(function(){return Mark});var guiaTV=function(t){"use strict";function e(){var e,i=t.Deferred();return setTimeout(function(){e=["telecinco","antena3","la2","la1","cuatro","lasexta","historia"],v=[1,2,3,4,5,6,7],i.resolve(e)},3e3),i.promise()}function i(e){{var i=[],n=[];e.length}return t.when.apply(null,t.map(e,function(e,r){var o="datos/"+e+".json";n.push(t.get(o).done(function(t){m[r]=i[r]=t}).fail(function(){m[r]=i[r]=""}))})),t.when.apply(null,n).promise()}function n(e,i){var n=e||d,o=i||m,s={},a='<div id="{{idcanal}}" class="lineaCanal clearfix"></div>';t.each(n,function(t,e){s.idcanal=e;var i=Mark.up(a,s);k.append(i)}),t.each(o,function(e,i){var n=i.canal.nombre,o=t("#"+n);t.each(i.programas,function(t,e){var i=r(t,e);o.append(i)})})}function r(t,e){var i,n,r={},o='<div class="itemPrograma" id="{{id_programa}}" data-url="{{url_ficha}}"style="width:{{dur}}; left:{{diffHoraDia}}; user-selected:none;"><div class="itemProgramaInner {{clase}}"><a href="http://elmundo.es/television/programa/{{id_programa}}" style="display:none;">{{nombre}}</a><span class="categoria">{{categoria}}</span><h4>{{nombre}}</h4>{{if episodio}}<p>{{episodio}}</p>{{/if}}<span class="duracion">{{duracion}}</span><span class="fecha">{{infoHoraDuracion}}</span>{{if fav}}<span class="favorito"><i class="fa fa-star"></i></span>{{/if}}{{if ale}}<span class="alerta"><i class="fa fa-clock-o"></i></span>{{/if}}</div>{{if saleCruz}}<div class="mascara"><i class="fa fa-plus"></i></div>{{/if}}</div>',s=e.categoria;switch(s){case"1":n="catSeries",i="series";break;case"104":n="catCine",i="cine";break;case"31":n="catMagazines",i="magazines";break;case"20":n="catInformativos",i="informativos";break;case"90":n="catDeportes",i="deportes";break;case"INT_2":n="catConcursos",i="concursos";break;case"INT_1":n="catCorazon",i="corazón"}var a=e.duracion+" mins.",l=Math.ceil(y*e.duracion),c=new Date(e.hora_inicio),h=new Date(e.hora_fin),u=c-x;u=Math.floor(Math.floor(u/1e3)/60*y);var p=c.getHours();p=leftPad(p,2);var f=c.getMinutes();f=leftPad(f,2);var d=h.getHours();d=leftPad(d,2);var g=h.getMinutes();g=leftPad(g,2);var v=""+p+":"+f+" - "+d+":"+g;if(100*Math.random()<5)var m=!0;if(100*Math.random()<5)var b=!0;if(e.duracion<15)var w=!0;r={clase:n,dur:l+"px",diffHoraDia:u+"px",id_programa:e.id_programa,url_ficha:e.url_ficha,infoHoraDuracion:v,duracion:a,categoria:i.toUpperCase(),nombre:e.nombre,episodio:e.episodio,fav:void 0|m,ale:void 0|b,saleCruz:void 0|w};var T=Mark.up(o,r);return T}function o(e){var i=e||d,n={},r='<div class="itemCanal"><img src="http://estaticos.elmundo.es{{icono}}" /></div>';t.each(i,function(t){n.icono=m[t].canal.icono;var e=Mark.up(r,n);O.append(e)})}function s(){var t,e,i=new Date,n={};n.dias=[],n.horas=[];var r='{{dias}}<div class="itemDia" style="left:{{pos}}px">{{dia}}</div>{{/dias}}{{horas}}<div class="itemHoras" style="left:{{pos}}px;">{{texto}}</div>{{/horas}}';for(e=0;3>=e;e++){i.setTime(x.getTime()+864e5*e);var o=i.toLocaleDateString("es-ES",{weekday:"long",month:"long",day:"numeric"}),s=e*S*24;for(n.dias.push({dia:o,pos:s}),b.push([o,s]),t=0;24>t;t++){var a=leftPad(t,2)+":00",l=e*S*24+t*S;n.horas.push({texto:a,pos:l})}}var c=Mark.up(r,n);E.append(c)}function a(){var t={},e='<li class="itemDia" data-px="{{px}}"><a href="javascript://">{{diaText}}</a></li>';b.forEach(function(i){var n=i[0],r=i[1];t={diaText:n,px:r};var o=Mark.up(e,t);D.find("ul").append(o)})}function l(){var e=C.h,i=C.m,n=t(".horaActual").hide().find("p").text(e+":"+i).end().show(),r=parseInt(e)*S+parseInt(i)*y;n.css({left:r})}function c(){var t=.5*M.width(),e=parseInt(_.css("left"));e=parseInt(t-e),k.stop().animate({left:e+"px"},300),E.stop().animate({left:e+"px"},300);var i=parseInt(C.h)*S,n=parseInt(C.m)*y,r=i+n+e;_.stop().animate({left:r+"px"},300)}function h(){function e(t,e,i,n){if("start"==e){var r=this.offset();this.startTop=r.top,this.startLeft=r.left,k.addClass("dragging")}else if("move"==e){var o=0,s=0;("up"==i||"down"==i)&&(s="up"==i?-n:n),("left"==i||"right"==i)&&(o="left"==i?-n:n);var a=this.startTop+s,l=this.startLeft+o;a>w&&(a=w),u-f>a&&(a=u-f),l>d+Math.abs(b)+50&&(l=d+Math.abs(b)+50),l<p-50-Math.abs(H)&&(l=p-50-Math.abs(H)),k.css({top:a+"px",left:l+"px"}),O.css({top:a+"px"}),E.css({left:l+"px"});var c=parseInt(C.h)*S,h=parseInt(C.m)*y,g=c+h+l;_.css({left:g+"px"})}else if("cancel"==e)k.removeClass("dragging");else if("end"==e)return k.removeClass("dragging"),!1}function i(){var e=parseInt(t(this).css("left"));e=parseInt(.5*p-e),l(e)}function n(){var e=-1*parseInt(t(this).data("px"));l(e+d)}function r(e,i){var n=t(i).is(".itemPrograma")?t(i):t(i).closest(".itemPrograma"),r=n.find("a").attr("href"),s=n.attr("id");o(s,r);var a=parseInt(n.css("left"))+.5*n.width();a=parseInt(.5*p-a),l(a)}function o(e){function i(){0===parseInt($.css("right"))&&$.stop().animate({right:-S},300,"swing")}i(),t.ajax({url:"fichaPrograma.html",data:{progId:e},dataType:"html",cache:!1}).done(function(t){$.find(".contenido").html(t),$.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0,iOSNativeScrolling:!0}),$.animate({right:0},500,"swing",function(){$.find(".cierra").on("click",function(t){t.preventDefault(),i()})})})}function s(e){var i=t(e.currentTarget).attr("class").split(" ")[0];k.hasClass(i)?(k.removeClass(i),t(this).removeClass("activo")):(k.addClass(i),t(this).addClass("activo"))}function a(){v.length>=1&&t.each(v,function(t,e){e++,P.find("li:nth-child("+e+")").trigger("click")})}function l(t){var e=t||0;k.stop().animate({left:e+"px"},300),E.stop().animate({left:e+"px"},300);var i=parseInt(C.h)*S,n=parseInt(C.m)*y,r=i+n+e;_.stop().animate({left:r+"px"},300)}function c(e){var i=t(e.currentTarget).attr("class").split(" ")[1],n=k.css("top").split("px")[0],r=O.css("top").split("px")[0],o=O.length;switch(i){case"btnArriba":r-T>w?(O.css("top",r-T),k.css("top",n-T)):(O.css("top",w+"px"),k.css("top",w+"px"));break;case"btnAbajo":var s=r-o*T;s>r+T?(O.css("top",r+T),k.css("top",n+T)):(O.css("top",s+"px"),k.css("top",s+"px"))}}function h(e){var i=t(e.currentTarget).attr("class").split(" ")[1],n=parseInt(k.css("left"));switch(e.stopPropagation(),console.log(n),i){case"btnIzda":l(Math.floor(parseInt(n+S)));break;case"btnDrcha":l(Math.floor(parseInt(n-S)))}}var u=M.height(),p=M.width(),f=k.height(),d=(k.offsetWidth,O.width()),g=t(".contProgramas > div > div:first-child"),m=[];t.each(g,function(){m.push(this.offsetLeft)});var b=m.min(),x=t(".contProgramas > div > div:last-child"),A=[];t.each(x,function(){A.push(this.offsetLeft+t(this).width())});var H=A.max();M.find(".preload-wrapper").remove(),k.swipe({tap:function(t,e){r(t,e)},triggerOnTouchEnd:!0,swipeStatus:e,threshold:20,allowPageScroll:!1,excludedElements:t.fn.swipe.defaults.excludedElements+", .horaActual",fingers:"all"}),E.on("click",".itemHoras",i),P.on("click","li",s),a(),D.on("click","li",n),R.on("click",".btn",c),I.on("click",".btn",h)}function u(){var e=t('<ul class="listaCanales clearfix">'),i="datos/listadocanales.json",n={},r='{{letras}}<li class="itemLetra" data-letra="{{.}}">{{.}}</li>{{/letras}}';n.letras=[],t.get(i).done(function(i){g=i;var o={},s='{{canales}}<li class="itemCanal" data-letra="{{currentLetra}}" data-idcanal="{{id_programa}}"><span class="check"></span>{{nombre_completo|chop>23}}</li>{{/canales}}';t.each(g,function(t,i){Mark.globals.currentLetra=t,o={letra:t,canales:i},n.letras.push(t);var r=Mark.up(s,o);e.append(r)});var a=Mark.up(r,n);H.find(".listaLetras").append(a),H.find(".nano-content").html(e),t.each(H.find(".itemCanal"),function(){-1!=d.indexOf(t(this).data("idcanal"))&&t(this).find(".check").addClass("sel")}),H.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0,iOSNativeScrolling:!0})})}function p(){var e=t('<ul class="orden vertical">'),i={},n='<li class="itemCanal" data-idcanal="{{nombre}}"><span class="check sel"></span>{{nombre_completo|chop>23}}</li>';t.each(m,function(t,r){i=r.canal;var o=Mark.up(n,i);e.append(o)}),L.find(".nano-content").html(e),L.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0,iOSNativeScrolling:!0})}function f(){function e(){var e=t(this).find(".check"),i=e.hasClass("sel"),n=t(this).data("idcanal"),r=L.find(".itemCanal").filter(function(){return t(this).data("idcanal")===n});i?(e.toggleClass("sel"),r.find(".check").toggleClass("sel")):(e.toggleClass("sel"),r.length?r.find(".check").toggleClass("sel"):t(this).clone().appendTo(L.find("ul"))),L.find(".nano").nanoScroller().nanoScroller({scroll:"bottom",alwaysVisible:!0})}function i(e){e.stopPropagation();var i=t(this).parent(".itemCanal").data("idcanal"),n=H.find(".itemCanal").filter(function(){return t(this).data("idcanal")===i});t(this).toggleClass("sel"),n.find(".check").toggleClass("sel")}function n(){t(this).toggleClass("activo"),A.toggle("fast"),L.find(".nano").nanoScroller().nanoScroller({scroll:"top",alwaysVisible:!0}),H.find(".nano").nanoScroller().nanoScroller({scroll:"top",alwaysVisible:!0})}function r(){var e=t(this).data("letra"),i=H.find(".itemCanal"),n=t(this).hasClass("activo");if(n)i.show(),t(this).removeClass("activo");else{var r=i.filter(function(){return t(this).data("letra")==e});r.show(),i.not(r).hide(),t(this).addClass("activo")}H.find(".nano").nanoScroller().nanoScroller({scroll:"top",alwaysVisible:!0})}function o(){var e,i=t("#txtBuscar"),n=i.val(),r=H.find(".itemCanal");n.length>=3&&" "!=n&&""!=n&&void 0!=n&&(e=r.filter(function(){var e=t.trim(t(this).text());return e.indexOf(n)>-1})),e.show(),r.not(e).hide()}H.on("click",".itemCanal",e),L.on("click",".check",i),N.on("click",n),H.on("click",".itemLetra",r),H.on("click",".fa-search",o),t("#txtBuscar").on("keyup",o);var s,a=t(".ordenCanales ul.orden").sortable({group:"orden",pullPlaceholder:!0,onDrop:function(e,i,n){var r=a.sortable("serialize").get(),o=(JSON.stringify(r,null," "),t("<li/>").css({height:0}));e.before(o),o.detach(),n(e,i)},onDragStart:function(e,i,n){var r=e.offset(),o=i.rootGroup.pointer,a=t(".ordenCanales .nano .nano-content").get(0).scrollTop;a=Math.floor(a),s={left:o.left-r.left,top:o.top-r.top-a},n(e,i)},onDrag:function(t,e){t.css({left:e.left-s.left,top:e.top-s.top})}})}var d=["la1","la2","antena3","cuatro","telecinco","lasexta"],g={},v=[],m=[],b=[],w=60,T=90,S=320,y=S/60,x=new Date,C={h:leftPad(x.getHours(),2),m:leftPad(x.getMinutes(),2)};x.setTime(Date.parse("Mon, Jul 14 2014"));var M=t(".viewPort"),P=t(".selectorCategorias"),D=t(".selectorDias"),k=t(".contProgramas"),O=t(".contCanales"),E=t(".barraHoras"),I=t(".iconosHoras"),_=t(".horaActual"),$=t(".fichaPrograma"),A=t(".selectorCanales"),H=t(".barraLetras"),L=t(".ordenCanales"),R=t(".botonesCanales"),N=t(".suscribirCanales");return function(){A.hide();{var t=e();t.then(function(t){return d=t,i(d)}).then(function(){o(d),n(d,m),s(),a(),l(),c(),h(),p(),u(),f()})}}(),t.fn.exists=function(){return this.length>0},this}(jq111);Array.prototype.max=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]>t&&(t=this[i]);return t},Array.prototype.min=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]<t&&(t=this[i]);return t};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS1zb3J0YWJsZS5qcyIsImpxdWVyeS5uYW5vc2Nyb2xsZXIuanMiLCJqcXVlcnkudG91Y2hTd2lwZS5qcyIsIm1hcmt1cC5qcyIsImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUEraUNBLFFBQUEsY0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBRUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEdBQUEsS0FDQSxHQUFBLFFBQUEsRUFBQSxVQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsS0FDQSxFQUFBLGFBQUEsRUFBQSxrQkFFQSxHQUFBLEVBRUEsVUFBQSxPQUFBLE9BQUEsR0FBQSxJQUFBLE9BQUEsR0FBQSxFQUFBLFdBT0EsUUFBQSxZQUFBLEdBR0EsSUFBQSxHQUZBLEdBQUEsT0FBQSxHQUFBLElBQ0EsRUFBQSxTQUFBLE9BQUEsTUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLENBRUEsSUFEQSxHQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLE9BQ0EsSUFBQSxJQUFBLEVBQUEsUUFBQSxHQUFBLE1BQUEsVUFBQSxFQUFBLFVBQUEsRUFBQSxPQUFBLEVBQUEsU0FFQSxNQUFBLE1BT0EsUUFBQSxhQUFBLEdBQ0EsYUFBQSxFQUFBLEdBQUEsSUFTQSxRQUFBLFNBQUEsRUFBQSxHQUVBLElBREEsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLElBQUEsQ0FFQSxPQUFBLElDamtDQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBaUlBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FDQSxPQUFBLEdBQUEsRUFHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxTQUFBLFVBR0EsS0FGQSxFQUFBLEdBQUEsRUFFQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxJQUNBLEdBQUEsTUFBQSxTQUFBLEVBQUEsSUFBQSxlQUFBLElBQ0EsRUFBQSxLQUFBLFNBQUEsRUFBQSxJQUFBLGNBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQUEsYUFBQSxFQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGNBQUEsSUFLQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsUUFDQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxLQUlBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLElBTUEsS0FKQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQ0EsS0FFQSxLQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBT0EsT0FMQSxHQUFBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxLQU9BLFFBQUEsR0FBQSxHQUNBLEtBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxHQUNBLEtBQUEsY0FFQSxLQUFBLFFBQUEsWUFDQSxLQUFBLFlBQUEsRUFBQSxNQUFBLEtBQUEsT0FBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLE1BQUEsS0FBQSxLQUFBLE1BQ0EsS0FBQSxVQUFBLEVBQUEsTUFBQSxLQUFBLEtBQUEsTUFDQSxLQUFBLFlBQUEsRUFBQSxLQUFBLFFBQUEsYUFFQSxFQUFBLGdCQUNBLEtBQUEsUUFBQSxjQUFBLElBbU9BLFFBQUEsR0FBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQUEsVUFBQSxFQUFBLEdBRUEsS0FBQSxNQUFBLEVBQUEsSUFBQSxLQUFBLFNBQ0EsS0FBQSxVQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUEsTUFDQSxLQUFBLE9BQUEsS0FBQSxVQUFBLFFBQUEsUUFBQSxLQUFBLFVBQUEsUUFBQSxZQUVBLElBQUEsR0FBQSxLQUFBLFVBQUEsUUFBQSxRQUNBLE1BQUEsT0FBQSxFQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQSxHQUVBLEtBQUEsT0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsRUFBQSxNQUFBLEtBQUEsU0FBQSxPQUVBLEtBQUEsUUFBQSxNQUNBLEtBQUEsTUFBQSxXQUFBLEtBQUEsTUFsYkEsR0FBQSxHQUNBLEdBRUEsTUFBQSxFQUVBLE1BQUEsRUFHQSxRQUFBLEdBRUEsUUFBQSxFQUVBLFVBQUEsR0FFQSxHQUtBLFVBQUEsYUFFQSxjQUFBLEdBRUEsa0JBQUEsU0FFQSxTQUFBLEVBR0EsTUFBQSxFQUVBLE9BQUEsR0FFQSxTQUFBLEdBRUEsYUFBQSxLQUVBLFVBQUEsV0FFQSxhQUFBLFVBRUEsaUJBQUEsY0FJQSxjQUFBLFdBQ0EsT0FBQSxHQUlBLFNBQUEsYUFHQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxJQU9BLFlBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLE9BQUEsRUFBQSxTQUNBLE1BQUEsRUFBQSxVQUVBLEVBQUEsU0FBQSxFQUFBLE1BQUEsUUFBQSxjQUNBLEVBQUEsUUFBQSxTQUFBLEVBQUEsTUFBQSxRQUFBLFlBR0EsT0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFlBQUEsRUFBQSxNQUFBLFFBQUEsY0FBQSxXQUFBLFNBQ0EsRUFBQSxRQUFBLFlBQUEsRUFBQSxNQUFBLFFBQUEsWUFJQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE9BQUEsU0FBQSxNQUFBLDhCQUFBLFFBQ0EsRUFBQSxrQkFDQSxJQU1BLFlBQUEsNEJBR0EsaUJBQUEsRUFHQSxVQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLE9BRUEsT0FBQSxJQUNBLElBQ0EsRUFBQSxLQUNBLEVBQUEsU0FBQSxTQUdBLEdBQUEsb0JBQ0EsR0FBQSxTQUVBLElBSUEsVUFBQSxHQUVBLEtBQ0EsRUFBQSxFQUNBLEdBQ0EsS0FBQSxFQUNBLElBQUEsRUFDQSxPQUFBLEVBQ0EsTUFBQSxHQUVBLEdBQ0EsTUFBQSx5Q0FDQSxLQUFBLDBEQUNBLEtBQUEsd0NBQ0EsT0FBQSxtQkFFQSxFQUFBLGVBMkVBLEdBQUEsSUFBQSxTQUFBLEdBUUEsTUFQQSxHQUFBLEVBQUEsU0FDQSxFQUFBLFFBQUEsSUFDQSxFQUFBLE1BQUEsS0FFQSxFQUFBLEVBQUEsT0FBQSxHQUFBLEdBQUEsSUFHQSxFQUFBLEVBQUEsUUFHQSxFQUFBLFdBQ0EsU0FBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLFVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxlQUdBLEtBQUEsS0FBQSxFQUFBLEVBQUEsUUFBQSxRQUFBLEtBQUEsUUFBQSxjQUNBLEtBQUEsY0FBQSxHQUVBLEtBQUEsS0FBQSxHQUFBLEtBQUEsUUFBQSxVQUNBLEtBQUEsUUFBQSxZQUFBLEtBQUEsS0FBQSxFQUFBLFlBQUEsS0FJQSxLQUFBLFdBQUEsR0FDQSxLQUFBLGdCQUFBLE1BRUEsS0FBQSxrQkFDQSxLQUFBLGNBQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxJQUFBLEtBQUEsU0FBQSxDQUNBLElBQUEsS0FBQSxZQUFBLEtBQUEsS0FBQSxTQUNBLE1BRUEsTUFBQSxRQUFBLFlBQUEsS0FBQSxLQUFBLEtBQUEsY0FBQSxFQUFBLFlBQUEsR0FDQSxLQUFBLEtBQUEsT0FBQSxLQUFBLGFBQ0EsS0FBQSxVQUFBLEVBR0EsS0FBQSxXQUFBLEdBRUEsS0FBQSxRQUFBLE9BQUEsS0FBQSxLQUNBLEVBQUEsS0FBQSxRQUFBLEtBQUEsS0FBQSxnQkFDQSxFQUFBLE9BQ0EsRUFFQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLEVBQUEsS0FBQSxjQUNBLEVBQUEsS0FBQSxRQUFBLFlBRUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxLQUNBLEtBQUEsc0JBQ0EsS0FBQSxZQUFBLFNBQ0EsS0FBQSxpQkFBQSxLQUdBLEtBQUEsU0FBQSxHQUNBLEtBQUEsZ0JBQUEsT0FFQSxLQUFBLGNBQUEsRUFFQSxLQUFBLFdBRUEsS0FBQSxZQUFBLFFBQUEsUUFBQSxHQUNBLEtBQUEsWUFBQSxPQUFBLEtBQUEsTUFBQSxTQUVBLEtBQUEsUUFBQSxTQUFBLEtBQUEsS0FBQSxLQUFBLGNBQUEsRUFBQSxTQUFBLEdBRUEsS0FBQSxRQUFBLE9BQUEsS0FBQSxLQUFBLEtBQUEsYUFBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEdBR0EsS0FBQSxrQkFDQSxLQUFBLG9CQUNBLEtBQUEsaUJBQUEsS0FBQSxjQUFBLEVBQ0EsS0FBQSxVQUFBLElBR0Esa0JBQUEsU0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEtBQUEsaUJBQUEsS0FBQSxRQUNBLEVBQUEsS0FBQSxxQkFBQSxLQUFBLFlBUUEsS0FMQSxHQUFBLEdBQUEsRUFBQSxLQUFBLHlCQUNBLEVBQ0EsR0FDQSxFQUFBLEVBQUEsT0FFQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBRUEsS0FBQSxHQUFBLEtBQUEsUUFBQSxnQkFBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFDQSxLQUFBLEVBQUEsU0FBQSxDQUNBLElBQUEsS0FBQSxtQkFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLHFCQUNBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsa0JBQUEsRUFBQSxHQUNBLE9BQUEsSUFJQSxLQUFBLGdCQUNBLEtBQUEsY0FBQSxJQUVBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxrQkFDQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsTUFHQSxFQUFBLEdBQUEsS0FBQSxhQUNBLEtBQUEsaUJBQUEsRUFDQSxLQUFBLGNBQUEsRUFDQSxLQUFBLFFBQUEsVUFBQSxLQUFBLFlBQUEsRUFBQSxLQUVBLHVCQUFBLFdBR0EsTUFGQSxNQUFBLHFCQUNBLEVBQUEsS0FBQSxXQUFBLEtBQUEsdUJBQUEsS0FBQSxRQUFBLFdBQUEsS0FBQSxvQkFDQSxLQUFBLHFCQUVBLGFBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUFBLEtBQUEsUUFBQSxtQkFBQSxLQUFBLElBRUEsaUJBQUEsV0FDQSxHQUFBLEtBQUEsZUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxPQUFBLEVBQ0EsRUFBQSxLQUFBLFdBQUEsR0FBQSxxQkFFQSxLQUFBLEtBQUEsUUFBQSxVQUNBLEtBQUEsS0FDQSxHQUFBLEVBQUEsSUFBQSxLQUFBLFdBQUEsR0FBQSxzQkFBQSxHQUFBLENBS0EsR0FBQSxDQUNBLE9BS0EsS0FBQSxhQUFBLEVBRUEsTUFBQSxNQUFBLGNBRUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxFQUVBLElBQUEsS0FBQSxtQkFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxtQkFDQSxNQUFBLG9CQUFBLEtBQUEsZ0JBQ0EsS0FBQSxnQkFBQSxFQUdBLEtBQUEsWUFBQSxLQUFBLFFBQ0EsS0FBQSxRQUFBLEdBRUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxFQUNBLE9BQUEsTUFBQSxJQUNBLEtBQUEsSUFBQSxLQUFBLFFBQUEsS0FBQSxFQUFBLE1BQ0EsS0FBQSxJQUFBLEtBQUEsUUFBQSxJQUFBLEVBQUEsT0FDQSxLQUFBLFFBQUEsVUFFQSxXQUFBLFNBQUEsR0FDQSxPQUNBLEtBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxRQUdBLGdCQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsTUFBQSxVQUFBLEtBQUEsUUFBQSxNQUdBLEtBQUEsV0FDQSxhQUFBLEtBQUEsa0JBQ0EsS0FBQSxpQkFBQSxXQUFBLFdBQ0EsRUFBQSxVQUFBLEdBQ0EsS0FBQSxRQUFBLFNBR0EsT0FBQSxXQUNBLEtBQUEsa0JBQ0EsS0FBQSxxQkFFQSxnQkFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsR0FBQSxPQUFBLE9BQUEsU0FFQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLGFBR0Esa0JBQUEsV0FDQSxLQUFBLGFBQUEsR0FHQSxnQkFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxzQkFHQSxTQUFBLFNBQUEsR0FDQSxFQUFBLEtBRUEsS0FEQSxHQUFBLEdBQUEsS0FBQSxXQUFBLE9BQ0EsS0FDQSxLQUFBLFdBQUEsR0FBQSxTQUFBLElBR0EsaUJBQUEsV0FDQSxLQUFBLG9CQUFBLEdBRUEsU0FBQSxXQUNBLEVBQUEsS0FBQSxRQUFBLE9BQUEsSUFxQkEsRUFBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBRUEsS0FBQSxXQUNBLEVBQUEsY0FDQSxLQUFBLFFBQUEsTUFDQSxLQUFBLFlBQUEsSUFDQSxFQUFBLFNBQUEsRUFBQSxPQUdBLFlBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLE9BQ0EsY0FBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLGNBQUEsUUFBQSxRQUVBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsb0JBQ0EsRUFDQSxHQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxVQUNBLEdBQUEsRUFBQSxRQUFBLGVBQ0EsRUFBQSxRQUFBLGNBQUEsRUFBQSxLQUFBLEtBRUEsS0FBQSxHQUFBLEVBRUEsTUFEQSxHQUFBLGdCQUFBLEtBQUEsS0FBQSxPQUFBLFdBQ0EsQ0FFQSxNQUFBLEtBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsRUFDQSxLQUFBLEdBQUEsS0FBQSxjQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLGtCQUFBLEVBQUEsRUFDQSxJQUFBLEVBQ0EsT0FBQSxNQUNBLElBQUEsRUFFQSxNQURBLE1BQUEsZ0JBQUEsRUFBQSxJQUNBLElBSUEsZ0JBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxNQUFBLElBQ0EsRUFBQSxLQUFBLGVBQUEsR0FDQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLFNBQ0EsR0FDQSxLQUFBLEVBQUEsS0FDQSxNQUFBLEVBQUEsS0FBQSxFQUNBLElBQUEsRUFBQSxJQUNBLE9BQUEsRUFBQSxJQUFBLEVBRUEsSUFBQSxLQUFBLFFBQUEsU0FBQSxDQUNBLEdBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsQ0FDQSxJQUNBLEVBQUEsU0FDQSxFQUFBLFFBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsQ0FDQSxHQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLENBQ0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEVBQUEsR0FFQSxFQUFBLE1BQUEsRUFBQSxFQUVBLEtBQUEsY0FBQSxLQUNBLEVBQUEsR0FDQSxLQUFBLFVBQUEsZ0JBQUEsS0FBQSxFQUFBLEVBQUEsSUFFQSxrQkFBQSxXQU9BLE1BTkEsTUFBQSxpQkFDQSxLQUFBLE1BQUEsS0FBQSxhQUFBLEtBQUEsR0FBQSxRQUFBLE9BQ0EsU0FBQSxLQUFBLE1BQUEsUUFBQSxpQkFBQSxNQUFBLEtBQUEsTUFBQSxRQUFBLGFBQUEsS0FDQSxNQUNBLEVBQUEsS0FBQSxNQUFBLEtBQUEsa0JBQUEsS0FBQSxRQUFBLFlBRUEsS0FBQSxnQkFFQSxvQkFBQSxXQUNBLEdBQUEsR0FDQSxFQUFBLEtBQUEsRUFPQSxPQUhBLEdBREEsYUFBQSxFQUFBLElBQUEsYUFBQSxhQUFBLEVBQUEsSUFBQSxhQUFBLFVBQUEsRUFBQSxJQUFBLFlBQ0EsRUFFQSxFQUFBLGdCQUdBLGNBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxRQUFBLFFBQUEsS0FBQSxrQkFBQSxJQUVBLGtCQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxHQUFBLEVBQ0EsSUFBQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxhQUFBLEtBQUEsTUFBQSxHQUFBLFlBR0EsSUFGQSxHQUFBLEVBRUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsVUFBQSxLQUFBLFNBQ0EsVUFBQSxLQUFBLFVBQ0EsTUFBQSxLQUVBLEdBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBLE1BRUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsR0FFQSxNQUFBLElBRUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxVQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxXQU1BLE9BSkEsR0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsS0FBQSxJQUVBLEVBQUEsU0FBQSxJQUVBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLE9BQUEsWUFFQSxFQUFBLEtBQUEsYUFBQSxFQUFBLEdBQUEsSUFBQSxLQUFBLFFBQUEsU0FBQSxJQUFBLFdBQ0EsTUFBQSxHQUFBLFdBQUEsRUFBQSxPQUFBLEtBQ0EsS0FFQSxPQUFBLE1BQUEsVUFBQSxRQUFBLFVBQUEsRUFBQSxFQUFBLElBRUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEtBQUEsVUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsS0FBQSxFQUNBLElBQ0EsRUFBQSxTQUFBLEtBR0EsRUFBQSxPQUVBLGlCQUFBLFdBQ0EsS0FBQSxlQUFBLEdBRUEsU0FBQSxXQUNBLEdBQUEsR0FBQSxJQUVBLE1BQUEsT0FBQSxJQUFBLEVBQUEsTUFBQSxLQUFBLFFBQ0EsS0FBQSxHQUFBLFdBQUEsR0FFQSxLQUFBLFFBQUEsT0FDQSxLQUFBLE1BQUEsV0FBQSxFQUFBLEtBQUEsS0FBQSxNQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUdBLEVBQUEsS0FBQSxLQUFBLFVBQUEsV0FDQSxFQUFBLFdBQUEsS0FBQSxNQUtBLElBQUEsSUFDQSxPQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsS0FHQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsS0FHQSxVQUFBLFdBQ0EsTUFBQSxNQUFBLFdBQUEsS0FBQSxJQUFBLElBRUEsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxzQkFHQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLGNBS0EsR0FBQSxPQUFBLEVBQUEsVUFBQSxHQVNBLEVBQUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsTUFBQSxVQUFBLE1BQUEsS0FBQSxVQUFBLEVBRUEsT0FBQSxNQUFBLElBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxLQUFBLEVBRUEsT0FBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLElBQUEsTUFDQSxHQUFBLElBQUEsR0FDQSxnQkFBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBRUEsVUFJQSxNQUFBLE9BQUEsWUN6cUJBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsWUFDQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsSUFRQSxVQUFBLFlBUUEsWUFBQSxjQVFBLGFBQUEsZUFRQSxvQkFBQSxFQVNBLHNCQUFBLEVBUUEsZUFBQSxFQVFBLGVBQUEsRUFRQSxXQUFBLEtBUUEsZ0JBQUEsR0FRQSxnQkFBQSxLQVFBLGdCQUFBLEtBUUEsY0FBQSxNQVVBLEVBQUEsWUFTQSxFQUFBLFNBUUEsRUFBQSxZQVFBLEVBQUEsYUFTQSxFQUFBLFlBUUEsRUFBQSxhQVNBLEVBQUEsVUFRQSxFQUFBLFNBU0EsRUFBQSxPQVNBLEVBQUEsUUFTQSxFQUFBLEtBU0EsRUFBQSxXQVNBLEVBQUEsaUJBU0EsRUFBQSxPQVNBLEVBQUEsUUFTQSxFQUFBLFVBU0EsRUFBQSxRQVNBLEVBQUEsWUFTQSxFQUFBLGdDQUFBLEVBQUEsVUFBQSxTQUFBLFdBQUEsS0FBQSxFQUFBLFVBQUEsYUFBQSxFQUFBLGNBU0EsRUFBQSxLQUNBLEVBQUEsRUFBQSxzQkFDQSxFQUFBLEVBQUEscUJBQ0EsRUFBQSxFQUFBLGNBQUEsT0FBQSxNQUNBLEVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUVBLEtBREEsR0FBQSxJQUFBLFVBQUEsT0FBQSxNQUFBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsRUFHQSxHQUZBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLFdBQ0EsSUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxFQUdBLFFBQUEsS0FFQSxFQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsR0FDQSxFQUVBLEtBQUEsRUFDQSxFQUVBLEVBQUEsRUFBQSxPQUFBLEdBQUEsY0FBQSxFQUFBLE9BQUEsSUFFQSxFQUFBLEVBQUEsYUFDQSxFQUFBLEtBQUEsRUFTQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FXQSxPQVZBLEdBQUEsRUFBQSxjQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxTQUFBLFdBQ0EsRUFBQSxNQUFBLFFBQ0EsRUFBQSxPQUFBLFFBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxJQUFBLFVBQ0EsRUFBQSxLQUFBLFlBQUEsR0FDQSxFQUFBLEVBQUEsWUFBQSxFQUFBLFlBQ0EsRUFBQSxLQUFBLFlBQUEsR0FDQSxHQUVBLEVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxDQUdBLE9BRkEsR0FBQSxFQUFBLFVBQUEsV0FDQSxFQUFBLDhCQUFBLEtBQUEsS0FJQSxFQUFBLG1CQUFBLEtBQUEsR0FDQSxJQUNBLEVBQUEsRUFBQSxHQUFBLFFBQUEsT0FBQSxLQUVBLElBQUEsRUFBQSxLQU5BLEdBZUEsRUFBQSxXQUNBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsSUFBQSxFQUFBLEtBQ0EsS0FBQSxJQUFBLEVBQUEsS0FBQSxJQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxpQkFBQSxHQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxlQUFBLEdBQ0EsS0FBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLFFBQ0EsS0FBQSxTQUFBLEtBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxjQUNBLEtBQUEsU0FBQSxLQUFBLFdBQUEsS0FBQSxRQUFBLFVBQUEsR0FDQSxLQUFBLFFBQUEsS0FBQSxTQUFBLEdBQ0EsS0FBQSxpQkFBQSxFQUNBLEtBQUEsUUFBQSxvQkFBQSxNQUFBLEtBQUEsR0FBQSxNQUFBLHdCQUNBLEtBQUEsa0JBRUEsS0FBQSxXQUVBLEtBQUEsZUFDQSxLQUFBLFlBQ0EsS0FBQSxRQXNpQkEsTUF6aEJBLEdBQUEsVUFBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEtBQUEsU0FHQSxHQUFBLEVBQUEsT0FBQSxHQUNBLElBQUEsR0FBQSxFQUFBLGNBQUEsT0FBQSxHQUFBLElBQUEsR0FBQSxFQUFBLGNBQUEsT0FBQSxJQUNBLEVBQUEscUJBRUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxDQUNBLElBQUEsRUFBQSxnQkFBQSxFQUFBLGNBQUEsV0FDQSxRQUVBLElBQUEsR0FBQSxFQUFBLGNBQUEsV0FBQSxHQUFBLElBQUEsR0FBQSxFQUFBLGNBQUEsV0FBQSxJQUNBLEVBQUEsbUJBWUEsRUFBQSxVQUFBLGdCQUFBLFdBQ0EsS0FBQSxTQUFBLEtBQ0Esd0JBQUEsVUFFQSxLQUFBLG9CQUFBLEVBQ0EsS0FBQSxVQUFBLEdBV0EsRUFBQSxVQUFBLG1CQUFBLFdBQ0EsR0FBQSxHQUFBLENBQ0EsR0FBQSxLQUFBLFFBQ0EsS0FBQSxhQUFBLEVBQUEsYUFBQSxFQUFBLGFBQ0EsS0FBQSxjQUFBLEtBQUEsa0JBQUEsRUFDQSxLQUFBLGlCQUFBLEVBQUEsVUFDQSxFQUFBLEtBQUEsaUJBQUEsS0FBQSxpQkFBQSxPQUFBLEtBQUEsaUJBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxpQkFBQSxLQUFBLGlCQUNBLFNBQUEsR0FDQSxLQUFBLElBQUEsUUFBQSxVQUNBLFNBQUEsS0FBQSxpQkFDQSxRQUFBLEtBQUEsYUFDQSxVQUFBLElBR0EsS0FBQSxxQkFDQSxLQUFBLGFBQUEsS0FBQSxXQUFBLEtBQUEsYUFDQSxLQUFBLFVBQUEsSUFBQSxLQUFBLGFBQUEsRUFBQSxLQUFBLGlCQUFBLEtBQUEsYUFBQSxLQUFBLGVBWUEsRUFBQSxVQUFBLGtCQUFBLFdBQ0EsR0FBQSxFQUNBLElBQ0EsS0FDQSxFQUFBLEdBQUEsZ0JBQUEsS0FBQSxVQUFBLE9BRUEsR0FDQSxJQUFBLEtBQUEsV0FHQSxHQUNBLEdBQUEsS0FBQSxXQUNBLEVBQUEsS0FBQSxXQUVBLEtBQUEsVUFBQSxFQUFBLFNBQUEsR0FDQSxNQUFBLFlBRUEsTUFEQSxHQUFBLFVBQUEsS0FDQSxFQUFBLE9BQUEsSUFBQSxLQUVBLFFBRUEsS0FBQSxPQUFBLElBQUEsSUFXQSxFQUFBLFVBQUEsYUFBQSxXQUNBLEtBQUEsUUFDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FTQSxNQVJBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxTQUFBLElBQ0EsRUFBQSxPQUFBLEdBQUEsRUFBQSxVQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLEtBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLEtBQUEsRUFBQSxFQUFBLE9BQUEsS0FDQSxJQUVBLE1BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBUUEsTUFQQSxHQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLEVBQUEsY0FDQSxFQUFBLFNBQ0EsRUFBQSxrQkFBQSxFQUFBLGNBQUEsRUFBQSxnQkFBQSxFQUFBLGFBQ0EsRUFBQSxJQUFBLFFBQUEsYUFDQSxJQUFBLEVBQUEsa0JBQUEsSUFBQSxFQUFBLGVBQ0EsRUFBQSxJQUFBLFFBQUEsY0FFQSxJQUVBLE1BQ0EsR0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUtBLE1BSkEsR0FBQSxnQkFBQSxFQUNBLEVBQUEsS0FBQSxZQUFBLFVBQ0EsRUFBQSxJQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsS0FDQSxJQUVBLE1BQ0EsT0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUNBLEVBQUEsVUFFQSxNQUNBLFNBQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUlBLE1BSEEsR0FBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLGNBQUEsUUFBQSxHQUFBLEVBQUEsYUFDQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEtBQUEsSUFDQSxJQUVBLE1BQ0EsT0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsRUFBQSxxQkFDQSxFQUFBLGlCQUdBLEVBQUEscUJBQ0EsRUFBQSxRQUFBLEVBQUEsVUFDQSxFQUFBLHFCQUVBLE1BQUEsSUFHQSxFQUFBLGtCQUFBLEVBQUEsY0FDQSxFQUFBLFFBQUEsc0JBQ0EsRUFBQSxpQkFBQSxFQUFBLEdBRUEsRUFBQSxnQkFBQSxFQUFBLGNBQ0EsRUFBQSxJQUFBLFFBQUEsY0FFQSxJQUFBLEVBQUEsbUJBQ0EsRUFBQSxRQUFBLHNCQUNBLEVBQUEsaUJBQUEsRUFBQSxHQUVBLElBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLGtCQUlBLE1BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsTUFBQSxFQVFBLE1BTEEsR0FBQSxFQUFBLE9BQUEsRUFBQSxZQUFBLEVBQUEsZUFBQSxFQUFBLGNBQUEsYUFBQSxFQUFBLFFBQUEsRUFBQSxnQkFBQSxFQUFBLGNBQUEsT0FDQSxJQUNBLEVBQUEsVUFBQSxFQUFBLEdBRUEsRUFBQSxVQUNBLElBRUEsTUFDQSxNQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FDQSxHQUFBLEVBQ0EsSUFBQSxFQUFBLGVBR0EsTUFBQSxNQUFBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFFBQUEsR0FBQSxNQUFBLEVBQUEsV0FEQSxTQUlBLFFBV0EsRUFBQSxVQUFBLFVBQUEsV0FDQSxHQUFBLEVBQ0EsTUFBQSxlQUNBLEVBQUEsS0FBQSxPQUNBLEtBQUEsUUFBQSxlQUNBLEtBQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxJQUVBLEtBQUEscUJBQ0EsS0FBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FFQSxLQUFBLFNBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxLQVVBLEVBQUEsVUFBQSxhQUFBLFdBQ0EsR0FBQSxFQUNBLEdBQUEsS0FBQSxPQUNBLEtBQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEscUJBQ0EsS0FBQSxPQUFBLFNBQ0EsS0FBQSxLQUFBLFVBRUEsS0FBQSxTQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FXQSxFQUFBLFVBQUEsU0FBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0F1QkEsT0F0QkEsR0FBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLGNBQ0EsRUFBQSxLQUFBLElBQUEsU0FBQSxJQUFBLElBQUEsUUFBQSxFQUFBLFNBQUEsSUFBQSxHQUFBLFFBQ0EsS0FBQSxJQUFBLE9BQUEsZUFBQSxFQUFBLGlCQUFBLEVBQUEsY0FFQSxLQUFBLEtBQUEsS0FBQSxJQUFBLFNBQUEsSUFBQSxHQUNBLEtBQUEsT0FBQSxLQUFBLEtBQUEsS0FBQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLGlCQUFBLEtBQUEsUUFBQSxNQUFBLGlCQUFBLGlCQUFBLFFBQUEsWUFBQSxJQUNBLEdBQ0EsTUFBQSxJQUNBLGNBQUEsRUFBQSxLQUVBLElBQ0EsR0FDQSxPQUFBLEdBRUEsS0FBQSxJQUFBLFNBQUEsa0JBRUEsTUFBQSxHQUNBLEtBQUEsU0FBQSxJQUFBLEdBRUEsTUFTQSxFQUFBLFVBQUEsUUFBQSxXQUNBLEtBQUEsU0FBQSxFQUNBLEtBQUEsb0JBQ0EsS0FBQSxLQUFBLE9BRUEsS0FBQSxhQVlBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FDQSxPQUFBLE1BQUEsb0JBQ0EsS0FBQSxjQUFBLEtBQUEsUUFBQSxhQUNBLFNBRUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFFBQUEsV0FBQSxRQUNBLEtBQUEsV0FBQSxPQUVBLEtBQUEsU0FDQSxLQUFBLFVBRUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLFVBQ0EsR0FDQSxLQUFBLFNBQUEsS0FDQSxPQUFBLEtBQUEsU0FBQSxXQUdBLEVBQUEsRUFBQSxhQUFBLEVBQ0EsRUFBQSxTQUFBLEtBQUEsSUFBQSxJQUFBLGNBQUEsSUFDQSxFQUFBLElBQ0EsS0FBQSxJQUFBLE9BQUEsSUFDQSxLQUFBLElBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLEVBQUEsZUFFQSxFQUFBLEtBQUEsS0FBQSxhQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQUEsS0FBQSxJQUFBLE9BQUEsSUFDQSxFQUFBLFNBQUEsS0FBQSxLQUFBLElBQUEsVUFBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsZ0JBQ0EsRUFBQSxLQUFBLFFBQUEsZ0JBQ0EsTUFBQSxLQUFBLFFBQUEsaUJBQUEsRUFBQSxLQUFBLFFBQUEsa0JBQ0EsRUFBQSxLQUFBLFFBQUEsaUJBRUEsSUFBQSxHQUFBLEVBQUEsWUFBQSxJQUNBLEdBQUEsR0FFQSxLQUFBLGFBQUEsRUFBQSxFQUNBLEtBQUEsY0FBQSxFQUNBLEtBQUEsV0FBQSxFQUNBLEtBQUEsZ0JBQUEsRUFDQSxLQUFBLGFBQUEsRUFDQSxLQUFBLFFBQUEsRUFDQSxLQUFBLE9BQUEsT0FBQSxHQUNBLEtBQUEsT0FBQSxTQUNBLEtBQUEsS0FBQSxPQUNBLEtBQUEsVUFBQSxFQUNBLEVBQUEsZUFBQSxFQUFBLGNBQUEsS0FBQSxLQUFBLGFBQUEsSUFBQSxFQUFBLGNBQUEsSUFBQSxHQUNBLEtBQUEsS0FBQSxPQUNBLEtBQUEsVUFBQSxHQUNBLEtBQUEsR0FBQSxlQUFBLEVBQUEsY0FBQSxJQUFBLEVBQ0EsS0FBQSxPQUFBLE9BRUEsS0FBQSxPQUFBLE9BRUEsS0FBQSxLQUFBLEtBQ0EsUUFBQSxLQUFBLFFBQUEsY0FBQSxFQUFBLEdBQ0EsV0FBQSxLQUFBLFFBQUEsY0FBQSxVQUFBLEtBRUEsRUFBQSxLQUFBLFNBQUEsSUFBQSxhQUNBLFdBQUEsR0FBQSxhQUFBLEtBQ0EsRUFBQSxTQUFBLEtBQUEsU0FBQSxJQUFBLFNBQUEsSUFDQSxHQUNBLEtBQUEsU0FBQSxLQUNBLE1BQUEsR0FDQSxZQUFBLEtBSUEsT0FXQSxFQUFBLFVBQUEsT0FBQSxXQUNBLE1BQUEsTUFBQSxVQUdBLEtBQUEsUUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLEtBQUEsSUFBQSxLQUFBLGFBQUEsS0FBQSxTQUNBLEtBQUEsU0FBQSxVQUFBLEtBQUEsYUFBQSxLQUFBLFFBQUEsS0FBQSxjQUNBLEtBQUEscUJBQ0EsS0FBQSxxQkFDQSxLQUFBLHFCQUVBLE1BVkEsUUF1QkEsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxVQUdBLEtBQUEsU0FBQSxVQUFBLEtBQUEsY0FBQSxLQUFBLFNBQUEsU0FBQSxHQUFBLFFBQUEsR0FDQSxLQUFBLE9BQUEsVUFDQSxNQUxBLFFBa0JBLEVBQUEsVUFBQSxVQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFNBQUEsV0FBQSxHQUFBLFFBQUEsR0FDQSxLQUFBLE9BQUEsVUFDQSxNQUxBLFFBa0JBLEVBQUEsVUFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFVBQUEsS0FBQSxJQUFBLEtBQUEsR0FBQSxJQUFBLEdBQUEsV0FDQSxNQUpBLFFBaUJBLEVBQUEsVUFBQSxLQUFBLFdBVUEsTUFUQSxJQUFBLEtBQUEsWUFDQSxFQUFBLEtBQUEsV0FDQSxLQUFBLFVBQUEsTUFFQSxLQUFBLFNBQUEsRUFDQSxLQUFBLGVBQ0EsS0FBQSxvQkFDQSxLQUFBLEtBQUEsT0FFQSxNQVlBLEVBQUEsVUFBQSxRQUFBLFdBaUJBLE1BaEJBLE1BQUEsU0FDQSxLQUFBLFFBRUEsS0FBQSxvQkFBQSxLQUFBLEtBQUEsUUFDQSxLQUFBLEtBQUEsU0FFQSxHQUNBLEtBQUEsU0FBQSxPQUFBLElBRUEsS0FBQSxTQUFBLFdBQUEsWUFDQSxLQUFBLElBQUEsU0FBQSxtQkFDQSxLQUFBLElBQUEsWUFBQSxpQkFDQSxLQUFBLFNBQUEsS0FDQSxNQUFBLE1BR0EsTUFhQSxFQUFBLFVBQUEsTUFBQSxXQUNBLE9BQUEsS0FBQSxvQkFHQSxLQUFBLFVBR0EsS0FBQSxRQUNBLEtBQUEsS0FBQSxTQUFBLFdBQ0EsV0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUNBLEVBQUEsS0FBQSxZQUFBLGFBRUEsTUFBQSxLQUFBLFFBQUEsWUFDQSxNQWJBLFFBZ0JBLEtBR0EsRUFBQSxHQUFBLGFBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLENBS0EsS0FKQSxFQUFBLEtBQUEsZ0JBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxHQUNBLEtBQUEsYUFBQSxFQUFBLEdBQUEsR0FBQSxLQUFBLElBRUEsR0FBQSxnQkFBQSxHQUFBLENBRUEsR0FEQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEdBQ0EsTUFBQSxFQUFBLGFBQ0EsTUFBQSxHQUFBLGFBQUEsRUFBQSxhQUVBLElBQUEsTUFBQSxFQUFBLFVBQ0EsTUFBQSxHQUFBLFVBQUEsRUFBQSxVQUVBLElBQUEsRUFBQSxTQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsU0FFQSxJQUFBLFdBQUEsRUFBQSxPQUNBLE1BQUEsR0FBQSxhQUFBLEVBRUEsSUFBQSxRQUFBLEVBQUEsT0FDQSxNQUFBLEdBQUEsVUFBQSxFQUVBLElBQUEsRUFBQSxRQUFBLEVBQUEsaUJBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLE9BRUEsSUFBQSxFQUFBLEtBQ0EsTUFBQSxHQUFBLE1BRUEsSUFBQSxFQUFBLFFBQ0EsTUFBQSxHQUFBLFNBRUEsSUFBQSxFQUFBLE1BQ0EsTUFBQSxHQUFBLFFBR0EsTUFBQSxHQUFBLFdBR0EsRUFBQSxHQUFBLGFBQUEsWUFBQSxHQUNBLE1BQUEsT0FBQSxVQ3I3QkEsU0FBQSxHQUNBLGtCQUFBLFNBQUEsT0FBQSxLQUFBLE9BQUEsSUFBQSxNQUVBLFFBQUEsVUFBQSxHQUdBLEVBQUEsUUFFQSxTQUFBLEdBQ0EsWUFtT0EsU0FBQSxHQUFBLEdBb0JBLE9BbEJBLEdBQUEsU0FBQSxFQUFBLGlCQUFBLFNBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxjQUNBLEVBQUEsZ0JBQUEsR0FLQSxTQUFBLEVBQUEsT0FBQSxTQUFBLEVBQUEsTUFDQSxFQUFBLElBQUEsRUFBQSxPQUdBLElBQ0EsTUFJQSxFQUFBLEVBQUEsVUFBQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEdBR0EsS0FBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFHQSxFQUFBLEVBQUEsS0FBQSxFQUVBLEtBQ0EsRUFBQSxHQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE1BZ0JBLFFBQUEsR0FBQSxFQUFBLEdBd0lBLFFBQUEsR0FBQSxHQUVBLEtBQUEsTUFJQSxFQUFBLEVBQUEsUUFBQSxRQUFBLEVBQUEsaUJBQUEsSUFBQSxPQUFBLEdBQUEsQ0FLQSxHQUVBLEdBRkEsRUFBQSxFQUFBLGNBQUEsRUFBQSxjQUFBLEVBR0EsRUFBQSxFQUFBLEVBQUEsUUFBQSxHQUFBLENBa0RBLE9BaERBLElBQUEsRUFHQSxFQUVBLEdBQUEsRUFBQSxRQUFBLE9BSUEsRUFBQSxpQkFJQSxHQUFBLEVBQ0EsR0FBQSxLQUNBLEdBQUEsS0FDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsS0FDQSxHQUFBLEtBQ0EsTUFJQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsVUFBQSxHQUFBLEtBRUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxLQUVBLEdBQUEsS0FHQSxHQUFBLEVBQUEsRUFBQSxRQUFBLElBQ0EsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLE1BQUEsR0FBQSxHQUFBLFNBR0EsRUFBQSxhQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxNQUlBLEdBQUEsRUFJQSxLQUFBLEdBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxJQUNBLElBRUEsRUFBQSxPQUNBLEdBQUEsV0FBQSxFQUFBLE1BQUEsV0FFQSxHQUFBLFFBQUEsUUFBQSxFQUFBLFNBRUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxLQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFFQSxNQUFBLEVBQUEsbUJBR0EsSUFBQSxHQUdBLE9BV0EsUUFBQSxHQUFBLEdBSUEsR0FBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLGNBQUEsQ0FHQSxJQUFBLEtBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxDQUdBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUFBLEdBQUEsRUFJQSxFQUFBLEdBQUEsRUFvQ0EsSUFuQ0EsR0FBQSxLQUVBLElBQ0EsR0FBQSxFQUFBLFFBQUEsUUFHQSxFQUFBLE1BQ0EsYUFBQSxJQUVBLEdBQUEsRUFHQSxHQUFBLEtBSUEsR0FBQSxJQUVBLEdBQUEsRUFBQSxFQUFBLFFBQUEsSUFFQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsU0FHQSxHQUFBLEVBQUEsUUFBQSxJQUVBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEdBQUEsS0FDQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBQUEsR0FBQSxHQUFBLE1BSUEsR0FBQSxHQUFBLEdBQUEsSUFDQSxHQUFBLEtBQUEsSUFBQSxHQUFBLEtBSUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxVQUFBLElBQUEsR0FBQSxLQXFCQSxHQW5CQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FHQSxFQUFBLEVBQUEsSUFHQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FDQSxHQUFBLEtBR0EsR0FBQSxHQUFBLEtBR0EsRUFBQSxhQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxNQUtBLEVBQUEsbUJBQUEsRUFBQSxvQkFBQSxDQUVBLEdBQUEsSUFBQSxDQUdBLElBQUEsRUFBQSxvQkFBQSxDQUNBLEdBQUEsR0FBQSxHQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsSUFBQSxJQUlBLEVBQUEsbUJBQUEsRUFDQSxHQUFBLEVBQUEsR0FHQSxFQUFBLHNCQUFBLElBQ0EsR0FBQSxFQUFBLEtBR0EsSUFBQSxHQUFBLElBQUEsSUFDQSxFQUFBLEVBQUEsU0FJQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEdBR0EsTUFBQSxJQUNBLEdBQUEsRUFDQSxFQUFBLEVBQUEsTUFZQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxhQUtBLE9BQUEsSUFDQSxFQUFBLFFBQUEsT0FBQSxHQUNBLE1BQ0EsSUFNQSxPQUNBLEdBQUEsSUFJQSxHQUFBLEtBR0EsR0FBQSxLQUdBLE1BQUEsS0FDQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxtQkFBQSxHQUFBLEVBQUEsbUJBQUEsS0FBQSxHQUVBLEVBQUEsaUJBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxNQUtBLEVBQUEsbUJBQUEsS0FFQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsSUFDQSxLQUFBLElBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxLQUdBLElBQUEsR0FFQSxNQVVBLFFBQUEsS0FFQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFHQSxLQUVBLElBQUEsR0FVQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxhQUdBLEdBQUEsc0JBQ0EsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEtBUUEsUUFBQSxLQUNBLEdBQUEsT0FBQSxHQUFBLEdBQ0EsR0FBQSxPQUFBLEdBQUEsR0FDQSxHQUFBLE9BQUEsR0FBQSxHQUNBLEdBQUEsT0FBQSxHQUFBLEdBR0EsSUFDQSxHQUFBLE9BQUEsR0FBQSxHQUdBLElBQUEsR0FPQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsRUFHQSxFQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsR0FlQSxRQVpBLEdBQUEsRUFDQSxFQUFBLEdBR0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxvQkFBQSxFQUFBLHFCQUlBLEdBQUEsR0FBQSxHQUFBLEVBQUEsc0JBQ0EsRUFBQSxHQUpBLEVBQUEsRUFPQSxFQVdBLFFBQUEsR0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLE1BbURBLE9BaERBLE1BQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsS0FBQSxNQUFBLEtBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsTUFBQSxLQUFBLEVBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUlBLE1BQUEsS0FBQSxFQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FJQSxNQUFBLEtBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBTUEsSUFBQSxHQUNBLEVBQUEsR0FJQSxJQUFBLElBRUEsRUFDQSxHQUFBLEVBQUEsUUFBQSxRQUNBLEVBQUEsR0FHQSxFQUFBLElBSUEsRUFjQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLE1BR0EsSUFBQSxHQUFBLEVBQUEsQ0FPQSxHQUhBLEdBQUEsUUFBQSxlQUFBLEVBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsY0FDQSxFQUFBLEVBQUEsWUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsSUFFQSxLQUFBLEdBQUEsT0FBQSxDQU1BLElBQUEsR0FBQSxHQUFBLElBQUEsQ0FLQSxHQUhBLEdBQUEsUUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUVBLEtBQUEsR0FBQSxPQUFBLENBSUEsUUFBQSxJQUNBLElBQUEsR0FFQSxHQUFBLFFBQUEsYUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxZQUNBLEVBQUEsRUFBQSxVQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsY0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxhQUNBLEVBQUEsRUFBQSxXQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsV0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxVQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsYUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxZQUNBLEVBQUEsRUFBQSxVQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsT0FTQSxHQUFBLEdBQUEsRUFBQSxDQUtBLEdBSEEsR0FBQSxRQUFBLGVBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLFlBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsSUFFQSxLQUFBLEdBQUEsT0FBQSxDQUdBLElBQUEsR0FBQSxHQUFBLElBRUEsT0FBQSxJQUNBLElBQUEsR0FFQSxHQUFBLFFBQUEsV0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLElBRUEsTUFFQSxLQUFBLEdBRUEsR0FBQSxRQUFBLFlBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxXQUNBLEVBQUEsRUFBQSxTQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsR0FBQSxNQWtGQSxNQXZFQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLElBQUEsS0FJQSxhQUFBLElBRUEsYUFBQSxJQUdBLE1BQUEsTUFFQSxHQUFBLEtBSUEsR0FBQSxXQUFBLEVBQUEsTUFBQSxXQUNBLEdBQUEsS0FFQSxHQUFBLFFBQUEsT0FBQSxFQUFBLFNBSUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxJQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFFQSxNQUFBLEVBQUEsc0JBR0EsR0FBQSxLQUdBLEdBQUEsUUFBQSxPQUFBLEVBQUEsU0FJQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLElBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxXQUlBLEdBQUEsR0FDQSxJQUFBLEdBQUEsSUFBQSxLQUVBLGFBQUEsSUFDQSxHQUFBLEtBR0EsR0FBQSxRQUFBLGFBQUEsRUFBQSxTQUdBLEVBQUEsWUFDQSxFQUFBLEVBQUEsVUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLFVBR0EsR0FBQSxJQUNBLElBQUEsR0FBQSxJQUFBLEtBRUEsYUFBQSxJQUNBLEdBQUEsS0FHQSxHQUFBLFFBQUEsV0FBQSxFQUFBLFNBR0EsRUFBQSxVQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFLQSxFQWdCQSxRQUFBLEtBQ0EsR0FBQSxJQUFBLENBTUEsT0FKQSxRQUFBLEVBQUEsWUFDQSxFQUFBLElBQUEsRUFBQSxXQUdBLEVBU0EsUUFBQSxLQUNBLEdBQUEsSUFBQSxDQUtBLE9BSkEsUUFBQSxFQUFBLGlCQUFBLE9BQUEsS0FDQSxFQUFBLEdBQUEsSUFBQSxJQUFBLEVBQUEsaUJBR0EsRUFTQSxRQUFBLEtBQ0EsTUFBQSxRQUFBLEVBQUEsZUFDQSxJQUFBLEVBQUEsZ0JBRUEsRUFRQSxRQUFBLEtBQ0EsR0FBQSxFQWFBLE9BUkEsR0FGQSxFQUFBLGlCQUNBLElBQUEsRUFBQSxrQkFDQSxHQUVBLEdBR0EsRUFlQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxrQkFBQSxHQUFBLElBQ0EsRUFBQSxxQkFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGtCQUFBLENBRUEsUUFBQSxHQUNBLElBQUEsSUFDQSxFQUFBLFdBQUEsSUFBQSxHQUFBLEVBQUEsaUJBQUEsSUFDQSxFQUFBLGdCQUVBLE1BRUEsS0FBQSxJQUNBLEVBQUEsWUFBQSxJQUFBLEdBQUEsRUFBQSxpQkFBQSxJQUNBLEVBQUEsZ0JBRUEsTUFFQSxLQUFBLElBQ0EsRUFBQSxTQUFBLElBQUEsR0FBQSxFQUFBLGlCQUFBLElBQ0EsRUFBQSxnQkFFQSxNQUVBLEtBQUEsSUFDQSxFQUFBLFdBQUEsSUFBQSxHQUFBLEVBQUEsaUJBQUEsSUFDQSxFQUFBLG1CQWVBLFFBQUEsS0FDQSxHQUFBLEdBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxHQUNBLE9BQUEsSUFBQSxHQUFBLEVBU0EsUUFBQSxLQUVBLFNBQUEsRUFBQSxhQUFBLEVBQUEsU0FBQSxFQUFBLFVBUUEsUUFBQSxLQUVBLFNBQUEsTUFBQSxLQVlBLFFBQUEsS0FFQSxHQUFBLEdBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsSUFDQSxFQUFBLElBSUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLENBRUEsT0FBQSxHQVFBLFFBQUEsS0FFQSxTQUFBLEVBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxXQUFBLEVBQUEsWUFBQSxFQUFBLFNBQUEsRUFBQSxXQVNBLFFBQUEsS0FFQSxTQUFBLE1BQUEsS0FRQSxRQUFBLEtBRUEsTUFBQSxNQUFBLEVBQUEsU0FBQSxFQUFBLFVBQUEsSUFBQSxFQVFBLFFBQUEsS0FFQSxNQUFBLEtBQUEsR0FBQSxHQUFBLElBQUEsRUFTQSxRQUFBLEtBRUEsUUFBQSxFQUFBLElBUUEsUUFBQSxLQUVBLFFBQUEsRUFBQSxVQVFBLFFBQUEsS0FFQSxRQUFBLEVBQUEsUUFRQSxRQUFBLEtBQ0EsR0FBQSxNQUFBLEdBQ0EsT0FBQSxDQUVBLElBQUEsR0FBQSxJQUNBLE9BQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxtQkFRQSxRQUFBLE1BQ0EsTUFBQSxLQVNBLFFBQUEsTUFDQSxPQUFBLElBQUEsS0FBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsV0FRQSxRQUFBLE1BRUEsTUFBQSxJQUFBLEVBQUEsa0JBQUEsRUFBQSxHQVFBLFFBQUEsTUFFQSxTQUFBLE9BQUEsS0FTQSxRQUFBLE1BRUEsU0FBQSxNQUFBLEtBUUEsUUFBQSxNQUVBLFNBQUEsT0FBQSxLQVdBLFFBQUEsTUFDQSxHQUFBLEtBQ0EsR0FBQSxNQUFBLFFBQUEsT0FBQSxFQU9BLFFBQUEsTUFDQSxHQUFBLEVBQ0EsR0FBQSxFQVFBLFFBQUEsTUFFQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxFQUNBLElBQUEsRUFBQSx5QkFDQSxHQUFBLEdBSUEsTUFBQSxHQVNBLFFBQUEsTUFFQSxRQUFBLEdBQUEsS0FBQSxFQUFBLGVBQUEsR0FRQSxRQUFBLElBQUEsR0FHQSxLQUFBLEdBQ0EsR0FBQSxLQUFBLEdBQUEsR0FDQSxHQUFBLEtBQUEsR0FBQSxHQUdBLElBQ0EsR0FBQSxLQUFBLEdBQUEsS0FHQSxHQUFBLE9BQUEsR0FBQSxHQUFBLEdBQ0EsR0FBQSxPQUFBLEdBQUEsR0FBQSxHQUdBLElBQ0EsR0FBQSxPQUFBLEdBQUEsR0FBQSxJQU1BLEdBQUEsS0FBQSxFQUFBLFdBQUEsS0FBQSxHQVdBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxXQUFBLEVBQUEsV0FBQSxDQU1BLE9BSkEsSUFBQSxHQUFBLFdBQUEsRUFDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFFQSxHQUFBLEdBU0EsUUFBQSxJQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxXQUFBLEVBQUEsV0FBQSxFQUNBLEVBQUEsR0FBQSxFQUtBLE9BSEEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxRQUVBLEVBV0EsUUFBQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxJQUNBLEdBQUEsR0FBQSxHQUFBLFlBQUEsRUFDQSxNQUFBLElBQUEsR0FVQSxRQUFBLE1BRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsTUFDQSxPQUNBLEVBQUEsRUFDQSxFQUFBLEdBRUEsS0FDQSxFQUFBLEVBQ0EsRUFBQSxHQUVBLFdBQUEsR0FJQSxPQUFBLEdBVUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEdBQUEsSUFDQSxHQUFBLEdBQUEsU0FBQSxFQVNBLFFBQUEsSUFBQSxHQUNBLE1BQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxTQUNBLE9BUUEsUUFBQSxNQUNBLEdBQUEsS0FNQSxPQUxBLEdBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxHQUFBLEdBRUEsRUFTQSxRQUFBLElBQUEsR0FDQSxPQUNBLFVBQUEsRUFDQSxTQUFBLEdBY0EsUUFBQSxNQUNBLE1BQUEsSUFBQSxHQVVBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBRUEsT0FBQSxNQUFBLE1BQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLElBVUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxHQUFBLFFBQUEsR0FVQSxRQUFBLE1BQ0EsTUFBQSxHQUFBLEdBQ0EsRUFFQSxFQVlBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsS0FVQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsSUFBQSxFQUFBLEtBQUEsR0FPQSxPQUpBLEdBQUEsSUFDQSxFQUFBLElBQUEsS0FBQSxJQUFBLElBR0EsRUFZQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsRUFFQSxPQUFBLEtBQUEsR0FBQSxHQUFBLEVBQ0EsRUFDQSxLQUFBLEdBQUEsR0FBQSxJQUNBLEVBQ0EsR0FBQSxLQUFBLEtBQUEsRUFDQSxFQUNBLEVBQUEsSUFBQSxJQUFBLEVBQ0EsRUFFQSxFQVVBLFFBQUEsTUFDQSxHQUFBLEdBQUEsR0FBQSxLQUNBLE9BQUEsR0FBQSxVQVNBLFFBQUEsSUFBQSxHQUNBLEVBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLFNBRUEsR0FDQSxLQUFBLEVBQUEsS0FDQSxNQUFBLEVBQUEsS0FBQSxFQUFBLGFBQ0EsSUFBQSxFQUFBLElBQ0EsT0FBQSxFQUFBLElBQUEsRUFBQSxjQUdBLE9BQUEsR0FlQSxRQUFBLElBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsT0E5NUNBLEdBQUEsSUFBQSxHQUFBLElBQUEsRUFBQSxzQkFDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGdCQUFBLGNBQUEsYUFBQSxZQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsZ0JBQUEsY0FBQSxZQUFBLFlBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxjQUFBLFlBQUEsV0FBQSxVQUNBLEdBQUEsR0FBQSxLQUFBLGFBQ0EsR0FBQSxFQUFBLEVBQUEsa0JBQUEsZ0JBQUEsY0FLQSxHQUFBLEVBQ0EsR0FBQSxLQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsS0FLQSxHQUFBLEVBQUEsR0FHQSxHQUFBLFFBR0EsR0FBQSxFQUdBLEdBQUEsS0FHQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUdBLEdBQUEsS0FDQSxHQUFBLElBR0EsS0FDQSxHQUFBLEtBQUEsR0FBQSxHQUNBLEdBQUEsS0FBQSxHQUFBLEdBQ0EsTUFBQSxJQUNBLEVBQUEsTUFBQSx3QkFBQSxHQUFBLElBQUEsR0FBQSxvQkFjQSxLQUFBLE9BQUEsV0FHQSxNQUZBLElBQUEsS0FBQSxHQUFBLEdBQ0EsR0FBQSxLQUFBLEdBQUEsR0FDQSxJQVVBLEtBQUEsUUFBQSxXQUVBLE1BREEsS0FDQSxJQVVBLEtBQUEsUUFBQSxXQUdBLE1BRkEsS0FDQSxHQUFBLEtBQUEsRUFBQSxNQUNBLElBZ0JBLEtBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLFNBQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxTQUFBLEVBQ0EsTUFBQSxHQUFBLEVBRUEsR0FBQSxHQUFBLE1BR0EsR0FBQSxNQUFBLFVBQUEsRUFBQSwwQ0FHQSxPQUFBLE9BcFlBLEdBQUEsR0FBQSxPQUNBLEVBQUEsUUFDQSxFQUFBLEtBQ0EsRUFBQSxPQUNBLEVBQUEsS0FDQSxFQUFBLE1BRUEsRUFBQSxPQUNBLEVBQUEsT0FFQSxFQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsTUFDQSxFQUFBLFlBQ0EsRUFBQSxVQUdBLEVBQUEsYUFDQSxFQUFBLFdBRUEsRUFBQSxNQUVBLEVBQUEsR0FFQSxFQUFBLFFBQ0EsRUFBQSxPQUNBLEVBQUEsTUFDQSxFQUFBLFNBRUEsRUFBQSxnQkFBQSxRQUVBLEVBQUEsT0FBQSxVQUFBLG1CQUFBLE9BQUEsVUFBQSxlQUVBLEVBQUEsT0FBQSxVQUFBLGdCQUFBLE9BQUEsVUFBQSxpQkFFQSxFQUFBLGFBeUNBLEdBQ0EsUUFBQSxFQUNBLFVBQUEsR0FDQSxnQkFBQSxLQUNBLGVBQUEsR0FDQSxpQkFBQSxLQUNBLHVCQUFBLElBQ0EsaUJBQUEsSUFDQSxtQkFBQSxJQUNBLE1BQUEsS0FDQSxVQUFBLEtBQ0EsV0FBQSxLQUNBLFFBQUEsS0FDQSxVQUFBLEtBQ0EsWUFBQSxLQUNBLFFBQUEsS0FDQSxTQUFBLEtBQ0EsWUFBQSxLQUNBLE1BQUEsS0FDQSxJQUFBLEtBQ0EsVUFBQSxLQUNBLFFBQUEsS0FDQSxLQUFBLEtBQ0EsbUJBQUEsRUFDQSxxQkFBQSxFQUNBLGdCQUFBLE9BQ0EsdUJBQUEsRUFDQSxpQkFBQSxzREFpQkEsR0FBQSxHQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQUEsRUFHQSxJQUFBLEdBQUEsZ0JBQUEsR0FBQSxDQUNBLEdBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLE1BQUEsS0FBQSxNQUFBLFVBQUEsTUFBQSxLQUFBLFVBQUEsR0FFQSxHQUFBLE1BQUEsVUFBQSxFQUFBLHVDQUlBLE1BQUEsR0FBQSxnQkFBQSxJQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxVQUdBLE9BQUEsSUFJQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEVBWUEsRUFBQSxHQUFBLE1BQUEsUUFDQSxZQUFBLEVBQ0EsV0FBQSxFQUNBLFVBQUEsRUFDQSxhQUFBLEdBZUEsRUFBQSxHQUFBLE1BQUEsWUFDQSxLQUFBLEVBQ0EsTUFBQSxFQUNBLEdBQUEsRUFDQSxLQUFBLEVBQ0EsR0FBQSxFQUNBLElBQUEsR0FjQSxFQUFBLEdBQUEsTUFBQSxZQUNBLEtBQUEsRUFDQSxXQUFBLEVBQ0EsU0FBQSxFQUNBLEtBQUEsR0FlQSxFQUFBLEdBQUEsTUFBQSxTQUNBLElBQUEsRUFDQSxJQUFBLEVBQ0EsTUFBQSxFQUNBLElBQUEsSUM1T0EsSUFBQSxPQUVBLFlBR0EsV0FHQSxVQUFBLElBR0EsU0FBQSxFQUdBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUVBLEtBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFHQSxPQUFBLElBSUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxhQUFBLE9BQUEsRUFBQSxPQUFBLEdBQUEsR0FJQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsS0FBQSxFQUNBLEtBQUEsT0FBQSxFQUNBLEtBQUEsS0FBQSxJQUdBLEtBQUEsU0FBQSxXQUNBLE1BQUEsTUFBQSxJQUFBLEtBQUEsS0FBQSxPQUFBLElBS0EsTUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBR0EsSUFBQSxFQUFBLEVBQUEsUUFBQSxDQUdBLEVBQUEsRUFBQSxNQUFBLEtBQUEsV0FHQSxFQUFBLEVBQUEsUUFBQSxNQUVBLEtBRUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxNQUFBLE1BQUEsR0FBQSxPQUFBLElBR0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUVBLE1BQUEsS0FLQSxNQUFBLElBSUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBR0EsR0FDQSxFQUpBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUlBLElBQUEsWUFBQSxPQUlBLElBSEEsRUFBQSxHQUNBLEVBQUEsRUFBQSxTQUVBLEVBQUEsR0FDQSxHQUNBLEtBQUEsR0FBQSxNQUFBLE1BQUEsRUFBQSxJQUVBLEdBQUEsRUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BR0EsYUFBQSxVQUNBLEVBQUEsS0FBQSxHQUFBLEVBQUEsR0FHQSxPQUFBLElBSUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLHFCQUdBLFFBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsSUFJQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsSUFDQSxFQUFBLE1BQ0EsSUFHQSxHQUNBLEVBSkEsRUFBQSxTQUFBLEVBQUEsc0JBQUEsRUFBQSxTQUNBLEVBQUEsR0FBQSxRQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsTUFBQSxPQUdBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxHQUNBLEVBQUEsQ0FFQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEVBQUEsR0FFQSxFQUFBLEdBQUEsUUFBQSxPQUFBLEdBQ0EsSUFHQSxJQUdBLElBQUEsR0FYQSxLQXFCQSxNQUxBLEdBQUEsRUFBQSxRQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUdBLEVBQUEsVUFBQSxFQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FLQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsRUFBQSxLQUdBLElBSUEsR0FFQSxFQUVBLEVBSUEsRUFFQSxFQUVBLEVBRUEsRUFFQSxFQUVBLEVBRUEsRUF4QkEsRUFBQSxpQkFFQSxFQUFBLEVBQUEsTUFBQSxPQVFBLEtBZ0JBLEVBQUEsRUFDQSxFQUFBLENBNEJBLEtBekJBLEVBQUEsT0FDQSxLQUFBLE1BQUEsRUFBQSxNQUFBLEtBQUEsT0FJQSxFQUFBLFVBQ0EsS0FBQSxNQUFBLEVBQUEsU0FBQSxLQUFBLFVBSUEsRUFBQSxTQUNBLEtBQUEsTUFBQSxFQUFBLFFBQUEsS0FBQSxTQUlBLEVBQUEsWUFDQSxLQUFBLFVBQUEsRUFBQSxXQUlBLFNBQUEsRUFBQSxVQUNBLEtBQUEsUUFBQSxFQUFBLFNBSUEsRUFBQSxFQUFBLE1BNkJBLEdBNUJBLEVBQUEsT0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFFBQUEsT0FBQSxHQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxRQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEtBQUEsS0FFQSxFQUFBLElBQUEsRUFBQSxPQUFBLFFBQUEsT0FDQSxFQUFBLEVBQUEsTUFBQSxLQUNBLEVBQUEsUUFDQSxFQUFBLEVBQUEsUUFBQSxTQUFBLElBQUEsTUFBQSxLQUFBLFFBQUEsT0FDQSxFQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsS0FBQSxHQUNBLEVBQUEsRUFBQSxHQUdBLElBQUEsRUFBQSxTQUNBLEdBQUEsY0FJQSxHQUFBLEVBQUEsUUFBQSxNQUFBLEdBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLE1BQUEsR0FBQSxPQUFBLElBSUEsdUJBQUEsS0FBQSxHQUFBLENBS0EsR0FBQSxVQUFBLEVBQUEsS0FBQSxRQUFBLElBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBO0lBSUEsSUFBQSxFQUFBLEtBQUEsU0FBQSxHQUNBLFlBQUEsWUFDQSxFQUFBLEtBRUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLE9BSUEsSUFBQSxFQUFBLFFBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE9BSUEsSUFBQSxNQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxPQUlBLElBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxDQWFBLElBWkEsRUFBQSxFQUFBLE1BQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxFQUFBLElBRUEsRUFDQSxFQUFBLEdBR0EsRUFBQSxFQUNBLEVBQUEsR0FJQSxHQUFBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLEtBR0EsR0FBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLE9BSUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBSUEsWUFBQSxPQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxHQUlBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsT0FJQSxFQUFBLGVBQUEsS0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBSUEsYUFBQSxTQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxJQUlBLElBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsSUFJQSxFQUFBLEVBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxNQUFBLEdBR0EsTUFBQSxNQUFBLFFBQUEsRUFBQSxRQUFBLFNBQUEsTUFBQSxHQUlBLEtBQUEsT0FDQSxNQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxFQUFBLElBQUEsT0FBQSxRQUFBLEVBQUEsR0FFQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxJQUFBLE9BQUEsT0FBQSxHQUFBLEdBRUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsSUFBQSxFQUFBLEVBQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLEdBQUEsRUFBQSxHQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxHQUVBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLE1BREEsR0FBQSxLQUFBLE1BQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxVQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxRQUFBLEVBQUEsS0FBQSxLQUFBLEdBQUEsR0FBQSxHQUVBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxHQUVBLE9BQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLGVBRUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxRQUFBLEdBQUEsZUFFQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxjQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsaUJBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxHQUVBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxNQUNBLE9BQUEsR0FBQSxNQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLFFBQUEsVUFBQSxNQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxPQUFBLElBRUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxRQUFBLEdBQUEsUUFBQSxlQUFBLEtBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBRUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBRUEsUUFBQSxTQUFBLEdBQ0EsU0FBQSxPQUFBLEdBQUEsV0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLElBRUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLEdBQUEsR0FBQSxJQUFBLEdBQUEsS0FFQSxNQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEdBQUEsTUFFQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsR0FBQSxJQUVBLE9BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEtBQUEsRUFBQSxNQUFBLFFBQUEsUUFBQSxFQUFBLE1BQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUVBLFVBQUEsT0FBQSxHQUFBLEtBQUEsRUFBQSxFQUFBLFNBRUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxRQUFBLEdBQUEsUUFBQSxJQUVBLElBQUEsU0FBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEdBRUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUFBLEdBQUEsR0FBQSxHQUFBLEdBRUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsR0FBQSxHQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsR0FDQSxNQUFBLFlBQUEsRUFBQSxRQUFBLGFBQUEsTUFFQSxJQUFBLFNBQUEsR0FDQSxNQUFBLFdBQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxRQUFBLEdBRUEsTUFBQSxTQUFBLEdBQ0EsT0FBQSxHQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsS0FBQSxFQUFBLEtBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQUEsRUFBQSxLQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxNQUFBLEtBQUEsTUFBQSxLQUFBLFVBQUEsS0FFQSxJQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxRQUFBLEdBQUEsRUFBQSxJQUVBLElBQUEsU0FBQSxHQUVBLE1BREEsU0FBQSxJQUFBLEdBQ0EsSUFLQSxrQkFBQSxRQUFBLFVBQUEsT0FDQSxPQUFBLFVBQUEsS0FBQSxXQUNBLE1BQUEsTUFBQSxRQUFBLGFBQUEsTUFLQSxtQkFBQSxTQUFBLE9BQUEsUUFDQSxPQUFBLFFBQUEsS0FFQSxrQkFBQSxTQUFBLE9BQUEsS0FDQSxPQUFBLFdBQ0EsTUFBQSxPSmhlQSxJQUFBLFFBQUEsU0FBQSxHQUVBLFlBNkNBLFNBQUEsS0FJQSxHQUNBLEdBREEsRUFBQSxFQUFBLFVBT0EsT0FMQSxZQUFBLFdBQ0EsR0FBQSxZQUFBLFVBQUEsTUFBQSxNQUFBLFNBQUEsVUFBQSxZQUNBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsSUFDQSxLQUNBLEVBQUEsVUFRQSxRQUFBLEdBQUEsR0FHQSxDQUFBLEdBQUEsTUFDQSxJQUNBLEdBQUEsT0FhQSxNQVhBLEdBQUEsS0FBQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxPQUVBLEdBQUEsS0FBQSxFQUFBLElBQUEsR0FBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLElBQ0EsS0FBQSxXQUNBLEVBQUEsR0FBQSxFQUFBLEdBQUEsU0FLQSxFQUFBLEtBQUEsTUFBQSxLQUFBLEdBQUEsVUFRQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEVBRUEsS0FDQSxFQUFBLDBEQUVBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxDQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQUlBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsT0FDQSxFQUFBLEVBQUEsSUFBQSxFQUVBLEdBQUEsS0FBQSxFQUFBLFVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxPQVVBLFFBQUEsR0FBQSxFQUFBLEdBRUEsR0FxQkEsR0FDQSxFQXRCQSxLQUNBLEVBQUEsbXNCQW1CQSxFQUFBLEVBQUEsU0FHQSxRQUFBLEdBQ0EsSUFBQSxJQUNBLEVBQUEsWUFDQSxFQUFBLFFBQ0EsTUFDQSxLQUFBLE1BQ0EsRUFBQSxVQUNBLEVBQUEsTUFDQSxNQUNBLEtBQUEsS0FDQSxFQUFBLGVBQ0EsRUFBQSxXQUNBLE1BQ0EsS0FBQSxLQUNBLEVBQUEsa0JBQ0EsRUFBQSxjQUNBLE1BQ0EsS0FBQSxLQUNBLEVBQUEsY0FDQSxFQUFBLFVBQ0EsTUFDQSxLQUFBLFFBQ0EsRUFBQSxlQUNBLEVBQUEsV0FDQSxNQUNBLEtBQUEsUUFDQSxFQUFBLGFBQ0EsRUFBQSxVQUtBLEdBQUEsR0FBQSxFQUFBLFNBQUEsU0FDQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUEsVUFDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLGFBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxDQUNBLEdBQUEsS0FBQSxNQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsR0FBQSxFQUVBLElBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxRQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxZQUNBLEdBQUEsUUFBQSxFQUFBLEVBRUEsSUFBQSxHQUFBLEVBQUEsVUFDQSxHQUFBLFFBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLFlBQ0EsR0FBQSxRQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxDQUdBLElBQUEsSUFBQSxLQUFBLFNBQUEsRUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLElBQUEsS0FBQSxTQUFBLEVBQ0EsR0FBQSxJQUFBLENBSUEsSUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsQ0FHQSxJQUNBLE1BQUEsRUFDQSxJQUFBLEVBQUEsS0FDQSxZQUFBLEVBQUEsS0FDQSxZQUFBLEVBQUEsWUFDQSxVQUFBLEVBQUEsVUFDQSxpQkFBQSxFQUNBLFNBQUEsRUFDQSxVQUFBLEVBQUEsY0FDQSxPQUFBLEVBQUEsT0FDQSxTQUFBLEVBQUEsU0FDQSxJQUFBLE9BQUEsRUFDQSxJQUFBLE9BQUEsRUFDQSxTQUFBLE9BQUEsRUFHQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBTUEsUUFBQSxHQUFBLEdBRUEsR0FBQSxHQUFBLEdBQUEsRUFDQSxLQUNBLEVBQUEsaUZBRUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLEdBQUEsTUFBQSxLQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQVFBLFFBQUEsS0FDQSxHQUNBLEdBQUEsRUFEQSxFQUFBLEdBQUEsTUFHQSxJQUNBLEdBQUEsUUFDQSxFQUFBLFFBQ0EsSUFBQSxHQUFBLDZKQUtBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLENBRUEsRUFBQSxRQUFBLEVBQUEsVUFBQSxNQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsbUJBQUEsU0FDQSxRQUFBLE9BRUEsTUFBQSxPQUNBLElBQUEsWUFHQSxFQUFBLEVBQUEsRUFBQSxFQU9BLEtBTkEsRUFBQSxLQUFBLE1BQ0EsSUFBQSxFQUNBLElBQUEsSUFFQSxFQUFBLE1BQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLEVBQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxDQUVBLEdBQUEsTUFBQSxNQUNBLE1BQUEsRUFDQSxJQUFBLEtBS0EsR0FBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEdBU0EsUUFBQSxLQUVBLEdBQUEsTUFDQSxFQUFBLG1GQUVBLEdBQUEsUUFBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFFQSxJQUNBLFFBQUEsRUFDQSxHQUFBLEVBR0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxLQUFBLE1BQUEsT0FBQSxLQVFBLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUVBLEVBQUEsRUFBQSxlQUNBLE9BQ0EsS0FBQSxLQUFBLEtBQUEsRUFBQSxJQUFBLEdBQUEsTUFDQSxPQUVBLEVBQUEsU0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLENBQ0EsR0FBQSxLQUNBLEtBQUEsSUFRQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsU0FBQSxFQUFBLElBQUEsUUFDQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLEtBQ0EsRUFBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsSUFDQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxLQW1CQSxRQUFBLEtBaUVBLFFBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsU0FBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsUUFDQSxNQUFBLFNBQUEsRUFBQSxJQUNBLEtBQUEsVUFBQSxFQUFBLEtBQ0EsRUFBQSxTQUFBLGdCQUVBLElBQUEsUUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxHQUNBLE1BQUEsR0FBQSxRQUFBLEtBQ0EsRUFBQSxNQUFBLEdBQUEsRUFBQSxJQUVBLFFBQUEsR0FBQSxTQUFBLEtBQ0EsRUFBQSxRQUFBLEdBQUEsRUFBQSxFQUdBLElBQUEsR0FBQSxLQUFBLFNBQUEsRUFDQSxFQUFBLEtBQUEsVUFBQSxDQUVBLEdBQUEsSUFDQSxFQUFBLEdBR0EsRUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEdBR0EsRUFBQSxFQUFBLEtBQUEsSUFBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLEtBQUEsSUFBQSxHQUFBLElBR0EsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEtBQ0EsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLElBR0EsRUFBQSxLQUNBLElBQUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxPQUVBLEVBQUEsS0FDQSxJQUFBLEVBQUEsT0FFQSxFQUFBLEtBQ0EsS0FBQSxFQUFBLE1BRUEsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxLQUNBLEtBQUEsRUFBQSxXQUlBLElBQUEsVUFBQSxFQUNBLEVBQUEsWUFBQSxnQkFDQSxJQUFBLE9BQUEsRUFFQSxNQURBLEdBQUEsWUFBQSxhQUNBLEVBU0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsTUFBQSxJQUFBLFFBQ0EsR0FBQSxTQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsR0FRQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEdBQUEsU0FBQSxFQUFBLE1BQUEsS0FBQSxNQUNBLEdBQUEsRUFBQSxHQVNBLFFBQUEsR0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLGlCQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxpQkFFQSxFQUFBLEVBQUEsS0FBQSxLQUFBLEtBQUEsUUFDQSxFQUFBLEVBQUEsS0FBQSxLQUNBLEdBQUEsRUFBQSxFQUVBLElBQUEsR0FBQSxTQUFBLEVBQUEsSUFBQSxTQUFBLEdBQUEsRUFBQSxPQUNBLEdBQUEsU0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBMEJBLFFBQUEsR0FBQSxHQWtDQSxRQUFBLEtBQ0EsSUFBQSxTQUFBLEVBQUEsSUFBQSxXQUNBLEVBQUEsT0FBQSxTQUNBLE9BQUEsR0FDQSxJQUFBLFNBbkNBLElBRUEsRUFBQSxNQUNBLElBQUEscUJBQ0EsTUFDQSxPQUFBLEdBRUEsU0FBQSxPQUNBLE9BQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxFQUNBLEtBQUEsY0FDQSxLQUFBLEdBQ0EsRUFDQSxLQUFBLFNBQUEsY0FDQSxPQUFBLE1BQ0Esc0JBQUEsRUFDQSxlQUFBLEVBQ0Esb0JBQUEsSUFFQSxFQUFBLFNBQ0EsTUFBQSxHQUNBLElBQUEsUUFBQSxXQUNBLEVBQUEsS0FBQSxXQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxpQkFDQSxVQW9CQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGVBQUEsS0FBQSxTQUFBLE1BQUEsS0FBQSxFQUVBLEdBQUEsU0FBQSxJQUNBLEVBQUEsWUFBQSxHQUNBLEVBQUEsTUFBQSxZQUFBLFlBRUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLFNBQUEsV0FPQSxRQUFBLEtBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEtBQUEsZ0JBQUEsRUFBQSxLQUFBLFFBQUEsV0FVQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxDQUNBLEdBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLEtBQ0EsRUFBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsSUFDQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxLQVFBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsZUFBQSxLQUFBLFNBQUEsTUFBQSxLQUFBLEdBQ0EsRUFBQSxFQUFBLElBQUEsT0FBQSxNQUFBLE1BQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSxPQUFBLE1BQUEsTUFBQSxHQUNBLEVBQUEsRUFBQSxNQUNBLFFBQUEsR0FDQSxJQUFBLFlBRUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsS0FFQSxFQUFBLElBQUEsTUFBQSxFQUFBLE1BQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxNQUVBLE1BQ0EsS0FBQSxXQUVBLEdBQUEsR0FBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxLQUVBLEVBQUEsSUFBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLElBQUEsTUFBQSxFQUFBLFFBV0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxlQUFBLEtBQUEsU0FBQSxNQUFBLEtBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxJQUFBLFFBSUEsUUFIQSxFQUFBLGtCQUNBLFFBQUEsSUFBQSxHQUVBLEdBQ0EsSUFBQSxVQUNBLEVBQUEsS0FBQSxNQUFBLFNBQUEsRUFBQSxJQUNBLE1BQ0EsS0FBQSxXQUNBLEVBQUEsS0FBQSxNQUFBLFNBQUEsRUFBQSxNQTlVQSxHQUFBLEdBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxTQUVBLEdBREEsRUFBQSxZQUNBLEVBQUEsU0FLQSxFQUFBLEVBQUEsMENBQ0EsSUFDQSxHQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxLQUFBLGFBRUEsSUFBQSxHQUFBLEVBQUEsTUFFQSxFQUFBLEVBQUEseUNBQ0EsSUFDQSxHQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxLQUFBLFdBQUEsRUFBQSxNQUFBLFVBRUEsSUFBQSxHQUFBLEVBQUEsS0FHQSxHQUFBLEtBQUEsb0JBQUEsU0FJQSxFQUFBLE9BQ0EsSUFBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLEVBQUEsSUFFQSxtQkFBQSxFQUNBLFlBQUEsRUFDQSxVQUFBLEdBQ0EsaUJBQUEsRUFDQSxpQkFBQSxFQUFBLEdBQUEsTUFBQSxTQUFBLGlCQUFBLGdCQUNBLFFBQUEsUUFJQSxFQUFBLEdBQUEsUUFBQSxhQUFBLEdBR0EsRUFBQSxHQUFBLFFBQUEsS0FBQSxHQUNBLElBR0EsRUFBQSxHQUFBLFFBQUEsS0FBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLE9BQUEsR0FFQSxFQUFBLEdBQUEsUUFBQSxPQUFBLEdBa1NBLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSxzQ0FDQSxFQUFBLDRCQUVBLEtBQ0EsRUFBQSwwRUFFQSxHQUFBLFVBR0EsRUFBQSxJQUFBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxDQUVBLElBQUEsTUFDQSxFQUFBLHVLQU1BLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEtBQUEsUUFBQSxhQUFBLEVBQ0EsR0FDQSxNQUFBLEVBQ0EsUUFBQSxHQUdBLEVBQUEsT0FBQSxLQUFBLEVBRUEsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLElBSUEsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxLQUFBLGdCQUFBLE9BQUEsR0FFQSxFQUFBLEtBQUEsaUJBQUEsS0FBQSxHQUdBLEVBQUEsS0FBQSxFQUFBLEtBQUEsY0FBQSxXQUVBLElBQUEsRUFBQSxRQUFBLEVBQUEsTUFBQSxLQUFBLGFBQ0EsRUFBQSxNQUFBLEtBQUEsVUFBQSxTQUFBLFNBSUEsRUFDQSxLQUFBLFNBQUEsY0FDQSxPQUFBLE1BQ0Esc0JBQUEsRUFDQSxlQUFBLEVBQ0Esb0JBQUEsTUFXQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsK0JBRUEsS0FDQSxFQUFBLGlIQUtBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQUdBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLEdBQ0EsRUFDQSxLQUFBLFNBQ0EsY0FDQSxPQUFBLE1BQ0Esc0JBQUEsRUFDQSxlQUFBLEVBQ0Esb0JBQUEsSUFRQSxRQUFBLEtBbUVBLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsVUFDQSxFQUFBLEVBQUEsU0FBQSxPQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsV0FDQSxFQUFBLEVBQUEsS0FBQSxjQUFBLE9BQUEsV0FDQSxNQUFBLEdBQUEsTUFBQSxLQUFBLGFBQUEsR0FHQSxJQVVBLEVBQUEsWUFBQSxPQUNBLEVBQUEsS0FBQSxVQUFBLFlBQUEsU0FUQSxFQUFBLFlBQUEsT0FDQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLFVBQUEsWUFBQSxPQUVBLEVBQUEsTUFBQSxRQUFBLFNBQUEsRUFBQSxLQUFBLFFBUUEsRUFDQSxLQUFBLFNBQ0EsZUFDQSxjQUNBLE9BQUEsU0FDQSxlQUFBLElBa0JBLFFBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQ0EsSUFBQSxHQUFBLEVBQUEsTUFBQSxPQUFBLGNBQUEsS0FBQSxXQUNBLEVBQUEsRUFBQSxLQUFBLGNBQUEsT0FBQSxXQUNBLE1BQUEsR0FBQSxNQUFBLEtBQUEsYUFBQSxHQUdBLEdBQUEsTUFBQSxZQUFBLE9BQ0EsRUFBQSxLQUFBLFVBQUEsWUFBQSxPQVFBLFFBQUEsS0FDQSxFQUFBLE1BQUEsWUFBQSxVQUNBLEVBQUEsT0FBQSxRQUNBLEVBQ0EsS0FBQSxTQUNBLGVBQ0EsY0FDQSxPQUFBLE1BQ0EsZUFBQSxJQUVBLEVBQ0EsS0FBQSxTQUNBLGVBQ0EsY0FDQSxPQUFBLE1BQ0EsZUFBQSxJQVNBLFFBQUEsS0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsU0FDQSxFQUFBLEVBQUEsS0FBQSxjQUNBLEVBQUEsRUFBQSxNQUFBLFNBQUEsU0FFQSxJQUFBLEVBQ0EsRUFBQSxPQUNBLEVBQUEsTUFBQSxZQUFBLGNBQ0EsQ0FDQSxHQUFBLEdBQUEsRUFBQSxPQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxVQUFBLEdBRUEsR0FBQSxPQUNBLEVBQUEsSUFBQSxHQUFBLE9BQ0EsRUFBQSxNQUFBLFNBQUEsVUFHQSxFQUNBLEtBQUEsU0FDQSxlQUNBLGNBQ0EsT0FBQSxNQUNBLGVBQUEsSUFRQSxRQUFBLEtBRUEsR0FFQSxHQUZBLEVBQUEsRUFBQSxjQUNBLEVBQUEsRUFBQSxNQUVBLEVBQUEsRUFBQSxLQUFBLGFBQ0EsR0FBQSxRQUFBLEdBQUEsS0FBQSxHQUFBLElBQUEsR0FBQSxRQUFBLElBQ0EsRUFBQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxPQUNBLE9BQUEsR0FBQSxRQUFBLEdBQUEsTUFHQSxFQUFBLE9BQ0EsRUFBQSxJQUFBLEdBQUEsT0FqTUEsRUFBQSxHQUFBLFFBQUEsYUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLFNBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLGFBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxhQUFBLEdBQ0EsRUFBQSxjQUFBLEdBQUEsUUFBQSxFQUdBLElBQUEsR0FDQSxFQUFBLEVBQUEsMEJBQUEsVUFDQSxNQUFBLFFBQ0EsaUJBQUEsRUFFQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsU0FBQSxhQUFBLE1BR0EsR0FGQSxLQUFBLFVBQUEsRUFBQSxLQUFBLEtBRUEsRUFBQSxTQUFBLEtBQ0EsT0FBQSxJQUVBLEdBQUEsT0FBQSxHQUNBLEVBQUEsU0FFQSxFQUFBLEVBQUEsSUFJQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsVUFBQSxRQUdBLEVBQUEsRUFBQSxxQ0FBQSxJQUFBLEdBQUEsU0FDQSxHQUFBLEtBQUEsTUFBQSxHQUVBLEdBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxHQUdBLEVBQUEsRUFBQSxJQUVBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FDQSxJQUFBLEVBQUEsSUFBQSxFQUFBLFNBMTJCQSxHQUFBLElBQUEsTUFBQSxNQUFBLFVBQUEsU0FBQSxZQUFBLFdBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxFQUFBLEdBRUEsRUFBQSxHQUNBLEVBQUEsSUFFQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEdBQUEsTUFDQSxHQUNBLEVBQUEsUUFBQSxFQUFBLFdBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxhQUFBLEdBR0EsR0FBQSxRQUFBLEtBQUEsTUFBQSxvQkFFQSxJQUFBLEdBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSx1QkFDQSxFQUFBLEVBQUEsaUJBQ0EsRUFBQSxFQUFBLGtCQUVBLEVBQUEsRUFBQSxnQkFDQSxFQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLGVBQ0EsRUFBQSxFQUFBLGtCQUVBLEVBQUEsRUFBQSxvQkFDQSxFQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLGlCQUNBLEVBQUEsRUFBQSxtQkFDQSxFQUFBLEVBQUEsb0JBMi9CQSxPQW5DQSxZQUVBLEVBQUEsTUFFQSxFQUFBLEdBQUEsR0FBQSxHQUNBLEdBQUEsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEVBQ0EsRUFBQSxLQUVBLEtBQUEsV0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsSUFDQSxJQUVBLElBQ0EsSUFDQSxJQUVBLElBQ0EsSUFFQSxVQVNBLEVBQUEsR0FBQSxPQUFBLFdBQ0EsTUFBQSxNQUFBLE9BQUEsR0FHQSxNQUVBLE1BK0RBLE9BQUEsVUFBQSxJQUFBLFdBR0EsSUFBQSxHQUZBLEdBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsSUFBQSxFQUFBLEtBQUEsR0FDQSxPQUFBLElBRUEsTUFBQSxVQUFBLElBQUEsV0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxHQUNBLE9BQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAganF1ZXJ5LXNvcnRhYmxlLmpzIHYwLjkuMTJcclxuICogIGh0dHA6Ly9qb2hubnkuZ2l0aHViLmNvbS9qcXVlcnktc29ydGFibGUvXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgQ29weXJpZ2h0IChjKSAyMDEyIEpvbmFzIHZvbiBBbmRyaWFuXHJcbiAqICBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKiAgUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XHJcbiAqICBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcclxuICogICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcclxuICogICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxyXG4gKiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxyXG4gKiAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXHJcbiAqICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXHJcbiAqICAqIFRoZSBuYW1lIG9mIHRoZSBhdXRob3IgbWF5IG5vdCBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0c1xyXG4gKiAgICBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cclxuICpcclxuICogIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxyXG4gKiAgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcclxuICogIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcclxuICogIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIDxDT1BZUklHSFQgSE9MREVSPiBCRSBMSUFCTEUgRk9SIEFOWVxyXG4gKiAgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcclxuICogIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcclxuICogIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORFxyXG4gKiAgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcclxuICogIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXHJcbiAqICBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cclxuKGZ1bmN0aW9uKCQsIHdpbmRvdywgcGx1Z2luTmFtZSwgdW5kZWZpbmVkKSB7XHJcbiAgICB2YXIgZXZlbnROYW1lcyxcclxuICAgICAgICBjb250YWluZXJEZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgaXRlbXMgY2FuIGJlIGRyYWdnZWQgZnJvbSB0aGlzIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBkcmFnOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCBpdGVtcyBjYW4gYmUgZHJvcGVkIG9udG8gdGhpcyBjb250YWluZXJcclxuICAgICAgICAgICAgZHJvcDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gRXhjbHVkZSBpdGVtcyBmcm9tIGJlaW5nIGRyYWdnYWJsZSwgaWYgdGhlXHJcbiAgICAgICAgICAgIC8vIHNlbGVjdG9yIG1hdGNoZXMgdGhlIGl0ZW1cclxuICAgICAgICAgICAgZXhjbHVkZTogXCJcIixcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgc2VhcmNoIGZvciBuZXN0ZWQgY29udGFpbmVycyB3aXRoaW4gYW4gaXRlbVxyXG4gICAgICAgICAgICBuZXN0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIHRoZSBpdGVtcyBhcmUgYXNzdW1lZCB0byBiZSBhcnJhbmdlZCB2ZXJ0aWNhbGx5XHJcbiAgICAgICAgICAgIHZlcnRpY2FsOiB0cnVlXHJcbiAgICAgICAgfSwgLy8gZW5kIGNvbnRhaW5lciBkZWZhdWx0c1xyXG4gICAgICAgIGdyb3VwRGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgZXhlY3V0ZWQgYWZ0ZXIgdGhlIHBsYWNlaG9sZGVyIGhhcyBiZWVuIG1vdmVkLlxyXG4gICAgICAgICAgICAvLyAkY2xvc2VzdEl0ZW1PckNvbnRhaW5lciBjb250YWlucyB0aGUgY2xvc2VzdCBpdGVtLCB0aGUgcGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgLy8gaGFzIGJlZW4gcHV0IGF0IG9yIHRoZSBjbG9zZXN0IGVtcHR5IENvbnRhaW5lciwgdGhlIHBsYWNlaG9sZGVyIGhhc1xyXG4gICAgICAgICAgICAvLyBiZWVuIGFwcGVuZGVkIHRvLlxyXG4gICAgICAgICAgICBhZnRlck1vdmU6IGZ1bmN0aW9uKCRwbGFjZWhvbGRlciwgY29udGFpbmVyLCAkY2xvc2VzdEl0ZW1PckNvbnRhaW5lcikge30sXHJcbiAgICAgICAgICAgIC8vIFRoZSBleGFjdCBjc3MgcGF0aCBiZXR3ZWVuIHRoZSBjb250YWluZXIgYW5kIGl0cyBpdGVtcywgZS5nLiBcIj4gdGJvZHlcIlxyXG4gICAgICAgICAgICBjb250YWluZXJQYXRoOiBcIlwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY3NzIHNlbGVjdG9yIG9mIHRoZSBjb250YWluZXJzXHJcbiAgICAgICAgICAgIGNvbnRhaW5lclNlbGVjdG9yOiBcIm9sLCB1bFwiLFxyXG4gICAgICAgICAgICAvLyBEaXN0YW5jZSB0aGUgbW91c2UgaGFzIHRvIHRyYXZlbCB0byBzdGFydCBkcmFnZ2luZ1xyXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgLy8gVGltZSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgbW91c2Vkb3duIHVudGlsIGRyYWdnaW5nIHNob3VsZCBzdGFydC5cclxuICAgICAgICAgICAgLy8gVGhpcyBvcHRpb24gY2FuIGJlIHVzZWQgdG8gcHJldmVudCB1bndhbnRlZCBkcmFncyB3aGVuIGNsaWNraW5nIG9uIGFuIGVsZW1lbnQuXHJcbiAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICAvLyBUaGUgY3NzIHNlbGVjdG9yIG9mIHRoZSBkcmFnIGhhbmRsZVxyXG4gICAgICAgICAgICBoYW5kbGU6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBleGFjdCBjc3MgcGF0aCBiZXR3ZWVuIHRoZSBpdGVtIGFuZCBpdHMgc3ViY29udGFpbmVyc1xyXG4gICAgICAgICAgICBpdGVtUGF0aDogXCJcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNzcyBzZWxlY3RvciBvZiB0aGUgaXRlbXNcclxuICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiBcImxpXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjbGFzcyBnaXZlbiB0byBcImJvZHlcIiB3aGlsZSBhbiBpdGVtIGlzIGJlaW5nIGRyYWdnZWRcclxuICAgICAgICAgICAgYm9keUNsYXNzOiBcImRyYWdnaW5nXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjbGFzcyBnaXZpbmcgdG8gYW4gaXRlbSB3aGlsZSBiZWluZyBkcmFnZ2VkXHJcbiAgICAgICAgICAgIGRyYWdnZWRDbGFzczogXCJkcmFnZ2VkXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjbGFzcyBvZiB0aGUgcGxhY2Vob2xkZXIgKG11c3QgbWF0Y2ggcGxhY2Vob2xkZXIgb3B0aW9uIG1hcmt1cClcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXJDbGFzczogXCJwbGFjZWhvbGRlclwiLFxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZHJhZ2dlZCBpdGVtIG1heSBiZSBpbnNpZGUgdGhlIGNvbnRhaW5lci5cclxuICAgICAgICAgICAgLy8gVXNlIHdpdGggY2FyZSwgc2luY2UgdGhlIHNlYXJjaCBmb3IgYSB2YWxpZCBjb250YWluZXIgZW50YWlscyBhIGRlcHRoIGZpcnN0IHNlYXJjaFxyXG4gICAgICAgICAgICAvLyBhbmQgbWF5IGJlIHF1aXRlIGV4cGVuc2l2ZS5cclxuICAgICAgICAgICAgaXNWYWxpZFRhcmdldDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gRXhlY3V0ZWQgYmVmb3JlIG9uRHJvcCBpZiBwbGFjZWhvbGRlciBpcyBkZXRhY2hlZC5cclxuICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGlmIHB1bGxQbGFjZWhvbGRlciBpcyBzZXQgdG8gZmFsc2UgYW5kIHRoZSBkcm9wIG9jY3VycyBvdXRzaWRlIGEgY29udGFpbmVyLlxyXG4gICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyLCBldmVudCkge30sXHJcbiAgICAgICAgICAgIC8vIEV4ZWN1dGVkIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBtb3VzZSBtb3ZlIGV2ZW50LlxyXG4gICAgICAgICAgICAvLyBUaGUgUGxhY2Vob2xkZXIgaGFzIG5vdCBiZWVuIG1vdmVkIHlldC5cclxuICAgICAgICAgICAgb25EcmFnOiBmdW5jdGlvbigkaXRlbSwgcG9zaXRpb24sIF9zdXBlciwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRpdGVtLmNzcyhwb3NpdGlvbilcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gQ2FsbGVkIGFmdGVyIHRoZSBkcmFnIGhhcyBiZWVuIHN0YXJ0ZWQsXHJcbiAgICAgICAgICAgIC8vIHRoYXQgaXMgdGhlIG1vdXNlIGJ1dHRvbiBpcyBiZWVpbmcgaGVsZCBkb3duIGFuZFxyXG4gICAgICAgICAgICAvLyB0aGUgbW91c2UgaXMgbW92aW5nLlxyXG4gICAgICAgICAgICAvLyBUaGUgY29udGFpbmVyIGlzIHRoZSBjbG9zZXN0IGluaXRpYWxpemVkIGNvbnRhaW5lci5cclxuICAgICAgICAgICAgLy8gVGhlcmVmb3JlIGl0IG1pZ2h0IG5vdCBiZSB0aGUgY29udGFpbmVyLCB0aGF0IGFjdHVhbGx5IGNvbnRhaW5zIHRoZSBpdGVtLlxyXG4gICAgICAgICAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0uY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICRpdGVtLmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAkaXRlbS53aWR0aCgpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgJGl0ZW0uYWRkQ2xhc3MoY29udGFpbmVyLmdyb3VwLm9wdGlvbnMuZHJhZ2dlZENsYXNzKVxyXG4gICAgICAgICAgICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoY29udGFpbmVyLmdyb3VwLm9wdGlvbnMuYm9keUNsYXNzKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBDYWxsZWQgd2hlbiB0aGUgbW91c2UgYnV0dG9uIGlzIGJlZWluZyByZWxlYXNlZFxyXG4gICAgICAgICAgICBvbkRyb3A6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlciwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRpdGVtLnJlbW92ZUNsYXNzKGNvbnRhaW5lci5ncm91cC5vcHRpb25zLmRyYWdnZWRDbGFzcykucmVtb3ZlQXR0cihcInN0eWxlXCIpXHJcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhjb250YWluZXIuZ3JvdXAub3B0aW9ucy5ib2R5Q2xhc3MpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENhbGxlZCBvbiBtb3VzZWRvd24uIElmIGZhbHN5IHZhbHVlIGlzIHJldHVybmVkLCB0aGUgZHJhZ2dpbmcgd2lsbCBub3Qgc3RhcnQuXHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBpZiBlbGVtZW50IGNsaWNrZWQgaXMgaW5wdXQsIHNlbGVjdCBvciB0ZXh0YXJlYVxyXG4gICAgICAgICAgICBvbk1vdXNlZG93bjogZnVuY3Rpb24oJGl0ZW0sIF9zdXBlciwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQudGFyZ2V0Lm5vZGVOYW1lLm1hdGNoKC9eKGlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2kpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIFRlbXBsYXRlIGZvciB0aGUgcGxhY2Vob2xkZXIuIENhbiBiZSBhbnkgdmFsaWQgalF1ZXJ5IGlucHV0XHJcbiAgICAgICAgICAgIC8vIGUuZy4gYSBzdHJpbmcsIGEgRE9NIGVsZW1lbnQuXHJcbiAgICAgICAgICAgIC8vIFRoZSBwbGFjZWhvbGRlciBtdXN0IGhhdmUgdGhlIGNsYXNzIFwicGxhY2Vob2xkZXJcIlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJzxsaSBjbGFzcz1cInBsYWNlaG9sZGVyXCIvPicsXHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIHRoZSBwb3NpdGlvbiBvZiB0aGUgcGxhY2Vob2xkZXIgaXMgY2FsY3VsYXRlZCBvbiBldmVyeSBtb3VzZW1vdmUuXHJcbiAgICAgICAgICAgIC8vIElmIGZhbHNlLCBpdCBpcyBvbmx5IGNhbGN1bGF0ZWQgd2hlbiB0aGUgbW91c2UgaXMgYWJvdmUgYSBjb250YWluZXIuXHJcbiAgICAgICAgICAgIHB1bGxQbGFjZWhvbGRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gU3BlY2lmaWVzIHNlcmlhbGl6YXRpb24gb2YgdGhlIGNvbnRhaW5lciBncm91cC5cclxuICAgICAgICAgICAgLy8gVGhlIHBhaXIgJHBhcmVudC8kY2hpbGRyZW4gaXMgZWl0aGVyIGNvbnRhaW5lci9pdGVtcyBvciBpdGVtL3N1YmNvbnRhaW5lcnMuXHJcbiAgICAgICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oJHBhcmVudCwgJGNoaWxkcmVuLCBwYXJlbnRJc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICQuZXh0ZW5kKHt9LCAkcGFyZW50LmRhdGEoKSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50SXNDb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFskY2hpbGRyZW5dXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgkY2hpbGRyZW5bMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuY2hpbGRyZW4gPSAkY2hpbGRyZW5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0LnN1YkNvbnRhaW5lcnNcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuc29ydGFibGVcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIFNldCB0b2xlcmFuY2Ugd2hpbGUgZHJhZ2dpbmcuIFBvc2l0aXZlIHZhbHVlcyBkZWNyZWFzZSBzZW5zaXRpdml0eSxcclxuICAgICAgICAgICAgLy8gbmVnYXRpdmUgdmFsdWVzIGluY3JlYXNlIGl0LlxyXG4gICAgICAgICAgICB0b2xlcmFuY2U6IDBcclxuICAgICAgICB9LCAvLyBlbmQgZ3JvdXAgZGVmYXVsdHNcclxuICAgICAgICBjb250YWluZXJHcm91cHMgPSB7fSxcclxuICAgICAgICBncm91cENvdW50ZXIgPSAwLFxyXG4gICAgICAgIGVtcHR5Qm94ID0ge1xyXG4gICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgIGJvdHRvbTogMCxcclxuICAgICAgICAgICAgcmlnaHQ6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGV2ZW50TmFtZXMgPSB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiBcInRvdWNoc3RhcnQuc29ydGFibGUgbW91c2Vkb3duLnNvcnRhYmxlXCIsXHJcbiAgICAgICAgICAgIGRyb3A6IFwidG91Y2hlbmQuc29ydGFibGUgdG91Y2hjYW5jZWwuc29ydGFibGUgbW91c2V1cC5zb3J0YWJsZVwiLFxyXG4gICAgICAgICAgICBkcmFnOiBcInRvdWNobW92ZS5zb3J0YWJsZSBtb3VzZW1vdmUuc29ydGFibGVcIixcclxuICAgICAgICAgICAgc2Nyb2xsOiBcInNjcm9sbC5zb3J0YWJsZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWJDb250YWluZXJLZXkgPSBcInN1YkNvbnRhaW5lcnNcIlxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBhIGlzIEFycmF5IFtsZWZ0LCByaWdodCwgdG9wLCBib3R0b21dXHJcbiAgICAgKiBiIGlzIGFycmF5IFtsZWZ0LCB0b3BdXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGQoYSwgYikge1xyXG4gICAgICAgIHZhciB4ID0gTWF0aC5tYXgoMCwgYVswXSAtIGJbMF0sIGJbMF0gLSBhWzFdKSxcclxuICAgICAgICAgICAgeSA9IE1hdGgubWF4KDAsIGFbMl0gLSBiWzFdLCBiWzFdIC0gYVszXSlcclxuICAgICAgICByZXR1cm4geCArIHk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0RGltZW5zaW9ucyhhcnJheSwgZGltZW5zaW9ucywgdG9sZXJhbmNlLCB1c2VPZmZzZXQpIHtcclxuICAgICAgICB2YXIgaSA9IGFycmF5Lmxlbmd0aCxcclxuICAgICAgICAgICAgb2Zmc2V0TWV0aG9kID0gdXNlT2Zmc2V0ID8gXCJvZmZzZXRcIiA6IFwicG9zaXRpb25cIlxyXG4gICAgICAgIHRvbGVyYW5jZSA9IHRvbGVyYW5jZSB8fCAwXHJcblxyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgdmFyIGVsID0gYXJyYXlbaV0uZWwgPyBhcnJheVtpXS5lbCA6ICQoYXJyYXlbaV0pLFxyXG4gICAgICAgICAgICAgICAgLy8gdXNlIGZpdHRpbmcgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICBwb3MgPSBlbFtvZmZzZXRNZXRob2RdKClcclxuICAgICAgICAgICAgcG9zLmxlZnQgKz0gcGFyc2VJbnQoZWwuY3NzKCdtYXJnaW4tbGVmdCcpLCAxMClcclxuICAgICAgICAgICAgcG9zLnRvcCArPSBwYXJzZUludChlbC5jc3MoJ21hcmdpbi10b3AnKSwgMTApXHJcbiAgICAgICAgICAgIGRpbWVuc2lvbnNbaV0gPSBbXHJcbiAgICAgICAgICAgICAgICBwb3MubGVmdCAtIHRvbGVyYW5jZSxcclxuICAgICAgICAgICAgICAgIHBvcy5sZWZ0ICsgZWwub3V0ZXJXaWR0aCgpICsgdG9sZXJhbmNlLFxyXG4gICAgICAgICAgICAgICAgcG9zLnRvcCAtIHRvbGVyYW5jZSxcclxuICAgICAgICAgICAgICAgIHBvcy50b3AgKyBlbC5vdXRlckhlaWdodCgpICsgdG9sZXJhbmNlXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UmVsYXRpdmVQb3NpdGlvbihwb2ludGVyLCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IGVsZW1lbnQub2Zmc2V0KClcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0OiBwb2ludGVyLmxlZnQgLSBvZmZzZXQubGVmdCxcclxuICAgICAgICAgICAgdG9wOiBwb2ludGVyLnRvcCAtIG9mZnNldC50b3BcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc29ydEJ5RGlzdGFuY2VEZXNjKGRpbWVuc2lvbnMsIHBvaW50ZXIsIGxhc3RQb2ludGVyKSB7XHJcbiAgICAgICAgcG9pbnRlciA9IFtwb2ludGVyLmxlZnQsIHBvaW50ZXIudG9wXVxyXG4gICAgICAgIGxhc3RQb2ludGVyID0gbGFzdFBvaW50ZXIgJiYgW2xhc3RQb2ludGVyLmxlZnQsIGxhc3RQb2ludGVyLnRvcF1cclxuXHJcbiAgICAgICAgdmFyIGRpbSxcclxuICAgICAgICAgICAgaSA9IGRpbWVuc2lvbnMubGVuZ3RoLFxyXG4gICAgICAgICAgICBkaXN0YW5jZXMgPSBbXVxyXG5cclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgIGRpbSA9IGRpbWVuc2lvbnNbaV1cclxuICAgICAgICAgICAgZGlzdGFuY2VzW2ldID0gW2ksIGQoZGltLCBwb2ludGVyKSwgbGFzdFBvaW50ZXIgJiYgZChkaW0sIGxhc3RQb2ludGVyKV1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzdGFuY2VzID0gZGlzdGFuY2VzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gYlsxXSAtIGFbMV0gfHwgYlsyXSAtIGFbMl0gfHwgYlswXSAtIGFbMF1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvLyBsYXN0IGVudHJ5IGlzIHRoZSBjbG9zZXN0XHJcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlc1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRhaW5lckdyb3VwKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZ3JvdXBEZWZhdWx0cywgb3B0aW9ucylcclxuICAgICAgICB0aGlzLmNvbnRhaW5lcnMgPSBbXVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yb290R3JvdXApIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxQcm94eSA9ICQucHJveHkodGhpcy5zY3JvbGwsIHRoaXMpXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ1Byb3h5ID0gJC5wcm94eSh0aGlzLmRyYWcsIHRoaXMpXHJcbiAgICAgICAgICAgIHRoaXMuZHJvcFByb3h5ID0gJC5wcm94eSh0aGlzLmRyb3AsIHRoaXMpXHJcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSAkKHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcilcclxuXHJcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5pc1ZhbGlkVGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmlzVmFsaWRUYXJnZXQgPSB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQ29udGFpbmVyR3JvdXAuZ2V0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIGlmICghY29udGFpbmVyR3JvdXBzW29wdGlvbnMuZ3JvdXBdKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmdyb3VwID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmdyb3VwID0gZ3JvdXBDb3VudGVyKytcclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJHcm91cHNbb3B0aW9ucy5ncm91cF0gPSBuZXcgQ29udGFpbmVyR3JvdXAob3B0aW9ucylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXJHcm91cHNbb3B0aW9ucy5ncm91cF1cclxuICAgIH1cclxuXHJcbiAgICBDb250YWluZXJHcm91cC5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgZHJhZ0luaXQ6IGZ1bmN0aW9uKGUsIGl0ZW1Db250YWluZXIpIHtcclxuICAgICAgICAgICAgdGhpcy4kZG9jdW1lbnQgPSAkKGl0ZW1Db250YWluZXIuZWxbMF0ub3duZXJEb2N1bWVudClcclxuXHJcbiAgICAgICAgICAgIC8vIGdldCBpdGVtIHRvIGRyYWdcclxuICAgICAgICAgICAgdGhpcy5pdGVtID0gJChlLnRhcmdldCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMuaXRlbVNlbGVjdG9yKVxyXG4gICAgICAgICAgICB0aGlzLml0ZW1Db250YWluZXIgPSBpdGVtQ29udGFpbmVyXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pdGVtLmlzKHRoaXMub3B0aW9ucy5leGNsdWRlKSB8fFxyXG4gICAgICAgICAgICAgICAgIXRoaXMub3B0aW9ucy5vbk1vdXNlZG93bih0aGlzLml0ZW0sIGdyb3VwRGVmYXVsdHMub25Nb3VzZWRvd24sIGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRQb2ludGVyKGUpXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTGlzdGVuZXJzKCdvbicpXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldHVwRGVsYXlUaW1lcigpXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0luaXREb25lID0gdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJhZzogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5kaXN0YW5jZU1ldChlKSB8fCAhdGhpcy5kZWxheU1ldClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25EcmFnU3RhcnQodGhpcy5pdGVtLCB0aGlzLml0ZW1Db250YWluZXIsIGdyb3VwRGVmYXVsdHMub25EcmFnU3RhcnQsIGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW0uYmVmb3JlKHRoaXMucGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFBvaW50ZXIoZSlcclxuICAgICAgICAgICAgLy8gcGxhY2UgaXRlbSB1bmRlciB0aGUgY3Vyc29yXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRyYWcodGhpcy5pdGVtLFxyXG4gICAgICAgICAgICAgICAgZ2V0UmVsYXRpdmVQb3NpdGlvbih0aGlzLnBvaW50ZXIsIHRoaXMuaXRlbS5vZmZzZXRQYXJlbnQoKSksXHJcbiAgICAgICAgICAgICAgICBncm91cERlZmF1bHRzLm9uRHJhZyxcclxuICAgICAgICAgICAgICAgIGUpXHJcblxyXG4gICAgICAgICAgICB2YXIgeCA9IGUucGFnZVggfHwgZS5vcmlnaW5hbEV2ZW50LnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgeSA9IGUucGFnZVkgfHwgZS5vcmlnaW5hbEV2ZW50LnBhZ2VZLFxyXG4gICAgICAgICAgICAgICAgYm94ID0gdGhpcy5zYW1lUmVzdWx0Qm94LFxyXG4gICAgICAgICAgICAgICAgdCA9IHRoaXMub3B0aW9ucy50b2xlcmFuY2VcclxuXHJcbiAgICAgICAgICAgIGlmICghYm94IHx8IGJveC50b3AgLSB0ID4geSB8fCBib3guYm90dG9tICsgdCA8IHkgfHwgYm94LmxlZnQgLSB0ID4geCB8fCBib3gucmlnaHQgKyB0IDwgeClcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWFyY2hWYWxpZFRhcmdldCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5kZXRhY2goKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEFwcGVuZGVkSXRlbSA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJvcDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxpc3RlbmVycygnb2ZmJylcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0luaXREb25lID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBwcm9jZXNzaW5nIERyb3AsIGNoZWNrIGlmIHBsYWNlaG9sZGVyIGlzIGRldGFjaGVkXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlci5jbG9zZXN0KFwiaHRtbFwiKVswXSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLmJlZm9yZSh0aGlzLml0ZW0pLmRldGFjaCgpXHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2FuY2VsKHRoaXMuaXRlbSwgdGhpcy5pdGVtQ29udGFpbmVyLCBncm91cERlZmF1bHRzLm9uQ2FuY2VsLCBlKVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRyb3AodGhpcy5pdGVtLCB0aGlzLmdldENvbnRhaW5lcih0aGlzLml0ZW0pLCBncm91cERlZmF1bHRzLm9uRHJvcCwgZSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhbnVwXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRGltZW5zaW9ucygpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyT2Zmc2V0UGFyZW50KClcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEFwcGVuZGVkSXRlbSA9IHRoaXMuc2FtZVJlc3VsdEJveCA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlYXJjaFZhbGlkVGFyZ2V0OiBmdW5jdGlvbihwb2ludGVyLCBsYXN0UG9pbnRlcikge1xyXG4gICAgICAgICAgICBpZiAoIXBvaW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHBvaW50ZXIgPSB0aGlzLnJlbGF0aXZlUG9pbnRlciB8fCB0aGlzLnBvaW50ZXJcclxuICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyID0gdGhpcy5sYXN0UmVsYXRpdmVQb2ludGVyIHx8IHRoaXMubGFzdFBvaW50ZXJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRpc3RhbmNlcyA9IHNvcnRCeURpc3RhbmNlRGVzYyh0aGlzLmdldENvbnRhaW5lckRpbWVuc2lvbnMoKSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyKSxcclxuICAgICAgICAgICAgICAgIGkgPSBkaXN0YW5jZXMubGVuZ3RoXHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBkaXN0YW5jZXNbaV1bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBkaXN0YW5jZXNbaV1bMV1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWRpc3RhbmNlIHx8IHRoaXMub3B0aW9ucy5wdWxsUGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJzW2luZGV4XVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGFpbmVyLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy4kZ2V0T2Zmc2V0UGFyZW50KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBjb250YWluZXIuZ2V0SXRlbU9mZnNldFBhcmVudCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludGVyID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihwb2ludGVyLCBvZmZzZXRQYXJlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UG9pbnRlciA9IGdldFJlbGF0aXZlUG9zaXRpb24obGFzdFBvaW50ZXIsIG9mZnNldFBhcmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLnNlYXJjaFZhbGlkVGFyZ2V0KHBvaW50ZXIsIGxhc3RQb2ludGVyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNhbWVSZXN1bHRCb3gpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhbWVSZXN1bHRCb3ggPSB1bmRlZmluZWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vdmVQbGFjZWhvbGRlcjogZnVuY3Rpb24oY29udGFpbmVyLCBpdGVtLCBtZXRob2QsIHNhbWVSZXN1bHRCb3gpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RBcHBlbmRlZEl0ZW0gPSB0aGlzLmxhc3RBcHBlbmRlZEl0ZW1cclxuICAgICAgICAgICAgaWYgKCFzYW1lUmVzdWx0Qm94ICYmIGxhc3RBcHBlbmRlZEl0ZW0gJiYgbGFzdEFwcGVuZGVkSXRlbVswXSA9PT0gaXRlbVswXSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGl0ZW1bbWV0aG9kXSh0aGlzLnBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RBcHBlbmRlZEl0ZW0gPSBpdGVtXHJcbiAgICAgICAgICAgIHRoaXMuc2FtZVJlc3VsdEJveCA9IHNhbWVSZXN1bHRCb3hcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFmdGVyTW92ZSh0aGlzLnBsYWNlaG9sZGVyLCBjb250YWluZXIsIGl0ZW0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRDb250YWluZXJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckRpbWVuc2lvbnMpXHJcbiAgICAgICAgICAgICAgICBzZXREaW1lbnNpb25zKHRoaXMuY29udGFpbmVycywgdGhpcy5jb250YWluZXJEaW1lbnNpb25zID0gW10sIHRoaXMub3B0aW9ucy50b2xlcmFuY2UsICF0aGlzLiRnZXRPZmZzZXRQYXJlbnQoKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyRGltZW5zaW9uc1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0Q29udGFpbmVyOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmNsb3Nlc3QodGhpcy5vcHRpb25zLmNvbnRhaW5lclNlbGVjdG9yKS5kYXRhKHBsdWdpbk5hbWUpXHJcbiAgICAgICAgfSxcclxuICAgICAgICAkZ2V0T2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2Zmc2V0UGFyZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gdGhpcy5jb250YWluZXJzW2ldLmdldEl0ZW1PZmZzZXRQYXJlbnQoKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnJvb3RHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldFBhcmVudFswXSAhPSB0aGlzLmNvbnRhaW5lcnNbaV0uZ2V0SXRlbU9mZnNldFBhcmVudCgpWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBldmVyeSBjb250YWluZXIgaGFzIHRoZSBzYW1lIG9mZnNldCBwYXJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgcG9zaXRpb24oKSB3aGljaCBpcyByZWxhdGl2ZSB0byB0aGlzIHBhcmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB1c2Ugb2Zmc2V0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBhcmUgI3NldERpbWVuc2lvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZnNldFBhcmVudFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0UG9pbnRlcjogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgcG9pbnRlciA9IHRoaXMuZ2V0UG9pbnRlcihlKVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuJGdldE9mZnNldFBhcmVudCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpdmVQb2ludGVyID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihwb2ludGVyLCB0aGlzLiRnZXRPZmZzZXRQYXJlbnQoKSlcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFJlbGF0aXZlUG9pbnRlciA9IHRoaXMucmVsYXRpdmVQb2ludGVyXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGF0aXZlUG9pbnRlciA9IHJlbGF0aXZlUG9pbnRlclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxhc3RQb2ludGVyID0gdGhpcy5wb2ludGVyXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRlciA9IHBvaW50ZXJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc3RhbmNlTWV0OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50UG9pbnRlciA9IHRoaXMuZ2V0UG9pbnRlcihlKVxyXG4gICAgICAgICAgICByZXR1cm4gKE1hdGgubWF4KFxyXG4gICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5wb2ludGVyLmxlZnQgLSBjdXJyZW50UG9pbnRlci5sZWZ0KSxcclxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHRoaXMucG9pbnRlci50b3AgLSBjdXJyZW50UG9pbnRlci50b3ApXHJcbiAgICAgICAgICAgICkgPj0gdGhpcy5vcHRpb25zLmRpc3RhbmNlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UG9pbnRlcjogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGVmdDogZS5wYWdlWCB8fCBlLm9yaWdpbmFsRXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgICAgICB0b3A6IGUucGFnZVkgfHwgZS5vcmlnaW5hbEV2ZW50LnBhZ2VZXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldHVwRGVsYXlUaW1lcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpc1xyXG4gICAgICAgICAgICB0aGlzLmRlbGF5TWV0ID0gIXRoaXMub3B0aW9ucy5kZWxheVxyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBkZWxheSB0aW1lciBpZiBuZWVkZWRcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRlbGF5TWV0KSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fbW91c2VEZWxheVRpbWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21vdXNlRGVsYXlUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5kZWxheU1ldCA9IHRydWVcclxuICAgICAgICAgICAgICAgIH0sIHRoaXMub3B0aW9ucy5kZWxheSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJEaW1lbnNpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPZmZzZXRQYXJlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvZ2dsZUxpc3RlbmVyczogZnVuY3Rpb24obWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGV2ZW50cyA9IFsnZHJhZycsICdkcm9wJywgJ3Njcm9sbCddXHJcblxyXG4gICAgICAgICAgICAkLmVhY2goZXZlbnRzLCBmdW5jdGlvbihpLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC4kZG9jdW1lbnRbbWV0aG9kXShldmVudE5hbWVzW2V2ZW50XSwgdGhhdFtldmVudCArICdQcm94eSddKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXJPZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLm9mZnNldFBhcmVudCA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgY2xlYXIgY29udGFpbmVyIGFuZCBpdGVtIGRpbWVuc2lvbnNcclxuICAgICAgICBjbGVhckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Ll9jbGVhckRpbWVuc2lvbnMoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJhdmVyc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMpXHJcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aFxyXG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lcnNbaV0udHJhdmVyc2UoY2FsbGJhY2spXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIF9jbGVhckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckRpbWVuc2lvbnMgPSB1bmRlZmluZWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyR3JvdXBzW3RoaXMub3B0aW9ucy5ncm91cF0gPSB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udGFpbmVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmVsID0gZWxlbWVudFxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBjb250YWluZXJEZWZhdWx0cywgb3B0aW9ucylcclxuXHJcbiAgICAgICAgdGhpcy5ncm91cCA9IENvbnRhaW5lckdyb3VwLmdldCh0aGlzLm9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5yb290R3JvdXAgPSB0aGlzLm9wdGlvbnMucm9vdEdyb3VwIHx8IHRoaXMuZ3JvdXBcclxuICAgICAgICB0aGlzLmhhbmRsZSA9IHRoaXMucm9vdEdyb3VwLm9wdGlvbnMuaGFuZGxlIHx8IHRoaXMucm9vdEdyb3VwLm9wdGlvbnMuaXRlbVNlbGVjdG9yXHJcblxyXG4gICAgICAgIHZhciBpdGVtUGF0aCA9IHRoaXMucm9vdEdyb3VwLm9wdGlvbnMuaXRlbVBhdGhcclxuICAgICAgICB0aGlzLnRhcmdldCA9IGl0ZW1QYXRoID8gdGhpcy5lbC5maW5kKGl0ZW1QYXRoKSA6IHRoaXMuZWxcclxuXHJcbiAgICAgICAgdGhpcy50YXJnZXQub24oZXZlbnROYW1lcy5zdGFydCwgdGhpcy5oYW5kbGUsICQucHJveHkodGhpcy5kcmFnSW5pdCwgdGhpcykpXHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZHJvcClcclxuICAgICAgICAgICAgdGhpcy5ncm91cC5jb250YWluZXJzLnB1c2godGhpcylcclxuICAgIH1cclxuXHJcbiAgICBDb250YWluZXIucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGRyYWdJbml0OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciByb290R3JvdXAgPSB0aGlzLnJvb3RHcm91cFxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmXHJcbiAgICAgICAgICAgICAgICAhcm9vdEdyb3VwLmRyYWdJbml0RG9uZSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRyYWcgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNWYWxpZERyYWcoZSkpIHtcclxuICAgICAgICAgICAgICAgIHJvb3RHcm91cC5kcmFnSW5pdChlLCB0aGlzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpc1ZhbGlkRHJhZzogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZS53aGljaCA9PSAxIHx8XHJcbiAgICAgICAgICAgICAgICBlLnR5cGUgPT0gXCJ0b3VjaHN0YXJ0XCIgJiYgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlYXJjaFZhbGlkVGFyZ2V0OiBmdW5jdGlvbihwb2ludGVyLCBsYXN0UG9pbnRlcikge1xyXG4gICAgICAgICAgICB2YXIgZGlzdGFuY2VzID0gc29ydEJ5RGlzdGFuY2VEZXNjKHRoaXMuZ2V0SXRlbURpbWVuc2lvbnMoKSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyKSxcclxuICAgICAgICAgICAgICAgIGkgPSBkaXN0YW5jZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcm9vdEdyb3VwID0gdGhpcy5yb290R3JvdXAsXHJcbiAgICAgICAgICAgICAgICB2YWxpZFRhcmdldCA9ICFyb290R3JvdXAub3B0aW9ucy5pc1ZhbGlkVGFyZ2V0IHx8XHJcbiAgICAgICAgICAgICAgICByb290R3JvdXAub3B0aW9ucy5pc1ZhbGlkVGFyZ2V0KHJvb3RHcm91cC5pdGVtLCB0aGlzKVxyXG5cclxuICAgICAgICAgICAgaWYgKCFpICYmIHZhbGlkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByb290R3JvdXAubW92ZVBsYWNlaG9sZGVyKHRoaXMsIHRoaXMudGFyZ2V0LCBcImFwcGVuZFwiKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZGlzdGFuY2VzW2ldWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGRpc3RhbmNlc1tpXVsxXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGlzdGFuY2UgJiYgdGhpcy5oYXNDaGlsZEdyb3VwKGluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSB0aGlzLmdldENvbnRhaW5lckdyb3VwKGluZGV4KS5zZWFyY2hWYWxpZFRhcmdldChwb2ludGVyLCBsYXN0UG9pbnRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbGlkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVBsYWNlaG9sZGVyKGluZGV4LCBwb2ludGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vdmVQbGFjZWhvbGRlcjogZnVuY3Rpb24oaW5kZXgsIHBvaW50ZXIpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSAkKHRoaXMuaXRlbXNbaW5kZXhdKSxcclxuICAgICAgICAgICAgICAgIGRpbSA9IHRoaXMuaXRlbURpbWVuc2lvbnNbaW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kID0gXCJhZnRlclwiLFxyXG4gICAgICAgICAgICAgICAgd2lkdGggPSBpdGVtLm91dGVyV2lkdGgoKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IGl0ZW0ub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IGl0ZW0ub2Zmc2V0KCksXHJcbiAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBvZmZzZXQubGVmdCArIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0LnRvcCxcclxuICAgICAgICAgICAgICAgICAgICBib3R0b206IG9mZnNldC50b3AgKyBoZWlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy52ZXJ0aWNhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHlDZW50ZXIgPSAoZGltWzJdICsgZGltWzNdKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5VcHBlckhhbGYgPSBwb2ludGVyLnRvcCA8PSB5Q2VudGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5VcHBlckhhbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBcImJlZm9yZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveC5ib3R0b20gLT0gaGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveC50b3AgKz0gaGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHhDZW50ZXIgPSAoZGltWzBdICsgZGltWzFdKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5MZWZ0SGFsZiA9IHBvaW50ZXIubGVmdCA8PSB4Q2VudGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5MZWZ0SGFsZikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiYmVmb3JlXCJcclxuICAgICAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94LnJpZ2h0IC09IHdpZHRoIC8gMlxyXG4gICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveC5sZWZ0ICs9IHdpZHRoIC8gMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0NoaWxkR3JvdXAoaW5kZXgpKVxyXG4gICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveCA9IGVtcHR5Qm94XHJcbiAgICAgICAgICAgIHRoaXMucm9vdEdyb3VwLm1vdmVQbGFjZWhvbGRlcih0aGlzLCBpdGVtLCBtZXRob2QsIHNhbWVSZXN1bHRCb3gpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRJdGVtRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pdGVtRGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuJGdldENoaWxkcmVuKHRoaXMuZWwsIFwiaXRlbVwiKS5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgXCI6bm90KC5cIiArIHRoaXMuZ3JvdXAub3B0aW9ucy5wbGFjZWhvbGRlckNsYXNzICsgXCIsIC5cIiArIHRoaXMuZ3JvdXAub3B0aW9ucy5kcmFnZ2VkQ2xhc3MgKyBcIilcIlxyXG4gICAgICAgICAgICAgICAgKS5nZXQoKVxyXG4gICAgICAgICAgICAgICAgc2V0RGltZW5zaW9ucyh0aGlzLml0ZW1zLCB0aGlzLml0ZW1EaW1lbnNpb25zID0gW10sIHRoaXMub3B0aW9ucy50b2xlcmFuY2UpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbURpbWVuc2lvbnNcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldEl0ZW1PZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50LFxyXG4gICAgICAgICAgICAgICAgZWwgPSB0aGlzLmVsXHJcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSBlbCBtaWdodCBiZSBlbXB0eSB3ZSBoYXZlIHRvIGNoZWNrIGVsIGl0c2VsZiBhbmRcclxuICAgICAgICAgICAgICAgIC8vIGNhbiBub3QgZG8gc29tZXRoaW5nIGxpa2UgZWwuY2hpbGRyZW4oKS5maXJzdCgpLm9mZnNldFBhcmVudCgpXHJcbiAgICAgICAgICAgIGlmIChlbC5jc3MoXCJwb3NpdGlvblwiKSA9PT0gXCJyZWxhdGl2ZVwiIHx8IGVsLmNzcyhcInBvc2l0aW9uXCIpID09PSBcImFic29sdXRlXCIgfHwgZWwuY3NzKFwicG9zaXRpb25cIikgPT09IFwiZml4ZWRcIilcclxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IGVsXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IGVsLm9mZnNldFBhcmVudCgpXHJcbiAgICAgICAgICAgIHJldHVybiBvZmZzZXRQYXJlbnRcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhc0NoaWxkR3JvdXA6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubmVzdGVkICYmIHRoaXMuZ2V0Q29udGFpbmVyR3JvdXAoaW5kZXgpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRDb250YWluZXJHcm91cDogZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkR3JvdXAgPSAkLmRhdGEodGhpcy5pdGVtc1tpbmRleF0sIHN1YkNvbnRhaW5lcktleSlcclxuICAgICAgICAgICAgaWYgKGNoaWxkR3JvdXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkQ29udGFpbmVycyA9IHRoaXMuJGdldENoaWxkcmVuKHRoaXMuaXRlbXNbaW5kZXhdLCBcImNvbnRhaW5lclwiKVxyXG4gICAgICAgICAgICAgICAgY2hpbGRHcm91cCA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ29udGFpbmVyc1swXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290R3JvdXA6IHRoaXMucm9vdEdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cDogZ3JvdXBDb3VudGVyKytcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkR3JvdXAgPSBjaGlsZENvbnRhaW5lcnNbcGx1Z2luTmFtZV0ob3B0aW9ucykuZGF0YShwbHVnaW5OYW1lKS5ncm91cFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJC5kYXRhKHRoaXMuaXRlbXNbaW5kZXhdLCBzdWJDb250YWluZXJLZXksIGNoaWxkR3JvdXApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkR3JvdXBcclxuICAgICAgICB9LFxyXG4gICAgICAgICRnZXRDaGlsZHJlbjogZnVuY3Rpb24ocGFyZW50LCB0eXBlKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5yb290R3JvdXAub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIHBhdGggPSBvcHRpb25zW3R5cGUgKyBcIlBhdGhcIl0sXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IG9wdGlvbnNbdHlwZSArIFwiU2VsZWN0b3JcIl1cclxuXHJcbiAgICAgICAgICAgIHBhcmVudCA9ICQocGFyZW50KVxyXG4gICAgICAgICAgICBpZiAocGF0aClcclxuICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5maW5kKHBhdGgpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50LmNoaWxkcmVuKHNlbGVjdG9yKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX3NlcmlhbGl6ZTogZnVuY3Rpb24ocGFyZW50LCBpc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBjaGlsZFR5cGUgPSBpc0NvbnRhaW5lciA/IFwiaXRlbVwiIDogXCJjb250YWluZXJcIixcclxuXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IHRoaXMuJGdldENoaWxkcmVuKHBhcmVudCwgY2hpbGRUeXBlKS5ub3QodGhpcy5vcHRpb25zLmV4Y2x1ZGUpLm1hcChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5fc2VyaWFsaXplKCQodGhpcyksICFpc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgIH0pLmdldCgpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb290R3JvdXAub3B0aW9ucy5zZXJpYWxpemUocGFyZW50LCBjaGlsZHJlbiwgaXNDb250YWluZXIpXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0cmF2ZXJzZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgJC5lYWNoKHRoaXMuaXRlbXMgfHwgW10sIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9ICQuZGF0YSh0aGlzLCBzdWJDb250YWluZXJLZXkpXHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXApXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAudHJhdmVyc2UoY2FsbGJhY2spXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2sodGhpcylcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9jbGVhckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1EaW1lbnNpb25zID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Lm9mZihldmVudE5hbWVzLnN0YXJ0LCB0aGlzLmhhbmRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRGF0YShwbHVnaW5OYW1lKVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kcm9wKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cC5jb250YWluZXJzID0gJC5ncmVwKHRoaXMuZ3JvdXAuY29udGFpbmVycywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbCAhPSB0aGF0XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgJC5lYWNoKHRoaXMuaXRlbXMgfHwgW10sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMsIHN1YkNvbnRhaW5lcktleSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIEFQSSA9IHtcclxuICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmRpc2FibGVkID0gZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmRpc2FibGVkID0gdHJ1ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlcmlhbGl6ZSh0aGlzLmVsLCB0cnVlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuX2NsZWFyRGltZW5zaW9ucygpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5fZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAkLmV4dGVuZChDb250YWluZXIucHJvdG90eXBlLCBBUEkpXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBqUXVlcnkgQVBJXHJcbiAgICAgKlxyXG4gICAgICogUGFyYW1ldGVycyBhcmVcclxuICAgICAqICAgZWl0aGVyIG9wdGlvbnMgb24gaW5pdFxyXG4gICAgICogICBvciBhIG1ldGhvZCBuYW1lIGZvbGxvd2VkIGJ5IGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtZXRob2RcclxuICAgICAqL1xyXG4gICAgJC5mbltwbHVnaW5OYW1lXSA9IGZ1bmN0aW9uKG1ldGhvZE9yT3B0aW9ucykge1xyXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciAkdCA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBvYmplY3QgPSAkdC5kYXRhKHBsdWdpbk5hbWUpXHJcblxyXG4gICAgICAgICAgICBpZiAob2JqZWN0ICYmIEFQSVttZXRob2RPck9wdGlvbnNdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFQSVttZXRob2RPck9wdGlvbnNdLmFwcGx5KG9iamVjdCwgYXJncykgfHwgdGhpc1xyXG4gICAgICAgICAgICBlbHNlIGlmICghb2JqZWN0ICYmIChtZXRob2RPck9wdGlvbnMgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gXCJvYmplY3RcIikpXHJcbiAgICAgICAgICAgICAgICAkdC5kYXRhKHBsdWdpbk5hbWUsIG5ldyBDb250YWluZXIoJHQsIG1ldGhvZE9yT3B0aW9ucykpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbn0pKGpxMTExLCB3aW5kb3csICdzb3J0YWJsZScpOyIsIi8qISBuYW5vU2Nyb2xsZXJKUyAtIHYwLjguNCAtIDIwMTRcbiAqIGh0dHA6Ly9qYW1lc2Zsb3JlbnRpbm8uZ2l0aHViLmNvbS9uYW5vU2Nyb2xsZXJKUy9cbiAqIENvcHlyaWdodCAoYykgMjAxNCBKYW1lcyBGbG9yZW50aW5vOyBMaWNlbnNlZCBNSVQgKi9cbihmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIEJST1dTRVJfSVNfSUU3LCBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCwgRE9NU0NST0xMLCBET1dOLCBEUkFHLCBFTlRFUiwgS0VZRE9XTiwgS0VZVVAsIE1PVVNFRE9XTiwgTU9VU0VFTlRFUiwgTU9VU0VNT1ZFLCBNT1VTRVVQLCBNT1VTRVdIRUVMLCBOYW5vU2Nyb2xsLCBQQU5FRE9XTiwgUkVTSVpFLCBTQ1JPTEwsIFNDUk9MTEJBUiwgVE9VQ0hNT1ZFLCBVUCwgV0hFRUwsIGNBRiwgZGVmYXVsdHMsIGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aCwgaGFzVHJhbnNmb3JtLCBpc0ZGV2l0aEJ1Z2d5U2Nyb2xsYmFyLCByQUYsIHRyYW5zZm9ybSwgX2VsZW1lbnRTdHlsZSwgX3ByZWZpeFN0eWxlLCBfdmVuZG9yO1xuICAgIGRlZmF1bHRzID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgYSBjbGFzc25hbWUgZm9yIHRoZSBwYW5lIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgcGFuZUNsYXNzXG4gICAgICBAdHlwZSBTdHJpbmdcbiAgICAgIEBkZWZhdWx0ICduYW5vLXBhbmUnXG4gICAgICovXG4gICAgICAgIHBhbmVDbGFzczogJ25hbm8tcGFuZScsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIGNsYXNzbmFtZSBmb3IgdGhlIHNsaWRlciBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHNsaWRlckNsYXNzXG4gICAgICBAdHlwZSBTdHJpbmdcbiAgICAgIEBkZWZhdWx0ICduYW5vLXNsaWRlcidcbiAgICAgKi9cbiAgICAgICAgc2xpZGVyQ2xhc3M6ICduYW5vLXNsaWRlcicsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIGNsYXNzbmFtZSBmb3IgdGhlIGNvbnRlbnQgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBjb250ZW50Q2xhc3NcbiAgICAgIEB0eXBlIFN0cmluZ1xuICAgICAgQGRlZmF1bHQgJ25hbm8tY29udGVudCdcbiAgICAgKi9cbiAgICAgICAgY29udGVudENsYXNzOiAnbmFuby1jb250ZW50JyxcblxuICAgICAgICAvKipcbiAgICAgIGEgc2V0dGluZyB0byBlbmFibGUgbmF0aXZlIHNjcm9sbGluZyBpbiBpT1MgZGV2aWNlcy5cbiAgICAgIEBwcm9wZXJ0eSBpT1NOYXRpdmVTY3JvbGxpbmdcbiAgICAgIEB0eXBlIEJvb2xlYW5cbiAgICAgIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgICAgIGlPU05hdGl2ZVNjcm9sbGluZzogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIHNldHRpbmcgdG8gcHJldmVudCB0aGUgcmVzdCBvZiB0aGUgcGFnZSBiZWluZ1xuICAgICAgc2Nyb2xsZWQgd2hlbiB1c2VyIHNjcm9sbHMgdGhlIGAuY29udGVudGAgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBwcmV2ZW50UGFnZVNjcm9sbGluZ1xuICAgICAgQHR5cGUgQm9vbGVhblxuICAgICAgQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICAgICAgcHJldmVudFBhZ2VTY3JvbGxpbmc6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBzZXR0aW5nIHRvIGRpc2FibGUgYmluZGluZyB0byB0aGUgcmVzaXplIGV2ZW50LlxuICAgICAgQHByb3BlcnR5IGRpc2FibGVSZXNpemVcbiAgICAgIEB0eXBlIEJvb2xlYW5cbiAgICAgIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgICAgIGRpc2FibGVSZXNpemU6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBzZXR0aW5nIHRvIG1ha2UgdGhlIHNjcm9sbGJhciBhbHdheXMgdmlzaWJsZS5cbiAgICAgIEBwcm9wZXJ0eSBhbHdheXNWaXNpYmxlXG4gICAgICBAdHlwZSBCb29sZWFuXG4gICAgICBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgICAgICBhbHdheXNWaXNpYmxlOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgIGEgZGVmYXVsdCB0aW1lb3V0IGZvciB0aGUgYGZsYXNoKClgIG1ldGhvZC5cbiAgICAgIEBwcm9wZXJ0eSBmbGFzaERlbGF5XG4gICAgICBAdHlwZSBOdW1iZXJcbiAgICAgIEBkZWZhdWx0IDE1MDBcbiAgICAgKi9cbiAgICAgICAgZmxhc2hEZWxheTogMTUwMCxcblxuICAgICAgICAvKipcbiAgICAgIGEgbWluaW11bSBoZWlnaHQgZm9yIHRoZSBgLnNsaWRlcmAgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBzbGlkZXJNaW5IZWlnaHRcbiAgICAgIEB0eXBlIE51bWJlclxuICAgICAgQGRlZmF1bHQgMjBcbiAgICAgKi9cbiAgICAgICAgc2xpZGVyTWluSGVpZ2h0OiAyMCxcblxuICAgICAgICAvKipcbiAgICAgIGEgbWF4aW11bSBoZWlnaHQgZm9yIHRoZSBgLnNsaWRlcmAgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBzbGlkZXJNYXhIZWlnaHRcbiAgICAgIEB0eXBlIE51bWJlclxuICAgICAgQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgICAgICBzbGlkZXJNYXhIZWlnaHQ6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICBhbiBhbHRlcm5hdGUgZG9jdW1lbnQgY29udGV4dC5cbiAgICAgIEBwcm9wZXJ0eSBkb2N1bWVudENvbnRleHRcbiAgICAgIEB0eXBlIERvY3VtZW50XG4gICAgICBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgICAgIGRvY3VtZW50Q29udGV4dDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgIGFuIGFsdGVybmF0ZSB3aW5kb3cgY29udGV4dC5cbiAgICAgIEBwcm9wZXJ0eSB3aW5kb3dDb250ZXh0XG4gICAgICBAdHlwZSBXaW5kb3dcbiAgICAgIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICAgICAgd2luZG93Q29udGV4dDogbnVsbFxuICAgIH07XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgU0NST0xMQkFSXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFNDUk9MTEJBUiA9ICdzY3JvbGxiYXInO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFNDUk9MTFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBTQ1JPTEwgPSAnc2Nyb2xsJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRURPV05cbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRURPV04gPSAnbW91c2Vkb3duJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRUVOVEVSXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VFTlRFUiA9ICdtb3VzZWVudGVyJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRU1PVkVcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VNT1ZFID0gJ21vdXNlbW92ZSc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VXSEVFTFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFV0hFRUwgPSAnbW91c2V3aGVlbCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VVUFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRVVQID0gJ21vdXNldXAnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFJFU0laRVxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFJFU0laRSA9ICdyZXNpemUnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IERSQUdcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgRFJBRyA9ICdkcmFnJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBFTlRFUlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBFTlRFUiA9ICdlbnRlcic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgVVBcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgVVAgPSAndXAnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFBBTkVET1dOXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFBBTkVET1dOID0gJ3BhbmVkb3duJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBET01TQ1JPTExcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgRE9NU0NST0xMID0gJ0RPTU1vdXNlU2Nyb2xsJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBET1dOXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIERPV04gPSAnZG93bic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgV0hFRUxcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgV0hFRUwgPSAnd2hlZWwnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEtFWURPV05cbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgS0VZRE9XTiA9ICdrZXlkb3duJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBLRVlVUFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBLRVlVUCA9ICdrZXl1cCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgVE9VQ0hNT1ZFXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFRPVUNITU9WRSA9ICd0b3VjaG1vdmUnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEJST1dTRVJfSVNfSUU3XG4gICAgQHR5cGUgQm9vbGVhblxuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBCUk9XU0VSX0lTX0lFNyA9IHdpbmRvdy5uYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicgJiYgL21zaWUgNy4vaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbikgJiYgd2luZG93LkFjdGl2ZVhPYmplY3Q7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEhcbiAgICBAdHlwZSBOdW1iZXJcbiAgICBAc3RhdGljXG4gICAgQGRlZmF1bHQgbnVsbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID0gbnVsbDtcbiAgICByQUYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgIGNBRiA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZTtcbiAgICBfZWxlbWVudFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XG4gICAgX3ZlbmRvciA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGksIHRyYW5zZm9ybSwgdmVuZG9yLCB2ZW5kb3JzLCBfaSwgX2xlbjtcbiAgICAgICAgdmVuZG9ycyA9IFsndCcsICd3ZWJraXRUJywgJ01velQnLCAnbXNUJywgJ09UJ107XG4gICAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IHZlbmRvcnMubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgICAgICB2ZW5kb3IgPSB2ZW5kb3JzW2ldO1xuICAgICAgICAgICAgdHJhbnNmb3JtID0gdmVuZG9yc1tpXSArICdyYW5zZm9ybSc7XG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtIGluIF9lbGVtZW50U3R5bGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVuZG9yc1tpXS5zdWJzdHIoMCwgdmVuZG9yc1tpXS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkoKTtcbiAgICBfcHJlZml4U3R5bGUgPSBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICBpZiAoX3ZlbmRvciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3ZlbmRvciA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3ZlbmRvciArIHN0eWxlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3R5bGUuc3Vic3RyKDEpO1xuICAgIH07XG4gICAgdHJhbnNmb3JtID0gX3ByZWZpeFN0eWxlKCd0cmFuc2Zvcm0nKTtcbiAgICBoYXNUcmFuc2Zvcm0gPSB0cmFuc2Zvcm0gIT09IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgUmV0dXJucyBicm93c2VyJ3MgbmF0aXZlIHNjcm9sbGJhciB3aWR0aFxuICAgIEBtZXRob2QgZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoXG4gICAgQHJldHVybiB7TnVtYmVyfSB0aGUgc2Nyb2xsYmFyIHdpZHRoIGluIHBpeGVsc1xuICAgIEBzdGF0aWNcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG91dGVyLCBvdXRlclN0eWxlLCBzY3JvbGxiYXJXaWR0aDtcbiAgICAgICAgb3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3V0ZXJTdHlsZSA9IG91dGVyLnN0eWxlO1xuICAgICAgICBvdXRlclN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgb3V0ZXJTdHlsZS53aWR0aCA9ICcxMDBweCc7XG4gICAgICAgIG91dGVyU3R5bGUuaGVpZ2h0ID0gJzEwMHB4JztcbiAgICAgICAgb3V0ZXJTdHlsZS5vdmVyZmxvdyA9IFNDUk9MTDtcbiAgICAgICAgb3V0ZXJTdHlsZS50b3AgPSAnLTk5OTlweCc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3V0ZXIpO1xuICAgICAgICBzY3JvbGxiYXJXaWR0aCA9IG91dGVyLm9mZnNldFdpZHRoIC0gb3V0ZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3V0ZXIpO1xuICAgICAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7XG4gICAgfTtcbiAgICBpc0ZGV2l0aEJ1Z2d5U2Nyb2xsYmFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpc09TWEZGLCB1YSwgdmVyc2lvbjtcbiAgICAgICAgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgICAgaXNPU1hGRiA9IC8oPz0uK01hYyBPUyBYKSg/PS4rRmlyZWZveCkvLnRlc3QodWEpO1xuICAgICAgICBpZiAoIWlzT1NYRkYpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2ZXJzaW9uID0gL0ZpcmVmb3hcXC9cXGR7Mn1cXC4vLmV4ZWModWEpO1xuICAgICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICAgICAgdmVyc2lvbiA9IHZlcnNpb25bMF0ucmVwbGFjZSgvXFxEKy9nLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzT1NYRkYgJiYgK3ZlcnNpb24gPiAyMztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgQGNsYXNzIE5hbm9TY3JvbGxcbiAgICBAcGFyYW0gZWxlbWVudCB7SFRNTEVsZW1lbnR8Tm9kZX0gdGhlIG1haW4gZWxlbWVudFxuICAgIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IG5hbm9TY3JvbGxlcidzIG9wdGlvbnNcbiAgICBAY29uc3RydWN0b3JcbiAgICovXG4gICAgTmFub1Njcm9sbCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgZnVuY3Rpb24gTmFub1Njcm9sbChlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5lbCA9IGVsO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICAgIEJST1dTRVJfU0NST0xMQkFSX1dJRFRIIHx8IChCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCA9IGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aCgpKTtcbiAgICAgICAgICAgIHRoaXMuJGVsID0gJCh0aGlzLmVsKTtcbiAgICAgICAgICAgIHRoaXMuZG9jID0gJCh0aGlzLm9wdGlvbnMuZG9jdW1lbnRDb250ZXh0IHx8IGRvY3VtZW50KTtcbiAgICAgICAgICAgIHRoaXMud2luID0gJCh0aGlzLm9wdGlvbnMud2luZG93Q29udGV4dCB8fCB3aW5kb3cpO1xuICAgICAgICAgICAgdGhpcy5ib2R5ID0gdGhpcy5kb2MuZmluZCgnYm9keScpO1xuICAgICAgICAgICAgdGhpcy4kY29udGVudCA9IHRoaXMuJGVsLmNoaWxkcmVuKFwiLlwiICsgb3B0aW9ucy5jb250ZW50Q2xhc3MpO1xuICAgICAgICAgICAgdGhpcy4kY29udGVudC5hdHRyKCd0YWJpbmRleCcsIHRoaXMub3B0aW9ucy50YWJJbmRleCB8fCAwKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuJGNvbnRlbnRbMF07XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pT1NOYXRpdmVTY3JvbGxpbmcgJiYgKHRoaXMuZWwuc3R5bGUuV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmcgIT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVNjcm9sbGluZygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICBQcmV2ZW50cyB0aGUgcmVzdCBvZiB0aGUgcGFnZSBiZWluZyBzY3JvbGxlZFxuICAgICAgd2hlbiB1c2VyIHNjcm9sbHMgdGhlIGAubmFuby1jb250ZW50YCBlbGVtZW50LlxuICAgICAgQG1ldGhvZCBwcmV2ZW50U2Nyb2xsaW5nXG4gICAgICBAcGFyYW0gZXZlbnQge0V2ZW50fVxuICAgICAgQHBhcmFtIGRpcmVjdGlvbiB7U3RyaW5nfSBTY3JvbGwgZGlyZWN0aW9uICh1cCBvciBkb3duKVxuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5wcmV2ZW50U2Nyb2xsaW5nID0gZnVuY3Rpb24oZSwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSBET01TQ1JPTEwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBET1dOICYmIGUub3JpZ2luYWxFdmVudC5kZXRhaWwgPiAwIHx8IGRpcmVjdGlvbiA9PT0gVVAgJiYgZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBNT1VTRVdIRUVMKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlLm9yaWdpbmFsRXZlbnQgfHwgIWUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRE9XTiAmJiBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA8IDAgfHwgZGlyZWN0aW9uID09PSBVUCAmJiBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgRW5hYmxlIGlPUyBuYXRpdmUgc2Nyb2xsaW5nXG4gICAgICBAbWV0aG9kIG5hdGl2ZVNjcm9sbGluZ1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5uYXRpdmVTY3JvbGxpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcbiAgICAgICAgICAgICAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZzogJ3RvdWNoJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlPU05hdGl2ZVNjcm9sbGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgVXBkYXRlcyB0aG9zZSBuYW5vU2Nyb2xsZXIgcHJvcGVydGllcyB0aGF0XG4gICAgICBhcmUgcmVsYXRlZCB0byBjdXJyZW50IHNjcm9sbGJhciBwb3NpdGlvbi5cbiAgICAgIEBtZXRob2QgdXBkYXRlU2Nyb2xsVmFsdWVzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnVwZGF0ZVNjcm9sbFZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQsIGRpcmVjdGlvbjtcbiAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7XG4gICAgICAgICAgICB0aGlzLm1heFNjcm9sbFRvcCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0IC0gY29udGVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnByZXZTY3JvbGxUb3AgPSB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgfHwgMDtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFNjcm9sbFRvcCA9IGNvbnRlbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5jb250ZW50U2Nyb2xsVG9wID4gdGhpcy5wcmV2aW91c1Bvc2l0aW9uID8gXCJkb3duXCIgOiB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgPCB0aGlzLnByZXZpb3VzUG9zaXRpb24gPyBcInVwXCIgOiBcInNhbWVcIjtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IHRoaXMuY29udGVudFNjcm9sbFRvcDtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09IFwic2FtZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwudHJpZ2dlcigndXBkYXRlJywge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5jb250ZW50U2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiB0aGlzLm1heFNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1heFNsaWRlclRvcCA9IHRoaXMucGFuZUhlaWdodCAtIHRoaXMuc2xpZGVySGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyVG9wID0gdGhpcy5tYXhTY3JvbGxUb3AgPT09IDAgPyAwIDogdGhpcy5jb250ZW50U2Nyb2xsVG9wICogdGhpcy5tYXhTbGlkZXJUb3AgLyB0aGlzLm1heFNjcm9sbFRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgVXBkYXRlcyBDU1Mgc3R5bGVzIGZvciBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbi5cbiAgICAgIFVzZXMgQ1NTIDJkIHRyYW5zZnJvbXMgYW5kIGB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBpZiBhdmFpbGFibGUuXG4gICAgICBAbWV0aG9kIHNldE9uU2Nyb2xsU3R5bGVzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNldE9uU2Nyb2xsU3R5bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY3NzVmFsdWU7XG4gICAgICAgICAgICBpZiAoaGFzVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgY3NzVmFsdWUgPSB7fTtcbiAgICAgICAgICAgICAgICBjc3NWYWx1ZVt0cmFuc2Zvcm1dID0gXCJ0cmFuc2xhdGUoMCwgXCIgKyB0aGlzLnNsaWRlclRvcCArIFwicHgpXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNzc1ZhbHVlID0ge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHRoaXMuc2xpZGVyVG9wXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyQUYpIHtcbiAgICAgICAgICAgICAgICBpZiAoY0FGICYmIHRoaXMuc2Nyb2xsUkFGKSB7XG4gICAgICAgICAgICAgICAgICAgIGNBRih0aGlzLnNjcm9sbFJBRik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsUkFGID0gckFGKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGxSQUYgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNsaWRlci5jc3MoY3NzVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIuY3NzKGNzc1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgQ3JlYXRlcyBldmVudCByZWxhdGVkIG1ldGhvZHNcbiAgICAgIEBtZXRob2QgY3JlYXRlRXZlbnRzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmNyZWF0ZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSB7XG4gICAgICAgICAgICAgICAgZG93bjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0JlaW5nRHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vZmZzZXRZID0gZS5wYWdlWSAtIF90aGlzLnNsaWRlci5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnNsaWRlci5pcyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vZmZzZXRZID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBhbmUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jLmJpbmQoTU9VU0VNT1ZFLCBfdGhpcy5ldmVudHNbRFJBR10pLmJpbmQoTU9VU0VVUCwgX3RoaXMuZXZlbnRzW1VQXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ib2R5LmJpbmQoTU9VU0VFTlRFUiwgX3RoaXMuZXZlbnRzW0VOVEVSXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgZHJhZzogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZID0gZS5wYWdlWSAtIF90aGlzLiRlbC5vZmZzZXQoKS50b3AgLSBfdGhpcy5wYW5lVG9wIC0gKF90aGlzLm9mZnNldFkgfHwgX3RoaXMuc2xpZGVySGVpZ2h0ICogMC41KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPj0gX3RoaXMubWF4U2Nyb2xsVG9wICYmIF90aGlzLnByZXZTY3JvbGxUb3AgIT09IF90aGlzLm1heFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGxlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA9PT0gMCAmJiBfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ3Njcm9sbHRvcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHVwOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzQmVpbmdEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYW5lLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRvYy51bmJpbmQoTU9VU0VNT1ZFLCBfdGhpcy5ldmVudHNbRFJBR10pLnVuYmluZChNT1VTRVVQLCBfdGhpcy5ldmVudHNbVVBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJvZHkudW5iaW5kKE1PVVNFRU5URVIsIF90aGlzLmV2ZW50c1tFTlRFUl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHJlc2l6ZTogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHBhbmVkb3duOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlclkgPSAoZS5vZmZzZXRZIHx8IGUub3JpZ2luYWxFdmVudC5sYXllclkpIC0gKF90aGlzLnNsaWRlckhlaWdodCAqIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmV2ZW50cy5kb3duKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHNjcm9sbDogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVTY3JvbGxWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0JlaW5nRHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSA9IF90aGlzLnNsaWRlclRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRPblNjcm9sbFN0eWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID49IF90aGlzLm1heFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnByZXZlbnRQYWdlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZlbnRTY3JvbGxpbmcoZSwgRE9XTik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSBfdGhpcy5tYXhTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ3Njcm9sbGVuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnByZXZlbnRQYWdlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZlbnRTY3JvbGxpbmcoZSwgVVApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldlNjcm9sbFRvcCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsdG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHdoZWVsOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IGUuZGVsdGEgfHwgZS53aGVlbERlbHRhIHx8IChlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEpIHx8IC1lLmRldGFpbCB8fCAoZS5vcmlnaW5hbEV2ZW50ICYmIC1lLm9yaWdpbmFsRXZlbnQuZGV0YWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlclkgKz0gLWRlbHRhIC8gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVudGVyOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0JlaW5nRHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZS5idXR0b25zIHx8IGUud2hpY2gpICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfcmVmID0gX3RoaXMuZXZlbnRzKVtVUF0uYXBwbHkoX3JlZiwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgQWRkcyBldmVudCBsaXN0ZW5lcnMgd2l0aCBqUXVlcnkuXG4gICAgICBAbWV0aG9kIGFkZEV2ZW50c1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBldmVudHM7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50cygpO1xuICAgICAgICAgICAgZXZlbnRzID0gdGhpcy5ldmVudHM7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5kaXNhYmxlUmVzaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aW4uYmluZChSRVNJWkUsIGV2ZW50c1tSRVNJWkVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci5iaW5kKE1PVVNFRE9XTiwgZXZlbnRzW0RPV05dKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUuYmluZChNT1VTRURPV04sIGV2ZW50c1tQQU5FRE9XTl0pLmJpbmQoXCJcIiArIE1PVVNFV0hFRUwgKyBcIiBcIiArIERPTVNDUk9MTCwgZXZlbnRzW1dIRUVMXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LmJpbmQoXCJcIiArIFNDUk9MTCArIFwiIFwiICsgTU9VU0VXSEVFTCArIFwiIFwiICsgRE9NU0NST0xMICsgXCIgXCIgKyBUT1VDSE1PVkUsIGV2ZW50c1tTQ1JPTExdKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgUmVtb3ZlcyBldmVudCBsaXN0ZW5lcnMgd2l0aCBqUXVlcnkuXG4gICAgICBAbWV0aG9kIHJlbW92ZUV2ZW50c1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBldmVudHM7XG4gICAgICAgICAgICBldmVudHMgPSB0aGlzLmV2ZW50cztcbiAgICAgICAgICAgIHRoaXMud2luLnVuYmluZChSRVNJWkUsIGV2ZW50c1tSRVNJWkVdKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci51bmJpbmQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUudW5iaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnVuYmluZChcIlwiICsgU0NST0xMICsgXCIgXCIgKyBNT1VTRVdIRUVMICsgXCIgXCIgKyBET01TQ1JPTEwgKyBcIiBcIiArIFRPVUNITU9WRSwgZXZlbnRzW1NDUk9MTF0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBHZW5lcmF0ZXMgbmFub1Njcm9sbGVyJ3Mgc2Nyb2xsYmFyIGFuZCBlbGVtZW50cyBmb3IgaXQuXG4gICAgICBAbWV0aG9kIGdlbmVyYXRlXG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudENsYXNzLCBjc3NSdWxlLCBjdXJyZW50UGFkZGluZywgb3B0aW9ucywgcGFuZSwgcGFuZUNsYXNzLCBzbGlkZXJDbGFzcztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICBwYW5lQ2xhc3MgPSBvcHRpb25zLnBhbmVDbGFzcywgc2xpZGVyQ2xhc3MgPSBvcHRpb25zLnNsaWRlckNsYXNzLCBjb250ZW50Q2xhc3MgPSBvcHRpb25zLmNvbnRlbnRDbGFzcztcbiAgICAgICAgICAgIGlmICghKHBhbmUgPSB0aGlzLiRlbC5jaGlsZHJlbihcIi5cIiArIHBhbmVDbGFzcykpLmxlbmd0aCAmJiAhcGFuZS5jaGlsZHJlbihcIi5cIiArIHNsaWRlckNsYXNzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQoXCI8ZGl2IGNsYXNzPVxcXCJcIiArIHBhbmVDbGFzcyArIFwiXFxcIj48ZGl2IGNsYXNzPVxcXCJcIiArIHNsaWRlckNsYXNzICsgXCJcXFwiIC8+PC9kaXY+XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYW5lID0gdGhpcy4kZWwuY2hpbGRyZW4oXCIuXCIgKyBwYW5lQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXIgPSB0aGlzLnBhbmUuZmluZChcIi5cIiArIHNsaWRlckNsYXNzKTtcbiAgICAgICAgICAgIGlmIChCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCA9PT0gMCAmJiBpc0ZGV2l0aEJ1Z2d5U2Nyb2xsYmFyKCkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFkZGluZyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1yaWdodCcpLnJlcGxhY2UoL1teMC05Ll0rL2csICcnKTtcbiAgICAgICAgICAgICAgICBjc3NSdWxlID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogLTE0LFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6ICtjdXJyZW50UGFkZGluZyArIDE0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEgpIHtcbiAgICAgICAgICAgICAgICBjc3NSdWxlID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogLUJST1dTRVJfU0NST0xMQkFSX1dJRFRIXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcygnaGFzLXNjcm9sbGJhcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNzc1J1bGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKGNzc1J1bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEBtZXRob2QgcmVzdG9yZVxuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudHMoKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgUmVzZXRzIG5hbm9TY3JvbGxlcidzIHNjcm9sbGJhci5cbiAgICAgIEBtZXRob2QgcmVzZXRcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcigpO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCwgY29udGVudEhlaWdodCwgY29udGVudFBvc2l0aW9uLCBjb250ZW50U3R5bGUsIGNvbnRlbnRTdHlsZU92ZXJmbG93WSwgcGFuZUJvdHRvbSwgcGFuZUhlaWdodCwgcGFuZU91dGVySGVpZ2h0LCBwYW5lVG9wLCBwYXJlbnRNYXhIZWlnaHQsIHJpZ2h0LCBzbGlkZXJIZWlnaHQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy4kZWwuZmluZChcIi5cIiArIHRoaXMub3B0aW9ucy5wYW5lQ2xhc3MpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGUoKS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50ID0gdGhpcy5jb250ZW50O1xuICAgICAgICAgICAgY29udGVudFN0eWxlID0gY29udGVudC5zdHlsZTtcbiAgICAgICAgICAgIGNvbnRlbnRTdHlsZU92ZXJmbG93WSA9IGNvbnRlbnRTdHlsZS5vdmVyZmxvd1k7XG4gICAgICAgICAgICBpZiAoQlJPV1NFUl9JU19JRTcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy4kY29udGVudC5oZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGVudEhlaWdodCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEg7XG4gICAgICAgICAgICBwYXJlbnRNYXhIZWlnaHQgPSBwYXJzZUludCh0aGlzLiRlbC5jc3MoXCJtYXgtaGVpZ2h0XCIpLCAxMCk7XG4gICAgICAgICAgICBpZiAocGFyZW50TWF4SGVpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmhlaWdodChcIlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5oZWlnaHQoY29udGVudC5zY3JvbGxIZWlnaHQgPiBwYXJlbnRNYXhIZWlnaHQgPyBwYXJlbnRNYXhIZWlnaHQgOiBjb250ZW50LnNjcm9sbEhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYW5lSGVpZ2h0ID0gdGhpcy5wYW5lLm91dGVySGVpZ2h0KGZhbHNlKTtcbiAgICAgICAgICAgIHBhbmVUb3AgPSBwYXJzZUludCh0aGlzLnBhbmUuY3NzKCd0b3AnKSwgMTApO1xuICAgICAgICAgICAgcGFuZUJvdHRvbSA9IHBhcnNlSW50KHRoaXMucGFuZS5jc3MoJ2JvdHRvbScpLCAxMCk7XG4gICAgICAgICAgICBwYW5lT3V0ZXJIZWlnaHQgPSBwYW5lSGVpZ2h0ICsgcGFuZVRvcCArIHBhbmVCb3R0b207XG4gICAgICAgICAgICBzbGlkZXJIZWlnaHQgPSBNYXRoLnJvdW5kKHBhbmVPdXRlckhlaWdodCAvIGNvbnRlbnRIZWlnaHQgKiBwYW5lT3V0ZXJIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHNsaWRlckhlaWdodCA8IHRoaXMub3B0aW9ucy5zbGlkZXJNaW5IZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzbGlkZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuc2xpZGVyTWluSGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIGlmICgodGhpcy5vcHRpb25zLnNsaWRlck1heEhlaWdodCAhPSBudWxsKSAmJiBzbGlkZXJIZWlnaHQgPiB0aGlzLm9wdGlvbnMuc2xpZGVyTWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc2xpZGVySGVpZ2h0ID0gdGhpcy5vcHRpb25zLnNsaWRlck1heEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50U3R5bGVPdmVyZmxvd1kgPT09IFNDUk9MTCAmJiBjb250ZW50U3R5bGUub3ZlcmZsb3dYICE9PSBTQ1JPTEwpIHtcbiAgICAgICAgICAgICAgICBzbGlkZXJIZWlnaHQgKz0gQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1heFNsaWRlclRvcCA9IHBhbmVPdXRlckhlaWdodCAtIHNsaWRlckhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEhlaWdodCA9IGNvbnRlbnRIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnBhbmVIZWlnaHQgPSBwYW5lSGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wYW5lT3V0ZXJIZWlnaHQgPSBwYW5lT3V0ZXJIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnNsaWRlckhlaWdodCA9IHNsaWRlckhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucGFuZVRvcCA9IHBhbmVUb3A7XG4gICAgICAgICAgICB0aGlzLnNsaWRlci5oZWlnaHQoc2xpZGVySGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnNjcm9sbCgpO1xuICAgICAgICAgICAgdGhpcy5wYW5lLnNob3coKTtcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKChjb250ZW50LnNjcm9sbEhlaWdodCA9PT0gY29udGVudC5jbGllbnRIZWlnaHQpIHx8ICh0aGlzLnBhbmUub3V0ZXJIZWlnaHQodHJ1ZSkgPj0gY29udGVudC5zY3JvbGxIZWlnaHQgJiYgY29udGVudFN0eWxlT3ZlcmZsb3dZICE9PSBTQ1JPTEwpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWwuY2xpZW50SGVpZ2h0ID09PSBjb250ZW50LnNjcm9sbEhlaWdodCAmJiBjb250ZW50U3R5bGVPdmVyZmxvd1kgPT09IFNDUk9MTCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLmhpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYW5lLmNzcyh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogKHRoaXMub3B0aW9ucy5hbHdheXNWaXNpYmxlID8gMSA6ICcnKSxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAodGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGUgPyAndmlzaWJsZScgOiAnJylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGVudFBvc2l0aW9uID0gdGhpcy4kY29udGVudC5jc3MoJ3Bvc2l0aW9uJyk7XG4gICAgICAgICAgICBpZiAoY29udGVudFBvc2l0aW9uID09PSAnc3RhdGljJyB8fCBjb250ZW50UG9zaXRpb24gPT09ICdyZWxhdGl2ZScpIHtcbiAgICAgICAgICAgICAgICByaWdodCA9IHBhcnNlSW50KHRoaXMuJGNvbnRlbnQuY3NzKCdyaWdodCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKHJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiByaWdodFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgQG1ldGhvZCBzY3JvbGxcbiAgICAgIEBwcml2YXRlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGw6ICd0b3AnIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zbGlkZXJZID0gTWF0aC5tYXgoMCwgdGhpcy5zbGlkZXJZKTtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyWSA9IE1hdGgubWluKHRoaXMubWF4U2xpZGVyVG9wLCB0aGlzLnNsaWRlclkpO1xuICAgICAgICAgICAgdGhpcy4kY29udGVudC5zY3JvbGxUb3AodGhpcy5tYXhTY3JvbGxUb3AgKiB0aGlzLnNsaWRlclkgLyB0aGlzLm1heFNsaWRlclRvcCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9uU2Nyb2xsU3R5bGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgU2Nyb2xsIGF0IHRoZSBib3R0b20gd2l0aCBhbiBvZmZzZXQgdmFsdWVcbiAgICAgIEBtZXRob2Qgc2Nyb2xsQm90dG9tXG4gICAgICBAcGFyYW0gb2Zmc2V0WSB7TnVtYmVyfVxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsQm90dG9tOiB2YWx1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGxCb3R0b20gPSBmdW5jdGlvbihvZmZzZXRZKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnNjcm9sbFRvcCh0aGlzLmNvbnRlbnRIZWlnaHQgLSB0aGlzLiRjb250ZW50LmhlaWdodCgpIC0gb2Zmc2V0WSkudHJpZ2dlcihNT1VTRVdIRUVMKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpLnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBTY3JvbGwgYXQgdGhlIHRvcCB3aXRoIGFuIG9mZnNldCB2YWx1ZVxuICAgICAgQG1ldGhvZCBzY3JvbGxUb3BcbiAgICAgIEBwYXJhbSBvZmZzZXRZIHtOdW1iZXJ9XG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGxUb3A6IHZhbHVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbFRvcCA9IGZ1bmN0aW9uKG9mZnNldFkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuc2Nyb2xsVG9wKCtvZmZzZXRZKS50cmlnZ2VyKE1PVVNFV0hFRUwpO1xuICAgICAgICAgICAgdGhpcy5zdG9wKCkucmVzdG9yZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFNjcm9sbCB0byBhbiBlbGVtZW50XG4gICAgICBAbWV0aG9kIHNjcm9sbFRvXG4gICAgICBAcGFyYW0gbm9kZSB7Tm9kZX0gQSBub2RlIHRvIHNjcm9sbCB0by5cbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbFRvOiAkKCcjYV9ub2RlJykgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsVG8gPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCh0aGlzLiRlbC5maW5kKG5vZGUpLmdldCgwKS5vZmZzZXRUb3ApO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFRvIHN0b3AgdGhlIG9wZXJhdGlvbi5cbiAgICAgIFRoaXMgb3B0aW9uIHdpbGwgdGVsbCB0aGUgcGx1Z2luIHRvIGRpc2FibGUgYWxsIGV2ZW50IGJpbmRpbmdzIGFuZCBoaWRlIHRoZSBnYWRnZXQgc2Nyb2xsYmFyIGZyb20gdGhlIFVJLlxuICAgICAgQG1ldGhvZCBzdG9wXG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzdG9wOiB0cnVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjQUYgJiYgdGhpcy5zY3JvbGxSQUYpIHtcbiAgICAgICAgICAgICAgICBjQUYodGhpcy5zY3JvbGxSQUYpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsUkFGID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50cygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgRGVzdHJveXMgbmFub1Njcm9sbGVyIGFuZCByZXN0b3JlcyBicm93c2VyJ3MgbmF0aXZlIHNjcm9sbGJhci5cbiAgICAgIEBtZXRob2QgZGVzdHJveVxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgZGVzdHJveTogdHJ1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZyAmJiB0aGlzLnBhbmUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEJST1dTRVJfSVNfSUU3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5oZWlnaHQoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJGVsLmhhc0NsYXNzKCdoYXMtc2Nyb2xsYmFyJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcygnaGFzLXNjcm9sbGJhcicpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgVG8gZmxhc2ggdGhlIHNjcm9sbGJhciBnYWRnZXQgZm9yIGFuIGFtb3VudCBvZiB0aW1lIGRlZmluZWQgaW4gcGx1Z2luIHNldHRpbmdzIChkZWZhdWx0cyB0byAxLDVzKS5cbiAgICAgIFVzZWZ1bCBpZiB5b3Ugd2FudCB0byBzaG93IHRoZSB1c2VyIChlLmcuIG9uIHBhZ2Vsb2FkKSB0aGF0IHRoZXJlIGlzIG1vcmUgY29udGVudCB3YWl0aW5nIGZvciBoaW0uXG4gICAgICBAbWV0aG9kIGZsYXNoXG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBmbGFzaDogdHJ1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5mbGFzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5wYW5lLmFkZENsYXNzKCdmbGFzaGVkJyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFuZS5yZW1vdmVDbGFzcygnZmxhc2hlZCcpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSh0aGlzKSwgdGhpcy5vcHRpb25zLmZsYXNoRGVsYXkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIE5hbm9TY3JvbGw7XG5cbiAgICB9KSgpO1xuICAgICQuZm4ubmFub1Njcm9sbGVyID0gZnVuY3Rpb24oc2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zLCBzY3JvbGxiYXI7XG4gICAgICAgICAgICBpZiAoIShzY3JvbGxiYXIgPSB0aGlzLm5hbm9zY3JvbGxlcikpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5uYW5vc2Nyb2xsZXIgPSBzY3JvbGxiYXIgPSBuZXcgTmFub1Njcm9sbCh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncyAmJiB0eXBlb2Ygc2V0dGluZ3MgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAkLmV4dGVuZChzY3JvbGxiYXIub3B0aW9ucywgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGxCb3R0b20gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbEJvdHRvbShzZXR0aW5ncy5zY3JvbGxCb3R0b20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsVG9wICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUb3Aoc2V0dGluZ3Muc2Nyb2xsVG9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbFRvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsVG8oc2V0dGluZ3Muc2Nyb2xsVG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbEJvdHRvbSgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGwgJiYgc2V0dGluZ3Muc2Nyb2xsIGluc3RhbmNlb2YgJCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvKHNldHRpbmdzLnNjcm9sbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuZGVzdHJveSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmZsYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuZmxhc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnJlc2V0KCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJC5mbi5uYW5vU2Nyb2xsZXIuQ29uc3RydWN0b3IgPSBOYW5vU2Nyb2xsO1xufSkoanExMTEsIHdpbmRvdywgZG9jdW1lbnQpOyIsIi8qXG4gKiBAZmlsZU92ZXJ2aWV3IFRvdWNoU3dpcGUgLSBqUXVlcnkgUGx1Z2luXG4gKiBAdmVyc2lvbiAxLjYuNlxuICpcbiAqIEBhdXRob3IgTWF0dCBCcnlzb24gaHR0cDovL3d3dy5naXRodWIuY29tL21hdHRicnlzb25cbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21hdHRicnlzb24vVG91Y2hTd2lwZS1KcXVlcnktUGx1Z2luXG4gKiBAc2VlIGh0dHA6Ly9sYWJzLnNraW5rZXJzLmNvbS90b3VjaFN3aXBlL1xuICogQHNlZSBodHRwOi8vcGx1Z2lucy5qcXVlcnkuY29tL3Byb2plY3QvdG91Y2hTd2lwZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxMCBNYXR0IEJyeXNvblxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIG9yIEdQTCBWZXJzaW9uIDIgbGljZW5zZXMuXG4gKlxuICovXG5cbihmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCAmJiBkZWZpbmUuYW1kLmpxMTExKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscy5cbiAgICAgICAgZmFjdG9yeShqcTExMSk7XG4gICAgfVxufShmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvL0NvbnN0YW50c1xuICAgIHZhciBMRUZUID0gXCJsZWZ0XCIsXG4gICAgICAgIFJJR0hUID0gXCJyaWdodFwiLFxuICAgICAgICBVUCA9IFwidXBcIixcbiAgICAgICAgRE9XTiA9IFwiZG93blwiLFxuICAgICAgICBJTiA9IFwiaW5cIixcbiAgICAgICAgT1VUID0gXCJvdXRcIixcblxuICAgICAgICBOT05FID0gXCJub25lXCIsXG4gICAgICAgIEFVVE8gPSBcImF1dG9cIixcblxuICAgICAgICBTV0lQRSA9IFwic3dpcGVcIixcbiAgICAgICAgUElOQ0ggPSBcInBpbmNoXCIsXG4gICAgICAgIFRBUCA9IFwidGFwXCIsXG4gICAgICAgIERPVUJMRV9UQVAgPSBcImRvdWJsZXRhcFwiLFxuICAgICAgICBMT05HX1RBUCA9IFwibG9uZ3RhcFwiLFxuICAgICAgICBIT0xEID0gXCJob2xkXCIsXG5cbiAgICAgICAgSE9SSVpPTlRBTCA9IFwiaG9yaXpvbnRhbFwiLFxuICAgICAgICBWRVJUSUNBTCA9IFwidmVydGljYWxcIixcblxuICAgICAgICBBTExfRklOR0VSUyA9IFwiYWxsXCIsXG5cbiAgICAgICAgRE9VQkxFX1RBUF9USFJFU0hPTEQgPSAxMCxcblxuICAgICAgICBQSEFTRV9TVEFSVCA9IFwic3RhcnRcIixcbiAgICAgICAgUEhBU0VfTU9WRSA9IFwibW92ZVwiLFxuICAgICAgICBQSEFTRV9FTkQgPSBcImVuZFwiLFxuICAgICAgICBQSEFTRV9DQU5DRUwgPSBcImNhbmNlbFwiLFxuXG4gICAgICAgIFNVUFBPUlRTX1RPVUNIID0gJ29udG91Y2hzdGFydCcgaW4gd2luZG93LFxuXG4gICAgICAgIFNVUFBPUlRTX1BPSU5URVJfSUUxMCA9IHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCAmJiAhd2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCxcblxuICAgICAgICBTVVBQT1JUU19QT0lOVEVSID0gd2luZG93Lm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCB8fCB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQsXG5cbiAgICAgICAgUExVR0lOX05TID0gJ1RvdWNoU3dpcGUnO1xuXG5cblxuICAgIC8qKlxuXHQqIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24sIGFuZCBhdmFpbGFibGUgb3B0aW9ucyB0byBjb25maWd1cmUgdG91Y2ggc3dpcGUgd2l0aC5cblx0KiBZb3UgY2FuIHNldCB0aGUgZGVmYXVsdCB2YWx1ZXMgYnkgdXBkYXRpbmcgYW55IG9mIHRoZSBwcm9wZXJ0aWVzIHByaW9yIHRvIGluc3RhbnRpYXRpb24uXG5cdCogQG5hbWUgJC5mbi5zd2lwZS5kZWZhdWx0c1xuXHQqIEBuYW1lc3BhY2Vcblx0KiBAcHJvcGVydHkge2ludH0gW2ZpbmdlcnM9MV0gVGhlIG51bWJlciBvZiBmaW5nZXJzIHRvIGRldGVjdCBpbiBhIHN3aXBlLiBBbnkgc3dpcGVzIHRoYXQgZG8gbm90IG1lZXQgdGhpcyByZXF1aXJlbWVudCB3aWxsIE5PVCB0cmlnZ2VyIHN3aXBlIGhhbmRsZXJzLlxuXHQqIEBwcm9wZXJ0eSB7aW50fSBbdGhyZXNob2xkPTc1XSBUaGUgbnVtYmVyIG9mIHBpeGVscyB0aGF0IHRoZSB1c2VyIG11c3QgbW92ZSB0aGVpciBmaW5nZXIgYnkgYmVmb3JlIGl0IGlzIGNvbnNpZGVyZWQgYSBzd2lwZS5cblx0KiBAcHJvcGVydHkge2ludH0gW2NhbmNlbFRocmVzaG9sZD1udWxsXSBUaGUgbnVtYmVyIG9mIHBpeGVscyB0aGF0IHRoZSB1c2VyIG11c3QgbW92ZSB0aGVpciBmaW5nZXIgYmFjayBmcm9tIHRoZSBvcmlnaW5hbCBzd2lwZSBkaXJlY3Rpb24gdG8gY2FuY2VsIHRoZSBnZXN0dXJlLlxuXHQqIEBwcm9wZXJ0eSB7aW50fSBbcGluY2hUaHJlc2hvbGQ9MjBdIFRoZSBudW1iZXIgb2YgcGl4ZWxzIHRoYXQgdGhlIHVzZXIgbXVzdCBwaW5jaCB0aGVpciBmaW5nZXIgYnkgYmVmb3JlIGl0IGlzIGNvbnNpZGVyZWQgYSBwaW5jaC5cblx0KiBAcHJvcGVydHkge2ludH0gW21heFRpbWVUaHJlc2hvbGQ9bnVsbF0gVGltZSwgaW4gbWlsbGlzZWNvbmRzLCBiZXR3ZWVuIHRvdWNoU3RhcnQgYW5kIHRvdWNoRW5kIG11c3QgTk9UIGV4Y2VlZCBpbiBvcmRlciB0byBiZSBjb25zaWRlcmVkIGEgc3dpcGUuXG5cdCogQHByb3BlcnR5IHtpbnR9IFtmaW5nZXJSZWxlYXNlVGhyZXNob2xkPTI1MF0gVGltZSBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiByZWxlYXNpbmcgbXVsdGlwbGUgZmluZ2Vycy4gIElmIDIgZmluZ2VycyBhcmUgZG93biwgYW5kIGFyZSByZWxlYXNlZCBvbmUgYWZ0ZXIgdGhlIG90aGVyLCBpZiB0aGV5IGFyZSB3aXRoaW4gdGhpcyB0aHJlc2hvbGQsIGl0IGNvdW50cyBhcyBhIHNpbXVsdGFuZW91cyByZWxlYXNlLlxuXHQqIEBwcm9wZXJ0eSB7aW50fSBbbG9uZ1RhcFRocmVzaG9sZD01MDBdIFRpbWUgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gdGFwIGFuZCByZWxlYXNlIGZvciBhIGxvbmcgdGFwXG5cdCogQHByb3BlcnR5IHtpbnR9IFtkb3VibGVUYXBUaHJlc2hvbGQ9MjAwXSBUaW1lIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIDIgdGFwcyB0byBjb3VudCBhcyBhIGRvdWJsZSB0YXBcblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbc3dpcGU9bnVsbF0gQSBoYW5kbGVyIHRvIGNhdGNoIGFsbCBzd2lwZXMuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpzd2lwZX1cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbc3dpcGVMZWZ0PW51bGxdIEEgaGFuZGxlciB0aGF0IGlzIHRyaWdnZXJlZCBmb3IgXCJsZWZ0XCIgc3dpcGVzLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6c3dpcGVMZWZ0fVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtzd2lwZVJpZ2h0PW51bGxdIEEgaGFuZGxlciB0aGF0IGlzIHRyaWdnZXJlZCBmb3IgXCJyaWdodFwiIHN3aXBlcy4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnN3aXBlUmlnaHR9XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3N3aXBlVXA9bnVsbF0gQSBoYW5kbGVyIHRoYXQgaXMgdHJpZ2dlcmVkIGZvciBcInVwXCIgc3dpcGVzLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6c3dpcGVVcH1cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbc3dpcGVEb3duPW51bGxdIEEgaGFuZGxlciB0aGF0IGlzIHRyaWdnZXJlZCBmb3IgXCJkb3duXCIgc3dpcGVzLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6c3dpcGVEb3dufVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtzd2lwZVN0YXR1cz1udWxsXSBBIGhhbmRsZXIgdHJpZ2dlcmVkIGZvciBldmVyeSBwaGFzZSBvZiB0aGUgc3dpcGUuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpzd2lwZVN0YXR1c31cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbcGluY2hJbj1udWxsXSBBIGhhbmRsZXIgdHJpZ2dlcmVkIGZvciBwaW5jaCBpbiBldmVudHMuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpwaW5jaElufVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtwaW5jaE91dD1udWxsXSBBIGhhbmRsZXIgdHJpZ2dlcmVkIGZvciBwaW5jaCBvdXQgZXZlbnRzLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6cGluY2hPdXR9XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3BpbmNoU3RhdHVzPW51bGxdIEEgaGFuZGxlciB0cmlnZ2VyZWQgZm9yIGV2ZXJ5IHBoYXNlIG9mIGEgcGluY2guIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpwaW5jaFN0YXR1c31cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbdGFwPW51bGxdIEEgaGFuZGxlciB0cmlnZ2VyZWQgd2hlbiBhIHVzZXIganVzdCB0YXBzIG9uIHRoZSBpdGVtLCByYXRoZXIgdGhhbiBzd2lwZXMgaXQuIElmIHRoZXkgZG8gbm90IG1vdmUsIHRhcCBpcyB0cmlnZ2VyZWQsIGlmIHRoZXkgZG8gbW92ZSwgaXQgaXMgbm90LlxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtkb3VibGVUYXA9bnVsbF0gQSBoYW5kbGVyIHRyaWdnZXJlZCB3aGVuIGEgdXNlciBkb3VibGUgdGFwcyBvbiB0aGUgaXRlbS4gVGhlIGRlbGF5IGJldHdlZW4gdGFwcyBjYW4gYmUgc2V0IHdpdGggdGhlIGRvdWJsZVRhcFRocmVzaG9sZCBwcm9wZXJ0eS4gU2VlIHtAbGluayAkLmZuLnN3aXBlLmRlZmF1bHRzI2RvdWJsZVRhcFRocmVzaG9sZH1cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbbG9uZ1RhcD1udWxsXSBBIGhhbmRsZXIgdHJpZ2dlcmVkIHdoZW4gYSB1c2VyIGxvbmcgdGFwcyBvbiB0aGUgaXRlbS4gVGhlIGRlbGF5IGJldHdlZW4gc3RhcnQgYW5kIGVuZCBjYW4gYmUgc2V0IHdpdGggdGhlIGxvbmdUYXBUaHJlc2hvbGQgcHJvcGVydHkuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZS5kZWZhdWx0cyNsb25nVGFwVGhyZXNob2xkfVxuXHQqIEBwcm9wZXJ0eSAoZnVuY3Rpb24pIFtob2xkPW51bGxdIEEgaGFuZGxlciB0cmlnZ2VyZWQgd2hlbiBhIHVzZXIgcmVhY2hlcyBsb25nVGFwVGhyZXNob2xkIG9uIHRoZSBpdGVtLiBTZWUge0BsaW5rICQuZm4uc3dpcGUuZGVmYXVsdHMjbG9uZ1RhcFRocmVzaG9sZH1cblx0KiBAcHJvcGVydHkge2Jvb2xlYW59IFt0cmlnZ2VyT25Ub3VjaEVuZD10cnVlXSBJZiB0cnVlLCB0aGUgc3dpcGUgZXZlbnRzIGFyZSB0cmlnZ2VyZWQgd2hlbiB0aGUgdG91Y2ggZW5kIGV2ZW50IGlzIHJlY2VpdmVkICh1c2VyIHJlbGVhc2VzIGZpbmdlcikuICBJZiBmYWxzZSwgaXQgd2lsbCBiZSB0cmlnZ2VyZWQgb24gcmVhY2hpbmcgdGhlIHRocmVzaG9sZCwgYW5kIHRoZW4gY2FuY2VsIHRoZSB0b3VjaCBldmVudCBhdXRvbWF0aWNhbGx5LlxuXHQqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3RyaWdnZXJPblRvdWNoTGVhdmU9ZmFsc2VdIElmIHRydWUsIHRoZW4gd2hlbiB0aGUgdXNlciBsZWF2ZXMgdGhlIHN3aXBlIG9iamVjdCwgdGhlIHN3aXBlIHdpbGwgZW5kIGFuZCB0cmlnZ2VyIGFwcHJvcHJpYXRlIGhhbmRsZXJzLlxuXHQqIEBwcm9wZXJ0eSB7c3RyaW5nfHVuZGVmaW5lZH0gW2FsbG93UGFnZVNjcm9sbD0nYXV0byddIEhvdyB0aGUgYnJvd3NlciBoYW5kbGVzIHBhZ2Ugc2Nyb2xscyB3aGVuIHRoZSB1c2VyIGlzIHN3aXBpbmcgb24gYSB0b3VjaFN3aXBlIG9iamVjdC4gU2VlIHtAbGluayAkLmZuLnN3aXBlLnBhZ2VTY3JvbGx9LiAgPGJyLz48YnIvPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8Y29kZT5cImF1dG9cIjwvY29kZT4gOiBhbGwgdW5kZWZpbmVkIHN3aXBlcyB3aWxsIGNhdXNlIHRoZSBwYWdlIHRvIHNjcm9sbCBpbiB0aGF0IGRpcmVjdGlvbi4gPGJyLz5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGNvZGU+XCJub25lXCI8L2NvZGU+IDogdGhlIHBhZ2Ugd2lsbCBub3Qgc2Nyb2xsIHdoZW4gdXNlciBzd2lwZXMuIDxici8+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxjb2RlPlwiaG9yaXpvbnRhbFwiPC9jb2RlPiA6IHdpbGwgZm9yY2UgcGFnZSB0byBzY3JvbGwgb24gaG9yaXpvbnRhbCBzd2lwZXMuIDxici8+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxjb2RlPlwidmVydGljYWxcIjwvY29kZT4gOiB3aWxsIGZvcmNlIHBhZ2UgdG8gc2Nyb2xsIG9uIHZlcnRpY2FsIHN3aXBlcy4gPGJyLz5cblx0KiBAcHJvcGVydHkge2Jvb2xlYW59IFtmYWxsYmFja1RvTW91c2VFdmVudHM9dHJ1ZV0gSWYgdHJ1ZSBtb3VzZSBldmVudHMgYXJlIHVzZWQgd2hlbiBydW4gb24gYSBub24gdG91Y2ggZGV2aWNlLCBmYWxzZSB3aWxsIHN0b3Agc3dpcGVzIGJlaW5nIHRyaWdnZXJlZCBieSBtb3VzZSBldmVudHMgb24gbm9uIHRvY3VoIGRldmljZXMuXG5cdCogQHByb3BlcnR5IHtzdHJpbmd9IFtleGNsdWRlZEVsZW1lbnRzPVwiYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYSwgLm5vU3dpcGVcIl0gQSBqcXVlcnkgc2VsZWN0b3IgdGhhdCBzcGVjaWZpZXMgY2hpbGQgZWxlbWVudHMgdGhhdCBkbyBOT1QgdHJpZ2dlciBzd2lwZXMuIEJ5IGRlZmF1bHQgdGhpcyBleGNsdWRlcyBhbGwgZm9ybSwgaW5wdXQsIHNlbGVjdCwgYnV0dG9uLCBhbmNob3IgYW5kIC5ub1N3aXBlIGVsZW1lbnRzLlxuXG5cdCovXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBmaW5nZXJzOiAxLFxuICAgICAgICB0aHJlc2hvbGQ6IDc1LFxuICAgICAgICBjYW5jZWxUaHJlc2hvbGQ6IG51bGwsXG4gICAgICAgIHBpbmNoVGhyZXNob2xkOiAyMCxcbiAgICAgICAgbWF4VGltZVRocmVzaG9sZDogbnVsbCxcbiAgICAgICAgZmluZ2VyUmVsZWFzZVRocmVzaG9sZDogMjUwLFxuICAgICAgICBsb25nVGFwVGhyZXNob2xkOiA1MDAsXG4gICAgICAgIGRvdWJsZVRhcFRocmVzaG9sZDogMjAwLFxuICAgICAgICBzd2lwZTogbnVsbCxcbiAgICAgICAgc3dpcGVMZWZ0OiBudWxsLFxuICAgICAgICBzd2lwZVJpZ2h0OiBudWxsLFxuICAgICAgICBzd2lwZVVwOiBudWxsLFxuICAgICAgICBzd2lwZURvd246IG51bGwsXG4gICAgICAgIHN3aXBlU3RhdHVzOiBudWxsLFxuICAgICAgICBwaW5jaEluOiBudWxsLFxuICAgICAgICBwaW5jaE91dDogbnVsbCxcbiAgICAgICAgcGluY2hTdGF0dXM6IG51bGwsXG4gICAgICAgIGNsaWNrOiBudWxsLCAvL0RlcHJlY2F0ZWQgc2luY2UgMS42LjJcbiAgICAgICAgdGFwOiBudWxsLFxuICAgICAgICBkb3VibGVUYXA6IG51bGwsXG4gICAgICAgIGxvbmdUYXA6IG51bGwsXG4gICAgICAgIGhvbGQ6IG51bGwsXG4gICAgICAgIHRyaWdnZXJPblRvdWNoRW5kOiB0cnVlLFxuICAgICAgICB0cmlnZ2VyT25Ub3VjaExlYXZlOiBmYWxzZSxcbiAgICAgICAgYWxsb3dQYWdlU2Nyb2xsOiBcImF1dG9cIixcbiAgICAgICAgZmFsbGJhY2tUb01vdXNlRXZlbnRzOiB0cnVlLFxuICAgICAgICBleGNsdWRlZEVsZW1lbnRzOiBcImxhYmVsLCBidXR0b24sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBhLCAubm9Td2lwZVwiXG4gICAgfTtcblxuXG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIFRvdWNoU3dpcGUgYmVoYXZpb3VyIHRvIG9uZSBvciBtb3JlIGpRdWVyeSBvYmplY3RzLlxuICAgICAqIFRoZSBUb3VjaFN3aXBlIHBsdWdpbiBjYW4gYmUgaW5zdGFudGlhdGVkIHZpYSB0aGlzIG1ldGhvZCwgb3IgbWV0aG9kcyB3aXRoaW5cbiAgICAgKiBUb3VjaFN3aXBlIGNhbiBiZSBleGVjdXRlZCB2aWEgdGhpcyBtZXRob2QgYXMgcGVyIGpRdWVyeSBwbHVnaW4gYXJjaGl0ZWN0dXJlLlxuICAgICAqIEBzZWUgVG91Y2hTd2lwZVxuICAgICAqIEBjbGFzc1xuICAgICAqIEBwYXJhbSB7TWl4ZWR9IG1ldGhvZCBJZiB0aGUgY3VycmVudCBET01Ob2RlIGlzIGEgVG91Y2hTd2lwZSBvYmplY3QsIGFuZCA8Y29kZT5tZXRob2Q8L2NvZGU+IGlzIGEgVG91Y2hTd2lwZSBtZXRob2QsIHRoZW5cbiAgICAgKiB0aGUgPGNvZGU+bWV0aG9kPC9jb2RlPiBpcyBleGVjdXRlZCwgYW5kIGFueSBmb2xsb3dpbmcgYXJndW1lbnRzIGFyZSBwYXNzZWQgdG8gdGhlIFRvdWNoU3dpcGUgbWV0aG9kLlxuICAgICAqIElmIDxjb2RlPm1ldGhvZDwvY29kZT4gaXMgYW4gb2JqZWN0LCB0aGVuIHRoZSBUb3VjaFN3aXBlIGNsYXNzIGlzIGluc3RhbnRpYXRlZCBvbiB0aGUgY3VycmVudCBET01Ob2RlLCBwYXNzaW5nIHRoZVxuICAgICAqIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBkZWZpbmVkIGluIHRoZSBvYmplY3QuIFNlZSBUb3VjaFN3aXBlXG4gICAgICpcbiAgICAgKi9cbiAgICAkLmZuLnN3aXBlID0gZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgICBwbHVnaW4gPSAkdGhpcy5kYXRhKFBMVUdJTl9OUyk7XG5cbiAgICAgICAgLy9DaGVjayBpZiB3ZSBhcmUgYWxyZWFkeSBpbnN0YW50aWF0ZWQgYW5kIHRyeWluZyB0byBleGVjdXRlIGEgbWV0aG9kXG4gICAgICAgIGlmIChwbHVnaW4gJiYgdHlwZW9mIG1ldGhvZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmIChwbHVnaW5bbWV0aG9kXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW5bbWV0aG9kXS5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcignTWV0aG9kICcgKyBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5zd2lwZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vRWxzZSBub3QgaW5zdGFudGlhdGVkIGFuZCB0cnlpbmcgdG8gcGFzcyBpbml0IG9iamVjdCAob3Igbm90aGluZylcbiAgICAgICAgZWxzZSBpZiAoIXBsdWdpbiAmJiAodHlwZW9mIG1ldGhvZCA9PT0gJ29iamVjdCcgfHwgIW1ldGhvZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBpbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJHRoaXM7XG4gICAgfTtcblxuICAgIC8vRXhwb3NlIG91ciBkZWZhdWx0cyBzbyBhIHVzZXIgY291bGQgb3ZlcnJpZGUgdGhlIHBsdWdpbiBkZWZhdWx0c1xuICAgICQuZm4uc3dpcGUuZGVmYXVsdHMgPSBkZWZhdWx0cztcblxuICAgIC8qKlxuICAgICAqIFRoZSBwaGFzZXMgdGhhdCBhIHRvdWNoIGV2ZW50IGdvZXMgdGhyb3VnaC4gIFRoZSA8Y29kZT5waGFzZTwvY29kZT4gaXMgcGFzc2VkIHRvIHRoZSBldmVudCBoYW5kbGVycy5cbiAgICAgKiBUaGVzZSBwcm9wZXJ0aWVzIGFyZSByZWFkIG9ubHksIGF0dGVtcHRpbmcgdG8gY2hhbmdlIHRoZW0gd2lsbCBub3QgYWx0ZXIgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIGV2ZW50IGhhbmRsZXJzLlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gUEhBU0VfU1RBUlQgQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgc3RhcnQgcGhhc2Ugb2YgdGhlIHRvdWNoIGV2ZW50LiBWYWx1ZSBpcyA8Y29kZT5cInN0YXJ0XCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBQSEFTRV9NT1ZFIENvbnN0YW50IGluZGljYXRpbmcgdGhlIG1vdmUgcGhhc2Ugb2YgdGhlIHRvdWNoIGV2ZW50LiBWYWx1ZSBpcyA8Y29kZT5cIm1vdmVcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFBIQVNFX0VORCBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSBlbmQgcGhhc2Ugb2YgdGhlIHRvdWNoIGV2ZW50LiBWYWx1ZSBpcyA8Y29kZT5cImVuZFwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gUEhBU0VfQ0FOQ0VMIENvbnN0YW50IGluZGljYXRpbmcgdGhlIGNhbmNlbCBwaGFzZSBvZiB0aGUgdG91Y2ggZXZlbnQuIFZhbHVlIGlzIDxjb2RlPlwiY2FuY2VsXCI8L2NvZGU+LlxuICAgICAqL1xuICAgICQuZm4uc3dpcGUucGhhc2VzID0ge1xuICAgICAgICBQSEFTRV9TVEFSVDogUEhBU0VfU1RBUlQsXG4gICAgICAgIFBIQVNFX01PVkU6IFBIQVNFX01PVkUsXG4gICAgICAgIFBIQVNFX0VORDogUEhBU0VfRU5ELFxuICAgICAgICBQSEFTRV9DQU5DRUw6IFBIQVNFX0NBTkNFTFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGlyZWN0aW9uIGNvbnN0YW50cyB0aGF0IGFyZSBwYXNzZWQgdG8gdGhlIGV2ZW50IGhhbmRsZXJzLlxuICAgICAqIFRoZXNlIHByb3BlcnRpZXMgYXJlIHJlYWQgb25seSwgYXR0ZW1wdGluZyB0byBjaGFuZ2UgdGhlbSB3aWxsIG5vdCBhbHRlciB0aGUgdmFsdWVzIHBhc3NlZCB0byB0aGUgZXZlbnQgaGFuZGxlcnMuXG4gICAgICogQG5hbWVzcGFjZVxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBMRUZUIENvbnN0YW50IGluZGljYXRpbmcgdGhlIGxlZnQgZGlyZWN0aW9uLiBWYWx1ZSBpcyA8Y29kZT5cImxlZnRcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFJJR0hUIENvbnN0YW50IGluZGljYXRpbmcgdGhlIHJpZ2h0IGRpcmVjdGlvbi4gVmFsdWUgaXMgPGNvZGU+XCJyaWdodFwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gVVAgQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgdXAgZGlyZWN0aW9uLiBWYWx1ZSBpcyA8Y29kZT5cInVwXCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBET1dOIENvbnN0YW50IGluZGljYXRpbmcgdGhlIGRvd24gZGlyZWN0aW9uLiBWYWx1ZSBpcyA8Y29kZT5cImNhbmNlbFwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gSU4gQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgaW4gZGlyZWN0aW9uLiBWYWx1ZSBpcyA8Y29kZT5cImluXCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBPVVQgQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgb3V0IGRpcmVjdGlvbi4gVmFsdWUgaXMgPGNvZGU+XCJvdXRcIjwvY29kZT4uXG4gICAgICovXG4gICAgJC5mbi5zd2lwZS5kaXJlY3Rpb25zID0ge1xuICAgICAgICBMRUZUOiBMRUZULFxuICAgICAgICBSSUdIVDogUklHSFQsXG4gICAgICAgIFVQOiBVUCxcbiAgICAgICAgRE9XTjogRE9XTixcbiAgICAgICAgSU46IElOLFxuICAgICAgICBPVVQ6IE9VVFxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcGFnZSBzY3JvbGwgY29uc3RhbnRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gc2V0IHRoZSB2YWx1ZSBvZiA8Y29kZT5hbGxvd1BhZ2VTY3JvbGw8L2NvZGU+IG9wdGlvblxuICAgICAqIFRoZXNlIHByb3BlcnRpZXMgYXJlIHJlYWQgb25seVxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAc2VlICQuZm4uc3dpcGUuZGVmYXVsdHMjYWxsb3dQYWdlU2Nyb2xsXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IE5PTkUgQ29uc3RhbnQgaW5kaWNhdGluZyBubyBwYWdlIHNjcm9sbGluZyBpcyBhbGxvd2VkLiBWYWx1ZSBpcyA8Y29kZT5cIm5vbmVcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IEhPUklaT05UQUwgQ29uc3RhbnQgaW5kaWNhdGluZyBob3Jpem9udGFsIHBhZ2Ugc2Nyb2xsaW5nIGlzIGFsbG93ZWQuIFZhbHVlIGlzIDxjb2RlPlwiaG9yaXpvbnRhbFwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gVkVSVElDQUwgQ29uc3RhbnQgaW5kaWNhdGluZyB2ZXJ0aWNhbCBwYWdlIHNjcm9sbGluZyBpcyBhbGxvd2VkLiBWYWx1ZSBpcyA8Y29kZT5cInZlcnRpY2FsXCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBBVVRPIENvbnN0YW50IGluZGljYXRpbmcgZWl0aGVyIGhvcml6b250YWwgb3IgdmVydGljYWwgd2lsbCBiZSBhbGxvd2VkLCBkZXBlbmRpbmcgb24gdGhlIHN3aXBlIGhhbmRsZXJzIHJlZ2lzdGVyZWQuIFZhbHVlIGlzIDxjb2RlPlwiYXV0b1wiPC9jb2RlPi5cbiAgICAgKi9cbiAgICAkLmZuLnN3aXBlLnBhZ2VTY3JvbGwgPSB7XG4gICAgICAgIE5PTkU6IE5PTkUsXG4gICAgICAgIEhPUklaT05UQUw6IEhPUklaT05UQUwsXG4gICAgICAgIFZFUlRJQ0FMOiBWRVJUSUNBTCxcbiAgICAgICAgQVVUTzogQVVUT1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDb25zdGFudHMgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgZmluZ2VycyB1c2VkIGluIGEgc3dpcGUuICBUaGVzZSBhcmUgdXNlZCB0byBzZXQgYm90aCB0aGUgdmFsdWUgb2YgPGNvZGU+ZmluZ2VyczwvY29kZT4gaW4gdGhlXG4gICAgICogb3B0aW9ucyBvYmplY3QsIGFzIHdlbGwgYXMgdGhlIHZhbHVlIG9mIHRoZSA8Y29kZT5maW5nZXJzPC9jb2RlPiBldmVudCBwcm9wZXJ0eS5cbiAgICAgKiBUaGVzZSBwcm9wZXJ0aWVzIGFyZSByZWFkIG9ubHksIGF0dGVtcHRpbmcgdG8gY2hhbmdlIHRoZW0gd2lsbCBub3QgYWx0ZXIgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIGV2ZW50IGhhbmRsZXJzLlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAc2VlICQuZm4uc3dpcGUuZGVmYXVsdHMjZmluZ2Vyc1xuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBPTkUgQ29uc3RhbnQgaW5kaWNhdGluZyAxIGZpbmdlciBpcyB0byBiZSBkZXRlY3RlZCAvIHdhcyBkZXRlY3RlZC4gVmFsdWUgaXMgPGNvZGU+MTwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFRXTyBDb25zdGFudCBpbmRpY2F0aW5nIDIgZmluZ2VycyBhcmUgdG8gYmUgZGV0ZWN0ZWQgLyB3ZXJlIGRldGVjdGVkLiBWYWx1ZSBpcyA8Y29kZT4xPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gVEhSRUUgQ29uc3RhbnQgaW5kaWNhdGluZyAzIGZpbmdlciBhcmUgdG8gYmUgZGV0ZWN0ZWQgLyB3ZXJlIGRldGVjdGVkLiBWYWx1ZSBpcyA8Y29kZT4xPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gQUxMIENvbnN0YW50IGluZGljYXRpbmcgYW55IGNvbWJpbmF0aW9uIG9mIGZpbmdlciBhcmUgdG8gYmUgZGV0ZWN0ZWQuICBWYWx1ZSBpcyA8Y29kZT5cImFsbFwiPC9jb2RlPi5cbiAgICAgKi9cbiAgICAkLmZuLnN3aXBlLmZpbmdlcnMgPSB7XG4gICAgICAgIE9ORTogMSxcbiAgICAgICAgVFdPOiAyLFxuICAgICAgICBUSFJFRTogMyxcbiAgICAgICAgQUxMOiBBTExfRklOR0VSU1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXNlIHRoZSBwbHVnaW4gZm9yIGVhY2ggRE9NIGVsZW1lbnQgbWF0Y2hlZFxuICAgICAqIFRoaXMgY3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgbWFpbiBUb3VjaFN3aXBlIGNsYXNzIGZvciBlYWNoIERPTSBlbGVtZW50LCBhbmQgdGhlblxuICAgICAqIHNhdmVzIGEgcmVmZXJlbmNlIHRvIHRoYXQgaW5zdGFuY2UgaW4gdGhlIGVsZW1lbnRzIGRhdGEgcHJvcGVydHkuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7XG4gICAgICAgIC8vUHJlcCBhbmQgZXh0ZW5kIHRoZSBvcHRpb25zXG4gICAgICAgIGlmIChvcHRpb25zICYmIChvcHRpb25zLmFsbG93UGFnZVNjcm9sbCA9PT0gdW5kZWZpbmVkICYmIChvcHRpb25zLnN3aXBlICE9PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5zd2lwZVN0YXR1cyAhPT0gdW5kZWZpbmVkKSkpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsID0gTk9ORTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vQ2hlY2sgZm9yIGRlcHJlY2F0ZWQgb3B0aW9uc1xuICAgICAgICAvL0Vuc3VyZSB0aGF0IGFueSBvbGQgY2xpY2sgaGFuZGxlcnMgYXJlIGFzc2lnbmVkIHRvIHRoZSBuZXcgdGFwLCB1bmxlc3Mgd2UgaGF2ZSBhIHRhcFxuICAgICAgICBpZiAob3B0aW9ucy5jbGljayAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMudGFwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudGFwID0gb3B0aW9ucy5jbGljaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy9wYXNzIGVtcHR5IG9iamVjdCBzbyB3ZSBkb250IG1vZGlmeSB0aGUgZGVmYXVsdHNcbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLmZuLnN3aXBlLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICAvL0ZvciBlYWNoIGVsZW1lbnQgaW5zdGFudGlhdGUgdGhlIHBsdWdpblxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgLy9DaGVjayB3ZSBoYXZlbnQgYWxyZWFkeSBpbml0aWFsaXNlZCB0aGUgcGx1Z2luXG4gICAgICAgICAgICB2YXIgcGx1Z2luID0gJHRoaXMuZGF0YShQTFVHSU5fTlMpO1xuXG4gICAgICAgICAgICBpZiAoIXBsdWdpbikge1xuICAgICAgICAgICAgICAgIHBsdWdpbiA9IG5ldyBUb3VjaFN3aXBlKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICR0aGlzLmRhdGEoUExVR0lOX05TLCBwbHVnaW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWluIFRvdWNoU3dpcGUgUGx1Z2luIENsYXNzLlxuICAgICAqIERvIG5vdCB1c2UgdGhpcyB0byBjb25zdHJ1Y3QgeW91ciBUb3VjaFN3aXBlIG9iamVjdCwgdXNlIHRoZSBqUXVlcnkgcGx1Z2luIG1ldGhvZCAkLmZuLnN3aXBlKCk7IHtAbGluayAkLmZuLnN3aXBlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICogQG5hbWUgVG91Y2hTd2lwZVxuICAgICAqIEBwYXJhbSB7RE9NTm9kZX0gZWxlbWVudCBUaGUgSFRNTCBET00gb2JqZWN0IHRvIGFwcGx5IHRvIHBsdWdpbiB0b1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIFRoZSBvcHRpb25zIHRvIGNvbmZpZ3VyZSB0aGUgcGx1Z2luIHdpdGguICBAbGluayB7JC5mbi5zd2lwZS5kZWZhdWx0c31cbiAgICAgKiBAc2VlICQuZmguc3dpcGUuZGVmYXVsdHNcbiAgICAgKiBAc2VlICQuZmguc3dpcGVcbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUb3VjaFN3aXBlKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHVzZVRvdWNoRXZlbnRzID0gKFNVUFBPUlRTX1RPVUNIIHx8IFNVUFBPUlRTX1BPSU5URVIgfHwgIW9wdGlvbnMuZmFsbGJhY2tUb01vdXNlRXZlbnRzKSxcbiAgICAgICAgICAgIFNUQVJUX0VWID0gdXNlVG91Y2hFdmVudHMgPyAoU1VQUE9SVFNfUE9JTlRFUiA/IChTVVBQT1JUU19QT0lOVEVSX0lFMTAgPyAnTVNQb2ludGVyRG93bicgOiAncG9pbnRlcmRvd24nKSA6ICd0b3VjaHN0YXJ0JykgOiAnbW91c2Vkb3duJyxcbiAgICAgICAgICAgIE1PVkVfRVYgPSB1c2VUb3VjaEV2ZW50cyA/IChTVVBQT1JUU19QT0lOVEVSID8gKFNVUFBPUlRTX1BPSU5URVJfSUUxMCA/ICdNU1BvaW50ZXJNb3ZlJyA6ICdwb2ludGVybW92ZScpIDogJ3RvdWNobW92ZScpIDogJ21vdXNlbW92ZScsXG4gICAgICAgICAgICBFTkRfRVYgPSB1c2VUb3VjaEV2ZW50cyA/IChTVVBQT1JUU19QT0lOVEVSID8gKFNVUFBPUlRTX1BPSU5URVJfSUUxMCA/ICdNU1BvaW50ZXJVcCcgOiAncG9pbnRlcnVwJykgOiAndG91Y2hlbmQnKSA6ICdtb3VzZXVwJyxcbiAgICAgICAgICAgIExFQVZFX0VWID0gdXNlVG91Y2hFdmVudHMgPyBudWxsIDogJ21vdXNlbGVhdmUnLCAvL3dlIG1hbnVhbGx5IGRldGVjdCBsZWF2ZSBvbiB0b3VjaCBkZXZpY2VzLCBzbyBudWxsIGV2ZW50IGhlcmVcbiAgICAgICAgICAgIENBTkNFTF9FViA9IChTVVBQT1JUU19QT0lOVEVSID8gKFNVUFBPUlRTX1BPSU5URVJfSUUxMCA/ICdNU1BvaW50ZXJDYW5jZWwnIDogJ3BvaW50ZXJjYW5jZWwnKSA6ICd0b3VjaGNhbmNlbCcpO1xuXG5cblxuICAgICAgICAvL3RvdWNoIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gMCxcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IG51bGwsXG4gICAgICAgICAgICBkdXJhdGlvbiA9IDAsXG4gICAgICAgICAgICBzdGFydFRvdWNoZXNEaXN0YW5jZSA9IDAsXG4gICAgICAgICAgICBlbmRUb3VjaGVzRGlzdGFuY2UgPSAwLFxuICAgICAgICAgICAgcGluY2hab29tID0gMSxcbiAgICAgICAgICAgIHBpbmNoRGlzdGFuY2UgPSAwLFxuICAgICAgICAgICAgcGluY2hEaXJlY3Rpb24gPSAwLFxuICAgICAgICAgICAgbWF4aW11bXNNYXAgPSBudWxsO1xuXG5cblxuICAgICAgICAvL2pRdWVyeSB3cmFwcGVkIGVsZW1lbnQgZm9yIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgdmFyICRlbGVtZW50ID0gJChlbGVtZW50KTtcblxuICAgICAgICAvL0N1cnJlbnQgcGhhc2Ugb2YgdGggdG91Y2ggY3ljbGVcbiAgICAgICAgdmFyIHBoYXNlID0gXCJzdGFydFwiO1xuXG4gICAgICAgIC8vIHRoZSBjdXJyZW50IG51bWJlciBvZiBmaW5nZXJzIGJlaW5nIHVzZWQuXG4gICAgICAgIHZhciBmaW5nZXJDb3VudCA9IDA7XG5cbiAgICAgICAgLy90cmFjayBtb3VzZSBwb2ludHMgLyBkZWx0YVxuICAgICAgICB2YXIgZmluZ2VyRGF0YSA9IG51bGw7XG5cbiAgICAgICAgLy90cmFjayB0aW1lc1xuICAgICAgICB2YXIgc3RhcnRUaW1lID0gMCxcbiAgICAgICAgICAgIGVuZFRpbWUgPSAwLFxuICAgICAgICAgICAgcHJldmlvdXNUb3VjaEVuZFRpbWUgPSAwLFxuICAgICAgICAgICAgcHJldmlvdXNUb3VjaEZpbmdlckNvdW50ID0gMCxcbiAgICAgICAgICAgIGRvdWJsZVRhcFN0YXJ0VGltZSA9IDA7XG5cbiAgICAgICAgLy9UaW1lb3V0c1xuICAgICAgICB2YXIgc2luZ2xlVGFwVGltZW91dCA9IG51bGwsXG4gICAgICAgICAgICBob2xkVGltZW91dCA9IG51bGw7XG5cbiAgICAgICAgLy8gQWRkIGdlc3R1cmVzIHRvIGFsbCBzd2lwYWJsZSBhcmVhcyBpZiBzdXBwb3J0ZWRcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICRlbGVtZW50LmJpbmQoU1RBUlRfRVYsIHRvdWNoU3RhcnQpO1xuICAgICAgICAgICAgJGVsZW1lbnQuYmluZChDQU5DRUxfRVYsIHRvdWNoQ2FuY2VsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgJC5lcnJvcignZXZlbnRzIG5vdCBzdXBwb3J0ZWQgJyArIFNUQVJUX0VWICsgJywnICsgQ0FOQ0VMX0VWICsgJyBvbiBqUXVlcnkuc3dpcGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vUHVibGljIG1ldGhvZHNcbiAgICAgICAgLy9cblxuICAgICAgICAvKipcbiAgICAgICAgICogcmUtZW5hYmxlcyB0aGUgc3dpcGUgcGx1Z2luIHdpdGggdGhlIHByZXZpb3VzIGNvbmZpZ3VyYXRpb25cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBuYW1lICQuZm4uc3dpcGUjZW5hYmxlXG4gICAgICAgICAqIEByZXR1cm4ge0RPTU5vZGV9IFRoZSBEb20gZWxlbWVudCB0aGF0IHdhcyByZWdpc3RlcmVkIHdpdGggVG91Y2hTd2lwZVxuICAgICAgICAgKiBAZXhhbXBsZSAkKFwiI2VsZW1lbnRcIikuc3dpcGUoXCJlbmFibGVcIik7XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVuYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGVsZW1lbnQuYmluZChTVEFSVF9FViwgdG91Y2hTdGFydCk7XG4gICAgICAgICAgICAkZWxlbWVudC5iaW5kKENBTkNFTF9FViwgdG91Y2hDYW5jZWwpO1xuICAgICAgICAgICAgcmV0dXJuICRlbGVtZW50O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkaXNhYmxlcyB0aGUgc3dpcGUgcGx1Z2luXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAbmFtZSAkLmZuLnN3aXBlI2Rpc2FibGVcbiAgICAgICAgICogQHJldHVybiB7RE9NTm9kZX0gVGhlIERvbSBlbGVtZW50IHRoYXQgaXMgbm93IHJlZ2lzdGVyZWQgd2l0aCBUb3VjaFN3aXBlXG4gICAgICAgICAqIEBleGFtcGxlICQoXCIjZWxlbWVudFwiKS5zd2lwZShcImRpc2FibGVcIik7XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgICAgICAgcmV0dXJuICRlbGVtZW50O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXN0cm95IHRoZSBzd2lwZSBwbHVnaW4gY29tcGxldGVseS4gVG8gdXNlIGFueSBzd2lwZSBtZXRob2RzLCB5b3UgbXVzdCByZSBpbml0aWFsaXNlIHRoZSBwbHVnaW4uXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAbmFtZSAkLmZuLnN3aXBlI2Rlc3Ryb3lcbiAgICAgICAgICogQHJldHVybiB7RE9NTm9kZX0gVGhlIERvbSBlbGVtZW50IHRoYXQgd2FzIHJlZ2lzdGVyZWQgd2l0aCBUb3VjaFN3aXBlXG4gICAgICAgICAqIEBleGFtcGxlICQoXCIjZWxlbWVudFwiKS5zd2lwZShcImRlc3Ryb3lcIik7XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVycygpO1xuICAgICAgICAgICAgJGVsZW1lbnQuZGF0YShQTFVHSU5fTlMsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuICRlbGVtZW50O1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsbG93cyBydW4gdGltZSB1cGRhdGluZyBvZiB0aGUgc3dpcGUgY29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQG5hbWUgJC5mbi5zd2lwZSNvcHRpb25cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5IFRoZSBvcHRpb24gcHJvcGVydHkgdG8gZ2V0IG9yIHNldFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW3ZhbHVlXSBUaGUgdmFsdWUgdG8gc2V0IHRoZSBwcm9wZXJ0eSB0b1xuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IElmIG9ubHkgYSBwcm9wZXJ0eSBuYW1lIGlzIHBhc3NlZCwgdGhlbiB0aGF0IHByb3BlcnR5IHZhbHVlIGlzIHJldHVybmVkLlxuICAgICAgICAgKiBAZXhhbXBsZSAkKFwiI2VsZW1lbnRcIikuc3dpcGUoXCJvcHRpb25cIiwgXCJ0aHJlc2hvbGRcIik7IC8vIHJldHVybiB0aGUgdGhyZXNob2xkXG4gICAgICAgICAqIEBleGFtcGxlICQoXCIjZWxlbWVudFwiKS5zd2lwZShcIm9wdGlvblwiLCBcInRocmVzaG9sZFwiLCAxMDApOyAvLyBzZXQgdGhlIHRocmVzaG9sZCBhZnRlciBpbml0XG4gICAgICAgICAqIEBzZWUgJC5mbi5zd2lwZS5kZWZhdWx0c1xuICAgICAgICAgKlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcHRpb24gPSBmdW5jdGlvbihwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zW3Byb3BlcnR5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnNbcHJvcGVydHldO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKCdPcHRpb24gJyArIHByb3BlcnR5ICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuc3dpcGUub3B0aW9ucycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFByaXZhdGUgbWV0aG9kc1xuICAgICAgICAvL1xuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEVWRU5UU1xuICAgICAgICAvL1xuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBmb3IgYSB0b3VjaCBzdGFydCBldmVudC5cbiAgICAgICAgICogU3RvcHMgdGhlIGRlZmF1bHQgY2xpY2sgZXZlbnQgZnJvbSB0cmlnZ2VyaW5nIGFuZCBzdG9yZXMgd2hlcmUgd2UgdG91Y2hlZFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGpxRXZlbnQgVGhlIG5vcm1hbGlzZWQgalF1ZXJ5IGV2ZW50IG9iamVjdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRvdWNoU3RhcnQoanFFdmVudCkge1xuICAgICAgICAgICAgLy9JZiB3ZSBhbHJlYWR5IGluIGEgdG91Y2ggZXZlbnQgKGEgZmluZ2VyIGFscmVhZHkgaW4gdXNlKSB0aGVuIGlnbm9yZSBzdWJzZXF1ZW50IG9uZXMuLlxuICAgICAgICAgICAgaWYgKGdldFRvdWNoSW5Qcm9ncmVzcygpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgLy9DaGVjayBpZiB0aGlzIGVsZW1lbnQgbWF0Y2hlcyBhbnkgaW4gdGhlIGV4Y2x1ZGVkIGVsZW1lbnRzIHNlbGVjdG9ycywgIG9yIGl0cyBwYXJlbnQgaXMgZXhjbHVkZWQsIGlmIHNvLCBET04nVCBzd2lwZVxuICAgICAgICAgICAgaWYgKCQoanFFdmVudC50YXJnZXQpLmNsb3Nlc3Qob3B0aW9ucy5leGNsdWRlZEVsZW1lbnRzLCAkZWxlbWVudCkubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIC8vQXMgd2UgdXNlIEpxdWVyeSBiaW5kIGZvciBldmVudHMsIHdlIG5lZWQgdG8gdGFyZ2V0IHRoZSBvcmlnaW5hbCBldmVudCBvYmplY3RcbiAgICAgICAgICAgIC8vSWYgdGhlc2UgZXZlbnRzIGFyZSBiZWluZyBwcm9ncmFtbWF0aWNhbGx5IHRyaWdnZXJlZCwgd2UgZG9uJ3QgaGF2ZSBhbiBvcmlnaW5hbCBldmVudCBvYmplY3QsIHNvIHVzZSB0aGUgSnEgb25lLlxuICAgICAgICAgICAgdmFyIGV2ZW50ID0ganFFdmVudC5vcmlnaW5hbEV2ZW50ID8ganFFdmVudC5vcmlnaW5hbEV2ZW50IDoganFFdmVudDtcblxuICAgICAgICAgICAgdmFyIHJldCxcbiAgICAgICAgICAgICAgICBldnQgPSBTVVBQT1JUU19UT1VDSCA/IGV2ZW50LnRvdWNoZXNbMF0gOiBldmVudDtcblxuICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9TVEFSVDtcblxuICAgICAgICAgICAgLy9JZiB3ZSBzdXBwb3J0IHRvdWNoZXMsIGdldCB0aGUgZmluZ2VyIGNvdW50XG4gICAgICAgICAgICBpZiAoU1VQUE9SVFNfVE9VQ0gpIHtcbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIHRvdGFsIG51bWJlciBvZiBmaW5nZXJzIHRvdWNoaW5nIHRoZSBzY3JlZW5cbiAgICAgICAgICAgICAgICBmaW5nZXJDb3VudCA9IGV2ZW50LnRvdWNoZXMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9FbHNlIHRoaXMgaXMgdGhlIGRlc2t0b3AsIHNvIHN0b3AgdGhlIGJyb3dzZXIgZnJvbSBkcmFnZ2luZyB0aGUgaW1hZ2VcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGpxRXZlbnQucHJldmVudERlZmF1bHQoKTsgLy9jYWxsIHRoaXMgb24ganEgZXZlbnQgc28gd2UgYXJlIGNyb3NzIGJyb3dzZXJcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jbGVhciB2YXJzLi5cbiAgICAgICAgICAgIGRpc3RhbmNlID0gMDtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICBwaW5jaERpcmVjdGlvbiA9IG51bGw7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IDA7XG4gICAgICAgICAgICBzdGFydFRvdWNoZXNEaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICBlbmRUb3VjaGVzRGlzdGFuY2UgPSAwO1xuICAgICAgICAgICAgcGluY2hab29tID0gMTtcbiAgICAgICAgICAgIHBpbmNoRGlzdGFuY2UgPSAwO1xuICAgICAgICAgICAgZmluZ2VyRGF0YSA9IGNyZWF0ZUFsbEZpbmdlckRhdGEoKTtcbiAgICAgICAgICAgIG1heGltdW1zTWFwID0gY3JlYXRlTWF4aW11bXNEYXRhKCk7XG4gICAgICAgICAgICBjYW5jZWxNdWx0aUZpbmdlclJlbGVhc2UoKTtcblxuXG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgbnVtYmVyIG9mIGZpbmdlcnMgaXMgd2hhdCB3ZSBhcmUgbG9va2luZyBmb3IsIG9yIHdlIGFyZSBjYXB0dXJpbmcgcGluY2hlc1xuICAgICAgICAgICAgaWYgKCFTVVBQT1JUU19UT1VDSCB8fCAoZmluZ2VyQ291bnQgPT09IG9wdGlvbnMuZmluZ2VycyB8fCBvcHRpb25zLmZpbmdlcnMgPT09IEFMTF9GSU5HRVJTKSB8fCBoYXNQaW5jaGVzKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSB0b3VjaFxuICAgICAgICAgICAgICAgIGNyZWF0ZUZpbmdlckRhdGEoMCwgZXZ0KTtcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBnZXRUaW1lU3RhbXAoKTtcblxuICAgICAgICAgICAgICAgIGlmIChmaW5nZXJDb3VudCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vS2VlcCB0cmFjayBvZiB0aGUgaW5pdGlhbCBwaW5jaCBkaXN0YW5jZSwgc28gd2UgY2FuIGNhbGN1bGF0ZSB0aGUgZGlmZiBsYXRlclxuICAgICAgICAgICAgICAgICAgICAvL1N0b3JlIHNlY29uZCBmaW5nZXIgZGF0YSBhcyBzdGFydFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVGaW5nZXJEYXRhKDEsIGV2ZW50LnRvdWNoZXNbMV0pO1xuICAgICAgICAgICAgICAgICAgICBzdGFydFRvdWNoZXNEaXN0YW5jZSA9IGVuZFRvdWNoZXNEaXN0YW5jZSA9IGNhbGN1bGF0ZVRvdWNoZXNEaXN0YW5jZShmaW5nZXJEYXRhWzBdLnN0YXJ0LCBmaW5nZXJEYXRhWzFdLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zd2lwZVN0YXR1cyB8fCBvcHRpb25zLnBpbmNoU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL0EgdG91Y2ggd2l0aCBtb3JlIG9yIGxlc3MgdGhhbiB0aGUgZmluZ2VycyB3ZSBhcmUgbG9va2luZyBmb3IsIHNvIGNhbmNlbFxuICAgICAgICAgICAgICAgIHJldCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0lmIHdlIGhhdmUgYSByZXR1cm4gdmFsdWUgZnJvbSB0aGUgdXNlcnMgaGFuZGxlciwgdGhlbiByZXR1cm4gYW5kIGNhbmNlbFxuICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBwaGFzZSA9IFBIQVNFX0NBTkNFTDtcbiAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmhvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9sZFRpbWVvdXQgPSBzZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdob2xkJywgW2V2ZW50LnRhcmdldF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMuaG9sZC5jYWxsKCRlbGVtZW50LCBldmVudCwgZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyksIG9wdGlvbnMubG9uZ1RhcFRocmVzaG9sZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2V0VG91Y2hJblByb2dyZXNzKHRydWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIGEgdG91Y2ggbW92ZSBldmVudC5cbiAgICAgICAgICogSWYgd2UgY2hhbmdlIGZpbmdlcnMgZHVyaW5nIG1vdmUsIHRoZW4gY2FuY2VsIHRoZSBldmVudFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGpxRXZlbnQgVGhlIG5vcm1hbGlzZWQgalF1ZXJ5IGV2ZW50IG9iamVjdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRvdWNoTW92ZShqcUV2ZW50KSB7XG5cbiAgICAgICAgICAgIC8vQXMgd2UgdXNlIEpxdWVyeSBiaW5kIGZvciBldmVudHMsIHdlIG5lZWQgdG8gdGFyZ2V0IHRoZSBvcmlnaW5hbCBldmVudCBvYmplY3RcbiAgICAgICAgICAgIC8vSWYgdGhlc2UgZXZlbnRzIGFyZSBiZWluZyBwcm9ncmFtbWF0aWNhbGx5IHRyaWdnZXJlZCwgd2UgZG9uJ3QgaGF2ZSBhbiBvcmlnaW5hbCBldmVudCBvYmplY3QsIHNvIHVzZSB0aGUgSnEgb25lLlxuICAgICAgICAgICAgdmFyIGV2ZW50ID0ganFFdmVudC5vcmlnaW5hbEV2ZW50ID8ganFFdmVudC5vcmlnaW5hbEV2ZW50IDoganFFdmVudDtcblxuICAgICAgICAgICAgLy9JZiB3ZSBhcmUgZW5kaW5nLCBjYW5jZWxsaW5nLCBvciB3aXRoaW4gdGhlIHRocmVzaG9sZCBvZiAyIGZpbmdlcnMgYmVpbmcgcmVsZWFzZWQsIGRvbid0IHRyYWNrIGFueXRoaW5nLi5cbiAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gUEhBU0VfRU5EIHx8IHBoYXNlID09PSBQSEFTRV9DQU5DRUwgfHwgaW5NdWx0aUZpbmdlclJlbGVhc2UoKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciByZXQsXG4gICAgICAgICAgICAgICAgZXZ0ID0gU1VQUE9SVFNfVE9VQ0ggPyBldmVudC50b3VjaGVzWzBdIDogZXZlbnQ7XG5cblxuICAgICAgICAgICAgLy9VcGRhdGUgdGhlICBmaW5nZXIgZGF0YVxuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaW5nZXIgPSB1cGRhdGVGaW5nZXJEYXRhKGV2dCk7XG4gICAgICAgICAgICBlbmRUaW1lID0gZ2V0VGltZVN0YW1wKCk7XG5cbiAgICAgICAgICAgIGlmIChTVVBQT1JUU19UT1VDSCkge1xuICAgICAgICAgICAgICAgIGZpbmdlckNvdW50ID0gZXZlbnQudG91Y2hlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmhvbGQpXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhvbGRUaW1lb3V0KTtcblxuICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9NT1ZFO1xuXG4gICAgICAgICAgICAvL0lmIHdlIGhhdmUgMiBmaW5nZXJzIGdldCBUb3VjaGVzIGRpc3RhbmNlIGFzIHdlbGxcbiAgICAgICAgICAgIGlmIChmaW5nZXJDb3VudCA9PSAyKSB7XG5cbiAgICAgICAgICAgICAgICAvL0tlZXAgdHJhY2sgb2YgdGhlIGluaXRpYWwgcGluY2ggZGlzdGFuY2UsIHNvIHdlIGNhbiBjYWxjdWxhdGUgdGhlIGRpZmYgbGF0ZXJcbiAgICAgICAgICAgICAgICAvL1dlIGRvIHRoaXMgaGVyZSBhcyB3ZWxsIGFzIHRoZSBzdGFydCBldmVudCwgaW4gY2FzZSB0aGV5IHN0YXJ0IHdpdGggMSBmaW5nZXIsIGFuZCB0aGUgcHJlc3MgMiBmaW5nZXJzXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0VG91Y2hlc0Rpc3RhbmNlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9DcmVhdGUgc2Vjb25kIGZpbmdlciBpZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lLi4uXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZpbmdlckRhdGEoMSwgZXZlbnQudG91Y2hlc1sxXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUb3VjaGVzRGlzdGFuY2UgPSBlbmRUb3VjaGVzRGlzdGFuY2UgPSBjYWxjdWxhdGVUb3VjaGVzRGlzdGFuY2UoZmluZ2VyRGF0YVswXS5zdGFydCwgZmluZ2VyRGF0YVsxXS5zdGFydCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9FbHNlIGp1c3QgdXBkYXRlIHRoZSBzZWNvbmQgZmluZ2VyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZpbmdlckRhdGEoZXZlbnQudG91Y2hlc1sxXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZW5kVG91Y2hlc0Rpc3RhbmNlID0gY2FsY3VsYXRlVG91Y2hlc0Rpc3RhbmNlKGZpbmdlckRhdGFbMF0uZW5kLCBmaW5nZXJEYXRhWzFdLmVuZCk7XG4gICAgICAgICAgICAgICAgICAgIHBpbmNoRGlyZWN0aW9uID0gY2FsY3VsYXRlUGluY2hEaXJlY3Rpb24oZmluZ2VyRGF0YVswXS5lbmQsIGZpbmdlckRhdGFbMV0uZW5kKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIHBpbmNoWm9vbSA9IGNhbGN1bGF0ZVBpbmNoWm9vbShzdGFydFRvdWNoZXNEaXN0YW5jZSwgZW5kVG91Y2hlc0Rpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICBwaW5jaERpc3RhbmNlID0gTWF0aC5hYnMoc3RhcnRUb3VjaGVzRGlzdGFuY2UgLSBlbmRUb3VjaGVzRGlzdGFuY2UpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGlmICgoZmluZ2VyQ291bnQgPT09IG9wdGlvbnMuZmluZ2VycyB8fCBvcHRpb25zLmZpbmdlcnMgPT09IEFMTF9GSU5HRVJTKSB8fCAhU1VQUE9SVFNfVE9VQ0ggfHwgaGFzUGluY2hlcygpKSB7XG5cbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBjYWxjdWxhdGVEaXJlY3Rpb24oY3VycmVudEZpbmdlci5zdGFydCwgY3VycmVudEZpbmdlci5lbmQpO1xuXG4gICAgICAgICAgICAgICAgLy9DaGVjayBpZiB3ZSBuZWVkIHRvIHByZXZlbnQgZGVmYXVsdCBldmVudCAocGFnZSBzY3JvbGwgLyBwaW5jaCB6b29tKSBvciBub3RcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZURlZmF1bHRFdmVudChqcUV2ZW50LCBkaXJlY3Rpb24pO1xuXG4gICAgICAgICAgICAgICAgLy9EaXN0YW5jZSBhbmQgZHVyYXRpb24gYXJlIGFsbCBvZmYgdGhlIG1haW4gZmluZ2VyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBjYWxjdWxhdGVEaXN0YW5jZShjdXJyZW50RmluZ2VyLnN0YXJ0LCBjdXJyZW50RmluZ2VyLmVuZCk7XG4gICAgICAgICAgICAgICAgZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgLy9DYWNoZSB0aGUgbWF4aW11bSBkaXN0YW5jZSB3ZSBtYWRlIGluIHRoaXMgZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgc2V0TWF4RGlzdGFuY2UoZGlyZWN0aW9uLCBkaXN0YW5jZSk7XG5cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN3aXBlU3RhdHVzIHx8IG9wdGlvbnMucGluY2hTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIC8vSWYgd2UgdHJpZ2dlciBlbmQgZXZlbnRzIHdoZW4gdGhyZXNob2xkIGFyZSBtZXQsIG9yIHRyaWdnZXIgZXZlbnRzIHdoZW4gdG91Y2ggbGVhdmVzIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQgfHwgb3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluQm91bmRzID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAvL0lmIGNoZWNraW5nIGlmIHdlIGxlYXZlIHRoZSBlbGVtZW50LCBydW4gdGhlIGJvdW5kcyBjaGVjayAod2UgY2FuIHVzZSB0b3VjaGxlYXZlIGFzIGl0cyBub3Qgc3VwcG9ydGVkIG9uIHdlYmtpdClcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlck9uVG91Y2hMZWF2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IGdldGJvdW5kcyh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQm91bmRzID0gaXNJbkJvdW5kcyhjdXJyZW50RmluZ2VyLmVuZCwgYm91bmRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciBlbmQgaGFuZGxlcyBhcyB3ZSBzd2lwZSBpZiB0aHJlc2hvbGRzIG1ldCBvciBpZiB3ZSBoYXZlIGxlZnQgdGhlIGVsZW1lbnQgaWYgdGhlIHVzZXIgaGFzIGFza2VkIHRvIGNoZWNrIHRoZXNlLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kICYmIGluQm91bmRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaGFzZSA9IGdldE5leHRQaGFzZShQSEFTRV9NT1ZFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL1dlIGVuZCBpZiBvdXQgb2YgYm91bmRzIGhlcmUsIHNvIHNldCBjdXJyZW50IHBoYXNlIHRvIEVORCwgYW5kIGNoZWNrIGlmIGl0cyBtb2RpZmllZFxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUgJiYgIWluQm91bmRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwaGFzZSA9IGdldE5leHRQaGFzZShQSEFTRV9FTkQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBoYXNlID09IFBIQVNFX0NBTkNFTCB8fCBwaGFzZSA9PSBQSEFTRV9FTkQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfQ0FOQ0VMO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9DQU5DRUw7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBmb3IgYSB0b3VjaCBlbmQgZXZlbnQuXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgZGlyZWN0aW9uIGFuZCB0cmlnZ2VyIGV2ZW50c1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGpxRXZlbnQgVGhlIG5vcm1hbGlzZWQgalF1ZXJ5IGV2ZW50IG9iamVjdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRvdWNoRW5kKGpxRXZlbnQpIHtcbiAgICAgICAgICAgIC8vQXMgd2UgdXNlIEpxdWVyeSBiaW5kIGZvciBldmVudHMsIHdlIG5lZWQgdG8gdGFyZ2V0IHRoZSBvcmlnaW5hbCBldmVudCBvYmplY3RcbiAgICAgICAgICAgIHZhciBldmVudCA9IGpxRXZlbnQub3JpZ2luYWxFdmVudDtcblxuXG4gICAgICAgICAgICAvL0lmIHdlIGFyZSBzdGlsbCBpbiBhIHRvdWNoIHdpdGggYW5vdGhlciBmaW5nZXIgcmV0dXJuXG4gICAgICAgICAgICAvL1RoaXMgYWxsb3dzIHVzIHRvIHdhaXQgYSBmcmFjdGlvbiBhbmQgc2VlIGlmIHRoZSBvdGhlciBmaW5nZXIgY29tZXMgdXAsIGlmIGl0IGRvZXMgd2l0aGluIHRoZSB0aHJlc2hvbGQsIHRoZW4gd2UgdHJlYXQgaXQgYXMgYSBtdWx0aSByZWxlYXNlLCBub3QgYSBzaW5nbGUgcmVsZWFzZS5cbiAgICAgICAgICAgIGlmIChTVVBQT1JUU19UT1VDSCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRNdWx0aUZpbmdlclJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0lmIGEgcHJldmlvdXMgZmluZ2VyIGhhcyBiZWVuIHJlbGVhc2VkLCBjaGVjayBob3cgbG9uZyBhZ28sIGlmIHdpdGhpbiB0aGUgdGhyZXNob2xkLCB0aGVuIGFzc3VtZSBpdCB3YXMgYSBtdWx0aWZpbmdlciByZWxlYXNlLlxuICAgICAgICAgICAgLy9UaGlzIGlzIHVzZWQgdG8gYWxsb3cgMiBmaW5nZXJzIHRvIHJlbGVhc2UgZnJhY3Rpb25hbGx5IGFmdGVyIGVhY2ggb3RoZXIsIHdoaWxzdCBtYWludGFpbmlnIHRoZSBldmVudCBhcyBjb250YWluZyAyIGZpbmdlcnMsIG5vdCAxXG4gICAgICAgICAgICBpZiAoaW5NdWx0aUZpbmdlclJlbGVhc2UoKSkge1xuICAgICAgICAgICAgICAgIGZpbmdlckNvdW50ID0gcHJldmlvdXNUb3VjaEZpbmdlckNvdW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL1NldCBlbmQgb2Ygc3dpcGVcbiAgICAgICAgICAgIGVuZFRpbWUgPSBnZXRUaW1lU3RhbXAoKTtcblxuICAgICAgICAgICAgLy9HZXQgZHVyYXRpb24gaW5jYXNlIG1vdmUgd2FzIG5ldmVyIGZpcmVkXG4gICAgICAgICAgICBkdXJhdGlvbiA9IGNhbGN1bGF0ZUR1cmF0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vSWYgd2UgdHJpZ2dlciBoYW5kbGVycyBhdCBlbmQgb2Ygc3dpcGUgT1IsIHdlIHRyaWdnZXIgZHVyaW5nLCBidXQgdGhleSBkaWRudCB0cmlnZ2VyIGFuZCB3ZSBhcmUgc3RpbGwgaW4gdGhlIG1vdmUgcGhhc2VcbiAgICAgICAgICAgIGlmIChkaWRTd2lwZUJhY2tUb0NhbmNlbCgpIHx8ICF2YWxpZGF0ZVN3aXBlRGlzdGFuY2UoKSkge1xuICAgICAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfQ0FOQ0VMO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQgfHwgKG9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQgPT0gZmFsc2UgJiYgcGhhc2UgPT09IFBIQVNFX01PVkUpKSB7XG4gICAgICAgICAgICAgICAgLy9jYWxsIHRoaXMgb24ganEgZXZlbnQgc28gd2UgYXJlIGNyb3NzIGJyb3dzZXJcbiAgICAgICAgICAgICAgICBqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9FTkQ7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vU3BlY2lhbCBjYXNlcyAtIEEgdGFwIHNob3VsZCBhbHdheXMgZmlyZSBvbiB0b3VjaCBlbmQgcmVnYXJkbGVzcyxcbiAgICAgICAgICAgIC8vU28gaGVyZSB3ZSBtYW51YWxseSB0cmlnZ2VyIHRoZSB0YXAgZW5kIGhhbmRsZXIgYnkgaXRzZWxmXG4gICAgICAgICAgICAvL1dlIGRvbnQgcnVuIHRyaWdnZXIgaGFuZGxlciBhcyBpdCB3aWxsIHJlLXRyaWdnZXIgZXZlbnRzIHRoYXQgbWF5IGhhdmUgZmlyZWQgYWxyZWFkeVxuICAgICAgICAgICAgZWxzZSBpZiAoIW9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQgJiYgaGFzVGFwKCkpIHtcbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIHBpbmNoIGV2ZW50cy4uLlxuICAgICAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfRU5EO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCwgcGhhc2UsIFRBUCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBoYXNlID09PSBQSEFTRV9NT1ZFKSB7XG4gICAgICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9DQU5DRUw7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VG91Y2hJblByb2dyZXNzKGZhbHNlKTtcblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIGEgdG91Y2ggY2FuY2VsIGV2ZW50LlxuICAgICAgICAgKiBDbGVhcnMgY3VycmVudCB2YXJzXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG91Y2hDYW5jZWwoKSB7XG4gICAgICAgICAgICAvLyByZXNldCB0aGUgdmFyaWFibGVzIGJhY2sgdG8gZGVmYXVsdCB2YWx1ZXNcbiAgICAgICAgICAgIGZpbmdlckNvdW50ID0gMDtcbiAgICAgICAgICAgIGVuZFRpbWUgPSAwO1xuICAgICAgICAgICAgc3RhcnRUaW1lID0gMDtcbiAgICAgICAgICAgIHN0YXJ0VG91Y2hlc0Rpc3RhbmNlID0gMDtcbiAgICAgICAgICAgIGVuZFRvdWNoZXNEaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICBwaW5jaFpvb20gPSAxO1xuXG4gICAgICAgICAgICAvL0lmIHdlIHdlcmUgaW4gcHJvZ3Jlc3Mgb2YgdHJhY2tpbmcgYSBwb3NzaWJsZSBtdWx0aSB0b3VjaCBlbmQsIHRoZW4gcmUgc2V0IGl0LlxuICAgICAgICAgICAgY2FuY2VsTXVsdGlGaW5nZXJSZWxlYXNlKCk7XG5cbiAgICAgICAgICAgIHNldFRvdWNoSW5Qcm9ncmVzcyhmYWxzZSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBhIHRvdWNoIGxlYXZlIGV2ZW50LlxuICAgICAgICAgKiBUaGlzIGlzIG9ubHkgdHJpZ2dlcmVkIG9uIGRlc2t0b3BzLCBpbiB0b3VjaCB3ZSB3b3JrIHRoaXMgb3V0IG1hbnVhbGx5XG4gICAgICAgICAqIGFzIHRoZSB0b3VjaGxlYXZlIGV2ZW50IGlzIG5vdCBzdXBwb3J0ZWQgaW4gd2Via2l0XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG91Y2hMZWF2ZShqcUV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBqcUV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG5cbiAgICAgICAgICAgIC8vSWYgd2UgaGF2ZSB0aGUgdHJpZ2dlciBvbiBsZWF2ZSBwcm9wZXJ0eSBzZXQuLi4uXG4gICAgICAgICAgICBpZiAob3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlKSB7XG4gICAgICAgICAgICAgICAgcGhhc2UgPSBnZXROZXh0UGhhc2UoUEhBU0VfRU5EKTtcbiAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbW92ZXMgYWxsIGxpc3RlbmVycyB0aGF0IHdlcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBwbHVnaW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcnMoKSB7XG4gICAgICAgICAgICAkZWxlbWVudC51bmJpbmQoU1RBUlRfRVYsIHRvdWNoU3RhcnQpO1xuICAgICAgICAgICAgJGVsZW1lbnQudW5iaW5kKENBTkNFTF9FViwgdG91Y2hDYW5jZWwpO1xuICAgICAgICAgICAgJGVsZW1lbnQudW5iaW5kKE1PVkVfRVYsIHRvdWNoTW92ZSk7XG4gICAgICAgICAgICAkZWxlbWVudC51bmJpbmQoRU5EX0VWLCB0b3VjaEVuZCk7XG5cbiAgICAgICAgICAgIC8vd2Ugb25seSBoYXZlIGxlYXZlIGV2ZW50cyBvbiBkZXNrdG9wLCB3ZSBtYW51YWxseSBjYWxjdWxhdGUgbGVhdmUgb24gdG91Y2ggYXMgaXRzIG5vdCBzdXBwb3J0ZWQgaW4gd2Via2l0XG4gICAgICAgICAgICBpZiAoTEVBVkVfRVYpIHtcbiAgICAgICAgICAgICAgICAkZWxlbWVudC51bmJpbmQoTEVBVkVfRVYsIHRvdWNoTGVhdmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXRUb3VjaEluUHJvZ3Jlc3MoZmFsc2UpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIGlmIHRoZSB0aW1lIGFuZCBkaXN0YW5jZSB0aHJlc2hvbGRzIGhhdmUgYmVlbiBtZXQsIGFuZCBpZiBzbyB0aGVuIHRoZSBhcHByb3ByaWF0ZSBoYW5kbGVycyBhcmUgZmlyZWQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXROZXh0UGhhc2UoY3VycmVudFBoYXNlKSB7XG5cbiAgICAgICAgICAgIHZhciBuZXh0UGhhc2UgPSBjdXJyZW50UGhhc2U7XG5cbiAgICAgICAgICAgIC8vIEVuc3VyZSB3ZSBoYXZlIHZhbGlkIHN3aXBlICh1bmRlciB0aW1lIGFuZCBvdmVyIGRpc3RhbmNlICBhbmQgY2hlY2sgaWYgd2UgYXJlIG91dCBvZiBib3VuZC4uLilcbiAgICAgICAgICAgIHZhciB2YWxpZFRpbWUgPSB2YWxpZGF0ZVN3aXBlVGltZSgpO1xuICAgICAgICAgICAgdmFyIHZhbGlkRGlzdGFuY2UgPSB2YWxpZGF0ZVN3aXBlRGlzdGFuY2UoKTtcbiAgICAgICAgICAgIHZhciBkaWRDYW5jZWwgPSBkaWRTd2lwZUJhY2tUb0NhbmNlbCgpO1xuXG4gICAgICAgICAgICAvL0lmIHdlIGhhdmUgZXhjZWVkZWQgb3VyIHRpbWUsIHRoZW4gY2FuY2VsXG4gICAgICAgICAgICBpZiAoIXZhbGlkVGltZSB8fCBkaWRDYW5jZWwpIHtcbiAgICAgICAgICAgICAgICBuZXh0UGhhc2UgPSBQSEFTRV9DQU5DRUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL0Vsc2UgaWYgd2UgYXJlIG1vdmluZywgYW5kIGhhdmUgcmVhY2hlZCBkaXN0YW5jZSB0aGVuIGVuZFxuICAgICAgICAgICAgZWxzZSBpZiAodmFsaWREaXN0YW5jZSAmJiBjdXJyZW50UGhhc2UgPT0gUEhBU0VfTU9WRSAmJiAoIW9wdGlvbnMudHJpZ2dlck9uVG91Y2hFbmQgfHwgb3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlKSkge1xuICAgICAgICAgICAgICAgIG5leHRQaGFzZSA9IFBIQVNFX0VORDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vRWxzZSBpZiB3ZSBoYXZlIGVuZGVkIGJ5IGxlYXZpbmcgYW5kIGRpZG4ndCByZWFjaCBkaXN0YW5jZSwgdGhlbiBjYW5jZWxcbiAgICAgICAgICAgIGVsc2UgaWYgKCF2YWxpZERpc3RhbmNlICYmIGN1cnJlbnRQaGFzZSA9PSBQSEFTRV9FTkQgJiYgb3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlKSB7XG4gICAgICAgICAgICAgICAgbmV4dFBoYXNlID0gUEhBU0VfQ0FOQ0VMO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV4dFBoYXNlO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlciB0aGUgcmVsZXZhbnQgZXZlbnQgaGFuZGxlclxuICAgICAgICAgKiBUaGUgaGFuZGxlcnMgYXJlIHBhc3NlZCB0aGUgb3JpZ2luYWwgZXZlbnQsIHRoZSBlbGVtZW50IHRoYXQgd2FzIHN3aXBlZCwgYW5kIGluIHRoZSBjYXNlIG9mIHRoZSBjYXRjaCBhbGwgaGFuZGxlciwgdGhlIGRpcmVjdGlvbiB0aGF0IHdhcyBzd2lwZWQsIFwibGVmdFwiLCBcInJpZ2h0XCIsIFwidXBcIiwgb3IgXCJkb3duXCJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IHRoZSBvcmlnaW5hbCBldmVudCBvYmplY3RcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHBoYXNlIHRoZSBwaGFzZSBvZiB0aGUgc3dpcGUgKHN0YXJ0LCBlbmQgY2FuY2VsIGV0Yykge0BsaW5rICQuZm4uc3dpcGUucGhhc2VzfVxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSkge1xuXG4gICAgICAgICAgICB2YXIgcmV0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAvLyBTV0lQRSBHRVNUVVJFU1xuICAgICAgICAgICAgaWYgKGRpZFN3aXBlKCkgfHwgaGFzU3dpcGVzKCkpIHsgLy9oYXNTd2lwZXMgYXMgc3RhdHVzIG5lZWRzIHRvIGZpcmUgZXZlbiBpZiBzd2lwZSBpcyBpbnZhbGlkXG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBzd2lwZSBldmVudHMuLi5cbiAgICAgICAgICAgICAgICByZXQgPSB0cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQsIHBoYXNlLCBTV0lQRSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFBJTkNIIEdFU1RVUkVTIChpZiB0aGUgYWJvdmUgZGlkbid0IGNhbmNlbClcbiAgICAgICAgICAgIGVsc2UgaWYgKChkaWRQaW5jaCgpIHx8IGhhc1BpbmNoZXMoKSkgJiYgcmV0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgcGluY2ggZXZlbnRzLi4uXG4gICAgICAgICAgICAgICAgcmV0ID0gdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LCBwaGFzZSwgUElOQ0gpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDTElDSyAvIFRBUCAoaWYgdGhlIGFib3ZlIGRpZG4ndCBjYW5jZWwpXG4gICAgICAgICAgICBpZiAoZGlkRG91YmxlVGFwKCkgJiYgcmV0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgdGFwIGV2ZW50cy4uLlxuICAgICAgICAgICAgICAgIHJldCA9IHRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCwgcGhhc2UsIERPVUJMRV9UQVApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDTElDSyAvIFRBUCAoaWYgdGhlIGFib3ZlIGRpZG4ndCBjYW5jZWwpXG4gICAgICAgICAgICBlbHNlIGlmIChkaWRMb25nVGFwKCkgJiYgcmV0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgdGFwIGV2ZW50cy4uLlxuICAgICAgICAgICAgICAgIHJldCA9IHRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCwgcGhhc2UsIExPTkdfVEFQKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ0xJQ0sgLyBUQVAgKGlmIHRoZSBhYm92ZSBkaWRuJ3QgY2FuY2VsKVxuICAgICAgICAgICAgZWxzZSBpZiAoZGlkVGFwKCkgJiYgcmV0ICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgdGFwIGV2ZW50Li5cbiAgICAgICAgICAgICAgICByZXQgPSB0cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQsIHBoYXNlLCBUQVApO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGNhbmNlbGxpbmcgdGhlIGdlc3R1cmUsIHRoZW4gbWFudWFsbHkgdHJpZ2dlciB0aGUgcmVzZXQgaGFuZGxlclxuICAgICAgICAgICAgaWYgKHBoYXNlID09PSBQSEFTRV9DQU5DRUwpIHtcbiAgICAgICAgICAgICAgICB0b3VjaENhbmNlbChldmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBlbmRpbmcgdGhlIGdlc3R1cmUsIHRoZW4gbWFudWFsbHkgdHJpZ2dlciB0aGUgcmVzZXQgaGFuZGxlciBJRiBhbGwgZmluZ2VycyBhcmUgb2ZmXG4gICAgICAgICAgICBpZiAocGhhc2UgPT09IFBIQVNFX0VORCkge1xuICAgICAgICAgICAgICAgIC8vSWYgd2Ugc3VwcG9ydCB0b3VjaCwgdGhlbiBjaGVjayB0aGF0IGFsbCBmaW5nZXJzIGFyZSBvZmYgYmVmb3JlIHdlIGNhbmNlbFxuICAgICAgICAgICAgICAgIGlmIChTVVBQT1JUU19UT1VDSCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG91Y2hDYW5jZWwoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hDYW5jZWwoZXZlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuXG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpZ2dlciB0aGUgcmVsZXZhbnQgZXZlbnQgaGFuZGxlclxuICAgICAgICAgKiBUaGUgaGFuZGxlcnMgYXJlIHBhc3NlZCB0aGUgb3JpZ2luYWwgZXZlbnQsIHRoZSBlbGVtZW50IHRoYXQgd2FzIHN3aXBlZCwgYW5kIGluIHRoZSBjYXNlIG9mIHRoZSBjYXRjaCBhbGwgaGFuZGxlciwgdGhlIGRpcmVjdGlvbiB0aGF0IHdhcyBzd2lwZWQsIFwibGVmdFwiLCBcInJpZ2h0XCIsIFwidXBcIiwgb3IgXCJkb3duXCJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50IHRoZSBvcmlnaW5hbCBldmVudCBvYmplY3RcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHBoYXNlIHRoZSBwaGFzZSBvZiB0aGUgc3dpcGUgKHN0YXJ0LCBlbmQgY2FuY2VsIGV0Yykge0BsaW5rICQuZm4uc3dpcGUucGhhc2VzfVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZ2VzdHVyZSB0aGUgZ2VzdHVyZSB0byB0cmlnZ2VyIGEgaGFuZGxlciBmb3IgOiBQSU5DSCBvciBTV0lQRSB7QGxpbmsgJC5mbi5zd2lwZS5nZXN0dXJlc31cbiAgICAgICAgICogQHJldHVybiBCb29sZWFuIEZhbHNlLCB0byBpbmRpY2F0ZSB0aGF0IHRoZSBldmVudCBzaG91bGQgc3RvcCBwcm9wYWdhdGlvbiwgb3Igdm9pZC5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQsIHBoYXNlLCBnZXN0dXJlKSB7XG5cbiAgICAgICAgICAgIHZhciByZXQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIC8vU1dJUEVTLi4uLlxuICAgICAgICAgICAgaWYgKGdlc3R1cmUgPT0gU1dJUEUpIHtcbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgc3RhdHVzIGV2ZXJ5IHRpbWUuLlxuXG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudC4uLlxuICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3N3aXBlU3RhdHVzJywgW3BoYXNlLCBkaXJlY3Rpb24gfHwgbnVsbCwgZGlzdGFuY2UgfHwgMCwgZHVyYXRpb24gfHwgMCwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zd2lwZVN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnN3aXBlU3RhdHVzLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBwaGFzZSwgZGlyZWN0aW9uIHx8IG51bGwsIGRpc3RhbmNlIHx8IDAsIGR1cmF0aW9uIHx8IDAsIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLy9JZiB0aGUgc3RhdHVzIGNhbmNlbHMsIHRoZW4gZG9udCBydW4gdGhlIHN1YnNlcXVlbnQgZXZlbnQgaGFuZGxlcnMuLlxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuXG5cblxuICAgICAgICAgICAgICAgIGlmIChwaGFzZSA9PSBQSEFTRV9FTkQgJiYgdmFsaWRhdGVTd2lwZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2F0Y2ggYWxsIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3N3aXBlJywgW2RpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vRmlyZSBjYXRjaCBhbGwgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dpcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMuc3dpcGUuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGRpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZSBzdGF0dXMgY2FuY2VscywgdGhlbiBkb250IHJ1biB0aGUgc3Vic2VxdWVudCBldmVudCBoYW5kbGVycy4uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy90cmlnZ2VyIGRpcmVjdGlvbiBzcGVjaWZpYyBldmVudCBoYW5kbGVyc1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBMRUZUOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdzd2lwZUxlZnQnLCBbZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dpcGVMZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMuc3dpcGVMZWZ0LmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBSSUdIVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignc3dpcGVSaWdodCcsIFtkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zd2lwZVJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMuc3dpcGVSaWdodC5jYWxsKCRlbGVtZW50LCBldmVudCwgZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgVVA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3N3aXBlVXAnLCBbZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dpcGVVcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnN3aXBlVXAuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGRpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIERPV046XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3N3aXBlRG93bicsIFtkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zd2lwZURvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5zd2lwZURvd24uY2FsbCgkZWxlbWVudCwgZXZlbnQsIGRpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vUElOQ0hFUy4uLi5cbiAgICAgICAgICAgIGlmIChnZXN0dXJlID09IFBJTkNIKSB7XG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3BpbmNoU3RhdHVzJywgW3BoYXNlLCBwaW5jaERpcmVjdGlvbiB8fCBudWxsLCBwaW5jaERpc3RhbmNlIHx8IDAsIGR1cmF0aW9uIHx8IDAsIGZpbmdlckNvdW50LCBwaW5jaFpvb20sIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5waW5jaFN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnBpbmNoU3RhdHVzLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBwaGFzZSwgcGluY2hEaXJlY3Rpb24gfHwgbnVsbCwgcGluY2hEaXN0YW5jZSB8fCAwLCBkdXJhdGlvbiB8fCAwLCBmaW5nZXJDb3VudCwgcGluY2hab29tLCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLy9JZiB0aGUgc3RhdHVzIGNhbmNlbHMsIHRoZW4gZG9udCBydW4gdGhlIHN1YnNlcXVlbnQgZXZlbnQgaGFuZGxlcnMuLlxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChwaGFzZSA9PSBQSEFTRV9FTkQgJiYgdmFsaWRhdGVQaW5jaCgpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwaW5jaERpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBJTjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcigncGluY2hJbicsIFtwaW5jaERpcmVjdGlvbiB8fCBudWxsLCBwaW5jaERpc3RhbmNlIHx8IDAsIGR1cmF0aW9uIHx8IDAsIGZpbmdlckNvdW50LCBwaW5jaFpvb20sIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5waW5jaEluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMucGluY2hJbi5jYWxsKCRlbGVtZW50LCBldmVudCwgcGluY2hEaXJlY3Rpb24gfHwgbnVsbCwgcGluY2hEaXN0YW5jZSB8fCAwLCBkdXJhdGlvbiB8fCAwLCBmaW5nZXJDb3VudCwgcGluY2hab29tLCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgT1VUOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdwaW5jaE91dCcsIFtwaW5jaERpcmVjdGlvbiB8fCBudWxsLCBwaW5jaERpc3RhbmNlIHx8IDAsIGR1cmF0aW9uIHx8IDAsIGZpbmdlckNvdW50LCBwaW5jaFpvb20sIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5waW5jaE91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnBpbmNoT3V0LmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBwaW5jaERpcmVjdGlvbiB8fCBudWxsLCBwaW5jaERpc3RhbmNlIHx8IDAsIGR1cmF0aW9uIHx8IDAsIGZpbmdlckNvdW50LCBwaW5jaFpvb20sIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG5cblxuXG4gICAgICAgICAgICBpZiAoZ2VzdHVyZSA9PSBUQVApIHtcbiAgICAgICAgICAgICAgICBpZiAocGhhc2UgPT09IFBIQVNFX0NBTkNFTCB8fCBwaGFzZSA9PT0gUEhBU0VfRU5EKSB7XG5cblxuICAgICAgICAgICAgICAgICAgICAvL0NhbmNlbCBhbnkgZXhpc3RpbmcgZG91YmxlIHRhcFxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2luZ2xlVGFwVGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIC8vQ2FuY2VsIGhvbGQgdGltZW91dFxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaG9sZFRpbWVvdXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vSWYgd2UgYXJlIGFsc28gbG9va2luZyBmb3IgZG91YmVsVGFwcywgd2FpdCBpbmNhc2UgdGhpcyBpcyBvbmUuLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0RvdWJsZVRhcCgpICYmICFpbkRvdWJsZVRhcCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NhY2hlIHRoZSB0aW1lIG9mIHRoaXMgdGFwXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVUYXBTdGFydFRpbWUgPSBnZXRUaW1lU3RhbXAoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Ob3cgd2FpdCBmb3IgdGhlIGRvdWJsZSB0YXAgdGltZW91dCwgYW5kIHRyaWdnZXIgdGhpcyBzaW5nbGUgdGFwXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIGl0cyBub3QgY2FuY2VsbGVkIGJ5IGEgZG91YmxlIHRhcFxuICAgICAgICAgICAgICAgICAgICAgICAgc2luZ2xlVGFwVGltZW91dCA9IHNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVUYXBTdGFydFRpbWUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCd0YXAnLCBbZXZlbnQudGFyZ2V0XSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50YXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy50YXAuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyksIG9wdGlvbnMuZG91YmxlVGFwVGhyZXNob2xkKTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlVGFwU3RhcnRUaW1lID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcigndGFwJywgW2V2ZW50LnRhcmdldF0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRhcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMudGFwLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChnZXN0dXJlID09IERPVUJMRV9UQVApIHtcbiAgICAgICAgICAgICAgICBpZiAocGhhc2UgPT09IFBIQVNFX0NBTkNFTCB8fCBwaGFzZSA9PT0gUEhBU0VfRU5EKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vQ2FuY2VsIGFueSBwZW5kaW5nIHNpbmdsZXRhcFxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2luZ2xlVGFwVGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIGRvdWJsZVRhcFN0YXJ0VGltZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdkb3VibGV0YXAnLCBbZXZlbnQudGFyZ2V0XSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5kb3VibGVUYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMuZG91YmxlVGFwLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChnZXN0dXJlID09IExPTkdfVEFQKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBoYXNlID09PSBQSEFTRV9DQU5DRUwgfHwgcGhhc2UgPT09IFBIQVNFX0VORCkge1xuICAgICAgICAgICAgICAgICAgICAvL0NhbmNlbCBhbnkgcGVuZGluZyBzaW5nbGV0YXAgKHNob3VsZG50IGJlIG9uZSlcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNpbmdsZVRhcFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICBkb3VibGVUYXBTdGFydFRpbWUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignbG9uZ3RhcCcsIFtldmVudC50YXJnZXRdKTtcblxuICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmxvbmdUYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMubG9uZ1RhcC5jYWxsKCRlbGVtZW50LCBldmVudCwgZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuXG5cblxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEdFU1RVUkUgVkFMSURBVElPTlxuICAgICAgICAvL1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgdGhlIHVzZXIgaGFzIHN3aXBlIGZhciBlbm91Z2hcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuIGlmIDxjb2RlPnRocmVzaG9sZDwvY29kZT4gaGFzIGJlZW4gc2V0LCByZXR1cm4gdHJ1ZSBpZiB0aGUgdGhyZXNob2xkIHdhcyBtZXQsIGVsc2UgZmFsc2UuXG4gICAgICAgICAqIElmIG5vIHRocmVzaG9sZCB3YXMgc2V0LCB0aGVuIHdlIHJldHVybiB0cnVlLlxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlU3dpcGVEaXN0YW5jZSgpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZCA9IHRydWU7XG4gICAgICAgICAgICAvL0lmIHdlIG1hZGUgaXQgcGFzdCB0aGUgbWluIHN3aXBlIGRpc3RhbmNlLi5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRocmVzaG9sZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhbGlkID0gZGlzdGFuY2UgPj0gb3B0aW9ucy50aHJlc2hvbGQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWxpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgdGhlIHVzZXIgaGFzIHN3aXBlZCBiYWNrIHRvIGNhbmNlbC5cbiAgICAgICAgICogQHJldHVybiBCb29sZWFuIGlmIDxjb2RlPmNhbmNlbFRocmVzaG9sZDwvY29kZT4gaGFzIGJlZW4gc2V0LCByZXR1cm4gdHJ1ZSBpZiB0aGUgY2FuY2VsVGhyZXNob2xkIHdhcyBtZXQsIGVsc2UgZmFsc2UuXG4gICAgICAgICAqIElmIG5vIGNhbmNlbFRocmVzaG9sZCB3YXMgc2V0LCB0aGVuIHdlIHJldHVybiB0cnVlLlxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRpZFN3aXBlQmFja1RvQ2FuY2VsKCkge1xuICAgICAgICAgICAgdmFyIGNhbmNlbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2FuY2VsVGhyZXNob2xkICE9PSBudWxsICYmIGRpcmVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNhbmNlbGxlZCA9IChnZXRNYXhEaXN0YW5jZShkaXJlY3Rpb24pIC0gZGlzdGFuY2UpID49IG9wdGlvbnMuY2FuY2VsVGhyZXNob2xkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2FuY2VsbGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyB0aGUgdXNlciBoYXMgcGluY2hlZCBmYXIgZW5vdWdoXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhbiBpZiA8Y29kZT5waW5jaFRocmVzaG9sZDwvY29kZT4gaGFzIGJlZW4gc2V0LCByZXR1cm4gdHJ1ZSBpZiB0aGUgdGhyZXNob2xkIHdhcyBtZXQsIGVsc2UgZmFsc2UuXG4gICAgICAgICAqIElmIG5vIHRocmVzaG9sZCB3YXMgc2V0LCB0aGVuIHdlIHJldHVybiB0cnVlLlxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlUGluY2hEaXN0YW5jZSgpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBpbmNoVGhyZXNob2xkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBpbmNoRGlzdGFuY2UgPj0gb3B0aW9ucy5waW5jaFRocmVzaG9sZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyB0aGF0IHRoZSB0aW1lIHRha2VuIHRvIHN3aXBlIG1lZXRzIHRoZSBtaW5pbXVtIC8gbWF4aW11bSByZXF1aXJlbWVudHNcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVTd2lwZVRpbWUoKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgICAgLy9JZiBubyB0aW1lIHNldCwgdGhlbiByZXR1cm4gdHJ1ZVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tYXhUaW1lVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uID49IG9wdGlvbnMubWF4VGltZVRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyBkaXJlY3Rpb24gb2YgdGhlIHN3aXBlIGFuZCB0aGUgdmFsdWUgYWxsb3dQYWdlU2Nyb2xsIHRvIHNlZSBpZiB3ZSBzaG91bGQgYWxsb3cgb3IgcHJldmVudCB0aGUgZGVmYXVsdCBiZWhhdmlvdXIgZnJvbSBvY2N1cnJpbmcuXG4gICAgICAgICAqIFRoaXMgd2lsbCBlc3NlbnRpYWxseSBhbGxvdyBwYWdlIHNjcm9sbGluZyBvciBub3Qgd2hlbiB0aGUgdXNlciBpcyBzd2lwaW5nIG9uIGEgdG91Y2hTd2lwZSBvYmplY3QuXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBqcUV2ZW50IFRoZSBub3JtYWxpc2VkIGpRdWVyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZXZlbnQgb2JqZWN0LlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlyZWN0aW9uIFRoZSBkaXJlY3Rpb24gb2YgdGhlIGV2ZW50LiBTZWUge0BsaW5rICQuZm4uc3dpcGUuZGlyZWN0aW9uc31cbiAgICAgICAgICogQHNlZSAkLmZuLnN3aXBlLmRpcmVjdGlvbnNcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZURlZmF1bHRFdmVudChqcUV2ZW50LCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsbG93UGFnZVNjcm9sbCA9PT0gTk9ORSB8fCBoYXNQaW5jaGVzKCkpIHtcbiAgICAgICAgICAgICAgICBqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBhdXRvID0gb3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwgPT09IEFVVE87XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIExFRlQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG9wdGlvbnMuc3dpcGVMZWZ0ICYmIGF1dG8pIHx8ICghYXV0byAmJiBvcHRpb25zLmFsbG93UGFnZVNjcm9sbCAhPSBIT1JJWk9OVEFMKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpxRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgUklHSFQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG9wdGlvbnMuc3dpcGVSaWdodCAmJiBhdXRvKSB8fCAoIWF1dG8gJiYgb3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwgIT0gSE9SSVpPTlRBTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIFVQOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChvcHRpb25zLnN3aXBlVXAgJiYgYXV0bykgfHwgKCFhdXRvICYmIG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsICE9IFZFUlRJQ0FMKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpxRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRE9XTjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgob3B0aW9ucy5zd2lwZURvd24gJiYgYXV0bykgfHwgKCFhdXRvICYmIG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsICE9IFZFUlRJQ0FMKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpxRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cblxuICAgICAgICAvLyBQSU5DSEVTXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgb2YgdGhlIGN1cnJlbnQgcGluY2ggbWVldHMgdGhlIHRocmVzaG9sZHNcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVQaW5jaCgpIHtcbiAgICAgICAgICAgIHZhciBoYXNDb3JyZWN0RmluZ2VyQ291bnQgPSB2YWxpZGF0ZUZpbmdlcnMoKTtcbiAgICAgICAgICAgIHZhciBoYXNFbmRQb2ludCA9IHZhbGlkYXRlRW5kUG9pbnQoKTtcbiAgICAgICAgICAgIHZhciBoYXNDb3JyZWN0RGlzdGFuY2UgPSB2YWxpZGF0ZVBpbmNoRGlzdGFuY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBoYXNDb3JyZWN0RmluZ2VyQ291bnQgJiYgaGFzRW5kUG9pbnQgJiYgaGFzQ29ycmVjdERpc3RhbmNlO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIGFueSBQaW5jaCBldmVudHMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWRcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaGFzUGluY2hlcygpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhIShvcHRpb25zLnBpbmNoU3RhdHVzIHx8IG9wdGlvbnMucGluY2hJbiB8fCBvcHRpb25zLnBpbmNoT3V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIGRldGVjdGluZyBwaW5jaGVzLCBhbmQgaGF2ZSBvbmVcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGlkUGluY2goKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEodmFsaWRhdGVQaW5jaCgpICYmIGhhc1BpbmNoZXMoKSk7XG4gICAgICAgIH1cblxuXG5cblxuICAgICAgICAvLyBTV0lQRVNcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY3VycmVudCBzd2lwZSBtZWV0cyB0aGUgdGhyZXNob2xkc1xuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVN3aXBlKCkge1xuICAgICAgICAgICAgLy9DaGVjayB2YWxpZGl0eSBvZiBzd2lwZVxuICAgICAgICAgICAgdmFyIGhhc1ZhbGlkVGltZSA9IHZhbGlkYXRlU3dpcGVUaW1lKCk7XG4gICAgICAgICAgICB2YXIgaGFzVmFsaWREaXN0YW5jZSA9IHZhbGlkYXRlU3dpcGVEaXN0YW5jZSgpO1xuICAgICAgICAgICAgdmFyIGhhc0NvcnJlY3RGaW5nZXJDb3VudCA9IHZhbGlkYXRlRmluZ2VycygpO1xuICAgICAgICAgICAgdmFyIGhhc0VuZFBvaW50ID0gdmFsaWRhdGVFbmRQb2ludCgpO1xuICAgICAgICAgICAgdmFyIGRpZENhbmNlbCA9IGRpZFN3aXBlQmFja1RvQ2FuY2VsKCk7XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZSB1c2VyIHN3aXBlZCBtb3JlIHRoYW4gdGhlIG1pbmltdW0gbGVuZ3RoLCBwZXJmb3JtIHRoZSBhcHByb3ByaWF0ZSBhY3Rpb25cbiAgICAgICAgICAgIC8vIGhhc1ZhbGlkRGlzdGFuY2UgaXMgbnVsbCB3aGVuIG5vIGRpc3RhbmNlIGlzIHNldFxuICAgICAgICAgICAgdmFyIHZhbGlkID0gIWRpZENhbmNlbCAmJiBoYXNFbmRQb2ludCAmJiBoYXNDb3JyZWN0RmluZ2VyQ291bnQgJiYgaGFzVmFsaWREaXN0YW5jZSAmJiBoYXNWYWxpZFRpbWU7XG5cbiAgICAgICAgICAgIHJldHVybiB2YWxpZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55IFN3aXBlIGV2ZW50cyBoYXZlIGJlZW4gcmVnaXN0ZXJlZFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBoYXNTd2lwZXMoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEob3B0aW9ucy5zd2lwZSB8fCBvcHRpb25zLnN3aXBlU3RhdHVzIHx8IG9wdGlvbnMuc3dpcGVMZWZ0IHx8IG9wdGlvbnMuc3dpcGVSaWdodCB8fCBvcHRpb25zLnN3aXBlVXAgfHwgb3B0aW9ucy5zd2lwZURvd24pO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBkZXRlY3Rpbmcgc3dpcGVzIGFuZCBoYXZlIG9uZVxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkaWRTd2lwZSgpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhISh2YWxpZGF0ZVN3aXBlKCkgJiYgaGFzU3dpcGVzKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBoYXZlIG1hdGNoZWQgdGhlIG51bWJlciBvZiBmaW5nZXJzIHdlIGFyZSBsb29raW5nIGZvclxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZUZpbmdlcnMoKSB7XG4gICAgICAgICAgICAvL1RoZSBudW1iZXIgb2YgZmluZ2VycyB3ZSB3YW50IHdlcmUgbWF0Y2hlZCwgb3Igb24gZGVza3RvcCB3ZSBpZ25vcmVcbiAgICAgICAgICAgIHJldHVybiAoKGZpbmdlckNvdW50ID09PSBvcHRpb25zLmZpbmdlcnMgfHwgb3B0aW9ucy5maW5nZXJzID09PSBBTExfRklOR0VSUykgfHwgIVNVUFBPUlRTX1RPVUNIKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgaGF2ZSBhbiBlbmQgcG9pbnQgZm9yIHRoZSBzd2lwZVxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZUVuZFBvaW50KCkge1xuICAgICAgICAgICAgLy9XZSBoYXZlIGFuIGVuZCB2YWx1ZSBmb3IgdGhlIGZpbmdlclxuICAgICAgICAgICAgcmV0dXJuIGZpbmdlckRhdGFbMF0uZW5kLnggIT09IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUQVAgLyBDTElDS1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIGEgY2xpY2sgLyB0YXAgZXZlbnRzIGhhdmUgYmVlbiByZWdpc3RlcmVkXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc1RhcCgpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhIShvcHRpb25zLnRhcCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIGEgZG91YmxlIHRhcCBldmVudHMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWRcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaGFzRG91YmxlVGFwKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKG9wdGlvbnMuZG91YmxlVGFwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55IGxvbmcgdGFwIGV2ZW50cyBoYXZlIGJlZW4gcmVnaXN0ZXJlZFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBoYXNMb25nVGFwKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKG9wdGlvbnMubG9uZ1RhcCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGNvdWxkIGJlIGluIHRoZSBwcm9jZXNzIG9mIGEgZG91YmxlIHRhcCAob25lIHRhcCBoYXMgb2NjdXJyZWQsIHdlIGFyZSBsaXN0ZW5pbmcgZm9yIGRvdWJsZSB0YXBzLCBhbmQgdGhlIHRocmVzaG9sZCBoYXNuJ3QgcGFzdC5cbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVEb3VibGVUYXAoKSB7XG4gICAgICAgICAgICBpZiAoZG91YmxlVGFwU3RhcnRUaW1lID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbm93ID0gZ2V0VGltZVN0YW1wKCk7XG4gICAgICAgICAgICByZXR1cm4gKGhhc0RvdWJsZVRhcCgpICYmICgobm93IC0gZG91YmxlVGFwU3RhcnRUaW1lKSA8PSBvcHRpb25zLmRvdWJsZVRhcFRocmVzaG9sZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjb3VsZCBiZSBpbiB0aGUgcHJvY2VzcyBvZiBhIGRvdWJsZSB0YXAgKG9uZSB0YXAgaGFzIG9jY3VycmVkLCB3ZSBhcmUgbGlzdGVuaW5nIGZvciBkb3VibGUgdGFwcywgYW5kIHRoZSB0aHJlc2hvbGQgaGFzbid0IHBhc3QuXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGluRG91YmxlVGFwKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlRG91YmxlVGFwKCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgaGF2ZSBhIHZhbGlkIHRhcFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVRhcCgpIHtcbiAgICAgICAgICAgIHJldHVybiAoKGZpbmdlckNvdW50ID09PSAxIHx8ICFTVVBQT1JUU19UT1VDSCkgJiYgKGlzTmFOKGRpc3RhbmNlKSB8fCBkaXN0YW5jZSA8IG9wdGlvbnMudGhyZXNob2xkKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGhhdmUgYSB2YWxpZCBsb25nIHRhcFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZUxvbmdUYXAoKSB7XG4gICAgICAgICAgICAvL3NsaWdodCB0aHJlc2hvbGQgb24gbW92aW5nIGZpbmdlclxuICAgICAgICAgICAgcmV0dXJuICgoZHVyYXRpb24gPiBvcHRpb25zLmxvbmdUYXBUaHJlc2hvbGQpICYmIChkaXN0YW5jZSA8IERPVUJMRV9UQVBfVEhSRVNIT0xEKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBkZXRlY3RpbmcgdGFwcyBhbmQgaGF2ZSBvbmVcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGlkVGFwKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKHZhbGlkYXRlVGFwKCkgJiYgaGFzVGFwKCkpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBkZXRlY3RpbmcgZG91YmxlIHRhcHMgYW5kIGhhdmUgb25lXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRpZERvdWJsZVRhcCgpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhISh2YWxpZGF0ZURvdWJsZVRhcCgpICYmIGhhc0RvdWJsZVRhcCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIGRldGVjdGluZyBsb25nIHRhcHMgYW5kIGhhdmUgb25lXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRpZExvbmdUYXAoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEodmFsaWRhdGVMb25nVGFwKCkgJiYgaGFzTG9uZ1RhcCgpKTtcbiAgICAgICAgfVxuXG5cblxuXG4gICAgICAgIC8vIE1VTFRJIEZJTkdFUiBUT1VDSFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RhcnRzIHRyYWNraW5nIHRoZSB0aW1lIGJldHdlZW4gMiBmaW5nZXIgcmVsZWFzZXMsIGFuZCBrZWVwcyB0cmFjayBvZiBob3cgbWFueSBmaW5nZXJzIHdlIGluaXRpYWxseSBoYWQgdXBcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzdGFydE11bHRpRmluZ2VyUmVsZWFzZSgpIHtcbiAgICAgICAgICAgIHByZXZpb3VzVG91Y2hFbmRUaW1lID0gZ2V0VGltZVN0YW1wKCk7XG4gICAgICAgICAgICBwcmV2aW91c1RvdWNoRmluZ2VyQ291bnQgPSBldmVudC50b3VjaGVzLmxlbmd0aCArIDE7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FuY2VscyB0aGUgdHJhY2tpbmcgb2YgdGltZSBiZXR3ZWVuIDIgZmluZ2VyIHJlbGVhc2VzLCBhbmQgcmVzZXRzIGNvdW50ZXJzXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2FuY2VsTXVsdGlGaW5nZXJSZWxlYXNlKCkge1xuICAgICAgICAgICAgcHJldmlvdXNUb3VjaEVuZFRpbWUgPSAwO1xuICAgICAgICAgICAgcHJldmlvdXNUb3VjaEZpbmdlckNvdW50ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgaWYgd2UgYXJlIGluIHRoZSB0aHJlc2hvbGQgYmV0d2VlbiAyIGZpbmdlcnMgYmVpbmcgcmVsZWFzZWRcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaW5NdWx0aUZpbmdlclJlbGVhc2UoKSB7XG5cbiAgICAgICAgICAgIHZhciB3aXRoaW5UaHJlc2hvbGQgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKHByZXZpb3VzVG91Y2hFbmRUaW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmYgPSBnZXRUaW1lU3RhbXAoKSAtIHByZXZpb3VzVG91Y2hFbmRUaW1lXG4gICAgICAgICAgICAgICAgaWYgKGRpZmYgPD0gb3B0aW9ucy5maW5nZXJSZWxlYXNlVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpdGhpblRocmVzaG9sZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gd2l0aGluVGhyZXNob2xkO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogZ2V0cyBhIGRhdGEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IGEgdG91Y2ggaXMgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0VG91Y2hJblByb2dyZXNzKCkge1xuICAgICAgICAgICAgLy9zdHJpY3QgZXF1YWxpdHkgdG8gZW5zdXJlIG9ubHkgdHJ1ZSBhbmQgZmFsc2UgYXJlIHJldHVybmVkXG4gICAgICAgICAgICByZXR1cm4gISEoJGVsZW1lbnQuZGF0YShQTFVHSU5fTlMgKyAnX2ludG91Y2gnKSA9PT0gdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBhIGRhdGEgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IGEgdG91Y2ggaXMgaW4gcHJvZ3Jlc3NcbiAgICAgICAgICogQHBhcmFtIHtib29sZWFufSB2YWwgVGhlIHZhbHVlIHRvIHNldCB0aGUgcHJvcGVydHkgdG9cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRUb3VjaEluUHJvZ3Jlc3ModmFsKSB7XG5cbiAgICAgICAgICAgIC8vQWRkIG9yIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZGVwZW5kaW5nIG9uIHRvdWNoIHN0YXR1c1xuICAgICAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICRlbGVtZW50LmJpbmQoTU9WRV9FViwgdG91Y2hNb3ZlKTtcbiAgICAgICAgICAgICAgICAkZWxlbWVudC5iaW5kKEVORF9FViwgdG91Y2hFbmQpO1xuXG4gICAgICAgICAgICAgICAgLy93ZSBvbmx5IGhhdmUgbGVhdmUgZXZlbnRzIG9uIGRlc2t0b3AsIHdlIG1hbnVhbGx5IGNhbGN1YXRlIGxlYXZlIG9uIHRvdWNoIGFzIGl0cyBub3Qgc3VwcG9ydGVkIGluIHdlYmtpdFxuICAgICAgICAgICAgICAgIGlmIChMRUFWRV9FVikge1xuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5iaW5kKExFQVZFX0VWLCB0b3VjaExlYXZlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRlbGVtZW50LnVuYmluZChNT1ZFX0VWLCB0b3VjaE1vdmUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAkZWxlbWVudC51bmJpbmQoRU5EX0VWLCB0b3VjaEVuZCwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgLy93ZSBvbmx5IGhhdmUgbGVhdmUgZXZlbnRzIG9uIGRlc2t0b3AsIHdlIG1hbnVhbGx5IGNhbGN1YXRlIGxlYXZlIG9uIHRvdWNoIGFzIGl0cyBub3Qgc3VwcG9ydGVkIGluIHdlYmtpdFxuICAgICAgICAgICAgICAgIGlmIChMRUFWRV9FVikge1xuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC51bmJpbmQoTEVBVkVfRVYsIHRvdWNoTGVhdmUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy9zdHJpY3QgZXF1YWxpdHkgdG8gZW5zdXJlIG9ubHkgdHJ1ZSBhbmQgZmFsc2UgY2FuIHVwZGF0ZSB0aGUgdmFsdWVcbiAgICAgICAgICAgICRlbGVtZW50LmRhdGEoUExVR0lOX05TICsgJ19pbnRvdWNoJywgdmFsID09PSB0cnVlKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgdGhlIGZpbmdlciBkYXRhIGZvciB0aGUgdG91Y2gvZmluZ2VyIGluIHRoZSBldmVudCBvYmplY3QuXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBpbmRleCBUaGUgaW5kZXggaW4gdGhlIGFycmF5IHRvIHN0b3JlIHRoZSBmaW5nZXIgZGF0YSAodXN1YWxseSB0aGUgb3JkZXIgdGhlIGZpbmdlcnMgd2VyZSBwcmVzc2VkKVxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZXZ0IFRoZSBldmVudCBvYmplY3QgY29udGFpbmluZyBmaW5nZXIgZGF0YVxuICAgICAgICAgKiBAcmV0dXJuIGZpbmdlciBkYXRhIG9iamVjdFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbmdlckRhdGEoaW5kZXgsIGV2dCkge1xuICAgICAgICAgICAgdmFyIGlkID0gZXZ0LmlkZW50aWZpZXIgIT09IHVuZGVmaW5lZCA/IGV2dC5pZGVudGlmaWVyIDogMDtcblxuICAgICAgICAgICAgZmluZ2VyRGF0YVtpbmRleF0uaWRlbnRpZmllciA9IGlkO1xuICAgICAgICAgICAgZmluZ2VyRGF0YVtpbmRleF0uc3RhcnQueCA9IGZpbmdlckRhdGFbaW5kZXhdLmVuZC54ID0gZXZ0LnBhZ2VYIHx8IGV2dC5jbGllbnRYO1xuICAgICAgICAgICAgZmluZ2VyRGF0YVtpbmRleF0uc3RhcnQueSA9IGZpbmdlckRhdGFbaW5kZXhdLmVuZC55ID0gZXZ0LnBhZ2VZIHx8IGV2dC5jbGllbnRZO1xuXG4gICAgICAgICAgICByZXR1cm4gZmluZ2VyRGF0YVtpbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlcyB0aGUgZmluZ2VyIGRhdGEgZm9yIGEgcGFydGljdWxhciBldmVudCBvYmplY3RcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGV2dCBUaGUgZXZlbnQgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHRvdWNoL2ZpbmdlciBkYXRhIHRvIHVwYWR0ZVxuICAgICAgICAgKiBAcmV0dXJuIGEgZmluZ2VyIGRhdGEgb2JqZWN0LlxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUZpbmdlckRhdGEoZXZ0KSB7XG5cbiAgICAgICAgICAgIHZhciBpZCA9IGV2dC5pZGVudGlmaWVyICE9PSB1bmRlZmluZWQgPyBldnQuaWRlbnRpZmllciA6IDA7XG4gICAgICAgICAgICB2YXIgZiA9IGdldEZpbmdlckRhdGEoaWQpO1xuXG4gICAgICAgICAgICBmLmVuZC54ID0gZXZ0LnBhZ2VYIHx8IGV2dC5jbGllbnRYO1xuICAgICAgICAgICAgZi5lbmQueSA9IGV2dC5wYWdlWSB8fCBldnQuY2xpZW50WTtcblxuICAgICAgICAgICAgcmV0dXJuIGY7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIGZpbmdlciBkYXRhIG9iamVjdCBieSBpdHMgZXZlbnQgSUQuXG4gICAgICAgICAqIEVhY2ggdG91Y2ggZXZlbnQgaGFzIGFuIGlkZW50aWZpZXIgcHJvcGVydHksIHdoaWNoIGlzIHVzZWRcbiAgICAgICAgICogdG8gdHJhY2sgcmVwZWF0IHRvdWNoZXNcbiAgICAgICAgICogQHBhcmFtIHtpbnR9IGlkIFRoZSB1bmlxdWUgaWQgb2YgdGhlIGZpbmdlciBpbiB0aGUgc2VxdWVuY2Ugb2YgdG91Y2ggZXZlbnRzLlxuICAgICAgICAgKiBAcmV0dXJuIGEgZmluZ2VyIGRhdGEgb2JqZWN0LlxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldEZpbmdlckRhdGEoaWQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmluZ2VyRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmaW5nZXJEYXRhW2ldLmlkZW50aWZpZXIgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbmdlckRhdGFbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0cyBhbGwgdGhlIGZpbmdlciBvbmplY3RzIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIGZpbmdlciBkYXRhXG4gICAgICAgICAqIEByZXR1cm4gQXJyYXkgb2YgZmluZ2VyIG9iamVjdHNcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVBbGxGaW5nZXJEYXRhKCkge1xuICAgICAgICAgICAgdmFyIGZpbmdlckRhdGEgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IDU7IGkrKykge1xuICAgICAgICAgICAgICAgIGZpbmdlckRhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlbmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZpbmdlckRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgbWF4aW11bSBkaXN0YW5jZSBzd2lwZWQgaW4gdGhlIGdpdmVuIGRpcmVjdGlvbi5cbiAgICAgICAgICogSWYgdGhlIG5ldyB2YWx1ZSBpcyBsb3dlciB0aGFuIHRoZSBjdXJyZW50IHZhbHVlLCB0aGUgbWF4IHZhbHVlIGlzIG5vdCBjaGFuZ2VkLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gIGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIG9mIHRoZSBzd2lwZVxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gIGRpc3RhbmNlIFRoZSBkaXN0YW5jZSBvZiB0aGUgc3dpcGVcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzZXRNYXhEaXN0YW5jZShkaXJlY3Rpb24sIGRpc3RhbmNlKSB7XG4gICAgICAgICAgICBkaXN0YW5jZSA9IE1hdGgubWF4KGRpc3RhbmNlLCBnZXRNYXhEaXN0YW5jZShkaXJlY3Rpb24pKTtcbiAgICAgICAgICAgIG1heGltdW1zTWFwW2RpcmVjdGlvbl0uZGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBnZXRzIHRoZSBtYXhpbXVtIGRpc3RhbmNlIHN3aXBlZCBpbiB0aGUgZ2l2ZW4gZGlyZWN0aW9uLlxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gIGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIG9mIHRoZSBzd2lwZVxuICAgICAgICAgKiBAcmV0dXJuIGludCAgVGhlIGRpc3RhbmNlIG9mIHRoZSBzd2lwZVxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldE1heERpc3RhbmNlKGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaWYgKG1heGltdW1zTWFwW2RpcmVjdGlvbl0pIHJldHVybiBtYXhpbXVtc01hcFtkaXJlY3Rpb25dLmRpc3RhbmNlO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdHMgYSBtYXAgb2YgZGlyZWN0aW9ucyB0byBtYXhpbXVtIHN3aXBlZCB2YWx1ZXMuXG4gICAgICAgICAqIEByZXR1cm4gT2JqZWN0IEEgZGljdGlvbmFyeSBvZiBtYXhpbXVtIHZhbHVlcywgaW5kZXhlZCBieSBkaXJlY3Rpb24uXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTWF4aW11bXNEYXRhKCkge1xuICAgICAgICAgICAgdmFyIG1heERhdGEgPSB7fTtcbiAgICAgICAgICAgIG1heERhdGFbTEVGVF0gPSBjcmVhdGVNYXhpbXVtVk8oTEVGVCk7XG4gICAgICAgICAgICBtYXhEYXRhW1JJR0hUXSA9IGNyZWF0ZU1heGltdW1WTyhSSUdIVCk7XG4gICAgICAgICAgICBtYXhEYXRhW1VQXSA9IGNyZWF0ZU1heGltdW1WTyhVUCk7XG4gICAgICAgICAgICBtYXhEYXRhW0RPV05dID0gY3JlYXRlTWF4aW11bVZPKERPV04pO1xuXG4gICAgICAgICAgICByZXR1cm4gbWF4RGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbWFwIG1heGltdW0gc3dpcGVkIHZhbHVlcyBmb3IgYSBnaXZlbiBzd2lwZSBkaXJlY3Rpb25cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IFRoZSBkaXJlY3Rpb24gdGhhdCB0aGVzZSB2YWx1ZXMgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcbiAgICAgICAgICogQHJldHVybiBPYmplY3QgTWF4aW11bSB2YWx1ZXNcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVNYXhpbXVtVk8oZGlyKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZGlyLFxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIE1BVEhTIC8gVVRJTFNcbiAgICAgICAgLy9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSBkdXJhdGlvbiBvZiB0aGUgc3dpcGVcbiAgICAgICAgICogQHJldHVybiBpbnRcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVEdXJhdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgYmV0d2VlbiAyIHRvdWNoZXMgKHBpbmNoKVxuICAgICAgICAgKiBAcGFyYW0ge3BvaW50fSBzdGFydFBvaW50IEEgcG9pbnQgb2JqZWN0IGNvbnRhaW5pbmcgeCBhbmQgeSBjby1vcmRpbmF0ZXNcbiAgICAgICAgICogQHBhcmFtIHtwb2ludH0gZW5kUG9pbnQgQSBwb2ludCBvYmplY3QgY29udGFpbmluZyB4IGFuZCB5IGNvLW9yZGluYXRlc1xuICAgICAgICAgKiBAcmV0dXJuIGludDtcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVUb3VjaGVzRGlzdGFuY2Uoc3RhcnRQb2ludCwgZW5kUG9pbnQpIHtcbiAgICAgICAgICAgIHZhciBkaWZmWCA9IE1hdGguYWJzKHN0YXJ0UG9pbnQueCAtIGVuZFBvaW50LngpO1xuICAgICAgICAgICAgdmFyIGRpZmZZID0gTWF0aC5hYnMoc3RhcnRQb2ludC55IC0gZW5kUG9pbnQueSk7XG5cbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKE1hdGguc3FydChkaWZmWCAqIGRpZmZYICsgZGlmZlkgKiBkaWZmWSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgem9vbSBmYWN0b3IgYmV0d2VlbiB0aGUgc3RhcnQgYW5kIGVuZCBkaXN0YW5jZXNcbiAgICAgICAgICogQHBhcmFtIHtpbnR9IHN0YXJ0RGlzdGFuY2UgRGlzdGFuY2UgKGJldHdlZW4gMiBmaW5nZXJzKSB0aGUgdXNlciBzdGFydGVkIHBpbmNoaW5nIGF0XG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBlbmREaXN0YW5jZSBEaXN0YW5jZSAoYmV0d2VlbiAyIGZpbmdlcnMpIHRoZSB1c2VyIGVuZGVkIHBpbmNoaW5nIGF0XG4gICAgICAgICAqIEByZXR1cm4gZmxvYXQgVGhlIHpvb20gdmFsdWUgZnJvbSAwIHRvIDEuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlUGluY2hab29tKHN0YXJ0RGlzdGFuY2UsIGVuZERpc3RhbmNlKSB7XG4gICAgICAgICAgICB2YXIgcGVyY2VudCA9IChlbmREaXN0YW5jZSAvIHN0YXJ0RGlzdGFuY2UpICogMTtcbiAgICAgICAgICAgIHJldHVybiBwZXJjZW50LnRvRml4ZWQoMik7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBwaW5jaCBkaXJlY3Rpb24sIGVpdGhlciBJTiBvciBPVVQgZm9yIHRoZSBnaXZlbiBwb2ludHNcbiAgICAgICAgICogQHJldHVybiBzdHJpbmcgRWl0aGVyIHtAbGluayAkLmZuLnN3aXBlLmRpcmVjdGlvbnMuSU59IG9yIHtAbGluayAkLmZuLnN3aXBlLmRpcmVjdGlvbnMuT1VUfVxuICAgICAgICAgKiBAc2VlICQuZm4uc3dpcGUuZGlyZWN0aW9uc1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVBpbmNoRGlyZWN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHBpbmNoWm9vbSA8IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT1VUO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGxlbmd0aCAvIGRpc3RhbmNlIG9mIHRoZSBzd2lwZVxuICAgICAgICAgKiBAcGFyYW0ge3BvaW50fSBzdGFydFBvaW50IEEgcG9pbnQgb2JqZWN0IGNvbnRhaW5pbmcgeCBhbmQgeSBjby1vcmRpbmF0ZXNcbiAgICAgICAgICogQHBhcmFtIHtwb2ludH0gZW5kUG9pbnQgQSBwb2ludCBvYmplY3QgY29udGFpbmluZyB4IGFuZCB5IGNvLW9yZGluYXRlc1xuICAgICAgICAgKiBAcmV0dXJuIGludFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZURpc3RhbmNlKHN0YXJ0UG9pbnQsIGVuZFBvaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnNxcnQoTWF0aC5wb3coZW5kUG9pbnQueCAtIHN0YXJ0UG9pbnQueCwgMikgKyBNYXRoLnBvdyhlbmRQb2ludC55IC0gc3RhcnRQb2ludC55LCAyKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgYW5nbGUgb2YgdGhlIHN3aXBlXG4gICAgICAgICAqIEBwYXJhbSB7cG9pbnR9IHN0YXJ0UG9pbnQgQSBwb2ludCBvYmplY3QgY29udGFpbmluZyB4IGFuZCB5IGNvLW9yZGluYXRlc1xuICAgICAgICAgKiBAcGFyYW0ge3BvaW50fSBlbmRQb2ludCBBIHBvaW50IG9iamVjdCBjb250YWluaW5nIHggYW5kIHkgY28tb3JkaW5hdGVzXG4gICAgICAgICAqIEByZXR1cm4gaW50XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlQW5nbGUoc3RhcnRQb2ludCwgZW5kUG9pbnQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gc3RhcnRQb2ludC54IC0gZW5kUG9pbnQueDtcbiAgICAgICAgICAgIHZhciB5ID0gZW5kUG9pbnQueSAtIHN0YXJ0UG9pbnQueTtcbiAgICAgICAgICAgIHZhciByID0gTWF0aC5hdGFuMih5LCB4KTsgLy9yYWRpYW5zXG4gICAgICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLnJvdW5kKHIgKiAxODAgLyBNYXRoLlBJKTsgLy9kZWdyZWVzXG5cbiAgICAgICAgICAgIC8vZW5zdXJlIHZhbHVlIGlzIHBvc2l0aXZlXG4gICAgICAgICAgICBpZiAoYW5nbGUgPCAwKSB7XG4gICAgICAgICAgICAgICAgYW5nbGUgPSAzNjAgLSBNYXRoLmFicyhhbmdsZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBhbmdsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGRpcmVjdGlvbiBvZiB0aGUgc3dpcGVcbiAgICAgICAgICogVGhpcyB3aWxsIGFsc28gY2FsbCBjYWxjdWxhdGVBbmdsZSB0byBnZXQgdGhlIGxhdGVzdCBhbmdsZSBvZiBzd2lwZVxuICAgICAgICAgKiBAcGFyYW0ge3BvaW50fSBzdGFydFBvaW50IEEgcG9pbnQgb2JqZWN0IGNvbnRhaW5pbmcgeCBhbmQgeSBjby1vcmRpbmF0ZXNcbiAgICAgICAgICogQHBhcmFtIHtwb2ludH0gZW5kUG9pbnQgQSBwb2ludCBvYmplY3QgY29udGFpbmluZyB4IGFuZCB5IGNvLW9yZGluYXRlc1xuICAgICAgICAgKiBAcmV0dXJuIHN0cmluZyBFaXRoZXIge0BsaW5rICQuZm4uc3dpcGUuZGlyZWN0aW9ucy5MRUZUfSAvIHtAbGluayAkLmZuLnN3aXBlLmRpcmVjdGlvbnMuUklHSFR9IC8ge0BsaW5rICQuZm4uc3dpcGUuZGlyZWN0aW9ucy5ET1dOfSAvIHtAbGluayAkLmZuLnN3aXBlLmRpcmVjdGlvbnMuVVB9XG4gICAgICAgICAqIEBzZWUgJC5mbi5zd2lwZS5kaXJlY3Rpb25zXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlRGlyZWN0aW9uKHN0YXJ0UG9pbnQsIGVuZFBvaW50KSB7XG4gICAgICAgICAgICB2YXIgYW5nbGUgPSBjYWxjdWxhdGVBbmdsZShzdGFydFBvaW50LCBlbmRQb2ludCk7XG5cbiAgICAgICAgICAgIGlmICgoYW5nbGUgPD0gNDUpICYmIChhbmdsZSA+PSAwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBMRUZUO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoYW5nbGUgPD0gMzYwKSAmJiAoYW5nbGUgPj0gMzE1KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBMRUZUO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgoYW5nbGUgPj0gMTM1KSAmJiAoYW5nbGUgPD0gMjI1KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBSSUdIVDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFuZ2xlID4gNDUpICYmIChhbmdsZSA8IDEzNSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRE9XTjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFVQO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIE1TIHRpbWUgc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZVxuICAgICAgICAgKiBAcmV0dXJuIGludFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFRpbWVTdGFtcCgpIHtcbiAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIG5vdy5nZXRUaW1lKCk7XG4gICAgICAgIH1cblxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBib3VuZHMgb2JqZWN0IHdpdGggbGVmdCwgcmlnaHQsIHRvcCBhbmQgYm90dG9tIHByb3BlcnRpZXMgZm9yIHRoZSBlbGVtZW50IHNwZWNpZmllZC5cbiAgICAgICAgICogQHBhcmFtIHtEb21Ob2RlfSBUaGUgRE9NIG5vZGUgdG8gZ2V0IHRoZSBib3VuZHMgZm9yLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0Ym91bmRzKGVsKSB7XG4gICAgICAgICAgICBlbCA9ICQoZWwpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGVsLm9mZnNldCgpO1xuXG4gICAgICAgICAgICB2YXIgYm91bmRzID0ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0LFxuICAgICAgICAgICAgICAgIHJpZ2h0OiBvZmZzZXQubGVmdCArIGVsLm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICB0b3A6IG9mZnNldC50b3AsXG4gICAgICAgICAgICAgICAgYm90dG9tOiBvZmZzZXQudG9wICsgZWwub3V0ZXJIZWlnaHQoKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYm91bmRzO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIGlmIHRoZSBwb2ludCBvYmplY3QgaXMgaW4gdGhlIGJvdW5kcyBvYmplY3QuXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBwb2ludCBBIHBvaW50IG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIHtpbnR9IHBvaW50LnggVGhlIHggdmFsdWUgb2YgdGhlIHBvaW50LlxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gcG9pbnQueSBUaGUgeCB2YWx1ZSBvZiB0aGUgcG9pbnQuXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBib3VuZHMgVGhlIGJvdW5kcyBvYmplY3QgdG8gdGVzdFxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gYm91bmRzLmxlZnQgVGhlIGxlZnRtb3N0IHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBib3VuZHMucmlnaHQgVGhlIHJpZ2h0dG1vc3QgdmFsdWVcbiAgICAgICAgICogQHBhcmFtIHtpbnR9IGJvdW5kcy50b3AgVGhlIHRvcG1vc3QgdmFsdWVcbiAgICAgICAgICogQHBhcmFtIHtpbnR9IGJvdW5kcy5ib3R0b20gVGhlIGJvdHRvbW1vc3QgdmFsdWVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGlzSW5Cb3VuZHMocG9pbnQsIGJvdW5kcykge1xuICAgICAgICAgICAgcmV0dXJuIChwb2ludC54ID4gYm91bmRzLmxlZnQgJiYgcG9pbnQueCA8IGJvdW5kcy5yaWdodCAmJiBwb2ludC55ID4gYm91bmRzLnRvcCAmJiBwb2ludC55IDwgYm91bmRzLmJvdHRvbSk7XG4gICAgICAgIH07XG5cblxuICAgIH1cbn0pKTsiLCIvKlxuICBNYXJrdXAuanMgdjEuNS4yMDogaHR0cDovL2dpdGh1Yi5jb20vYWRhbW1hcmsvTWFya3VwLmpzXG4gIE1JVCBMaWNlbnNlXG4gIChjKSAyMDExIC0gMjAxNCBBZGFtIE1hcmtcbiovXG52YXIgTWFyayA9IHtcbiAgICAvLyBUZW1wbGF0ZXMgdG8gaW5jbHVkZSwgYnkgbmFtZS4gQSB0ZW1wbGF0ZSBpcyBhIHN0cmluZy5cbiAgICBpbmNsdWRlczoge30sXG5cbiAgICAvLyBHbG9iYWwgdmFyaWFibGVzLCBieSBuYW1lLiBHbG9iYWwgdmFyaWFibGVzIHRha2UgcHJlY2VkZW5jZSBvdmVyIGNvbnRleHQgdmFyaWFibGVzLlxuICAgIGdsb2JhbHM6IHt9LFxuXG4gICAgLy8gVGhlIGRlbGltaXRlciB0byB1c2UgaW4gcGlwZSBleHByZXNzaW9ucywgZS5nLiB7e2lmIGNvbG9yfGxpa2U+cmVkfX0uXG4gICAgZGVsaW1pdGVyOiBcIj5cIixcblxuICAgIC8vIENvbGxhcHNlIHdoaXRlIHNwYWNlIGJldHdlZW4gSFRNTCBlbGVtZW50cyBpbiB0aGUgcmVzdWx0aW5nIHN0cmluZy5cbiAgICBjb21wYWN0OiBmYWxzZSxcblxuICAgIC8vIFNoYWxsb3ctY29weSBhbiBvYmplY3QuXG4gICAgX2NvcHk6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIGIgPSBiIHx8IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgaW4gYSkge1xuICAgICAgICAgICAgYltpXSA9IGFbaV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYjtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiBhIG51bWJlciBvciBzaXplIG9mIGFuIGFycmF5LiBUaGlzIGlzIGEgaGVscGVyIGZ1bmN0aW9uIGZvciBzZXZlcmFsIHBpcGVzLlxuICAgIF9zaXplOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICByZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5ID8gYS5sZW5ndGggOiAoYSB8fCAwKTtcbiAgICB9LFxuXG4gICAgLy8gVGhpcyBvYmplY3QgcmVwcmVzZW50cyBhbiBpdGVyYXRpb24uIEl0IGhhcyBhbiBpbmRleCBhbmQgbGVuZ3RoLlxuICAgIF9pdGVyOiBmdW5jdGlvbiAoaWR4LCBzaXplKSB7XG4gICAgICAgIHRoaXMuaWR4ID0gaWR4O1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHNpemU7XG4gICAgICAgIHRoaXMuc2lnbiA9IFwiI1wiO1xuXG4gICAgICAgIC8vIFByaW50IHRoZSBpbmRleCBpZiBcIiNcIiBvciB0aGUgY291bnQgaWYgXCIjI1wiLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWR4ICsgdGhpcy5zaWduLmxlbmd0aCAtIDE7XG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIC8vIFBhc3MgYSB2YWx1ZSB0aHJvdWdoIGEgc2VyaWVzIG9mIHBpcGUgZXhwcmVzc2lvbnMsIGUuZy4gX3BpcGUoMTIzLCBbXCJhZGQ+MTBcIixcInRpbWVzPjVcIl0pLlxuICAgIF9waXBlOiBmdW5jdGlvbiAodmFsLCBleHByZXNzaW9ucykge1xuICAgICAgICB2YXIgZXhwcmVzc2lvbiwgcGFydHMsIGZuLCByZXN1bHQ7XG5cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBleHByZXNzaW9ucywgcHVsbCBvdXQgdGhlIGZpcnN0IG9uZSwgZS5nLiBcImFkZD4xMFwiLlxuICAgICAgICBpZiAoKGV4cHJlc3Npb24gPSBleHByZXNzaW9ucy5zaGlmdCgpKSkge1xuXG4gICAgICAgICAgICAvLyBTcGxpdCB0aGUgZXhwcmVzc2lvbiBpbnRvIGl0cyBjb21wb25lbnQgcGFydHMsIGUuZy4gW1wiYWRkXCIsIFwiMTBcIl0uXG4gICAgICAgICAgICBwYXJ0cyA9IGV4cHJlc3Npb24uc3BsaXQodGhpcy5kZWxpbWl0ZXIpO1xuXG4gICAgICAgICAgICAvLyBQdWxsIG91dCB0aGUgZnVuY3Rpb24gbmFtZSwgZS5nLiBcImFkZFwiLlxuICAgICAgICAgICAgZm4gPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBSdW4gdGhlIGZ1bmN0aW9uLCBlLmcuIGFkZCgxMjMsIDEwKSAuLi5cbiAgICAgICAgICAgICAgICByZXN1bHQgPSBNYXJrLnBpcGVzW2ZuXS5hcHBseShudWxsLCBbdmFsXS5jb25jYXQocGFydHMpKTtcblxuICAgICAgICAgICAgICAgIC8vIC4uLiB0aGVuIHBpcGUgYWdhaW4gd2l0aCByZW1haW5pbmcgZXhwcmVzc2lvbnMuXG4gICAgICAgICAgICAgICAgdmFsID0gdGhpcy5fcGlwZShyZXN1bHQsIGV4cHJlc3Npb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXR1cm4gdGhlIHBpcGVkIHZhbHVlLlxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICAvLyBUT0RPIGRvY1xuICAgIF9ldmFsOiBmdW5jdGlvbiAoY29udGV4dCwgZmlsdGVycywgY2hpbGQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX3BpcGUoY29udGV4dCwgZmlsdGVycyksXG4gICAgICAgICAgICBjdHggPSByZXN1bHQsXG4gICAgICAgICAgICBpID0gLTEsXG4gICAgICAgICAgICBqLFxuICAgICAgICAgICAgb3B0cztcblxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgICAgICBqID0gY3R4Lmxlbmd0aDtcblxuICAgICAgICAgICAgd2hpbGUgKCsraSA8IGopIHtcbiAgICAgICAgICAgICAgICBvcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBpdGVyOiBuZXcgdGhpcy5faXRlcihpLCBqKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGNoaWxkID8gTWFyay51cChjaGlsZCwgY3R4W2ldLCBvcHRzKSA6IGN0eFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IE1hcmsudXAoY2hpbGQsIGN0eCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICAvLyBQcm9jZXNzIHRoZSBjb250ZW50cyBvZiBhbiBJRiBvciBJRi9FTFNFIGJsb2NrLlxuICAgIF90ZXN0OiBmdW5jdGlvbiAoYm9vbCwgY2hpbGQsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gUHJvY2VzcyB0aGUgY2hpbGQgc3RyaW5nLCB0aGVuIHNwbGl0IGl0IGludG8gdGhlIElGIGFuZCBFTFNFIHBhcnRzLlxuICAgICAgICB2YXIgc3RyID0gTWFyay51cChjaGlsZCwgY29udGV4dCwgb3B0aW9ucykuc3BsaXQoL1xce1xce1xccyplbHNlXFxzKlxcfVxcfS8pO1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgSUYgb3IgRUxTRSBwYXJ0LiBJZiBubyBFTFNFLCByZXR1cm4gYW4gZW1wdHkgc3RyaW5nLlxuICAgICAgICByZXR1cm4gKGJvb2wgPT09IGZhbHNlID8gc3RyWzFdIDogc3RyWzBdKSB8fCBcIlwiO1xuICAgIH0sXG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGV4dGVudCBvZiBhIGJsb2NrIGV4cHJlc3Npb24sIGUuZy4gXCJ7e2Zvb319Li4ue3svZm9vfX1cIlxuICAgIF9icmlkZ2U6IGZ1bmN0aW9uICh0cGwsIHRrbikge1xuICAgICAgICBpZiAodGtuID09IFwiLlwiKVxuICAgICAgICAgICAgdGtuID0gXCJcXFxcLlwiOyAgICAvLyByZWdleC1zYWZlXG4gICAgICAgIHZhciBleHAgPSBcInt7XFxcXHMqXCIgKyB0a24gKyBcIihbXi99XStcXFxcdyopP319fHt7L1wiICsgdGtuICsgXCJcXFxccyp9fVwiLFxuICAgICAgICAgICAgcmUgPSBuZXcgUmVnRXhwKGV4cCwgXCJnXCIpLFxuICAgICAgICAgICAgdGFncyA9IHRwbC5tYXRjaChyZSkgfHwgW10sXG4gICAgICAgICAgICB0LFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIGEgPSAwLFxuICAgICAgICAgICAgYiA9IDAsXG4gICAgICAgICAgICBjID0gLTEsXG4gICAgICAgICAgICBkID0gMDtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdCA9IGk7XG4gICAgICAgICAgICBjID0gdHBsLmluZGV4T2YodGFnc1t0XSwgYyArIDEpO1xuXG4gICAgICAgICAgICBpZiAodGFnc1t0XS5pbmRleE9mKFwie3svXCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBiKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhID0gdHBsLmluZGV4T2YodGFnc1swXSk7XG4gICAgICAgIGIgPSBhICsgdGFnc1swXS5sZW5ndGg7XG4gICAgICAgIGQgPSBjICsgdGFnc1t0XS5sZW5ndGg7XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBibG9jaywgZS5nLiBcInt7Zm9vfX1iYXJ7ey9mb299fVwiIGFuZCBpdHMgY2hpbGQsIGUuZy4gXCJiYXJcIi5cbiAgICAgICAgcmV0dXJuIFt0cGwuc3Vic3RyaW5nKGEsIGQpLCB0cGwuc3Vic3RyaW5nKGIsIGMpXTtcbiAgICB9XG59O1xuXG4vLyBJbmplY3QgYSB0ZW1wbGF0ZSBzdHJpbmcgd2l0aCBjb250ZXh0dWFsIGRhdGEgYW5kIHJldHVybiBhIG5ldyBzdHJpbmcuXG5NYXJrLnVwID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgY29udGV4dCA9IGNvbnRleHQgfHwge307XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAvLyBNYXRjaCBhbGwgdGFncyBsaWtlIFwie3suLi59fVwiLlxuICAgIHZhciByZSA9IC9cXHtcXHsoLis/KVxcfVxcfS9nLFxuICAgICAgICAvLyBBbGwgdGFncyBpbiB0aGUgdGVtcGxhdGUuXG4gICAgICAgIHRhZ3MgPSB0ZW1wbGF0ZS5tYXRjaChyZSkgfHwgW10sXG4gICAgICAgIC8vIFRoZSB0YWcgYmVpbmcgZXZhbHVhdGVkLCBlLmcuIFwie3toYW1zdGVyfGRhbmNlfX1cIi5cbiAgICAgICAgdGFnLFxuICAgICAgICAvLyBUaGUgZXhwcmVzc2lvbiB0byBldmFsdWF0ZSBpbnNpZGUgdGhlIHRhZywgZS5nLiBcImhhbXN0ZXJ8ZGFuY2VcIi5cbiAgICAgICAgcHJvcCxcbiAgICAgICAgLy8gVGhlIHRva2VuIGl0c2VsZiwgZS5nLiBcImhhbXN0ZXJcIi5cbiAgICAgICAgdG9rZW4sXG4gICAgICAgIC8vIEFuIGFycmF5IG9mIHBpcGUgZXhwcmVzc2lvbnMsIGUuZy4gW1wibW9yZT4xXCIsIFwibGVzcz4yXCJdLlxuICAgICAgICBmaWx0ZXJzID0gW10sXG4gICAgICAgIC8vIERvZXMgdGhlIHRhZyBjbG9zZSBpdHNlbGY/IGUuZy4gXCJ7e3N0dWZmL319XCIuXG4gICAgICAgIHNlbGZ5LFxuICAgICAgICAvLyBJcyB0aGUgdGFnIGFuIFwiaWZcIiBzdGF0ZW1lbnQ/XG4gICAgICAgIHRlc3R5LFxuICAgICAgICAvLyBUaGUgY29udGVudHMgb2YgYSBibG9jayB0YWcsIGUuZy4gXCJ7e2FhfX1iYnt7L2FhfX1cIiAtPiBcImJiXCIuXG4gICAgICAgIGNoaWxkLFxuICAgICAgICAvLyBUaGUgcmVzdWx0aW5nIHN0cmluZy5cbiAgICAgICAgcmVzdWx0LFxuICAgICAgICAvLyBUaGUgZ2xvYmFsIHZhcmlhYmxlIGJlaW5nIGV2YWx1YXRlZCwgb3IgdW5kZWZpbmVkLlxuICAgICAgICBnbG9iYWwsXG4gICAgICAgIC8vIFRoZSBpbmNsdWRlZCB0ZW1wbGF0ZSBiZWluZyBldmFsdWF0ZWQsIG9yIHVuZGVmaW5lZC5cbiAgICAgICAgaW5jbHVkZSxcbiAgICAgICAgLy8gQSBwbGFjZWhvbGRlciB2YXJpYWJsZS5cbiAgICAgICAgY3R4LFxuICAgICAgICAvLyBJdGVyYXRvcnMuXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBqID0gMDtcblxuICAgIC8vIFNldCBjdXN0b20gcGlwZXMsIGlmIHByb3ZpZGVkLlxuICAgIGlmIChvcHRpb25zLnBpcGVzKSB7XG4gICAgICAgIHRoaXMuX2NvcHkob3B0aW9ucy5waXBlcywgdGhpcy5waXBlcyk7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRlbXBsYXRlcyB0byBpbmNsdWRlLCBpZiBwcm92aWRlZC5cbiAgICBpZiAob3B0aW9ucy5pbmNsdWRlcykge1xuICAgICAgICB0aGlzLl9jb3B5KG9wdGlvbnMuaW5jbHVkZXMsIHRoaXMuaW5jbHVkZXMpO1xuICAgIH1cblxuICAgIC8vIFNldCBnbG9iYWwgdmFyaWFibGVzLCBpZiBwcm92aWRlZC5cbiAgICBpZiAob3B0aW9ucy5nbG9iYWxzKSB7XG4gICAgICAgIHRoaXMuX2NvcHkob3B0aW9ucy5nbG9iYWxzLCB0aGlzLmdsb2JhbHMpO1xuICAgIH1cblxuICAgIC8vIE9wdGlvbmFsbHkgb3ZlcnJpZGUgdGhlIGRlbGltaXRlci5cbiAgICBpZiAob3B0aW9ucy5kZWxpbWl0ZXIpIHtcbiAgICAgICAgdGhpcy5kZWxpbWl0ZXIgPSBvcHRpb25zLmRlbGltaXRlcjtcbiAgICB9XG5cbiAgICAvLyBPcHRpb25hbGx5IGNvbGxhcHNlIHdoaXRlIHNwYWNlLlxuICAgIGlmIChvcHRpb25zLmNvbXBhY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmNvbXBhY3QgPSBvcHRpb25zLmNvbXBhY3Q7XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIHRhZ3MsIGUuZy4ge3thfX0sIHt7Yn19LCB7e2N9fSwge3svY319LlxuICAgIHdoaWxlICgodGFnID0gdGFnc1tpKytdKSkge1xuICAgICAgICByZXN1bHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNoaWxkID0gXCJcIjtcbiAgICAgICAgc2VsZnkgPSB0YWcuaW5kZXhPZihcIi99fVwiKSA+IC0xO1xuICAgICAgICBwcm9wID0gdGFnLnN1YnN0cigyLCB0YWcubGVuZ3RoIC0gKHNlbGZ5ID8gNSA6IDQpKTtcbiAgICAgICAgcHJvcCA9IHByb3AucmVwbGFjZSgvYCguKz8pYC9nLCBmdW5jdGlvbiAocywgcDEpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXJrLnVwKFwie3tcIiArIHAxICsgXCJ9fVwiLCBjb250ZXh0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRlc3R5ID0gcHJvcC50cmltKCkuaW5kZXhPZihcImlmIFwiKSA9PT0gMDtcbiAgICAgICAgZmlsdGVycyA9IHByb3Auc3BsaXQoXCJ8XCIpO1xuICAgICAgICBmaWx0ZXJzLnNoaWZ0KCk7IC8vIGluc3RlYWQgb2Ygc3BsaWNlKDEpXG4gICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoL15cXHMqaWYvLCBcIlwiKS5zcGxpdChcInxcIikuc2hpZnQoKS50cmltKCk7XG4gICAgICAgIHRva2VuID0gdGVzdHkgPyBcImlmXCIgOiBwcm9wLnNwbGl0KFwifFwiKVswXTtcbiAgICAgICAgY3R4ID0gY29udGV4dFtwcm9wXTtcblxuICAgICAgICAvLyBJZiBhbiBcImlmXCIgc3RhdGVtZW50IHdpdGhvdXQgZmlsdGVycywgYXNzdW1lIFwie3tpZiBmb298bm90ZW1wdHl9fVwiXG4gICAgICAgIGlmICh0ZXN0eSAmJiAhZmlsdGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZpbHRlcnMgPSBbXCJub3RlbXB0eVwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERvZXMgdGhlIHRhZyBoYXZlIGEgY29ycmVzcG9uZGluZyBjbG9zaW5nIHRhZz8gSWYgc28sIGZpbmQgaXQgYW5kIG1vdmUgdGhlIGN1cnNvci5cbiAgICAgICAgaWYgKCFzZWxmeSAmJiB0ZW1wbGF0ZS5pbmRleE9mKFwie3svXCIgKyB0b2tlbikgPiAtMSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fYnJpZGdlKHRlbXBsYXRlLCB0b2tlbik7XG4gICAgICAgICAgICB0YWcgPSByZXN1bHRbMF07XG4gICAgICAgICAgICBjaGlsZCA9IHJlc3VsdFsxXTtcbiAgICAgICAgICAgIGkgKz0gdGFnLm1hdGNoKHJlKS5sZW5ndGggLSAxOyAvLyBmYXN0IGZvcndhcmRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNraXAgXCJlbHNlXCIgdGFncy4gVGhlc2UgYXJlIHB1bGxlZCBvdXQgaW4gX3Rlc3QoKS5cbiAgICAgICAgaWYgKC9eXFx7XFx7XFxzKmVsc2VcXHMqXFx9XFx9JC8udGVzdCh0YWcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYSBnbG9iYWwgdmFyaWFibGUuXG4gICAgICAgIGVsc2UgaWYgKChnbG9iYWwgPSB0aGlzLmdsb2JhbHNbcHJvcF0pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2V2YWwoZ2xvYmFsLCBmaWx0ZXJzLCBjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFuIGluY2x1ZGVkIHRlbXBsYXRlLlxuICAgICAgICBlbHNlIGlmICgoaW5jbHVkZSA9IHRoaXMuaW5jbHVkZXNbcHJvcF0pKSB7XG4gICAgICAgICAgICBpZiAoaW5jbHVkZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUoTWFyay51cChpbmNsdWRlLCBjb250ZXh0LCBvcHRpb25zKSwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGEgbG9vcCBjb3VudGVyIChcIiNcIiBvciBcIiMjXCIpLlxuICAgICAgICBlbHNlIGlmIChwcm9wLmluZGV4T2YoXCIjXCIpID4gLTEpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaXRlci5zaWduID0gcHJvcDtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUob3B0aW9ucy5pdGVyLCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgdGhlIGN1cnJlbnQgY29udGV4dC5cbiAgICAgICAgZWxzZSBpZiAocHJvcCA9PT0gXCIuXCIpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUoY29udGV4dCwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGEgdmFyaWFibGUgd2l0aCBkb3Qgbm90YXRpb24sIGUuZy4gXCJhLmIuY1wiXG4gICAgICAgIGVsc2UgaWYgKHByb3AuaW5kZXhPZihcIi5cIikgPiAtMSkge1xuICAgICAgICAgICAgcHJvcCA9IHByb3Auc3BsaXQoXCIuXCIpO1xuICAgICAgICAgICAgY3R4ID0gTWFyay5nbG9iYWxzW3Byb3BbMF1dO1xuXG4gICAgICAgICAgICBpZiAoY3R4KSB7XG4gICAgICAgICAgICAgICAgaiA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICBjdHggPSBjb250ZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGFjdHVhbCBjb250ZXh0XG4gICAgICAgICAgICB3aGlsZSAoY3R4ICYmIGogPCBwcm9wLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGN0eCA9IGN0eFtwcm9wW2orK11dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsKGN0eCwgZmlsdGVycywgY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbiBcImlmXCIgc3RhdGVtZW50LlxuICAgICAgICBlbHNlIGlmICh0ZXN0eSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShjdHgsIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbiBhcnJheSwgd2hpY2ggbWlnaHQgYmUgYSBibG9jayBleHByZXNzaW9uLlxuICAgICAgICBlbHNlIGlmIChjdHggaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZXZhbChjdHgsIGZpbHRlcnMsIGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYSBibG9jayBleHByZXNzaW9uLlxuICAgICAgICBlbHNlIGlmIChjaGlsZCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gY3R4ID8gTWFyay51cChjaGlsZCwgY3R4KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW55dGhpbmcgZWxzZS5cbiAgICAgICAgZWxzZSBpZiAoY29udGV4dC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShjdHgsIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBzcGVjaWFsIGNhc2U6IGlmIHRoZSByZXN1bHRpbmcgY29udGV4dCBpcyBhY3R1YWxseSBhbiBBcnJheVxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2V2YWwocmVzdWx0LCBmaWx0ZXJzLCBjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFuIFwiaWZcIiBzdGF0ZW1lbnQuXG4gICAgICAgIGlmICh0ZXN0eSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fdGVzdChyZXN1bHQsIGNoaWxkLCBjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIHRhZywgZS5nLiBcInt7bmFtZX19XCIsIHdpdGggdGhlIHJlc3VsdCwgZS5nLiBcIkFkYW1cIi5cbiAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKHRhZywgcmVzdWx0ID09PSB1bmRlZmluZWQgPyBcIj8/P1wiIDogcmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb21wYWN0ID8gdGVtcGxhdGUucmVwbGFjZSgvPlxccys8L2csIFwiPjxcIikgOiB0ZW1wbGF0ZTtcbn07XG5cbi8vIEZyZWViaWUgcGlwZXMuIFNlZSB1c2FnZSBpbiBSRUFETUUubWRcbk1hcmsucGlwZXMgPSB7XG4gICAgZW1wdHk6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICFvYmogfHwgKG9iaiArIFwiXCIpLnRyaW0oKS5sZW5ndGggPT09IDAgPyBvYmogOiBmYWxzZTtcbiAgICB9LFxuICAgIG5vdGVtcHR5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgKG9iaiArIFwiXCIpLnRyaW0oKS5sZW5ndGggPyBvYmogOiBmYWxzZTtcbiAgICB9LFxuICAgIGJsYW5rOiBmdW5jdGlvbiAoc3RyLCB2YWwpIHtcbiAgICAgICAgcmV0dXJuICEhc3RyIHx8IHN0ciA9PT0gMCA/IHN0ciA6IHZhbDtcbiAgICB9LFxuICAgIG1vcmU6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBNYXJrLl9zaXplKGEpID4gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIGxlc3M6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBNYXJrLl9zaXplKGEpIDwgYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIG9ybW9yZTogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hcmsuX3NpemUoYSkgPj0gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIG9ybGVzczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hcmsuX3NpemUoYSkgPD0gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIGJldHdlZW46IGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgICAgIGEgPSBNYXJrLl9zaXplKGEpO1xuICAgICAgICByZXR1cm4gYSA+PSBiICYmIGEgPD0gYyA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIGVxdWFsczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPT0gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIG5vdGVxdWFsczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgIT0gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIGxpa2U6IGZ1bmN0aW9uIChzdHIsIHBhdHRlcm4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybiwgXCJpXCIpLnRlc3Qoc3RyKSA/IHN0ciA6IGZhbHNlO1xuICAgIH0sXG4gICAgbm90bGlrZTogZnVuY3Rpb24gKHN0ciwgcGF0dGVybikge1xuICAgICAgICByZXR1cm4gIU1hcmsucGlwZXMubGlrZShzdHIsIHBhdHRlcm4pID8gc3RyIDogZmFsc2U7XG4gICAgfSxcbiAgICB1cGNhc2U6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnRvVXBwZXJDYXNlKCk7XG4gICAgfSxcbiAgICBkb3duY2FzZTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHN0cikudG9Mb3dlckNhc2UoKTtcbiAgICB9LFxuICAgIGNhcGNhc2U6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oPzpefFxccylcXFMvZywgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEudG9VcHBlckNhc2UoKTsgfSk7XG4gICAgfSxcbiAgICBjaG9wOiBmdW5jdGlvbiAoc3RyLCBuKSB7XG4gICAgICAgIHJldHVybiBzdHIubGVuZ3RoID4gbiA/IHN0ci5zdWJzdHIoMCwgbikgKyBcIi4uLlwiIDogc3RyO1xuICAgIH0sXG4gICAgdGVhc2U6IGZ1bmN0aW9uIChzdHIsIG4pIHtcbiAgICAgICAgdmFyIGEgPSBzdHIuc3BsaXQoL1xccysvKTtcbiAgICAgICAgcmV0dXJuIGEuc2xpY2UoMCwgbikuam9pbihcIiBcIikgKyAoYS5sZW5ndGggPiBuID8gXCIuLi5cIiA6IFwiXCIpO1xuICAgIH0sXG4gICAgdHJpbTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnRyaW0oKTtcbiAgICB9LFxuICAgIHBhY2s6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci50cmltKCkucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7XG4gICAgfSxcbiAgICByb3VuZDogZnVuY3Rpb24gKG51bSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgrbnVtKTtcbiAgICB9LFxuICAgIGNsZWFuOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC88XFwvP1tePl0rPi9naSwgXCJcIik7XG4gICAgfSxcbiAgICBzaXplOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmoubGVuZ3RoO1xuICAgIH0sXG4gICAgbGVuZ3RoOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmoubGVuZ3RoO1xuICAgIH0sXG4gICAgcmV2ZXJzZTogZnVuY3Rpb24gKGFycikge1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KGFycikucmV2ZXJzZSgpO1xuICAgIH0sXG4gICAgam9pbjogZnVuY3Rpb24gKGFyciwgc2VwYXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBhcnIuam9pbihzZXBhcmF0b3IpO1xuICAgIH0sXG4gICAgbGltaXQ6IGZ1bmN0aW9uIChhcnIsIGNvdW50LCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIGFyci5zbGljZSgraWR4IHx8IDAsICtjb3VudCArICgraWR4IHx8IDApKTtcbiAgICB9LFxuICAgIHNwbGl0OiBmdW5jdGlvbiAoc3RyLCBzZXBhcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5zcGxpdChzZXBhcmF0b3IgfHwgXCIsXCIpO1xuICAgIH0sXG4gICAgY2hvb3NlOiBmdW5jdGlvbiAoYm9vbCwgaWZmeSwgZWxzeSkge1xuICAgICAgICByZXR1cm4gISFib29sID8gaWZmeSA6IChlbHN5IHx8IFwiXCIpO1xuICAgIH0sXG4gICAgdG9nZ2xlOiBmdW5jdGlvbiAob2JqLCBjc3YxLCBjc3YyLCBzdHIpIHtcbiAgICAgICAgcmV0dXJuIGNzdjIuc3BsaXQoXCIsXCIpW2NzdjEubWF0Y2goL1xcdysvZykuaW5kZXhPZihvYmogKyBcIlwiKV0gfHwgc3RyO1xuICAgIH0sXG4gICAgc29ydDogZnVuY3Rpb24gKGFyciwgcHJvcCkge1xuICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGFbcHJvcF0gPiBiW3Byb3BdID8gMSA6IC0xO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KGFycikuc29ydChwcm9wID8gZm4gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgZml4OiBmdW5jdGlvbiAobnVtLCBuKSB7XG4gICAgICAgIHJldHVybiAoK251bSkudG9GaXhlZChuKTtcbiAgICB9LFxuICAgIG1vZDogZnVuY3Rpb24gKG51bSwgbikge1xuICAgICAgICByZXR1cm4gKCtudW0pICUgKCtuKTtcbiAgICB9LFxuICAgIGRpdmlzaWJsZTogZnVuY3Rpb24gKG51bSwgbikge1xuICAgICAgICByZXR1cm4gbnVtICYmICgrbnVtICUgbikgPT09IDAgPyBudW0gOiBmYWxzZTtcbiAgICB9LFxuICAgIGV2ZW46IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgcmV0dXJuIG51bSAmJiAoK251bSAmIDEpID09PSAwID8gbnVtIDogZmFsc2U7XG4gICAgfSxcbiAgICBvZGQ6IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgcmV0dXJuIG51bSAmJiAoK251bSAmIDEpID09PSAxID8gbnVtIDogZmFsc2U7XG4gICAgfSxcbiAgICBudW1iZXI6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc3RyLnJlcGxhY2UoL1teXFwtXFxkXFwuXS9nLCBcIlwiKSk7XG4gICAgfSxcbiAgICB1cmw6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSShzdHIpO1xuICAgIH0sXG4gICAgYm9vbDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gISFvYmo7XG4gICAgfSxcbiAgICBmYWxzeTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gIW9iajtcbiAgICB9LFxuICAgIGZpcnN0OiBmdW5jdGlvbiAoaXRlcikge1xuICAgICAgICByZXR1cm4gaXRlci5pZHggPT09IDA7XG4gICAgfSxcbiAgICBsYXN0OiBmdW5jdGlvbiAoaXRlcikge1xuICAgICAgICByZXR1cm4gaXRlci5pZHggPT09IGl0ZXIuc2l6ZSAtIDE7XG4gICAgfSxcbiAgICBjYWxsOiBmdW5jdGlvbiAob2JqLCBmbikge1xuICAgICAgICByZXR1cm4gb2JqW2ZuXS5hcHBseShvYmosIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgICBNYXJrLmdsb2JhbHNba2V5XSA9IG9iajsgcmV0dXJuIFwiXCI7XG4gICAgfSxcbiAgICBsb2c6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgY29uc29sZS5sb2cob2JqKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG59O1xuXG4vLyBTaGltIGZvciBJRS5cbmlmICh0eXBlb2YgU3RyaW5nLnByb3RvdHlwZS50cmltICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgXCJcIik7IFxuICAgIH1cbn1cblxuLy8gRXhwb3J0IGZvciBOb2RlLmpzIGFuZCBBTUQuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gTWFyaztcbn1cbmVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTWFyaztcbiAgICB9KTtcbn1cbiIsInZhciBndWlhVFYgPSAoZnVuY3Rpb24oJCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIC8vY29uc29sZS5sb2coJ1VzYSBqUXVlcnkgdmVyc2lvbjogJyArICQuZm4uanF1ZXJ5KTtcclxuXHJcbiAgICB2YXIgY2FuYWxlc1VzdWFyaW8gPSBbJ2xhMScsICdsYTInLCAnYW50ZW5hMycsICdjdWF0cm8nLCAndGVsZWNpbmNvJywgJ2xhc2V4dGEnXSxcclxuICAgICAgICBjYW5hbGVzR2xvYmFsID0ge30sXHJcbiAgICAgICAgY2F0ZWdvcmlhc1VzdWFyaW8gPSBbXSxcclxuICAgICAgICBhcnJheUNhbmFsZXMgPSBbXSxcclxuICAgICAgICBhcnJheURpYXMgPSBbXTtcclxuICAgIHZhciBhbHRvQmFycmFIb3JhcyA9IDYwLFxyXG4gICAgICAgIC8vYW5jaG9CYXJyYUNhbmFsZXMgPSAxNTAsXHJcbiAgICAgICAgYWx0b0NhbmFsID0gOTAsXHJcbiAgICAgICAgcGl4ZWxzUG9ySG9yYSA9IDMyMCxcclxuICAgICAgICAvLyBhbmNob1BvckRpYSA9IHBpeGVsc1BvckhvcmEgKiAyNCxcclxuICAgICAgICBwaXhlbHNQb3JNaW51dG8gPSBwaXhlbHNQb3JIb3JhIC8gNjA7XHJcblxyXG4gICAgLy8gVE9ETyBBaG9yYSBtaXNtbyBmb3J6YW1vcyBlc3RhIGZlY2hhIGRlIGluaWNpb1xyXG4gICAgdmFyIGRpYUFjdHVhbCA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgaG9yYUFjdHVhbCA9IHtcclxuICAgICAgICAgICAgJ2gnOiBsZWZ0UGFkKGRpYUFjdHVhbC5nZXRIb3VycygpLCAyKSxcclxuICAgICAgICAgICAgJ20nOiBsZWZ0UGFkKGRpYUFjdHVhbC5nZXRNaW51dGVzKCksIDIpXHJcbiAgICAgICAgfTtcclxuICAgIC8vZGlhQWN0dWFsLnNldFRpbWUoRGF0ZS5wYXJzZShcIk1vbiwgSnVsIDE0IDIwMTQgMDA6MDA6MDAgR01UKzAyMDBcIikpO1xyXG4gICAgZGlhQWN0dWFsLnNldFRpbWUoRGF0ZS5wYXJzZSgnTW9uLCBKdWwgMTQgMjAxNCcpKTtcclxuXHJcbiAgICB2YXIgJHZpZXdQb3J0ID0gJCgnLnZpZXdQb3J0Jyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yQ2F0ZWdvcmlhcyA9ICQoJy5zZWxlY3RvckNhdGVnb3JpYXMnKTtcclxuICAgIHZhciAkc2VsZWN0b3JEaWFzID0gJCgnLnNlbGVjdG9yRGlhcycpO1xyXG4gICAgdmFyICRjb250UHJvZ3JhbWFzID0gJCgnLmNvbnRQcm9ncmFtYXMnKTtcclxuICAgIC8vdmFyICRpdGVtUHJvZ3JhbWEgPSAkKCcuaXRlbVByb2dyYW1hJyk7XHJcbiAgICB2YXIgJGNvbnRDYW5hbGVzID0gJCgnLmNvbnRDYW5hbGVzJyk7XHJcbiAgICB2YXIgJGJhcnJhSG9yYXMgPSAkKCcuYmFycmFIb3JhcycpO1xyXG4gICAgdmFyICRpY29ub3NIb3JhcyA9ICQoJy5pY29ub3NIb3JhcycpO1xyXG4gICAgdmFyICRob3JhQWN0dWFsID0gJCgnLmhvcmFBY3R1YWwnKTtcclxuICAgIHZhciAkZmljaGFQcm9ncmFtYSA9ICQoJy5maWNoYVByb2dyYW1hJyk7XHJcbiAgICAvL3ZhciAkYmFycmFzQ2FuYWxlcyA9ICQoJy5iYXJyYXNDYW5hbGVzJyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yQ2FuYWxlcyA9ICQoJy5zZWxlY3RvckNhbmFsZXMnKTtcclxuICAgIHZhciAkYmFycmFMZXRyYXMgPSAkKCcuYmFycmFMZXRyYXMnKTtcclxuICAgIHZhciAkb3JkZW5DYW5hbGVzID0gJCgnLm9yZGVuQ2FuYWxlcycpO1xyXG4gICAgdmFyICRib3RvbmVzQ2FuYWxlcyA9ICQoJy5ib3RvbmVzQ2FuYWxlcycpO1xyXG4gICAgdmFyICRzdXNjcmliaXJDYW5hbGVzID0gJCgnLnN1c2NyaWJpckNhbmFsZXMnKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjY2VkZSBhIGxhcyBjb29raWVzIGRlbCB1c3VhcmlvIHBhcmEgdmVyIHBlcnNvbmFsaXphY2nDs24gZGUgY2FuYWxlc1xyXG4gICAgICogQHJldHVybiB7YXJyYXl9IExpc3RhIGRlIGNhbmFsZXMgcGVyc29uYWxpemFkb3MgcG9yIGVsIHVzdWFyaW9cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY2FyZ2FDb29raWVzKCkge1xyXG4gICAgICAgIC8vIFRPRE8gQ2FyZ2FyIGNhbmFsZXMgZGVzZGUgdW5hIGNvb2tpZSwgeSBnZW5lcmFyIMOpc3RhIGN1YW5kbyBzZSBhY2NlZGUgcG9yIHByaW1lcmEgdmV6XHJcbiAgICAgICAgLy8gVE9ETyBDYXJnYXIgZGUgbGFzIGNvb2tpZXMgbG9zIGNhbmFsZXMgcmVzYWx0YWRvcyBkZWwgc2VsZWN0b3JDYXRlZ29yaWFzXHJcbiAgICAgICAgLy8gTMOzZ2ljYSBkZSBsZWN0dXJhIGRlIGNvb2tpZXNcclxuICAgICAgICB2YXIgZGVmID0gJC5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICBjYW5hbGVzO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNhbmFsZXMgPSBbJ3RlbGVjaW5jbycsICdhbnRlbmEzJywgJ2xhMicsICdsYTEnLCAnY3VhdHJvJywgJ2xhc2V4dGEnLCAnaGlzdG9yaWEnXTtcclxuICAgICAgICAgICAgY2F0ZWdvcmlhc1VzdWFyaW8gPSBbMSwgMiwgMywgNCwgNSwgNiwgN107XHJcbiAgICAgICAgICAgIGRlZi5yZXNvbHZlKGNhbmFsZXMpO1xyXG4gICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgIHJldHVybiBkZWYucHJvbWlzZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY2liZSBsYSBsaXN0YSBkZSBjYW5hbGVzIGEgY2FyZ2FyIHkgaGFjZSBsYXMgbGxhbWFkYXMgYXPDrW5jcm9uYXNcclxuICAgICAqIEBwYXJhbSB7YXJyYXl9IGNhbmFsZXMgTGlzdGFkbyBkZSBjYW5hbGVzIGEgY2FyZ2FyXHJcbiAgICAgKiBAcmV0dXJuIHtqc29ufSBEYXRvcyBqc29uIGRlIGxhIHByb2dyYW1hY2nDs24gYWwgY29tcGxldG8gcGFyYSBsb3MgY2FuYWxlcyBzZWxlY2Npb25hZG9zXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNhcmdhRGF0b3NDYW5hbGVzKGNhbmFsZXMpIHtcclxuICAgICAgICAvLyBDYXJnYXMgYXPDrW5jcm9uYXMgZGUgdmFyaW9zIGNhbmFsZXNcclxuICAgICAgICAvLyBwb3IgY2FkYSBjYW5hbCwgY2FyZ2EgdW4ganNvblxyXG4gICAgICAgIHZhciBqc29uID0gW10sXHJcbiAgICAgICAgICAgIHByb21pc2VzID0gW10sXHJcbiAgICAgICAgICAgIG51bUVsZW1lbnRvcyA9IGNhbmFsZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAkLndoZW4uYXBwbHkobnVsbCwgJC5tYXAoY2FuYWxlcywgZnVuY3Rpb24oY2FuYWwsIGkpIHtcclxuICAgICAgICAgICAgdmFyIGZpY2hlcm8gPSAnZGF0b3MvJyArIGNhbmFsICsgJy5qc29uJztcclxuXHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goJC5nZXQoZmljaGVybykuZG9uZShmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheUNhbmFsZXNbaV0gPSBqc29uW2ldID0gZGF0YTtcclxuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGFycmF5Q2FuYWxlc1tpXSA9IGpzb25baV0gPSAnJztcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8gUmVzb2x2ZXIgZGVmZXJyZXIgY3VhbmRvIHNlIGhheWFuIGNhcmdhZG8gdG9kb3MgbG9zIGpzb25cclxuICAgICAgICByZXR1cm4gJC53aGVuLmFwcGx5KG51bGwsIHByb21pc2VzKS5wcm9taXNlKCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY2liZSBsYSBsaXN0YSBkZSBwcm9ncmFtYXMgYSBwaW50YXIgcG9yIGNhbmFsIHkgbGFuemEgZWwgcGludGFkbyBkZWwgY2FuYWxcclxuICAgICAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YVBhcnJpbGxhKGxpc3RhQ2FuYWxlcywgYXJyYXlDb21wbGV0bykge1xyXG4gICAgICAgIHZhciBsaXN0YSA9IGxpc3RhQ2FuYWxlcyB8fCBjYW5hbGVzVXN1YXJpbztcclxuICAgICAgICB2YXIgY29tcGxldG8gPSBhcnJheUNvbXBsZXRvIHx8IGFycmF5Q2FuYWxlcztcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBpZD1cInt7aWRjYW5hbH19XCIgY2xhc3M9XCJsaW5lYUNhbmFsIGNsZWFyZml4XCI+PC9kaXY+JztcclxuXHJcbiAgICAgICAgJC5lYWNoKGxpc3RhLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuaWRjYW5hbCA9IHY7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRhZG8gPSBNYXJrLnVwKHRlbXBsYXRlLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFBpbnRhbW9zIHByb2dyYW1hcyBlbiBzdXMgY2FuYWxlc1xyXG4gICAgICAgICQuZWFjaChjb21wbGV0bywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICB2YXIgY2FuYWwgPSB2LmNhbmFsLm5vbWJyZTtcclxuICAgICAgICAgICAgdmFyIGRpdkNhbmFsID0gJCgnIycgKyBjYW5hbCk7XHJcblxyXG4gICAgICAgICAgICAkLmVhY2godi5wcm9ncmFtYXMsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBwaW50YVBhcnJpbGxhUHJvZ3JhbWEoaSwgdik7XHJcbiAgICAgICAgICAgICAgICBkaXZDYW5hbC5hcHBlbmQoZGl2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjb3JyZSBlbCBqc29uIGRlIHByb2dyYW1hcyBkZSBkZSB1biBjYW5hbCB5IGxvcyBwaW50YSBlbiAnY29udFByb2dyYW1hcydcclxuICAgICAqIEBwYXJhbSAge2ludH0gcUNhbmFsIElkZW50aWZpY2Fkb3IgZGUgcXXDqSBjYW5hbCBwaW50YW1vc1xyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YVBhcnJpbGxhUHJvZ3JhbWEoaSwgdikge1xyXG5cclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZVByb2dyYW1hID0gJycgK1xyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cIml0ZW1Qcm9ncmFtYVwiIGlkPVwie3tpZF9wcm9ncmFtYX19XCIgZGF0YS11cmw9XCJ7e3VybF9maWNoYX19XCInICtcclxuICAgICAgICAgICAgJ3N0eWxlPVwid2lkdGg6e3tkdXJ9fTsgbGVmdDp7e2RpZmZIb3JhRGlhfX07IHVzZXItc2VsZWN0ZWQ6bm9uZTtcIj4nICtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpdGVtUHJvZ3JhbWFJbm5lciB7e2NsYXNlfX1cIj4nICtcclxuICAgICAgICAgICAgJzxhIGhyZWY9XCJodHRwOi8vZWxtdW5kby5lcy90ZWxldmlzaW9uL3Byb2dyYW1hL3t7aWRfcHJvZ3JhbWF9fVwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPnt7bm9tYnJlfX08L2E+JyArXHJcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNhdGVnb3JpYVwiPnt7Y2F0ZWdvcmlhfX08L3NwYW4+JyArXHJcbiAgICAgICAgICAgICc8aDQ+e3tub21icmV9fTwvaDQ+JyArXHJcbiAgICAgICAgICAgICd7e2lmIGVwaXNvZGlvfX08cD57e2VwaXNvZGlvfX08L3A+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJkdXJhY2lvblwiPnt7ZHVyYWNpb259fTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiZmVjaGFcIj57e2luZm9Ib3JhRHVyYWNpb259fTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJ3t7aWYgZmF2fX08c3BhbiBjbGFzcz1cImZhdm9yaXRvXCI+PGkgY2xhc3M9XCJmYSBmYS1zdGFyXCI+PC9pPjwvc3Bhbj57ey9pZn19JyArXHJcbiAgICAgICAgICAgICd7e2lmIGFsZX19PHNwYW4gY2xhc3M9XCJhbGVydGFcIj48aSBjbGFzcz1cImZhIGZhLWNsb2NrLW9cIj48L2k+PC9zcGFuPnt7L2lmfX0nICtcclxuICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAne3tpZiBzYWxlQ3J1en19PGRpdiBjbGFzcz1cIm1hc2NhcmFcIj48aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+PC9kaXY+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgLy8gU2VsZWNjacOzbiBkZSBjYXRlZ29yw61hXHJcbiAgICAgICAgLy8gbUNpbmUgXCIxMDRcIiAvIG1Db25jdXJzb3MgXCJJTlRfMlwiIC8gbUNvcmF6b24gLyBtRGVwb3J0ZXMgXCI5MFwiIC9cclxuICAgICAgICAvLyBtSW5mb3JtYXRpdm9zIFwiMjBcIiAvIG1NYWdhemluZXMgXCIzMVwiIC8gbVNlcmllcyBcIjFcIlxyXG4gICAgICAgIHZhciBjYXQgPSB2LmNhdGVnb3JpYSxcclxuICAgICAgICAgICAgY2F0ZWdvcmlhLFxyXG4gICAgICAgICAgICBjbGFzZTtcclxuICAgICAgICBzd2l0Y2ggKGNhdCkge1xyXG4gICAgICAgICAgICBjYXNlICcxJzpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gJ2NhdFNlcmllcyc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnc2VyaWVzJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcxMDQnOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSAnY2F0Q2luZSc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnY2luZSc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnMzEnOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSAnY2F0TWFnYXppbmVzJztcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9ICdtYWdhemluZXMnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJzIwJzpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gJ2NhdEluZm9ybWF0aXZvcyc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnaW5mb3JtYXRpdm9zJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICc5MCc6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9ICdjYXREZXBvcnRlcyc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnZGVwb3J0ZXMnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0lOVF8yJzpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gJ2NhdENvbmN1cnNvcyc7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSAnY29uY3Vyc29zJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdJTlRfMSc6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9ICdjYXRDb3Jhem9uJztcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9ICdjb3JhesOzbic7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEVsIGFuY2hvIHZhIGEgZGVwZW5kZXIgZGUgbGEgZHVyYWNpw7NuIGRlbCBwcm9ncmFtYVxyXG4gICAgICAgIHZhciBkdXJhY2lvbiA9IHYuZHVyYWNpb24gKyAnIG1pbnMuJztcclxuICAgICAgICB2YXIgZHVyID0gTWF0aC5jZWlsKHBpeGVsc1Bvck1pbnV0byAqIHYuZHVyYWNpb24pLFxyXG4gICAgICAgICAgICBob3JhX2luaWNpbyA9IG5ldyBEYXRlKHYuaG9yYV9pbmljaW8pLFxyXG4gICAgICAgICAgICBob3JhX2ZpbmFsID0gbmV3IERhdGUodi5ob3JhX2Zpbik7XHJcbiAgICAgICAgdmFyIGRpZmZIb3JhRGlhID0gaG9yYV9pbmljaW8gLSBkaWFBY3R1YWw7XHJcbiAgICAgICAgZGlmZkhvcmFEaWEgPSBNYXRoLmZsb29yKChNYXRoLmZsb29yKGRpZmZIb3JhRGlhIC8gMTAwMCkgLyA2MCkgKiBwaXhlbHNQb3JNaW51dG8pO1xyXG5cclxuICAgICAgICB2YXIgaG9yYV9pID0gaG9yYV9pbmljaW8uZ2V0SG91cnMoKTtcclxuICAgICAgICBob3JhX2kgPSBsZWZ0UGFkKGhvcmFfaSwgMik7XHJcbiAgICAgICAgdmFyIG1pbnNfaSA9IGhvcmFfaW5pY2lvLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBtaW5zX2kgPSBsZWZ0UGFkKG1pbnNfaSwgMik7XHJcblxyXG4gICAgICAgIHZhciBob3JhX2YgPSBob3JhX2ZpbmFsLmdldEhvdXJzKCk7XHJcbiAgICAgICAgaG9yYV9mID0gbGVmdFBhZChob3JhX2YsIDIpO1xyXG4gICAgICAgIHZhciBtaW5zX2YgPSBob3JhX2ZpbmFsLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBtaW5zX2YgPSBsZWZ0UGFkKG1pbnNfZiwgMik7XHJcblxyXG4gICAgICAgIHZhciBpbmZvSG9yYUR1cmFjaW9uID0gJycgKyBob3JhX2kgKyAnOicgKyBtaW5zX2kgKyAnIC0gJyArIGhvcmFfZiArICc6JyArIG1pbnNfZjtcclxuXHJcbiAgICAgICAgLy8gVE9ETyBSYW5kb20gcGFyYSBwb2RlciB2ZXIgcHJvZ3JhbWFzIGZhdm9yaXRvcyB5IGFsZXJ0YXMgZGUgcHJvZ3JhbWFzLiBFTElNSU5BUlxyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpICogMTAwIDwgNSkge1xyXG4gICAgICAgICAgICB2YXIgZmF2ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgKiAxMDAgPCA1KSB7XHJcbiAgICAgICAgICAgIHZhciBhbGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVE9ETyBTaSBlbCBwcm9ncmFtYSBlcyBtZW5vciBkZSAxNSBtaW51dG9zLCBhcGFyZWNlIHVuYSBjcnV6XHJcbiAgICAgICAgaWYgKHYuZHVyYWNpb24gPCAxNSkge1xyXG4gICAgICAgICAgICB2YXIgc2FsZUNydXogPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgY2xhc2U6IGNsYXNlLFxyXG4gICAgICAgICAgICBkdXI6IGR1ciArICdweCcsXHJcbiAgICAgICAgICAgIGRpZmZIb3JhRGlhOiBkaWZmSG9yYURpYSArICdweCcsXHJcbiAgICAgICAgICAgIGlkX3Byb2dyYW1hOiB2LmlkX3Byb2dyYW1hLFxyXG4gICAgICAgICAgICB1cmxfZmljaGE6IHYudXJsX2ZpY2hhLFxyXG4gICAgICAgICAgICBpbmZvSG9yYUR1cmFjaW9uOiBpbmZvSG9yYUR1cmFjaW9uLFxyXG4gICAgICAgICAgICBkdXJhY2lvbjogZHVyYWNpb24sXHJcbiAgICAgICAgICAgIGNhdGVnb3JpYTogY2F0ZWdvcmlhLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgIG5vbWJyZTogdi5ub21icmUsXHJcbiAgICAgICAgICAgIGVwaXNvZGlvOiB2LmVwaXNvZGlvLFxyXG4gICAgICAgICAgICBmYXY6IGZhdiB8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgYWxlOiBhbGUgfCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHNhbGVDcnV6OiBzYWxlQ3J1eiB8IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciByZXN1bHRhZG8gPSBNYXJrLnVwKHRlbXBsYXRlUHJvZ3JhbWEsIGNvbnRleHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRhZG87XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgbG9zIGljb25vcyBkZSBjYW5hbGVzIGVuIGVsIGNvbXBvbmVudGUgJ2NvbnRDYW5hbGVzJ1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUNhbmFsZXMobGlzdGFDYW5hbGVzKSB7XHJcblxyXG4gICAgICAgIHZhciBsaXN0YSA9IGxpc3RhQ2FuYWxlcyB8fCBjYW5hbGVzVXN1YXJpbztcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwiaXRlbUNhbmFsXCI+PGltZyBzcmM9XCJodHRwOi8vZXN0YXRpY29zLmVsbXVuZG8uZXN7e2ljb25vfX1cIiAvPjwvZGl2Pic7XHJcblxyXG4gICAgICAgICQuZWFjaChsaXN0YSwgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBjb250ZXh0Lmljb25vID0gYXJyYXlDYW5hbGVzW2ldLmNhbmFsLmljb25vO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICRjb250Q2FuYWxlcy5hcHBlbmQocmVzdWx0YWRvKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1bmEgYmFycmEgaG9yaXpvbmFsIGNvbiBsYSBtYXJjYSBkZSBob3JhcywgcXVlIHNlIGRlc3BsYXphIGNvbiBlbCB2aWV3UG9ydFxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUhvcmFzUGFycmlsbGEoKSB7XHJcbiAgICAgICAgdmFyIGRpYSA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGksIGo7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgY29udGV4dC5kaWFzID0gW107XHJcbiAgICAgICAgY29udGV4dC5ob3JhcyA9IFtdO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICcnICtcclxuICAgICAgICAgICAgJ3t7ZGlhc319PGRpdiBjbGFzcz1cIml0ZW1EaWFcIiBzdHlsZT1cImxlZnQ6e3twb3N9fXB4XCI+e3tkaWF9fTwvZGl2Pnt7L2RpYXN9fScgK1xyXG4gICAgICAgICAgICAne3tob3Jhc319PGRpdiBjbGFzcz1cIml0ZW1Ib3Jhc1wiIHN0eWxlPVwibGVmdDp7e3Bvc319cHg7XCI+e3t0ZXh0b319PC9kaXY+e3svaG9yYXN9fSc7XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1bmEgYmFycmEgcGFyYSBsb3MgZMOtYXMgKDQpIGRlIGxvcyBxdWUgZGlzcG9uZW1vcyBkZSBkYXRvc1xyXG4gICAgICAgIGZvciAoaiA9IDA7IGogPD0gMzsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICBkaWEuc2V0VGltZShkaWFBY3R1YWwuZ2V0VGltZSgpICsgKGogKiA4NjQwMDAwMCkpO1xyXG4gICAgICAgICAgICB2YXIgZGlhVGV4dCA9IGRpYS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywge1xyXG4gICAgICAgICAgICAgICAgd2Vla2RheTogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgICAgLy95ZWFyOiAnbnVtZXJpYycsXHJcbiAgICAgICAgICAgICAgICBtb250aDogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYydcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbERpYSA9IChqICogcGl4ZWxzUG9ySG9yYSAqIDI0KTtcclxuICAgICAgICAgICAgY29udGV4dC5kaWFzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgJ2RpYSc6IGRpYVRleHQsXHJcbiAgICAgICAgICAgICAgICAncG9zJzogbERpYVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXJyYXlEaWFzLnB1c2goW2RpYVRleHQsIGxEaWFdKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAyNDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGxlZnRQYWQoaSwgMikgKyAnOjAwJztcclxuICAgICAgICAgICAgICAgIHZhciBsID0gKGogKiBwaXhlbHNQb3JIb3JhICogMjQpICsgaSAqIHBpeGVsc1BvckhvcmE7XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5ob3Jhcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAndGV4dG8nOiB0LFxyXG4gICAgICAgICAgICAgICAgICAgICdwb3MnOiBsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICRiYXJyYUhvcmFzLmFwcGVuZChyZXN1bHRhZG8pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1biBzZWxlY3RvciBkZSBhY2Nlc28gZGlyZWN0byBhIGxvcyBkw61hcyBpbmNsdcOtZG9zIGVuIGxhIHByb2dyYW1hY2nDs25cclxuICAgICAqIERlcGVuZGVtb3MgZGUgYXJyYXlEaWFzIHF1ZSBoYSBnZW5lcmFkbyBkYXRvcyBlbiBwaW50YUhvcmFzUGFycmlsbGFcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFTZWxlY3RvckRpYXMoKSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaSBjbGFzcz1cIml0ZW1EaWFcIiBkYXRhLXB4PVwie3tweH19XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Ly9cIj57e2RpYVRleHR9fTwvYT48L2xpPic7XHJcblxyXG4gICAgICAgIGFycmF5RGlhcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlhVGV4dCA9IGl0ZW1bMF07XHJcbiAgICAgICAgICAgIHZhciBweCA9IGl0ZW1bMV07XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgZGlhVGV4dDogZGlhVGV4dCxcclxuICAgICAgICAgICAgICAgIHB4OiBweFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkc2VsZWN0b3JEaWFzLmZpbmQoJ3VsJykuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgdW5hIGZyYW5qYSBxdWUgbWFyY2EgbGEgaG9yYSBhY3R1YWwgZW4gZWwgY29tcG9uZW50ZSBQYXJyaWxsYVxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUhvcmFBY3R1YWwoKSB7XHJcblxyXG4gICAgICAgIHZhciBob3JhcyA9IGhvcmFBY3R1YWwuaCxcclxuICAgICAgICAgICAgbWludXRvcyA9IGhvcmFBY3R1YWwubTtcclxuXHJcbiAgICAgICAgdmFyIGRpdkhvcmEgPSAkKCcuaG9yYUFjdHVhbCcpXHJcbiAgICAgICAgICAgIC5oaWRlKClcclxuICAgICAgICAgICAgLmZpbmQoJ3AnKS50ZXh0KGhvcmFzICsgJzonICsgbWludXRvcykuZW5kKClcclxuICAgICAgICAgICAgLnNob3coKTtcclxuXHJcbiAgICAgICAgdmFyIHBvc1ggPSBwYXJzZUludChob3JhcykgKiBwaXhlbHNQb3JIb3JhICsgcGFyc2VJbnQobWludXRvcykgKiBwaXhlbHNQb3JNaW51dG87XHJcbiAgICAgICAgZGl2SG9yYS5jc3Moe1xyXG4gICAgICAgICAgICAnbGVmdCc6IHBvc1hcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaXTDumEgbGEgUGFycmlsbGEgZW4gZWwgbW9tZW50byBhY3R1YWwsIGZlY2hhIHkgaG9yYVxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzaXR1YVBhcnJpbGxhQWhvcmEoKSB7XHJcbiAgICAgICAgdmFyIG1pdGFkQW5jaG9WaWV3cG9ydCA9ICR2aWV3UG9ydC53aWR0aCgpICogMC41O1xyXG4gICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkaG9yYUFjdHVhbC5jc3MoJ2xlZnQnKSk7XHJcbiAgICAgICAgbXVldmVBID0gcGFyc2VJbnQobWl0YWRBbmNob1ZpZXdwb3J0IC0gbXVldmVBKTtcclxuXHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAnbGVmdCc6IG11ZXZlQSArICdweCdcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICRiYXJyYUhvcmFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgJ2xlZnQnOiBtdWV2ZUEgKyAncHgnXHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICB2YXIgaG9yYUxlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLmgpICogcGl4ZWxzUG9ySG9yYTtcclxuICAgICAgICB2YXIgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgIHZhciBwb3NYID0gaG9yYUxlZnQgKyBtaW51dG9zTGVmdCArIG11ZXZlQTtcclxuICAgICAgICAkaG9yYUFjdHVhbC5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9idGVuZHLDrWFtb3MgZGF0b3MgZGUgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZSB1c3VhcmlvIHZhbGlkYWRvIChzaSBodWJpZXJhKVxyXG4gICAgICogQHJldHVybiB7anNvbn0gT2JqZXRvIGpzb24gY29uIHRvZG9zIGxvcyBwcm9ncmFtYXMgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZWwgdXN1YXJpb1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYXJnYUluZm9Vc3VhcmlvKCkge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNvcmEgbG9zIHByb2dyYW1hcyBlbiBQYXJyaWxsYSBjb24gbGFzIGFsZXJ0YXMgeSBmYXZvcml0b3MgcmVjb3JyaWVuZG8gZWwganNvbiBkZSB1c3VhcmlvXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFQcm9nc1VzdWFyaW8oKSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzb2NpYSB0b2RvcyBsb3MgZXZlbnQgbGlzdGVuZXJzIGEgbG9zIGRpZmVyZW50ZXMgZWxlbWVudG9zIGRlIHVpXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbGFuemFIYW5kbGVycygpIHtcclxuXHJcbiAgICAgICAgdmFyIGFsdG9WaWV3cG9ydCA9ICR2aWV3UG9ydC5oZWlnaHQoKSxcclxuICAgICAgICAgICAgYW5jaG9WaWV3cG9ydCA9ICR2aWV3UG9ydC53aWR0aCgpLFxyXG4gICAgICAgICAgICBhbHRvQ29udFByb2dyYW1hcyA9ICRjb250UHJvZ3JhbWFzLmhlaWdodCgpLFxyXG4gICAgICAgICAgICBhbmNob0NvbnRQcm9ncmFtYXMgPSAkY29udFByb2dyYW1hcy5vZmZzZXRXaWR0aCxcclxuICAgICAgICAgICAgYW5jaG9CYXJyYUNhbmFsZXMgPSAkY29udENhbmFsZXMud2lkdGgoKTtcclxuICAgICAgICB2YXIgaXNEcmFnID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHNlSGFNb3ZpZG8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gSGF5YW1vcyBlbCBlbGVtZW50byBpdGVtUHJvZ3JhbWEgbcOhcyBhIGxhIGl6cXVpZXJkYVxyXG4gICAgICAgIHZhciBwcmltZXJvc0RpdiA9ICQoJy5jb250UHJvZ3JhbWFzID4gZGl2ID4gZGl2OmZpcnN0LWNoaWxkJyksXHJcbiAgICAgICAgICAgIG9mZnNldHNJemRhID0gW107XHJcbiAgICAgICAgJC5lYWNoKHByaW1lcm9zRGl2LCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIG9mZnNldHNJemRhLnB1c2godGhpcy5vZmZzZXRMZWZ0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbWluSXpkYSA9IG9mZnNldHNJemRhLm1pbigpO1xyXG4gICAgICAgIC8vIEhheWFtb3MgZWwgZWxlbWVudG8gaXRlbVByb2dyYW1hIG3DoXMgYSBsYSBkZXJlY2hhXHJcbiAgICAgICAgdmFyIHVsdGltb3NEaXYgPSAkKCcuY29udFByb2dyYW1hcyA+IGRpdiA+IGRpdjpsYXN0LWNoaWxkJyksXHJcbiAgICAgICAgICAgIG9mZnNldHNEcmNoID0gW107XHJcbiAgICAgICAgJC5lYWNoKHVsdGltb3NEaXYsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgb2Zmc2V0c0RyY2gucHVzaCh0aGlzLm9mZnNldExlZnQgKyAkKHRoaXMpLndpZHRoKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBtYXhEcmNoID0gb2Zmc2V0c0RyY2gubWF4KCk7XHJcblxyXG4gICAgICAgIC8vIE5vcyBjYXJnYW1vcyBlbCBwcmVsb2FkZXJcclxuICAgICAgICAkdmlld1BvcnQuZmluZCgnLnByZWxvYWQtd3JhcHBlcicpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgZXZlbnRvcyB0b3VjaCBzb2JyZSBjb250UHJvZ3JhbWFzIHBhcmEgYXJyYXN0cmFyIGxhIHBhcnJpbGxhXHJcbiAgICAgICAgLy8gWSBwYXJhIGV2ZW50byBjbGljayAodGFwKSBlbiBlbGVtZW50b3MgaXRlbVByb2dyYW1hXHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMuc3dpcGUoe1xyXG4gICAgICAgICAgICB0YXA6IGZ1bmN0aW9uKGV2ZW50LCB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdUYXA6JywgZXZlbnQsIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBjbGlja1Byb2dyYW1hKGV2ZW50LCB0YXJnZXQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0cmlnZ2VyT25Ub3VjaEVuZDogdHJ1ZSxcclxuICAgICAgICAgICAgc3dpcGVTdGF0dXM6IHN3aXBlU3RhdHVzLFxyXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IDIwLFxyXG4gICAgICAgICAgICBhbGxvd1BhZ2VTY3JvbGw6IGZhbHNlLFxyXG4gICAgICAgICAgICBleGNsdWRlZEVsZW1lbnRzOiAkLmZuLnN3aXBlLmRlZmF1bHRzLmV4Y2x1ZGVkRWxlbWVudHMgKyAnLCAuaG9yYUFjdHVhbCcsXHJcbiAgICAgICAgICAgIGZpbmdlcnM6ICdhbGwnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZXIgcGFyYSBsYSBzZWxlY2Npw7NuIGRlIHVuYSBob3JhXHJcbiAgICAgICAgJGJhcnJhSG9yYXMub24oJ2NsaWNrJywgJy5pdGVtSG9yYXMnLCBjbGlja0hvcmEpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgZmlsdHJhZG8gcG9yIGNhdGVnb3LDrWFzXHJcbiAgICAgICAgJHNlbGVjdG9yQ2F0ZWdvcmlhcy5vbignY2xpY2snLCAnbGknLCBtYXJjYUNhdGVnb3JpYSk7XHJcbiAgICAgICAgbWFyY2FyQ2F0ZWdvcmlhc1NlbGVjY2lvbmFkYXMoKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIHNlbGVjY2nDs24gZGUgZMOtYVxyXG4gICAgICAgICRzZWxlY3RvckRpYXMub24oJ2NsaWNrJywgJ2xpJywgY2xpY2tEaWEpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgYm90b25lcyBhcnJpYmEvYWJham8gZGUgY2FuYWxlc1xyXG4gICAgICAgICRib3RvbmVzQ2FuYWxlcy5vbignY2xpY2snLCAnLmJ0bicsIGNsaWNrTmF2Q2FuYWxlcyk7XHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIGJvdG9uZXMgaXpkYS9kcmNoYSBkZWwgdmlld3BvcnRcclxuICAgICAgICAkaWNvbm9zSG9yYXMub24oJ2NsaWNrJywgJy5idG4nLCBjbGlja05hdkhvcmFzKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2nDs24gcXVlIG1hbmVqYSBsYXMgYWN0dWFsaXphY2lvbmVzIGRlIGVzdGFkbyBkZSBsYSBwYXJyaWxsYSBhbCBhcnJhc3RyYXJcclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgICAgIE9iamV0byBjb21wbGV0byBkZWwgZXZlbnRvIGxhbnphZG9cclxuICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHBoYXNlICAgICBGYXNlIGRlIGFycmFzdHJlIGVuIGxhIHF1ZSBub3MgZW5jb250cmFtb3NcclxuICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGRpcmVjdGlvbiBEaXJlY2Npw7NuIGRlIGFycmFzdHJlXHJcbiAgICAgICAgICogQHBhcmFtICB7SW50fSBkaXN0YW5jZSAgRGlzdGFuY2lhIGFycmFzdHJhZGEgcG9yIGVsIHVzdWFyaW9cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBzd2lwZVN0YXR1cyhldmVudCwgcGhhc2UsIGRpcmVjdGlvbiwgZGlzdGFuY2UpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChwaGFzZSA9PSAnc3RhcnQnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0cyA9IHRoaXMub2Zmc2V0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VG9wID0gb2Zmc2V0cy50b3A7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0TGVmdCA9IG9mZnNldHMubGVmdDtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmFkZENsYXNzKCdkcmFnZ2luZycpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwaGFzZSA9PSAnbW92ZScpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkWCA9IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZFkgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAndXAnIHx8IGRpcmVjdGlvbiA9PSAnZG93bicpIHtcclxuICAgICAgICAgICAgICAgICAgICBkWSA9IChkaXJlY3Rpb24gPT0gJ3VwJykgPyAtZGlzdGFuY2UgOiBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZFggPSAoZGlyZWN0aW9uID09ICdsZWZ0JykgPyAtZGlzdGFuY2UgOiBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbnRvcCA9IHRoaXMuc3RhcnRUb3AgKyBkWTtcclxuICAgICAgICAgICAgICAgIHZhciBubGVmdCA9IHRoaXMuc3RhcnRMZWZ0ICsgZFg7XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIHRvcCAoYWx0byAkYmFycmFIb3JhcylcclxuICAgICAgICAgICAgICAgIGlmIChudG9wID4gYWx0b0JhcnJhSG9yYXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBudG9wID0gYWx0b0JhcnJhSG9yYXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIGJvdHRvbSAoYWx0b1ZpZXdwb3J0IC0gYWx0b1Byb2dyYW1hcylcclxuICAgICAgICAgICAgICAgIGlmIChudG9wIDwgKGFsdG9WaWV3cG9ydCAtIGFsdG9Db250UHJvZ3JhbWFzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG50b3AgPSAoYWx0b1ZpZXdwb3J0IC0gYWx0b0NvbnRQcm9ncmFtYXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTMOtbWl0ZSByaWdodCAoNzBweCBhbmNobyAkY29udENhbmFsZXMpXHJcbiAgICAgICAgICAgICAgICBpZiAobmxlZnQgPiBhbmNob0JhcnJhQ2FuYWxlcyArIE1hdGguYWJzKG1pbkl6ZGEpICsgNTApIHtcclxuICAgICAgICAgICAgICAgICAgICBubGVmdCA9IGFuY2hvQmFycmFDYW5hbGVzICsgTWF0aC5hYnMobWluSXpkYSkgKyA1MDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEzDrW1pdGUgbGVmdCAoYW5jaG9WaWV3cG9ydCBtZW5vcyBlbCBhbmNobyB0b3RhbCBkZSBwcm9ncmFtYXMpXHJcbiAgICAgICAgICAgICAgICBpZiAobmxlZnQgPCBhbmNob1ZpZXdwb3J0IC0gNTAgLSBNYXRoLmFicyhtYXhEcmNoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5sZWZ0ID0gYW5jaG9WaWV3cG9ydCAtIDUwIC0gTWF0aC5hYnMobWF4RHJjaCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAndG9wJzogbnRvcCArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBubGVmdCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRDYW5hbGVzLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IG50b3AgKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRiYXJyYUhvcmFzLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBubGVmdCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvcmFMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5oKSAqIHBpeGVsc1BvckhvcmEsXHJcbiAgICAgICAgICAgICAgICAgICAgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1ggPSBob3JhTGVmdCArIG1pbnV0b3NMZWZ0ICsgbmxlZnQ7XHJcbiAgICAgICAgICAgICAgICAkaG9yYUFjdHVhbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGhhc2UgPT0gJ2NhbmNlbCcpIHtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLnJlbW92ZUNsYXNzKCdkcmFnZ2luZycpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBoYXNlID09ICdlbmQnKSB7XHJcbiAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhbmRsZXIgZGVsIGNsaWNrIGVuIHVuIGl0ZW1Ib3Jhc1xyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBPYmpldG8gZXZlbnRvIGNvbiB0b2RhIGxhIGluZm8gZGVsIGNsaWNrXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrSG9yYShldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgbXVldmVBID0gcGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2xlZnQnKSk7XHJcbiAgICAgICAgICAgIG11ZXZlQSA9IHBhcnNlSW50KChhbmNob1ZpZXdwb3J0ICogLjUpIC0gbXVldmVBKTtcclxuICAgICAgICAgICAgbXVldmVQcm9ncmFtYXNBUHVudG8obXVldmVBKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYW5kbGVyIGRlbCBjbGljayBlbiB1biBkw61hXHJcbiAgICAgICAgICogQHBhcmFtICB7ZXZlbnR9IGV2ZW50IE9iamV0byBldmVudCBjb24gdG9kYSBsYSBpbmZvIGRlbCBjbGlja1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja0RpYShldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgbXVldmVBID0gcGFyc2VJbnQoJCh0aGlzKS5kYXRhKCdweCcpKSAqIC0xO1xyXG4gICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhtdWV2ZUEgKyBhbmNob0JhcnJhQ2FuYWxlcyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBkZWwgY2xpY2sgZW4gdW4gaXRlbVByb2dyYW1hXHJcbiAgICAgICAgICogQHBhcmFtICB7ZXZlbnR9IGV2ZW50IE9iamV0byBldmVudG8gY29uIHRvZGEgbGEgaW5mbyBkZWwgY2xpY2tcclxuICAgICAgICAgKiBAcGFyYW0gIHtkb21PYmp9IHRhcmdldCBPYmpldG8gRE9NIGVuIGVsIHF1ZSBoZW1vcyBpbnRlcmFjdHVhZG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tQcm9ncmFtYShldmVudCwgdGFyZ2V0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJGVsZW1QYWRyZSA9ICQodGFyZ2V0KS5pcygnLml0ZW1Qcm9ncmFtYScpID8gJCh0YXJnZXQpIDogJCh0YXJnZXQpLmNsb3Nlc3QoJy5pdGVtUHJvZ3JhbWEnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9nVXJsID0gJGVsZW1QYWRyZS5maW5kKCdhJykuYXR0cignaHJlZicpLFxyXG4gICAgICAgICAgICAgICAgcHJvZ0lkID0gJGVsZW1QYWRyZS5hdHRyKCdpZCcpO1xyXG4gICAgICAgICAgICBjYXJnYUZpY2hhUHJvZ3JhbWEocHJvZ0lkLCBwcm9nVXJsKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkZWxlbVBhZHJlLmNzcygnbGVmdCcpKSArICRlbGVtUGFkcmUud2lkdGgoKSAqIC41O1xyXG4gICAgICAgICAgICBtdWV2ZUEgPSBwYXJzZUludCgoYW5jaG9WaWV3cG9ydCAqIC41KSAtIG11ZXZlQSk7XHJcbiAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKG11ZXZlQSk7XHJcblxyXG4gICAgICAgICAgICAvKiBWZXJpw7NuIG5vIG1vYmlsZVxyXG4gICAgICAgICAgICBpZiAoIXNlSGFNb3ZpZG8pIHtcclxuICAgICAgICAgICAgICAgIGlzRHJhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyBDb21wYXRpYmlsaWRhZCBjb24gaVBhZCBhbnRpZ3VvcyAuLlxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpLFxyXG4gICAgICAgICAgICAgICAgICAgICRlbGVtUGFkcmUgPSAkKGVsZW0pLmlzKCcuaXRlbVByb2dyYW1hJykgPyAkKGVsZW0pIDogJChlbGVtKS5jbG9zZXN0KCcuaXRlbVByb2dyYW1hJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHByb2dVcmwgPSAkZWxlbVBhZHJlLmZpbmQoJ2EnKS5hdHRyKCdocmVmJyksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ0lkID0gJGVsZW1QYWRyZS5hdHRyKCdpZCcpO1xyXG4gICAgICAgICAgICAgICAgY2FyZ2FGaWNoYVByb2dyYW1hKHByb2dJZCwgcHJvZ1VybCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG11ZXZlQSA9IHBhcnNlSW50KCRlbGVtUGFkcmUuY3NzKCdsZWZ0JykpICsgJGVsZW1QYWRyZS53aWR0aCgpICogLjU7XHJcbiAgICAgICAgICAgICAgICBtdWV2ZUEgPSBwYXJzZUludCgoYW5jaG9WaWV3cG9ydCAqIC41KSAtIG11ZXZlQSk7XHJcbiAgICAgICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhtdWV2ZUEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FyZ2EgcG9yIGFqYXggbGEgaW5mb3JtYWNpw7NuIGLDoXNpY2EgZGUgbGEgZmljaGEgZGUgcHJvZ3JhbWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtpbnR9IHByb2dJZCAgSWQgZGVsIHByb2dyYW1hXHJcbiAgICAgICAgICogQHBhcmFtICB7c3RyaW5nfSBwcm9nVXJsIFVybCBjb21wbGV0YSBkZSBsYSBydXRhIHBhcmEgY2FyZ2FyIGxhIGZpY2hhXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNhcmdhRmljaGFQcm9ncmFtYShwcm9nSWQsIHByb2dVcmwpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyBQcm9iYXIgZW4gZW50b3JubyBkZSBwcnVlYmFzIGVsbXVuZG8uZXNcclxuICAgICAgICAgICAgLy9wcm9nVXJsID0gJ2h0dHA6Ly93d3cuZWxtdW5kby5lcycgKyBwcm9nVXJsO1xyXG4gICAgICAgICAgICBjaWVycmFGaWNoYSgpO1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogXCJmaWNoYVByb2dyYW1hLmh0bWxcIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAncHJvZ0lkJzogcHJvZ0lkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oaHRtbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuY29udGVuaWRvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJykubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50UGFnZVNjcm9sbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpT1NOYXRpdmVTY3JvbGxpbmc6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWEuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwLCAnc3dpbmcnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWEuZmluZCgnLmNpZXJyYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2llcnJhRmljaGEoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2llcnJhRmljaGEoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoJGZpY2hhUHJvZ3JhbWEuY3NzKCdyaWdodCcpKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC1waXhlbHNQb3JIb3JhXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwLCAnc3dpbmcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFyY2EgY29tbyBhY3RpdmFzIGxhcyBjYXRlZ29yw61hcyBkZSBwcm9ncmFtYSBzZWxlY2Npb25hZGFzXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IE9iamV0byBkZSBldmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gbWFyY2FDYXRlZ29yaWEoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNlID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMF07XHJcblxyXG4gICAgICAgICAgICBpZiAoJGNvbnRQcm9ncmFtYXMuaGFzQ2xhc3MoY2xhc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5yZW1vdmVDbGFzcyhjbGFzZSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3Rpdm8nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmFkZENsYXNzKGNsYXNlKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFyY2EgdG9kYXMgbGFzIGNhdGVnb3LDrWFzIHNlbGVjY2lvbmFkYXMgcG9yIGRlZmVjdG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gbWFyY2FyQ2F0ZWdvcmlhc1NlbGVjY2lvbmFkYXMoKSB7XHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yaWFzVXN1YXJpby5sZW5ndGggPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGNhdGVnb3JpYXNVc3VhcmlvLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdisrO1xyXG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3RvckNhdGVnb3JpYXMuZmluZCgnbGk6bnRoLWNoaWxkKCcgKyB2ICsgJyknKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNdWV2ZSBlbCBjb250UHJvZ3JhbWFzIGEgbGEgcG9zaWNpw7NuIGRhZGFcclxuICAgICAgICAgKiBAcGFyYW0gIHtpbnR9IGNvb3JkWCBDb29yZGVuYWRhIGxlZnRcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gbXVldmVQcm9ncmFtYXNBUHVudG8oY29vcmRYKSB7XHJcbiAgICAgICAgICAgIHZhciBubGVmdCA9IGNvb3JkWCB8fCAwO1xyXG4gICAgICAgICAgICAkY29udFByb2dyYW1hcy5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IG5sZWZ0ICsgJ3B4J1xyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAkYmFycmFIb3Jhcy5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IG5sZWZ0ICsgJ3B4J1xyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICB2YXIgaG9yYUxlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLmgpICogcGl4ZWxzUG9ySG9yYTtcclxuICAgICAgICAgICAgdmFyIG1pbnV0b3NMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5tKSAqIHBpeGVsc1Bvck1pbnV0bztcclxuICAgICAgICAgICAgdmFyIHBvc1ggPSBob3JhTGVmdCArIG1pbnV0b3NMZWZ0ICsgbmxlZnQ7XHJcbiAgICAgICAgICAgICRob3JhQWN0dWFsLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXNwbGF6YSBsYSB2aXN0YSBkZSB2aWV3cG9ydCBhcnJpYmEvYWJham9cclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgT2JqZXRvIGNvbiB0b2RhIGxhIGluZm9ybWFjacOzbiBkZWwgZXZlbnRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrTmF2Q2FuYWxlcyhldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY2xhc2UgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVsxXTtcclxuICAgICAgICAgICAgdmFyIHBvc1lQcm9ncmFtYXMgPSAkY29udFByb2dyYW1hcy5jc3MoJ3RvcCcpLnNwbGl0KCdweCcpWzBdO1xyXG4gICAgICAgICAgICB2YXIgcG9zWUNhbmFsZXMgPSAkY29udENhbmFsZXMuY3NzKCd0b3AnKS5zcGxpdCgncHgnKVswXTtcclxuICAgICAgICAgICAgdmFyIG51bUNhbmFsZXMgPSAkY29udENhbmFsZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGNsYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdidG5BcnJpYmEnOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1vdmVtb3MgY29udFByb2dyYW1hcyB5IGNvbnRDYW5hbGVzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvc1lDYW5hbGVzIC0gYWx0b0NhbmFsID4gYWx0b0JhcnJhSG9yYXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRDYW5hbGVzLmNzcygndG9wJywgcG9zWUNhbmFsZXMgLSBhbHRvQ2FuYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5jc3MoJ3RvcCcsIHBvc1lQcm9ncmFtYXMgLSBhbHRvQ2FuYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250Q2FuYWxlcy5jc3MoJ3RvcCcsIGFsdG9CYXJyYUhvcmFzICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmNzcygndG9wJywgYWx0b0JhcnJhSG9yYXMgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdidG5BYmFqbyc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTW92ZW1vcyBjb250UHJvZ3JhbWFzIHkgY29udENhbmFsZXNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4ID0gcG9zWUNhbmFsZXMgLSBudW1DYW5hbGVzICogYWx0b0NhbmFsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXggPiBwb3NZQ2FuYWxlcyArIGFsdG9DYW5hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udENhbmFsZXMuY3NzKCd0b3AnLCBwb3NZQ2FuYWxlcyArIGFsdG9DYW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmNzcygndG9wJywgcG9zWVByb2dyYW1hcyArIGFsdG9DYW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRDYW5hbGVzLmNzcygndG9wJywgbWF4ICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmNzcygndG9wJywgbWF4ICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVzcGxhemEgbGEgdmlzdGEgZGVsIHZpZXdwb3J0IGEgbG9zIGxhZG9zXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IE9iamV0byBjb24gdG9kYSBsYSBpbmZvcm1hY2nDs24gZGVsIGV2ZW50b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja05hdkhvcmFzKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzZSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgICAgICB2YXIgcG9zWCA9IHBhcnNlSW50KCRjb250UHJvZ3JhbWFzLmNzcygnbGVmdCcpKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvc1gpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChjbGFzZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYnRuSXpkYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgbXVldmVQcm9ncmFtYXNBUHVudG8oTWF0aC5mbG9vcihwYXJzZUludChwb3NYICsgcGl4ZWxzUG9ySG9yYSkpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2J0bkRyY2hhJzpcclxuICAgICAgICAgICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhNYXRoLmZsb29yKHBhcnNlSW50KHBvc1ggLSBwaXhlbHNQb3JIb3JhKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBpbnRhIGVsIHRvdGFsIGRlIGNhbmFsZXMgYSBsb3MgcXVlIHNlIHB1ZWRlIHN1c2NyaWJpciB5IGxhcyBsZXRyYXMgY29ycmVzcG9uZGllbnRlc1xyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUxpc3RhZG9DYW5hbGVzU3VzY3JpcGNpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciB1bExldHJhcyA9ICQoJzx1bCBjbGFzcz1cImxpc3RhQ2FuYWxlcyBjbGVhcmZpeFwiPicpLFxyXG4gICAgICAgICAgICBmaWNoZXJvID0gJ2RhdG9zL2xpc3RhZG9jYW5hbGVzLmpzb24nO1xyXG5cclxuICAgICAgICB2YXIgY29udGV4dExldHJhcyA9IHt9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZUxldHJhcyA9ICd7e2xldHJhc319PGxpIGNsYXNzPVwiaXRlbUxldHJhXCIgZGF0YS1sZXRyYT1cInt7Ln19XCI+e3sufX08L2xpPnt7L2xldHJhc319JztcclxuXHJcbiAgICAgICAgY29udGV4dExldHJhcy5sZXRyYXMgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gKEdlbmVyYSBlbCBiYWNrZW5kKVxyXG4gICAgICAgICQuZ2V0KGZpY2hlcm8pXHJcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNhbmFsZXNHbG9iYWwgPSBkYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0Q2FuYWxlcyA9IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlQ2FuYWxlcyA9ICd7e2NhbmFsZXN9fTxsaSBjbGFzcz1cIml0ZW1DYW5hbFwiIGRhdGEtbGV0cmE9XCJ7e2N1cnJlbnRMZXRyYX19XCIgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtaWRjYW5hbD1cInt7aWRfcHJvZ3JhbWF9fVwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNoZWNrXCI+PC9zcGFuPicgK1xyXG4gICAgICAgICAgICAgICAgICAgIC8vJzxpbWcgc3JjPVwie3tpY29ub319XCIgLz4nICtcclxuICAgICAgICAgICAgICAgICAgICAne3tub21icmVfY29tcGxldG98Y2hvcD4yM319PC9saT57ey9jYW5hbGVzfX0nO1xyXG5cclxuICAgICAgICAgICAgICAgICQuZWFjaChjYW5hbGVzR2xvYmFsLCBmdW5jdGlvbihpLCB2KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIE1hcmsuZ2xvYmFscy5jdXJyZW50TGV0cmEgPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDYW5hbGVzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXRyYTogaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuYWxlczogdlxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRMZXRyYXMubGV0cmFzLnB1c2goaSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRDYW5hbGVzID0gTWFyay51cCh0ZW1wbGF0ZUNhbmFsZXMsIGNvbnRleHRDYW5hbGVzKTtcclxuICAgICAgICAgICAgICAgICAgICB1bExldHJhcy5hcHBlbmQocmVzdWx0Q2FuYWxlcyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBMaXN0YWRvIGNvbiB0b2RhcyBsYXMgbGV0cmFzXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0TGV0cmFzID0gTWFyay51cCh0ZW1wbGF0ZUxldHJhcywgY29udGV4dExldHJhcyk7XHJcbiAgICAgICAgICAgICAgICAkYmFycmFMZXRyYXMuZmluZCgnLmxpc3RhTGV0cmFzJykuYXBwZW5kKHJlc3VsdExldHJhcyk7XHJcbiAgICAgICAgICAgICAgICAvLyBMaXN0YWRvIGRlIHRvZG9zIGxvcyBjYW5hbGVzXHJcbiAgICAgICAgICAgICAgICAkYmFycmFMZXRyYXMuZmluZCgnLm5hbm8tY29udGVudCcpLmh0bWwodWxMZXRyYXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vQ29tcHJvYmFtb3Mgc2kgeWEgZXN0YW1vcyBzdXNjcml0b3MgYSBjYWRhIGNhbmFsXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtQ2FuYWwnKSwgZnVuY3Rpb24oaSwgdikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuYWxlc1VzdWFyaW8uaW5kZXhPZigkKHRoaXMpLmRhdGEoJ2lkY2FuYWwnKSkgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2hlY2snKS5hZGRDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGJhcnJhTGV0cmFzXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJykubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudFBhZ2VTY3JvbGxpbmc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlPU05hdGl2ZVNjcm9sbGluZzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgbG9zIGNhbmFsZXMgYSBsb3MgcXVlIGVzdMOhIHN1c2NyaXRvIGVsIHVzdWFyaW8gKG8gZGVmZWN0bylcclxuICAgICAqIFBlcm1pdGUgcmVvcmRlbmFyIGxvcyBjYW5hbGVzLCBkZXN1c2NyaWJpcnNlIHkgZ3VhcmRhciBsYSBjb25maWd1cmFjacOzblxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUxpc3RhZG9DYW5hbGVzU2VsZWNjaW9uYWRvcygpIHtcclxuXHJcbiAgICAgICAgdmFyIHVsQ2FuYWxlcyA9ICQoJzx1bCBjbGFzcz1cIm9yZGVuIHZlcnRpY2FsXCI+Jyk7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaSBjbGFzcz1cIml0ZW1DYW5hbFwiIGRhdGEtaWRjYW5hbD1cInt7bm9tYnJlfX1cIj4nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiY2hlY2sgc2VsXCI+PC9zcGFuPicgK1xyXG4gICAgICAgICAgICAvLyc8aW1nIHNyYz1cImh0dHA6Ly9lc3RhdGljb3MuZWxtdW5kby5lc3t7aWNvbm99fVwiIC8+JyArXHJcbiAgICAgICAgICAgICd7e25vbWJyZV9jb21wbGV0b3xjaG9wPjIzfX08L2xpPic7XHJcblxyXG4gICAgICAgICQuZWFjaChhcnJheUNhbmFsZXMsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgY29udGV4dCA9IHYuY2FuYWw7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBNYXJrLnVwKHRlbXBsYXRlLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgdWxDYW5hbGVzLmFwcGVuZChyZXN1bHQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkb3JkZW5DYW5hbGVzLmZpbmQoJy5uYW5vLWNvbnRlbnQnKS5odG1sKHVsQ2FuYWxlcyk7XHJcbiAgICAgICAgJG9yZGVuQ2FuYWxlc1xyXG4gICAgICAgICAgICAuZmluZCgnLm5hbm8nKVxyXG4gICAgICAgICAgICAubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50UGFnZVNjcm9sbGluZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpT1NOYXRpdmVTY3JvbGxpbmc6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogW2xhbnphSGFuZGxlcnNTdXNjcmlwaWNpb24gZGVzY3JpcHRpb25dXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbGFuemFIYW5kbGVyc1N1c2NyaXBpY2lvbigpIHtcclxuXHJcbiAgICAgICAgLy8gQ2xpY2sgZW4gaXRlbXMgZGUgc3VzY3JpcGNpw7NuXHJcbiAgICAgICAgJGJhcnJhTGV0cmFzLm9uKCdjbGljaycsICcuaXRlbUNhbmFsJywgY2xpY2tJdGVtQ2FuYWwpO1xyXG5cclxuICAgICAgICAvLyBDbGljayBlbiBjaGVja3MgZW4gZWwgcGFuZWwgZGUgc3VzY3JpdG9zXHJcbiAgICAgICAgJG9yZGVuQ2FuYWxlcy5vbignY2xpY2snLCAnLmNoZWNrJywgY2xpY2tDaGVja09yZGVuQ2FuYWwpO1xyXG5cclxuICAgICAgICAvLyBDbGljayBlbiBzdXNjcmliaXJDYW5hbGVzIHF1ZSBoYWNlIGFwYXJlY2VyIGVsIHNlbGVjdG9yXHJcbiAgICAgICAgJHN1c2NyaWJpckNhbmFsZXMub24oJ2NsaWNrJywgdG9nZ2xlU3VzY3JpcGNpb24pO1xyXG5cclxuICAgICAgICAvLyBDbGljayBlbiBsZXRyYXMgZGUgZmlsdHJvXHJcbiAgICAgICAgJGJhcnJhTGV0cmFzLm9uKCdjbGljaycsICcuaXRlbUxldHJhJywgY2xpY2tGaWx0cm9MZXRyYSk7XHJcblxyXG4gICAgICAgIC8vIEludHJvZHVjY2nDs24gZGUgdGV4dG8gZW4gY2FtcG8gdHh0QnVzY2FyXHJcbiAgICAgICAgJGJhcnJhTGV0cmFzLm9uKCdjbGljaycsICcuZmEtc2VhcmNoJywgZmlsdHJvQ2FuYWwpO1xyXG4gICAgICAgICQoJyN0eHRCdXNjYXInKS5vbigna2V5dXAnLCBmaWx0cm9DYW5hbCk7XHJcblxyXG4gICAgICAgIC8vIFJlb3JkZW5hY2nDs24gZGUgZWxlbWVudG9zIGRlIGNhbmFsLCBkcmFnICYgZHJvcFxyXG4gICAgICAgIHZhciBhZGp1c3RtZW50O1xyXG4gICAgICAgIHZhciBncm91cCA9ICQoJy5vcmRlbkNhbmFsZXMgdWwub3JkZW4nKS5zb3J0YWJsZSh7XHJcbiAgICAgICAgICAgIGdyb3VwOiAnb3JkZW4nLFxyXG4gICAgICAgICAgICBwdWxsUGxhY2Vob2xkZXI6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIGFuaW1hdGlvbiBvbiBkcm9wXHJcbiAgICAgICAgICAgIG9uRHJvcDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdyb3VwLnNvcnRhYmxlKFwic2VyaWFsaXplXCIpLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAnICcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkY2xvbmVkSXRlbSA9ICQoJzxsaS8+JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0uYmVmb3JlKCRjbG9uZWRJdGVtKTtcclxuICAgICAgICAgICAgICAgICRjbG9uZWRJdGVtLmRldGFjaCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9zdXBlcigkaXRlbSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCAkaXRlbSByZWxhdGl2ZSB0byBjdXJzb3IgcG9zaXRpb25cclxuICAgICAgICAgICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9ICRpdGVtLm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXIgPSBjb250YWluZXIucm9vdEdyb3VwLnBvaW50ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGVuZW1vcyBlbiBjdWVudGEgbGEgcG9zaWNpw7NuIGRlbCBuYW5vU2Nyb2xsZXIgZW4gZXNlIG1vbWVudG9cclxuICAgICAgICAgICAgICAgIHZhciBwb3NJbmlTY3JvbGxlciA9ICQoJy5vcmRlbkNhbmFsZXMgLm5hbm8gLm5hbm8tY29udGVudCcpLmdldCgwKS5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBwb3NJbmlTY3JvbGxlciA9IE1hdGguZmxvb3IocG9zSW5pU2Nyb2xsZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFkanVzdG1lbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9pbnRlci5sZWZ0IC0gb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBwb2ludGVyLnRvcCAtIG9mZnNldC50b3AgLSBwb3NJbmlTY3JvbGxlclxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc3VwZXIoJGl0ZW0sIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24oJGl0ZW0sIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgLSBhZGp1c3RtZW50LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgLSBhZGp1c3RtZW50LnRvcFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZ1bmNpb25hbGlkYWQgZGUgY2xpY2thciBlbiB1biBpdGVtQ2FuYWwgZGUgbGEgbGlzdGEgZGUgY2FuYWxlcyBkZSBzdXNjcmlwY2nDs25cclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgRXZlbnRvIGNvbXBsZXRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrSXRlbUNhbmFsKGV2ZW50KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJGNoZWNrID0gJCh0aGlzKS5maW5kKCcuY2hlY2snKTtcclxuICAgICAgICAgICAgdmFyIGJvb2wgPSAkY2hlY2suaGFzQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICB2YXIgaWRjYW5hbCA9ICQodGhpcykuZGF0YSgnaWRjYW5hbCcpO1xyXG4gICAgICAgICAgICB2YXIgJGl0ZW1zQ2FuYWwgPSAkb3JkZW5DYW5hbGVzLmZpbmQoJy5pdGVtQ2FuYWwnKS5maWx0ZXIoZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmRhdGEoJ2lkY2FuYWwnKSA9PT0gaWRjYW5hbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWJvb2wpIHsgLy8gc2kgbnVlc3RybyBlbGVtZW50byBubyBlc3TDoSBzZWxlY2Npb25hZG9cclxuXHJcbiAgICAgICAgICAgICAgICAkY2hlY2sudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRpdGVtc0NhbmFsLmxlbmd0aCkgeyAvLyBzaSB5YSBleGlzdGUgZXN0ZSBjYW5hbCBlbiBlbCBwYW5lbCBkZSBvcmRlblxyXG4gICAgICAgICAgICAgICAgICAgICRpdGVtc0NhbmFsLmZpbmQoJy5jaGVjaycpLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHNpIG5vIGV4aXN0ZSBlc3RlIGNhbmFsIGVuIGVsIHBhbmVsIGRlIG9yZGVuXHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9uZSgpLmFwcGVuZFRvKCRvcmRlbkNhbmFsZXMuZmluZCgndWwnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBzaSBudWVzdHJvIGVsZW1lbnRvIGVzdMOhIHNlbGVjY2lvbmFkb1xyXG4gICAgICAgICAgICAgICAgJGNoZWNrLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgICRpdGVtc0NhbmFsLmZpbmQoJy5jaGVjaycpLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJG9yZGVuQ2FuYWxlc1xyXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJylcclxuICAgICAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAnYm90dG9tJyxcclxuICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGdW5jaW9uYWxpZGFkIHBhcmEgcmVvcmRlbmFyIGxvcyBlbGVtZW50b3MgaXRlbUNhbmFsIGVuIGVsIHBhbmVsIGRlIG9yZGVuXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IEV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja09yZGVuQ2FuYWwoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2xpY2sgZW4gaXRlbUNhbmFsJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBkZSBjbGlja2FyIGVsIGNoZWNrYm94IGVuIGxvcyBpdGVtc0NhbmFsIGRlbCBwYW5lbCBkZSBvcmRlblxyXG4gICAgICAgICAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBFdmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tDaGVja09yZGVuQ2FuYWwoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciBpZGNhbmFsID0gJCh0aGlzKS5wYXJlbnQoJy5pdGVtQ2FuYWwnKS5kYXRhKCdpZGNhbmFsJyk7XHJcbiAgICAgICAgICAgIHZhciAkaXRlbXNDYW5hbCA9ICRiYXJyYUxldHJhcy5maW5kKCcuaXRlbUNhbmFsJykuZmlsdGVyKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5kYXRhKCdpZGNhbmFsJykgPT09IGlkY2FuYWw7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICRpdGVtc0NhbmFsLmZpbmQoJy5jaGVjaycpLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYWNlIGFwYXJlY2VyIG8gZGVzYXBhcmVjZXIgbGEgY2FwYSBjb24gdG9kYSBsYSBpbmZvcm1hY2nDs24gZGUgc3VzY3JpcGNpw7NuXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IEV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVTdXNjcmlwY2lvbihldmVudCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3Rpdm8nKTtcclxuICAgICAgICAgICAgJHNlbGVjdG9yQ2FuYWxlcy50b2dnbGUoJ2Zhc3QnKTtcclxuICAgICAgICAgICAgJG9yZGVuQ2FuYWxlc1xyXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJylcclxuICAgICAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJGJhcnJhTGV0cmFzXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcigpXHJcbiAgICAgICAgICAgICAgICAubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6ICd0b3AnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1Zpc2libGU6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpbHRyYSBsYSBzZWxlY2Npw7NuIGRlIGNhbmFsZXMgcG9yIHN1IGxldHJhIGRlIGNvbWllbnpvXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IEV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja0ZpbHRyb0xldHJhKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBsZXRyYSA9ICQodGhpcykuZGF0YSgnbGV0cmEnKTtcclxuICAgICAgICAgICAgdmFyICRjb2xlY2Npb24gPSAkYmFycmFMZXRyYXMuZmluZCgnLml0ZW1DYW5hbCcpO1xyXG4gICAgICAgICAgICB2YXIgeWFDbGlja2FkbyA9ICQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2bycpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHlhQ2xpY2thZG8pIHtcclxuICAgICAgICAgICAgICAgICRjb2xlY2Npb24uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHNlbCA9ICRjb2xlY2Npb24uZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmRhdGEoJ2xldHJhJykgPT0gbGV0cmE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRzZWwuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgJGNvbGVjY2lvbi5ub3QoJHNlbCkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRiYXJyYUxldHJhc1xyXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJylcclxuICAgICAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZpbHRyYSBsYSBzZWxlY2Npw7NuIGRlIGNhbmFsZXMgcG9yIHVuYSBjYWRlbmEgZGUgdGV4dG9cclxuICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGNhZGVuYSBUZXh0byBwYXJhIGNvbXBhcmFyIGNvbiBlbCBub21icmUgZGVsIGNhbmFsXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGZpbHRyb0NhbmFsKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50LnR5cGUpO1xyXG4gICAgICAgICAgICB2YXIgY2FtcG9UeHQgPSAkKCcjdHh0QnVzY2FyJyksXHJcbiAgICAgICAgICAgICAgICBjYWRlbmEgPSBjYW1wb1R4dC52YWwoKSxcclxuICAgICAgICAgICAgICAgICRzZWw7XHJcbiAgICAgICAgICAgIHZhciAkY29sZWNjaW9uID0gJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtQ2FuYWwnKTtcclxuICAgICAgICAgICAgaWYgKGNhZGVuYS5sZW5ndGggPj0gMyAmJiBjYWRlbmEgIT0gJyAnICYmIGNhZGVuYSAhPSAnJyAmJiBjYWRlbmEgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAkc2VsID0gJGNvbGVjY2lvbi5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vbWJyZUNhbmFsID0gJC50cmltKCQodGhpcykudGV4dCgpKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9tYnJlQ2FuYWwuaW5kZXhPZihjYWRlbmEpID4gLTE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2VsLnNob3coKTtcclxuICAgICAgICAgICAgJGNvbGVjY2lvbi5ub3QoJHNlbCkuaGlkZSgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKiogSU5JVCAqKi9cclxuICAgIChmdW5jdGlvbiBpbml0KCkge1xyXG5cclxuICAgICAgICAkc2VsZWN0b3JDYW5hbGVzLmhpZGUoKTtcclxuXHJcbiAgICAgICAgdmFyIGNhcmdhSW5mb0Nvb2tpZXMgPSBjYXJnYUNvb2tpZXMoKTtcclxuICAgICAgICB2YXIgY2FyZ2FJbmZvQ2FuYWxlcyA9IGNhcmdhSW5mb0Nvb2tpZXMudGhlbihmdW5jdGlvbihyZXMpIHtcclxuICAgICAgICAgICAgICAgIGNhbmFsZXNVc3VhcmlvID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhcmdhRGF0b3NDYW5hbGVzKGNhbmFsZXNVc3VhcmlvKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBwaW50YUNhbmFsZXMoY2FuYWxlc1VzdWFyaW8pOyAvLyBQaW50YXIgZW4gZWwgb3JkZW4gZW4gcXVlIGxsZWdhbiBkZSBsYSBjb29raWVcclxuICAgICAgICAgICAgICAgIHBpbnRhUGFycmlsbGEoY2FuYWxlc1VzdWFyaW8sIGFycmF5Q2FuYWxlcyk7IC8vIFBpbnRhciBlbiBlbCBvcmRlbiBlbiBxdWUgbGxlZ2FuIGRlIGxhIGNvb2tpZVxyXG4gICAgICAgICAgICAgICAgcGludGFIb3Jhc1BhcnJpbGxhKCk7IC8vIFBpbnRhciBsYSBiYXJyYSBzdXBlcmlvciBkZSBob3JhcmlvXHJcbiAgICAgICAgICAgICAgICBwaW50YVNlbGVjdG9yRGlhcygpOyAvLyBQaW50YW1vcyBsb3MgbGl0ZXJhbGVzIGRlIGxvcyBkw61hcyBjb250ZW1wbGFkb3MgZW4gcGFycmlsbGFcclxuXHJcbiAgICAgICAgICAgICAgICBwaW50YUhvcmFBY3R1YWwoKTsgLy8gUG9zaWNpb25hIGVsIG1hcmNhZG9yIGRlIGhvcmEgYWN0dWFsIGVuIGxhIHBhcnJpbGxhXHJcbiAgICAgICAgICAgICAgICBzaXR1YVBhcnJpbGxhQWhvcmEoKTsgLy8gUG9zaWNpb25hIGxhIHBhcnJpbGxhIHkgZWxlbWVudG9zIGVuIGxhIGZlY2hhIHkgaG9yYSBhY3R1YWxcclxuICAgICAgICAgICAgICAgIGxhbnphSGFuZGxlcnMoKTsgLy8gTGFuemEgdG9kb3MgbG9zIGV2ZW50IGxpc3RlbmVyc1xyXG5cclxuICAgICAgICAgICAgICAgIHBpbnRhTGlzdGFkb0NhbmFsZXNTZWxlY2Npb25hZG9zKCk7IC8vIFBpbnRhbW9zIGVsIMOhcmVhIGRlIGNhbmFsZXMgc2VsZWNjaW9uYWRvc1xyXG4gICAgICAgICAgICAgICAgcGludGFMaXN0YWRvQ2FuYWxlc1N1c2NyaXBjaW9uKCk7IC8vIFBpbnRhbW9zIGVsIHNlbGVjdG9yIGRlIGNhbmFsZXMgY29tcGxldG8gYWwgcGllXHJcblxyXG4gICAgICAgICAgICAgICAgbGFuemFIYW5kbGVyc1N1c2NyaXBpY2lvbigpOyAvLyBMYW56YSB0b2RvcyBsb3MgZXZlbnRzIGxpc3RlbmVycyBkZSBzdXNjcmlwY2nDs24gYSBjYW5hbGVzXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL2NhcmdhSW5mb1VzdWFyaW8oKTsgLy8gQ2FyZ2EgbGEgaW5mb3JtYWNpw7NuIHNvYnJlIHByb2dyYW1hcyBmYXZvcml0b3MgeSBhbGVydGFzIGRlIHVuIHVzdWFyaW8gdmFsaWRhZG9cclxuICAgICAgICAvL3BpbnRhUHJvZ3NVc3VhcmlvKCk7IC8vIE1vZGlmaWNhIGxhcyBjbGFzZXMgZGUgbG9zIHByb2dyYW1hcyBxdWUgZWwgdXN1YXJpbyB0ZW5nYSBjb21vIGZhdm9yaXRvcyBvIGFsZXJ0YXNcclxuXHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qKiBIZWxwZXIgKiovXHJcbiAgICAkLmZuLmV4aXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcblxyXG59KShqcTExMSk7XHJcblxyXG4vKipcclxuICogQ3JlYSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSAgTm9tYnJlIGRlIGxhIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtvYmplY3R9IHZhbHVlIFZhbG9yIGRlIGxhIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtpbnR9IGRheXMgIE7Dum1lcm8gZGUgZMOtYXMgZGUgdmlnZW5jaWFcclxuICogQHJldHVybiB7fVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ29va2llKG5hbWUsIHZhbHVlLCBkYXlzKSB7XHJcbiAgICB2YXIgZXhwaXJlcztcclxuXHJcbiAgICBpZiAoZGF5cykge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAoZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICBleHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvR01UU3RyaW5nKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV4cGlyZXMgPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgZG9jdW1lbnQuY29va2llID0gZXNjYXBlKG5hbWUpICsgXCI9XCIgKyBlc2NhcGUodmFsdWUpICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIjtcclxufVxyXG4vKipcclxuICogTGVlIHVuYSBjb29raWVcclxuICogQHBhcmFtICB7c3RyaW5nfSBuYW1lIE5vbWJyZSBkZSBsYSBjb29raWVcclxuICogQHJldHVybiB7c3RyaW5nfSAgICAgIFZhbG9yIGRlIGxhIGNvb2tpZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVhZENvb2tpZShuYW1lKSB7XHJcbiAgICB2YXIgbmFtZUVRID0gZXNjYXBlKG5hbWUpICsgXCI9XCI7XHJcbiAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IGNhW2ldO1xyXG4gICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PT0gJyAnKSBjID0gYy5zdWJzdHJpbmcoMSwgYy5sZW5ndGgpO1xyXG4gICAgICAgIGlmIChjLmluZGV4T2YobmFtZUVRKSA9PT0gMCkgcmV0dXJuIHVuZXNjYXBlKGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4vKipcclxuICogRWxpbWluYSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSBOb21icmUgZGUgbGEgY29va2llXHJcbiAqIEByZXR1cm4ge31cclxuICovXHJcbmZ1bmN0aW9uIGVyYXNlQ29va2llKG5hbWUpIHtcclxuICAgIGNyZWF0ZUNvb2tpZShuYW1lLCBcIlwiLCAtMSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXZ1ZWx2ZSB1biBuw7ptZXJvIGNvbW8gY2FkZW5hIGZvcm1hdGVhZGEgY29uIGNlcm9zIGEgbGEgaXpkYVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAgICAgICBFbCBuw7ptZXJvIG9yaWdpbmFsXHJcbiAqIEBwYXJhbSAge2ludGVnZXJ9IHRhcmdldExlbmd0aCBOw7ptZXJvIGRlIGNhcmFjdGVyZXMgcXVlIHF1ZXJlbW9zIG9idGVuZXJcclxuICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgICAgQ2FkZW5hIGNvbXB1ZXN0YSBkZSBjZXJvcyB5IGVsIG7Dum1lcm8gb3JpZ2luYWxcclxuICovXHJcbmZ1bmN0aW9uIGxlZnRQYWQobnVtYmVyLCB0YXJnZXRMZW5ndGgpIHtcclxuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgKyAnJztcclxuICAgIHdoaWxlIChvdXRwdXQubGVuZ3RoIDwgdGFyZ2V0TGVuZ3RoKSB7XHJcbiAgICAgICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb3RvdGlwbyBwYXJhIG9idGVuZXIgbsO6bWVyb3MgbcOheGltbyB5IG3DrW5pbW8gZW4gdW4gYXJyYXlcclxuICogQHJldHVybiB7aW50fSBEZXZ1ZWx2ZSBlbCBtYXgvbWluIGRlIHVuIGFycmF5IGRhZG9cclxuICovXHJcbkFycmF5LnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtYXggPSB0aGlzWzBdO1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKylcclxuICAgICAgICBpZiAodGhpc1tpXSA+IG1heCkgbWF4ID0gdGhpc1tpXTtcclxuICAgIHJldHVybiBtYXg7XHJcbn07XHJcbkFycmF5LnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtaW4gPSB0aGlzWzBdO1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKylcclxuICAgICAgICBpZiAodGhpc1tpXSA8IG1pbikgbWluID0gdGhpc1tpXTtcclxuICAgIHJldHVybiBtaW47XHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9