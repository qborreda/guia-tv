function createCookie(t,e,i){var n;if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toGMTString()}else n="";document.cookie=escape(t)+"="+escape(e)+n+"; path=/"}function readCookie(t){for(var e=escape(t)+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return unescape(o.substring(e.length,o.length))}return null}function eraseCookie(t){createCookie(t,"",-1)}function leftPad(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}!function(t,e,i,n){function o(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),n=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+n}function s(e,i,n,o){var s=e.length,r=o?"offset":"position";for(n=n||0;s--;){var a=e[s].el?e[s].el:t(e[s]),l=a[r]();l.left+=parseInt(a.css("margin-left"),10),l.top+=parseInt(a.css("margin-top"),10),i[s]=[l.left-n,l.left+a.outerWidth()+n,l.top-n,l.top+a.outerHeight()+n]}}function r(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function a(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var n,s=t.length,r=[];s--;)n=t[s],r[s]=[s,o(n,e),i&&o(n,i)];return r=r.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function l(e){this.options=t.extend({},u,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=n))}function c(e,i){this.el=e,this.options=t.extend({},p,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var n=this.rootGroup.options.itemPath;this.target=n?this.el.find(n):this.el,this.target.on(h.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var h,p={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},u={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",placeholderClass:"placeholder",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(t,e){t.css(e)},onDragStart:function(e,i){e.css({height:e.height(),width:e.width()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){return i.target.nodeName.match(/^(input|select|textarea)$/i)?void 0:(i.preventDefault(),!0)},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(e,i,n){var o=t.extend({},e.data());return n?[i]:(i[0]&&(o.children=i),delete o.subContainers,delete o.sortable,o)},tolerance:0},f={},d=0,g={left:0,top:0,bottom:0,right:0},h={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},v="subContainers";l.get=function(t){return f[t.group]||(t.group===n&&(t.group=d++),f[t.group]=new l(t)),f[t.group]},l.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,u.onMousedown,e)&&(this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,u.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,r(this.pointer,this.item.offsetParent()),u.onDrag,t);var e=t.pageX||t.originalEvent.pageX,i=t.pageY||t.originalEvent.pageY,o=this.sameResultBox,s=this.options.tolerance;(!o||o.top-s>i||o.bottom+s<i||o.left-s>e||o.right+s<e)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=n))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,u.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),u.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),o=i.length;o--;){var s=i[o][0],l=i[o][1];if(!l||this.options.pullPlaceholder){var c=this.containers[s];if(!c.disabled){if(!this.$getOffsetParent()){var h=c.getItemOffsetParent();t=r(t,h),e=r(e,h)}if(c.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(t,e,i,n){var o=this.lastAppendedItem;(n||!o||o[0]!==e[0])&&(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=n,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||s(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===n){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=r(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){return{left:t.pageX||t.originalEvent.pageX,top:t.pageY||t.originalEvent.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,n=["drag","drop","scroll"];t.each(n,function(t,n){i.$document[e](h[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=n},_destroy:function(){f[this.options.group]=n}},c.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=a(this.getItemDimensions(),t,e),n=i.length,o=this.rootGroup,s=!o.options.isValidTarget||o.options.isValidTarget(o.item,this);if(!n&&s)return o.movePlaceholder(this,this.target,"append"),!0;for(;n--;){var r=i[n][0],l=i[n][1];if(!l&&this.hasChildGroup(r)){var c=this.getContainerGroup(r).searchValidTarget(t,e);if(c)return!0}else if(s)return this.movePlaceholder(r,t),!0}},movePlaceholder:function(e,i){var n=t(this.items[e]),o=this.itemDimensions[e],s="after",r=n.outerWidth(),a=n.outerHeight(),l=n.offset(),c={left:l.left,right:l.left+r,top:l.top,bottom:l.top+a};if(this.options.vertical){var h=(o[2]+o[3])/2,p=i.top<=h;p?(s="before",c.bottom-=a/2):c.top+=a/2}else{var u=(o[0]+o[1])/2,f=i.left<=u;f?(s="before",c.right-=r/2):c.left+=r/2}this.hasChildGroup(e)&&(c=g),this.rootGroup.movePlaceholder(this,n,s,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),s(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var o=t.data(this.items[e],v);if(o===n){var s=this.$getChildren(this.items[e],"container");if(o=!1,s[0]){var r=t.extend({},this.options,{rootGroup:this.rootGroup,group:d++});o=s[i](r).data(i).group}t.data(this.items[e],v,o)}return o},$getChildren:function(e,i){var n=this.rootGroup.options,o=n[i+"Path"],s=n[i+"Selector"];return e=t(e),o&&(e=e.find(o)),e.children(s)},_serialize:function(e,i){var n=this,o=i?"item":"container",s=this.$getChildren(e,o).not(this.options.exclude).map(function(){return n._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,s,i)},traverse:function(e){t.each(this.items||[],function(){var i=t.data(this,v);i&&i.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=n},_destroy:function(){var e=this;this.target.off(h.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,v)})}};var m={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(c.prototype,m),t.fn[i]=function(e){var o=Array.prototype.slice.call(arguments,1);return this.map(function(){var s=t(this),r=s.data(i);return r&&m[e]?m[e].apply(r,o)||this:(r||e!==n&&"object"!=typeof e||s.data(i,new c(s,e)),this)})}}(jq111,window,"sortable"),function(t,e,i){"use strict";var n,o,s,r,a,l,c,h,p,u,f,d,g,v,m,b,y,x,S,C,T,w,M,D,P,k,_,$,O,I,H;M={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},x="scrollbar",y="scroll",p="mousedown",u="mouseenter",f="mousemove",g="mousewheel",d="mouseup",b="resize",a="drag",l="enter",C="up",m="panedown",s="DOMMouseScroll",r="down",T="wheel",c="keydown",h="keyup",S="touchmove",n="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,o=null,_=e.requestAnimationFrame,w=e.cancelAnimationFrame,O=i.createElement("div").style,H=function(){var t,e,i,n,o,s;for(n=["t","webkitT","MozT","msT","OT"],t=o=0,s=n.length;s>o;t=++o)if(i=n[t],e=n[t]+"ransform",e in O)return n[t].substr(0,n[t].length-1);return!1}(),I=function(t){return H===!1?!1:""===H?t:H+t.charAt(0).toUpperCase()+t.substr(1)},$=I("transform"),P=$!==!1,D=function(){var t,e,n;return t=i.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=y,e.top="-9999px",i.body.appendChild(t),n=t.offsetWidth-t.clientWidth,i.body.removeChild(t),n},k=function(){var t,i,n;return i=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),t&&+n>23):!1},v=function(){function c(n,s){this.el=n,this.options=s,o||(o=D()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+s.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===s)(e===r&&t.originalEvent.detail>0||e===C&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===g){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===r&&t.originalEvent.wheelDelta<0||e===C&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;P?(t={},t[$]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},_?(w&&this.scrollRAF&&w(this.scrollRAF),this.scrollRAF=_(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(f,t.events[a]).bind(d,t.events[C]),t.body.bind(u,t.events[l]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(f,t.events[a]).unbind(d,t.events[C]),t.body.unbind(u,t.events[l]),!1}}(this),resize:function(t){return function(){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,r),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,C),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var i;if(null!=e)return i=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,i&&(t.sliderY+=-i/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var i;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(i=t.events)[C].apply(i,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(b,t[b]),this.iOSNativeScrolling||(this.slider.bind(p,t[r]),this.pane.bind(p,t[m]).bind(""+g+" "+s,t[T])),this.$content.bind(""+y+" "+g+" "+s+" "+S,t[y])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(b,t[b]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+y+" "+g+" "+s+" "+S,t[y])},c.prototype.generate=function(){var t,i,n,s,r,a,l;return s=this.options,a=s.paneClass,l=s.sliderClass,t=s.contentClass,(r=this.$el.children("."+a)).length||r.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===o&&k()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+n+14}):o&&(i={right:-o},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,i,s,r,a,l,c,h,p,u,f;return this.iOSNativeScrolling?(this.contentHeight=this.content.scrollHeight,void 0):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,s=t.style,r=s.overflowY,n&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+o,p=parseInt(this.$el.css("max-height"),10),p>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>p?p:t.scrollHeight)),l=this.pane.outerHeight(!1),h=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+h+a,f=Math.round(c/e*c),f<this.options.sliderMinHeight?f=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&f>this.options.sliderMaxHeight&&(f=this.options.sliderMaxHeight),r===y&&s.overflowX!==y&&(f+=o),this.maxSliderTop=c-f,this.contentHeight=e,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=f,this.paneTop=h,this.slider.height(f),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&r!==y?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&r===y?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),("static"===i||"relative"===i)&&(u=parseInt(this.$content.css("right"),10),u&&this.$content.css({right:"",marginRight:u})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return w&&this.scrollRAF&&(w(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=t.extend({},M,e),this.nanoscroller=n=new v(this,i)),e&&"object"==typeof e){if(t.extend(n.options,e),null!=e.scrollBottom)return n.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return n.scrollTop(e.scrollTop);if(e.scrollTo)return n.scrollTo(e.scrollTo);if("bottom"===e.scroll)return n.scrollBottom(0);if("top"===e.scroll)return n.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return n.scrollTo(e.scroll);if(e.stop)return n.stop();if(e.destroy)return n.destroy();if(e.flash)return n.flash()}return n.reset()})},t.fn.nanoScroller.Constructor=v}(jq111,window,document);var Mark={includes:{},globals:{},delimiter:">",compact:!1,_copy:function(t,e){e=e||[];for(var i in t)e[i]=t[i];return e},_size:function(t){return t instanceof Array?t.length:t||0},_iter:function(t,e){this.idx=t,this.size=e,this.length=e,this.sign="#",this.toString=function(){return this.idx+this.sign.length-1}},_pipe:function(t,e){var i,n,o,s;if(i=e.shift()){n=i.split(this.delimiter),o=n.shift().trim();try{s=Mark.pipes[o].apply(null,[t].concat(n)),t=this._pipe(s,e)}catch(r){}}return t},_eval:function(t,e,i){var n,o,s=this._pipe(t,e),r=s,a=-1;if(s instanceof Array)for(s="",n=r.length;++a<n;)o={iter:new this._iter(a,n)},s+=i?Mark.up(i,r[a],o):r[a];else s instanceof Object&&(s=Mark.up(i,r));return s},_test:function(t,e,i,n){var o=Mark.up(e,i,n).split(/\{\{\s*else\s*\}\}/);return(t===!1?o[1]:o[0])||""},_bridge:function(t,e){"."==e&&(e="\\.");var i,n,o="{{\\s*"+e+"([^/}]+\\w*)?}}|{{/"+e+"\\s*}}",s=new RegExp(o,"g"),r=t.match(s)||[],a=0,l=0,c=-1,h=0;for(n=0;n<r.length&&(i=n,c=t.indexOf(r[i],c+1),r[i].indexOf("{{/")>-1?l++:a++,a!==l);n++);return a=t.indexOf(r[0]),l=a+r[0].length,h=c+r[i].length,[t.substring(a,h),t.substring(l,c)]}};Mark.up=function(t,e,i){e=e||{},i=i||{};var n,o,s,r,a,l,c,h,p,u,f=/\{\{(.+?)\}\}/g,d=t.match(f)||[],g=[],v=0,m=0;for(i.pipes&&this._copy(i.pipes,this.pipes),i.includes&&this._copy(i.includes,this.includes),i.globals&&this._copy(i.globals,this.globals),i.delimiter&&(this.delimiter=i.delimiter),void 0!==i.compact&&(this.compact=i.compact);n=d[v++];)if(c=void 0,l="",r=n.indexOf("/}}")>-1,o=n.substr(2,n.length-(r?5:4)),o=o.replace(/`(.+?)`/g,function(t,i){return Mark.up("{{"+i+"}}",e)}),a=0===o.trim().indexOf("if "),g=o.split("|"),g.shift(),o=o.replace(/^\s*if/,"").split("|").shift().trim(),s=a?"if":o.split("|")[0],u=e[o],a&&!g.length&&(g=["notempty"]),!r&&t.indexOf("{{/"+s)>-1&&(c=this._bridge(t,s),n=c[0],l=c[1],v+=n.match(f).length-1),!/^\{\{\s*else\s*\}\}$/.test(n)){if(void 0!==(h=this.globals[o]))c=this._eval(h,g,l);else if(p=this.includes[o])p instanceof Function&&(p=p()),c=this._pipe(Mark.up(p,e,i),g);else if(o.indexOf("#")>-1)i.iter.sign=o,c=this._pipe(i.iter,g);else if("."===o)c=this._pipe(e,g);else if(o.indexOf(".")>-1){for(o=o.split("."),u=Mark.globals[o[0]],u?m=1:(m=0,u=e);u&&m<o.length;)u=u[o[m++]];c=this._eval(u,g,l)}else a?c=this._pipe(u,g):u instanceof Array?c=this._eval(u,g,l):l?c=u?Mark.up(l,u):void 0:e.hasOwnProperty(o)&&(c=this._pipe(u,g));c instanceof Array&&(c=this._eval(c,g,l)),a&&(c=this._test(c,l,e,i)),t=t.replace(n,void 0===c?"???":c)}return this.compact?t.replace(/>\s+</g,"><"):t},Mark.pipes={empty:function(t){return t&&0!==(t+"").trim().length?!1:t},notempty:function(t){return t&&(t+"").trim().length?t:!1},blank:function(t,e){return t||0===t?t:e},more:function(t,e){return Mark._size(t)>e?t:!1},less:function(t,e){return Mark._size(t)<e?t:!1},ormore:function(t,e){return Mark._size(t)>=e?t:!1},orless:function(t,e){return Mark._size(t)<=e?t:!1},between:function(t,e,i){return t=Mark._size(t),t>=e&&i>=t?t:!1},equals:function(t,e){return t==e?t:!1},notequals:function(t,e){return t!=e?t:!1},like:function(t,e){return new RegExp(e,"i").test(t)?t:!1},notlike:function(t,e){return Mark.pipes.like(t,e)?!1:t},upcase:function(t){return String(t).toUpperCase()},downcase:function(t){return String(t).toLowerCase()},capcase:function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},chop:function(t,e){return t.length>e?t.substr(0,e)+"...":t},tease:function(t,e){var i=t.split(/\s+/);return i.slice(0,e).join(" ")+(i.length>e?"...":"")},trim:function(t){return t.trim()},pack:function(t){return t.trim().replace(/\s{2,}/g," ")},round:function(t){return Math.round(+t)},clean:function(t){return String(t).replace(/<\/?[^>]+>/gi,"")},size:function(t){return t.length},length:function(t){return t.length},reverse:function(t){return[].concat(t).reverse()},join:function(t,e){return t.join(e)},limit:function(t,e,i){return t.slice(+i||0,+e+(+i||0))},split:function(t,e){return t.split(e||",")},choose:function(t,e,i){return t?e:i||""},toggle:function(t,e,i,n){return i.split(",")[e.match(/\w+/g).indexOf(t+"")]||n},sort:function(t,e){var i=function(t,i){return t[e]>i[e]?1:-1};return[].concat(t).sort(e?i:void 0)},fix:function(t,e){return(+t).toFixed(e)},mod:function(t,e){return+t%+e},divisible:function(t,e){return t&&+t%e===0?t:!1},even:function(t){return t&&0===(1&+t)?t:!1},odd:function(t){return t&&1===(1&+t)?t:!1},number:function(t){return parseFloat(t.replace(/[^\-\d\.]/g,""))},url:function(t){return encodeURI(t)},bool:function(t){return!!t},falsy:function(t){return!t},first:function(t){return 0===t.idx},last:function(t){return t.idx===t.size-1},call:function(t,e){return t[e].apply(t,[].slice.call(arguments,2))},set:function(t,e){return Mark.globals[e]=t,""},log:function(t){return console.log(t),t}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof module&&module.exports?module.exports=Mark:"function"==typeof define&&define.amd&&define(function(){return Mark});var guiaTV=function(t){"use strict";function e(){var e,i=t.Deferred();return setTimeout(function(){e=["telecinco","antena3","la2","la1","cuatro","lasexta","historia"],v=[2,4,5,7],i.resolve(e)},3e3),i.promise()}function i(e){{var i=[],n=[];e.length}return t.when.apply(null,t.map(e,function(e,o){var s="datos/"+e+".json";n.push(t.get(s).done(function(t){m[o]=i[o]=t}).fail(function(){m[o]=i[o]=""}))})),t.when.apply(null,n).promise()}function n(e,i){var n=e||d,s=i||m,r={},a='<div id="{{idcanal}}" class="lineaCanal clearfix"></div>';t.each(n,function(t,e){r.idcanal=e;var i=Mark.up(a,r);k.append(i)}),t.each(s,function(e,i){var n=i.canal.nombre,s=t("#"+n);t.each(i.programas,function(t,e){var i=o(t,e);s.append(i)})})}function o(t,e){var i,n={},o='<div class="itemPrograma" id="{{id_programa}}" data-url="{{url_ficha}}"style="width:{{dur}}; left:{{diffHoraDia}}; user-selected:none;"><div class="itemProgramaInner {{clase}}"><span class="fecha">{{infoHoraDuracion}}</span><a href="http://elmundo.es/television/programa/{{id_programa}}" style="display:none;">{{nombre}}</a><h4>{{nombre}}</h4>{{if episodio}}<p>{{episodio}}</p>{{/if}}{{if fav}}<span class="favorito"><i class="fa fa-bookmark"></i></span>{{/if}}{{if ale}}<span class="alerta"><i class="fa fa-clock-o"></i></span>{{/if}}</div></div>"',s=e.categoria;switch(s){case"1":i="catSeries";break;case"104":i="catCine";break;case"31":i="catMagazines";break;case"20":i="catInformativos";break;case"90":i="catDeportes";break;case"INT_2":i="catConcursos";break;case"INT_1":i="catCorazon"}var r=Math.floor(C*e.duracion),a=new Date(e.hora_inicio),l=Math.floor(a-T);l=Math.floor(l/1e3/60*C);var c=a.getHours();c=leftPad(c,2);var h=a.getMinutes();h=leftPad(h,2);var p=""+c+":"+h+" | "+e.duracion+" mins.";if(100*Math.random()<5)var u=!0;if(100*Math.random()<5)var f=!0;n={clase:i,dur:r+"px",diffHoraDia:l+"px",id_programa:e.id_programa,url_ficha:e.url_ficha,infoHoraDuracion:p,nombre:e.nombre,episodio:e.episodio,fav:void 0|u,ale:void 0|f};var d=Mark.up(o,n);return d}function s(e){var i=e||d,n={},o='<div class="itemCanal"><img src="http://estaticos.elmundo.es{{icono}}" /></div>';t.each(i,function(t){n.icono=m[t].canal.icono;var e=Mark.up(o,n);_.append(e)})}function r(){var e,i,n=new Date;for(i=0;3>=i;i++){n.setTime(T.getTime()+864e5*i);var o=n.toLocaleDateString("es-ES",{weekday:"long",month:"long",day:"numeric"}),s=i*S*24,r=t("<div/>").text(o).addClass("itemDia").css({left:s});for($.append(r),b.push([o,s]),e=0;24>e;e++){var a=e+":00",l=i*S*24+e*S,c=t("<div/>").text(a).addClass("itemHoras").css({left:l});$.append(c)}}}function a(){var t={},e='<li class="itemDia" data-px="{{px}}"><a href="javascript://">{{diaText}}</a></li>';b.forEach(function(i){var n=i[0],o=i[1];t={diaText:n,px:o};var s=Mark.up(e,t);P.find("ul").append(s)})}function l(){var e=w.h,i=w.m,n=t(".horaActual").hide().find("p").text(e+":"+i).end().show(),o=parseInt(e)*S+parseInt(i)*C;n.css({left:o})}function c(){var t=M.width()/2,e=parseInt(O.css("left"));e=parseInt(t-e),k.stop().animate({left:e+"px"},300),$.stop().animate({left:e+"px"},300);var i=parseInt(w.h)*S,n=parseInt(w.m)*C,o=i+n+e;O.stop().animate({left:o+"px"},300)}function h(){function e(t){t.preventDefault(),this.startTop=this.offsetTop,this.startLeft=this.offsetLeft,this.initialMouseX=t.clientX,this.initialMouseY=t.clientY,g=!0,m=!1,k.on("mouseup touchend",i),k.on("mousemove touchmove",n)}function i(){g&&(g=!1,k.off("mouseup touchend",i),k.off("mousemove touchmove",n))}function n(e){if(g){var i=e.clientX-this.initialMouseX,n=e.clientY-this.initialMouseY;m=Math.abs(i)>2||Math.abs(n)>2;var o=this.startTop+n,s=this.startLeft+i;o>y&&(o=y),p-f>o&&(o=p-f),s>d+Math.abs(T)+50&&(s=d+Math.abs(T)+50),s<u-50-Math.abs(E)&&(s=u-50-Math.abs(E)),t(this).css({top:o+"px",left:s+"px"}),_.css({top:o+"px"}),$.css({left:s+"px"});var r=parseInt(w.h)*S,a=parseInt(w.m)*C,l=r+a+s;O.css({left:l+"px"})}}function o(){var e=parseInt(t(this).css("left"));e=parseInt(u/2-e),h(e)}function s(){var e=-1*parseInt(t(this).data("px"));h(e)}function r(e){if(!m){g=!1;var i=document.elementFromPoint(e.clientX,e.clientY),n=t(i).is(".itemPrograma")?t(i):t(i).closest(".itemPrograma"),o=n.find("a").attr("href"),s=n.attr("id");a(s,o);var r=parseInt(n.css("left"))+n.width()/2;r=parseInt(u/2-r),h(r)}}function a(e){function i(){t("<div/>").text("X").addClass("cierra").appendTo(I).on("click",function(t){t.preventDefault(),n(),this.remove()})}function n(){0===parseInt(I.css("right"))&&I.stop().animate({right:-300},300,"swing")}n(),t.ajax({url:"fichaPrograma.html",data:{progId:e},dataType:"html",cache:!1}).done(function(t){I.find(".contenido").html(t),I.find(".nano").nanoScroller({scroll:"top"}),I.animate({right:0},500,"swing",i)})}function l(e){var i=t(e.currentTarget).attr("class");k.hasClass(i)?(k.removeClass(i),t(this).find("button").removeClass("activo")):(k.addClass(i),t(this).find("button").addClass("activo"))}function c(){v.length>=1&&t.each(v,function(t,e){D.find("li:nth-child("+e+")").find("button").trigger("click")})}function h(t){var e=t||0;k.stop().animate({left:e+"px"},300),$.stop().animate({left:e+"px"},300);var i=parseInt(w.h)*S,n=parseInt(w.m)*C,o=i+n+e;O.stop().animate({left:o+"px"},300)}var p=M.height(),u=M.width(),f=k.height(),d=(k.offsetWidth,_.width()),g=!1,m=!1,b=t(".contProgramas > div > div:first-child"),x=[];t.each(b,function(){x.push(this.offsetLeft)});var T=x.min(),H=t(".contProgramas > div > div:last-child"),A=[];t.each(H,function(){A.push(this.offsetLeft+t(this).width())});var E=A.max();M.find(".preload-wrapper").remove(),k.on("mousedown touchstart",e),k.on("click",r),$.on("click",".itemHoras",o),D.on("click","li",l),c(),P.on("click","li",s)}function p(){var e=t("<ul>"),i="datos/listadocanales.json";t.get(i).done(function(i){g=i;var n={},o='<li class="itemLetra"><h4>{{letra}}</h4><div class="divLetra nano"><div class="nano-content"><ul>{{canales}}<li class="itemCanal" data-idcanal="{{id_programa}}"><img src="{{icono}}" />{{nombre_completo}}<span class="check"></span></li>{{/canales}}</ul></div></div></li>';t.each(g,function(t,i){n={letra:t,canales:i};var s=Mark.up(o,n);e.append(s)}),H.html(e),t.each(H.find(".itemCanal"),function(){-1!=d.indexOf(t(this).data("idcanal"))&&t(this).find(".check").addClass("sel")}),H.find(".nano").nanoScroller({scroll:"top",flash:!0,preventPageScrolling:!0})})}function u(){var e=t('<ul class="orden vertical">'),i={},n='<li class="itemCanal" data-idcanal="{{nombre}}"><img src="http://estaticos.elmundo.es{{icono}}" />{{nombre_completo}}<span class="check sel"></span></li>';t.each(m,function(t,o){i=o.canal;var s=Mark.up(n,i);e.append(s)}),A.find(".nano-content").html(e),A.find(".nano").nanoScroller({scroll:"top",flash:!0,preventPageScrolling:!0})}function f(){function e(){var e=t(this).find(".check"),i=e.hasClass("sel"),n=t(this).data("idcanal"),o=A.find(".itemCanal").filter(function(){return t(this).data("idcanal")===n
});i?(e.toggleClass("sel"),o.find(".check").toggleClass("sel")):(e.toggleClass("sel"),o.length?o.find(".check").toggleClass("sel"):t(this).clone().appendTo(A.find("ul"))),A.find(".nano").nanoScroller().nanoScroller({scroll:"bottom"})}function i(e){e.stopPropagation();var i=t(this).parent(".itemCanal").data("idcanal"),n=H.find(".itemCanal").filter(function(){return t(this).data("idcanal")===i});t(this).toggleClass("sel"),n.find(".check").toggleClass("sel")}H.on("click",".itemCanal",e);var n,o=t(".ordenCanales ul.orden").sortable({group:"orden",pullPlaceholder:!0,onDrop:function(e,i,n){var s=o.sortable("serialize").get(),r=(JSON.stringify(s,null," "),t("<li/>").css({height:0}));e.before(r),r.detach(),n(e,i)},onDragStart:function(e,i,o){var s=e.offset(),r=i.rootGroup.pointer,a=t(".ordenCanales .nano .nano-content").get(0).scrollTop;a=Math.floor(a),n={left:r.left-s.left,top:r.top-s.top-a},o(e,i)},onDrag:function(t,e){t.css({left:e.left-n.left,top:e.top-n.top})}});A.on("click",".check",i)}var d=["la1","la2","antena3","cuatro","telecinco","lasexta"],g={},v=[],m=[],b=[],y=35,x=4800,S=x/24,C=S/60,T=new Date,w={h:leftPad(T.getHours(),2),m:leftPad(T.getMinutes(),2)};T.setTime(Date.parse("Mon, Jul 14 2014"));var M=t(".viewPort"),D=t(".selectorCategorias"),P=t(".selectorDias"),k=t(".contProgramas"),_=t(".contCanales"),$=t(".barraHoras"),O=t(".horaActual"),I=t(".fichaPrograma"),H=(t(".barrasCanales"),t(".barraLetras")),A=t(".ordenCanales");return function(){{var t=e();t.then(function(t){return d=t,i(d)}).done(function(){s(d),n(d,m),r(),l(),a(),c(),h(),p(),u(),f()})}}(),t.fn.exists=function(){return this.length>0},this}(jq111);Array.prototype.max=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]>t&&(t=this[i]);return t},Array.prototype.min=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]<t&&(t=this[i]);return t};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS1zb3J0YWJsZS5qcyIsImpxdWVyeS5uYW5vc2Nyb2xsZXIuanMiLCJtYXJrdXAuanMiLCJhcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBaTFCQSxRQUFBLGNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUVBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxHQUFBLEtBQ0EsR0FBQSxRQUFBLEVBQUEsVUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLEVBQUEsa0JBRUEsR0FBQSxFQUVBLFVBQUEsT0FBQSxPQUFBLEdBQUEsSUFBQSxPQUFBLEdBQUEsRUFBQSxXQU9BLFFBQUEsWUFBQSxHQUdBLElBQUEsR0FGQSxHQUFBLE9BQUEsR0FBQSxJQUNBLEVBQUEsU0FBQSxPQUFBLE1BQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUVBLElBREEsR0FBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxPQUNBLElBQUEsSUFBQSxFQUFBLFFBQUEsR0FBQSxNQUFBLFVBQUEsRUFBQSxVQUFBLEVBQUEsT0FBQSxFQUFBLFNBRUEsTUFBQSxNQU9BLFFBQUEsYUFBQSxHQUNBLGFBQUEsRUFBQSxHQUFBLElBU0EsUUFBQSxTQUFBLEVBQUEsR0FFQSxJQURBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxJQUFBLENBRUEsT0FBQSxJQ24yQkEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQWlJQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsRUFBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEVBR0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsU0FBQSxVQUdBLEtBRkEsRUFBQSxHQUFBLEVBRUEsS0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsSUFFQSxFQUFBLEVBQUEsSUFDQSxHQUFBLE1BQUEsU0FBQSxFQUFBLElBQUEsZUFBQSxJQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsSUFBQSxjQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxFQUFBLGFBQUEsRUFDQSxFQUFBLElBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxjQUFBLElBS0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLFFBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQU1BLEtBSkEsR0FBQSxHQUNBLEVBQUEsRUFBQSxPQUNBLEtBRUEsS0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxHQU9BLE9BTEEsR0FBQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsS0FPQSxRQUFBLEdBQUEsR0FDQSxLQUFBLFFBQUEsRUFBQSxVQUFBLEVBQUEsR0FDQSxLQUFBLGNBRUEsS0FBQSxRQUFBLFlBQ0EsS0FBQSxZQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsTUFDQSxLQUFBLFVBQUEsRUFBQSxNQUFBLEtBQUEsS0FBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLE1BQUEsS0FBQSxLQUFBLE1BQ0EsS0FBQSxZQUFBLEVBQUEsS0FBQSxRQUFBLGFBRUEsRUFBQSxnQkFDQSxLQUFBLFFBQUEsY0FBQSxJQW1PQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxFQUNBLEtBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxHQUVBLEtBQUEsTUFBQSxFQUFBLElBQUEsS0FBQSxTQUNBLEtBQUEsVUFBQSxLQUFBLFFBQUEsV0FBQSxLQUFBLE1BQ0EsS0FBQSxPQUFBLEtBQUEsVUFBQSxRQUFBLFFBQUEsS0FBQSxVQUFBLFFBQUEsWUFFQSxJQUFBLEdBQUEsS0FBQSxVQUFBLFFBQUEsUUFDQSxNQUFBLE9BQUEsRUFBQSxLQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUEsR0FFQSxLQUFBLE9BQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxPQUFBLEVBQUEsTUFBQSxLQUFBLFNBQUEsT0FFQSxLQUFBLFFBQUEsTUFDQSxLQUFBLE1BQUEsV0FBQSxLQUFBLE1BbGJBLEdBQUEsR0FDQSxHQUVBLE1BQUEsRUFFQSxNQUFBLEVBR0EsUUFBQSxHQUVBLFFBQUEsRUFFQSxVQUFBLEdBRUEsR0FLQSxVQUFBLGFBRUEsY0FBQSxHQUVBLGtCQUFBLFNBRUEsU0FBQSxFQUdBLE1BQUEsRUFFQSxPQUFBLEdBRUEsU0FBQSxHQUVBLGFBQUEsS0FFQSxVQUFBLFdBRUEsYUFBQSxVQUVBLGlCQUFBLGNBSUEsY0FBQSxXQUNBLE9BQUEsR0FJQSxTQUFBLGFBR0EsT0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsSUFPQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FDQSxPQUFBLEVBQUEsU0FDQSxNQUFBLEVBQUEsVUFFQSxFQUFBLFNBQUEsRUFBQSxNQUFBLFFBQUEsY0FDQSxFQUFBLFFBQUEsU0FBQSxFQUFBLE1BQUEsUUFBQSxZQUdBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQUEsTUFBQSxRQUFBLGNBQUEsV0FBQSxTQUNBLEVBQUEsUUFBQSxZQUFBLEVBQUEsTUFBQSxRQUFBLFlBSUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLFNBQUEsTUFBQSw4QkFBQSxRQUNBLEVBQUEsa0JBQ0EsSUFNQSxZQUFBLDRCQUdBLGlCQUFBLEVBR0EsVUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxPQUVBLE9BQUEsSUFDQSxJQUNBLEVBQUEsS0FDQSxFQUFBLFNBQUEsU0FHQSxHQUFBLG9CQUNBLEdBQUEsU0FFQSxJQUlBLFVBQUEsR0FFQSxLQUNBLEVBQUEsRUFDQSxHQUNBLEtBQUEsRUFDQSxJQUFBLEVBQ0EsT0FBQSxFQUNBLE1BQUEsR0FFQSxHQUNBLE1BQUEseUNBQ0EsS0FBQSwwREFDQSxLQUFBLHdDQUNBLE9BQUEsbUJBRUEsRUFBQSxlQTJFQSxHQUFBLElBQUEsU0FBQSxHQVFBLE1BUEEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxRQUFBLElBQ0EsRUFBQSxNQUFBLEtBRUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxHQUFBLElBR0EsRUFBQSxFQUFBLFFBR0EsRUFBQSxXQUNBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxVQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsZUFHQSxLQUFBLEtBQUEsRUFBQSxFQUFBLFFBQUEsUUFBQSxLQUFBLFFBQUEsY0FDQSxLQUFBLGNBQUEsR0FFQSxLQUFBLEtBQUEsR0FBQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFFBQUEsWUFBQSxLQUFBLEtBQUEsRUFBQSxZQUFBLEtBSUEsS0FBQSxXQUFBLEdBQ0EsS0FBQSxnQkFBQSxNQUVBLEtBQUEsa0JBQ0EsS0FBQSxjQUFBLElBRUEsS0FBQSxTQUFBLEdBQ0EsSUFBQSxLQUFBLFNBQUEsQ0FDQSxJQUFBLEtBQUEsWUFBQSxLQUFBLEtBQUEsU0FDQSxNQUVBLE1BQUEsUUFBQSxZQUFBLEtBQUEsS0FBQSxLQUFBLGNBQUEsRUFBQSxZQUFBLEdBQ0EsS0FBQSxLQUFBLE9BQUEsS0FBQSxhQUNBLEtBQUEsVUFBQSxFQUdBLEtBQUEsV0FBQSxHQUVBLEtBQUEsUUFBQSxPQUFBLEtBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxLQUFBLEtBQUEsZ0JBQ0EsRUFBQSxPQUNBLEVBRUEsSUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxFQUFBLEtBQUEsY0FDQSxFQUFBLEtBQUEsUUFBQSxZQUVBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FDQSxLQUFBLHNCQUNBLEtBQUEsWUFBQSxTQUNBLEtBQUEsaUJBQUEsS0FHQSxLQUFBLFNBQUEsR0FDQSxLQUFBLGdCQUFBLE9BRUEsS0FBQSxjQUFBLEVBRUEsS0FBQSxXQUVBLEtBQUEsWUFBQSxRQUFBLFFBQUEsR0FDQSxLQUFBLFlBQUEsT0FBQSxLQUFBLE1BQUEsU0FFQSxLQUFBLFFBQUEsU0FBQSxLQUFBLEtBQUEsS0FBQSxjQUFBLEVBQUEsU0FBQSxHQUVBLEtBQUEsUUFBQSxPQUFBLEtBQUEsS0FBQSxLQUFBLGFBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxHQUdBLEtBQUEsa0JBQ0EsS0FBQSxvQkFDQSxLQUFBLGlCQUFBLEtBQUEsY0FBQSxFQUNBLEtBQUEsVUFBQSxJQUdBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxLQUFBLGlCQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEscUJBQUEsS0FBQSxZQVFBLEtBTEEsR0FBQSxHQUFBLEVBQUEsS0FBQSx5QkFDQSxFQUNBLEdBQ0EsRUFBQSxFQUFBLE9BRUEsS0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxFQUVBLEtBQUEsR0FBQSxLQUFBLFFBQUEsZ0JBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxXQUFBLEVBQ0EsS0FBQSxFQUFBLFNBQUEsQ0FDQSxJQUFBLEtBQUEsbUJBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxxQkFDQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLGtCQUFBLEVBQUEsR0FDQSxPQUFBLElBSUEsS0FBQSxnQkFDQSxLQUFBLGNBQUEsSUFFQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsa0JBQ0EsSUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLE1BR0EsRUFBQSxHQUFBLEtBQUEsYUFDQSxLQUFBLGlCQUFBLEVBQ0EsS0FBQSxjQUFBLEVBQ0EsS0FBQSxRQUFBLFVBQUEsS0FBQSxZQUFBLEVBQUEsS0FFQSx1QkFBQSxXQUdBLE1BRkEsTUFBQSxxQkFDQSxFQUFBLEtBQUEsV0FBQSxLQUFBLHVCQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUEsb0JBQ0EsS0FBQSxxQkFFQSxhQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxLQUFBLFFBQUEsbUJBQUEsS0FBQSxJQUVBLGlCQUFBLFdBQ0EsR0FBQSxLQUFBLGVBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsT0FBQSxFQUNBLEVBQUEsS0FBQSxXQUFBLEdBQUEscUJBRUEsS0FBQSxLQUFBLFFBQUEsVUFDQSxLQUFBLEtBQ0EsR0FBQSxFQUFBLElBQUEsS0FBQSxXQUFBLEdBQUEsc0JBQUEsR0FBQSxDQUtBLEdBQUEsQ0FDQSxPQUtBLEtBQUEsYUFBQSxFQUVBLE1BQUEsTUFBQSxjQUVBLFdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFFQSxJQUFBLEtBQUEsbUJBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsbUJBQ0EsTUFBQSxvQkFBQSxLQUFBLGdCQUNBLEtBQUEsZ0JBQUEsRUFHQSxLQUFBLFlBQUEsS0FBQSxRQUNBLEtBQUEsUUFBQSxHQUVBLFlBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFDQSxPQUFBLE1BQUEsSUFDQSxLQUFBLElBQUEsS0FBQSxRQUFBLEtBQUEsRUFBQSxNQUNBLEtBQUEsSUFBQSxLQUFBLFFBQUEsSUFBQSxFQUFBLE9BQ0EsS0FBQSxRQUFBLFVBRUEsV0FBQSxTQUFBLEdBQ0EsT0FDQSxLQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsUUFHQSxnQkFBQSxXQUNBLEdBQUEsR0FBQSxJQUNBLE1BQUEsVUFBQSxLQUFBLFFBQUEsTUFHQSxLQUFBLFdBQ0EsYUFBQSxLQUFBLGtCQUNBLEtBQUEsaUJBQUEsV0FBQSxXQUNBLEVBQUEsVUFBQSxHQUNBLEtBQUEsUUFBQSxTQUdBLE9BQUEsV0FDQSxLQUFBLGtCQUNBLEtBQUEscUJBRUEsZ0JBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEdBQUEsT0FBQSxPQUFBLFNBRUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxhQUdBLGtCQUFBLFdBQ0EsS0FBQSxhQUFBLEdBR0EsZ0JBQUEsV0FDQSxLQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsc0JBR0EsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUVBLEtBREEsR0FBQSxHQUFBLEtBQUEsV0FBQSxPQUNBLEtBQ0EsS0FBQSxXQUFBLEdBQUEsU0FBQSxJQUdBLGlCQUFBLFdBQ0EsS0FBQSxvQkFBQSxHQUVBLFNBQUEsV0FDQSxFQUFBLEtBQUEsUUFBQSxPQUFBLElBcUJBLEVBQUEsV0FDQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxXQUVBLEtBQUEsV0FDQSxFQUFBLGNBQ0EsS0FBQSxRQUFBLE1BQ0EsS0FBQSxZQUFBLElBQ0EsRUFBQSxTQUFBLEVBQUEsT0FHQSxZQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxPQUNBLGNBQUEsRUFBQSxNQUFBLEdBQUEsRUFBQSxjQUFBLFFBQUEsUUFFQSxrQkFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLG9CQUNBLEVBQ0EsR0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsVUFDQSxHQUFBLEVBQUEsUUFBQSxlQUNBLEVBQUEsUUFBQSxjQUFBLEVBQUEsS0FBQSxLQUVBLEtBQUEsR0FBQSxFQUVBLE1BREEsR0FBQSxnQkFBQSxLQUFBLEtBQUEsT0FBQSxXQUNBLENBRUEsTUFBQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsS0FBQSxHQUFBLEtBQUEsY0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsa0JBQUEsR0FBQSxrQkFBQSxFQUFBLEVBQ0EsSUFBQSxFQUNBLE9BQUEsTUFDQSxJQUFBLEVBRUEsTUFEQSxNQUFBLGdCQUFBLEVBQUEsSUFDQSxJQUlBLGdCQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsTUFBQSxJQUNBLEVBQUEsS0FBQSxlQUFBLEdBQ0EsRUFBQSxRQUNBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxjQUNBLEVBQUEsRUFBQSxTQUNBLEdBQ0EsS0FBQSxFQUFBLEtBQ0EsTUFBQSxFQUFBLEtBQUEsRUFDQSxJQUFBLEVBQUEsSUFDQSxPQUFBLEVBQUEsSUFBQSxFQUVBLElBQUEsS0FBQSxRQUFBLFNBQUEsQ0FDQSxHQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxLQUFBLENBQ0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxRQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsRUFBQSxNQUNBLENBQ0EsR0FBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsTUFBQSxDQUNBLElBQ0EsRUFBQSxTQUNBLEVBQUEsT0FBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsRUFFQSxLQUFBLGNBQUEsS0FDQSxFQUFBLEdBQ0EsS0FBQSxVQUFBLGdCQUFBLEtBQUEsRUFBQSxFQUFBLElBRUEsa0JBQUEsV0FPQSxNQU5BLE1BQUEsaUJBQ0EsS0FBQSxNQUFBLEtBQUEsYUFBQSxLQUFBLEdBQUEsUUFBQSxPQUNBLFNBQUEsS0FBQSxNQUFBLFFBQUEsaUJBQUEsTUFBQSxLQUFBLE1BQUEsUUFBQSxhQUFBLEtBQ0EsTUFDQSxFQUFBLEtBQUEsTUFBQSxLQUFBLGtCQUFBLEtBQUEsUUFBQSxZQUVBLEtBQUEsZ0JBRUEsb0JBQUEsV0FDQSxHQUFBLEdBQ0EsRUFBQSxLQUFBLEVBT0EsT0FIQSxHQURBLGFBQUEsRUFBQSxJQUFBLGFBQUEsYUFBQSxFQUFBLElBQUEsYUFBQSxVQUFBLEVBQUEsSUFBQSxZQUNBLEVBRUEsRUFBQSxnQkFHQSxjQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsUUFBQSxRQUFBLEtBQUEsa0JBQUEsSUFFQSxrQkFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxLQUFBLE1BQUEsR0FBQSxFQUNBLElBQUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsYUFBQSxLQUFBLE1BQUEsR0FBQSxZQUdBLElBRkEsR0FBQSxFQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFVBQUEsS0FBQSxTQUNBLFVBQUEsS0FBQSxVQUNBLE1BQUEsS0FFQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEtBQUEsR0FBQSxNQUVBLEVBQUEsS0FBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLEdBRUEsTUFBQSxJQUVBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsVUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsV0FNQSxPQUpBLEdBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxFQUFBLEtBQUEsSUFFQSxFQUFBLFNBQUEsSUFFQSxXQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxPQUFBLFlBRUEsRUFBQSxLQUFBLGFBQUEsRUFBQSxHQUFBLElBQUEsS0FBQSxRQUFBLFNBQUEsSUFBQSxXQUNBLE1BQUEsR0FBQSxXQUFBLEVBQUEsT0FBQSxLQUNBLEtBRUEsT0FBQSxNQUFBLFVBQUEsUUFBQSxVQUFBLEVBQUEsRUFBQSxJQUVBLFNBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxLQUFBLFVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsRUFDQSxJQUNBLEVBQUEsU0FBQSxLQUdBLEVBQUEsT0FFQSxpQkFBQSxXQUNBLEtBQUEsZUFBQSxHQUVBLFNBQUEsV0FDQSxHQUFBLEdBQUEsSUFFQSxNQUFBLE9BQUEsSUFBQSxFQUFBLE1BQUEsS0FBQSxRQUNBLEtBQUEsR0FBQSxXQUFBLEdBRUEsS0FBQSxRQUFBLE9BQ0EsS0FBQSxNQUFBLFdBQUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FHQSxFQUFBLEtBQUEsS0FBQSxVQUFBLFdBQ0EsRUFBQSxXQUFBLEtBQUEsTUFLQSxJQUFBLElBQ0EsT0FBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEtBR0EsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEtBR0EsVUFBQSxXQUNBLE1BQUEsTUFBQSxXQUFBLEtBQUEsSUFBQSxJQUVBLFFBQUEsV0FDQSxLQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsc0JBR0EsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxjQUtBLEdBQUEsT0FBQSxFQUFBLFVBQUEsR0FTQSxFQUFBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLE1BQUEsVUFBQSxNQUFBLEtBQUEsVUFBQSxFQUVBLE9BQUEsTUFBQSxJQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsS0FBQSxFQUVBLE9BQUEsSUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxJQUFBLE1BQ0EsR0FBQSxJQUFBLEdBQ0EsZ0JBQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUVBLFVBSUEsTUFBQSxPQUFBLFlDenFCQSxTQUFBLEVBQUEsRUFBQSxHQUNBLFlBQ0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUNBLElBUUEsVUFBQSxZQVFBLFlBQUEsY0FRQSxhQUFBLGVBUUEsb0JBQUEsRUFTQSxzQkFBQSxFQVFBLGVBQUEsRUFRQSxlQUFBLEVBUUEsV0FBQSxLQVFBLGdCQUFBLEdBUUEsZ0JBQUEsS0FRQSxnQkFBQSxLQVFBLGNBQUEsTUFVQSxFQUFBLFlBU0EsRUFBQSxTQVFBLEVBQUEsWUFRQSxFQUFBLGFBU0EsRUFBQSxZQVFBLEVBQUEsYUFTQSxFQUFBLFVBUUEsRUFBQSxTQVNBLEVBQUEsT0FTQSxFQUFBLFFBU0EsRUFBQSxLQVNBLEVBQUEsV0FTQSxFQUFBLGlCQVNBLEVBQUEsT0FTQSxFQUFBLFFBU0EsRUFBQSxVQVNBLEVBQUEsUUFTQSxFQUFBLFlBU0EsRUFBQSxnQ0FBQSxFQUFBLFVBQUEsU0FBQSxXQUFBLEtBQUEsRUFBQSxVQUFBLGFBQUEsRUFBQSxjQVNBLEVBQUEsS0FDQSxFQUFBLEVBQUEsc0JBQ0EsRUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxjQUFBLE9BQUEsTUFDQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FFQSxLQURBLEdBQUEsSUFBQSxVQUFBLE9BQUEsTUFBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLEVBR0EsR0FGQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxXQUNBLElBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxPQUFBLEVBQUEsRUFBQSxHQUFBLE9BQUEsRUFHQSxRQUFBLEtBRUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLEdBQ0EsRUFFQSxLQUFBLEVBQ0EsRUFFQSxFQUFBLEVBQUEsT0FBQSxHQUFBLGNBQUEsRUFBQSxPQUFBLElBRUEsRUFBQSxFQUFBLGFBQ0EsRUFBQSxLQUFBLEVBU0EsRUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLENBV0EsT0FWQSxHQUFBLEVBQUEsY0FBQSxPQUNBLEVBQUEsRUFBQSxNQUNBLEVBQUEsU0FBQSxXQUNBLEVBQUEsTUFBQSxRQUNBLEVBQUEsT0FBQSxRQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsSUFBQSxVQUNBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsRUFBQSxFQUFBLFlBQUEsRUFBQSxZQUNBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsR0FFQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FHQSxPQUZBLEdBQUEsRUFBQSxVQUFBLFdBQ0EsRUFBQSw4QkFBQSxLQUFBLEtBSUEsRUFBQSxtQkFBQSxLQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsR0FBQSxRQUFBLE9BQUEsS0FFQSxJQUFBLEVBQUEsS0FOQSxHQWVBLEVBQUEsV0FDQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxFQUNBLEtBQUEsUUFBQSxFQUNBLElBQUEsRUFBQSxLQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsSUFDQSxLQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsaUJBQUEsR0FDQSxLQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsZUFBQSxHQUNBLEtBQUEsS0FBQSxLQUFBLElBQUEsS0FBQSxRQUNBLEtBQUEsU0FBQSxLQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsY0FDQSxLQUFBLFNBQUEsS0FBQSxXQUFBLEtBQUEsUUFBQSxVQUFBLEdBQ0EsS0FBQSxRQUFBLEtBQUEsU0FBQSxHQUNBLEtBQUEsaUJBQUEsRUFDQSxLQUFBLFFBQUEsb0JBQUEsTUFBQSxLQUFBLEdBQUEsTUFBQSx3QkFDQSxLQUFBLGtCQUVBLEtBQUEsV0FFQSxLQUFBLGVBQ0EsS0FBQSxZQUNBLEtBQUEsUUFzaUJBLE1BemhCQSxHQUFBLFVBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxLQUFBLFNBR0EsR0FBQSxFQUFBLE9BQUEsR0FDQSxJQUFBLEdBQUEsRUFBQSxjQUFBLE9BQUEsR0FBQSxJQUFBLEdBQUEsRUFBQSxjQUFBLE9BQUEsSUFDQSxFQUFBLHFCQUVBLElBQUEsRUFBQSxPQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsZ0JBQUEsRUFBQSxjQUFBLFdBQ0EsUUFFQSxJQUFBLEdBQUEsRUFBQSxjQUFBLFdBQUEsR0FBQSxJQUFBLEdBQUEsRUFBQSxjQUFBLFdBQUEsSUFDQSxFQUFBLG1CQVlBLEVBQUEsVUFBQSxnQkFBQSxXQUNBLEtBQUEsU0FBQSxLQUNBLHdCQUFBLFVBRUEsS0FBQSxvQkFBQSxFQUNBLEtBQUEsVUFBQSxHQVdBLEVBQUEsVUFBQSxtQkFBQSxXQUNBLEdBQUEsR0FBQSxDQUNBLEdBQUEsS0FBQSxRQUNBLEtBQUEsYUFBQSxFQUFBLGFBQUEsRUFBQSxhQUNBLEtBQUEsY0FBQSxLQUFBLGtCQUFBLEVBQ0EsS0FBQSxpQkFBQSxFQUFBLFVBQ0EsRUFBQSxLQUFBLGlCQUFBLEtBQUEsaUJBQUEsT0FBQSxLQUFBLGlCQUFBLEtBQUEsaUJBQUEsS0FBQSxPQUNBLEtBQUEsaUJBQUEsS0FBQSxpQkFDQSxTQUFBLEdBQ0EsS0FBQSxJQUFBLFFBQUEsVUFDQSxTQUFBLEtBQUEsaUJBQ0EsUUFBQSxLQUFBLGFBQ0EsVUFBQSxJQUdBLEtBQUEscUJBQ0EsS0FBQSxhQUFBLEtBQUEsV0FBQSxLQUFBLGFBQ0EsS0FBQSxVQUFBLElBQUEsS0FBQSxhQUFBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLGFBQUEsS0FBQSxlQVlBLEVBQUEsVUFBQSxrQkFBQSxXQUNBLEdBQUEsRUFDQSxJQUNBLEtBQ0EsRUFBQSxHQUFBLGdCQUFBLEtBQUEsVUFBQSxPQUVBLEdBQ0EsSUFBQSxLQUFBLFdBR0EsR0FDQSxHQUFBLEtBQUEsV0FDQSxFQUFBLEtBQUEsV0FFQSxLQUFBLFVBQUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxZQUVBLE1BREEsR0FBQSxVQUFBLEtBQ0EsRUFBQSxPQUFBLElBQUEsS0FFQSxRQUVBLEtBQUEsT0FBQSxJQUFBLElBV0EsRUFBQSxVQUFBLGFBQUEsV0FDQSxLQUFBLFFBQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBU0EsTUFSQSxHQUFBLGdCQUFBLEVBQ0EsRUFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsU0FBQSxJQUNBLEVBQUEsT0FBQSxHQUFBLEVBQUEsVUFDQSxFQUFBLFFBQUEsR0FFQSxFQUFBLEtBQUEsU0FBQSxVQUNBLEVBQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsS0FBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLEtBQ0EsSUFFQSxNQUNBLEtBQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQVFBLE1BUEEsR0FBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxFQUFBLGNBQ0EsRUFBQSxTQUNBLEVBQUEsa0JBQUEsRUFBQSxjQUFBLEVBQUEsZ0JBQUEsRUFBQSxhQUNBLEVBQUEsSUFBQSxRQUFBLGFBQ0EsSUFBQSxFQUFBLGtCQUFBLElBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLGNBRUEsSUFFQSxNQUNBLEdBQUEsU0FBQSxHQUNBLE1BQUEsWUFLQSxNQUpBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLEtBQUEsWUFBQSxVQUNBLEVBQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLEtBQ0EsSUFFQSxNQUNBLE9BQUEsU0FBQSxHQUNBLE1BQUEsWUFDQSxFQUFBLFVBRUEsTUFDQSxTQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FJQSxNQUhBLEdBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLFFBQUEsR0FBQSxFQUFBLGFBQ0EsRUFBQSxTQUNBLEVBQUEsT0FBQSxLQUFBLElBQ0EsSUFFQSxNQUNBLE9BQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLEVBQUEscUJBQ0EsRUFBQSxpQkFHQSxFQUFBLHFCQUNBLEVBQUEsUUFBQSxFQUFBLFVBQ0EsRUFBQSxxQkFFQSxNQUFBLElBR0EsRUFBQSxrQkFBQSxFQUFBLGNBQ0EsRUFBQSxRQUFBLHNCQUNBLEVBQUEsaUJBQUEsRUFBQSxHQUVBLEVBQUEsZ0JBQUEsRUFBQSxjQUNBLEVBQUEsSUFBQSxRQUFBLGNBRUEsSUFBQSxFQUFBLG1CQUNBLEVBQUEsUUFBQSxzQkFDQSxFQUFBLGlCQUFBLEVBQUEsR0FFQSxJQUFBLEVBQUEsZUFDQSxFQUFBLElBQUEsUUFBQSxrQkFJQSxNQUNBLE1BQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLEdBQUEsRUFDQSxJQUFBLE1BQUEsRUFRQSxNQUxBLEdBQUEsRUFBQSxPQUFBLEVBQUEsWUFBQSxFQUFBLGVBQUEsRUFBQSxjQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsZ0JBQUEsRUFBQSxjQUFBLE9BQ0EsSUFDQSxFQUFBLFVBQUEsRUFBQSxHQUVBLEVBQUEsVUFDQSxJQUVBLE1BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsRUFBQSxlQUdBLE1BQUEsTUFBQSxFQUFBLFNBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxRQUFBLEdBQUEsTUFBQSxFQUFBLFdBREEsU0FJQSxRQVdBLEVBQUEsVUFBQSxVQUFBLFdBQ0EsR0FBQSxFQUNBLE1BQUEsZUFDQSxFQUFBLEtBQUEsT0FDQSxLQUFBLFFBQUEsZUFDQSxLQUFBLElBQUEsS0FBQSxFQUFBLEVBQUEsSUFFQSxLQUFBLHFCQUNBLEtBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBRUEsS0FBQSxTQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FVQSxFQUFBLFVBQUEsYUFBQSxXQUNBLEdBQUEsRUFDQSxHQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLHFCQUNBLEtBQUEsT0FBQSxTQUNBLEtBQUEsS0FBQSxVQUVBLEtBQUEsU0FBQSxPQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBV0EsRUFBQSxVQUFBLFNBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBdUJBLE9BdEJBLEdBQUEsS0FBQSxRQUNBLEVBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxjQUNBLEVBQUEsS0FBQSxJQUFBLFNBQUEsSUFBQSxJQUFBLFFBQUEsRUFBQSxTQUFBLElBQUEsR0FBQSxRQUNBLEtBQUEsSUFBQSxPQUFBLGVBQUEsRUFBQSxpQkFBQSxFQUFBLGNBRUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxTQUFBLElBQUEsR0FDQSxLQUFBLE9BQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxHQUNBLElBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxpQkFBQSxLQUFBLFFBQUEsTUFBQSxpQkFBQSxpQkFBQSxRQUFBLFlBQUEsSUFDQSxHQUNBLE1BQUEsSUFDQSxjQUFBLEVBQUEsS0FFQSxJQUNBLEdBQ0EsT0FBQSxHQUVBLEtBQUEsSUFBQSxTQUFBLGtCQUVBLE1BQUEsR0FDQSxLQUFBLFNBQUEsSUFBQSxHQUVBLE1BU0EsRUFBQSxVQUFBLFFBQUEsV0FDQSxLQUFBLFNBQUEsRUFDQSxLQUFBLG9CQUNBLEtBQUEsS0FBQSxPQUVBLEtBQUEsYUFZQSxFQUFBLFVBQUEsTUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxNQUFBLG9CQUNBLEtBQUEsY0FBQSxLQUFBLFFBQUEsYUFDQSxTQUVBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxRQUFBLFdBQUEsUUFDQSxLQUFBLFdBQUEsT0FFQSxLQUFBLFNBQ0EsS0FBQSxVQUVBLEVBQUEsS0FBQSxRQUNBLEVBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxVQUNBLEdBQ0EsS0FBQSxTQUFBLEtBQ0EsT0FBQSxLQUFBLFNBQUEsV0FHQSxFQUFBLEVBQUEsYUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLElBQUEsSUFBQSxjQUFBLElBQ0EsRUFBQSxJQUNBLEtBQUEsSUFBQSxPQUFBLElBQ0EsS0FBQSxJQUFBLE9BQUEsRUFBQSxhQUFBLEVBQUEsRUFBQSxFQUFBLGVBRUEsRUFBQSxLQUFBLEtBQUEsYUFBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLEtBQUEsSUFBQSxPQUFBLElBQ0EsRUFBQSxTQUFBLEtBQUEsS0FBQSxJQUFBLFVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLGdCQUNBLEVBQUEsS0FBQSxRQUFBLGdCQUNBLE1BQUEsS0FBQSxRQUFBLGlCQUFBLEVBQUEsS0FBQSxRQUFBLGtCQUNBLEVBQUEsS0FBQSxRQUFBLGlCQUVBLElBQUEsR0FBQSxFQUFBLFlBQUEsSUFDQSxHQUFBLEdBRUEsS0FBQSxhQUFBLEVBQUEsRUFDQSxLQUFBLGNBQUEsRUFDQSxLQUFBLFdBQUEsRUFDQSxLQUFBLGdCQUFBLEVBQ0EsS0FBQSxhQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxPQUFBLE9BQUEsR0FDQSxLQUFBLE9BQUEsU0FDQSxLQUFBLEtBQUEsT0FDQSxLQUFBLFVBQUEsRUFDQSxFQUFBLGVBQUEsRUFBQSxjQUFBLEtBQUEsS0FBQSxhQUFBLElBQUEsRUFBQSxjQUFBLElBQUEsR0FDQSxLQUFBLEtBQUEsT0FDQSxLQUFBLFVBQUEsR0FDQSxLQUFBLEdBQUEsZUFBQSxFQUFBLGNBQUEsSUFBQSxFQUNBLEtBQUEsT0FBQSxPQUVBLEtBQUEsT0FBQSxPQUVBLEtBQUEsS0FBQSxLQUNBLFFBQUEsS0FBQSxRQUFBLGNBQUEsRUFBQSxHQUNBLFdBQUEsS0FBQSxRQUFBLGNBQUEsVUFBQSxLQUVBLEVBQUEsS0FBQSxTQUFBLElBQUEsYUFDQSxXQUFBLEdBQUEsYUFBQSxLQUNBLEVBQUEsU0FBQSxLQUFBLFNBQUEsSUFBQSxTQUFBLElBQ0EsR0FDQSxLQUFBLFNBQUEsS0FDQSxNQUFBLEdBQ0EsWUFBQSxLQUlBLE9BV0EsRUFBQSxVQUFBLE9BQUEsV0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFFBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxTQUNBLEtBQUEsUUFBQSxLQUFBLElBQUEsS0FBQSxhQUFBLEtBQUEsU0FDQSxLQUFBLFNBQUEsVUFBQSxLQUFBLGFBQUEsS0FBQSxRQUFBLEtBQUEsY0FDQSxLQUFBLHFCQUNBLEtBQUEscUJBQ0EsS0FBQSxxQkFFQSxNQVZBLFFBdUJBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFNBQUEsVUFBQSxLQUFBLGNBQUEsS0FBQSxTQUFBLFNBQUEsR0FBQSxRQUFBLEdBQ0EsS0FBQSxPQUFBLFVBQ0EsTUFMQSxRQWtCQSxFQUFBLFVBQUEsVUFBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLFVBR0EsS0FBQSxTQUFBLFdBQUEsR0FBQSxRQUFBLEdBQ0EsS0FBQSxPQUFBLFVBQ0EsTUFMQSxRQWtCQSxFQUFBLFVBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLFVBR0EsS0FBQSxVQUFBLEtBQUEsSUFBQSxLQUFBLEdBQUEsSUFBQSxHQUFBLFdBQ0EsTUFKQSxRQWlCQSxFQUFBLFVBQUEsS0FBQSxXQVVBLE1BVEEsSUFBQSxLQUFBLFlBQ0EsRUFBQSxLQUFBLFdBQ0EsS0FBQSxVQUFBLE1BRUEsS0FBQSxTQUFBLEVBQ0EsS0FBQSxlQUNBLEtBQUEsb0JBQ0EsS0FBQSxLQUFBLE9BRUEsTUFZQSxFQUFBLFVBQUEsUUFBQSxXQWlCQSxNQWhCQSxNQUFBLFNBQ0EsS0FBQSxRQUVBLEtBQUEsb0JBQUEsS0FBQSxLQUFBLFFBQ0EsS0FBQSxLQUFBLFNBRUEsR0FDQSxLQUFBLFNBQUEsT0FBQSxJQUVBLEtBQUEsU0FBQSxXQUFBLFlBQ0EsS0FBQSxJQUFBLFNBQUEsbUJBQ0EsS0FBQSxJQUFBLFlBQUEsaUJBQ0EsS0FBQSxTQUFBLEtBQ0EsTUFBQSxNQUdBLE1BYUEsRUFBQSxVQUFBLE1BQUEsV0FDQSxPQUFBLEtBQUEsb0JBR0EsS0FBQSxVQUdBLEtBQUEsUUFDQSxLQUFBLEtBQUEsU0FBQSxXQUNBLFdBQUEsU0FBQSxHQUNBLE1BQUEsWUFDQSxFQUFBLEtBQUEsWUFBQSxhQUVBLE1BQUEsS0FBQSxRQUFBLFlBQ0EsTUFiQSxRQWdCQSxLQUdBLEVBQUEsR0FBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsS0FBQSxXQUNBLEdBQUEsR0FBQSxDQUtBLEtBSkEsRUFBQSxLQUFBLGdCQUNBLEVBQUEsRUFBQSxVQUFBLEVBQUEsR0FDQSxLQUFBLGFBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxJQUVBLEdBQUEsZ0JBQUEsR0FBQSxDQUVBLEdBREEsRUFBQSxPQUFBLEVBQUEsUUFBQSxHQUNBLE1BQUEsRUFBQSxhQUNBLE1BQUEsR0FBQSxhQUFBLEVBQUEsYUFFQSxJQUFBLE1BQUEsRUFBQSxVQUNBLE1BQUEsR0FBQSxVQUFBLEVBQUEsVUFFQSxJQUFBLEVBQUEsU0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLFNBRUEsSUFBQSxXQUFBLEVBQUEsT0FDQSxNQUFBLEdBQUEsYUFBQSxFQUVBLElBQUEsUUFBQSxFQUFBLE9BQ0EsTUFBQSxHQUFBLFVBQUEsRUFFQSxJQUFBLEVBQUEsUUFBQSxFQUFBLGlCQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxPQUVBLElBQUEsRUFBQSxLQUNBLE1BQUEsR0FBQSxNQUVBLElBQUEsRUFBQSxRQUNBLE1BQUEsR0FBQSxTQUVBLElBQUEsRUFBQSxNQUNBLE1BQUEsR0FBQSxRQUdBLE1BQUEsR0FBQSxXQUdBLEVBQUEsR0FBQSxhQUFBLFlBQUEsR0FDQSxNQUFBLE9BQUEsU0M5N0JBLElBQUEsT0FFQSxZQUdBLFdBR0EsVUFBQSxJQUdBLFNBQUEsRUFHQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FFQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBR0EsT0FBQSxJQUlBLE1BQUEsU0FBQSxHQUNBLE1BQUEsYUFBQSxPQUFBLEVBQUEsT0FBQSxHQUFBLEdBSUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsRUFDQSxLQUFBLEtBQUEsRUFDQSxLQUFBLE9BQUEsRUFDQSxLQUFBLEtBQUEsSUFHQSxLQUFBLFNBQUEsV0FDQSxNQUFBLE1BQUEsSUFBQSxLQUFBLEtBQUEsT0FBQSxJQUtBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxDQUdBLElBQUEsRUFBQSxFQUFBLFFBQUEsQ0FHQSxFQUFBLEVBQUEsTUFBQSxLQUFBLFdBR0EsRUFBQSxFQUFBLFFBQUEsTUFFQSxLQUVBLEVBQUEsS0FBQSxNQUFBLEdBQUEsTUFBQSxNQUFBLEdBQUEsT0FBQSxJQUdBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FFQSxNQUFBLEtBS0EsTUFBQSxJQUlBLE1BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUdBLEdBQ0EsRUFKQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFJQSxJQUFBLFlBQUEsT0FJQSxJQUhBLEVBQUEsR0FDQSxFQUFBLEVBQUEsU0FFQSxFQUFBLEdBQ0EsR0FDQSxLQUFBLEdBQUEsTUFBQSxNQUFBLEVBQUEsSUFFQSxHQUFBLEVBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUdBLGFBQUEsVUFDQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEdBR0EsT0FBQSxJQUlBLE1BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxxQkFHQSxRQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLElBSUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLElBQ0EsRUFBQSxNQUNBLElBR0EsR0FDQSxFQUpBLEVBQUEsU0FBQSxFQUFBLHNCQUFBLEVBQUEsU0FDQSxFQUFBLEdBQUEsUUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLE1BQUEsT0FHQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsR0FDQSxFQUFBLENBRUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLEdBRUEsRUFBQSxHQUFBLFFBQUEsT0FBQSxHQUNBLElBR0EsSUFHQSxJQUFBLEdBWEEsS0FxQkEsTUFMQSxHQUFBLEVBQUEsUUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFHQSxFQUFBLFVBQUEsRUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEtBS0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEVBQUEsS0FHQSxJQUlBLEdBRUEsRUFFQSxFQUlBLEVBRUEsRUFFQSxFQUVBLEVBRUEsRUFFQSxFQUVBLEVBeEJBLEVBQUEsaUJBRUEsRUFBQSxFQUFBLE1BQUEsT0FRQSxLQWdCQSxFQUFBLEVBQ0EsRUFBQSxDQTRCQSxLQXpCQSxFQUFBLE9BQ0EsS0FBQSxNQUFBLEVBQUEsTUFBQSxLQUFBLE9BSUEsRUFBQSxVQUNBLEtBQUEsTUFBQSxFQUFBLFNBQUEsS0FBQSxVQUlBLEVBQUEsU0FDQSxLQUFBLE1BQUEsRUFBQSxRQUFBLEtBQUEsU0FJQSxFQUFBLFlBQ0EsS0FBQSxVQUFBLEVBQUEsV0FJQSxTQUFBLEVBQUEsVUFDQSxLQUFBLFFBQUEsRUFBQSxTQUlBLEVBQUEsRUFBQSxNQTZCQSxHQTVCQSxFQUFBLE9BQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxRQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsUUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxHQUFBLEtBQUEsRUFBQSxLQUFBLEtBRUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxRQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQUEsS0FDQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFFBQUEsU0FBQSxJQUFBLE1BQUEsS0FBQSxRQUFBLE9BQ0EsRUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEtBQUEsR0FDQSxFQUFBLEVBQUEsR0FHQSxJQUFBLEVBQUEsU0FDQSxHQUFBLGNBSUEsR0FBQSxFQUFBLFFBQUEsTUFBQSxHQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxNQUFBLEdBQUEsT0FBQSxJQUlBLHVCQUFBLEtBQUEsR0FBQSxDQUtBLEdBQUEsVUFBQSxFQUFBLEtBQUEsUUFBQSxJQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxPQUlBLElBQUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxZQUFBLFlBQ0EsRUFBQSxLQUVBLEVBQUEsS0FBQSxNQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxPQUlBLElBQUEsRUFBQSxRQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxPQUlBLElBQUEsTUFBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsT0FJQSxJQUFBLEVBQUEsUUFBQSxLQUFBLEdBQUEsQ0FhQSxJQVpBLEVBQUEsRUFBQSxNQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsRUFBQSxJQUVBLEVBQ0EsRUFBQSxHQUdBLEVBQUEsRUFDQSxFQUFBLEdBSUEsR0FBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxLQUdBLEdBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxPQUlBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUlBLFlBQUEsT0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsR0FJQSxFQUNBLEVBQUEsRUFBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLE9BSUEsRUFBQSxlQUFBLEtBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUlBLGFBQUEsU0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsSUFJQSxJQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxHQUdBLE1BQUEsTUFBQSxRQUFBLEVBQUEsUUFBQSxTQUFBLE1BQUEsR0FJQSxLQUFBLE9BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsRUFBQSxJQUFBLE9BQUEsUUFBQSxFQUFBLEdBRUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsSUFBQSxPQUFBLE9BQUEsR0FBQSxHQUVBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLElBQUEsRUFBQSxFQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxHQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsR0FBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxJQUFBLEVBQUEsR0FBQSxHQUVBLFFBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsS0FBQSxNQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsUUFBQSxFQUFBLEtBQUEsS0FBQSxHQUFBLEdBQUEsR0FFQSxRQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsR0FFQSxPQUFBLFNBQUEsR0FDQSxNQUFBLFFBQUEsR0FBQSxlQUVBLFNBQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLGVBRUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsY0FBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLGlCQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLE1BQUEsR0FFQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsTUFDQSxPQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsS0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxRQUFBLFVBQUEsTUFFQSxNQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsT0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLFFBQUEsZUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLE9BQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLFFBQUEsU0FBQSxHQUNBLFNBQUEsT0FBQSxHQUFBLFdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxJQUVBLE1BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEtBRUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxHQUFBLE1BRUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEdBQUEsSUFFQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsTUFBQSxRQUFBLFFBQUEsRUFBQSxNQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FFQSxVQUFBLE9BQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxTQUVBLElBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxHQUFBLFFBQUEsSUFFQSxJQUFBLFNBQUEsRUFBQSxHQUNBLE9BQUEsR0FBQSxHQUVBLFVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxHQUFBLEdBQUEsR0FBQSxHQUVBLElBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUFBLEdBQUEsR0FBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUFBLEVBQUEsUUFBQSxhQUFBLE1BRUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxXQUFBLElBRUEsS0FBQSxTQUFBLEdBQ0EsUUFBQSxHQUVBLE1BQUEsU0FBQSxHQUNBLE9BQUEsR0FFQSxNQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEVBQUEsS0FBQSxHQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsTUFBQSxLQUFBLE1BQUEsS0FBQSxVQUFBLEtBRUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsUUFBQSxHQUFBLEVBQUEsSUFFQSxJQUFBLFNBQUEsR0FFQSxNQURBLFNBQUEsSUFBQSxHQUNBLElBS0Esa0JBQUEsUUFBQSxVQUFBLE9BQ0EsT0FBQSxVQUFBLEtBQUEsV0FDQSxNQUFBLE1BQUEsUUFBQSxhQUFBLE1BS0EsbUJBQUEsU0FBQSxPQUFBLFFBQ0EsT0FBQSxRQUFBLEtBRUEsa0JBQUEsU0FBQSxPQUFBLEtBQ0EsT0FBQSxXQUNBLE1BQUEsT0hoZUEsSUFBQSxRQUFBLFNBQUEsR0FFQSxZQXlDQSxTQUFBLEtBSUEsR0FDQSxHQURBLEVBQUEsRUFBQSxVQU9BLE9BTEEsWUFBQSxXQUNBLEdBQUEsWUFBQSxVQUFBLE1BQUEsTUFBQSxTQUFBLFVBQUEsWUFDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLElBQ0EsS0FDQSxFQUFBLFVBUUEsUUFBQSxHQUFBLEdBR0EsQ0FBQSxHQUFBLE1BQ0EsSUFDQSxHQUFBLE9BYUEsTUFYQSxHQUFBLEtBQUEsTUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsT0FFQSxHQUFBLEtBQUEsRUFBQSxJQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsR0FBQSxJQUNBLEtBQUEsV0FDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLFNBS0EsRUFBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLFVBUUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxFQUVBLEtBQ0EsRUFBQSwwREFFQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsQ0FDQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsS0FJQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLE9BQ0EsRUFBQSxFQUFBLElBQUEsRUFFQSxHQUFBLEtBQUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsT0FVQSxRQUFBLEdBQUEsRUFBQSxHQUVBLEdBZ0JBLEdBaEJBLEtBQ0EsRUFBQSx1aUJBY0EsRUFBQSxFQUFBLFNBRUEsUUFBQSxHQUNBLElBQUEsSUFDQSxFQUFBLFdBQ0EsTUFDQSxLQUFBLE1BQ0EsRUFBQSxTQUNBLE1BQ0EsS0FBQSxLQUNBLEVBQUEsY0FDQSxNQUNBLEtBQUEsS0FDQSxFQUFBLGlCQUNBLE1BQ0EsS0FBQSxLQUNBLEVBQUEsYUFDQSxNQUNBLEtBQUEsUUFDQSxFQUFBLGNBQ0EsTUFDQSxLQUFBLFFBQ0EsRUFBQSxhQUtBLEdBQUEsR0FBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLFVBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxhQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFDQSxHQUFBLEtBQUEsTUFBQSxFQUFBLElBQUEsR0FBQSxFQUVBLElBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxRQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxZQUNBLEdBQUEsUUFBQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLFNBQUEsUUFJQSxJQUFBLElBQUEsS0FBQSxTQUFBLEVBQ0EsR0FBQSxJQUFBLENBRUEsSUFBQSxJQUFBLEtBQUEsU0FBQSxFQUNBLEdBQUEsSUFBQSxDQUdBLElBQ0EsTUFBQSxFQUNBLElBQUEsRUFBQSxLQUNBLFlBQUEsRUFBQSxLQUNBLFlBQUEsRUFBQSxZQUNBLFVBQUEsRUFBQSxVQUNBLGlCQUFBLEVBQ0EsT0FBQSxFQUFBLE9BQ0EsU0FBQSxFQUFBLFNBQ0EsSUFBQSxPQUFBLEVBQ0EsSUFBQSxPQUFBLEVBR0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsT0FBQSxHQU1BLFFBQUEsR0FBQSxHQUVBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsS0FDQSxFQUFBLGlGQUVBLEdBQUEsS0FBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxHQUFBLE1BQUEsS0FDQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsS0FRQSxRQUFBLEtBQ0EsR0FDQSxHQUFBLEVBREEsRUFBQSxHQUFBLEtBSUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsQ0FFQSxFQUFBLFFBQUEsRUFBQSxVQUFBLE1BQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxtQkFBQSxTQUNBLFFBQUEsT0FFQSxNQUFBLE9BQ0EsSUFBQSxZQUdBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFVBQUEsS0FBQSxHQUNBLFNBQUEsV0FDQSxLQUNBLEtBQUEsR0FNQSxLQUpBLEVBQUEsT0FBQSxHQUVBLEVBQUEsTUFBQSxFQUFBLElBRUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsVUFBQSxLQUFBLEdBQ0EsU0FBQSxhQUNBLEtBQ0EsS0FBQSxHQUVBLEdBQUEsT0FBQSxLQVdBLFFBQUEsS0FFQSxHQUFBLE1BQ0EsRUFBQSxtRkFFQSxHQUFBLFFBQUEsU0FBQSxHQUVBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBRUEsSUFDQSxRQUFBLEVBQ0EsR0FBQSxFQUdBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsS0FBQSxNQUFBLE9BQUEsS0FRQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsRUFDQSxFQUFBLEVBQUEsRUFFQSxFQUFBLEVBQUEsZUFDQSxPQUNBLEtBQUEsS0FBQSxLQUFBLEVBQUEsSUFBQSxHQUFBLE1BQ0EsT0FFQSxFQUFBLFNBQUEsR0FBQSxFQUFBLFNBQUEsR0FBQSxDQUNBLEdBQUEsS0FDQSxLQUFBLElBUUEsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLFFBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxJQUFBLFFBQ0EsR0FBQSxTQUFBLEVBQUEsR0FFQSxFQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxLQUNBLEVBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLElBQ0EsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsS0FtQkEsUUFBQSxLQXVEQSxRQUFBLEdBQUEsR0FDQSxFQUFBLGlCQUNBLEtBQUEsU0FBQSxLQUFBLFVBQ0EsS0FBQSxVQUFBLEtBQUEsV0FDQSxLQUFBLGNBQUEsRUFBQSxRQUNBLEtBQUEsY0FBQSxFQUFBLFFBQ0EsR0FBQSxFQUNBLEdBQUEsRUFHQSxFQUFBLEdBQUEsbUJBQUEsR0FFQSxFQUFBLEdBQUEsc0JBQUEsR0FHQSxRQUFBLEtBQ0EsSUFDQSxHQUFBLEVBQ0EsRUFBQSxJQUFBLG1CQUFBLEdBQ0EsRUFBQSxJQUFBLHNCQUFBLElBSUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxFQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsUUFBQSxLQUFBLGNBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxhQUdBLEdBQUEsS0FBQSxJQUFBLEdBQUEsR0FBQSxLQUFBLElBQUEsR0FBQSxDQUVBLElBQUEsR0FBQSxLQUFBLFNBQUEsRUFDQSxFQUFBLEtBQUEsVUFBQSxDQUVBLEdBQUEsSUFDQSxFQUFBLEdBR0EsRUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEdBR0EsRUFBQSxFQUFBLEtBQUEsSUFBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLEtBQUEsSUFBQSxHQUFBLElBR0EsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEtBQ0EsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLElBR0EsRUFBQSxNQUFBLEtBQ0EsSUFBQSxFQUFBLEtBQ0EsS0FBQSxFQUFBLE9BRUEsRUFBQSxLQUNBLElBQUEsRUFBQSxPQUVBLEVBQUEsS0FDQSxLQUFBLEVBQUEsTUFFQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEtBQ0EsS0FBQSxFQUFBLFFBVUEsUUFBQSxLQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsTUFBQSxJQUFBLFFBQ0EsR0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FRQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEdBQUEsU0FBQSxFQUFBLE1BQUEsS0FBQSxNQUNBLEdBQUEsR0FRQSxRQUFBLEdBQUEsR0FDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLENBQ0EsSUFBQSxHQUFBLFNBQUEsaUJBQUEsRUFBQSxRQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsR0FBQSxHQUFBLGlCQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxpQkFFQSxFQUFBLEVBQUEsS0FBQSxLQUFBLEtBQUEsUUFDQSxFQUFBLEVBQUEsS0FBQSxLQUNBLEdBQUEsRUFBQSxFQUVBLElBQUEsR0FBQSxTQUFBLEVBQUEsSUFBQSxTQUFBLEVBQUEsUUFBQSxDQUNBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLElBVUEsUUFBQSxHQUFBLEdBMEJBLFFBQUEsS0FDQSxFQUFBLFVBQ0EsS0FBQSxLQUNBLFNBQUEsVUFDQSxTQUFBLEdBQ0EsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLGlCQUNBLElBQ0EsS0FBQSxXQUlBLFFBQUEsS0FDQSxJQUFBLFNBQUEsRUFBQSxJQUFBLFdBQ0EsRUFBQSxPQUFBLFNBQ0EsTUFBQSxNQUNBLElBQUEsU0F2Q0EsSUFFQSxFQUFBLE1BQ0EsSUFBQSxxQkFDQSxNQUNBLE9BQUEsR0FFQSxTQUFBLE9BQ0EsT0FBQSxJQUVBLEtBQUEsU0FBQSxHQUNBLEVBQ0EsS0FBQSxjQUNBLEtBQUEsR0FDQSxFQUNBLEtBQUEsU0FBQSxjQUNBLE9BQUEsUUFFQSxFQUFBLFNBQ0EsTUFBQSxHQUNBLElBQUEsUUFBQSxLQXlCQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGVBQUEsS0FBQSxRQUVBLEdBQUEsU0FBQSxJQUNBLEVBQUEsWUFBQSxHQUNBLEVBQUEsTUFBQSxLQUFBLFVBQUEsWUFBQSxZQUVBLEVBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxLQUFBLFVBQUEsU0FBQSxXQUlBLFFBQUEsS0FDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsZ0JBQUEsRUFBQSxLQUFBLEtBQUEsVUFBQSxRQUFBLFdBVUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsQ0FDQSxHQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxLQUNBLEVBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLElBQ0EsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsS0ExUEEsR0FBQSxHQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsU0FFQSxHQURBLEVBQUEsWUFDQSxFQUFBLFNBQ0EsR0FBQSxFQUNBLEdBQUEsRUFFQSxFQUFBLEVBQUEsMENBQ0EsSUFDQSxHQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxLQUFBLGFBRUEsSUFBQSxHQUFBLEVBQUEsTUFFQSxFQUFBLEVBQUEseUNBQ0EsSUFDQSxHQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxLQUFBLFdBQUEsRUFBQSxNQUFBLFVBRUEsSUFBQSxHQUFBLEVBQUEsS0FHQSxHQUFBLEtBQUEsb0JBQUEsU0FJQSxFQUFBLEdBQUEsdUJBQUEsR0FPQSxFQUFBLEdBQUEsUUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLGFBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxLQUFBLEdBQ0EsSUFHQSxFQUFBLEdBQUEsUUFBQSxLQUFBLEdBc05BLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsMkJBSUEsR0FBQSxJQUFBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsRUFBQSxDQUVBLElBQUEsTUFDQSxFQUFBLCtRQUtBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUVBLEdBQ0EsTUFBQSxFQUNBLFFBQUEsRUFHQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsS0FHQSxFQUFBLEtBQUEsR0FHQSxFQUFBLEtBQUEsRUFBQSxLQUFBLGNBQUEsV0FFQSxJQUFBLEVBQUEsUUFBQSxFQUFBLE1BQUEsS0FBQSxhQUVBLEVBQUEsTUFBQSxLQUFBLFVBQUEsU0FBQSxTQUlBLEVBQ0EsS0FBQSxTQUFBLGNBQ0EsT0FBQSxNQUNBLE9BQUEsRUFDQSxzQkFBQSxNQVdBLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSwrQkFFQSxLQUNBLEVBQUEsMkpBRUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEtBQ0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEtBR0EsRUFBQSxLQUFBLGlCQUFBLEtBQUEsR0FDQSxFQUNBLEtBQUEsU0FBQSxjQUNBLE9BQUEsTUFDQSxPQUFBLEVBQ0Esc0JBQUEsSUFJQSxRQUFBLEtBMkRBLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEtBQUEsVUFDQSxFQUFBLEVBQUEsU0FBQSxPQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsV0FDQSxFQUFBLEVBQUEsS0FBQSxjQUFBLE9BQUEsV0FDQSxNQUFBLEdBQUEsTUFBQSxLQUFBLGFBQUE7RUFHQSxJQVVBLEVBQUEsWUFBQSxPQUNBLEVBQUEsS0FBQSxVQUFBLFlBQUEsU0FUQSxFQUFBLFlBQUEsT0FDQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLFVBQUEsWUFBQSxPQUVBLEVBQUEsTUFBQSxRQUFBLFNBQUEsRUFBQSxLQUFBLFFBUUEsRUFDQSxLQUFBLFNBQUEsZUFBQSxjQUNBLE9BQUEsV0FrQkEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxpQkFDQSxJQUFBLEdBQUEsRUFBQSxNQUFBLE9BQUEsY0FBQSxLQUFBLFdBQ0EsRUFBQSxFQUFBLEtBQUEsY0FBQSxPQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxhQUFBLEdBR0EsR0FBQSxNQUFBLFlBQUEsT0FDQSxFQUFBLEtBQUEsVUFBQSxZQUFBLE9BeEdBLEVBQUEsR0FBQSxRQUFBLGFBQUEsRUFHQSxJQUFBLEdBQ0EsRUFBQSxFQUFBLDBCQUFBLFVBQ0EsTUFBQSxRQUNBLGlCQUFBLEVBRUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsYUFBQSxNQUdBLEdBRkEsS0FBQSxVQUFBLEVBQUEsS0FBQSxLQUVBLEVBQUEsU0FBQSxLQUNBLE9BQUEsSUFFQSxHQUFBLE9BQUEsR0FDQSxFQUFBLFNBRUEsRUFBQSxFQUFBLElBSUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLFVBQUEsUUFHQSxFQUFBLEVBQUEscUNBQUEsSUFBQSxHQUFBLFNBQ0EsR0FBQSxLQUFBLE1BQUEsR0FFQSxHQUNBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FDQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsR0FHQSxFQUFBLEVBQUEsSUFFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FDQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxRQU1BLEdBQUEsR0FBQSxRQUFBLFNBQUEsR0E1dEJBLEdBQUEsSUFBQSxNQUFBLE1BQUEsVUFBQSxTQUFBLFlBQUEsV0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEVBQUEsR0FHQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBR0EsRUFBQSxHQUFBLE1BQ0EsR0FDQSxFQUFBLFFBQUEsRUFBQSxXQUFBLEdBQ0EsRUFBQSxRQUFBLEVBQUEsYUFBQSxHQUdBLEdBQUEsUUFBQSxLQUFBLE1BQUEsb0JBRUEsSUFBQSxHQUFBLEVBQUEsYUFDQSxFQUFBLEVBQUEsdUJBQ0EsRUFBQSxFQUFBLGlCQUNBLEVBQUEsRUFBQSxrQkFFQSxFQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLGVBQ0EsRUFBQSxFQUFBLGVBQ0EsRUFBQSxFQUFBLGtCQUVBLEdBREEsRUFBQSxrQkFDQSxFQUFBLGlCQUNBLEVBQUEsRUFBQSxnQkFpeUJBLE9BckNBLFlBSUEsQ0FBQSxHQUFBLEdBQUEsR0FDQSxHQUFBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxFQUNBLEVBQUEsS0FFQSxLQUFBLFdBQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLElBQ0EsSUFDQSxJQUNBLElBRUEsSUFFQSxJQUNBLElBRUEsVUFXQSxFQUFBLEdBQUEsT0FBQSxXQUNBLE1BQUEsTUFBQSxPQUFBLEdBR0EsTUFFQSxNQStEQSxPQUFBLFVBQUEsSUFBQSxXQUdBLElBQUEsR0FGQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLElBQUEsRUFBQSxLQUFBLEdBQ0EsT0FBQSxJQUVBLE1BQUEsVUFBQSxJQUFBLFdBR0EsSUFBQSxHQUZBLEdBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsSUFBQSxFQUFBLEtBQUEsR0FDQSxPQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogIGpxdWVyeS1zb3J0YWJsZS5qcyB2MC45LjEyXHJcbiAqICBodHRwOi8vam9obm55LmdpdGh1Yi5jb20vanF1ZXJ5LXNvcnRhYmxlL1xyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogIENvcHlyaWdodCAoYykgMjAxMiBKb25hcyB2b24gQW5kcmlhblxyXG4gKiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxyXG4gKiAgbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XHJcbiAqICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XHJcbiAqICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cclxuICogICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHRcclxuICogICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxyXG4gKiAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxyXG4gKiAgKiBUaGUgbmFtZSBvZiB0aGUgYXV0aG9yIG1heSBub3QgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHNcclxuICogICAgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXHJcbiAqXHJcbiAqICBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcclxuICogIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXHJcbiAqICBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXHJcbiAqICBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCA8Q09QWVJJR0hUIEhPTERFUj4gQkUgTElBQkxFIEZPUiBBTllcclxuICogIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXHJcbiAqICAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XHJcbiAqICBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkRcclxuICogIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXHJcbiAqICAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xyXG4gKiAgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbihmdW5jdGlvbigkLCB3aW5kb3csIHBsdWdpbk5hbWUsIHVuZGVmaW5lZCkge1xyXG4gICAgdmFyIGV2ZW50TmFtZXMsXHJcbiAgICAgICAgY29udGFpbmVyRGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIGl0ZW1zIGNhbiBiZSBkcmFnZ2VkIGZyb20gdGhpcyBjb250YWluZXJcclxuICAgICAgICAgICAgZHJhZzogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgaXRlbXMgY2FuIGJlIGRyb3BlZCBvbnRvIHRoaXMgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGRyb3A6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIEV4Y2x1ZGUgaXRlbXMgZnJvbSBiZWluZyBkcmFnZ2FibGUsIGlmIHRoZVxyXG4gICAgICAgICAgICAvLyBzZWxlY3RvciBtYXRjaGVzIHRoZSBpdGVtXHJcbiAgICAgICAgICAgIGV4Y2x1ZGU6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIHNlYXJjaCBmb3IgbmVzdGVkIGNvbnRhaW5lcnMgd2l0aGluIGFuIGl0ZW1cclxuICAgICAgICAgICAgbmVzdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCB0aGUgaXRlbXMgYXJlIGFzc3VtZWQgdG8gYmUgYXJyYW5nZWQgdmVydGljYWxseVxyXG4gICAgICAgICAgICB2ZXJ0aWNhbDogdHJ1ZVxyXG4gICAgICAgIH0sIC8vIGVuZCBjb250YWluZXIgZGVmYXVsdHNcclxuICAgICAgICBncm91cERlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGV4ZWN1dGVkIGFmdGVyIHRoZSBwbGFjZWhvbGRlciBoYXMgYmVlbiBtb3ZlZC5cclxuICAgICAgICAgICAgLy8gJGNsb3Nlc3RJdGVtT3JDb250YWluZXIgY29udGFpbnMgdGhlIGNsb3Nlc3QgaXRlbSwgdGhlIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgIC8vIGhhcyBiZWVuIHB1dCBhdCBvciB0aGUgY2xvc2VzdCBlbXB0eSBDb250YWluZXIsIHRoZSBwbGFjZWhvbGRlciBoYXNcclxuICAgICAgICAgICAgLy8gYmVlbiBhcHBlbmRlZCB0by5cclxuICAgICAgICAgICAgYWZ0ZXJNb3ZlOiBmdW5jdGlvbigkcGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgJGNsb3Nlc3RJdGVtT3JDb250YWluZXIpIHt9LFxyXG4gICAgICAgICAgICAvLyBUaGUgZXhhY3QgY3NzIHBhdGggYmV0d2VlbiB0aGUgY29udGFpbmVyIGFuZCBpdHMgaXRlbXMsIGUuZy4gXCI+IHRib2R5XCJcclxuICAgICAgICAgICAgY29udGFpbmVyUGF0aDogXCJcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNzcyBzZWxlY3RvciBvZiB0aGUgY29udGFpbmVyc1xyXG4gICAgICAgICAgICBjb250YWluZXJTZWxlY3RvcjogXCJvbCwgdWxcIixcclxuICAgICAgICAgICAgLy8gRGlzdGFuY2UgdGhlIG1vdXNlIGhhcyB0byB0cmF2ZWwgdG8gc3RhcnQgZHJhZ2dpbmdcclxuICAgICAgICAgICAgZGlzdGFuY2U6IDAsXHJcbiAgICAgICAgICAgIC8vIFRpbWUgaW4gbWlsbGlzZWNvbmRzIGFmdGVyIG1vdXNlZG93biB1bnRpbCBkcmFnZ2luZyBzaG91bGQgc3RhcnQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIHByZXZlbnQgdW53YW50ZWQgZHJhZ3Mgd2hlbiBjbGlja2luZyBvbiBhbiBlbGVtZW50LlxyXG4gICAgICAgICAgICBkZWxheTogMCxcclxuICAgICAgICAgICAgLy8gVGhlIGNzcyBzZWxlY3RvciBvZiB0aGUgZHJhZyBoYW5kbGVcclxuICAgICAgICAgICAgaGFuZGxlOiBcIlwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgZXhhY3QgY3NzIHBhdGggYmV0d2VlbiB0aGUgaXRlbSBhbmQgaXRzIHN1YmNvbnRhaW5lcnNcclxuICAgICAgICAgICAgaXRlbVBhdGg6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjc3Mgc2VsZWN0b3Igb2YgdGhlIGl0ZW1zXHJcbiAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogXCJsaVwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY2xhc3MgZ2l2ZW4gdG8gXCJib2R5XCIgd2hpbGUgYW4gaXRlbSBpcyBiZWluZyBkcmFnZ2VkXHJcbiAgICAgICAgICAgIGJvZHlDbGFzczogXCJkcmFnZ2luZ1wiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY2xhc3MgZ2l2aW5nIHRvIGFuIGl0ZW0gd2hpbGUgYmVpbmcgZHJhZ2dlZFxyXG4gICAgICAgICAgICBkcmFnZ2VkQ2xhc3M6IFwiZHJhZ2dlZFwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY2xhc3Mgb2YgdGhlIHBsYWNlaG9sZGVyIChtdXN0IG1hdGNoIHBsYWNlaG9sZGVyIG9wdGlvbiBtYXJrdXApXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ2xhc3M6IFwicGxhY2Vob2xkZXJcIixcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGRyYWdnZWQgaXRlbSBtYXkgYmUgaW5zaWRlIHRoZSBjb250YWluZXIuXHJcbiAgICAgICAgICAgIC8vIFVzZSB3aXRoIGNhcmUsIHNpbmNlIHRoZSBzZWFyY2ggZm9yIGEgdmFsaWQgY29udGFpbmVyIGVudGFpbHMgYSBkZXB0aCBmaXJzdCBzZWFyY2hcclxuICAgICAgICAgICAgLy8gYW5kIG1heSBiZSBxdWl0ZSBleHBlbnNpdmUuXHJcbiAgICAgICAgICAgIGlzVmFsaWRUYXJnZXQ6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIEV4ZWN1dGVkIGJlZm9yZSBvbkRyb3AgaWYgcGxhY2Vob2xkZXIgaXMgZGV0YWNoZWQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgaGFwcGVucyBpZiBwdWxsUGxhY2Vob2xkZXIgaXMgc2V0IHRvIGZhbHNlIGFuZCB0aGUgZHJvcCBvY2N1cnMgb3V0c2lkZSBhIGNvbnRhaW5lci5cclxuICAgICAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlciwgZXZlbnQpIHt9LFxyXG4gICAgICAgICAgICAvLyBFeGVjdXRlZCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgbW91c2UgbW92ZSBldmVudC5cclxuICAgICAgICAgICAgLy8gVGhlIFBsYWNlaG9sZGVyIGhhcyBub3QgYmVlbiBtb3ZlZCB5ZXQuXHJcbiAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24oJGl0ZW0sIHBvc2l0aW9uLCBfc3VwZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5jc3MocG9zaXRpb24pXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENhbGxlZCBhZnRlciB0aGUgZHJhZyBoYXMgYmVlbiBzdGFydGVkLFxyXG4gICAgICAgICAgICAvLyB0aGF0IGlzIHRoZSBtb3VzZSBidXR0b24gaXMgYmVlaW5nIGhlbGQgZG93biBhbmRcclxuICAgICAgICAgICAgLy8gdGhlIG1vdXNlIGlzIG1vdmluZy5cclxuICAgICAgICAgICAgLy8gVGhlIGNvbnRhaW5lciBpcyB0aGUgY2xvc2VzdCBpbml0aWFsaXplZCBjb250YWluZXIuXHJcbiAgICAgICAgICAgIC8vIFRoZXJlZm9yZSBpdCBtaWdodCBub3QgYmUgdGhlIGNvbnRhaW5lciwgdGhhdCBhY3R1YWxseSBjb250YWlucyB0aGUgaXRlbS5cclxuICAgICAgICAgICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlciwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRpdGVtLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAkaXRlbS5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJGl0ZW0ud2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKGNvbnRhaW5lci5ncm91cC5vcHRpb25zLmRyYWdnZWRDbGFzcylcclxuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKGNvbnRhaW5lci5ncm91cC5vcHRpb25zLmJvZHlDbGFzcylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gQ2FsbGVkIHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyBiZWVpbmcgcmVsZWFzZWRcclxuICAgICAgICAgICAgb25Ecm9wOiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5yZW1vdmVDbGFzcyhjb250YWluZXIuZ3JvdXAub3B0aW9ucy5kcmFnZ2VkQ2xhc3MpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKVxyXG4gICAgICAgICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoY29udGFpbmVyLmdyb3VwLm9wdGlvbnMuYm9keUNsYXNzKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBDYWxsZWQgb24gbW91c2Vkb3duLiBJZiBmYWxzeSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIGRyYWdnaW5nIHdpbGwgbm90IHN0YXJ0LlxyXG4gICAgICAgICAgICAvLyBJZ25vcmUgaWYgZWxlbWVudCBjbGlja2VkIGlzIGlucHV0LCBzZWxlY3Qgb3IgdGV4dGFyZWFcclxuICAgICAgICAgICAgb25Nb3VzZWRvd246IGZ1bmN0aW9uKCRpdGVtLCBfc3VwZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5ub2RlTmFtZS5tYXRjaCgvXihpbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBUZW1wbGF0ZSBmb3IgdGhlIHBsYWNlaG9sZGVyLiBDYW4gYmUgYW55IHZhbGlkIGpRdWVyeSBpbnB1dFxyXG4gICAgICAgICAgICAvLyBlLmcuIGEgc3RyaW5nLCBhIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAgICAvLyBUaGUgcGxhY2Vob2xkZXIgbXVzdCBoYXZlIHRoZSBjbGFzcyBcInBsYWNlaG9sZGVyXCJcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICc8bGkgY2xhc3M9XCJwbGFjZWhvbGRlclwiLz4nLFxyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCB0aGUgcG9zaXRpb24gb2YgdGhlIHBsYWNlaG9sZGVyIGlzIGNhbGN1bGF0ZWQgb24gZXZlcnkgbW91c2Vtb3ZlLlxyXG4gICAgICAgICAgICAvLyBJZiBmYWxzZSwgaXQgaXMgb25seSBjYWxjdWxhdGVkIHdoZW4gdGhlIG1vdXNlIGlzIGFib3ZlIGEgY29udGFpbmVyLlxyXG4gICAgICAgICAgICBwdWxsUGxhY2Vob2xkZXI6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIFNwZWNpZmllcyBzZXJpYWxpemF0aW9uIG9mIHRoZSBjb250YWluZXIgZ3JvdXAuXHJcbiAgICAgICAgICAgIC8vIFRoZSBwYWlyICRwYXJlbnQvJGNoaWxkcmVuIGlzIGVpdGhlciBjb250YWluZXIvaXRlbXMgb3IgaXRlbS9zdWJjb250YWluZXJzLlxyXG4gICAgICAgICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKCRwYXJlbnQsICRjaGlsZHJlbiwgcGFyZW50SXNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAkLmV4dGVuZCh7fSwgJHBhcmVudC5kYXRhKCkpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudElzQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbJGNoaWxkcmVuXVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJGNoaWxkcmVuWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNoaWxkcmVuID0gJGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5zdWJDb250YWluZXJzXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0LnNvcnRhYmxlXHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBTZXQgdG9sZXJhbmNlIHdoaWxlIGRyYWdnaW5nLiBQb3NpdGl2ZSB2YWx1ZXMgZGVjcmVhc2Ugc2Vuc2l0aXZpdHksXHJcbiAgICAgICAgICAgIC8vIG5lZ2F0aXZlIHZhbHVlcyBpbmNyZWFzZSBpdC5cclxuICAgICAgICAgICAgdG9sZXJhbmNlOiAwXHJcbiAgICAgICAgfSwgLy8gZW5kIGdyb3VwIGRlZmF1bHRzXHJcbiAgICAgICAgY29udGFpbmVyR3JvdXBzID0ge30sXHJcbiAgICAgICAgZ3JvdXBDb3VudGVyID0gMCxcclxuICAgICAgICBlbXB0eUJveCA9IHtcclxuICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICBib3R0b206IDAsXHJcbiAgICAgICAgICAgIHJpZ2h0OiAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBldmVudE5hbWVzID0ge1xyXG4gICAgICAgICAgICBzdGFydDogXCJ0b3VjaHN0YXJ0LnNvcnRhYmxlIG1vdXNlZG93bi5zb3J0YWJsZVwiLFxyXG4gICAgICAgICAgICBkcm9wOiBcInRvdWNoZW5kLnNvcnRhYmxlIHRvdWNoY2FuY2VsLnNvcnRhYmxlIG1vdXNldXAuc29ydGFibGVcIixcclxuICAgICAgICAgICAgZHJhZzogXCJ0b3VjaG1vdmUuc29ydGFibGUgbW91c2Vtb3ZlLnNvcnRhYmxlXCIsXHJcbiAgICAgICAgICAgIHNjcm9sbDogXCJzY3JvbGwuc29ydGFibGVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3ViQ29udGFpbmVyS2V5ID0gXCJzdWJDb250YWluZXJzXCJcclxuXHJcbiAgICAvKlxyXG4gICAgICogYSBpcyBBcnJheSBbbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tXVxyXG4gICAgICogYiBpcyBhcnJheSBbbGVmdCwgdG9wXVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBkKGEsIGIpIHtcclxuICAgICAgICB2YXIgeCA9IE1hdGgubWF4KDAsIGFbMF0gLSBiWzBdLCBiWzBdIC0gYVsxXSksXHJcbiAgICAgICAgICAgIHkgPSBNYXRoLm1heCgwLCBhWzJdIC0gYlsxXSwgYlsxXSAtIGFbM10pXHJcbiAgICAgICAgcmV0dXJuIHggKyB5O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldERpbWVuc2lvbnMoYXJyYXksIGRpbWVuc2lvbnMsIHRvbGVyYW5jZSwgdXNlT2Zmc2V0KSB7XHJcbiAgICAgICAgdmFyIGkgPSBhcnJheS5sZW5ndGgsXHJcbiAgICAgICAgICAgIG9mZnNldE1ldGhvZCA9IHVzZU9mZnNldCA/IFwib2Zmc2V0XCIgOiBcInBvc2l0aW9uXCJcclxuICAgICAgICB0b2xlcmFuY2UgPSB0b2xlcmFuY2UgfHwgMFxyXG5cclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgIHZhciBlbCA9IGFycmF5W2ldLmVsID8gYXJyYXlbaV0uZWwgOiAkKGFycmF5W2ldKSxcclxuICAgICAgICAgICAgICAgIC8vIHVzZSBmaXR0aW5nIG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgcG9zID0gZWxbb2Zmc2V0TWV0aG9kXSgpXHJcbiAgICAgICAgICAgIHBvcy5sZWZ0ICs9IHBhcnNlSW50KGVsLmNzcygnbWFyZ2luLWxlZnQnKSwgMTApXHJcbiAgICAgICAgICAgIHBvcy50b3AgKz0gcGFyc2VJbnQoZWwuY3NzKCdtYXJnaW4tdG9wJyksIDEwKVxyXG4gICAgICAgICAgICBkaW1lbnNpb25zW2ldID0gW1xyXG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgLSB0b2xlcmFuY2UsXHJcbiAgICAgICAgICAgICAgICBwb3MubGVmdCArIGVsLm91dGVyV2lkdGgoKSArIHRvbGVyYW5jZSxcclxuICAgICAgICAgICAgICAgIHBvcy50b3AgLSB0b2xlcmFuY2UsXHJcbiAgICAgICAgICAgICAgICBwb3MudG9wICsgZWwub3V0ZXJIZWlnaHQoKSArIHRvbGVyYW5jZVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJlbGF0aXZlUG9zaXRpb24ocG9pbnRlciwgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSBlbGVtZW50Lm9mZnNldCgpXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGVmdDogcG9pbnRlci5sZWZ0IC0gb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgIHRvcDogcG9pbnRlci50b3AgLSBvZmZzZXQudG9wXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNvcnRCeURpc3RhbmNlRGVzYyhkaW1lbnNpb25zLCBwb2ludGVyLCBsYXN0UG9pbnRlcikge1xyXG4gICAgICAgIHBvaW50ZXIgPSBbcG9pbnRlci5sZWZ0LCBwb2ludGVyLnRvcF1cclxuICAgICAgICBsYXN0UG9pbnRlciA9IGxhc3RQb2ludGVyICYmIFtsYXN0UG9pbnRlci5sZWZ0LCBsYXN0UG9pbnRlci50b3BdXHJcblxyXG4gICAgICAgIHZhciBkaW0sXHJcbiAgICAgICAgICAgIGkgPSBkaW1lbnNpb25zLmxlbmd0aCxcclxuICAgICAgICAgICAgZGlzdGFuY2VzID0gW11cclxuXHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICBkaW0gPSBkaW1lbnNpb25zW2ldXHJcbiAgICAgICAgICAgIGRpc3RhbmNlc1tpXSA9IFtpLCBkKGRpbSwgcG9pbnRlciksIGxhc3RQb2ludGVyICYmIGQoZGltLCBsYXN0UG9pbnRlcildXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpc3RhbmNlcyA9IGRpc3RhbmNlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJbMV0gLSBhWzFdIHx8IGJbMl0gLSBhWzJdIHx8IGJbMF0gLSBhWzBdXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gbGFzdCBlbnRyeSBpcyB0aGUgY2xvc2VzdFxyXG4gICAgICAgIHJldHVybiBkaXN0YW5jZXNcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBDb250YWluZXJHcm91cChvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIGdyb3VwRGVmYXVsdHMsIG9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJzID0gW11cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucm9vdEdyb3VwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsUHJveHkgPSAkLnByb3h5KHRoaXMuc2Nyb2xsLCB0aGlzKVxyXG4gICAgICAgICAgICB0aGlzLmRyYWdQcm94eSA9ICQucHJveHkodGhpcy5kcmFnLCB0aGlzKVxyXG4gICAgICAgICAgICB0aGlzLmRyb3BQcm94eSA9ICQucHJveHkodGhpcy5kcm9wLCB0aGlzKVxyXG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gJCh0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIpXHJcblxyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuaXNWYWxpZFRhcmdldClcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5pc1ZhbGlkVGFyZ2V0ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIENvbnRhaW5lckdyb3VwLmdldCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIWNvbnRhaW5lckdyb3Vwc1tvcHRpb25zLmdyb3VwXSkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ncm91cCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5ncm91cCA9IGdyb3VwQ291bnRlcisrXHJcblxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyR3JvdXBzW29wdGlvbnMuZ3JvdXBdID0gbmV3IENvbnRhaW5lckdyb3VwKG9wdGlvbnMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyR3JvdXBzW29wdGlvbnMuZ3JvdXBdXHJcbiAgICB9XHJcblxyXG4gICAgQ29udGFpbmVyR3JvdXAucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGRyYWdJbml0OiBmdW5jdGlvbihlLCBpdGVtQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGRvY3VtZW50ID0gJChpdGVtQ29udGFpbmVyLmVsWzBdLm93bmVyRG9jdW1lbnQpXHJcblxyXG4gICAgICAgICAgICAvLyBnZXQgaXRlbSB0byBkcmFnXHJcbiAgICAgICAgICAgIHRoaXMuaXRlbSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLml0ZW1TZWxlY3RvcilcclxuICAgICAgICAgICAgdGhpcy5pdGVtQ29udGFpbmVyID0gaXRlbUNvbnRhaW5lclxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXRlbS5pcyh0aGlzLm9wdGlvbnMuZXhjbHVkZSkgfHxcclxuICAgICAgICAgICAgICAgICF0aGlzLm9wdGlvbnMub25Nb3VzZWRvd24odGhpcy5pdGVtLCBncm91cERlZmF1bHRzLm9uTW91c2Vkb3duLCBlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9pbnRlcihlKVxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxpc3RlbmVycygnb24nKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXR1cERlbGF5VGltZXIoKVxyXG4gICAgICAgICAgICB0aGlzLmRyYWdJbml0RG9uZSA9IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYWc6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGlzdGFuY2VNZXQoZSkgfHwgIXRoaXMuZGVsYXlNZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRHJhZ1N0YXJ0KHRoaXMuaXRlbSwgdGhpcy5pdGVtQ29udGFpbmVyLCBncm91cERlZmF1bHRzLm9uRHJhZ1N0YXJ0LCBlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtLmJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IHRydWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRQb2ludGVyKGUpXHJcbiAgICAgICAgICAgIC8vIHBsYWNlIGl0ZW0gdW5kZXIgdGhlIGN1cnNvclxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25EcmFnKHRoaXMuaXRlbSxcclxuICAgICAgICAgICAgICAgIGdldFJlbGF0aXZlUG9zaXRpb24odGhpcy5wb2ludGVyLCB0aGlzLml0ZW0ub2Zmc2V0UGFyZW50KCkpLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBEZWZhdWx0cy5vbkRyYWcsXHJcbiAgICAgICAgICAgICAgICBlKVxyXG5cclxuICAgICAgICAgICAgdmFyIHggPSBlLnBhZ2VYIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWCxcclxuICAgICAgICAgICAgICAgIHkgPSBlLnBhZ2VZIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWSxcclxuICAgICAgICAgICAgICAgIGJveCA9IHRoaXMuc2FtZVJlc3VsdEJveCxcclxuICAgICAgICAgICAgICAgIHQgPSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlXHJcblxyXG4gICAgICAgICAgICBpZiAoIWJveCB8fCBib3gudG9wIC0gdCA+IHkgfHwgYm94LmJvdHRvbSArIHQgPCB5IHx8IGJveC5sZWZ0IC0gdCA+IHggfHwgYm94LnJpZ2h0ICsgdCA8IHgpXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VhcmNoVmFsaWRUYXJnZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuZGV0YWNoKClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RBcHBlbmRlZEl0ZW0gPSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyb3A6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVMaXN0ZW5lcnMoJ29mZicpXHJcblxyXG4gICAgICAgICAgICB0aGlzLmRyYWdJbml0RG9uZSA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvY2Vzc2luZyBEcm9wLCBjaGVjayBpZiBwbGFjZWhvbGRlciBpcyBkZXRhY2hlZFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIuY2xvc2VzdChcImh0bWxcIilbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5iZWZvcmUodGhpcy5pdGVtKS5kZXRhY2goKVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNhbmNlbCh0aGlzLml0ZW0sIHRoaXMuaXRlbUNvbnRhaW5lciwgZ3JvdXBEZWZhdWx0cy5vbkNhbmNlbCwgZSlcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25Ecm9wKHRoaXMuaXRlbSwgdGhpcy5nZXRDb250YWluZXIodGhpcy5pdGVtKSwgZ3JvdXBEZWZhdWx0cy5vbkRyb3AsIGUpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2xlYW51cFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckRpbWVuc2lvbnMoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck9mZnNldFBhcmVudCgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RBcHBlbmRlZEl0ZW0gPSB0aGlzLnNhbWVSZXN1bHRCb3ggPSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWFyY2hWYWxpZFRhcmdldDogZnVuY3Rpb24ocG9pbnRlciwgbGFzdFBvaW50ZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFwb2ludGVyKSB7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyID0gdGhpcy5yZWxhdGl2ZVBvaW50ZXIgfHwgdGhpcy5wb2ludGVyXHJcbiAgICAgICAgICAgICAgICBsYXN0UG9pbnRlciA9IHRoaXMubGFzdFJlbGF0aXZlUG9pbnRlciB8fCB0aGlzLmxhc3RQb2ludGVyXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZXMgPSBzb3J0QnlEaXN0YW5jZURlc2ModGhpcy5nZXRDb250YWluZXJEaW1lbnNpb25zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UG9pbnRlciksXHJcbiAgICAgICAgICAgICAgICBpID0gZGlzdGFuY2VzLmxlbmd0aFxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZGlzdGFuY2VzW2ldWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gZGlzdGFuY2VzW2ldWzFdXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkaXN0YW5jZSB8fCB0aGlzLm9wdGlvbnMucHVsbFBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyc1tpbmRleF1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJGdldE9mZnNldFBhcmVudCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gY29udGFpbmVyLmdldEl0ZW1PZmZzZXRQYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRlciA9IGdldFJlbGF0aXZlUG9zaXRpb24ocG9pbnRlciwgb2Zmc2V0UGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXIgPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGxhc3RQb2ludGVyLCBvZmZzZXRQYXJlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5zZWFyY2hWYWxpZFRhcmdldChwb2ludGVyLCBsYXN0UG9pbnRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zYW1lUmVzdWx0Qm94KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1lUmVzdWx0Qm94ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3ZlUGxhY2Vob2xkZXI6IGZ1bmN0aW9uKGNvbnRhaW5lciwgaXRlbSwgbWV0aG9kLCBzYW1lUmVzdWx0Qm94KSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0QXBwZW5kZWRJdGVtID0gdGhpcy5sYXN0QXBwZW5kZWRJdGVtXHJcbiAgICAgICAgICAgIGlmICghc2FtZVJlc3VsdEJveCAmJiBsYXN0QXBwZW5kZWRJdGVtICYmIGxhc3RBcHBlbmRlZEl0ZW1bMF0gPT09IGl0ZW1bMF0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpdGVtW21ldGhvZF0odGhpcy5wbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgdGhpcy5sYXN0QXBwZW5kZWRJdGVtID0gaXRlbVxyXG4gICAgICAgICAgICB0aGlzLnNhbWVSZXN1bHRCb3ggPSBzYW1lUmVzdWx0Qm94XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hZnRlck1vdmUodGhpcy5wbGFjZWhvbGRlciwgY29udGFpbmVyLCBpdGVtKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0Q29udGFpbmVyRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250YWluZXJEaW1lbnNpb25zKVxyXG4gICAgICAgICAgICAgICAgc2V0RGltZW5zaW9ucyh0aGlzLmNvbnRhaW5lcnMsIHRoaXMuY29udGFpbmVyRGltZW5zaW9ucyA9IFtdLCB0aGlzLm9wdGlvbnMudG9sZXJhbmNlLCAhdGhpcy4kZ2V0T2Zmc2V0UGFyZW50KCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lckRpbWVuc2lvbnNcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldENvbnRhaW5lcjogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHRoaXMub3B0aW9ucy5jb250YWluZXJTZWxlY3RvcikuZGF0YShwbHVnaW5OYW1lKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJGdldE9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9mZnNldFBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IHRoaXMuY29udGFpbmVyc1tpXS5nZXRJdGVtT2Zmc2V0UGFyZW50KClcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yb290R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXRQYXJlbnRbMF0gIT0gdGhpcy5jb250YWluZXJzW2ldLmdldEl0ZW1PZmZzZXRQYXJlbnQoKVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgZXZlcnkgY29udGFpbmVyIGhhcyB0aGUgc2FtZSBvZmZzZXQgcGFyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIHBvc2l0aW9uKCkgd2hpY2ggaXMgcmVsYXRpdmUgdG8gdGhpcyBwYXJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgdXNlIG9mZnNldCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21wYXJlICNzZXREaW1lbnNpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXRQYXJlbnRcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldFBvaW50ZXI6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50ZXIgPSB0aGlzLmdldFBvaW50ZXIoZSlcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLiRnZXRPZmZzZXRQYXJlbnQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbGF0aXZlUG9pbnRlciA9IGdldFJlbGF0aXZlUG9zaXRpb24ocG9pbnRlciwgdGhpcy4kZ2V0T2Zmc2V0UGFyZW50KCkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RSZWxhdGl2ZVBvaW50ZXIgPSB0aGlzLnJlbGF0aXZlUG9pbnRlclxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWxhdGl2ZVBvaW50ZXIgPSByZWxhdGl2ZVBvaW50ZXJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXN0UG9pbnRlciA9IHRoaXMucG9pbnRlclxyXG4gICAgICAgICAgICB0aGlzLnBvaW50ZXIgPSBwb2ludGVyXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkaXN0YW5jZU1ldDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFBvaW50ZXIgPSB0aGlzLmdldFBvaW50ZXIoZSlcclxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLm1heChcclxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHRoaXMucG9pbnRlci5sZWZ0IC0gY3VycmVudFBvaW50ZXIubGVmdCksXHJcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLnBvaW50ZXIudG9wIC0gY3VycmVudFBvaW50ZXIudG9wKVxyXG4gICAgICAgICAgICApID49IHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFBvaW50ZXI6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IGUucGFnZVggfHwgZS5vcmlnaW5hbEV2ZW50LnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgdG9wOiBlLnBhZ2VZIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXR1cERlbGF5VGltZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXNcclxuICAgICAgICAgICAgdGhpcy5kZWxheU1ldCA9ICF0aGlzLm9wdGlvbnMuZGVsYXlcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgZGVsYXkgdGltZXIgaWYgbmVlZGVkXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kZWxheU1ldCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX21vdXNlRGVsYXlUaW1lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3VzZURlbGF5VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuZGVsYXlNZXQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZGVsYXkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNjcm9sbDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyRGltZW5zaW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyT2Zmc2V0UGFyZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2dnbGVMaXN0ZW5lcnM6IGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBldmVudHMgPSBbJ2RyYWcnLCAnZHJvcCcsICdzY3JvbGwnXVxyXG5cclxuICAgICAgICAgICAgJC5lYWNoKGV2ZW50cywgZnVuY3Rpb24oaSwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoYXQuJGRvY3VtZW50W21ldGhvZF0oZXZlbnROYW1lc1tldmVudF0sIHRoYXRbZXZlbnQgKyAnUHJveHknXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsZWFyT2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5vZmZzZXRQYXJlbnQgPSB1bmRlZmluZWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNsZWFyIGNvbnRhaW5lciBhbmQgaXRlbSBkaW1lbnNpb25zXHJcbiAgICAgICAgY2xlYXJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5fY2xlYXJEaW1lbnNpb25zKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyYXZlcnNlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzKVxyXG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGhcclxuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJzW2ldLnRyYXZlcnNlKGNhbGxiYWNrKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfY2xlYXJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJEaW1lbnNpb25zID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckdyb3Vwc1t0aGlzLm9wdGlvbnMuZ3JvdXBdID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRhaW5lcihlbGVtZW50LCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5lbCA9IGVsZW1lbnRcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgY29udGFpbmVyRGVmYXVsdHMsIG9wdGlvbnMpXHJcblxyXG4gICAgICAgIHRoaXMuZ3JvdXAgPSBDb250YWluZXJHcm91cC5nZXQodGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMucm9vdEdyb3VwID0gdGhpcy5vcHRpb25zLnJvb3RHcm91cCB8fCB0aGlzLmdyb3VwXHJcbiAgICAgICAgdGhpcy5oYW5kbGUgPSB0aGlzLnJvb3RHcm91cC5vcHRpb25zLmhhbmRsZSB8fCB0aGlzLnJvb3RHcm91cC5vcHRpb25zLml0ZW1TZWxlY3RvclxyXG5cclxuICAgICAgICB2YXIgaXRlbVBhdGggPSB0aGlzLnJvb3RHcm91cC5vcHRpb25zLml0ZW1QYXRoXHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSBpdGVtUGF0aCA/IHRoaXMuZWwuZmluZChpdGVtUGF0aCkgOiB0aGlzLmVsXHJcblxyXG4gICAgICAgIHRoaXMudGFyZ2V0Lm9uKGV2ZW50TmFtZXMuc3RhcnQsIHRoaXMuaGFuZGxlLCAkLnByb3h5KHRoaXMuZHJhZ0luaXQsIHRoaXMpKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRyb3ApXHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXAuY29udGFpbmVycy5wdXNoKHRoaXMpXHJcbiAgICB9XHJcblxyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBkcmFnSW5pdDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgcm9vdEdyb3VwID0gdGhpcy5yb290R3JvdXBcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJlxyXG4gICAgICAgICAgICAgICAgIXJvb3RHcm91cC5kcmFnSW5pdERvbmUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kcmFnICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzVmFsaWREcmFnKGUpKSB7XHJcbiAgICAgICAgICAgICAgICByb290R3JvdXAuZHJhZ0luaXQoZSwgdGhpcylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNWYWxpZERyYWc6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUud2hpY2ggPT0gMSB8fFxyXG4gICAgICAgICAgICAgICAgZS50eXBlID09IFwidG91Y2hzdGFydFwiICYmIGUub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCA9PSAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWFyY2hWYWxpZFRhcmdldDogZnVuY3Rpb24ocG9pbnRlciwgbGFzdFBvaW50ZXIpIHtcclxuICAgICAgICAgICAgdmFyIGRpc3RhbmNlcyA9IHNvcnRCeURpc3RhbmNlRGVzYyh0aGlzLmdldEl0ZW1EaW1lbnNpb25zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UG9pbnRlciksXHJcbiAgICAgICAgICAgICAgICBpID0gZGlzdGFuY2VzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJvb3RHcm91cCA9IHRoaXMucm9vdEdyb3VwLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRUYXJnZXQgPSAhcm9vdEdyb3VwLm9wdGlvbnMuaXNWYWxpZFRhcmdldCB8fFxyXG4gICAgICAgICAgICAgICAgcm9vdEdyb3VwLm9wdGlvbnMuaXNWYWxpZFRhcmdldChyb290R3JvdXAuaXRlbSwgdGhpcylcclxuXHJcbiAgICAgICAgICAgIGlmICghaSAmJiB2YWxpZFRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcm9vdEdyb3VwLm1vdmVQbGFjZWhvbGRlcih0aGlzLCB0aGlzLnRhcmdldCwgXCJhcHBlbmRcIilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGRpc3RhbmNlc1tpXVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBkaXN0YW5jZXNbaV1bMV1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRpc3RhbmNlICYmIHRoaXMuaGFzQ2hpbGRHcm91cChpbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gdGhpcy5nZXRDb250YWluZXJHcm91cChpbmRleCkuc2VhcmNoVmFsaWRUYXJnZXQocG9pbnRlciwgbGFzdFBvaW50ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWxpZFRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVQbGFjZWhvbGRlcihpbmRleCwgcG9pbnRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3ZlUGxhY2Vob2xkZXI6IGZ1bmN0aW9uKGluZGV4LCBwb2ludGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gJCh0aGlzLml0ZW1zW2luZGV4XSksXHJcbiAgICAgICAgICAgICAgICBkaW0gPSB0aGlzLml0ZW1EaW1lbnNpb25zW2luZGV4XSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiYWZ0ZXJcIixcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gaXRlbS5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBpdGVtLm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBpdGVtLm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogb2Zmc2V0LmxlZnQgKyB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IG9mZnNldC50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBvZmZzZXQudG9wICsgaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudmVydGljYWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB5Q2VudGVyID0gKGRpbVsyXSArIGRpbVszXSkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIGluVXBwZXJIYWxmID0gcG9pbnRlci50b3AgPD0geUNlbnRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGluVXBwZXJIYWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gXCJiZWZvcmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3guYm90dG9tIC09IGhlaWdodCAvIDJcclxuICAgICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3gudG9wICs9IGhlaWdodCAvIDJcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB4Q2VudGVyID0gKGRpbVswXSArIGRpbVsxXSkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIGluTGVmdEhhbGYgPSBwb2ludGVyLmxlZnQgPD0geENlbnRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGluTGVmdEhhbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBcImJlZm9yZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveC5yaWdodCAtPSB3aWR0aCAvIDJcclxuICAgICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3gubGVmdCArPSB3aWR0aCAvIDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNDaGlsZEdyb3VwKGluZGV4KSlcclxuICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3ggPSBlbXB0eUJveFxyXG4gICAgICAgICAgICB0aGlzLnJvb3RHcm91cC5tb3ZlUGxhY2Vob2xkZXIodGhpcywgaXRlbSwgbWV0aG9kLCBzYW1lUmVzdWx0Qm94KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0SXRlbURpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXRlbURpbWVuc2lvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLiRnZXRDaGlsZHJlbih0aGlzLmVsLCBcIml0ZW1cIikuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiOm5vdCguXCIgKyB0aGlzLmdyb3VwLm9wdGlvbnMucGxhY2Vob2xkZXJDbGFzcyArIFwiLCAuXCIgKyB0aGlzLmdyb3VwLm9wdGlvbnMuZHJhZ2dlZENsYXNzICsgXCIpXCJcclxuICAgICAgICAgICAgICAgICkuZ2V0KClcclxuICAgICAgICAgICAgICAgIHNldERpbWVuc2lvbnModGhpcy5pdGVtcywgdGhpcy5pdGVtRGltZW5zaW9ucyA9IFtdLCB0aGlzLm9wdGlvbnMudG9sZXJhbmNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1EaW1lbnNpb25zXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRJdGVtT2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCxcclxuICAgICAgICAgICAgICAgIGVsID0gdGhpcy5lbFxyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgZWwgbWlnaHQgYmUgZW1wdHkgd2UgaGF2ZSB0byBjaGVjayBlbCBpdHNlbGYgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBjYW4gbm90IGRvIHNvbWV0aGluZyBsaWtlIGVsLmNoaWxkcmVuKCkuZmlyc3QoKS5vZmZzZXRQYXJlbnQoKVxyXG4gICAgICAgICAgICBpZiAoZWwuY3NzKFwicG9zaXRpb25cIikgPT09IFwicmVsYXRpdmVcIiB8fCBlbC5jc3MoXCJwb3NpdGlvblwiKSA9PT0gXCJhYnNvbHV0ZVwiIHx8IGVsLmNzcyhcInBvc2l0aW9uXCIpID09PSBcImZpeGVkXCIpXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBlbFxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBlbC5vZmZzZXRQYXJlbnQoKVxyXG4gICAgICAgICAgICByZXR1cm4gb2Zmc2V0UGFyZW50XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYXNDaGlsZEdyb3VwOiBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm5lc3RlZCAmJiB0aGlzLmdldENvbnRhaW5lckdyb3VwKGluZGV4KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0Q29udGFpbmVyR3JvdXA6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEdyb3VwID0gJC5kYXRhKHRoaXMuaXRlbXNbaW5kZXhdLCBzdWJDb250YWluZXJLZXkpXHJcbiAgICAgICAgICAgIGlmIChjaGlsZEdyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZENvbnRhaW5lcnMgPSB0aGlzLiRnZXRDaGlsZHJlbih0aGlzLml0ZW1zW2luZGV4XSwgXCJjb250YWluZXJcIilcclxuICAgICAgICAgICAgICAgIGNoaWxkR3JvdXAgPSBmYWxzZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZENvbnRhaW5lcnNbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdEdyb3VwOiB0aGlzLnJvb3RHcm91cCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwQ291bnRlcisrXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZEdyb3VwID0gY2hpbGRDb250YWluZXJzW3BsdWdpbk5hbWVdKG9wdGlvbnMpLmRhdGEocGx1Z2luTmFtZSkuZ3JvdXBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQuZGF0YSh0aGlzLml0ZW1zW2luZGV4XSwgc3ViQ29udGFpbmVyS2V5LCBjaGlsZEdyb3VwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZEdyb3VwXHJcbiAgICAgICAgfSxcclxuICAgICAgICAkZ2V0Q2hpbGRyZW46IGZ1bmN0aW9uKHBhcmVudCwgdHlwZSkge1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMucm9vdEdyb3VwLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBwYXRoID0gb3B0aW9uc1t0eXBlICsgXCJQYXRoXCJdLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBvcHRpb25zW3R5cGUgKyBcIlNlbGVjdG9yXCJdXHJcblxyXG4gICAgICAgICAgICBwYXJlbnQgPSAkKHBhcmVudClcclxuICAgICAgICAgICAgaWYgKHBhdGgpXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuZmluZChwYXRoKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5jaGlsZHJlbihzZWxlY3RvcilcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9zZXJpYWxpemU6IGZ1bmN0aW9uKHBhcmVudCwgaXNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgY2hpbGRUeXBlID0gaXNDb250YWluZXIgPyBcIml0ZW1cIiA6IFwiY29udGFpbmVyXCIsXHJcblxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSB0aGlzLiRnZXRDaGlsZHJlbihwYXJlbnQsIGNoaWxkVHlwZSkubm90KHRoaXMub3B0aW9ucy5leGNsdWRlKS5tYXAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuX3NlcmlhbGl6ZSgkKHRoaXMpLCAhaXNDb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICB9KS5nZXQoKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm9vdEdyb3VwLm9wdGlvbnMuc2VyaWFsaXplKHBhcmVudCwgY2hpbGRyZW4sIGlzQ29udGFpbmVyKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJhdmVyc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICQuZWFjaCh0aGlzLml0ZW1zIHx8IFtdLCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSAkLmRhdGEodGhpcywgc3ViQ29udGFpbmVyS2V5KVxyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLnRyYXZlcnNlKGNhbGxiYWNrKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfY2xlYXJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtRGltZW5zaW9ucyA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5vZmYoZXZlbnROYW1lcy5zdGFydCwgdGhpcy5oYW5kbGUpO1xyXG4gICAgICAgICAgICB0aGlzLmVsLnJlbW92ZURhdGEocGx1Z2luTmFtZSlcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZHJvcClcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXAuY29udGFpbmVycyA9ICQuZ3JlcCh0aGlzLmdyb3VwLmNvbnRhaW5lcnMsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwgIT0gdGhhdFxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICQuZWFjaCh0aGlzLml0ZW1zIHx8IFtdLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLCBzdWJDb250YWluZXJLZXkpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBBUEkgPSB7XHJcbiAgICAgICAgZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5kaXNhYmxlZCA9IGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5kaXNhYmxlZCA9IHRydWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXJpYWxpemUodGhpcy5lbCwgdHJ1ZSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Ll9jbGVhckRpbWVuc2lvbnMoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuX2Rlc3Ryb3koKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJC5leHRlbmQoQ29udGFpbmVyLnByb3RvdHlwZSwgQVBJKVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogalF1ZXJ5IEFQSVxyXG4gICAgICpcclxuICAgICAqIFBhcmFtZXRlcnMgYXJlXHJcbiAgICAgKiAgIGVpdGhlciBvcHRpb25zIG9uIGluaXRcclxuICAgICAqICAgb3IgYSBtZXRob2QgbmFtZSBmb2xsb3dlZCBieSBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0aG9kXHJcbiAgICAgKi9cclxuICAgICQuZm5bcGx1Z2luTmFtZV0gPSBmdW5jdGlvbihtZXRob2RPck9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgJHQgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gJHQuZGF0YShwbHVnaW5OYW1lKVxyXG5cclxuICAgICAgICAgICAgaWYgKG9iamVjdCAmJiBBUElbbWV0aG9kT3JPcHRpb25zXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBBUElbbWV0aG9kT3JPcHRpb25zXS5hcHBseShvYmplY3QsIGFyZ3MpIHx8IHRoaXNcclxuICAgICAgICAgICAgZWxzZSBpZiAoIW9iamVjdCAmJiAobWV0aG9kT3JPcHRpb25zID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBtZXRob2RPck9wdGlvbnMgPT09IFwib2JqZWN0XCIpKVxyXG4gICAgICAgICAgICAgICAgJHQuZGF0YShwbHVnaW5OYW1lLCBuZXcgQ29udGFpbmVyKCR0LCBtZXRob2RPck9wdGlvbnMpKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG59KShqcTExMSwgd2luZG93LCAnc29ydGFibGUnKTsiLCIvKiEgbmFub1Njcm9sbGVySlMgLSB2MC44LjQgLSAyMDE0XG4gKiBodHRwOi8vamFtZXNmbG9yZW50aW5vLmdpdGh1Yi5jb20vbmFub1Njcm9sbGVySlMvXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgSmFtZXMgRmxvcmVudGlubzsgTGljZW5zZWQgTUlUICovXG4oZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBCUk9XU0VSX0lTX0lFNywgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEgsIERPTVNDUk9MTCwgRE9XTiwgRFJBRywgRU5URVIsIEtFWURPV04sIEtFWVVQLCBNT1VTRURPV04sIE1PVVNFRU5URVIsIE1PVVNFTU9WRSwgTU9VU0VVUCwgTU9VU0VXSEVFTCwgTmFub1Njcm9sbCwgUEFORURPV04sIFJFU0laRSwgU0NST0xMLCBTQ1JPTExCQVIsIFRPVUNITU9WRSwgVVAsIFdIRUVMLCBjQUYsIGRlZmF1bHRzLCBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGgsIGhhc1RyYW5zZm9ybSwgaXNGRldpdGhCdWdneVNjcm9sbGJhciwgckFGLCB0cmFuc2Zvcm0sIF9lbGVtZW50U3R5bGUsIF9wcmVmaXhTdHlsZSwgX3ZlbmRvcjtcbiAgICBkZWZhdWx0cyA9IHtcblxuICAgICAgICAvKipcbiAgICAgIGEgY2xhc3NuYW1lIGZvciB0aGUgcGFuZSBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHBhbmVDbGFzc1xuICAgICAgQHR5cGUgU3RyaW5nXG4gICAgICBAZGVmYXVsdCAnbmFuby1wYW5lJ1xuICAgICAqL1xuICAgICAgICBwYW5lQ2xhc3M6ICduYW5vLXBhbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBjbGFzc25hbWUgZm9yIHRoZSBzbGlkZXIgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBzbGlkZXJDbGFzc1xuICAgICAgQHR5cGUgU3RyaW5nXG4gICAgICBAZGVmYXVsdCAnbmFuby1zbGlkZXInXG4gICAgICovXG4gICAgICAgIHNsaWRlckNsYXNzOiAnbmFuby1zbGlkZXInLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBjbGFzc25hbWUgZm9yIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgY29udGVudENsYXNzXG4gICAgICBAdHlwZSBTdHJpbmdcbiAgICAgIEBkZWZhdWx0ICduYW5vLWNvbnRlbnQnXG4gICAgICovXG4gICAgICAgIGNvbnRlbnRDbGFzczogJ25hbm8tY29udGVudCcsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIHNldHRpbmcgdG8gZW5hYmxlIG5hdGl2ZSBzY3JvbGxpbmcgaW4gaU9TIGRldmljZXMuXG4gICAgICBAcHJvcGVydHkgaU9TTmF0aXZlU2Nyb2xsaW5nXG4gICAgICBAdHlwZSBCb29sZWFuXG4gICAgICBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgICAgICBpT1NOYXRpdmVTY3JvbGxpbmc6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBzZXR0aW5nIHRvIHByZXZlbnQgdGhlIHJlc3Qgb2YgdGhlIHBhZ2UgYmVpbmdcbiAgICAgIHNjcm9sbGVkIHdoZW4gdXNlciBzY3JvbGxzIHRoZSBgLmNvbnRlbnRgIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgcHJldmVudFBhZ2VTY3JvbGxpbmdcbiAgICAgIEB0eXBlIEJvb2xlYW5cbiAgICAgIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgIGEgc2V0dGluZyB0byBkaXNhYmxlIGJpbmRpbmcgdG8gdGhlIHJlc2l6ZSBldmVudC5cbiAgICAgIEBwcm9wZXJ0eSBkaXNhYmxlUmVzaXplXG4gICAgICBAdHlwZSBCb29sZWFuXG4gICAgICBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgICAgICBkaXNhYmxlUmVzaXplOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgIGEgc2V0dGluZyB0byBtYWtlIHRoZSBzY3JvbGxiYXIgYWx3YXlzIHZpc2libGUuXG4gICAgICBAcHJvcGVydHkgYWx3YXlzVmlzaWJsZVxuICAgICAgQHR5cGUgQm9vbGVhblxuICAgICAgQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICAgICAgYWx3YXlzVmlzaWJsZTogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIGRlZmF1bHQgdGltZW91dCBmb3IgdGhlIGBmbGFzaCgpYCBtZXRob2QuXG4gICAgICBAcHJvcGVydHkgZmxhc2hEZWxheVxuICAgICAgQHR5cGUgTnVtYmVyXG4gICAgICBAZGVmYXVsdCAxNTAwXG4gICAgICovXG4gICAgICAgIGZsYXNoRGVsYXk6IDE1MDAsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIG1pbmltdW0gaGVpZ2h0IGZvciB0aGUgYC5zbGlkZXJgIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgc2xpZGVyTWluSGVpZ2h0XG4gICAgICBAdHlwZSBOdW1iZXJcbiAgICAgIEBkZWZhdWx0IDIwXG4gICAgICovXG4gICAgICAgIHNsaWRlck1pbkhlaWdodDogMjAsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIG1heGltdW0gaGVpZ2h0IGZvciB0aGUgYC5zbGlkZXJgIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgc2xpZGVyTWF4SGVpZ2h0XG4gICAgICBAdHlwZSBOdW1iZXJcbiAgICAgIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICAgICAgc2xpZGVyTWF4SGVpZ2h0OiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgYW4gYWx0ZXJuYXRlIGRvY3VtZW50IGNvbnRleHQuXG4gICAgICBAcHJvcGVydHkgZG9jdW1lbnRDb250ZXh0XG4gICAgICBAdHlwZSBEb2N1bWVudFxuICAgICAgQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgICAgICBkb2N1bWVudENvbnRleHQ6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICBhbiBhbHRlcm5hdGUgd2luZG93IGNvbnRleHQuXG4gICAgICBAcHJvcGVydHkgd2luZG93Q29udGV4dFxuICAgICAgQHR5cGUgV2luZG93XG4gICAgICBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgICAgIHdpbmRvd0NvbnRleHQ6IG51bGxcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFNDUk9MTEJBUlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBTQ1JPTExCQVIgPSAnc2Nyb2xsYmFyJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBTQ1JPTExcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgU0NST0xMID0gJ3Njcm9sbCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VET1dOXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VET1dOID0gJ21vdXNlZG93bic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VFTlRFUlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFRU5URVIgPSAnbW91c2VlbnRlcic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VNT1ZFXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFTU9WRSA9ICdtb3VzZW1vdmUnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFV0hFRUxcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRVdIRUVMID0gJ21vdXNld2hlZWwnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFVVBcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VVUCA9ICdtb3VzZXVwJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBSRVNJWkVcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBSRVNJWkUgPSAncmVzaXplJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBEUkFHXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIERSQUcgPSAnZHJhZyc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgRU5URVJcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgRU5URVIgPSAnZW50ZXInO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFVQXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFVQID0gJ3VwJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBQQU5FRE9XTlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBQQU5FRE9XTiA9ICdwYW5lZG93bic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgRE9NU0NST0xMXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIERPTVNDUk9MTCA9ICdET01Nb3VzZVNjcm9sbCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgRE9XTlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBET1dOID0gJ2Rvd24nO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFdIRUVMXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFdIRUVMID0gJ3doZWVsJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBLRVlET1dOXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEtFWURPV04gPSAna2V5ZG93bic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgS0VZVVBcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgS0VZVVAgPSAna2V5dXAnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFRPVUNITU9WRVxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBUT1VDSE1PVkUgPSAndG91Y2htb3ZlJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBCUk9XU0VSX0lTX0lFN1xuICAgIEB0eXBlIEJvb2xlYW5cbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgQlJPV1NFUl9JU19JRTcgPSB3aW5kb3cubmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInICYmIC9tc2llIDcuL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24pICYmIHdpbmRvdy5BY3RpdmVYT2JqZWN0O1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEJST1dTRVJfU0NST0xMQkFSX1dJRFRIXG4gICAgQHR5cGUgTnVtYmVyXG4gICAgQHN0YXRpY1xuICAgIEBkZWZhdWx0IG51bGxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCA9IG51bGw7XG4gICAgckFGID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICBjQUYgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU7XG4gICAgX2VsZW1lbnRTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlO1xuICAgIF92ZW5kb3IgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpLCB0cmFuc2Zvcm0sIHZlbmRvciwgdmVuZG9ycywgX2ksIF9sZW47XG4gICAgICAgIHZlbmRvcnMgPSBbJ3QnLCAnd2Via2l0VCcsICdNb3pUJywgJ21zVCcsICdPVCddO1xuICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSB2ZW5kb3JzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICAgICAgdmVuZG9yID0gdmVuZG9yc1tpXTtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IHZlbmRvcnNbaV0gKyAncmFuc2Zvcm0nO1xuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSBpbiBfZWxlbWVudFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZlbmRvcnNbaV0uc3Vic3RyKDAsIHZlbmRvcnNbaV0ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pKCk7XG4gICAgX3ByZWZpeFN0eWxlID0gZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgaWYgKF92ZW5kb3IgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF92ZW5kb3IgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF92ZW5kb3IgKyBzdHlsZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0eWxlLnN1YnN0cigxKTtcbiAgICB9O1xuICAgIHRyYW5zZm9ybSA9IF9wcmVmaXhTdHlsZSgndHJhbnNmb3JtJyk7XG4gICAgaGFzVHJhbnNmb3JtID0gdHJhbnNmb3JtICE9PSBmYWxzZTtcblxuICAgIC8qKlxuICAgIFJldHVybnMgYnJvd3NlcidzIG5hdGl2ZSBzY3JvbGxiYXIgd2lkdGhcbiAgICBAbWV0aG9kIGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aFxuICAgIEByZXR1cm4ge051bWJlcn0gdGhlIHNjcm9sbGJhciB3aWR0aCBpbiBwaXhlbHNcbiAgICBAc3RhdGljXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvdXRlciwgb3V0ZXJTdHlsZSwgc2Nyb2xsYmFyV2lkdGg7XG4gICAgICAgIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG91dGVyU3R5bGUgPSBvdXRlci5zdHlsZTtcbiAgICAgICAgb3V0ZXJTdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIG91dGVyU3R5bGUud2lkdGggPSAnMTAwcHgnO1xuICAgICAgICBvdXRlclN0eWxlLmhlaWdodCA9ICcxMDBweCc7XG4gICAgICAgIG91dGVyU3R5bGUub3ZlcmZsb3cgPSBTQ1JPTEw7XG4gICAgICAgIG91dGVyU3R5bGUudG9wID0gJy05OTk5cHgnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyKTtcbiAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBvdXRlci5vZmZzZXRXaWR0aCAtIG91dGVyLmNsaWVudFdpZHRoO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcbiAgICAgICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoO1xuICAgIH07XG4gICAgaXNGRldpdGhCdWdneVNjcm9sbGJhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaXNPU1hGRiwgdWEsIHZlcnNpb247XG4gICAgICAgIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgICAgIGlzT1NYRkYgPSAvKD89LitNYWMgT1MgWCkoPz0uK0ZpcmVmb3gpLy50ZXN0KHVhKTtcbiAgICAgICAgaWYgKCFpc09TWEZGKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmVyc2lvbiA9IC9GaXJlZm94XFwvXFxkezJ9XFwuLy5leGVjKHVhKTtcbiAgICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uWzBdLnJlcGxhY2UoL1xcRCsvZywgJycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc09TWEZGICYmICt2ZXJzaW9uID4gMjM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgIEBjbGFzcyBOYW5vU2Nyb2xsXG4gICAgQHBhcmFtIGVsZW1lbnQge0hUTUxFbGVtZW50fE5vZGV9IHRoZSBtYWluIGVsZW1lbnRcbiAgICBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBuYW5vU2Nyb2xsZXIncyBvcHRpb25zXG4gICAgQGNvbnN0cnVjdG9yXG4gICAqL1xuICAgIE5hbm9TY3JvbGwgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGZ1bmN0aW9uIE5hbm9TY3JvbGwoZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZWwgPSBlbDtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCB8fCAoQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggPSBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGgoKSk7XG4gICAgICAgICAgICB0aGlzLiRlbCA9ICQodGhpcy5lbCk7XG4gICAgICAgICAgICB0aGlzLmRvYyA9ICQodGhpcy5vcHRpb25zLmRvY3VtZW50Q29udGV4dCB8fCBkb2N1bWVudCk7XG4gICAgICAgICAgICB0aGlzLndpbiA9ICQodGhpcy5vcHRpb25zLndpbmRvd0NvbnRleHQgfHwgd2luZG93KTtcbiAgICAgICAgICAgIHRoaXMuYm9keSA9IHRoaXMuZG9jLmZpbmQoJ2JvZHknKTtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQgPSB0aGlzLiRlbC5jaGlsZHJlbihcIi5cIiArIG9wdGlvbnMuY29udGVudENsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuYXR0cigndGFiaW5kZXgnLCB0aGlzLm9wdGlvbnMudGFiSW5kZXggfHwgMCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLiRjb250ZW50WzBdO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaU9TTmF0aXZlU2Nyb2xsaW5nICYmICh0aGlzLmVsLnN0eWxlLldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nICE9IG51bGwpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVTY3JvbGxpbmcoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgUHJldmVudHMgdGhlIHJlc3Qgb2YgdGhlIHBhZ2UgYmVpbmcgc2Nyb2xsZWRcbiAgICAgIHdoZW4gdXNlciBzY3JvbGxzIHRoZSBgLm5hbm8tY29udGVudGAgZWxlbWVudC5cbiAgICAgIEBtZXRob2QgcHJldmVudFNjcm9sbGluZ1xuICAgICAgQHBhcmFtIGV2ZW50IHtFdmVudH1cbiAgICAgIEBwYXJhbSBkaXJlY3Rpb24ge1N0cmluZ30gU2Nyb2xsIGRpcmVjdGlvbiAodXAgb3IgZG93bilcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUucHJldmVudFNjcm9sbGluZyA9IGZ1bmN0aW9uKGUsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gRE9NU0NST0xMKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRE9XTiAmJiBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsID4gMCB8fCBkaXJlY3Rpb24gPT09IFVQICYmIGUub3JpZ2luYWxFdmVudC5kZXRhaWwgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gTU9VU0VXSEVFTCkge1xuICAgICAgICAgICAgICAgIGlmICghZS5vcmlnaW5hbEV2ZW50IHx8ICFlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IERPV04gJiYgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPCAwIHx8IGRpcmVjdGlvbiA9PT0gVVAgJiYgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEVuYWJsZSBpT1MgbmF0aXZlIHNjcm9sbGluZ1xuICAgICAgQG1ldGhvZCBuYXRpdmVTY3JvbGxpbmdcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUubmF0aXZlU2Nyb2xsaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFVwZGF0ZXMgdGhvc2UgbmFub1Njcm9sbGVyIHByb3BlcnRpZXMgdGhhdFxuICAgICAgYXJlIHJlbGF0ZWQgdG8gY3VycmVudCBzY3JvbGxiYXIgcG9zaXRpb24uXG4gICAgICBAbWV0aG9kIHVwZGF0ZVNjcm9sbFZhbHVlc1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS51cGRhdGVTY3JvbGxWYWx1ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50LCBkaXJlY3Rpb247XG4gICAgICAgICAgICBjb250ZW50ID0gdGhpcy5jb250ZW50O1xuICAgICAgICAgICAgdGhpcy5tYXhTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbEhlaWdodCAtIGNvbnRlbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wcmV2U2Nyb2xsVG9wID0gdGhpcy5jb250ZW50U2Nyb2xsVG9wIHx8IDA7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuY29udGVudFNjcm9sbFRvcCA+IHRoaXMucHJldmlvdXNQb3NpdGlvbiA/IFwiZG93blwiIDogdGhpcy5jb250ZW50U2Nyb2xsVG9wIDwgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID8gXCJ1cFwiIDogXCJzYW1lXCI7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSB0aGlzLmNvbnRlbnRTY3JvbGxUb3A7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uICE9PSBcInNhbWVcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJ3VwZGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHRoaXMuY29udGVudFNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5tYXhTY3JvbGxUb3AsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhTbGlkZXJUb3AgPSB0aGlzLnBhbmVIZWlnaHQgLSB0aGlzLnNsaWRlckhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlclRvcCA9IHRoaXMubWF4U2Nyb2xsVG9wID09PSAwID8gMCA6IHRoaXMuY29udGVudFNjcm9sbFRvcCAqIHRoaXMubWF4U2xpZGVyVG9wIC8gdGhpcy5tYXhTY3JvbGxUb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFVwZGF0ZXMgQ1NTIHN0eWxlcyBmb3IgY3VycmVudCBzY3JvbGwgcG9zaXRpb24uXG4gICAgICBVc2VzIENTUyAyZCB0cmFuc2Zyb21zIGFuZCBgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZWAgaWYgYXZhaWxhYmxlLlxuICAgICAgQG1ldGhvZCBzZXRPblNjcm9sbFN0eWxlc1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zZXRPblNjcm9sbFN0eWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNzc1ZhbHVlO1xuICAgICAgICAgICAgaWYgKGhhc1RyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIGNzc1ZhbHVlID0ge307XG4gICAgICAgICAgICAgICAgY3NzVmFsdWVbdHJhbnNmb3JtXSA9IFwidHJhbnNsYXRlKDAsIFwiICsgdGhpcy5zbGlkZXJUb3AgKyBcInB4KVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjc3NWYWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLnNsaWRlclRvcFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAockFGKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNBRiAmJiB0aGlzLnNjcm9sbFJBRikge1xuICAgICAgICAgICAgICAgICAgICBjQUYodGhpcy5zY3JvbGxSQUYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFJBRiA9IHJBRigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsUkFGID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zbGlkZXIuY3NzKGNzc1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLmNzcyhjc3NWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIENyZWF0ZXMgZXZlbnQgcmVsYXRlZCBtZXRob2RzXG4gICAgICBAbWV0aG9kIGNyZWF0ZUV2ZW50c1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5jcmVhdGVFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgICAgICAgICAgIGRvd246IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNCZWluZ0RyYWdnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub2Zmc2V0WSA9IGUucGFnZVkgLSBfdGhpcy5zbGlkZXIub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zbGlkZXIuaXMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub2Zmc2V0WSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYW5lLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRvYy5iaW5kKE1PVVNFTU9WRSwgX3RoaXMuZXZlbnRzW0RSQUddKS5iaW5kKE1PVVNFVVAsIF90aGlzLmV2ZW50c1tVUF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYm9keS5iaW5kKE1PVVNFRU5URVIsIF90aGlzLmV2ZW50c1tFTlRFUl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIGRyYWc6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSA9IGUucGFnZVkgLSBfdGhpcy4kZWwub2Zmc2V0KCkudG9wIC0gX3RoaXMucGFuZVRvcCAtIChfdGhpcy5vZmZzZXRZIHx8IF90aGlzLnNsaWRlckhlaWdodCAqIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID49IF90aGlzLm1heFNjcm9sbFRvcCAmJiBfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSBfdGhpcy5tYXhTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPT09IDAgJiYgX3RoaXMucHJldlNjcm9sbFRvcCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGx0b3AnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICB1cDogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0JlaW5nRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFuZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2MudW5iaW5kKE1PVVNFTU9WRSwgX3RoaXMuZXZlbnRzW0RSQUddKS51bmJpbmQoTU9VU0VVUCwgX3RoaXMuZXZlbnRzW1VQXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ib2R5LnVuYmluZChNT1VTRUVOVEVSLCBfdGhpcy5ldmVudHNbRU5URVJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICByZXNpemU6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICBwYW5lZG93bjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZID0gKGUub2Zmc2V0WSB8fCBlLm9yaWdpbmFsRXZlbnQubGF5ZXJZKSAtIChfdGhpcy5zbGlkZXJIZWlnaHQgKiAwLjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ldmVudHMuZG93bihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICBzY3JvbGw6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlU2Nyb2xsVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNCZWluZ0RyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlclkgPSBfdGhpcy5zbGlkZXJUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0T25TY3JvbGxTdHlsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA+PSBfdGhpcy5tYXhTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5wcmV2ZW50UGFnZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2ZW50U2Nyb2xsaW5nKGUsIERPV04pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldlNjcm9sbFRvcCAhPT0gX3RoaXMubWF4U2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGxlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5wcmV2ZW50UGFnZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2ZW50U2Nyb2xsaW5nKGUsIFVQKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZTY3JvbGxUb3AgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ3Njcm9sbHRvcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICB3aGVlbDogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSBlLmRlbHRhIHx8IGUud2hlZWxEZWx0YSB8fCAoZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhKSB8fCAtZS5kZXRhaWwgfHwgKGUub3JpZ2luYWxFdmVudCAmJiAtZS5vcmlnaW5hbEV2ZW50LmRldGFpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZICs9IC1kZWx0YSAvIDM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICBlbnRlcjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCZWluZ0RyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGUuYnV0dG9ucyB8fCBlLndoaWNoKSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX3JlZiA9IF90aGlzLmV2ZW50cylbVVBdLmFwcGx5KF9yZWYsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEFkZHMgZXZlbnQgbGlzdGVuZXJzIHdpdGggalF1ZXJ5LlxuICAgICAgQG1ldGhvZCBhZGRFdmVudHNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRzO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudHMoKTtcbiAgICAgICAgICAgIGV2ZW50cyA9IHRoaXMuZXZlbnRzO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZGlzYWJsZVJlc2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMud2luLmJpbmQoUkVTSVpFLCBldmVudHNbUkVTSVpFXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIuYmluZChNT1VTRURPV04sIGV2ZW50c1tET1dOXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLmJpbmQoTU9VU0VET1dOLCBldmVudHNbUEFORURPV05dKS5iaW5kKFwiXCIgKyBNT1VTRVdIRUVMICsgXCIgXCIgKyBET01TQ1JPTEwsIGV2ZW50c1tXSEVFTF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC5iaW5kKFwiXCIgKyBTQ1JPTEwgKyBcIiBcIiArIE1PVVNFV0hFRUwgKyBcIiBcIiArIERPTVNDUk9MTCArIFwiIFwiICsgVE9VQ0hNT1ZFLCBldmVudHNbU0NST0xMXSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzIHdpdGggalF1ZXJ5LlxuICAgICAgQG1ldGhvZCByZW1vdmVFdmVudHNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUucmVtb3ZlRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRzO1xuICAgICAgICAgICAgZXZlbnRzID0gdGhpcy5ldmVudHM7XG4gICAgICAgICAgICB0aGlzLndpbi51bmJpbmQoUkVTSVpFLCBldmVudHNbUkVTSVpFXSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIudW5iaW5kKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLnVuYmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC51bmJpbmQoXCJcIiArIFNDUk9MTCArIFwiIFwiICsgTU9VU0VXSEVFTCArIFwiIFwiICsgRE9NU0NST0xMICsgXCIgXCIgKyBUT1VDSE1PVkUsIGV2ZW50c1tTQ1JPTExdKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgR2VuZXJhdGVzIG5hbm9TY3JvbGxlcidzIHNjcm9sbGJhciBhbmQgZWxlbWVudHMgZm9yIGl0LlxuICAgICAgQG1ldGhvZCBnZW5lcmF0ZVxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRDbGFzcywgY3NzUnVsZSwgY3VycmVudFBhZGRpbmcsIG9wdGlvbnMsIHBhbmUsIHBhbmVDbGFzcywgc2xpZGVyQ2xhc3M7XG4gICAgICAgICAgICBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgICAgcGFuZUNsYXNzID0gb3B0aW9ucy5wYW5lQ2xhc3MsIHNsaWRlckNsYXNzID0gb3B0aW9ucy5zbGlkZXJDbGFzcywgY29udGVudENsYXNzID0gb3B0aW9ucy5jb250ZW50Q2xhc3M7XG4gICAgICAgICAgICBpZiAoIShwYW5lID0gdGhpcy4kZWwuY2hpbGRyZW4oXCIuXCIgKyBwYW5lQ2xhc3MpKS5sZW5ndGggJiYgIXBhbmUuY2hpbGRyZW4oXCIuXCIgKyBzbGlkZXJDbGFzcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuYXBwZW5kKFwiPGRpdiBjbGFzcz1cXFwiXCIgKyBwYW5lQ2xhc3MgKyBcIlxcXCI+PGRpdiBjbGFzcz1cXFwiXCIgKyBzbGlkZXJDbGFzcyArIFwiXFxcIiAvPjwvZGl2PlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFuZSA9IHRoaXMuJGVsLmNoaWxkcmVuKFwiLlwiICsgcGFuZUNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyID0gdGhpcy5wYW5lLmZpbmQoXCIuXCIgKyBzbGlkZXJDbGFzcyk7XG4gICAgICAgICAgICBpZiAoQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggPT09IDAgJiYgaXNGRldpdGhCdWdneVNjcm9sbGJhcigpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZGRpbmcgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRlbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctcmlnaHQnKS5yZXBsYWNlKC9bXjAtOS5dKy9nLCAnJyk7XG4gICAgICAgICAgICAgICAgY3NzUnVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0xNCxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiArY3VycmVudFBhZGRpbmcgKyAxNFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEJST1dTRVJfU0NST0xMQkFSX1dJRFRIKSB7XG4gICAgICAgICAgICAgICAgY3NzUnVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC1CUk9XU0VSX1NDUk9MTEJBUl9XSURUSFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ2hhcy1zY3JvbGxiYXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjc3NSdWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyhjc3NSdWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBAbWV0aG9kIHJlc3RvcmVcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRzKCk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFJlc2V0cyBuYW5vU2Nyb2xsZXIncyBzY3JvbGxiYXIuXG4gICAgICBAbWV0aG9kIHJlc2V0XG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoKTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQsIGNvbnRlbnRIZWlnaHQsIGNvbnRlbnRQb3NpdGlvbiwgY29udGVudFN0eWxlLCBjb250ZW50U3R5bGVPdmVyZmxvd1ksIHBhbmVCb3R0b20sIHBhbmVIZWlnaHQsIHBhbmVPdXRlckhlaWdodCwgcGFuZVRvcCwgcGFyZW50TWF4SGVpZ2h0LCByaWdodCwgc2xpZGVySGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50SGVpZ2h0ID0gdGhpcy5jb250ZW50LnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuJGVsLmZpbmQoXCIuXCIgKyB0aGlzLm9wdGlvbnMucGFuZUNsYXNzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlKCkuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGVudCA9IHRoaXMuY29udGVudDtcbiAgICAgICAgICAgIGNvbnRlbnRTdHlsZSA9IGNvbnRlbnQuc3R5bGU7XG4gICAgICAgICAgICBjb250ZW50U3R5bGVPdmVyZmxvd1kgPSBjb250ZW50U3R5bGUub3ZlcmZsb3dZO1xuICAgICAgICAgICAgaWYgKEJST1dTRVJfSVNfSUU3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuJGNvbnRlbnQuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnRIZWlnaHQgPSBjb250ZW50LnNjcm9sbEhlaWdodCArIEJST1dTRVJfU0NST0xMQkFSX1dJRFRIO1xuICAgICAgICAgICAgcGFyZW50TWF4SGVpZ2h0ID0gcGFyc2VJbnQodGhpcy4kZWwuY3NzKFwibWF4LWhlaWdodFwiKSwgMTApO1xuICAgICAgICAgICAgaWYgKHBhcmVudE1heEhlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5oZWlnaHQoXCJcIik7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuaGVpZ2h0KGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ID4gcGFyZW50TWF4SGVpZ2h0ID8gcGFyZW50TWF4SGVpZ2h0IDogY29udGVudC5zY3JvbGxIZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFuZUhlaWdodCA9IHRoaXMucGFuZS5vdXRlckhlaWdodChmYWxzZSk7XG4gICAgICAgICAgICBwYW5lVG9wID0gcGFyc2VJbnQodGhpcy5wYW5lLmNzcygndG9wJyksIDEwKTtcbiAgICAgICAgICAgIHBhbmVCb3R0b20gPSBwYXJzZUludCh0aGlzLnBhbmUuY3NzKCdib3R0b20nKSwgMTApO1xuICAgICAgICAgICAgcGFuZU91dGVySGVpZ2h0ID0gcGFuZUhlaWdodCArIHBhbmVUb3AgKyBwYW5lQm90dG9tO1xuICAgICAgICAgICAgc2xpZGVySGVpZ2h0ID0gTWF0aC5yb3VuZChwYW5lT3V0ZXJIZWlnaHQgLyBjb250ZW50SGVpZ2h0ICogcGFuZU91dGVySGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChzbGlkZXJIZWlnaHQgPCB0aGlzLm9wdGlvbnMuc2xpZGVyTWluSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc2xpZGVySGVpZ2h0ID0gdGhpcy5vcHRpb25zLnNsaWRlck1pbkhlaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHRoaXMub3B0aW9ucy5zbGlkZXJNYXhIZWlnaHQgIT0gbnVsbCkgJiYgc2xpZGVySGVpZ2h0ID4gdGhpcy5vcHRpb25zLnNsaWRlck1heEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNsaWRlckhlaWdodCA9IHRoaXMub3B0aW9ucy5zbGlkZXJNYXhIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGVudFN0eWxlT3ZlcmZsb3dZID09PSBTQ1JPTEwgJiYgY29udGVudFN0eWxlLm92ZXJmbG93WCAhPT0gU0NST0xMKSB7XG4gICAgICAgICAgICAgICAgc2xpZGVySGVpZ2h0ICs9IEJST1dTRVJfU0NST0xMQkFSX1dJRFRIO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXhTbGlkZXJUb3AgPSBwYW5lT3V0ZXJIZWlnaHQgLSBzbGlkZXJIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSBjb250ZW50SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wYW5lSGVpZ2h0ID0gcGFuZUhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucGFuZU91dGVySGVpZ2h0ID0gcGFuZU91dGVySGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5zbGlkZXJIZWlnaHQgPSBzbGlkZXJIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnBhbmVUb3AgPSBwYW5lVG9wO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXIuaGVpZ2h0KHNsaWRlckhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5zY3JvbGwoKTtcbiAgICAgICAgICAgIHRoaXMucGFuZS5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICgoY29udGVudC5zY3JvbGxIZWlnaHQgPT09IGNvbnRlbnQuY2xpZW50SGVpZ2h0KSB8fCAodGhpcy5wYW5lLm91dGVySGVpZ2h0KHRydWUpID49IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICYmIGNvbnRlbnRTdHlsZU92ZXJmbG93WSAhPT0gU0NST0xMKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsLmNsaWVudEhlaWdodCA9PT0gY29udGVudC5zY3JvbGxIZWlnaHQgJiYgY29udGVudFN0eWxlT3ZlcmZsb3dZID09PSBTQ1JPTEwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFuZS5jc3Moe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6ICh0aGlzLm9wdGlvbnMuYWx3YXlzVmlzaWJsZSA/IDEgOiAnJyksXG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogKHRoaXMub3B0aW9ucy5hbHdheXNWaXNpYmxlID8gJ3Zpc2libGUnIDogJycpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbnRQb3NpdGlvbiA9IHRoaXMuJGNvbnRlbnQuY3NzKCdwb3NpdGlvbicpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnRQb3NpdGlvbiA9PT0gJ3N0YXRpYycgfHwgY29udGVudFBvc2l0aW9uID09PSAncmVsYXRpdmUnKSB7XG4gICAgICAgICAgICAgICAgcmlnaHQgPSBwYXJzZUludCh0aGlzLiRjb250ZW50LmNzcygncmlnaHQnKSwgMTApO1xuICAgICAgICAgICAgICAgIGlmIChyaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogcmlnaHRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEBtZXRob2Qgc2Nyb2xsXG4gICAgICBAcHJpdmF0ZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsOiAndG9wJyB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyWSA9IE1hdGgubWF4KDAsIHRoaXMuc2xpZGVyWSk7XG4gICAgICAgICAgICB0aGlzLnNsaWRlclkgPSBNYXRoLm1pbih0aGlzLm1heFNsaWRlclRvcCwgdGhpcy5zbGlkZXJZKTtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuc2Nyb2xsVG9wKHRoaXMubWF4U2Nyb2xsVG9wICogdGhpcy5zbGlkZXJZIC8gdGhpcy5tYXhTbGlkZXJUb3ApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Nyb2xsVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRPblNjcm9sbFN0eWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFNjcm9sbCBhdCB0aGUgYm90dG9tIHdpdGggYW4gb2Zmc2V0IHZhbHVlXG4gICAgICBAbWV0aG9kIHNjcm9sbEJvdHRvbVxuICAgICAgQHBhcmFtIG9mZnNldFkge051bWJlcn1cbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbEJvdHRvbTogdmFsdWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsQm90dG9tID0gZnVuY3Rpb24ob2Zmc2V0WSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC5zY3JvbGxUb3AodGhpcy5jb250ZW50SGVpZ2h0IC0gdGhpcy4kY29udGVudC5oZWlnaHQoKSAtIG9mZnNldFkpLnRyaWdnZXIoTU9VU0VXSEVFTCk7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKS5yZXN0b3JlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgU2Nyb2xsIGF0IHRoZSB0b3Agd2l0aCBhbiBvZmZzZXQgdmFsdWVcbiAgICAgIEBtZXRob2Qgc2Nyb2xsVG9wXG4gICAgICBAcGFyYW0gb2Zmc2V0WSB7TnVtYmVyfVxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsVG9wOiB2YWx1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGxUb3AgPSBmdW5jdGlvbihvZmZzZXRZKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnNjcm9sbFRvcCgrb2Zmc2V0WSkudHJpZ2dlcihNT1VTRVdIRUVMKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpLnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBTY3JvbGwgdG8gYW4gZWxlbWVudFxuICAgICAgQG1ldGhvZCBzY3JvbGxUb1xuICAgICAgQHBhcmFtIG5vZGUge05vZGV9IEEgbm9kZSB0byBzY3JvbGwgdG8uXG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGxUbzogJCgnI2Ffbm9kZScpIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbFRvID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb3AodGhpcy4kZWwuZmluZChub2RlKS5nZXQoMCkub2Zmc2V0VG9wKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBUbyBzdG9wIHRoZSBvcGVyYXRpb24uXG4gICAgICBUaGlzIG9wdGlvbiB3aWxsIHRlbGwgdGhlIHBsdWdpbiB0byBkaXNhYmxlIGFsbCBldmVudCBiaW5kaW5ncyBhbmQgaGlkZSB0aGUgZ2FkZ2V0IHNjcm9sbGJhciBmcm9tIHRoZSBVSS5cbiAgICAgIEBtZXRob2Qgc3RvcFxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc3RvcDogdHJ1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoY0FGICYmIHRoaXMuc2Nyb2xsUkFGKSB7XG4gICAgICAgICAgICAgICAgY0FGKHRoaXMuc2Nyb2xsUkFGKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFJBRiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudHMoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIERlc3Ryb3lzIG5hbm9TY3JvbGxlciBhbmQgcmVzdG9yZXMgYnJvd3NlcidzIG5hdGl2ZSBzY3JvbGxiYXIuXG4gICAgICBAbWV0aG9kIGRlc3Ryb3lcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IGRlc3Ryb3k6IHRydWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcgJiYgdGhpcy5wYW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChCUk9XU0VSX0lTX0lFNykge1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuaGVpZ2h0KCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiRlbC5oYXNDbGFzcygnaGFzLXNjcm9sbGJhcicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ2hhcy1zY3JvbGxiYXInKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFRvIGZsYXNoIHRoZSBzY3JvbGxiYXIgZ2FkZ2V0IGZvciBhbiBhbW91bnQgb2YgdGltZSBkZWZpbmVkIGluIHBsdWdpbiBzZXR0aW5ncyAoZGVmYXVsdHMgdG8gMSw1cykuXG4gICAgICBVc2VmdWwgaWYgeW91IHdhbnQgdG8gc2hvdyB0aGUgdXNlciAoZS5nLiBvbiBwYWdlbG9hZCkgdGhhdCB0aGVyZSBpcyBtb3JlIGNvbnRlbnQgd2FpdGluZyBmb3IgaGltLlxuICAgICAgQG1ldGhvZCBmbGFzaFxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgZmxhc2g6IHRydWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuZmxhc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMucGFuZS5hZGRDbGFzcygnZmxhc2hlZCcpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhbmUucmVtb3ZlQ2xhc3MoJ2ZsYXNoZWQnKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkodGhpcyksIHRoaXMub3B0aW9ucy5mbGFzaERlbGF5KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBOYW5vU2Nyb2xsO1xuXG4gICAgfSkoKTtcbiAgICAkLmZuLm5hbm9TY3JvbGxlciA9IGZ1bmN0aW9uKHNldHRpbmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucywgc2Nyb2xsYmFyO1xuICAgICAgICAgICAgaWYgKCEoc2Nyb2xsYmFyID0gdGhpcy5uYW5vc2Nyb2xsZXIpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMubmFub3Njcm9sbGVyID0gc2Nyb2xsYmFyID0gbmV3IE5hbm9TY3JvbGwodGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MgJiYgdHlwZW9mIHNldHRpbmdzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgJC5leHRlbmQoc2Nyb2xsYmFyLm9wdGlvbnMsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsQm90dG9tICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxCb3R0b20oc2V0dGluZ3Muc2Nyb2xsQm90dG9tKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbFRvcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsVG9wKHNldHRpbmdzLnNjcm9sbFRvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGxUbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvKHNldHRpbmdzLnNjcm9sbFRvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxCb3R0b20oMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGwgPT09ICd0b3AnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsICYmIHNldHRpbmdzLnNjcm9sbCBpbnN0YW5jZW9mICQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUbyhzZXR0aW5ncy5zY3JvbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmRlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5mbGFzaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLmZsYXNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5yZXNldCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgICQuZm4ubmFub1Njcm9sbGVyLkNvbnN0cnVjdG9yID0gTmFub1Njcm9sbDtcbn0pKGpxMTExLCB3aW5kb3csIGRvY3VtZW50KTsiLCIvKlxuICBNYXJrdXAuanMgdjEuNS4yMDogaHR0cDovL2dpdGh1Yi5jb20vYWRhbW1hcmsvTWFya3VwLmpzXG4gIE1JVCBMaWNlbnNlXG4gIChjKSAyMDExIC0gMjAxNCBBZGFtIE1hcmtcbiovXG52YXIgTWFyayA9IHtcbiAgICAvLyBUZW1wbGF0ZXMgdG8gaW5jbHVkZSwgYnkgbmFtZS4gQSB0ZW1wbGF0ZSBpcyBhIHN0cmluZy5cbiAgICBpbmNsdWRlczoge30sXG5cbiAgICAvLyBHbG9iYWwgdmFyaWFibGVzLCBieSBuYW1lLiBHbG9iYWwgdmFyaWFibGVzIHRha2UgcHJlY2VkZW5jZSBvdmVyIGNvbnRleHQgdmFyaWFibGVzLlxuICAgIGdsb2JhbHM6IHt9LFxuXG4gICAgLy8gVGhlIGRlbGltaXRlciB0byB1c2UgaW4gcGlwZSBleHByZXNzaW9ucywgZS5nLiB7e2lmIGNvbG9yfGxpa2U+cmVkfX0uXG4gICAgZGVsaW1pdGVyOiBcIj5cIixcblxuICAgIC8vIENvbGxhcHNlIHdoaXRlIHNwYWNlIGJldHdlZW4gSFRNTCBlbGVtZW50cyBpbiB0aGUgcmVzdWx0aW5nIHN0cmluZy5cbiAgICBjb21wYWN0OiBmYWxzZSxcblxuICAgIC8vIFNoYWxsb3ctY29weSBhbiBvYmplY3QuXG4gICAgX2NvcHk6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIGIgPSBiIHx8IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgaW4gYSkge1xuICAgICAgICAgICAgYltpXSA9IGFbaV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYjtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiBhIG51bWJlciBvciBzaXplIG9mIGFuIGFycmF5LiBUaGlzIGlzIGEgaGVscGVyIGZ1bmN0aW9uIGZvciBzZXZlcmFsIHBpcGVzLlxuICAgIF9zaXplOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICByZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5ID8gYS5sZW5ndGggOiAoYSB8fCAwKTtcbiAgICB9LFxuXG4gICAgLy8gVGhpcyBvYmplY3QgcmVwcmVzZW50cyBhbiBpdGVyYXRpb24uIEl0IGhhcyBhbiBpbmRleCBhbmQgbGVuZ3RoLlxuICAgIF9pdGVyOiBmdW5jdGlvbiAoaWR4LCBzaXplKSB7XG4gICAgICAgIHRoaXMuaWR4ID0gaWR4O1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IHNpemU7XG4gICAgICAgIHRoaXMuc2lnbiA9IFwiI1wiO1xuXG4gICAgICAgIC8vIFByaW50IHRoZSBpbmRleCBpZiBcIiNcIiBvciB0aGUgY291bnQgaWYgXCIjI1wiLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaWR4ICsgdGhpcy5zaWduLmxlbmd0aCAtIDE7XG4gICAgICAgIH07XG4gICAgfSxcblxuICAgIC8vIFBhc3MgYSB2YWx1ZSB0aHJvdWdoIGEgc2VyaWVzIG9mIHBpcGUgZXhwcmVzc2lvbnMsIGUuZy4gX3BpcGUoMTIzLCBbXCJhZGQ+MTBcIixcInRpbWVzPjVcIl0pLlxuICAgIF9waXBlOiBmdW5jdGlvbiAodmFsLCBleHByZXNzaW9ucykge1xuICAgICAgICB2YXIgZXhwcmVzc2lvbiwgcGFydHMsIGZuLCByZXN1bHQ7XG5cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBleHByZXNzaW9ucywgcHVsbCBvdXQgdGhlIGZpcnN0IG9uZSwgZS5nLiBcImFkZD4xMFwiLlxuICAgICAgICBpZiAoKGV4cHJlc3Npb24gPSBleHByZXNzaW9ucy5zaGlmdCgpKSkge1xuXG4gICAgICAgICAgICAvLyBTcGxpdCB0aGUgZXhwcmVzc2lvbiBpbnRvIGl0cyBjb21wb25lbnQgcGFydHMsIGUuZy4gW1wiYWRkXCIsIFwiMTBcIl0uXG4gICAgICAgICAgICBwYXJ0cyA9IGV4cHJlc3Npb24uc3BsaXQodGhpcy5kZWxpbWl0ZXIpO1xuXG4gICAgICAgICAgICAvLyBQdWxsIG91dCB0aGUgZnVuY3Rpb24gbmFtZSwgZS5nLiBcImFkZFwiLlxuICAgICAgICAgICAgZm4gPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBSdW4gdGhlIGZ1bmN0aW9uLCBlLmcuIGFkZCgxMjMsIDEwKSAuLi5cbiAgICAgICAgICAgICAgICByZXN1bHQgPSBNYXJrLnBpcGVzW2ZuXS5hcHBseShudWxsLCBbdmFsXS5jb25jYXQocGFydHMpKTtcblxuICAgICAgICAgICAgICAgIC8vIC4uLiB0aGVuIHBpcGUgYWdhaW4gd2l0aCByZW1haW5pbmcgZXhwcmVzc2lvbnMuXG4gICAgICAgICAgICAgICAgdmFsID0gdGhpcy5fcGlwZShyZXN1bHQsIGV4cHJlc3Npb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXR1cm4gdGhlIHBpcGVkIHZhbHVlLlxuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICAvLyBUT0RPIGRvY1xuICAgIF9ldmFsOiBmdW5jdGlvbiAoY29udGV4dCwgZmlsdGVycywgY2hpbGQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX3BpcGUoY29udGV4dCwgZmlsdGVycyksXG4gICAgICAgICAgICBjdHggPSByZXN1bHQsXG4gICAgICAgICAgICBpID0gLTEsXG4gICAgICAgICAgICBqLFxuICAgICAgICAgICAgb3B0cztcblxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgICAgICBqID0gY3R4Lmxlbmd0aDtcblxuICAgICAgICAgICAgd2hpbGUgKCsraSA8IGopIHtcbiAgICAgICAgICAgICAgICBvcHRzID0ge1xuICAgICAgICAgICAgICAgICAgICBpdGVyOiBuZXcgdGhpcy5faXRlcihpLCBqKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGNoaWxkID8gTWFyay51cChjaGlsZCwgY3R4W2ldLCBvcHRzKSA6IGN0eFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IE1hcmsudXAoY2hpbGQsIGN0eCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICAvLyBQcm9jZXNzIHRoZSBjb250ZW50cyBvZiBhbiBJRiBvciBJRi9FTFNFIGJsb2NrLlxuICAgIF90ZXN0OiBmdW5jdGlvbiAoYm9vbCwgY2hpbGQsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gUHJvY2VzcyB0aGUgY2hpbGQgc3RyaW5nLCB0aGVuIHNwbGl0IGl0IGludG8gdGhlIElGIGFuZCBFTFNFIHBhcnRzLlxuICAgICAgICB2YXIgc3RyID0gTWFyay51cChjaGlsZCwgY29udGV4dCwgb3B0aW9ucykuc3BsaXQoL1xce1xce1xccyplbHNlXFxzKlxcfVxcfS8pO1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgSUYgb3IgRUxTRSBwYXJ0LiBJZiBubyBFTFNFLCByZXR1cm4gYW4gZW1wdHkgc3RyaW5nLlxuICAgICAgICByZXR1cm4gKGJvb2wgPT09IGZhbHNlID8gc3RyWzFdIDogc3RyWzBdKSB8fCBcIlwiO1xuICAgIH0sXG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGV4dGVudCBvZiBhIGJsb2NrIGV4cHJlc3Npb24sIGUuZy4gXCJ7e2Zvb319Li4ue3svZm9vfX1cIlxuICAgIF9icmlkZ2U6IGZ1bmN0aW9uICh0cGwsIHRrbikge1xuICAgICAgICBpZiAodGtuID09IFwiLlwiKVxuICAgICAgICAgICAgdGtuID0gXCJcXFxcLlwiOyAgICAvLyByZWdleC1zYWZlXG4gICAgICAgIHZhciBleHAgPSBcInt7XFxcXHMqXCIgKyB0a24gKyBcIihbXi99XStcXFxcdyopP319fHt7L1wiICsgdGtuICsgXCJcXFxccyp9fVwiLFxuICAgICAgICAgICAgcmUgPSBuZXcgUmVnRXhwKGV4cCwgXCJnXCIpLFxuICAgICAgICAgICAgdGFncyA9IHRwbC5tYXRjaChyZSkgfHwgW10sXG4gICAgICAgICAgICB0LFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIGEgPSAwLFxuICAgICAgICAgICAgYiA9IDAsXG4gICAgICAgICAgICBjID0gLTEsXG4gICAgICAgICAgICBkID0gMDtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdCA9IGk7XG4gICAgICAgICAgICBjID0gdHBsLmluZGV4T2YodGFnc1t0XSwgYyArIDEpO1xuXG4gICAgICAgICAgICBpZiAodGFnc1t0XS5pbmRleE9mKFwie3svXCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBiKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhID0gdHBsLmluZGV4T2YodGFnc1swXSk7XG4gICAgICAgIGIgPSBhICsgdGFnc1swXS5sZW5ndGg7XG4gICAgICAgIGQgPSBjICsgdGFnc1t0XS5sZW5ndGg7XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBibG9jaywgZS5nLiBcInt7Zm9vfX1iYXJ7ey9mb299fVwiIGFuZCBpdHMgY2hpbGQsIGUuZy4gXCJiYXJcIi5cbiAgICAgICAgcmV0dXJuIFt0cGwuc3Vic3RyaW5nKGEsIGQpLCB0cGwuc3Vic3RyaW5nKGIsIGMpXTtcbiAgICB9XG59O1xuXG4vLyBJbmplY3QgYSB0ZW1wbGF0ZSBzdHJpbmcgd2l0aCBjb250ZXh0dWFsIGRhdGEgYW5kIHJldHVybiBhIG5ldyBzdHJpbmcuXG5NYXJrLnVwID0gZnVuY3Rpb24gKHRlbXBsYXRlLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgY29udGV4dCA9IGNvbnRleHQgfHwge307XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAvLyBNYXRjaCBhbGwgdGFncyBsaWtlIFwie3suLi59fVwiLlxuICAgIHZhciByZSA9IC9cXHtcXHsoLis/KVxcfVxcfS9nLFxuICAgICAgICAvLyBBbGwgdGFncyBpbiB0aGUgdGVtcGxhdGUuXG4gICAgICAgIHRhZ3MgPSB0ZW1wbGF0ZS5tYXRjaChyZSkgfHwgW10sXG4gICAgICAgIC8vIFRoZSB0YWcgYmVpbmcgZXZhbHVhdGVkLCBlLmcuIFwie3toYW1zdGVyfGRhbmNlfX1cIi5cbiAgICAgICAgdGFnLFxuICAgICAgICAvLyBUaGUgZXhwcmVzc2lvbiB0byBldmFsdWF0ZSBpbnNpZGUgdGhlIHRhZywgZS5nLiBcImhhbXN0ZXJ8ZGFuY2VcIi5cbiAgICAgICAgcHJvcCxcbiAgICAgICAgLy8gVGhlIHRva2VuIGl0c2VsZiwgZS5nLiBcImhhbXN0ZXJcIi5cbiAgICAgICAgdG9rZW4sXG4gICAgICAgIC8vIEFuIGFycmF5IG9mIHBpcGUgZXhwcmVzc2lvbnMsIGUuZy4gW1wibW9yZT4xXCIsIFwibGVzcz4yXCJdLlxuICAgICAgICBmaWx0ZXJzID0gW10sXG4gICAgICAgIC8vIERvZXMgdGhlIHRhZyBjbG9zZSBpdHNlbGY/IGUuZy4gXCJ7e3N0dWZmL319XCIuXG4gICAgICAgIHNlbGZ5LFxuICAgICAgICAvLyBJcyB0aGUgdGFnIGFuIFwiaWZcIiBzdGF0ZW1lbnQ/XG4gICAgICAgIHRlc3R5LFxuICAgICAgICAvLyBUaGUgY29udGVudHMgb2YgYSBibG9jayB0YWcsIGUuZy4gXCJ7e2FhfX1iYnt7L2FhfX1cIiAtPiBcImJiXCIuXG4gICAgICAgIGNoaWxkLFxuICAgICAgICAvLyBUaGUgcmVzdWx0aW5nIHN0cmluZy5cbiAgICAgICAgcmVzdWx0LFxuICAgICAgICAvLyBUaGUgZ2xvYmFsIHZhcmlhYmxlIGJlaW5nIGV2YWx1YXRlZCwgb3IgdW5kZWZpbmVkLlxuICAgICAgICBnbG9iYWwsXG4gICAgICAgIC8vIFRoZSBpbmNsdWRlZCB0ZW1wbGF0ZSBiZWluZyBldmFsdWF0ZWQsIG9yIHVuZGVmaW5lZC5cbiAgICAgICAgaW5jbHVkZSxcbiAgICAgICAgLy8gQSBwbGFjZWhvbGRlciB2YXJpYWJsZS5cbiAgICAgICAgY3R4LFxuICAgICAgICAvLyBJdGVyYXRvcnMuXG4gICAgICAgIGkgPSAwLFxuICAgICAgICBqID0gMDtcblxuICAgIC8vIFNldCBjdXN0b20gcGlwZXMsIGlmIHByb3ZpZGVkLlxuICAgIGlmIChvcHRpb25zLnBpcGVzKSB7XG4gICAgICAgIHRoaXMuX2NvcHkob3B0aW9ucy5waXBlcywgdGhpcy5waXBlcyk7XG4gICAgfVxuXG4gICAgLy8gU2V0IHRlbXBsYXRlcyB0byBpbmNsdWRlLCBpZiBwcm92aWRlZC5cbiAgICBpZiAob3B0aW9ucy5pbmNsdWRlcykge1xuICAgICAgICB0aGlzLl9jb3B5KG9wdGlvbnMuaW5jbHVkZXMsIHRoaXMuaW5jbHVkZXMpO1xuICAgIH1cblxuICAgIC8vIFNldCBnbG9iYWwgdmFyaWFibGVzLCBpZiBwcm92aWRlZC5cbiAgICBpZiAob3B0aW9ucy5nbG9iYWxzKSB7XG4gICAgICAgIHRoaXMuX2NvcHkob3B0aW9ucy5nbG9iYWxzLCB0aGlzLmdsb2JhbHMpO1xuICAgIH1cblxuICAgIC8vIE9wdGlvbmFsbHkgb3ZlcnJpZGUgdGhlIGRlbGltaXRlci5cbiAgICBpZiAob3B0aW9ucy5kZWxpbWl0ZXIpIHtcbiAgICAgICAgdGhpcy5kZWxpbWl0ZXIgPSBvcHRpb25zLmRlbGltaXRlcjtcbiAgICB9XG5cbiAgICAvLyBPcHRpb25hbGx5IGNvbGxhcHNlIHdoaXRlIHNwYWNlLlxuICAgIGlmIChvcHRpb25zLmNvbXBhY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmNvbXBhY3QgPSBvcHRpb25zLmNvbXBhY3Q7XG4gICAgfVxuXG4gICAgLy8gTG9vcCB0aHJvdWdoIHRhZ3MsIGUuZy4ge3thfX0sIHt7Yn19LCB7e2N9fSwge3svY319LlxuICAgIHdoaWxlICgodGFnID0gdGFnc1tpKytdKSkge1xuICAgICAgICByZXN1bHQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGNoaWxkID0gXCJcIjtcbiAgICAgICAgc2VsZnkgPSB0YWcuaW5kZXhPZihcIi99fVwiKSA+IC0xO1xuICAgICAgICBwcm9wID0gdGFnLnN1YnN0cigyLCB0YWcubGVuZ3RoIC0gKHNlbGZ5ID8gNSA6IDQpKTtcbiAgICAgICAgcHJvcCA9IHByb3AucmVwbGFjZSgvYCguKz8pYC9nLCBmdW5jdGlvbiAocywgcDEpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXJrLnVwKFwie3tcIiArIHAxICsgXCJ9fVwiLCBjb250ZXh0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRlc3R5ID0gcHJvcC50cmltKCkuaW5kZXhPZihcImlmIFwiKSA9PT0gMDtcbiAgICAgICAgZmlsdGVycyA9IHByb3Auc3BsaXQoXCJ8XCIpO1xuICAgICAgICBmaWx0ZXJzLnNoaWZ0KCk7IC8vIGluc3RlYWQgb2Ygc3BsaWNlKDEpXG4gICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoL15cXHMqaWYvLCBcIlwiKS5zcGxpdChcInxcIikuc2hpZnQoKS50cmltKCk7XG4gICAgICAgIHRva2VuID0gdGVzdHkgPyBcImlmXCIgOiBwcm9wLnNwbGl0KFwifFwiKVswXTtcbiAgICAgICAgY3R4ID0gY29udGV4dFtwcm9wXTtcblxuICAgICAgICAvLyBJZiBhbiBcImlmXCIgc3RhdGVtZW50IHdpdGhvdXQgZmlsdGVycywgYXNzdW1lIFwie3tpZiBmb298bm90ZW1wdHl9fVwiXG4gICAgICAgIGlmICh0ZXN0eSAmJiAhZmlsdGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZpbHRlcnMgPSBbXCJub3RlbXB0eVwiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERvZXMgdGhlIHRhZyBoYXZlIGEgY29ycmVzcG9uZGluZyBjbG9zaW5nIHRhZz8gSWYgc28sIGZpbmQgaXQgYW5kIG1vdmUgdGhlIGN1cnNvci5cbiAgICAgICAgaWYgKCFzZWxmeSAmJiB0ZW1wbGF0ZS5pbmRleE9mKFwie3svXCIgKyB0b2tlbikgPiAtMSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fYnJpZGdlKHRlbXBsYXRlLCB0b2tlbik7XG4gICAgICAgICAgICB0YWcgPSByZXN1bHRbMF07XG4gICAgICAgICAgICBjaGlsZCA9IHJlc3VsdFsxXTtcbiAgICAgICAgICAgIGkgKz0gdGFnLm1hdGNoKHJlKS5sZW5ndGggLSAxOyAvLyBmYXN0IGZvcndhcmRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNraXAgXCJlbHNlXCIgdGFncy4gVGhlc2UgYXJlIHB1bGxlZCBvdXQgaW4gX3Rlc3QoKS5cbiAgICAgICAgaWYgKC9eXFx7XFx7XFxzKmVsc2VcXHMqXFx9XFx9JC8udGVzdCh0YWcpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYSBnbG9iYWwgdmFyaWFibGUuXG4gICAgICAgIGVsc2UgaWYgKChnbG9iYWwgPSB0aGlzLmdsb2JhbHNbcHJvcF0pICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2V2YWwoZ2xvYmFsLCBmaWx0ZXJzLCBjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFuIGluY2x1ZGVkIHRlbXBsYXRlLlxuICAgICAgICBlbHNlIGlmICgoaW5jbHVkZSA9IHRoaXMuaW5jbHVkZXNbcHJvcF0pKSB7XG4gICAgICAgICAgICBpZiAoaW5jbHVkZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUoTWFyay51cChpbmNsdWRlLCBjb250ZXh0LCBvcHRpb25zKSwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGEgbG9vcCBjb3VudGVyIChcIiNcIiBvciBcIiMjXCIpLlxuICAgICAgICBlbHNlIGlmIChwcm9wLmluZGV4T2YoXCIjXCIpID4gLTEpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaXRlci5zaWduID0gcHJvcDtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUob3B0aW9ucy5pdGVyLCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgdGhlIGN1cnJlbnQgY29udGV4dC5cbiAgICAgICAgZWxzZSBpZiAocHJvcCA9PT0gXCIuXCIpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUoY29udGV4dCwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGEgdmFyaWFibGUgd2l0aCBkb3Qgbm90YXRpb24sIGUuZy4gXCJhLmIuY1wiXG4gICAgICAgIGVsc2UgaWYgKHByb3AuaW5kZXhPZihcIi5cIikgPiAtMSkge1xuICAgICAgICAgICAgcHJvcCA9IHByb3Auc3BsaXQoXCIuXCIpO1xuICAgICAgICAgICAgY3R4ID0gTWFyay5nbG9iYWxzW3Byb3BbMF1dO1xuXG4gICAgICAgICAgICBpZiAoY3R4KSB7XG4gICAgICAgICAgICAgICAgaiA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICBjdHggPSBjb250ZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGFjdHVhbCBjb250ZXh0XG4gICAgICAgICAgICB3aGlsZSAoY3R4ICYmIGogPCBwcm9wLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGN0eCA9IGN0eFtwcm9wW2orK11dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsKGN0eCwgZmlsdGVycywgY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbiBcImlmXCIgc3RhdGVtZW50LlxuICAgICAgICBlbHNlIGlmICh0ZXN0eSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShjdHgsIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbiBhcnJheSwgd2hpY2ggbWlnaHQgYmUgYSBibG9jayBleHByZXNzaW9uLlxuICAgICAgICBlbHNlIGlmIChjdHggaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZXZhbChjdHgsIGZpbHRlcnMsIGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYSBibG9jayBleHByZXNzaW9uLlxuICAgICAgICBlbHNlIGlmIChjaGlsZCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gY3R4ID8gTWFyay51cChjaGlsZCwgY3R4KSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW55dGhpbmcgZWxzZS5cbiAgICAgICAgZWxzZSBpZiAoY29udGV4dC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShjdHgsIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBzcGVjaWFsIGNhc2U6IGlmIHRoZSByZXN1bHRpbmcgY29udGV4dCBpcyBhY3R1YWxseSBhbiBBcnJheVxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2V2YWwocmVzdWx0LCBmaWx0ZXJzLCBjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFuIFwiaWZcIiBzdGF0ZW1lbnQuXG4gICAgICAgIGlmICh0ZXN0eSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fdGVzdChyZXN1bHQsIGNoaWxkLCBjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIHRhZywgZS5nLiBcInt7bmFtZX19XCIsIHdpdGggdGhlIHJlc3VsdCwgZS5nLiBcIkFkYW1cIi5cbiAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKHRhZywgcmVzdWx0ID09PSB1bmRlZmluZWQgPyBcIj8/P1wiIDogcmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb21wYWN0ID8gdGVtcGxhdGUucmVwbGFjZSgvPlxccys8L2csIFwiPjxcIikgOiB0ZW1wbGF0ZTtcbn07XG5cbi8vIEZyZWViaWUgcGlwZXMuIFNlZSB1c2FnZSBpbiBSRUFETUUubWRcbk1hcmsucGlwZXMgPSB7XG4gICAgZW1wdHk6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICFvYmogfHwgKG9iaiArIFwiXCIpLnRyaW0oKS5sZW5ndGggPT09IDAgPyBvYmogOiBmYWxzZTtcbiAgICB9LFxuICAgIG5vdGVtcHR5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgKG9iaiArIFwiXCIpLnRyaW0oKS5sZW5ndGggPyBvYmogOiBmYWxzZTtcbiAgICB9LFxuICAgIGJsYW5rOiBmdW5jdGlvbiAoc3RyLCB2YWwpIHtcbiAgICAgICAgcmV0dXJuICEhc3RyIHx8IHN0ciA9PT0gMCA/IHN0ciA6IHZhbDtcbiAgICB9LFxuICAgIG1vcmU6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBNYXJrLl9zaXplKGEpID4gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIGxlc3M6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBNYXJrLl9zaXplKGEpIDwgYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIG9ybW9yZTogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hcmsuX3NpemUoYSkgPj0gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIG9ybGVzczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hcmsuX3NpemUoYSkgPD0gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIGJldHdlZW46IGZ1bmN0aW9uIChhLCBiLCBjKSB7XG4gICAgICAgIGEgPSBNYXJrLl9zaXplKGEpO1xuICAgICAgICByZXR1cm4gYSA+PSBiICYmIGEgPD0gYyA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIGVxdWFsczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgPT0gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIG5vdGVxdWFsczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGEgIT0gYiA/IGEgOiBmYWxzZTtcbiAgICB9LFxuICAgIGxpa2U6IGZ1bmN0aW9uIChzdHIsIHBhdHRlcm4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocGF0dGVybiwgXCJpXCIpLnRlc3Qoc3RyKSA/IHN0ciA6IGZhbHNlO1xuICAgIH0sXG4gICAgbm90bGlrZTogZnVuY3Rpb24gKHN0ciwgcGF0dGVybikge1xuICAgICAgICByZXR1cm4gIU1hcmsucGlwZXMubGlrZShzdHIsIHBhdHRlcm4pID8gc3RyIDogZmFsc2U7XG4gICAgfSxcbiAgICB1cGNhc2U6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnRvVXBwZXJDYXNlKCk7XG4gICAgfSxcbiAgICBkb3duY2FzZTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHN0cikudG9Mb3dlckNhc2UoKTtcbiAgICB9LFxuICAgIGNhcGNhc2U6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oPzpefFxccylcXFMvZywgZnVuY3Rpb24gKGEpIHsgcmV0dXJuIGEudG9VcHBlckNhc2UoKTsgfSk7XG4gICAgfSxcbiAgICBjaG9wOiBmdW5jdGlvbiAoc3RyLCBuKSB7XG4gICAgICAgIHJldHVybiBzdHIubGVuZ3RoID4gbiA/IHN0ci5zdWJzdHIoMCwgbikgKyBcIi4uLlwiIDogc3RyO1xuICAgIH0sXG4gICAgdGVhc2U6IGZ1bmN0aW9uIChzdHIsIG4pIHtcbiAgICAgICAgdmFyIGEgPSBzdHIuc3BsaXQoL1xccysvKTtcbiAgICAgICAgcmV0dXJuIGEuc2xpY2UoMCwgbikuam9pbihcIiBcIikgKyAoYS5sZW5ndGggPiBuID8gXCIuLi5cIiA6IFwiXCIpO1xuICAgIH0sXG4gICAgdHJpbTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnRyaW0oKTtcbiAgICB9LFxuICAgIHBhY2s6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci50cmltKCkucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7XG4gICAgfSxcbiAgICByb3VuZDogZnVuY3Rpb24gKG51bSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgrbnVtKTtcbiAgICB9LFxuICAgIGNsZWFuOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC88XFwvP1tePl0rPi9naSwgXCJcIik7XG4gICAgfSxcbiAgICBzaXplOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmoubGVuZ3RoO1xuICAgIH0sXG4gICAgbGVuZ3RoOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmoubGVuZ3RoO1xuICAgIH0sXG4gICAgcmV2ZXJzZTogZnVuY3Rpb24gKGFycikge1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KGFycikucmV2ZXJzZSgpO1xuICAgIH0sXG4gICAgam9pbjogZnVuY3Rpb24gKGFyciwgc2VwYXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBhcnIuam9pbihzZXBhcmF0b3IpO1xuICAgIH0sXG4gICAgbGltaXQ6IGZ1bmN0aW9uIChhcnIsIGNvdW50LCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIGFyci5zbGljZSgraWR4IHx8IDAsICtjb3VudCArICgraWR4IHx8IDApKTtcbiAgICB9LFxuICAgIHNwbGl0OiBmdW5jdGlvbiAoc3RyLCBzZXBhcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIHN0ci5zcGxpdChzZXBhcmF0b3IgfHwgXCIsXCIpO1xuICAgIH0sXG4gICAgY2hvb3NlOiBmdW5jdGlvbiAoYm9vbCwgaWZmeSwgZWxzeSkge1xuICAgICAgICByZXR1cm4gISFib29sID8gaWZmeSA6IChlbHN5IHx8IFwiXCIpO1xuICAgIH0sXG4gICAgdG9nZ2xlOiBmdW5jdGlvbiAob2JqLCBjc3YxLCBjc3YyLCBzdHIpIHtcbiAgICAgICAgcmV0dXJuIGNzdjIuc3BsaXQoXCIsXCIpW2NzdjEubWF0Y2goL1xcdysvZykuaW5kZXhPZihvYmogKyBcIlwiKV0gfHwgc3RyO1xuICAgIH0sXG4gICAgc29ydDogZnVuY3Rpb24gKGFyciwgcHJvcCkge1xuICAgICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGFbcHJvcF0gPiBiW3Byb3BdID8gMSA6IC0xO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gW10uY29uY2F0KGFycikuc29ydChwcm9wID8gZm4gOiB1bmRlZmluZWQpO1xuICAgIH0sXG4gICAgZml4OiBmdW5jdGlvbiAobnVtLCBuKSB7XG4gICAgICAgIHJldHVybiAoK251bSkudG9GaXhlZChuKTtcbiAgICB9LFxuICAgIG1vZDogZnVuY3Rpb24gKG51bSwgbikge1xuICAgICAgICByZXR1cm4gKCtudW0pICUgKCtuKTtcbiAgICB9LFxuICAgIGRpdmlzaWJsZTogZnVuY3Rpb24gKG51bSwgbikge1xuICAgICAgICByZXR1cm4gbnVtICYmICgrbnVtICUgbikgPT09IDAgPyBudW0gOiBmYWxzZTtcbiAgICB9LFxuICAgIGV2ZW46IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgcmV0dXJuIG51bSAmJiAoK251bSAmIDEpID09PSAwID8gbnVtIDogZmFsc2U7XG4gICAgfSxcbiAgICBvZGQ6IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgcmV0dXJuIG51bSAmJiAoK251bSAmIDEpID09PSAxID8gbnVtIDogZmFsc2U7XG4gICAgfSxcbiAgICBudW1iZXI6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc3RyLnJlcGxhY2UoL1teXFwtXFxkXFwuXS9nLCBcIlwiKSk7XG4gICAgfSxcbiAgICB1cmw6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSShzdHIpO1xuICAgIH0sXG4gICAgYm9vbDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gISFvYmo7XG4gICAgfSxcbiAgICBmYWxzeTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gIW9iajtcbiAgICB9LFxuICAgIGZpcnN0OiBmdW5jdGlvbiAoaXRlcikge1xuICAgICAgICByZXR1cm4gaXRlci5pZHggPT09IDA7XG4gICAgfSxcbiAgICBsYXN0OiBmdW5jdGlvbiAoaXRlcikge1xuICAgICAgICByZXR1cm4gaXRlci5pZHggPT09IGl0ZXIuc2l6ZSAtIDE7XG4gICAgfSxcbiAgICBjYWxsOiBmdW5jdGlvbiAob2JqLCBmbikge1xuICAgICAgICByZXR1cm4gb2JqW2ZuXS5hcHBseShvYmosIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSk7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgICBNYXJrLmdsb2JhbHNba2V5XSA9IG9iajsgcmV0dXJuIFwiXCI7XG4gICAgfSxcbiAgICBsb2c6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgY29uc29sZS5sb2cob2JqKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG59O1xuXG4vLyBTaGltIGZvciBJRS5cbmlmICh0eXBlb2YgU3RyaW5nLnByb3RvdHlwZS50cmltICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgXCJcIik7IFxuICAgIH1cbn1cblxuLy8gRXhwb3J0IGZvciBOb2RlLmpzIGFuZCBBTUQuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gTWFyaztcbn1cbmVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTWFyaztcbiAgICB9KTtcbn1cbiIsInZhciBndWlhVFYgPSAoZnVuY3Rpb24oJCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIC8vY29uc29sZS5sb2coJ1VzYSBqUXVlcnkgdmVyc2lvbjogJyArICQuZm4uanF1ZXJ5KTtcclxuXHJcbiAgICB2YXIgY2FuYWxlc1VzdWFyaW8gPSBbJ2xhMScsICdsYTInLCAnYW50ZW5hMycsICdjdWF0cm8nLCAndGVsZWNpbmNvJywgJ2xhc2V4dGEnXSxcclxuICAgICAgICBjYW5hbGVzR2xvYmFsID0ge30sXHJcbiAgICAgICAgY2F0ZWdvcmlhc1VzdWFyaW8gPSBbXSxcclxuICAgICAgICBhcnJheUNhbmFsZXMgPSBbXSxcclxuICAgICAgICBhcnJheURpYXMgPSBbXTtcclxuICAgIHZhciBhbHRvQmFycmFIb3JhcyA9IDM1LFxyXG4gICAgICAgIGFuY2hvQmFycmFDYW5hbGVzID0gNzAsXHJcbiAgICAgICAgYWx0b0NhbmFsID0gNjUsXHJcbiAgICAgICAgYW5jaG9Qb3JEaWEgPSA0ODAwLCAvLyA0MzIwLFxyXG4gICAgICAgIHBpeGVsc1BvckhvcmEgPSBhbmNob1BvckRpYSAvIDI0LFxyXG4gICAgICAgIHBpeGVsc1Bvck1pbnV0byA9IHBpeGVsc1BvckhvcmEgLyA2MDtcclxuXHJcbiAgICAvLyBUT0RPIEFob3JhIG1pc21vIGZvcnphbW9zIGVzdGEgZmVjaGEgZGUgaW5pY2lvXHJcbiAgICB2YXIgZGlhQWN0dWFsID0gbmV3IERhdGUoKSxcclxuICAgICAgICBob3JhQWN0dWFsID0ge1xyXG4gICAgICAgICAgICAnaCc6IGxlZnRQYWQoZGlhQWN0dWFsLmdldEhvdXJzKCksIDIpLFxyXG4gICAgICAgICAgICAnbSc6IGxlZnRQYWQoZGlhQWN0dWFsLmdldE1pbnV0ZXMoKSwgMilcclxuICAgICAgICB9O1xyXG4gICAgLy9kaWFBY3R1YWwuc2V0VGltZShEYXRlLnBhcnNlKFwiTW9uLCBKdWwgMTQgMjAxNCAwMDowMDowMCBHTVQrMDIwMFwiKSk7XHJcbiAgICBkaWFBY3R1YWwuc2V0VGltZShEYXRlLnBhcnNlKFwiTW9uLCBKdWwgMTQgMjAxNFwiKSk7XHJcblxyXG4gICAgdmFyICR2aWV3UG9ydCA9ICQoJy52aWV3UG9ydCcpO1xyXG4gICAgdmFyICRzZWxlY3RvckNhdGVnb3JpYXMgPSAkKCcuc2VsZWN0b3JDYXRlZ29yaWFzJyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yRGlhcyA9ICQoJy5zZWxlY3RvckRpYXMnKTtcclxuICAgIHZhciAkY29udFByb2dyYW1hcyA9ICQoJy5jb250UHJvZ3JhbWFzJyk7XHJcbiAgICAvL3ZhciAkaXRlbVByb2dyYW1hID0gJCgnLml0ZW1Qcm9ncmFtYScpO1xyXG4gICAgdmFyICRjb250Q2FuYWxlcyA9ICQoJy5jb250Q2FuYWxlcycpO1xyXG4gICAgdmFyICRiYXJyYUhvcmFzID0gJCgnLmJhcnJhSG9yYXMnKTtcclxuICAgIHZhciAkaG9yYUFjdHVhbCA9ICQoJy5ob3JhQWN0dWFsJyk7XHJcbiAgICB2YXIgJGZpY2hhUHJvZ3JhbWEgPSAkKCcuZmljaGFQcm9ncmFtYScpO1xyXG4gICAgdmFyICRiYXJyYXNDYW5hbGVzID0gJCgnLmJhcnJhc0NhbmFsZXMnKTtcclxuICAgIHZhciAkYmFycmFMZXRyYXMgPSAkKCcuYmFycmFMZXRyYXMnKTtcclxuICAgIHZhciAkb3JkZW5DYW5hbGVzID0gJCgnLm9yZGVuQ2FuYWxlcycpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWNjZWRlIGEgbGFzIGNvb2tpZXMgZGVsIHVzdWFyaW8gcGFyYSB2ZXIgcGVyc29uYWxpemFjacOzbiBkZSBjYW5hbGVzXHJcbiAgICAgKiBAcmV0dXJuIHthcnJheX0gTGlzdGEgZGUgY2FuYWxlcyBwZXJzb25hbGl6YWRvcyBwb3IgZWwgdXN1YXJpb1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYXJnYUNvb2tpZXMoKSB7XHJcbiAgICAgICAgLy8gVE9ETyBDYXJnYXIgY2FuYWxlcyBkZXNkZSB1bmEgY29va2llLCB5IGdlbmVyYXIgw6lzdGEgY3VhbmRvIHNlIGFjY2VkZSBwb3IgcHJpbWVyYSB2ZXpcclxuICAgICAgICAvLyBUT0RPIENhcmdhciBkZSBsYXMgY29va2llcyBsb3MgY2FuYWxlcyByZXNhbHRhZG9zIGRlbCBzZWxlY3RvckNhdGVnb3JpYXNcclxuICAgICAgICAvLyBMw7NnaWNhIGRlIGxlY3R1cmEgZGUgY29va2llc1xyXG4gICAgICAgIHZhciBkZWYgPSAkLkRlZmVycmVkKCksXHJcbiAgICAgICAgICAgIGNhbmFsZXMsIGNhdGVnb3JpYXM7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY2FuYWxlcyA9IFsndGVsZWNpbmNvJywgJ2FudGVuYTMnLCAnbGEyJywgJ2xhMScsICdjdWF0cm8nLCAnbGFzZXh0YScsICdoaXN0b3JpYSddO1xyXG4gICAgICAgICAgICBjYXRlZ29yaWFzVXN1YXJpbyA9IFsyLCA0LCA1LCA3XTtcclxuICAgICAgICAgICAgZGVmLnJlc29sdmUoY2FuYWxlcyk7XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgcmV0dXJuIGRlZi5wcm9taXNlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjaWJlIGxhIGxpc3RhIGRlIGNhbmFsZXMgYSBjYXJnYXIgeSBoYWNlIGxhcyBsbGFtYWRhcyBhc8OtbmNyb25hc1xyXG4gICAgICogQHBhcmFtIHthcnJheX0gY2FuYWxlcyBMaXN0YWRvIGRlIGNhbmFsZXMgYSBjYXJnYXJcclxuICAgICAqIEByZXR1cm4ge2pzb259IERhdG9zIGpzb24gZGUgbGEgcHJvZ3JhbWFjacOzbiBhbCBjb21wbGV0byBwYXJhIGxvcyBjYW5hbGVzIHNlbGVjY2lvbmFkb3NcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY2FyZ2FEYXRvc0NhbmFsZXMoY2FuYWxlcykge1xyXG4gICAgICAgIC8vIENhcmdhcyBhc8OtbmNyb25hcyBkZSB2YXJpb3MgY2FuYWxlc1xyXG4gICAgICAgIC8vIHBvciBjYWRhIGNhbmFsLCBjYXJnYSB1biBqc29uXHJcbiAgICAgICAgdmFyIGpzb24gPSBbXSxcclxuICAgICAgICAgICAgcHJvbWlzZXMgPSBbXSxcclxuICAgICAgICAgICAgbnVtRWxlbWVudG9zID0gY2FuYWxlcy5sZW5ndGg7XHJcblxyXG4gICAgICAgICQud2hlbi5hcHBseShudWxsLCAkLm1hcChjYW5hbGVzLCBmdW5jdGlvbihjYW5hbCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgZmljaGVybyA9ICdkYXRvcy8nICsgY2FuYWwgKyAnLmpzb24nO1xyXG5cclxuICAgICAgICAgICAgcHJvbWlzZXMucHVzaCgkLmdldChmaWNoZXJvKS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGFycmF5Q2FuYWxlc1tpXSA9IGpzb25baV0gPSBkYXRhO1xyXG4gICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlDYW5hbGVzW2ldID0ganNvbltpXSA9ICcnO1xyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICAvLyBSZXNvbHZlciBkZWZlcnJlciBjdWFuZG8gc2UgaGF5YW4gY2FyZ2FkbyB0b2RvcyBsb3MganNvblxyXG4gICAgICAgIHJldHVybiAkLndoZW4uYXBwbHkobnVsbCwgcHJvbWlzZXMpLnByb21pc2UoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjaWJlIGxhIGxpc3RhIGRlIHByb2dyYW1hcyBhIHBpbnRhciBwb3IgY2FuYWwgeSBsYW56YSBlbCBwaW50YWRvIGRlbCBjYW5hbFxyXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhUGFycmlsbGEobGlzdGFDYW5hbGVzLCBhcnJheUNvbXBsZXRvKSB7XHJcbiAgICAgICAgdmFyIGxpc3RhID0gbGlzdGFDYW5hbGVzIHx8IGNhbmFsZXNVc3VhcmlvO1xyXG4gICAgICAgIHZhciBjb21wbGV0byA9IGFycmF5Q29tcGxldG8gfHwgYXJyYXlDYW5hbGVzO1xyXG5cclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGlkPVwie3tpZGNhbmFsfX1cIiBjbGFzcz1cImxpbmVhQ2FuYWwgY2xlYXJmaXhcIj48L2Rpdj4nO1xyXG5cclxuICAgICAgICAkLmVhY2gobGlzdGEsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgY29udGV4dC5pZGNhbmFsID0gdjtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkY29udFByb2dyYW1hcy5hcHBlbmQocmVzdWx0YWRvKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUGludGFtb3MgcHJvZ3JhbWFzIGVuIHN1cyBjYW5hbGVzXHJcbiAgICAgICAgJC5lYWNoKGNvbXBsZXRvLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIHZhciBjYW5hbCA9IHYuY2FuYWwubm9tYnJlO1xyXG4gICAgICAgICAgICB2YXIgZGl2Q2FuYWwgPSAkKCcjJyArIGNhbmFsKTtcclxuXHJcbiAgICAgICAgICAgICQuZWFjaCh2LnByb2dyYW1hcywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRpdiA9IHBpbnRhUGFycmlsbGFQcm9ncmFtYShpLCB2KTtcclxuICAgICAgICAgICAgICAgIGRpdkNhbmFsLmFwcGVuZChkaXYpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNvcnJlIGVsIGpzb24gZGUgcHJvZ3JhbWFzIGRlIGRlIHVuIGNhbmFsIHkgbG9zIHBpbnRhIGVuICdjb250UHJvZ3JhbWFzJ1xyXG4gICAgICogQHBhcmFtICB7aW50fSBxQ2FuYWwgSWRlbnRpZmljYWRvciBkZSBxdcOpIGNhbmFsIHBpbnRhbW9zXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhUGFycmlsbGFQcm9ncmFtYShpLCB2KSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlUHJvZ3JhbWEgPSAnPGRpdiBjbGFzcz1cIml0ZW1Qcm9ncmFtYVwiIGlkPVwie3tpZF9wcm9ncmFtYX19XCIgZGF0YS11cmw9XCJ7e3VybF9maWNoYX19XCInICtcclxuICAgICAgICAgICAgJ3N0eWxlPVwid2lkdGg6e3tkdXJ9fTsgbGVmdDp7e2RpZmZIb3JhRGlhfX07IHVzZXItc2VsZWN0ZWQ6bm9uZTtcIj4nICtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpdGVtUHJvZ3JhbWFJbm5lciB7e2NsYXNlfX1cIj4nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiZmVjaGFcIj57e2luZm9Ib3JhRHVyYWNpb259fTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJzxhIGhyZWY9XCJodHRwOi8vZWxtdW5kby5lcy90ZWxldmlzaW9uL3Byb2dyYW1hL3t7aWRfcHJvZ3JhbWF9fVwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPnt7bm9tYnJlfX08L2E+JyArXHJcbiAgICAgICAgICAgICc8aDQ+e3tub21icmV9fTwvaDQ+JyArXHJcbiAgICAgICAgICAgICd7e2lmIGVwaXNvZGlvfX08cD57e2VwaXNvZGlvfX08L3A+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAne3tpZiBmYXZ9fTxzcGFuIGNsYXNzPVwiZmF2b3JpdG9cIj48aSBjbGFzcz1cImZhIGZhLWJvb2ttYXJrXCI+PC9pPjwvc3Bhbj57ey9pZn19JyArXHJcbiAgICAgICAgICAgICd7e2lmIGFsZX19PHNwYW4gY2xhc3M9XCJhbGVydGFcIj48aSBjbGFzcz1cImZhIGZhLWNsb2NrLW9cIj48L2k+PC9zcGFuPnt7L2lmfX0nICtcclxuICAgICAgICAgICAgJzwvZGl2PjwvZGl2PlwiJztcclxuXHJcbiAgICAgICAgLy8gU2VsZWNjacOzbiBkZSBjYXRlZ29yw61hXHJcbiAgICAgICAgLy8gbUNpbmUgXCIxMDRcIiAvIG1Db25jdXJzb3MgXCJJTlRfMlwiIC8gbUNvcmF6b24gLyBtRGVwb3J0ZXMgXCI5MFwiIC9cclxuICAgICAgICAvLyBtSW5mb3JtYXRpdm9zIFwiMjBcIiAvIG1NYWdhemluZXMgXCIzMVwiIC8gbVNlcmllcyBcIjFcIlxyXG4gICAgICAgIHZhciBjYXQgPSB2LmNhdGVnb3JpYSxcclxuICAgICAgICAgICAgY2xhc2U7XHJcbiAgICAgICAgc3dpdGNoIChjYXQpIHtcclxuICAgICAgICAgICAgY2FzZSBcIjFcIjpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gXCJjYXRTZXJpZXNcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiMTA0XCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0Q2luZVwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIzMVwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdE1hZ2F6aW5lc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIyMFwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdEluZm9ybWF0aXZvc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCI5MFwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdERlcG9ydGVzXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIklOVF8yXCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0Q29uY3Vyc29zXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIklOVF8xXCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0Q29yYXpvblwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFbCBhbmNobyB2YSBhIGRlcGVuZGVyIGRlIGxhIGR1cmFjacOzbiBkZWwgcHJvZ3JhbWFcclxuICAgICAgICB2YXIgZHVyID0gTWF0aC5mbG9vcihwaXhlbHNQb3JNaW51dG8gKiB2LmR1cmFjaW9uKSxcclxuICAgICAgICAgICAgZmVjaGEgPSBuZXcgRGF0ZSh2LmhvcmFfaW5pY2lvKTtcclxuICAgICAgICB2YXIgZGlmZkhvcmFEaWEgPSBNYXRoLmZsb29yKGZlY2hhIC0gZGlhQWN0dWFsKTsgLy8gVE9ETyBkaWFBY3R1YWwgZm9yemFkb1xyXG4gICAgICAgIGRpZmZIb3JhRGlhID0gTWF0aC5mbG9vcigoKGRpZmZIb3JhRGlhIC8gMTAwMCkgLyA2MCkgKiBwaXhlbHNQb3JNaW51dG8pO1xyXG5cclxuICAgICAgICB2YXIgaG9yYSA9IGZlY2hhLmdldEhvdXJzKCk7XHJcbiAgICAgICAgaG9yYSA9IGxlZnRQYWQoaG9yYSwgMik7XHJcbiAgICAgICAgdmFyIG1pbnMgPSBmZWNoYS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgbWlucyA9IGxlZnRQYWQobWlucywgMik7XHJcbiAgICAgICAgdmFyIGluZm9Ib3JhRHVyYWNpb24gPSAnJyArIGhvcmEgKyAnOicgKyBtaW5zICsgJyB8ICcgKyB2LmR1cmFjaW9uICsgJyBtaW5zLic7XHJcblxyXG5cclxuICAgICAgICAvLyBUT0RPIFJhbmRvbSBwYXJhIHBvZGVyIHZlciBwcm9ncmFtYXMgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZSBwcm9ncmFtYXMuIEVMSU1JTkFSXHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgKiAxMDAgPCA1KSB7XHJcbiAgICAgICAgICAgIHZhciBmYXYgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSAqIDEwMCA8IDUpIHtcclxuICAgICAgICAgICAgdmFyIGFsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICBjbGFzZTogY2xhc2UsXHJcbiAgICAgICAgICAgIGR1cjogZHVyICsgJ3B4JyxcclxuICAgICAgICAgICAgZGlmZkhvcmFEaWE6IGRpZmZIb3JhRGlhICsgJ3B4JyxcclxuICAgICAgICAgICAgaWRfcHJvZ3JhbWE6IHYuaWRfcHJvZ3JhbWEsXHJcbiAgICAgICAgICAgIHVybF9maWNoYTogdi51cmxfZmljaGEsXHJcbiAgICAgICAgICAgIGluZm9Ib3JhRHVyYWNpb246IGluZm9Ib3JhRHVyYWNpb24sXHJcbiAgICAgICAgICAgIG5vbWJyZTogdi5ub21icmUsXHJcbiAgICAgICAgICAgIGVwaXNvZGlvOiB2LmVwaXNvZGlvLFxyXG4gICAgICAgICAgICBmYXY6IGZhdiB8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgYWxlOiBhbGUgfCB1bmRlZmluZWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZVByb2dyYW1hLCBjb250ZXh0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0YWRvO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBpbnRhIGxvcyBpY29ub3MgZGUgY2FuYWxlcyBlbiBlbCBjb21wb25lbnRlICdjb250Q2FuYWxlcydcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFDYW5hbGVzKGxpc3RhQ2FuYWxlcykge1xyXG5cclxuICAgICAgICB2YXIgbGlzdGEgPSBsaXN0YUNhbmFsZXMgfHwgY2FuYWxlc1VzdWFyaW87XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIml0ZW1DYW5hbFwiPjxpbWcgc3JjPVwiaHR0cDovL2VzdGF0aWNvcy5lbG11bmRvLmVze3tpY29ub319XCIgLz48L2Rpdj4nO1xyXG5cclxuICAgICAgICAkLmVhY2gobGlzdGEsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgY29udGV4dC5pY29ubyA9IGFycmF5Q2FuYWxlc1tpXS5jYW5hbC5pY29ubztcclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkY29udENhbmFsZXMuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgdW5hIGJhcnJhIGhvcml6b25hbCBjb24gbGEgbWFyY2EgZGUgaG9yYXMsIHF1ZSBzZSBkZXNwbGF6YSBjb24gZWwgdmlld1BvcnRcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFIb3Jhc1BhcnJpbGxhKCkge1xyXG4gICAgICAgIHZhciBkaWEgPSBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBpLCBqO1xyXG5cclxuICAgICAgICAvLyBHZW5lcmFtb3MgdW5hIGJhcnJhIHBhcmEgbG9zIGTDrWFzICg0KSBkZSBsb3MgcXVlIGRpc3BvbmVtb3MgZGUgZGF0b3NcclxuICAgICAgICBmb3IgKGogPSAwOyBqIDw9IDM7IGorKykge1xyXG5cclxuICAgICAgICAgICAgZGlhLnNldFRpbWUoZGlhQWN0dWFsLmdldFRpbWUoKSArIChqICogODY0MDAwMDApKTtcclxuICAgICAgICAgICAgdmFyIGRpYVRleHQgPSBkaWEudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycsIHtcclxuICAgICAgICAgICAgICAgIHdlZWtkYXk6ICdsb25nJyxcclxuICAgICAgICAgICAgICAgIC8veWVhcjogJ251bWVyaWMnLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6ICdsb25nJyxcclxuICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxEaWEgPSAoaiAqIHBpeGVsc1BvckhvcmEgKiAyNCk7XHJcbiAgICAgICAgICAgIHZhciBjRGlhID0gJCgnPGRpdi8+JykudGV4dChkaWFUZXh0KVxyXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdpdGVtRGlhJylcclxuICAgICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogbERpYVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRiYXJyYUhvcmFzLmFwcGVuZChjRGlhKTtcclxuXHJcbiAgICAgICAgICAgIGFycmF5RGlhcy5wdXNoKFtkaWFUZXh0LCBsRGlhXSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMjQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBpICsgXCI6MDBcIjtcclxuICAgICAgICAgICAgICAgIHZhciBsID0gKGogKiBwaXhlbHNQb3JIb3JhICogMjQpICsgaSAqIHBpeGVsc1BvckhvcmE7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9ICQoJzxkaXYvPicpLnRleHQodClcclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2l0ZW1Ib3JhcycpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGJhcnJhSG9yYXMuYXBwZW5kKGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1biBzZWxlY3RvciBkZSBhY2Nlc28gZGlyZWN0byBhIGxvcyBkw61hcyBpbmNsdcOtZG9zIGVuIGxhIHByb2dyYW1hY2nDs25cclxuICAgICAqIERlcGVuZGVtb3MgZGUgYXJyYXlEaWFzIHF1ZSBoYSBnZW5lcmFkbyBkYXRvcyBlbiBwaW50YUhvcmFzUGFycmlsbGFcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFTZWxlY3RvckRpYXMoKSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaSBjbGFzcz1cIml0ZW1EaWFcIiBkYXRhLXB4PVwie3tweH19XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Ly9cIj57e2RpYVRleHR9fTwvYT48L2xpPic7XHJcblxyXG4gICAgICAgIGFycmF5RGlhcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlhVGV4dCA9IGl0ZW1bMF07XHJcbiAgICAgICAgICAgIHZhciBweCA9IGl0ZW1bMV07XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgZGlhVGV4dDogZGlhVGV4dCxcclxuICAgICAgICAgICAgICAgIHB4OiBweFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkc2VsZWN0b3JEaWFzLmZpbmQoJ3VsJykuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgdW5hIGZyYW5qYSBxdWUgbWFyY2EgbGEgaG9yYSBhY3R1YWwgZW4gZWwgY29tcG9uZW50ZSBQYXJyaWxsYVxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUhvcmFBY3R1YWwoKSB7XHJcblxyXG4gICAgICAgIHZhciBob3JhcyA9IGhvcmFBY3R1YWwuaCxcclxuICAgICAgICAgICAgbWludXRvcyA9IGhvcmFBY3R1YWwubTtcclxuXHJcbiAgICAgICAgdmFyIGRpdkhvcmEgPSAkKCcuaG9yYUFjdHVhbCcpXHJcbiAgICAgICAgICAgIC5oaWRlKClcclxuICAgICAgICAgICAgLmZpbmQoJ3AnKS50ZXh0KGhvcmFzICsgXCI6XCIgKyBtaW51dG9zKS5lbmQoKVxyXG4gICAgICAgICAgICAuc2hvdygpO1xyXG5cclxuICAgICAgICB2YXIgcG9zWCA9IHBhcnNlSW50KGhvcmFzKSAqIHBpeGVsc1BvckhvcmEgKyBwYXJzZUludChtaW51dG9zKSAqIHBpeGVsc1Bvck1pbnV0bztcclxuICAgICAgICBkaXZIb3JhLmNzcyh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogcG9zWFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpdMO6YSBsYSBQYXJyaWxsYSBlbiBlbCBtb21lbnRvIGFjdHVhbCwgZmVjaGEgeSBob3JhXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNpdHVhUGFycmlsbGFBaG9yYSgpIHtcclxuICAgICAgICB2YXIgbWl0YWRBbmNob1ZpZXdwb3J0ID0gJHZpZXdQb3J0LndpZHRoKCkgLyAyO1xyXG4gICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkaG9yYUFjdHVhbC5jc3MoJ2xlZnQnKSk7XHJcbiAgICAgICAgbXVldmVBID0gcGFyc2VJbnQobWl0YWRBbmNob1ZpZXdwb3J0IC0gbXVldmVBKTtcclxuXHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAnbGVmdCc6IG11ZXZlQSArICdweCdcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICRiYXJyYUhvcmFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgJ2xlZnQnOiBtdWV2ZUEgKyAncHgnXHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICB2YXIgaG9yYUxlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLmgpICogcGl4ZWxzUG9ySG9yYTtcclxuICAgICAgICB2YXIgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgIHZhciBwb3NYID0gaG9yYUxlZnQgKyBtaW51dG9zTGVmdCArIG11ZXZlQTtcclxuICAgICAgICAkaG9yYUFjdHVhbC5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9idGVuZHLDrWFtb3MgZGF0b3MgZGUgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZSB1c3VhcmlvIHZhbGlkYWRvIChzaSBodWJpZXJhKVxyXG4gICAgICogQHJldHVybiB7anNvbn0gT2JqZXRvIGpzb24gY29uIHRvZG9zIGxvcyBwcm9ncmFtYXMgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZWwgdXN1YXJpb1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYXJnYUluZm9Vc3VhcmlvKCkge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNvcmEgbG9zIHByb2dyYW1hcyBlbiBQYXJyaWxsYSBjb24gbGFzIGFsZXJ0YXMgeSBmYXZvcml0b3MgcmVjb3JyaWVuZG8gZWwganNvbiBkZSB1c3VhcmlvXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFQcm9nc1VzdWFyaW8oKSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzb2NpYSB0b2RvcyBsb3MgZXZlbnQgbGlzdGVuZXJzIGEgbG9zIGRpZmVyZW50ZXMgZWxlbWVudG9zIGRlIHVpXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbGFuemFIYW5kbGVycygpIHtcclxuXHJcbiAgICAgICAgLyp2YXIgJHZpZXdQb3J0ID0gJCgnLnZpZXdQb3J0Jyk7XHJcbiAgICAgICAgdmFyICRjb250UHJvZ3JhbWFzID0gJCgnLmNvbnRQcm9ncmFtYXMnKTtcclxuICAgICAgICB2YXIgJGNvbnRDYW5hbGVzID0gJCgnLmNvbnRDYW5hbGVzJyk7XHJcbiAgICAgICAgdmFyICRiYXJyYUhvcmFzID0gJCgnLmJhcnJhSG9yYXMnKTtcclxuICAgICAgICB2YXIgJGhvcmFBY3R1YWwgPSAkKCcuaG9yYUFjdHVhbCcpO1xyXG4gICAgICAgIHZhciAkZmljaGFQcm9ncmFtYSA9ICQoJy5maWNoYVByb2dyYW1hJyk7Ki9cclxuXHJcbiAgICAgICAgdmFyIGFsdG9WaWV3cG9ydCA9ICR2aWV3UG9ydC5oZWlnaHQoKSxcclxuICAgICAgICAgICAgYW5jaG9WaWV3cG9ydCA9ICR2aWV3UG9ydC53aWR0aCgpLFxyXG4gICAgICAgICAgICBhbHRvQ29udFByb2dyYW1hcyA9ICRjb250UHJvZ3JhbWFzLmhlaWdodCgpLFxyXG4gICAgICAgICAgICBhbmNob0NvbnRQcm9ncmFtYXMgPSAkY29udFByb2dyYW1hcy5vZmZzZXRXaWR0aCxcclxuICAgICAgICAgICAgYW5jaG9CYXJyYUNhbmFsZXMgPSAkY29udENhbmFsZXMud2lkdGgoKTtcclxuICAgICAgICB2YXIgaXNEcmFnID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHNlSGFNb3ZpZG8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIHByaW1lcm9zRGl2ID0gJCgnLmNvbnRQcm9ncmFtYXMgPiBkaXYgPiBkaXY6Zmlyc3QtY2hpbGQnKSxcclxuICAgICAgICAgICAgb2Zmc2V0c0l6ZGEgPSBbXTtcclxuICAgICAgICAkLmVhY2gocHJpbWVyb3NEaXYsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgb2Zmc2V0c0l6ZGEucHVzaCh0aGlzLm9mZnNldExlZnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBtaW5JemRhID0gb2Zmc2V0c0l6ZGEubWluKCk7XHJcblxyXG4gICAgICAgIHZhciB1bHRpbW9zRGl2ID0gJCgnLmNvbnRQcm9ncmFtYXMgPiBkaXYgPiBkaXY6bGFzdC1jaGlsZCcpLFxyXG4gICAgICAgICAgICBvZmZzZXRzRHJjaCA9IFtdO1xyXG4gICAgICAgICQuZWFjaCh1bHRpbW9zRGl2LCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIG9mZnNldHNEcmNoLnB1c2godGhpcy5vZmZzZXRMZWZ0ICsgJCh0aGlzKS53aWR0aCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbWF4RHJjaCA9IG9mZnNldHNEcmNoLm1heCgpO1xyXG5cclxuICAgICAgICAvLyBOb3MgY2FyZ2Ftb3MgZWwgcHJlbG9hZGVyXHJcbiAgICAgICAgJHZpZXdQb3J0LmZpbmQoJy5wcmVsb2FkLXdyYXBwZXInKS5yZW1vdmUoKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2Vkb3duL3RvdWNoc3RhcnRcclxuICAgICAgICAkY29udFByb2dyYW1hcy5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCBkcmFnT24pO1xyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2V1cC90b3VjaGVuZFxyXG4gICAgICAgIC8vICRjb250UHJvZ3JhbWFzLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgZHJhZ09mZik7XHJcbiAgICAgICAgLy8gR2VuZXJhbW9zIHVuIGhhbmRsZXIgcGFyYSBtb3VzZW1vdmUvdG91Y2htb3ZlXHJcbiAgICAgICAgLy8gJGNvbnRQcm9ncmFtYXMub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCBkcmFnTW92ZSk7XHJcblxyXG4gICAgICAgIC8vIFNhY2EgcGFuZWwgY29uIGluZm9ybWFjacOzbiBhamF4IGRlIHByb2dyYW1hXHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMub24oJ2NsaWNrJywgY2xpY2tQcm9ncmFtYSk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZXIgcGFyYSBsYSBzZWxlY2Npw7NuIGRlIHVuYSBob3JhXHJcbiAgICAgICAgJGJhcnJhSG9yYXMub24oJ2NsaWNrJywgJy5pdGVtSG9yYXMnLCBjbGlja0hvcmEpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgZmlsdHJhZG8gcG9yIGNhdGVnb3LDrWFzXHJcbiAgICAgICAgJHNlbGVjdG9yQ2F0ZWdvcmlhcy5vbignY2xpY2snLCAnbGknLCBtYXJjYUNhdGVnb3JpYSk7XHJcbiAgICAgICAgbWFyY2FyQ2F0ZWdvcmlhc1NlbGVjY2lvbmFkYXMoKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIHNlbGVjY2nDs24gZGUgZMOtYVxyXG4gICAgICAgICRzZWxlY3RvckRpYXMub24oJ2NsaWNrJywgJ2xpJywgY2xpY2tEaWEpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkcmFnT24oZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFRvcCA9IHRoaXMub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0TGVmdCA9IHRoaXMub2Zmc2V0TGVmdDtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsTW91c2VYID0gZXZlbnQuY2xpZW50WDtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsTW91c2VZID0gZXZlbnQuY2xpZW50WTtcclxuICAgICAgICAgICAgaXNEcmFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2VIYU1vdmlkbyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhbW9zIHVuIGhhbmRsZXIgcGFyYSBtb3VzZXVwL3RvdWNoZW5kXHJcbiAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgZHJhZ09mZik7XHJcbiAgICAgICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2Vtb3ZlL3RvdWNobW92ZVxyXG4gICAgICAgICAgICAkY29udFByb2dyYW1hcy5vbignbW91c2Vtb3ZlIHRvdWNobW92ZScsIGRyYWdNb3ZlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkcmFnT2ZmKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0RyYWcpIHtcclxuICAgICAgICAgICAgICAgIGlzRHJhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMub2ZmKCdtb3VzZXVwIHRvdWNoZW5kJywgZHJhZ09mZik7XHJcbiAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5vZmYoJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCBkcmFnTW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkcmFnTW92ZShldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRYID0gZXZlbnQuY2xpZW50WCAtIHRoaXMuaW5pdGlhbE1vdXNlWDtcclxuICAgICAgICAgICAgICAgIHZhciBkWSA9IGV2ZW50LmNsaWVudFkgLSB0aGlzLmluaXRpYWxNb3VzZVk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTWFyY2Ftb3MgY29uIHVuIGZsYWcgc2kgaGEgaGFiaWRvIGRpZmVyZW5jaWEgZGUgbcOhcyBkZSAzIHDDrXhlbGVzXHJcbiAgICAgICAgICAgICAgICBzZUhhTW92aWRvID0gTWF0aC5hYnMoZFgpID4gMiB8fCBNYXRoLmFicyhkWSkgPiAyO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBudG9wID0gdGhpcy5zdGFydFRvcCArIGRZO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5sZWZ0ID0gdGhpcy5zdGFydExlZnQgKyBkWDtcclxuICAgICAgICAgICAgICAgIC8vIEzDrW1pdGUgdG9wICgzNXB4IGFsdG8gJGJhcnJhSG9yYXMpXHJcbiAgICAgICAgICAgICAgICBpZiAobnRvcCA+IGFsdG9CYXJyYUhvcmFzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnRvcCA9IGFsdG9CYXJyYUhvcmFzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTMOtbWl0ZSBib3R0b20gKGFsdG9WaWV3cG9ydCAtIGFsdG9Qcm9ncmFtYXMpXHJcbiAgICAgICAgICAgICAgICBpZiAobnRvcCA8IChhbHRvVmlld3BvcnQgLSBhbHRvQ29udFByb2dyYW1hcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBudG9wID0gKGFsdG9WaWV3cG9ydCAtIGFsdG9Db250UHJvZ3JhbWFzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEzDrW1pdGUgcmlnaHQgKDcwcHggYW5jaG8gJGNvbnRDYW5hbGVzKVxyXG4gICAgICAgICAgICAgICAgaWYgKG5sZWZ0ID4gYW5jaG9CYXJyYUNhbmFsZXMgKyBNYXRoLmFicyhtaW5JemRhKSArIDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmxlZnQgPSBhbmNob0JhcnJhQ2FuYWxlcyArIE1hdGguYWJzKG1pbkl6ZGEpICsgNTA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIGxlZnQgKGFuY2hvVmlld3BvcnQgbWVub3MgZWwgYW5jaG8gdG90YWwgZGUgcHJvZ3JhbWFzKVxyXG4gICAgICAgICAgICAgICAgaWYgKG5sZWZ0IDwgYW5jaG9WaWV3cG9ydCAtIDUwIC0gTWF0aC5hYnMobWF4RHJjaCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBubGVmdCA9IGFuY2hvVmlld3BvcnQgLSA1MCAtIE1hdGguYWJzKG1heERyY2gpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAndG9wJzogbnRvcCArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBubGVmdCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRDYW5hbGVzLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IG50b3AgKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRiYXJyYUhvcmFzLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBubGVmdCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvcmFMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5oKSAqIHBpeGVsc1BvckhvcmEsXHJcbiAgICAgICAgICAgICAgICAgICAgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1ggPSBob3JhTGVmdCArIG1pbnV0b3NMZWZ0ICsgbmxlZnQ7XHJcbiAgICAgICAgICAgICAgICAkaG9yYUFjdHVhbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBkZWwgY2xpY2sgZW4gdW4gaXRlbUhvcmFzXHJcbiAgICAgICAgICogQHBhcmFtICB7ZXZlbnR9IGV2ZW50IE9iamV0byBldmVudG8gY29uIHRvZGEgbGEgaW5mbyBkZWwgY2xpY2tcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tIb3JhKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkKHRoaXMpLmNzcygnbGVmdCcpKTtcclxuICAgICAgICAgICAgbXVldmVBID0gcGFyc2VJbnQoKGFuY2hvVmlld3BvcnQgLyAyKSAtIG11ZXZlQSk7XHJcbiAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKG11ZXZlQSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBkZWwgY2xpY2sgZW4gdW4gZMOtYVxyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBPYmpldG8gZXZlbnQgY29uIHRvZGEgbGEgaW5mbyBkZWwgY2xpY2tcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tEaWEoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIG11ZXZlQSA9IHBhcnNlSW50KCQodGhpcykuZGF0YSgncHgnKSkgKiAtMTtcclxuICAgICAgICAgICAgbXVldmVQcm9ncmFtYXNBUHVudG8obXVldmVBKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYW5kbGVyIGRlbCBjbGljayBlbiB1biBpdGVtUHJvZ3JhbWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgT2JqZXRvIGV2ZW50byBjb24gdG9kYSBsYSBpbmZvIGRlbCBjbGlja1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja1Byb2dyYW1hKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmICghc2VIYU1vdmlkbykge1xyXG4gICAgICAgICAgICAgICAgaXNEcmFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSksXHJcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1QYWRyZSA9ICQoZWxlbSkuaXMoJy5pdGVtUHJvZ3JhbWEnKSA/ICQoZWxlbSkgOiAkKGVsZW0pLmNsb3Nlc3QoJy5pdGVtUHJvZ3JhbWEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvZ1VybCA9ICRlbGVtUGFkcmUuZmluZCgnYScpLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9nSWQgPSAkZWxlbVBhZHJlLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgICBjYXJnYUZpY2hhUHJvZ3JhbWEocHJvZ0lkLCBwcm9nVXJsKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbXVldmVBID0gcGFyc2VJbnQoJGVsZW1QYWRyZS5jc3MoJ2xlZnQnKSkgKyAkZWxlbVBhZHJlLndpZHRoKCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgbXVldmVBID0gcGFyc2VJbnQoKGFuY2hvVmlld3BvcnQgLyAyKSAtIG11ZXZlQSk7XHJcbiAgICAgICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhtdWV2ZUEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FyZ2EgcG9yIGFqYXggbGEgaW5mb3JtYWNpw7NuIGLDoXNpY2EgZGUgbGEgZmljaGEgZGUgcHJvZ3JhbWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtpbnR9IHByb2dJZCAgSWQgZGVsIHByb2dyYW1hXHJcbiAgICAgICAgICogQHBhcmFtICB7c3RyaW5nfSBwcm9nVXJsIFVybCBjb21wbGV0YSBkZSBsYSBydXRhIHBhcmEgY2FyZ2FyIGxhIGZpY2hhXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNhcmdhRmljaGFQcm9ncmFtYShwcm9nSWQsIHByb2dVcmwpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyBQcm9iYXIgZW4gZW50b3JubyBkZSBwcnVlYmFzIGVsbXVuZG8uZXNcclxuICAgICAgICAgICAgLy9wcm9nVXJsID0gJ2h0dHA6Ly93d3cuZWxtdW5kby5lcycgKyBwcm9nVXJsO1xyXG4gICAgICAgICAgICBjaWVycmFGaWNoYSgpO1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogXCJmaWNoYVByb2dyYW1hLmh0bWxcIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAncHJvZ0lkJzogcHJvZ0lkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICAgICAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oaHRtbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuY29udGVuaWRvJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJykubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWEuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTAwLCAnc3dpbmcnLCBjcmVhQ2llcnJlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY3JlYUNpZXJyZSgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaWVycmEgPSAkKCc8ZGl2Lz4nKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KCdYJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2NpZXJyYScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRmaWNoYVByb2dyYW1hKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaWVycmFGaWNoYSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2llcnJhRmljaGEoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoJGZpY2hhUHJvZ3JhbWEuY3NzKCdyaWdodCcpKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0zMDBcclxuICAgICAgICAgICAgICAgICAgICB9LCAzMDAsICdzd2luZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBtYXJjYUNhdGVnb3JpYShldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY2xhc2UgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2NsYXNzJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGNvbnRQcm9ncmFtYXMuaGFzQ2xhc3MoY2xhc2UpKSB7XHJcbiAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5yZW1vdmVDbGFzcyhjbGFzZSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2J1dHRvbicpLnJlbW92ZUNsYXNzKCdhY3Rpdm8nKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmFkZENsYXNzKGNsYXNlKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnYnV0dG9uJykuYWRkQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1hcmNhckNhdGVnb3JpYXNTZWxlY2Npb25hZGFzKCkge1xyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcmlhc1VzdWFyaW8ubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaChjYXRlZ29yaWFzVXN1YXJpbywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3RvckNhdGVnb3JpYXMuZmluZCgnbGk6bnRoLWNoaWxkKCcgKyB2ICsgJyknKS5maW5kKCdidXR0b24nKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNdWV2ZSBlbCBjb250UHJvZ3JhbWFzIGEgbGEgcG9zaWNpw7NuIGRhZGFcclxuICAgICAgICAgKiBAcGFyYW0gIHtpbnR9IGNvb3JkWCBDb29yZGVuYWRhIGxlZnRcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gbXVldmVQcm9ncmFtYXNBUHVudG8oY29vcmRYKSB7XHJcbiAgICAgICAgICAgIHZhciBubGVmdCA9IGNvb3JkWCB8fCAwO1xyXG4gICAgICAgICAgICAkY29udFByb2dyYW1hcy5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IG5sZWZ0ICsgJ3B4J1xyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAkYmFycmFIb3Jhcy5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IG5sZWZ0ICsgJ3B4J1xyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICB2YXIgaG9yYUxlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLmgpICogcGl4ZWxzUG9ySG9yYTtcclxuICAgICAgICAgICAgdmFyIG1pbnV0b3NMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5tKSAqIHBpeGVsc1Bvck1pbnV0bztcclxuICAgICAgICAgICAgdmFyIHBvc1ggPSBob3JhTGVmdCArIG1pbnV0b3NMZWZ0ICsgbmxlZnQ7XHJcbiAgICAgICAgICAgICRob3JhQWN0dWFsLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBpbnRhIGVsIHRvdGFsIGRlIGNhbmFsZXMgYSBsb3MgcXVlIHNlIHB1ZWRlIHN1c2NyaWJpciB5IGxhcyBsZXRyYXMgY29ycmVzcG9uZGllbnRlc1xyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUxpc3RhZG9DYW5hbGVzU3VzY3JpcGNpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciB1bExldHJhcyA9ICQoJzx1bD4nKSxcclxuICAgICAgICAgICAgZmljaGVybyA9ICdkYXRvcy9saXN0YWRvY2FuYWxlcy5qc29uJztcclxuXHJcbiAgICAgICAgLy8gVE9ETyBtb3ZlciBsYSBjYXJnYSBhIHVuYSBmdW5jacOzbiBkaWZlcmVudGUgY29uIHByb21pc2VzXHJcbiAgICAgICAgLy8gKEdlbmVyYSBlbCBiYWNrZW5kKVxyXG4gICAgICAgICQuZ2V0KGZpY2hlcm8pXHJcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGNhbmFsZXNHbG9iYWwgPSBkYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVMZXRyYSA9ICc8bGkgY2xhc3M9XCJpdGVtTGV0cmFcIj48aDQ+e3tsZXRyYX19PC9oND4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImRpdkxldHJhIG5hbm9cIj48ZGl2IGNsYXNzPVwibmFuby1jb250ZW50XCI+PHVsPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICd7e2NhbmFsZXN9fTxsaSBjbGFzcz1cIml0ZW1DYW5hbFwiIGRhdGEtaWRjYW5hbD1cInt7aWRfcHJvZ3JhbWF9fVwiPjxpbWcgc3JjPVwie3tpY29ub319XCIgLz57e25vbWJyZV9jb21wbGV0b319PHNwYW4gY2xhc3M9XCJjaGVja1wiPjwvc3Bhbj48L2xpPnt7L2NhbmFsZXN9fScgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3VsPjwvZGl2PjwvZGl2PjwvbGk+JztcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goY2FuYWxlc0dsb2JhbCwgZnVuY3Rpb24oaSwgdikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXRyYTogaSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FuYWxlczogdlxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRMZXRyYSA9IE1hcmsudXAodGVtcGxhdGVMZXRyYSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWxMZXRyYXMuYXBwZW5kKHJlc3VsdExldHJhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRiYXJyYUxldHJhcy5odG1sKHVsTGV0cmFzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0NvbXByb2JhbW9zIHNpIHlhIGVzdGFtb3Mgc3VzY3JpdG9zIGEgZXNlIGNhbmFsXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtQ2FuYWwnKSwgZnVuY3Rpb24oaSwgdikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuYWxlc1VzdWFyaW8uaW5kZXhPZigkKHRoaXMpLmRhdGEoJ2lkY2FuYWwnKSkgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygkKHRoaXMpLmRhdGEoJ2lkY2FuYWwnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNoZWNrJykuYWRkQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRiYXJyYUxldHJhc1xyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYXNoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50UGFnZVNjcm9sbGluZzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgbG9zIGNhbmFsZXMgYSBsb3MgcXVlIGVzdMOhIHN1c2NyaXRvIGVsIHVzdWFyaW8gKG8gZGVmZWN0bylcclxuICAgICAqIFBlcm1pdGUgcmVvcmRlbmFyIGxvcyBjYW5hbGVzLCBkZXN1c2NyaWJpcnNlIHkgZ3VhcmRhciBsYSBjb25maWd1cmFjacOzblxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUxpc3RhZG9DYW5hbGVzU2VsZWNjaW9uYWRvcygpIHtcclxuXHJcbiAgICAgICAgdmFyIHVsQ2FuYWxlcyA9ICQoJzx1bCBjbGFzcz1cIm9yZGVuIHZlcnRpY2FsXCI+Jyk7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaSBjbGFzcz1cIml0ZW1DYW5hbFwiIGRhdGEtaWRjYW5hbD1cInt7bm9tYnJlfX1cIj48aW1nIHNyYz1cImh0dHA6Ly9lc3RhdGljb3MuZWxtdW5kby5lc3t7aWNvbm99fVwiIC8+e3tub21icmVfY29tcGxldG99fTxzcGFuIGNsYXNzPVwiY2hlY2sgc2VsXCI+PC9zcGFuPjwvbGk+JztcclxuXHJcbiAgICAgICAgJC5lYWNoKGFycmF5Q2FuYWxlcywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBjb250ZXh0ID0gdi5jYW5hbDtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB1bENhbmFsZXMuYXBwZW5kKHJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRvcmRlbkNhbmFsZXMuZmluZCgnLm5hbm8tY29udGVudCcpLmh0bWwodWxDYW5hbGVzKTtcclxuICAgICAgICAkb3JkZW5DYW5hbGVzXHJcbiAgICAgICAgICAgIC5maW5kKCcubmFubycpLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGw6ICd0b3AnLFxyXG4gICAgICAgICAgICAgICAgZmxhc2g6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50UGFnZVNjcm9sbGluZzogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gbGFuemFIYW5kbGVyc1N1c2NyaXBpY2lvbigpIHtcclxuXHJcbiAgICAgICAgLyp2YXIgJGJhcnJhTGV0cmFzID0gJCgnLmJhcnJhTGV0cmFzJyk7XHJcbiAgICAgICAgdmFyICRvcmRlbkNhbmFsZXMgPSAkKCcub3JkZW5DYW5hbGVzJyk7Ki9cclxuXHJcbiAgICAgICAgLy8gQ2xpY2sgZW4gaXRlbXMgZGUgc3VzY3JpcGNpw7NuXHJcbiAgICAgICAgJGJhcnJhTGV0cmFzLm9uKCdjbGljaycsICcuaXRlbUNhbmFsJywgY2xpY2tJdGVtQ2FuYWwpO1xyXG5cclxuICAgICAgICAvLyBSZW9yZGVuYWNpw7NuIGRlIGVsZW1lbnRvcyBkZSBjYW5hbCwgZHJhZyAmIGRyb3BcclxuICAgICAgICB2YXIgYWRqdXN0bWVudDtcclxuICAgICAgICB2YXIgZ3JvdXAgPSAkKCcub3JkZW5DYW5hbGVzIHVsLm9yZGVuJykuc29ydGFibGUoe1xyXG4gICAgICAgICAgICBncm91cDogJ29yZGVuJyxcclxuICAgICAgICAgICAgcHVsbFBsYWNlaG9sZGVyOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBhbmltYXRpb24gb24gZHJvcFxyXG4gICAgICAgICAgICBvbkRyb3A6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBncm91cC5zb3J0YWJsZShcInNlcmlhbGl6ZVwiKS5nZXQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBqc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgJyAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJGNsb25lZEl0ZW0gPSAkKCc8bGkvPicpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRpdGVtLmJlZm9yZSgkY2xvbmVkSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAkY2xvbmVkSXRlbS5kZXRhY2goKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc3VwZXIoJGl0ZW0sIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgJGl0ZW0gcmVsYXRpdmUgdG8gY3Vyc29yIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAkaXRlbS5vZmZzZXQoKSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyID0gY29udGFpbmVyLnJvb3RHcm91cC5wb2ludGVyO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRlbmVtb3MgZW4gY3VlbnRhIGxhIHBvc2ljacOzbiBkZWwgbmFub1Njcm9sbGVyIGVuIGVzZSBtb21lbnRvXHJcbiAgICAgICAgICAgICAgICB2YXIgcG9zSW5pU2Nyb2xsZXIgPSAkKCcub3JkZW5DYW5hbGVzIC5uYW5vIC5uYW5vLWNvbnRlbnQnKS5nZXQoMCkuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgcG9zSW5pU2Nyb2xsZXIgPSBNYXRoLmZsb29yKHBvc0luaVNjcm9sbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBhZGp1c3RtZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBvaW50ZXIubGVmdCAtIG9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogcG9pbnRlci50b3AgLSBvZmZzZXQudG9wIC0gcG9zSW5pU2Nyb2xsZXJcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgX3N1cGVyKCRpdGVtLCBjb250YWluZXIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkRyYWc6IGZ1bmN0aW9uKCRpdGVtLCBwb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0uY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0IC0gYWRqdXN0bWVudC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogcG9zaXRpb24udG9wIC0gYWRqdXN0bWVudC50b3BcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIENsaWNrIGVuIGNoZWNrcyBlbiBlbCBwYW5lbCBkZSBzdXNjcml0b3NcclxuICAgICAgICAkb3JkZW5DYW5hbGVzLm9uKCdjbGljaycsICcuY2hlY2snLCBjbGlja0NoZWNrT3JkZW5DYW5hbCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZ1bmNpb25hbGlkYWQgZGUgY2xpY2thciBlbiB1biBpdGVtQ2FuYWwgZGUgbGEgbGlzdGEgZGUgY2FuYWxlcyBkZSBzdXNjcmlwY2nDs25cclxuICAgICAgICAgKiBAcGFyYW0gIHtbZXZlbnRdfSBldmVudCBFdmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tJdGVtQ2FuYWwoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkY2hlY2sgPSAkKHRoaXMpLmZpbmQoJy5jaGVjaycpO1xyXG4gICAgICAgICAgICB2YXIgYm9vbCA9ICRjaGVjay5oYXNDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgIHZhciBpZGNhbmFsID0gJCh0aGlzKS5kYXRhKCdpZGNhbmFsJyk7XHJcbiAgICAgICAgICAgIHZhciAkaXRlbXNDYW5hbCA9ICRvcmRlbkNhbmFsZXMuZmluZCgnLml0ZW1DYW5hbCcpLmZpbHRlcihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgnaWRjYW5hbCcpID09PSBpZGNhbmFsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghYm9vbCkgeyAvLyBzaSBudWVzdHJvIGVsZW1lbnRvIG5vIGVzdMOhIHNlbGVjY2lvbmFkb1xyXG5cclxuICAgICAgICAgICAgICAgICRjaGVjay50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJGl0ZW1zQ2FuYWwubGVuZ3RoKSB7IC8vIHNpIHlhIGV4aXN0ZSBlc3RlIGNhbmFsIGVuIGVsIHBhbmVsIGRlIG9yZGVuXHJcbiAgICAgICAgICAgICAgICAgICAgJGl0ZW1zQ2FuYWwuZmluZCgnLmNoZWNrJykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gc2kgbm8gZXhpc3RlIGVzdGUgY2FuYWwgZW4gZWwgcGFuZWwgZGUgb3JkZW5cclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb25lKCkuYXBwZW5kVG8oJG9yZGVuQ2FuYWxlcy5maW5kKCd1bCcpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIHNpIG51ZXN0cm8gZWxlbWVudG8gZXN0w6Egc2VsZWNjaW9uYWRvXHJcbiAgICAgICAgICAgICAgICAkY2hlY2sudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgJGl0ZW1zQ2FuYWwuZmluZCgnLmNoZWNrJykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkb3JkZW5DYW5hbGVzXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKS5uYW5vU2Nyb2xsZXIoKS5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogJ2JvdHRvbSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZ1bmNpb25hbGlkYWQgcGFyYSByZW9yZGVuYXIgbG9zIGVsZW1lbnRvcyBpdGVtQ2FuYWwgZW4gZWwgcGFuZWwgZGUgb3JkZW5cclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgRXZlbnRvIGNvbXBsZXRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrT3JkZW5DYW5hbChldmVudCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpY2sgZW4gaXRlbUNhbmFsJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBkZSBjbGlja2FyIGVsIGNoZWNrYm94IGVuIGxvcyBpdGVtc0NhbmFsIGRlbCBwYW5lbCBkZSBvcmRlblxyXG4gICAgICAgICAqIEBwYXJhbSAge1tldmVudF19IGV2ZW50IEV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja0NoZWNrT3JkZW5DYW5hbChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgdmFyIGlkY2FuYWwgPSAkKHRoaXMpLnBhcmVudCgnLml0ZW1DYW5hbCcpLmRhdGEoJ2lkY2FuYWwnKTtcclxuICAgICAgICAgICAgdmFyICRpdGVtc0NhbmFsID0gJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtQ2FuYWwnKS5maWx0ZXIoZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmRhdGEoJ2lkY2FuYWwnKSA9PT0gaWRjYW5hbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgJGl0ZW1zQ2FuYWwuZmluZCgnLmNoZWNrJykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKiogSU5JVCAqKi9cclxuICAgIChmdW5jdGlvbiBpbml0KCkge1xyXG5cclxuICAgICAgICAvL2NvbnNvbGUudGltZSgnSW5pdCcpO1xyXG5cclxuICAgICAgICB2YXIgY2FyZ2FJbmZvQ29va2llcyA9IGNhcmdhQ29va2llcygpO1xyXG4gICAgICAgIHZhciBjYXJnYUluZm9DYW5hbGVzID0gY2FyZ2FJbmZvQ29va2llcy50aGVuKGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAgICAgICAgICAgY2FuYWxlc1VzdWFyaW8gPSByZXM7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FyZ2FEYXRvc0NhbmFsZXMoY2FuYWxlc1VzdWFyaW8pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHBpbnRhQ2FuYWxlcyhjYW5hbGVzVXN1YXJpbyk7IC8vIFBpbnRhciBlbiBlbCBvcmRlbiBlbiBxdWUgbGxlZ2FuIGRlIGxhIGNvb2tpZVxyXG4gICAgICAgICAgICAgICAgcGludGFQYXJyaWxsYShjYW5hbGVzVXN1YXJpbywgYXJyYXlDYW5hbGVzKTsgLy8gUGludGFyIGVuIGVsIG9yZGVuIGVuIHF1ZSBsbGVnYW4gZGUgbGEgY29va2llXHJcbiAgICAgICAgICAgICAgICBwaW50YUhvcmFzUGFycmlsbGEoKTsgLy8gUGludGFyIGxhIGJhcnJhIHN1cGVyaW9yIGRlIGhvcmFyaW9cclxuICAgICAgICAgICAgICAgIHBpbnRhSG9yYUFjdHVhbCgpOyAvLyBQb3NpY2lvbmEgZWwgbWFyY2Fkb3IgZGUgaG9yYSBhY3R1YWwgZW4gbGEgcGFycmlsbGFcclxuICAgICAgICAgICAgICAgIHBpbnRhU2VsZWN0b3JEaWFzKCk7IC8vIFBpbnRhbW9zIGxvcyBsaXRlcmFsZXMgZGUgbG9zIGTDrWFzIGNvbnRlbXBsYWRvcyBlbiBwYXJyaWxsYVxyXG4gICAgICAgICAgICAgICAgc2l0dWFQYXJyaWxsYUFob3JhKCk7IC8vIFBvc2ljaW9uYSBsYSBwYXJyaWxsYSB5IGVsZW1lbnRvcyBlbiBsYSBmZWNoYSB5IGhvcmEgYWN0dWFsXHJcblxyXG4gICAgICAgICAgICAgICAgbGFuemFIYW5kbGVycygpOyAvLyBMYW56YSB0b2RvcyBsb3MgZXZlbnQgbGlzdGVuZXJzXHJcblxyXG4gICAgICAgICAgICAgICAgcGludGFMaXN0YWRvQ2FuYWxlc1N1c2NyaXBjaW9uKCk7IC8vIFBpbnRhbW9zIGVsIHNlbGVjdG9yIGRlIGNhbmFsZXMgY29tcGxldG8gYWwgcGllXHJcbiAgICAgICAgICAgICAgICBwaW50YUxpc3RhZG9DYW5hbGVzU2VsZWNjaW9uYWRvcygpOyAvLyBQaW50YW1vcyBlbCDDoXJlYSBkZSBjYW5hbGVzIHNlbGVjY2lvbmFkb3NcclxuXHJcbiAgICAgICAgICAgICAgICBsYW56YUhhbmRsZXJzU3VzY3JpcGljaW9uKCk7IC8vIExhbnphIHRvZG9zIGxvcyBldmVudHMgbGlzdGVuZXJzIGRlIHN1c2NyaXBjacOzbiBhIGNhbmFsZXNcclxuXHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUudGltZUVuZCgnSW5pdCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9jYXJnYUluZm9Vc3VhcmlvKCk7IC8vIENhcmdhIGxhIGluZm9ybWFjacOzbiBzb2JyZSBwcm9ncmFtYXMgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZSB1biB1c3VhcmlvIHZhbGlkYWRvXHJcbiAgICAgICAgLy9waW50YVByb2dzVXN1YXJpbygpOyAvLyBNb2RpZmljYSBsYXMgY2xhc2VzIGRlIGxvcyBwcm9ncmFtYXMgcXVlIGVsIHVzdWFyaW8gdGVuZ2EgY29tbyBmYXZvcml0b3MgbyBhbGVydGFzXHJcblxyXG4gICAgfSkoKTtcclxuXHJcbiAgICAvKiogSGVscGVyICoqL1xyXG4gICAgJC5mbi5leGlzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG5cclxufSkoanExMTEpO1xyXG5cclxuLyoqXHJcbiAqIENyZWEgdW5hIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWUgIE5vbWJyZSBkZSBsYSBjb29raWVcclxuICogQHBhcmFtICB7b2JqZWN0fSB2YWx1ZSBWYWxvciBkZSBsYSBjb29raWVcclxuICogQHBhcmFtICB7aW50fSBkYXlzICBOw7ptZXJvIGRlIGTDrWFzIGRlIHZpZ2VuY2lhXHJcbiAqIEByZXR1cm4ge31cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNvb2tpZShuYW1lLCB2YWx1ZSwgZGF5cykge1xyXG4gICAgdmFyIGV4cGlyZXM7XHJcblxyXG4gICAgaWYgKGRheXMpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgKGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XHJcbiAgICAgICAgZXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b0dNVFN0cmluZygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBleHBpcmVzID0gXCJcIjtcclxuICAgIH1cclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IGVzY2FwZShuYW1lKSArIFwiPVwiICsgZXNjYXBlKHZhbHVlKSArIGV4cGlyZXMgKyBcIjsgcGF0aD0vXCI7XHJcbn1cclxuLyoqXHJcbiAqIExlZSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSBOb21icmUgZGUgbGEgY29va2llXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICBWYWxvciBkZSBsYSBjb29raWVcclxuICovXHJcbmZ1bmN0aW9uIHJlYWRDb29raWUobmFtZSkge1xyXG4gICAgdmFyIG5hbWVFUSA9IGVzY2FwZShuYW1lKSArIFwiPVwiO1xyXG4gICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBjYVtpXTtcclxuICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT09ICcgJykgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTtcclxuICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWVFUSkgPT09IDApIHJldHVybiB1bmVzY2FwZShjLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoLCBjLmxlbmd0aCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuLyoqXHJcbiAqIEVsaW1pbmEgdW5hIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWUgTm9tYnJlIGRlIGxhIGNvb2tpZVxyXG4gKiBAcmV0dXJuIHt9XHJcbiAqL1xyXG5mdW5jdGlvbiBlcmFzZUNvb2tpZShuYW1lKSB7XHJcbiAgICBjcmVhdGVDb29raWUobmFtZSwgXCJcIiwgLTEpO1xyXG59XHJcblxyXG4vKipcclxuICogRGV2dWVsdmUgdW4gbsO6bWVybyBjb21vIGNhZGVuYSBmb3JtYXRlYWRhIGNvbiBjZXJvcyBhIGxhIGl6ZGFcclxuICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgICAgICAgRWwgbsO6bWVybyBvcmlnaW5hbFxyXG4gKiBAcGFyYW0gIHtpbnRlZ2VyfSB0YXJnZXRMZW5ndGggTsO6bWVybyBkZSBjYXJhY3RlcmVzIHF1ZSBxdWVyZW1vcyBvYnRlbmVyXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICAgIENhZGVuYSBjb21wdWVzdGEgZGUgY2Vyb3MgeSBlbCBuw7ptZXJvIG9yaWdpbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBsZWZ0UGFkKG51bWJlciwgdGFyZ2V0TGVuZ3RoKSB7XHJcbiAgICB2YXIgb3V0cHV0ID0gbnVtYmVyICsgJyc7XHJcbiAgICB3aGlsZSAob3V0cHV0Lmxlbmd0aCA8IHRhcmdldExlbmd0aCkge1xyXG4gICAgICAgIG91dHB1dCA9ICcwJyArIG91dHB1dDtcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm90b3RpcG8gcGFyYSBvYnRlbmVyIG7Dum1lcm9zIG3DoXhpbW8geSBtw61uaW1vIGVuIHVuIGFycmF5XHJcbiAqIEByZXR1cm4ge2ludH0gRGV2dWVsdmUgZWwgbWF4L21pbiBkZSB1biBhcnJheSBkYWRvXHJcbiAqL1xyXG5BcnJheS5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbWF4ID0gdGhpc1swXTtcclxuICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgaWYgKHRoaXNbaV0gPiBtYXgpIG1heCA9IHRoaXNbaV07XHJcbiAgICByZXR1cm4gbWF4O1xyXG59O1xyXG5BcnJheS5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbWluID0gdGhpc1swXTtcclxuICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgaWYgKHRoaXNbaV0gPCBtaW4pIG1pbiA9IHRoaXNbaV07XHJcbiAgICByZXR1cm4gbWluO1xyXG59OyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==