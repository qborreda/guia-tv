function createCookie(t,e,i){var n;if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toGMTString()}else n="";document.cookie=escape(t)+"="+escape(e)+n+"; path=/"}function readCookie(t){for(var e=escape(t)+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return unescape(o.substring(e.length,o.length))}return null}function eraseCookie(t){createCookie(t,"",-1)}function leftPad(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}!function(t,e,i,n){function o(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),n=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+n}function r(e,i,n,o){var r=e.length,s=o?"offset":"position";for(n=n||0;r--;){var a=e[r].el?e[r].el:t(e[r]),l=a[s]();l.left+=parseInt(a.css("margin-left"),10),l.top+=parseInt(a.css("margin-top"),10),i[r]=[l.left-n,l.left+a.outerWidth()+n,l.top-n,l.top+a.outerHeight()+n]}}function s(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function a(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var n,r=t.length,s=[];r--;)n=t[r],s[r]=[r,o(n,e),i&&o(n,i)];return s=s.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function l(e){this.options=t.extend({},p,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=n))}function c(e,i){this.el=e,this.options=t.extend({},u,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var n=this.rootGroup.options.itemPath;this.target=n?this.el.find(n):this.el,this.target.on(h.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var h,u={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},p={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",placeholderClass:"placeholder",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(t,e){t.css(e)},onDragStart:function(e,i){e.css({height:e.height(),width:e.width()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){return i.target.nodeName.match(/^(input|select|textarea)$/i)?void 0:(i.preventDefault(),!0)},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(e,i,n){var o=t.extend({},e.data());return n?[i]:(i[0]&&(o.children=i),delete o.subContainers,delete o.sortable,o)},tolerance:0},f={},d=0,g={left:0,top:0,bottom:0,right:0},h={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},v="subContainers";l.get=function(t){return f[t.group]||(t.group===n&&(t.group=d++),f[t.group]=new l(t)),f[t.group]},l.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,p.onMousedown,e)&&(this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,p.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,s(this.pointer,this.item.offsetParent()),p.onDrag,t);var e=t.pageX||t.originalEvent.pageX,i=t.pageY||t.originalEvent.pageY,o=this.sameResultBox,r=this.options.tolerance;(!o||o.top-r>i||o.bottom+r<i||o.left-r>e||o.right+r<e)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=n))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,p.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),p.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),o=i.length;o--;){var r=i[o][0],l=i[o][1];if(!l||this.options.pullPlaceholder){var c=this.containers[r];if(!c.disabled){if(!this.$getOffsetParent()){var h=c.getItemOffsetParent();t=s(t,h),e=s(e,h)}if(c.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(t,e,i,n){var o=this.lastAppendedItem;(n||!o||o[0]!==e[0])&&(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=n,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||r(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===n){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=s(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){return{left:t.pageX||t.originalEvent.pageX,top:t.pageY||t.originalEvent.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,n=["drag","drop","scroll"];t.each(n,function(t,n){i.$document[e](h[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=n},_destroy:function(){f[this.options.group]=n}},c.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=a(this.getItemDimensions(),t,e),n=i.length,o=this.rootGroup,r=!o.options.isValidTarget||o.options.isValidTarget(o.item,this);if(!n&&r)return o.movePlaceholder(this,this.target,"append"),!0;for(;n--;){var s=i[n][0],l=i[n][1];if(!l&&this.hasChildGroup(s)){var c=this.getContainerGroup(s).searchValidTarget(t,e);if(c)return!0}else if(r)return this.movePlaceholder(s,t),!0}},movePlaceholder:function(e,i){var n=t(this.items[e]),o=this.itemDimensions[e],r="after",s=n.outerWidth(),a=n.outerHeight(),l=n.offset(),c={left:l.left,right:l.left+s,top:l.top,bottom:l.top+a};if(this.options.vertical){var h=(o[2]+o[3])/2,u=i.top<=h;u?(r="before",c.bottom-=a/2):c.top+=a/2}else{var p=(o[0]+o[1])/2,f=i.left<=p;f?(r="before",c.right-=s/2):c.left+=s/2}this.hasChildGroup(e)&&(c=g),this.rootGroup.movePlaceholder(this,n,r,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),r(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var o=t.data(this.items[e],v);if(o===n){var r=this.$getChildren(this.items[e],"container");if(o=!1,r[0]){var s=t.extend({},this.options,{rootGroup:this.rootGroup,group:d++});o=r[i](s).data(i).group}t.data(this.items[e],v,o)}return o},$getChildren:function(e,i){var n=this.rootGroup.options,o=n[i+"Path"],r=n[i+"Selector"];return e=t(e),o&&(e=e.find(o)),e.children(r)},_serialize:function(e,i){var n=this,o=i?"item":"container",r=this.$getChildren(e,o).not(this.options.exclude).map(function(){return n._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,r,i)},traverse:function(e){t.each(this.items||[],function(){var i=t.data(this,v);i&&i.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=n},_destroy:function(){var e=this;this.target.off(h.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,v)})}};var m={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(c.prototype,m),t.fn[i]=function(e){var o=Array.prototype.slice.call(arguments,1);return this.map(function(){var r=t(this),s=r.data(i);return s&&m[e]?m[e].apply(s,o)||this:(s||e!==n&&"object"!=typeof e||r.data(i,new c(r,e)),this)})}}(jq111,window,"sortable"),function(t,e,i){"use strict";var n,o,r,s,a,l,c,h,u,p,f,d,g,v,m,b,w,T,y,x,S,C,M,P,D,k,O,E,I,_,$;M={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},T="scrollbar",w="scroll",u="mousedown",p="mouseenter",f="mousemove",g="mousewheel",d="mouseup",b="resize",a="drag",l="enter",x="up",m="panedown",r="DOMMouseScroll",s="down",S="wheel",c="keydown",h="keyup",y="touchmove",n="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,o=null,O=e.requestAnimationFrame,C=e.cancelAnimationFrame,I=i.createElement("div").style,$=function(){var t,e,i,n,o,r;for(n=["t","webkitT","MozT","msT","OT"],t=o=0,r=n.length;r>o;t=++o)if(i=n[t],e=n[t]+"ransform",e in I)return n[t].substr(0,n[t].length-1);return!1}(),_=function(t){return $===!1?!1:""===$?t:$+t.charAt(0).toUpperCase()+t.substr(1)},E=_("transform"),D=E!==!1,P=function(){var t,e,n;return t=i.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=w,e.top="-9999px",i.body.appendChild(t),n=t.offsetWidth-t.clientWidth,i.body.removeChild(t),n},k=function(){var t,i,n;return i=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),t&&+n>23):!1},v=function(){function c(n,r){this.el=n,this.options=r,o||(o=P()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+r.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===r)(e===s&&t.originalEvent.detail>0||e===x&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===g){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===s&&t.originalEvent.wheelDelta<0||e===x&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;D?(t={},t[E]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},O?(C&&this.scrollRAF&&C(this.scrollRAF),this.scrollRAF=O(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(f,t.events[a]).bind(d,t.events[x]),t.body.bind(p,t.events[l]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(f,t.events[a]).unbind(d,t.events[x]),t.body.unbind(p,t.events[l]),!1}}(this),resize:function(t){return function(){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,s),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,x),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var i;if(null!=e)return i=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,i&&(t.sliderY+=-i/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var i;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(i=t.events)[x].apply(i,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(b,t[b]),this.iOSNativeScrolling||(this.slider.bind(u,t[s]),this.pane.bind(u,t[m]).bind(""+g+" "+r,t[S])),this.$content.bind(""+w+" "+g+" "+r+" "+y,t[w])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(b,t[b]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+w+" "+g+" "+r+" "+y,t[w])},c.prototype.generate=function(){var t,i,n,r,s,a,l;return r=this.options,a=r.paneClass,l=r.sliderClass,t=r.contentClass,(s=this.$el.children("."+a)).length||s.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===o&&k()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+n+14}):o&&(i={right:-o},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,i,r,s,a,l,c,h,u,p,f;return this.iOSNativeScrolling?(this.contentHeight=this.content.scrollHeight,void 0):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,r=t.style,s=r.overflowY,n&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+o,u=parseInt(this.$el.css("max-height"),10),u>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>u?u:t.scrollHeight)),l=this.pane.outerHeight(!1),h=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+h+a,f=Math.round(c/e*c),f<this.options.sliderMinHeight?f=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&f>this.options.sliderMaxHeight&&(f=this.options.sliderMaxHeight),s===w&&r.overflowX!==w&&(f+=o),this.maxSliderTop=c-f,this.contentHeight=e,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=f,this.paneTop=h,this.slider.height(f),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&s!==w?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&s===w?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),("static"===i||"relative"===i)&&(p=parseInt(this.$content.css("right"),10),p&&this.$content.css({right:"",marginRight:p})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return C&&this.scrollRAF&&(C(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=t.extend({},M,e),this.nanoscroller=n=new v(this,i)),e&&"object"==typeof e){if(t.extend(n.options,e),null!=e.scrollBottom)return n.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return n.scrollTop(e.scrollTop);if(e.scrollTo)return n.scrollTo(e.scrollTo);if("bottom"===e.scroll)return n.scrollBottom(0);if("top"===e.scroll)return n.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return n.scrollTo(e.scroll);if(e.stop)return n.stop();if(e.destroy)return n.destroy();if(e.flash)return n.flash()}return n.reset()})},t.fn.nanoScroller.Constructor=v}(jq111,window,document),function(t){"function"==typeof define&&define.amd&&define.amd.jq111?define(["jquery"],t):t(jq111)}(function(t){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=c),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each(function(){var n=t(this),o=n.data(D);o||(o=new i(this,e),n.data(D,o))})}function i(e,i){function k(e){if(!(ce()||t(e.target).closest(i.excludedElements,Fe).length>0)){var n,o=e.originalEvent?e.originalEvent:e,r=C?o.touches[0]:o;return Xe=T,C?Be=o.touches.length:e.preventDefault(),Ae=0,Le=null,Ge=null,Re=0,Ye=0,ze=0,Ne=1,Ve=0,Ue=de(),je=me(),ae(),!C||Be===i.fingers||i.fingers===b||j()?(ue(0,r),qe=Pe(),2==Be&&(ue(1,o.touches[1]),Ye=ze=Te(Ue[0].start,Ue[1].start)),(i.swipeStatus||i.pinchStatus)&&(n=A(o,Xe))):n=!1,n===!1?(Xe=S,A(o,Xe),n):(i.hold&&(ti=setTimeout(t.proxy(function(){Fe.trigger("hold",[o.target]),i.hold&&(n=i.hold.call(Fe,o,o.target))},this),i.longTapThreshold)),he(!0),null)}}function O(t){var e=t.originalEvent?t.originalEvent:t;if(Xe!==x&&Xe!==S&&!le()){var n,o=C?e.touches[0]:e,r=pe(o);if(We=Pe(),C&&(Be=e.touches.length),i.hold&&clearTimeout(ti),Xe=y,2==Be&&(0==Ye?(ue(1,e.touches[1]),Ye=ze=Te(Ue[0].start,Ue[1].start)):(pe(e.touches[1]),ze=Te(Ue[0].end,Ue[1].end),Ge=xe(Ue[0].end,Ue[1].end)),Ne=ye(Ye,ze),Ve=Math.abs(Ye-ze)),Be===i.fingers||i.fingers===b||!C||j()){if(Le=Me(r.start,r.end),V(t,Le),Ae=Se(r.start,r.end),Re=we(),ge(Le,Ae),(i.swipeStatus||i.pinchStatus)&&(n=A(e,Xe)),!i.triggerOnTouchEnd||i.triggerOnTouchLeave){var s=!0;if(i.triggerOnTouchLeave){var a=De(this);s=ke(r.end,a)}!i.triggerOnTouchEnd&&s?Xe=H(y):i.triggerOnTouchLeave&&!s&&(Xe=H(x)),(Xe==S||Xe==x)&&A(e,Xe)}}else Xe=S,A(e,Xe);n===!1&&(Xe=S,A(e,Xe))}}function E(t){var e=t.originalEvent;return C&&e.touches.length>0?(se(),!0):(le()&&(Be=Je),We=Pe(),Re=we(),Y()||!R()?(Xe=S,A(e,Xe)):i.triggerOnTouchEnd||0==i.triggerOnTouchEnd&&Xe===y?(t.preventDefault(),Xe=x,A(e,Xe)):!i.triggerOnTouchEnd&&Q()?(Xe=x,L(e,Xe,f)):Xe===y&&(Xe=S,A(e,Xe)),he(!1),null)}function I(){Be=0,We=0,qe=0,Ye=0,ze=0,Ne=1,ae(),he(!1)}function _(t){var e=t.originalEvent;i.triggerOnTouchLeave&&(Xe=H(x),A(e,Xe))}function $(){Fe.unbind(Ee,k),Fe.unbind(He,I),Fe.unbind(Ie,O),Fe.unbind(_e,E),$e&&Fe.unbind($e,_),he(!1)}function H(t){var e=t,n=N(),o=R(),r=Y();return!n||r?e=S:!o||t!=y||i.triggerOnTouchEnd&&!i.triggerOnTouchLeave?!o&&t==x&&i.triggerOnTouchLeave&&(e=S):e=x,e}function A(t,e){var i=void 0;return U()||B()?i=L(t,e,u):(F()||j())&&i!==!1&&(i=L(t,e,p)),oe()&&i!==!1?i=L(t,e,d):re()&&i!==!1?i=L(t,e,g):ne()&&i!==!1&&(i=L(t,e,f)),e===S&&I(t),e===x&&(C?0==t.touches.length&&I(t):I(t)),i}function L(e,c,h){var v=void 0;if(h==u){if(Fe.trigger("swipeStatus",[c,Le||null,Ae||0,Re||0,Be,Ue]),i.swipeStatus&&(v=i.swipeStatus.call(Fe,e,c,Le||null,Ae||0,Re||0,Be,Ue),v===!1))return!1;if(c==x&&X()){if(Fe.trigger("swipe",[Le,Ae,Re,Be,Ue]),i.swipe&&(v=i.swipe.call(Fe,e,Le,Ae,Re,Be,Ue),v===!1))return!1;switch(Le){case n:Fe.trigger("swipeLeft",[Le,Ae,Re,Be,Ue]),i.swipeLeft&&(v=i.swipeLeft.call(Fe,e,Le,Ae,Re,Be,Ue));break;case o:Fe.trigger("swipeRight",[Le,Ae,Re,Be,Ue]),i.swipeRight&&(v=i.swipeRight.call(Fe,e,Le,Ae,Re,Be,Ue));break;case r:Fe.trigger("swipeUp",[Le,Ae,Re,Be,Ue]),i.swipeUp&&(v=i.swipeUp.call(Fe,e,Le,Ae,Re,Be,Ue));break;case s:Fe.trigger("swipeDown",[Le,Ae,Re,Be,Ue]),i.swipeDown&&(v=i.swipeDown.call(Fe,e,Le,Ae,Re,Be,Ue))}}}if(h==p){if(Fe.trigger("pinchStatus",[c,Ge||null,Ve||0,Re||0,Be,Ne,Ue]),i.pinchStatus&&(v=i.pinchStatus.call(Fe,e,c,Ge||null,Ve||0,Re||0,Be,Ne,Ue),v===!1))return!1;if(c==x&&G())switch(Ge){case a:Fe.trigger("pinchIn",[Ge||null,Ve||0,Re||0,Be,Ne,Ue]),i.pinchIn&&(v=i.pinchIn.call(Fe,e,Ge||null,Ve||0,Re||0,Be,Ne,Ue));break;case l:Fe.trigger("pinchOut",[Ge||null,Ve||0,Re||0,Be,Ne,Ue]),i.pinchOut&&(v=i.pinchOut.call(Fe,e,Ge||null,Ve||0,Re||0,Be,Ne,Ue))}}return h==f?(c===S||c===x)&&(clearTimeout(Ke),clearTimeout(ti),J()&&!te()?(Ze=Pe(),Ke=setTimeout(t.proxy(function(){Ze=null,Fe.trigger("tap",[e.target]),i.tap&&(v=i.tap.call(Fe,e,e.target))},this),i.doubleTapThreshold)):(Ze=null,Fe.trigger("tap",[e.target]),i.tap&&(v=i.tap.call(Fe,e,e.target)))):h==d?(c===S||c===x)&&(clearTimeout(Ke),Ze=null,Fe.trigger("doubletap",[e.target]),i.doubleTap&&(v=i.doubleTap.call(Fe,e,e.target))):h==g&&(c===S||c===x)&&(clearTimeout(Ke),Ze=null,Fe.trigger("longtap",[e.target]),i.longTap&&(v=i.longTap.call(Fe,e,e.target))),v}function R(){var t=!0;return null!==i.threshold&&(t=Ae>=i.threshold),t}function Y(){var t=!1;return null!==i.cancelThreshold&&null!==Le&&(t=ve(Le)-Ae>=i.cancelThreshold),t}function z(){return null!==i.pinchThreshold?Ve>=i.pinchThreshold:!0}function N(){var t;return t=i.maxTimeThreshold?Re>=i.maxTimeThreshold?!1:!0:!0}function V(t,e){if(i.allowPageScroll===c||j())t.preventDefault();else{var a=i.allowPageScroll===h;switch(e){case n:(i.swipeLeft&&a||!a&&i.allowPageScroll!=v)&&t.preventDefault();break;case o:(i.swipeRight&&a||!a&&i.allowPageScroll!=v)&&t.preventDefault();break;case r:(i.swipeUp&&a||!a&&i.allowPageScroll!=m)&&t.preventDefault();break;case s:(i.swipeDown&&a||!a&&i.allowPageScroll!=m)&&t.preventDefault()}}}function G(){var t=q(),e=W(),i=z();return t&&e&&i}function j(){return!!(i.pinchStatus||i.pinchIn||i.pinchOut)}function F(){return!(!G()||!j())}function X(){var t=N(),e=R(),i=q(),n=W(),o=Y(),r=!o&&n&&i&&e&&t;return r}function B(){return!!(i.swipe||i.swipeStatus||i.swipeLeft||i.swipeRight||i.swipeUp||i.swipeDown)}function U(){return!(!X()||!B())}function q(){return Be===i.fingers||i.fingers===b||!C}function W(){return 0!==Ue[0].end.x}function Q(){return!!i.tap}function J(){return!!i.doubleTap}function Z(){return!!i.longTap}function K(){if(null==Ze)return!1;var t=Pe();return J()&&t-Ze<=i.doubleTapThreshold}function te(){return K()}function ee(){return(1===Be||!C)&&(isNaN(Ae)||Ae<i.threshold)}function ie(){return Re>i.longTapThreshold&&w>Ae}function ne(){return!(!ee()||!Q())}function oe(){return!(!K()||!J())}function re(){return!(!ie()||!Z())}function se(){Qe=Pe(),Je=event.touches.length+1}function ae(){Qe=0,Je=0}function le(){var t=!1;if(Qe){var e=Pe()-Qe;e<=i.fingerReleaseThreshold&&(t=!0)}return t}function ce(){return!(Fe.data(D+"_intouch")!==!0)}function he(t){t===!0?(Fe.bind(Ie,O),Fe.bind(_e,E),$e&&Fe.bind($e,_)):(Fe.unbind(Ie,O,!1),Fe.unbind(_e,E,!1),$e&&Fe.unbind($e,_,!1)),Fe.data(D+"_intouch",t===!0)}function ue(t,e){var i=void 0!==e.identifier?e.identifier:0;return Ue[t].identifier=i,Ue[t].start.x=Ue[t].end.x=e.pageX||e.clientX,Ue[t].start.y=Ue[t].end.y=e.pageY||e.clientY,Ue[t]}function pe(t){var e=void 0!==t.identifier?t.identifier:0,i=fe(e);return i.end.x=t.pageX||t.clientX,i.end.y=t.pageY||t.clientY,i}function fe(t){for(var e=0;e<Ue.length;e++)if(Ue[e].identifier==t)return Ue[e]}function de(){for(var t=[],e=0;5>=e;e++)t.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return t}function ge(t,e){e=Math.max(e,ve(t)),je[t].distance=e}function ve(t){return je[t]?je[t].distance:void 0}function me(){var t={};return t[n]=be(n),t[o]=be(o),t[r]=be(r),t[s]=be(s),t}function be(t){return{direction:t,distance:0}}function we(){return We-qe}function Te(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y);return Math.round(Math.sqrt(i*i+n*n))}function ye(t,e){var i=e/t*1;return i.toFixed(2)}function xe(){return 1>Ne?l:a}function Se(t,e){return Math.round(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}function Ce(t,e){var i=t.x-e.x,n=e.y-t.y,o=Math.atan2(n,i),r=Math.round(180*o/Math.PI);return 0>r&&(r=360-Math.abs(r)),r}function Me(t,e){var i=Ce(t,e);return 45>=i&&i>=0?n:360>=i&&i>=315?n:i>=135&&225>=i?o:i>45&&135>i?s:r}function Pe(){var t=new Date;return t.getTime()}function De(e){e=t(e);var i=e.offset(),n={left:i.left,right:i.left+e.outerWidth(),top:i.top,bottom:i.top+e.outerHeight()};return n}function ke(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}var Oe=C||P||!i.fallbackToMouseEvents,Ee=Oe?P?M?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ie=Oe?P?M?"MSPointerMove":"pointermove":"touchmove":"mousemove",_e=Oe?P?M?"MSPointerUp":"pointerup":"touchend":"mouseup",$e=Oe?null:"mouseleave",He=P?M?"MSPointerCancel":"pointercancel":"touchcancel",Ae=0,Le=null,Re=0,Ye=0,ze=0,Ne=1,Ve=0,Ge=0,je=null,Fe=t(e),Xe="start",Be=0,Ue=null,qe=0,We=0,Qe=0,Je=0,Ze=0,Ke=null,ti=null;try{Fe.bind(Ee,k),Fe.bind(He,I)}catch(ei){t.error("events not supported "+Ee+","+He+" on jQuery.swipe")}this.enable=function(){return Fe.bind(Ee,k),Fe.bind(He,I),Fe},this.disable=function(){return $(),Fe},this.destroy=function(){return $(),Fe.data(D,null),Fe},this.option=function(e,n){if(void 0!==i[e]){if(void 0===n)return i[e];i[e]=n}else t.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}var n="left",o="right",r="up",s="down",a="in",l="out",c="none",h="auto",u="swipe",p="pinch",f="tap",d="doubletap",g="longtap",v="horizontal",m="vertical",b="all",w=10,T="start",y="move",x="end",S="cancel",C="ontouchstart"in window,M=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,P=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,D="TouchSwipe",k={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};t.fn.swipe=function(i){var n=t(this),o=n.data(D);if(o&&"string"==typeof i){if(o[i])return o[i].apply(this,Array.prototype.slice.call(arguments,1));t.error("Method "+i+" does not exist on jQuery.swipe")}else if(!(o||"object"!=typeof i&&i))return e.apply(this,arguments);return n},t.fn.swipe.defaults=k,t.fn.swipe.phases={PHASE_START:T,PHASE_MOVE:y,PHASE_END:x,PHASE_CANCEL:S},t.fn.swipe.directions={LEFT:n,RIGHT:o,UP:r,DOWN:s,IN:a,OUT:l},t.fn.swipe.pageScroll={NONE:c,HORIZONTAL:v,VERTICAL:m,AUTO:h},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:b}});var Mark={includes:{},globals:{},delimiter:">",compact:!1,_copy:function(t,e){e=e||[];for(var i in t)e[i]=t[i];return e},_size:function(t){return t instanceof Array?t.length:t||0},_iter:function(t,e){this.idx=t,this.size=e,this.length=e,this.sign="#",this.toString=function(){return this.idx+this.sign.length-1}},_pipe:function(t,e){var i,n,o,r;if(i=e.shift()){n=i.split(this.delimiter),o=n.shift().trim();try{r=Mark.pipes[o].apply(null,[t].concat(n)),t=this._pipe(r,e)}catch(s){}}return t},_eval:function(t,e,i){var n,o,r=this._pipe(t,e),s=r,a=-1;if(r instanceof Array)for(r="",n=s.length;++a<n;)o={iter:new this._iter(a,n)},r+=i?Mark.up(i,s[a],o):s[a];else r instanceof Object&&(r=Mark.up(i,s));return r},_test:function(t,e,i,n){var o=Mark.up(e,i,n).split(/\{\{\s*else\s*\}\}/);return(t===!1?o[1]:o[0])||""},_bridge:function(t,e){"."==e&&(e="\\.");var i,n,o="{{\\s*"+e+"([^/}]+\\w*)?}}|{{/"+e+"\\s*}}",r=new RegExp(o,"g"),s=t.match(r)||[],a=0,l=0,c=-1,h=0;for(n=0;n<s.length&&(i=n,c=t.indexOf(s[i],c+1),s[i].indexOf("{{/")>-1?l++:a++,a!==l);n++);return a=t.indexOf(s[0]),l=a+s[0].length,h=c+s[i].length,[t.substring(a,h),t.substring(l,c)]}};Mark.up=function(t,e,i){e=e||{},i=i||{};var n,o,r,s,a,l,c,h,u,p,f=/\{\{(.+?)\}\}/g,d=t.match(f)||[],g=[],v=0,m=0;for(i.pipes&&this._copy(i.pipes,this.pipes),i.includes&&this._copy(i.includes,this.includes),i.globals&&this._copy(i.globals,this.globals),i.delimiter&&(this.delimiter=i.delimiter),void 0!==i.compact&&(this.compact=i.compact);n=d[v++];)if(c=void 0,l="",s=n.indexOf("/}}")>-1,o=n.substr(2,n.length-(s?5:4)),o=o.replace(/`(.+?)`/g,function(t,i){return Mark.up("{{"+i+"}}",e)}),a=0===o.trim().indexOf("if "),g=o.split("|"),g.shift(),o=o.replace(/^\s*if/,"").split("|").shift().trim(),r=a?"if":o.split("|")[0],p=e[o],a&&!g.length&&(g=["notempty"]),!s&&t.indexOf("{{/"+r)>-1&&(c=this._bridge(t,r),n=c[0],l=c[1],v+=n.match(f).length-1),!/^\{\{\s*else\s*\}\}$/.test(n)){if(void 0!==(h=this.globals[o]))c=this._eval(h,g,l);
else if(u=this.includes[o])u instanceof Function&&(u=u()),c=this._pipe(Mark.up(u,e,i),g);else if(o.indexOf("#")>-1)i.iter.sign=o,c=this._pipe(i.iter,g);else if("."===o)c=this._pipe(e,g);else if(o.indexOf(".")>-1){for(o=o.split("."),p=Mark.globals[o[0]],p?m=1:(m=0,p=e);p&&m<o.length;)p=p[o[m++]];c=this._eval(p,g,l)}else a?c=this._pipe(p,g):p instanceof Array?c=this._eval(p,g,l):l?c=p?Mark.up(l,p):void 0:e.hasOwnProperty(o)&&(c=this._pipe(p,g));c instanceof Array&&(c=this._eval(c,g,l)),a&&(c=this._test(c,l,e,i)),t=t.replace(n,void 0===c?"???":c)}return this.compact?t.replace(/>\s+</g,"><"):t},Mark.pipes={empty:function(t){return t&&0!==(t+"").trim().length?!1:t},notempty:function(t){return t&&(t+"").trim().length?t:!1},blank:function(t,e){return t||0===t?t:e},more:function(t,e){return Mark._size(t)>e?t:!1},less:function(t,e){return Mark._size(t)<e?t:!1},ormore:function(t,e){return Mark._size(t)>=e?t:!1},orless:function(t,e){return Mark._size(t)<=e?t:!1},between:function(t,e,i){return t=Mark._size(t),t>=e&&i>=t?t:!1},equals:function(t,e){return t==e?t:!1},notequals:function(t,e){return t!=e?t:!1},like:function(t,e){return new RegExp(e,"i").test(t)?t:!1},notlike:function(t,e){return Mark.pipes.like(t,e)?!1:t},upcase:function(t){return String(t).toUpperCase()},downcase:function(t){return String(t).toLowerCase()},capcase:function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},chop:function(t,e){return t.length>e?t.substr(0,e)+"...":t},tease:function(t,e){var i=t.split(/\s+/);return i.slice(0,e).join(" ")+(i.length>e?"...":"")},trim:function(t){return t.trim()},pack:function(t){return t.trim().replace(/\s{2,}/g," ")},round:function(t){return Math.round(+t)},clean:function(t){return String(t).replace(/<\/?[^>]+>/gi,"")},size:function(t){return t.length},length:function(t){return t.length},reverse:function(t){return[].concat(t).reverse()},join:function(t,e){return t.join(e)},limit:function(t,e,i){return t.slice(+i||0,+e+(+i||0))},split:function(t,e){return t.split(e||",")},choose:function(t,e,i){return t?e:i||""},toggle:function(t,e,i,n){return i.split(",")[e.match(/\w+/g).indexOf(t+"")]||n},sort:function(t,e){var i=function(t,i){return t[e]>i[e]?1:-1};return[].concat(t).sort(e?i:void 0)},fix:function(t,e){return(+t).toFixed(e)},mod:function(t,e){return+t%+e},divisible:function(t,e){return t&&+t%e===0?t:!1},even:function(t){return t&&0===(1&+t)?t:!1},odd:function(t){return t&&1===(1&+t)?t:!1},number:function(t){return parseFloat(t.replace(/[^\-\d\.]/g,""))},url:function(t){return encodeURI(t)},bool:function(t){return!!t},falsy:function(t){return!t},first:function(t){return 0===t.idx},last:function(t){return t.idx===t.size-1},call:function(t,e){return t[e].apply(t,[].slice.call(arguments,2))},set:function(t,e){return Mark.globals[e]=t,""},log:function(t){return console.log(t),t}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof module&&module.exports?module.exports=Mark:"function"==typeof define&&define.amd&&define(function(){return Mark});var guiaTV=function(t){"use strict";function e(){var e,i=t.Deferred();return setTimeout(function(){e=["telecinco","antena3","la2","la1","cuatro","lasexta","historia"],v=[1,2,3,4,5,6,7],i.resolve(e)},3e3),i.promise()}function i(e){{var i=[],n=[];e.length}return t.when.apply(null,t.map(e,function(e,o){var r="datos/"+e+".json";n.push(t.get(r).done(function(t){m[o]=i[o]=t}).fail(function(){m[o]=i[o]=""}))})),t.when.apply(null,n).promise()}function n(e,i){var n=e||d,r=i||m,s={},a='<div id="{{idcanal}}" class="lineaCanal clearfix"></div>';t.each(n,function(t,e){s.idcanal=e;var i=Mark.up(a,s);k.append(i)}),t.each(r,function(e,i){var n=i.canal.nombre,r=t("#"+n);t.each(i.programas,function(t,e){var i=o(t,e);r.append(i)})})}function o(t,e){var i,n,o={},r='<div class="itemPrograma" id="{{id_programa}}" data-url="{{url_ficha}}"style="width:{{dur}}; left:{{diffHoraDia}}; user-selected:none;"><div class="itemProgramaInner {{clase}}"><a href="http://elmundo.es/television/programa/{{id_programa}}" style="display:none;">{{nombre}}</a><span class="categoria">{{categoria}}</span><h4>{{nombre}}</h4>{{if episodio}}<p>{{episodio}}</p>{{/if}}<span class="duracion">{{duracion}}</span><span class="fecha">{{infoHoraDuracion}}</span>{{if fav}}<span class="favorito"><i class="fa fa-star"></i></span>{{/if}}{{if ale}}<span class="alerta"><i class="fa fa-clock-o"></i></span>{{/if}}</div>{{if saleCruz}}<div class="mascara"><i class="fa fa-plus"></i></div>{{/if}}</div>',s=e.categoria;switch(s){case"1":n="catSeries",i="series";break;case"104":n="catCine",i="cine";break;case"31":n="catMagazines",i="magazines";break;case"20":n="catInformativos",i="informativos";break;case"90":n="catDeportes",i="deportes";break;case"INT_2":n="catConcursos",i="concursos";break;case"INT_1":n="catCorazon",i="corazón"}var a=e.duracion+" mins.",l=Math.ceil(x*e.duracion),c=new Date(e.hora_inicio),h=new Date(e.hora_fin),u=c-S;u=Math.floor(Math.floor(u/1e3)/60*x);var p=c.getHours();p=leftPad(p,2);var f=c.getMinutes();f=leftPad(f,2);var d=h.getHours();d=leftPad(d,2);var g=h.getMinutes();g=leftPad(g,2);var v=""+p+":"+f+" - "+d+":"+g;if(100*Math.random()<5)var m=!0;if(100*Math.random()<5)var b=!0;if(e.duracion<15)var w=!0;o={clase:n,dur:l+"px",diffHoraDia:u+"px",id_programa:e.id_programa,url_ficha:e.url_ficha,infoHoraDuracion:v,duracion:a,categoria:i.toUpperCase(),nombre:e.nombre,episodio:e.episodio,fav:void 0|m,ale:void 0|b,saleCruz:void 0|w};var T=Mark.up(r,o);return T}function r(e){var i=e||d,n={},o='<div class="itemCanal"><img src="http://estaticos.elmundo.es{{icono}}" /></div>';t.each(i,function(t){n.icono=m[t].canal.icono;var e=Mark.up(o,n);O.append(e)})}function s(){var t,e,i=new Date,n={};n.dias=[],n.horas=[];var o='{{dias}}<div class="itemDia" style="left:{{pos}}px">{{dia}}</div>{{/dias}}{{horas}}<div class="itemHoras" style="left:{{pos}}px;">{{texto}}</div>{{/horas}}';for(e=0;3>=e;e++){i.setTime(S.getTime()+864e5*e);var r=i.toLocaleDateString("es-ES",{weekday:"long",month:"long",day:"numeric"}),s=e*y*24;for(n.dias.push({dia:r,pos:s}),b.push([r,s]),t=0;24>t;t++){var a=leftPad(t,2)+":00",l=e*y*24+t*y;n.horas.push({texto:a,pos:l})}}var c=Mark.up(o,n);E.append(c)}function a(){var t={},e='<li class="itemDia" data-px="{{px}}"><a href="javascript://">{{diaText}}</a></li>';b.forEach(function(i){var n=i[0],o=i[1];t={diaText:n,px:o};var r=Mark.up(e,t);D.find("ul").append(r)})}function l(){var e=C.h,i=C.m,n=t(".horaActual").hide().find("p").text(e+":"+i).end().show(),o=parseInt(e)*y+parseInt(i)*x;n.css({left:o})}function c(){var t=.5*M.width(),e=parseInt(_.css("left"));e=parseInt(t-e),k.stop().animate({left:e+"px"},300),E.stop().animate({left:e+"px"},300);var i=parseInt(C.h)*y,n=parseInt(C.m)*x,o=i+n+e;_.stop().animate({left:o+"px"},300)}function h(){function e(t){t.preventDefault(),this.startTop=this.offsetTop,this.startLeft=this.offsetLeft,this.initialMouseX=t.clientX,this.initialMouseY=t.clientY,b=!0,S=!1,k.on("mouseup touchend",i),k.on("mousemove touchmove",n)}function i(){b&&(b=!1,k.off("mouseup touchend",i),k.off("mousemove touchmove",n))}function n(e){if(b){var i=e.clientX-this.initialMouseX,n=e.clientY-this.initialMouseY;S=Math.abs(i)>2||Math.abs(n)>2;var o=this.startTop+n,r=this.startLeft+i;o>w&&(o=w),f-g>o&&(o=f-g),r>m+Math.abs(L)+50&&(r=m+Math.abs(L)+50),r<d-50-Math.abs(N)&&(r=d-50-Math.abs(N)),t(this).css({top:o+"px",left:r+"px"}),O.css({top:o+"px"}),E.css({left:r+"px"});var s=parseInt(C.h)*y,a=parseInt(C.m)*x,l=s+a+r;_.css({left:l+"px"})}}function o(){var e=parseInt(t(this).css("left"));e=parseInt(.5*d-e),h(e)}function r(){var e=-1*parseInt(t(this).data("px"));h(e+m)}function s(e){if(!S){b=!1;var i=document.elementFromPoint(e.clientX,e.clientY),n=t(i).is(".itemPrograma")?t(i):t(i).closest(".itemPrograma"),o=n.find("a").attr("href"),r=n.attr("id");a(r,o);var s=parseInt(n.css("left"))+.5*n.width();s=parseInt(.5*d-s),h(s)}}function a(e){function i(){0===parseInt($.css("right"))&&$.stop().animate({right:-y},300,"swing")}i(),t.ajax({url:"fichaPrograma.html",data:{progId:e},dataType:"html",cache:!1}).done(function(t){$.find(".contenido").html(t),$.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0}),$.animate({right:0},500,"swing",function(){$.find(".cierra").on("click",function(t){t.preventDefault(),i()})})})}function l(e){var i=t(e.currentTarget).attr("class").split(" ")[0];k.hasClass(i)?(k.removeClass(i),t(this).removeClass("activo")):(k.addClass(i),t(this).addClass("activo"))}function c(){v.length>=1&&t.each(v,function(t,e){e++,P.find("li:nth-child("+e+")").trigger("click")})}function h(t){var e=t||0;k.stop().animate({left:e+"px"},300),E.stop().animate({left:e+"px"},300);var i=parseInt(C.h)*y,n=parseInt(C.m)*x,o=i+n+e;_.stop().animate({left:o+"px"},300)}function u(e){var i=t(e.currentTarget).attr("class").split(" ")[1],n=k.css("top").split("px")[0],o=O.css("top").split("px")[0],r=O.length;switch(i){case"btnArriba":o-T>w?(O.css("top",o-T),k.css("top",n-T)):(O.css("top",w+"px"),k.css("top",w+"px"));break;case"btnAbajo":var s=o-r*T;s>o+T?(O.css("top",o+T),k.css("top",n+T)):(O.css("top",s+"px"),k.css("top",s+"px"))}}function p(e){var i=t(e.currentTarget).attr("class").split(" ")[1],n=parseInt(k.css("left"));switch(e.stopPropagation(),console.log(n),i){case"btnIzda":h(Math.floor(parseInt(n+y)));break;case"btnDrcha":h(Math.floor(parseInt(n-y)))}}var f=M.height(),d=M.width(),g=k.height(),m=(k.offsetWidth,O.width()),b=!1,S=!1,H=t(".contProgramas > div > div:first-child"),A=[];t.each(H,function(){A.push(this.offsetLeft)});var L=A.min(),Y=t(".contProgramas > div > div:last-child"),z=[];t.each(Y,function(){z.push(this.offsetLeft+t(this).width())});var N=z.max();M.find(".preload-wrapper").remove(),k.on("mousedown touchstart",e),k.on("click",s),E.on("click",".itemHoras",o),P.on("click","li",l),c(),D.on("click","li",r),R.on("click",".btn",u),I.on("click",".btn",p)}function u(){var e=t('<ul class="listaCanales clearfix">'),i="datos/listadocanales.json",n={},o='{{letras}}<li class="itemLetra" data-letra="{{.}}">{{.}}</li>{{/letras}}';n.letras=[],t.get(i).done(function(i){g=i;var r={},s='{{canales}}<li class="itemCanal" data-letra="{{currentLetra}}" data-idcanal="{{id_programa}}"><span class="check"></span>{{nombre_completo|chop>23}}</li>{{/canales}}';t.each(g,function(t,i){Mark.globals.currentLetra=t,r={letra:t,canales:i},n.letras.push(t);var o=Mark.up(s,r);e.append(o)});var a=Mark.up(o,n);A.find(".listaLetras").append(a),A.find(".nano-content").html(e),t.each(A.find(".itemCanal"),function(){-1!=d.indexOf(t(this).data("idcanal"))&&t(this).find(".check").addClass("sel")}),A.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0})})}function p(){var e=t('<ul class="orden vertical">'),i={},n='<li class="itemCanal" data-idcanal="{{nombre}}"><span class="check sel"></span>{{nombre_completo|chop>23}}</li>';t.each(m,function(t,o){i=o.canal;var r=Mark.up(n,i);e.append(r)}),L.find(".nano-content").html(e),L.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0})}function f(){function e(){var e=t(this).find(".check"),i=e.hasClass("sel"),n=t(this).data("idcanal"),o=L.find(".itemCanal").filter(function(){return t(this).data("idcanal")===n});i?(e.toggleClass("sel"),o.find(".check").toggleClass("sel")):(e.toggleClass("sel"),o.length?o.find(".check").toggleClass("sel"):t(this).clone().appendTo(L.find("ul"))),L.find(".nano").nanoScroller().nanoScroller({scroll:"bottom"})}function i(e){e.stopPropagation();var i=t(this).parent(".itemCanal").data("idcanal"),n=A.find(".itemCanal").filter(function(){return t(this).data("idcanal")===i});t(this).toggleClass("sel"),n.find(".check").toggleClass("sel")}function n(){t(this).toggleClass("activo"),H.toggle("fast"),L.find(".nano").nanoScroller().nanoScroller({scroll:"top",alwaysVisible:!0}),A.find(".nano").nanoScroller().nanoScroller({scroll:"top"})}function o(){var e=t(this).data("letra"),i=A.find(".itemCanal"),n=t(this).hasClass("activo");if(n)i.show(),t(this).removeClass("activo");else{var o=i.filter(function(){return t(this).data("letra")==e});o.show(),i.not(o).hide(),t(this).addClass("activo")}A.find(".nano").nanoScroller().nanoScroller({scroll:"top"})}function r(){{var e=t("#txtBuscar"),i=e.val();A.find(".itemCanal")}i.length>=3&&" "!=i&&""!=i&&void 0!=i&&console.log(i)}A.on("click",".itemCanal",e),L.on("click",".check",i),Y.on("click",n),A.on("click",".itemLetra",o),A.find(".fa-search").on("click",r);var s,a=t(".ordenCanales ul.orden").sortable({group:"orden",pullPlaceholder:!0,onDrop:function(e,i,n){var o=a.sortable("serialize").get(),r=(JSON.stringify(o,null," "),t("<li/>").css({height:0}));e.before(r),r.detach(),n(e,i)},onDragStart:function(e,i,n){var o=e.offset(),r=i.rootGroup.pointer,a=t(".ordenCanales .nano .nano-content").get(0).scrollTop;a=Math.floor(a),s={left:r.left-o.left,top:r.top-o.top-a},n(e,i)},onDrag:function(t,e){t.css({left:e.left-s.left,top:e.top-s.top})}})}var d=["la1","la2","antena3","cuatro","telecinco","lasexta"],g={},v=[],m=[],b=[],w=60,T=90,y=320,x=y/60,S=new Date,C={h:leftPad(S.getHours(),2),m:leftPad(S.getMinutes(),2)};S.setTime(Date.parse("Mon, Jul 14 2014"));var M=t(".viewPort"),P=t(".selectorCategorias"),D=t(".selectorDias"),k=t(".contProgramas"),O=t(".contCanales"),E=t(".barraHoras"),I=t(".iconosHoras"),_=t(".horaActual"),$=t(".fichaPrograma"),H=t(".selectorCanales"),A=t(".barraLetras"),L=t(".ordenCanales"),R=t(".botonesCanales"),Y=t(".suscribirCanales");return function(){H.hide();{var t=e();t.then(function(t){return d=t,i(d)}).then(function(){r(d),n(d,m),s(),l(),a(),c(),h(),p(),u(),f()})}}(),t.fn.exists=function(){return this.length>0},this}(jq111);Array.prototype.max=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]>t&&(t=this[i]);return t},Array.prototype.min=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]<t&&(t=this[i]);return t};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS1zb3J0YWJsZS5qcyIsImpxdWVyeS5uYW5vc2Nyb2xsZXIuanMiLCJqcXVlcnkudG91Y2hTd2lwZS5qcyIsIm1hcmt1cC5qcyIsImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErZ0NBLFFBQUEsY0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBRUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEdBQUEsS0FDQSxHQUFBLFFBQUEsRUFBQSxVQUFBLEdBQUEsRUFBQSxHQUFBLEdBQUEsS0FDQSxFQUFBLGFBQUEsRUFBQSxrQkFFQSxHQUFBLEVBRUEsVUFBQSxPQUFBLE9BQUEsR0FBQSxJQUFBLE9BQUEsR0FBQSxFQUFBLFdBT0EsUUFBQSxZQUFBLEdBR0EsSUFBQSxHQUZBLEdBQUEsT0FBQSxHQUFBLElBQ0EsRUFBQSxTQUFBLE9BQUEsTUFBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUFBLENBRUEsSUFEQSxHQUFBLEdBQUEsRUFBQSxHQUNBLE1BQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLE9BQ0EsSUFBQSxJQUFBLEVBQUEsUUFBQSxHQUFBLE1BQUEsVUFBQSxFQUFBLFVBQUEsRUFBQSxPQUFBLEVBQUEsU0FFQSxNQUFBLE1BT0EsUUFBQSxhQUFBLEdBQ0EsYUFBQSxFQUFBLEdBQUEsSUFTQSxRQUFBLFNBQUEsRUFBQSxHQUVBLElBREEsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLElBQUEsQ0FFQSxPQUFBLElDamlDQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBaUlBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsSUFDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FDQSxPQUFBLEdBQUEsRUFHQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxTQUFBLFVBR0EsS0FGQSxFQUFBLEdBQUEsRUFFQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxJQUNBLEdBQUEsTUFBQSxTQUFBLEVBQUEsSUFBQSxlQUFBLElBQ0EsRUFBQSxLQUFBLFNBQUEsRUFBQSxJQUFBLGNBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLEVBQUEsYUFBQSxFQUNBLEVBQUEsSUFBQSxFQUNBLEVBQUEsSUFBQSxFQUFBLGNBQUEsSUFLQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsUUFDQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxLQUlBLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLElBTUEsS0FKQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLE9BQ0EsS0FFQSxLQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBT0EsT0FMQSxHQUFBLEVBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxLQU9BLFFBQUEsR0FBQSxHQUNBLEtBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxHQUNBLEtBQUEsY0FFQSxLQUFBLFFBQUEsWUFDQSxLQUFBLFlBQUEsRUFBQSxNQUFBLEtBQUEsT0FBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLE1BQUEsS0FBQSxLQUFBLE1BQ0EsS0FBQSxVQUFBLEVBQUEsTUFBQSxLQUFBLEtBQUEsTUFDQSxLQUFBLFlBQUEsRUFBQSxLQUFBLFFBQUEsYUFFQSxFQUFBLGdCQUNBLEtBQUEsUUFBQSxjQUFBLElBbU9BLFFBQUEsR0FBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQUEsVUFBQSxFQUFBLEdBRUEsS0FBQSxNQUFBLEVBQUEsSUFBQSxLQUFBLFNBQ0EsS0FBQSxVQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUEsTUFDQSxLQUFBLE9BQUEsS0FBQSxVQUFBLFFBQUEsUUFBQSxLQUFBLFVBQUEsUUFBQSxZQUVBLElBQUEsR0FBQSxLQUFBLFVBQUEsUUFBQSxRQUNBLE1BQUEsT0FBQSxFQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQSxHQUVBLEtBQUEsT0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsRUFBQSxNQUFBLEtBQUEsU0FBQSxPQUVBLEtBQUEsUUFBQSxNQUNBLEtBQUEsTUFBQSxXQUFBLEtBQUEsTUFsYkEsR0FBQSxHQUNBLEdBRUEsTUFBQSxFQUVBLE1BQUEsRUFHQSxRQUFBLEdBRUEsUUFBQSxFQUVBLFVBQUEsR0FFQSxHQUtBLFVBQUEsYUFFQSxjQUFBLEdBRUEsa0JBQUEsU0FFQSxTQUFBLEVBR0EsTUFBQSxFQUVBLE9BQUEsR0FFQSxTQUFBLEdBRUEsYUFBQSxLQUVBLFVBQUEsV0FFQSxhQUFBLFVBRUEsaUJBQUEsY0FJQSxjQUFBLFdBQ0EsT0FBQSxHQUlBLFNBQUEsYUFHQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxJQU9BLFlBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUNBLE9BQUEsRUFBQSxTQUNBLE1BQUEsRUFBQSxVQUVBLEVBQUEsU0FBQSxFQUFBLE1BQUEsUUFBQSxjQUNBLEVBQUEsUUFBQSxTQUFBLEVBQUEsTUFBQSxRQUFBLFlBR0EsT0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFlBQUEsRUFBQSxNQUFBLFFBQUEsY0FBQSxXQUFBLFNBQ0EsRUFBQSxRQUFBLFlBQUEsRUFBQSxNQUFBLFFBQUEsWUFJQSxZQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE9BQUEsU0FBQSxNQUFBLDhCQUFBLFFBQ0EsRUFBQSxrQkFDQSxJQU1BLFlBQUEsNEJBR0EsaUJBQUEsRUFHQSxVQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLE9BRUEsT0FBQSxJQUNBLElBQ0EsRUFBQSxLQUNBLEVBQUEsU0FBQSxTQUdBLEdBQUEsb0JBQ0EsR0FBQSxTQUVBLElBSUEsVUFBQSxHQUVBLEtBQ0EsRUFBQSxFQUNBLEdBQ0EsS0FBQSxFQUNBLElBQUEsRUFDQSxPQUFBLEVBQ0EsTUFBQSxHQUVBLEdBQ0EsTUFBQSx5Q0FDQSxLQUFBLDBEQUNBLEtBQUEsd0NBQ0EsT0FBQSxtQkFFQSxFQUFBLGVBMkVBLEdBQUEsSUFBQSxTQUFBLEdBUUEsTUFQQSxHQUFBLEVBQUEsU0FDQSxFQUFBLFFBQUEsSUFDQSxFQUFBLE1BQUEsS0FFQSxFQUFBLEVBQUEsT0FBQSxHQUFBLEdBQUEsSUFHQSxFQUFBLEVBQUEsUUFHQSxFQUFBLFdBQ0EsU0FBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLFVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxlQUdBLEtBQUEsS0FBQSxFQUFBLEVBQUEsUUFBQSxRQUFBLEtBQUEsUUFBQSxjQUNBLEtBQUEsY0FBQSxHQUVBLEtBQUEsS0FBQSxHQUFBLEtBQUEsUUFBQSxVQUNBLEtBQUEsUUFBQSxZQUFBLEtBQUEsS0FBQSxFQUFBLFlBQUEsS0FJQSxLQUFBLFdBQUEsR0FDQSxLQUFBLGdCQUFBLE1BRUEsS0FBQSxrQkFDQSxLQUFBLGNBQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxJQUFBLEtBQUEsU0FBQSxDQUNBLElBQUEsS0FBQSxZQUFBLEtBQUEsS0FBQSxTQUNBLE1BRUEsTUFBQSxRQUFBLFlBQUEsS0FBQSxLQUFBLEtBQUEsY0FBQSxFQUFBLFlBQUEsR0FDQSxLQUFBLEtBQUEsT0FBQSxLQUFBLGFBQ0EsS0FBQSxVQUFBLEVBR0EsS0FBQSxXQUFBLEdBRUEsS0FBQSxRQUFBLE9BQUEsS0FBQSxLQUNBLEVBQUEsS0FBQSxRQUFBLEtBQUEsS0FBQSxnQkFDQSxFQUFBLE9BQ0EsRUFFQSxJQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLEVBQUEsS0FBQSxjQUNBLEVBQUEsS0FBQSxRQUFBLFlBRUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxLQUNBLEtBQUEsc0JBQ0EsS0FBQSxZQUFBLFNBQ0EsS0FBQSxpQkFBQSxLQUdBLEtBQUEsU0FBQSxHQUNBLEtBQUEsZ0JBQUEsT0FFQSxLQUFBLGNBQUEsRUFFQSxLQUFBLFdBRUEsS0FBQSxZQUFBLFFBQUEsUUFBQSxHQUNBLEtBQUEsWUFBQSxPQUFBLEtBQUEsTUFBQSxTQUVBLEtBQUEsUUFBQSxTQUFBLEtBQUEsS0FBQSxLQUFBLGNBQUEsRUFBQSxTQUFBLEdBRUEsS0FBQSxRQUFBLE9BQUEsS0FBQSxLQUFBLEtBQUEsYUFBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEdBR0EsS0FBQSxrQkFDQSxLQUFBLG9CQUNBLEtBQUEsaUJBQUEsS0FBQSxjQUFBLEVBQ0EsS0FBQSxVQUFBLElBR0Esa0JBQUEsU0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEtBQUEsaUJBQUEsS0FBQSxRQUNBLEVBQUEsS0FBQSxxQkFBQSxLQUFBLFlBUUEsS0FMQSxHQUFBLEdBQUEsRUFBQSxLQUFBLHlCQUNBLEVBQ0EsR0FDQSxFQUFBLEVBQUEsT0FFQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBRUEsS0FBQSxHQUFBLEtBQUEsUUFBQSxnQkFBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFDQSxLQUFBLEVBQUEsU0FBQSxDQUNBLElBQUEsS0FBQSxtQkFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLHFCQUNBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsR0FFQSxHQUFBLEVBQUEsa0JBQUEsRUFBQSxHQUNBLE9BQUEsSUFJQSxLQUFBLGdCQUNBLEtBQUEsY0FBQSxJQUVBLGdCQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxrQkFDQSxJQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsTUFHQSxFQUFBLEdBQUEsS0FBQSxhQUNBLEtBQUEsaUJBQUEsRUFDQSxLQUFBLGNBQUEsRUFDQSxLQUFBLFFBQUEsVUFBQSxLQUFBLFlBQUEsRUFBQSxLQUVBLHVCQUFBLFdBR0EsTUFGQSxNQUFBLHFCQUNBLEVBQUEsS0FBQSxXQUFBLEtBQUEsdUJBQUEsS0FBQSxRQUFBLFdBQUEsS0FBQSxvQkFDQSxLQUFBLHFCQUVBLGFBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUFBLEtBQUEsUUFBQSxtQkFBQSxLQUFBLElBRUEsaUJBQUEsV0FDQSxHQUFBLEtBQUEsZUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxPQUFBLEVBQ0EsRUFBQSxLQUFBLFdBQUEsR0FBQSxxQkFFQSxLQUFBLEtBQUEsUUFBQSxVQUNBLEtBQUEsS0FDQSxHQUFBLEVBQUEsSUFBQSxLQUFBLFdBQUEsR0FBQSxzQkFBQSxHQUFBLENBS0EsR0FBQSxDQUNBLE9BS0EsS0FBQSxhQUFBLEVBRUEsTUFBQSxNQUFBLGNBRUEsV0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxFQUVBLElBQUEsS0FBQSxtQkFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsS0FBQSxtQkFDQSxNQUFBLG9CQUFBLEtBQUEsZ0JBQ0EsS0FBQSxnQkFBQSxFQUdBLEtBQUEsWUFBQSxLQUFBLFFBQ0EsS0FBQSxRQUFBLEdBRUEsWUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsV0FBQSxFQUNBLE9BQUEsTUFBQSxJQUNBLEtBQUEsSUFBQSxLQUFBLFFBQUEsS0FBQSxFQUFBLE1BQ0EsS0FBQSxJQUFBLEtBQUEsUUFBQSxJQUFBLEVBQUEsT0FDQSxLQUFBLFFBQUEsVUFFQSxXQUFBLFNBQUEsR0FDQSxPQUNBLEtBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxNQUNBLElBQUEsRUFBQSxPQUFBLEVBQUEsY0FBQSxRQUdBLGdCQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsTUFBQSxVQUFBLEtBQUEsUUFBQSxNQUdBLEtBQUEsV0FDQSxhQUFBLEtBQUEsa0JBQ0EsS0FBQSxpQkFBQSxXQUFBLFdBQ0EsRUFBQSxVQUFBLEdBQ0EsS0FBQSxRQUFBLFNBR0EsT0FBQSxXQUNBLEtBQUEsa0JBQ0EsS0FBQSxxQkFFQSxnQkFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsR0FBQSxPQUFBLE9BQUEsU0FFQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLGFBR0Esa0JBQUEsV0FDQSxLQUFBLGFBQUEsR0FHQSxnQkFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxzQkFHQSxTQUFBLFNBQUEsR0FDQSxFQUFBLEtBRUEsS0FEQSxHQUFBLEdBQUEsS0FBQSxXQUFBLE9BQ0EsS0FDQSxLQUFBLFdBQUEsR0FBQSxTQUFBLElBR0EsaUJBQUEsV0FDQSxLQUFBLG9CQUFBLEdBRUEsU0FBQSxXQUNBLEVBQUEsS0FBQSxRQUFBLE9BQUEsSUFxQkEsRUFBQSxXQUNBLFNBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBRUEsS0FBQSxXQUNBLEVBQUEsY0FDQSxLQUFBLFFBQUEsTUFDQSxLQUFBLFlBQUEsSUFDQSxFQUFBLFNBQUEsRUFBQSxPQUdBLFlBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLE9BQ0EsY0FBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLGNBQUEsUUFBQSxRQUVBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsb0JBQ0EsRUFDQSxHQUNBLEVBQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxVQUNBLEdBQUEsRUFBQSxRQUFBLGVBQ0EsRUFBQSxRQUFBLGNBQUEsRUFBQSxLQUFBLEtBRUEsS0FBQSxHQUFBLEVBRUEsTUFEQSxHQUFBLGdCQUFBLEtBQUEsS0FBQSxPQUFBLFdBQ0EsQ0FFQSxNQUFBLEtBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsRUFDQSxLQUFBLEdBQUEsS0FBQSxjQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxrQkFBQSxHQUFBLGtCQUFBLEVBQUEsRUFDQSxJQUFBLEVBQ0EsT0FBQSxNQUNBLElBQUEsRUFFQSxNQURBLE1BQUEsZ0JBQUEsRUFBQSxJQUNBLElBSUEsZ0JBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxNQUFBLElBQ0EsRUFBQSxLQUFBLGVBQUEsR0FDQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLFNBQ0EsR0FDQSxLQUFBLEVBQUEsS0FDQSxNQUFBLEVBQUEsS0FBQSxFQUNBLElBQUEsRUFBQSxJQUNBLE9BQUEsRUFBQSxJQUFBLEVBRUEsSUFBQSxLQUFBLFFBQUEsU0FBQSxDQUNBLEdBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsQ0FDQSxJQUNBLEVBQUEsU0FDQSxFQUFBLFFBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxFQUFBLE1BQ0EsQ0FDQSxHQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxNQUFBLENBQ0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEVBQUEsR0FFQSxFQUFBLE1BQUEsRUFBQSxFQUVBLEtBQUEsY0FBQSxLQUNBLEVBQUEsR0FDQSxLQUFBLFVBQUEsZ0JBQUEsS0FBQSxFQUFBLEVBQUEsSUFFQSxrQkFBQSxXQU9BLE1BTkEsTUFBQSxpQkFDQSxLQUFBLE1BQUEsS0FBQSxhQUFBLEtBQUEsR0FBQSxRQUFBLE9BQ0EsU0FBQSxLQUFBLE1BQUEsUUFBQSxpQkFBQSxNQUFBLEtBQUEsTUFBQSxRQUFBLGFBQUEsS0FDQSxNQUNBLEVBQUEsS0FBQSxNQUFBLEtBQUEsa0JBQUEsS0FBQSxRQUFBLFlBRUEsS0FBQSxnQkFFQSxvQkFBQSxXQUNBLEdBQUEsR0FDQSxFQUFBLEtBQUEsRUFPQSxPQUhBLEdBREEsYUFBQSxFQUFBLElBQUEsYUFBQSxhQUFBLEVBQUEsSUFBQSxhQUFBLFVBQUEsRUFBQSxJQUFBLFlBQ0EsRUFFQSxFQUFBLGdCQUdBLGNBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxRQUFBLFFBQUEsS0FBQSxrQkFBQSxJQUVBLGtCQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxHQUFBLEVBQ0EsSUFBQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxhQUFBLEtBQUEsTUFBQSxHQUFBLFlBR0EsSUFGQSxHQUFBLEVBRUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsVUFBQSxLQUFBLFNBQ0EsVUFBQSxLQUFBLFVBQ0EsTUFBQSxLQUVBLEdBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBLE1BRUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsR0FFQSxNQUFBLElBRUEsYUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxVQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxXQU1BLE9BSkEsR0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsS0FBQSxJQUVBLEVBQUEsU0FBQSxJQUVBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLE9BQUEsWUFFQSxFQUFBLEtBQUEsYUFBQSxFQUFBLEdBQUEsSUFBQSxLQUFBLFFBQUEsU0FBQSxJQUFBLFdBQ0EsTUFBQSxHQUFBLFdBQUEsRUFBQSxPQUFBLEtBQ0EsS0FFQSxPQUFBLE1BQUEsVUFBQSxRQUFBLFVBQUEsRUFBQSxFQUFBLElBRUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLEtBQUEsVUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsS0FBQSxFQUNBLElBQ0EsRUFBQSxTQUFBLEtBR0EsRUFBQSxPQUVBLGlCQUFBLFdBQ0EsS0FBQSxlQUFBLEdBRUEsU0FBQSxXQUNBLEdBQUEsR0FBQSxJQUVBLE1BQUEsT0FBQSxJQUFBLEVBQUEsTUFBQSxLQUFBLFFBQ0EsS0FBQSxHQUFBLFdBQUEsR0FFQSxLQUFBLFFBQUEsT0FDQSxLQUFBLE1BQUEsV0FBQSxFQUFBLEtBQUEsS0FBQSxNQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUdBLEVBQUEsS0FBQSxLQUFBLFVBQUEsV0FDQSxFQUFBLFdBQUEsS0FBQSxNQUtBLElBQUEsSUFDQSxPQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsS0FHQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLFVBQUEsS0FHQSxVQUFBLFdBQ0EsTUFBQSxNQUFBLFdBQUEsS0FBQSxJQUFBLElBRUEsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxzQkFHQSxRQUFBLFdBQ0EsS0FBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLGNBS0EsR0FBQSxPQUFBLEVBQUEsVUFBQSxHQVNBLEVBQUEsR0FBQSxHQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsTUFBQSxVQUFBLE1BQUEsS0FBQSxVQUFBLEVBRUEsT0FBQSxNQUFBLElBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxLQUFBLEVBRUEsT0FBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLElBQUEsTUFDQSxHQUFBLElBQUEsR0FDQSxnQkFBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBRUEsVUFJQSxNQUFBLE9BQUEsWUN6cUJBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsWUFDQSxJQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsSUFRQSxVQUFBLFlBUUEsWUFBQSxjQVFBLGFBQUEsZUFRQSxvQkFBQSxFQVNBLHNCQUFBLEVBUUEsZUFBQSxFQVFBLGVBQUEsRUFRQSxXQUFBLEtBUUEsZ0JBQUEsR0FRQSxnQkFBQSxLQVFBLGdCQUFBLEtBUUEsY0FBQSxNQVVBLEVBQUEsWUFTQSxFQUFBLFNBUUEsRUFBQSxZQVFBLEVBQUEsYUFTQSxFQUFBLFlBUUEsRUFBQSxhQVNBLEVBQUEsVUFRQSxFQUFBLFNBU0EsRUFBQSxPQVNBLEVBQUEsUUFTQSxFQUFBLEtBU0EsRUFBQSxXQVNBLEVBQUEsaUJBU0EsRUFBQSxPQVNBLEVBQUEsUUFTQSxFQUFBLFVBU0EsRUFBQSxRQVNBLEVBQUEsWUFTQSxFQUFBLGdDQUFBLEVBQUEsVUFBQSxTQUFBLFdBQUEsS0FBQSxFQUFBLFVBQUEsYUFBQSxFQUFBLGNBU0EsRUFBQSxLQUNBLEVBQUEsRUFBQSxzQkFDQSxFQUFBLEVBQUEscUJBQ0EsRUFBQSxFQUFBLGNBQUEsT0FBQSxNQUNBLEVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUVBLEtBREEsR0FBQSxJQUFBLFVBQUEsT0FBQSxNQUFBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUFBLElBQUEsRUFHQSxHQUZBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLFdBQ0EsSUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxFQUdBLFFBQUEsS0FFQSxFQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsR0FDQSxFQUVBLEtBQUEsRUFDQSxFQUVBLEVBQUEsRUFBQSxPQUFBLEdBQUEsY0FBQSxFQUFBLE9BQUEsSUFFQSxFQUFBLEVBQUEsYUFDQSxFQUFBLEtBQUEsRUFTQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FXQSxPQVZBLEdBQUEsRUFBQSxjQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxTQUFBLFdBQ0EsRUFBQSxNQUFBLFFBQ0EsRUFBQSxPQUFBLFFBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxJQUFBLFVBQ0EsRUFBQSxLQUFBLFlBQUEsR0FDQSxFQUFBLEVBQUEsWUFBQSxFQUFBLFlBQ0EsRUFBQSxLQUFBLFlBQUEsR0FDQSxHQUVBLEVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxDQUdBLE9BRkEsR0FBQSxFQUFBLFVBQUEsV0FDQSxFQUFBLDhCQUFBLEtBQUEsS0FJQSxFQUFBLG1CQUFBLEtBQUEsR0FDQSxJQUNBLEVBQUEsRUFBQSxHQUFBLFFBQUEsT0FBQSxLQUVBLElBQUEsRUFBQSxLQU5BLEdBZUEsRUFBQSxXQUNBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsS0FBQSxHQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsSUFBQSxFQUFBLEtBQ0EsS0FBQSxJQUFBLEVBQUEsS0FBQSxJQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxpQkFBQSxHQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsUUFBQSxlQUFBLEdBQ0EsS0FBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLFFBQ0EsS0FBQSxTQUFBLEtBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxjQUNBLEtBQUEsU0FBQSxLQUFBLFdBQUEsS0FBQSxRQUFBLFVBQUEsR0FDQSxLQUFBLFFBQUEsS0FBQSxTQUFBLEdBQ0EsS0FBQSxpQkFBQSxFQUNBLEtBQUEsUUFBQSxvQkFBQSxNQUFBLEtBQUEsR0FBQSxNQUFBLHdCQUNBLEtBQUEsa0JBRUEsS0FBQSxXQUVBLEtBQUEsZUFDQSxLQUFBLFlBQ0EsS0FBQSxRQXNpQkEsTUF6aEJBLEdBQUEsVUFBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEtBQUEsU0FHQSxHQUFBLEVBQUEsT0FBQSxHQUNBLElBQUEsR0FBQSxFQUFBLGNBQUEsT0FBQSxHQUFBLElBQUEsR0FBQSxFQUFBLGNBQUEsT0FBQSxJQUNBLEVBQUEscUJBRUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxDQUNBLElBQUEsRUFBQSxnQkFBQSxFQUFBLGNBQUEsV0FDQSxRQUVBLElBQUEsR0FBQSxFQUFBLGNBQUEsV0FBQSxHQUFBLElBQUEsR0FBQSxFQUFBLGNBQUEsV0FBQSxJQUNBLEVBQUEsbUJBWUEsRUFBQSxVQUFBLGdCQUFBLFdBQ0EsS0FBQSxTQUFBLEtBQ0Esd0JBQUEsVUFFQSxLQUFBLG9CQUFBLEVBQ0EsS0FBQSxVQUFBLEdBV0EsRUFBQSxVQUFBLG1CQUFBLFdBQ0EsR0FBQSxHQUFBLENBQ0EsR0FBQSxLQUFBLFFBQ0EsS0FBQSxhQUFBLEVBQUEsYUFBQSxFQUFBLGFBQ0EsS0FBQSxjQUFBLEtBQUEsa0JBQUEsRUFDQSxLQUFBLGlCQUFBLEVBQUEsVUFDQSxFQUFBLEtBQUEsaUJBQUEsS0FBQSxpQkFBQSxPQUFBLEtBQUEsaUJBQUEsS0FBQSxpQkFBQSxLQUFBLE9BQ0EsS0FBQSxpQkFBQSxLQUFBLGlCQUNBLFNBQUEsR0FDQSxLQUFBLElBQUEsUUFBQSxVQUNBLFNBQUEsS0FBQSxpQkFDQSxRQUFBLEtBQUEsYUFDQSxVQUFBLElBR0EsS0FBQSxxQkFDQSxLQUFBLGFBQUEsS0FBQSxXQUFBLEtBQUEsYUFDQSxLQUFBLFVBQUEsSUFBQSxLQUFBLGFBQUEsRUFBQSxLQUFBLGlCQUFBLEtBQUEsYUFBQSxLQUFBLGVBWUEsRUFBQSxVQUFBLGtCQUFBLFdBQ0EsR0FBQSxFQUNBLElBQ0EsS0FDQSxFQUFBLEdBQUEsZ0JBQUEsS0FBQSxVQUFBLE9BRUEsR0FDQSxJQUFBLEtBQUEsV0FHQSxHQUNBLEdBQUEsS0FBQSxXQUNBLEVBQUEsS0FBQSxXQUVBLEtBQUEsVUFBQSxFQUFBLFNBQUEsR0FDQSxNQUFBLFlBRUEsTUFEQSxHQUFBLFVBQUEsS0FDQSxFQUFBLE9BQUEsSUFBQSxLQUVBLFFBRUEsS0FBQSxPQUFBLElBQUEsSUFXQSxFQUFBLFVBQUEsYUFBQSxXQUNBLEtBQUEsUUFDQSxLQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FTQSxNQVJBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxTQUFBLElBQ0EsRUFBQSxPQUFBLEdBQUEsRUFBQSxVQUNBLEVBQUEsUUFBQSxHQUVBLEVBQUEsS0FBQSxTQUFBLFVBQ0EsRUFBQSxJQUFBLEtBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLEtBQUEsRUFBQSxFQUFBLE9BQUEsS0FDQSxJQUVBLE1BQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBUUEsTUFQQSxHQUFBLFFBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxTQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUFBLEVBQUEsY0FDQSxFQUFBLFNBQ0EsRUFBQSxrQkFBQSxFQUFBLGNBQUEsRUFBQSxnQkFBQSxFQUFBLGFBQ0EsRUFBQSxJQUFBLFFBQUEsYUFDQSxJQUFBLEVBQUEsa0JBQUEsSUFBQSxFQUFBLGVBQ0EsRUFBQSxJQUFBLFFBQUEsY0FFQSxJQUVBLE1BQ0EsR0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUtBLE1BSkEsR0FBQSxnQkFBQSxFQUNBLEVBQUEsS0FBQSxZQUFBLFVBQ0EsRUFBQSxJQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsS0FDQSxJQUVBLE1BQ0EsT0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUNBLEVBQUEsVUFFQSxNQUNBLFNBQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUlBLE1BSEEsR0FBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLGNBQUEsUUFBQSxHQUFBLEVBQUEsYUFDQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEtBQUEsSUFDQSxJQUVBLE1BQ0EsT0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsRUFBQSxxQkFDQSxFQUFBLGlCQUdBLEVBQUEscUJBQ0EsRUFBQSxRQUFBLEVBQUEsVUFDQSxFQUFBLHFCQUVBLE1BQUEsSUFHQSxFQUFBLGtCQUFBLEVBQUEsY0FDQSxFQUFBLFFBQUEsc0JBQ0EsRUFBQSxpQkFBQSxFQUFBLEdBRUEsRUFBQSxnQkFBQSxFQUFBLGNBQ0EsRUFBQSxJQUFBLFFBQUEsY0FFQSxJQUFBLEVBQUEsbUJBQ0EsRUFBQSxRQUFBLHNCQUNBLEVBQUEsaUJBQUEsRUFBQSxHQUVBLElBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLGtCQUlBLE1BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsTUFBQSxFQVFBLE1BTEEsR0FBQSxFQUFBLE9BQUEsRUFBQSxZQUFBLEVBQUEsZUFBQSxFQUFBLGNBQUEsYUFBQSxFQUFBLFFBQUEsRUFBQSxnQkFBQSxFQUFBLGNBQUEsT0FDQSxJQUNBLEVBQUEsVUFBQSxFQUFBLEdBRUEsRUFBQSxVQUNBLElBRUEsTUFDQSxNQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FDQSxHQUFBLEVBQ0EsSUFBQSxFQUFBLGVBR0EsTUFBQSxNQUFBLEVBQUEsU0FBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFFBQUEsR0FBQSxNQUFBLEVBQUEsV0FEQSxTQUlBLFFBV0EsRUFBQSxVQUFBLFVBQUEsV0FDQSxHQUFBLEVBQ0EsTUFBQSxlQUNBLEVBQUEsS0FBQSxPQUNBLEtBQUEsUUFBQSxlQUNBLEtBQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxJQUVBLEtBQUEscUJBQ0EsS0FBQSxPQUFBLEtBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxLQUFBLEtBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FFQSxLQUFBLFNBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxLQVVBLEVBQUEsVUFBQSxhQUFBLFdBQ0EsR0FBQSxFQUNBLEdBQUEsS0FBQSxPQUNBLEtBQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEscUJBQ0EsS0FBQSxPQUFBLFNBQ0EsS0FBQSxLQUFBLFVBRUEsS0FBQSxTQUFBLE9BQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FXQSxFQUFBLFVBQUEsU0FBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0F1QkEsT0F0QkEsR0FBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLGNBQ0EsRUFBQSxLQUFBLElBQUEsU0FBQSxJQUFBLElBQUEsUUFBQSxFQUFBLFNBQUEsSUFBQSxHQUFBLFFBQ0EsS0FBQSxJQUFBLE9BQUEsZUFBQSxFQUFBLGlCQUFBLEVBQUEsY0FFQSxLQUFBLEtBQUEsS0FBQSxJQUFBLFNBQUEsSUFBQSxHQUNBLEtBQUEsT0FBQSxLQUFBLEtBQUEsS0FBQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLGlCQUFBLEtBQUEsUUFBQSxNQUFBLGlCQUFBLGlCQUFBLFFBQUEsWUFBQSxJQUNBLEdBQ0EsTUFBQSxJQUNBLGNBQUEsRUFBQSxLQUVBLElBQ0EsR0FDQSxPQUFBLEdBRUEsS0FBQSxJQUFBLFNBQUEsa0JBRUEsTUFBQSxHQUNBLEtBQUEsU0FBQSxJQUFBLEdBRUEsTUFTQSxFQUFBLFVBQUEsUUFBQSxXQUNBLEtBQUEsU0FBQSxFQUNBLEtBQUEsb0JBQ0EsS0FBQSxLQUFBLE9BRUEsS0FBQSxhQVlBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FDQSxPQUFBLE1BQUEsb0JBQ0EsS0FBQSxjQUFBLEtBQUEsUUFBQSxhQUNBLFNBRUEsS0FBQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFFBQUEsV0FBQSxRQUNBLEtBQUEsV0FBQSxPQUVBLEtBQUEsU0FDQSxLQUFBLFVBRUEsRUFBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLFVBQ0EsR0FDQSxLQUFBLFNBQUEsS0FDQSxPQUFBLEtBQUEsU0FBQSxXQUdBLEVBQUEsRUFBQSxhQUFBLEVBQ0EsRUFBQSxTQUFBLEtBQUEsSUFBQSxJQUFBLGNBQUEsSUFDQSxFQUFBLElBQ0EsS0FBQSxJQUFBLE9BQUEsSUFDQSxLQUFBLElBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLEVBQUEsZUFFQSxFQUFBLEtBQUEsS0FBQSxhQUFBLEdBQ0EsRUFBQSxTQUFBLEtBQUEsS0FBQSxJQUFBLE9BQUEsSUFDQSxFQUFBLFNBQUEsS0FBQSxLQUFBLElBQUEsVUFBQSxJQUNBLEVBQUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsZ0JBQ0EsRUFBQSxLQUFBLFFBQUEsZ0JBQ0EsTUFBQSxLQUFBLFFBQUEsaUJBQUEsRUFBQSxLQUFBLFFBQUEsa0JBQ0EsRUFBQSxLQUFBLFFBQUEsaUJBRUEsSUFBQSxHQUFBLEVBQUEsWUFBQSxJQUNBLEdBQUEsR0FFQSxLQUFBLGFBQUEsRUFBQSxFQUNBLEtBQUEsY0FBQSxFQUNBLEtBQUEsV0FBQSxFQUNBLEtBQUEsZ0JBQUEsRUFDQSxLQUFBLGFBQUEsRUFDQSxLQUFBLFFBQUEsRUFDQSxLQUFBLE9BQUEsT0FBQSxHQUNBLEtBQUEsT0FBQSxTQUNBLEtBQUEsS0FBQSxPQUNBLEtBQUEsVUFBQSxFQUNBLEVBQUEsZUFBQSxFQUFBLGNBQUEsS0FBQSxLQUFBLGFBQUEsSUFBQSxFQUFBLGNBQUEsSUFBQSxHQUNBLEtBQUEsS0FBQSxPQUNBLEtBQUEsVUFBQSxHQUNBLEtBQUEsR0FBQSxlQUFBLEVBQUEsY0FBQSxJQUFBLEVBQ0EsS0FBQSxPQUFBLE9BRUEsS0FBQSxPQUFBLE9BRUEsS0FBQSxLQUFBLEtBQ0EsUUFBQSxLQUFBLFFBQUEsY0FBQSxFQUFBLEdBQ0EsV0FBQSxLQUFBLFFBQUEsY0FBQSxVQUFBLEtBRUEsRUFBQSxLQUFBLFNBQUEsSUFBQSxhQUNBLFdBQUEsR0FBQSxhQUFBLEtBQ0EsRUFBQSxTQUFBLEtBQUEsU0FBQSxJQUFBLFNBQUEsSUFDQSxHQUNBLEtBQUEsU0FBQSxLQUNBLE1BQUEsR0FDQSxZQUFBLEtBSUEsT0FXQSxFQUFBLFVBQUEsT0FBQSxXQUNBLE1BQUEsTUFBQSxVQUdBLEtBQUEsUUFBQSxLQUFBLElBQUEsRUFBQSxLQUFBLFNBQ0EsS0FBQSxRQUFBLEtBQUEsSUFBQSxLQUFBLGFBQUEsS0FBQSxTQUNBLEtBQUEsU0FBQSxVQUFBLEtBQUEsYUFBQSxLQUFBLFFBQUEsS0FBQSxjQUNBLEtBQUEscUJBQ0EsS0FBQSxxQkFDQSxLQUFBLHFCQUVBLE1BVkEsUUF1QkEsRUFBQSxVQUFBLGFBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxVQUdBLEtBQUEsU0FBQSxVQUFBLEtBQUEsY0FBQSxLQUFBLFNBQUEsU0FBQSxHQUFBLFFBQUEsR0FDQSxLQUFBLE9BQUEsVUFDQSxNQUxBLFFBa0JBLEVBQUEsVUFBQSxVQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFNBQUEsV0FBQSxHQUFBLFFBQUEsR0FDQSxLQUFBLE9BQUEsVUFDQSxNQUxBLFFBa0JBLEVBQUEsVUFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFVBQUEsS0FBQSxJQUFBLEtBQUEsR0FBQSxJQUFBLEdBQUEsV0FDQSxNQUpBLFFBaUJBLEVBQUEsVUFBQSxLQUFBLFdBVUEsTUFUQSxJQUFBLEtBQUEsWUFDQSxFQUFBLEtBQUEsV0FDQSxLQUFBLFVBQUEsTUFFQSxLQUFBLFNBQUEsRUFDQSxLQUFBLGVBQ0EsS0FBQSxvQkFDQSxLQUFBLEtBQUEsT0FFQSxNQVlBLEVBQUEsVUFBQSxRQUFBLFdBaUJBLE1BaEJBLE1BQUEsU0FDQSxLQUFBLFFBRUEsS0FBQSxvQkFBQSxLQUFBLEtBQUEsUUFDQSxLQUFBLEtBQUEsU0FFQSxHQUNBLEtBQUEsU0FBQSxPQUFBLElBRUEsS0FBQSxTQUFBLFdBQUEsWUFDQSxLQUFBLElBQUEsU0FBQSxtQkFDQSxLQUFBLElBQUEsWUFBQSxpQkFDQSxLQUFBLFNBQUEsS0FDQSxNQUFBLE1BR0EsTUFhQSxFQUFBLFVBQUEsTUFBQSxXQUNBLE9BQUEsS0FBQSxvQkFHQSxLQUFBLFVBR0EsS0FBQSxRQUNBLEtBQUEsS0FBQSxTQUFBLFdBQ0EsV0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUNBLEVBQUEsS0FBQSxZQUFBLGFBRUEsTUFBQSxLQUFBLFFBQUEsWUFDQSxNQWJBLFFBZ0JBLEtBR0EsRUFBQSxHQUFBLGFBQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLENBS0EsS0FKQSxFQUFBLEtBQUEsZ0JBQ0EsRUFBQSxFQUFBLFVBQUEsRUFBQSxHQUNBLEtBQUEsYUFBQSxFQUFBLEdBQUEsR0FBQSxLQUFBLElBRUEsR0FBQSxnQkFBQSxHQUFBLENBRUEsR0FEQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEdBQ0EsTUFBQSxFQUFBLGFBQ0EsTUFBQSxHQUFBLGFBQUEsRUFBQSxhQUVBLElBQUEsTUFBQSxFQUFBLFVBQ0EsTUFBQSxHQUFBLFVBQUEsRUFBQSxVQUVBLElBQUEsRUFBQSxTQUNBLE1BQUEsR0FBQSxTQUFBLEVBQUEsU0FFQSxJQUFBLFdBQUEsRUFBQSxPQUNBLE1BQUEsR0FBQSxhQUFBLEVBRUEsSUFBQSxRQUFBLEVBQUEsT0FDQSxNQUFBLEdBQUEsVUFBQSxFQUVBLElBQUEsRUFBQSxRQUFBLEVBQUEsaUJBQUEsR0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLE9BRUEsSUFBQSxFQUFBLEtBQ0EsTUFBQSxHQUFBLE1BRUEsSUFBQSxFQUFBLFFBQ0EsTUFBQSxHQUFBLFNBRUEsSUFBQSxFQUFBLE1BQ0EsTUFBQSxHQUFBLFFBR0EsTUFBQSxHQUFBLFdBR0EsRUFBQSxHQUFBLGFBQUEsWUFBQSxHQUNBLE1BQUEsT0FBQSxVQ3I3QkEsU0FBQSxHQUNBLGtCQUFBLFNBQUEsT0FBQSxLQUFBLE9BQUEsSUFBQSxNQUVBLFFBQUEsVUFBQSxHQUdBLEVBQUEsUUFFQSxTQUFBLEdBQ0EsWUFtT0EsU0FBQSxHQUFBLEdBb0JBLE9BbEJBLEdBQUEsU0FBQSxFQUFBLGlCQUFBLFNBQUEsRUFBQSxPQUFBLFNBQUEsRUFBQSxjQUNBLEVBQUEsZ0JBQUEsR0FLQSxTQUFBLEVBQUEsT0FBQSxTQUFBLEVBQUEsTUFDQSxFQUFBLElBQUEsRUFBQSxPQUdBLElBQ0EsTUFJQSxFQUFBLEVBQUEsVUFBQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEdBR0EsS0FBQSxLQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFHQSxFQUFBLEVBQUEsS0FBQSxFQUVBLEtBQ0EsRUFBQSxHQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLE1BZ0JBLFFBQUEsR0FBQSxFQUFBLEdBd0lBLFFBQUEsR0FBQSxHQUVBLEtBQUEsTUFJQSxFQUFBLEVBQUEsUUFBQSxRQUFBLEVBQUEsaUJBQUEsSUFBQSxPQUFBLEdBQUEsQ0FLQSxHQUVBLEdBRkEsRUFBQSxFQUFBLGNBQUEsRUFBQSxjQUFBLEVBR0EsRUFBQSxFQUFBLEVBQUEsUUFBQSxHQUFBLENBa0RBLE9BaERBLElBQUEsRUFHQSxFQUVBLEdBQUEsRUFBQSxRQUFBLE9BSUEsRUFBQSxpQkFJQSxHQUFBLEVBQ0EsR0FBQSxLQUNBLEdBQUEsS0FDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsS0FDQSxHQUFBLEtBQ0EsTUFJQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsVUFBQSxHQUFBLEtBRUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxLQUVBLEdBQUEsS0FHQSxHQUFBLEVBQUEsRUFBQSxRQUFBLElBQ0EsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLE1BQUEsR0FBQSxHQUFBLFNBR0EsRUFBQSxhQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxNQUlBLEdBQUEsRUFJQSxLQUFBLEdBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxJQUNBLElBRUEsRUFBQSxPQUNBLEdBQUEsV0FBQSxFQUFBLE1BQUEsV0FFQSxHQUFBLFFBQUEsUUFBQSxFQUFBLFNBRUEsRUFBQSxPQUNBLEVBQUEsRUFBQSxLQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFFQSxNQUFBLEVBQUEsbUJBR0EsSUFBQSxHQUdBLE9BV0EsUUFBQSxHQUFBLEdBSUEsR0FBQSxHQUFBLEVBQUEsY0FBQSxFQUFBLGNBQUEsQ0FHQSxJQUFBLEtBQUEsR0FBQSxLQUFBLElBQUEsS0FBQSxDQUdBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxRQUFBLEdBQUEsRUFJQSxFQUFBLEdBQUEsRUFvQ0EsSUFuQ0EsR0FBQSxLQUVBLElBQ0EsR0FBQSxFQUFBLFFBQUEsUUFHQSxFQUFBLE1BQ0EsYUFBQSxJQUVBLEdBQUEsRUFHQSxHQUFBLEtBSUEsR0FBQSxJQUVBLEdBQUEsRUFBQSxFQUFBLFFBQUEsSUFFQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsU0FHQSxHQUFBLEVBQUEsUUFBQSxJQUVBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEdBQUEsS0FDQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBQUEsR0FBQSxHQUFBLE1BSUEsR0FBQSxHQUFBLEdBQUEsSUFDQSxHQUFBLEtBQUEsSUFBQSxHQUFBLEtBSUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxVQUFBLElBQUEsR0FBQSxLQXFCQSxHQW5CQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FHQSxFQUFBLEVBQUEsSUFHQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FDQSxHQUFBLEtBR0EsR0FBQSxHQUFBLEtBR0EsRUFBQSxhQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsRUFBQSxNQUtBLEVBQUEsbUJBQUEsRUFBQSxvQkFBQSxDQUVBLEdBQUEsSUFBQSxDQUdBLElBQUEsRUFBQSxvQkFBQSxDQUNBLEdBQUEsR0FBQSxHQUFBLEtBQ0EsR0FBQSxHQUFBLEVBQUEsSUFBQSxJQUlBLEVBQUEsbUJBQUEsRUFDQSxHQUFBLEVBQUEsR0FHQSxFQUFBLHNCQUFBLElBQ0EsR0FBQSxFQUFBLEtBR0EsSUFBQSxHQUFBLElBQUEsSUFDQSxFQUFBLEVBQUEsU0FJQSxJQUFBLEVBQ0EsRUFBQSxFQUFBLEdBR0EsTUFBQSxJQUNBLEdBQUEsRUFDQSxFQUFBLEVBQUEsTUFZQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxhQUtBLE9BQUEsSUFDQSxFQUFBLFFBQUEsT0FBQSxHQUNBLE1BQ0EsSUFNQSxPQUNBLEdBQUEsSUFJQSxHQUFBLEtBR0EsR0FBQSxLQUdBLE1BQUEsS0FDQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEtBQ0EsRUFBQSxtQkFBQSxHQUFBLEVBQUEsbUJBQUEsS0FBQSxHQUVBLEVBQUEsaUJBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxNQUtBLEVBQUEsbUJBQUEsS0FFQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEdBQUEsSUFDQSxLQUFBLElBQ0EsR0FBQSxFQUNBLEVBQUEsRUFBQSxLQUdBLElBQUEsR0FFQSxNQVVBLFFBQUEsS0FFQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFHQSxLQUVBLElBQUEsR0FVQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxhQUdBLEdBQUEsc0JBQ0EsR0FBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEtBUUEsUUFBQSxLQUNBLEdBQUEsT0FBQSxHQUFBLEdBQ0EsR0FBQSxPQUFBLEdBQUEsR0FDQSxHQUFBLE9BQUEsR0FBQSxHQUNBLEdBQUEsT0FBQSxHQUFBLEdBR0EsSUFDQSxHQUFBLE9BQUEsR0FBQSxHQUdBLElBQUEsR0FPQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsRUFHQSxFQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsR0FlQSxRQVpBLEdBQUEsRUFDQSxFQUFBLEdBR0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxvQkFBQSxFQUFBLHFCQUlBLEdBQUEsR0FBQSxHQUFBLEVBQUEsc0JBQ0EsRUFBQSxHQUpBLEVBQUEsRUFPQSxFQVdBLFFBQUEsR0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLE1BbURBLE9BaERBLE1BQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsS0FBQSxNQUFBLEtBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsTUFBQSxLQUFBLEVBRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUlBLE1BQUEsS0FBQSxFQUVBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FJQSxNQUFBLEtBQUEsSUFFQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBTUEsSUFBQSxHQUNBLEVBQUEsR0FJQSxJQUFBLElBRUEsRUFDQSxHQUFBLEVBQUEsUUFBQSxRQUNBLEVBQUEsR0FHQSxFQUFBLElBSUEsRUFjQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLE1BR0EsSUFBQSxHQUFBLEVBQUEsQ0FPQSxHQUhBLEdBQUEsUUFBQSxlQUFBLEVBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsY0FDQSxFQUFBLEVBQUEsWUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsSUFFQSxLQUFBLEdBQUEsT0FBQSxDQU1BLElBQUEsR0FBQSxHQUFBLElBQUEsQ0FLQSxHQUhBLEdBQUEsUUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUVBLEtBQUEsR0FBQSxPQUFBLENBSUEsUUFBQSxJQUNBLElBQUEsR0FFQSxHQUFBLFFBQUEsYUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxZQUNBLEVBQUEsRUFBQSxVQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsY0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxhQUNBLEVBQUEsRUFBQSxXQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsV0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxVQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFFQSxNQUVBLEtBQUEsR0FFQSxHQUFBLFFBQUEsYUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxZQUNBLEVBQUEsRUFBQSxVQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsT0FTQSxHQUFBLEdBQUEsRUFBQSxDQUtBLEdBSEEsR0FBQSxRQUFBLGVBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLGNBQ0EsRUFBQSxFQUFBLFlBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsSUFFQSxLQUFBLEdBQUEsT0FBQSxDQUdBLElBQUEsR0FBQSxHQUFBLElBRUEsT0FBQSxJQUNBLElBQUEsR0FFQSxHQUFBLFFBQUEsV0FBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEdBQUEsS0FHQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLFFBQUEsS0FBQSxHQUFBLEVBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLElBRUEsTUFFQSxLQUFBLEdBRUEsR0FBQSxRQUFBLFlBQUEsSUFBQSxLQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUFBLEtBR0EsRUFBQSxXQUNBLEVBQUEsRUFBQSxTQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsS0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsR0FBQSxNQWtGQSxNQXZFQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLElBQUEsS0FJQSxhQUFBLElBRUEsYUFBQSxJQUdBLE1BQUEsTUFFQSxHQUFBLEtBSUEsR0FBQSxXQUFBLEVBQUEsTUFBQSxXQUNBLEdBQUEsS0FFQSxHQUFBLFFBQUEsT0FBQSxFQUFBLFNBSUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxJQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFFQSxNQUFBLEVBQUEsc0JBR0EsR0FBQSxLQUdBLEdBQUEsUUFBQSxPQUFBLEVBQUEsU0FJQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLElBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxXQUlBLEdBQUEsR0FDQSxJQUFBLEdBQUEsSUFBQSxLQUVBLGFBQUEsSUFDQSxHQUFBLEtBR0EsR0FBQSxRQUFBLGFBQUEsRUFBQSxTQUdBLEVBQUEsWUFDQSxFQUFBLEVBQUEsVUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLFVBR0EsR0FBQSxJQUNBLElBQUEsR0FBQSxJQUFBLEtBRUEsYUFBQSxJQUNBLEdBQUEsS0FHQSxHQUFBLFFBQUEsV0FBQSxFQUFBLFNBR0EsRUFBQSxVQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsVUFLQSxFQWdCQSxRQUFBLEtBQ0EsR0FBQSxJQUFBLENBTUEsT0FKQSxRQUFBLEVBQUEsWUFDQSxFQUFBLElBQUEsRUFBQSxXQUdBLEVBU0EsUUFBQSxLQUNBLEdBQUEsSUFBQSxDQUtBLE9BSkEsUUFBQSxFQUFBLGlCQUFBLE9BQUEsS0FDQSxFQUFBLEdBQUEsSUFBQSxJQUFBLEVBQUEsaUJBR0EsRUFTQSxRQUFBLEtBQ0EsTUFBQSxRQUFBLEVBQUEsZUFDQSxJQUFBLEVBQUEsZ0JBRUEsRUFRQSxRQUFBLEtBQ0EsR0FBQSxFQWFBLE9BUkEsR0FGQSxFQUFBLGlCQUNBLElBQUEsRUFBQSxrQkFDQSxHQUVBLEdBR0EsRUFlQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxrQkFBQSxHQUFBLElBQ0EsRUFBQSxxQkFDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLGtCQUFBLENBRUEsUUFBQSxHQUNBLElBQUEsSUFDQSxFQUFBLFdBQUEsSUFBQSxHQUFBLEVBQUEsaUJBQUEsSUFDQSxFQUFBLGdCQUVBLE1BRUEsS0FBQSxJQUNBLEVBQUEsWUFBQSxJQUFBLEdBQUEsRUFBQSxpQkFBQSxJQUNBLEVBQUEsZ0JBRUEsTUFFQSxLQUFBLElBQ0EsRUFBQSxTQUFBLElBQUEsR0FBQSxFQUFBLGlCQUFBLElBQ0EsRUFBQSxnQkFFQSxNQUVBLEtBQUEsSUFDQSxFQUFBLFdBQUEsSUFBQSxHQUFBLEVBQUEsaUJBQUEsSUFDQSxFQUFBLG1CQWVBLFFBQUEsS0FDQSxHQUFBLEdBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxHQUNBLE9BQUEsSUFBQSxHQUFBLEVBU0EsUUFBQSxLQUVBLFNBQUEsRUFBQSxhQUFBLEVBQUEsU0FBQSxFQUFBLFVBUUEsUUFBQSxLQUVBLFNBQUEsTUFBQSxLQVlBLFFBQUEsS0FFQSxHQUFBLEdBQUEsSUFDQSxFQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsSUFDQSxFQUFBLElBSUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLENBRUEsT0FBQSxHQVFBLFFBQUEsS0FFQSxTQUFBLEVBQUEsT0FBQSxFQUFBLGFBQUEsRUFBQSxXQUFBLEVBQUEsWUFBQSxFQUFBLFNBQUEsRUFBQSxXQVNBLFFBQUEsS0FFQSxTQUFBLE1BQUEsS0FRQSxRQUFBLEtBRUEsTUFBQSxNQUFBLEVBQUEsU0FBQSxFQUFBLFVBQUEsSUFBQSxFQVFBLFFBQUEsS0FFQSxNQUFBLEtBQUEsR0FBQSxHQUFBLElBQUEsRUFTQSxRQUFBLEtBRUEsUUFBQSxFQUFBLElBUUEsUUFBQSxLQUVBLFFBQUEsRUFBQSxVQVFBLFFBQUEsS0FFQSxRQUFBLEVBQUEsUUFRQSxRQUFBLEtBQ0EsR0FBQSxNQUFBLEdBQ0EsT0FBQSxDQUVBLElBQUEsR0FBQSxJQUNBLE9BQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxtQkFRQSxRQUFBLE1BQ0EsTUFBQSxLQVNBLFFBQUEsTUFDQSxPQUFBLElBQUEsS0FBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsV0FRQSxRQUFBLE1BRUEsTUFBQSxJQUFBLEVBQUEsa0JBQUEsRUFBQSxHQVFBLFFBQUEsTUFFQSxTQUFBLE9BQUEsS0FTQSxRQUFBLE1BRUEsU0FBQSxNQUFBLEtBUUEsUUFBQSxNQUVBLFNBQUEsT0FBQSxLQVdBLFFBQUEsTUFDQSxHQUFBLEtBQ0EsR0FBQSxNQUFBLFFBQUEsT0FBQSxFQU9BLFFBQUEsTUFDQSxHQUFBLEVBQ0EsR0FBQSxFQVFBLFFBQUEsTUFFQSxHQUFBLElBQUEsQ0FFQSxJQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxFQUNBLElBQUEsRUFBQSx5QkFDQSxHQUFBLEdBSUEsTUFBQSxHQVNBLFFBQUEsTUFFQSxRQUFBLEdBQUEsS0FBQSxFQUFBLGVBQUEsR0FRQSxRQUFBLElBQUEsR0FHQSxLQUFBLEdBQ0EsR0FBQSxLQUFBLEdBQUEsR0FDQSxHQUFBLEtBQUEsR0FBQSxHQUdBLElBQ0EsR0FBQSxLQUFBLEdBQUEsS0FHQSxHQUFBLE9BQUEsR0FBQSxHQUFBLEdBQ0EsR0FBQSxPQUFBLEdBQUEsR0FBQSxHQUdBLElBQ0EsR0FBQSxPQUFBLEdBQUEsR0FBQSxJQU1BLEdBQUEsS0FBQSxFQUFBLFdBQUEsS0FBQSxHQVdBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxXQUFBLEVBQUEsV0FBQSxDQU1BLE9BSkEsSUFBQSxHQUFBLFdBQUEsRUFDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFDQSxHQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFFQSxHQUFBLEdBU0EsUUFBQSxJQUFBLEdBRUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxXQUFBLEVBQUEsV0FBQSxFQUNBLEVBQUEsR0FBQSxFQUtBLE9BSEEsR0FBQSxJQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsUUFDQSxFQUFBLElBQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxRQUVBLEVBV0EsUUFBQSxJQUFBLEdBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxJQUNBLEdBQUEsR0FBQSxHQUFBLFlBQUEsRUFDQSxNQUFBLElBQUEsR0FVQSxRQUFBLE1BRUEsSUFBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLEVBQUEsTUFDQSxPQUNBLEVBQUEsRUFDQSxFQUFBLEdBRUEsS0FDQSxFQUFBLEVBQ0EsRUFBQSxHQUVBLFdBQUEsR0FJQSxPQUFBLEdBVUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsSUFBQSxFQUFBLEdBQUEsSUFDQSxHQUFBLEdBQUEsU0FBQSxFQVNBLFFBQUEsSUFBQSxHQUNBLE1BQUEsSUFBQSxHQUFBLEdBQUEsR0FBQSxTQUNBLE9BUUEsUUFBQSxNQUNBLEdBQUEsS0FNQSxPQUxBLEdBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxHQUFBLEdBRUEsRUFTQSxRQUFBLElBQUEsR0FDQSxPQUNBLFVBQUEsRUFDQSxTQUFBLEdBY0EsUUFBQSxNQUNBLE1BQUEsSUFBQSxHQVVBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBRUEsT0FBQSxNQUFBLE1BQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLElBVUEsUUFBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxHQUFBLFFBQUEsR0FVQSxRQUFBLE1BQ0EsTUFBQSxHQUFBLEdBQ0EsRUFFQSxFQVlBLFFBQUEsSUFBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsS0FBQSxJQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsS0FVQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsSUFBQSxFQUFBLEtBQUEsR0FPQSxPQUpBLEdBQUEsSUFDQSxFQUFBLElBQUEsS0FBQSxJQUFBLElBR0EsRUFZQSxRQUFBLElBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQUEsRUFFQSxPQUFBLEtBQUEsR0FBQSxHQUFBLEVBQ0EsRUFDQSxLQUFBLEdBQUEsR0FBQSxJQUNBLEVBQ0EsR0FBQSxLQUFBLEtBQUEsRUFDQSxFQUNBLEVBQUEsSUFBQSxJQUFBLEVBQ0EsRUFFQSxFQVVBLFFBQUEsTUFDQSxHQUFBLEdBQUEsR0FBQSxLQUNBLE9BQUEsR0FBQSxVQVNBLFFBQUEsSUFBQSxHQUNBLEVBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLFNBRUEsR0FDQSxLQUFBLEVBQUEsS0FDQSxNQUFBLEVBQUEsS0FBQSxFQUFBLGFBQ0EsSUFBQSxFQUFBLElBQ0EsT0FBQSxFQUFBLElBQUEsRUFBQSxjQUdBLE9BQUEsR0FlQSxRQUFBLElBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsT0E5NUNBLEdBQUEsSUFBQSxHQUFBLElBQUEsRUFBQSxzQkFDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGdCQUFBLGNBQUEsYUFBQSxZQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsZ0JBQUEsY0FBQSxZQUFBLFlBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxjQUFBLFlBQUEsV0FBQSxVQUNBLEdBQUEsR0FBQSxLQUFBLGFBQ0EsR0FBQSxFQUFBLEVBQUEsa0JBQUEsZ0JBQUEsY0FLQSxHQUFBLEVBQ0EsR0FBQSxLQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsS0FLQSxHQUFBLEVBQUEsR0FHQSxHQUFBLFFBR0EsR0FBQSxFQUdBLEdBQUEsS0FHQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLEdBQUEsRUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUdBLEdBQUEsS0FDQSxHQUFBLElBR0EsS0FDQSxHQUFBLEtBQUEsR0FBQSxHQUNBLEdBQUEsS0FBQSxHQUFBLEdBQ0EsTUFBQSxJQUNBLEVBQUEsTUFBQSx3QkFBQSxHQUFBLElBQUEsR0FBQSxvQkFjQSxLQUFBLE9BQUEsV0FHQSxNQUZBLElBQUEsS0FBQSxHQUFBLEdBQ0EsR0FBQSxLQUFBLEdBQUEsR0FDQSxJQVVBLEtBQUEsUUFBQSxXQUVBLE1BREEsS0FDQSxJQVVBLEtBQUEsUUFBQSxXQUdBLE1BRkEsS0FDQSxHQUFBLEtBQUEsRUFBQSxNQUNBLElBZ0JBLEtBQUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLFNBQUEsRUFBQSxHQUFBLENBQ0EsR0FBQSxTQUFBLEVBQ0EsTUFBQSxHQUFBLEVBRUEsR0FBQSxHQUFBLE1BR0EsR0FBQSxNQUFBLFVBQUEsRUFBQSwwQ0FHQSxPQUFBLE9BcFlBLEdBQUEsR0FBQSxPQUNBLEVBQUEsUUFDQSxFQUFBLEtBQ0EsRUFBQSxPQUNBLEVBQUEsS0FDQSxFQUFBLE1BRUEsRUFBQSxPQUNBLEVBQUEsT0FFQSxFQUFBLFFBQ0EsRUFBQSxRQUNBLEVBQUEsTUFDQSxFQUFBLFlBQ0EsRUFBQSxVQUdBLEVBQUEsYUFDQSxFQUFBLFdBRUEsRUFBQSxNQUVBLEVBQUEsR0FFQSxFQUFBLFFBQ0EsRUFBQSxPQUNBLEVBQUEsTUFDQSxFQUFBLFNBRUEsRUFBQSxnQkFBQSxRQUVBLEVBQUEsT0FBQSxVQUFBLG1CQUFBLE9BQUEsVUFBQSxlQUVBLEVBQUEsT0FBQSxVQUFBLGdCQUFBLE9BQUEsVUFBQSxpQkFFQSxFQUFBLGFBeUNBLEdBQ0EsUUFBQSxFQUNBLFVBQUEsR0FDQSxnQkFBQSxLQUNBLGVBQUEsR0FDQSxpQkFBQSxLQUNBLHVCQUFBLElBQ0EsaUJBQUEsSUFDQSxtQkFBQSxJQUNBLE1BQUEsS0FDQSxVQUFBLEtBQ0EsV0FBQSxLQUNBLFFBQUEsS0FDQSxVQUFBLEtBQ0EsWUFBQSxLQUNBLFFBQUEsS0FDQSxTQUFBLEtBQ0EsWUFBQSxLQUNBLE1BQUEsS0FDQSxJQUFBLEtBQ0EsVUFBQSxLQUNBLFFBQUEsS0FDQSxLQUFBLEtBQ0EsbUJBQUEsRUFDQSxxQkFBQSxFQUNBLGdCQUFBLE9BQ0EsdUJBQUEsRUFDQSxpQkFBQSxzREFpQkEsR0FBQSxHQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEtBQUEsRUFHQSxJQUFBLEdBQUEsZ0JBQUEsR0FBQSxDQUNBLEdBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxHQUFBLE1BQUEsS0FBQSxNQUFBLFVBQUEsTUFBQSxLQUFBLFVBQUEsR0FFQSxHQUFBLE1BQUEsVUFBQSxFQUFBLHVDQUlBLE1BQUEsR0FBQSxnQkFBQSxJQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxVQUdBLE9BQUEsSUFJQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEVBWUEsRUFBQSxHQUFBLE1BQUEsUUFDQSxZQUFBLEVBQ0EsV0FBQSxFQUNBLFVBQUEsRUFDQSxhQUFBLEdBZUEsRUFBQSxHQUFBLE1BQUEsWUFDQSxLQUFBLEVBQ0EsTUFBQSxFQUNBLEdBQUEsRUFDQSxLQUFBLEVBQ0EsR0FBQSxFQUNBLElBQUEsR0FjQSxFQUFBLEdBQUEsTUFBQSxZQUNBLEtBQUEsRUFDQSxXQUFBLEVBQ0EsU0FBQSxFQUNBLEtBQUEsR0FlQSxFQUFBLEdBQUEsTUFBQSxTQUNBLElBQUEsRUFDQSxJQUFBLEVBQ0EsTUFBQSxFQUNBLElBQUEsSUM1T0EsSUFBQSxPQUVBLFlBR0EsV0FHQSxVQUFBLElBR0EsU0FBQSxFQUdBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUVBLEtBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsRUFHQSxPQUFBLElBSUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxhQUFBLE9BQUEsRUFBQSxPQUFBLEdBQUEsR0FJQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsSUFBQSxFQUNBLEtBQUEsS0FBQSxFQUNBLEtBQUEsT0FBQSxFQUNBLEtBQUEsS0FBQSxJQUdBLEtBQUEsU0FBQSxXQUNBLE1BQUEsTUFBQSxJQUFBLEtBQUEsS0FBQSxPQUFBLElBS0EsTUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBR0EsSUFBQSxFQUFBLEVBQUEsUUFBQSxDQUdBLEVBQUEsRUFBQSxNQUFBLEtBQUEsV0FHQSxFQUFBLEVBQUEsUUFBQSxNQUVBLEtBRUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxNQUFBLE1BQUEsR0FBQSxPQUFBLElBR0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUVBLE1BQUEsS0FLQSxNQUFBLElBSUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBR0EsR0FDQSxFQUpBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUlBLElBQUEsWUFBQSxPQUlBLElBSEEsRUFBQSxHQUNBLEVBQUEsRUFBQSxTQUVBLEVBQUEsR0FDQSxHQUNBLEtBQUEsR0FBQSxNQUFBLE1BQUEsRUFBQSxJQUVBLEdBQUEsRUFBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BR0EsYUFBQSxVQUNBLEVBQUEsS0FBQSxHQUFBLEVBQUEsR0FHQSxPQUFBLElBSUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxNQUFBLHFCQUdBLFFBQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsSUFJQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsSUFDQSxFQUFBLE1BQ0EsSUFHQSxHQUNBLEVBSkEsRUFBQSxTQUFBLEVBQUEsc0JBQUEsRUFBQSxTQUNBLEVBQUEsR0FBQSxRQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsTUFBQSxPQUdBLEVBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxHQUNBLEVBQUEsQ0FFQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsU0FDQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEVBQUEsR0FFQSxFQUFBLEdBQUEsUUFBQSxPQUFBLEdBQ0EsSUFHQSxJQUdBLElBQUEsR0FYQSxLQXFCQSxNQUxBLEdBQUEsRUFBQSxRQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxHQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUdBLEVBQUEsVUFBQSxFQUFBLEdBQUEsRUFBQSxVQUFBLEVBQUEsS0FLQSxNQUFBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLE1BQ0EsRUFBQSxLQUdBLElBSUEsR0FFQSxFQUVBLEVBSUEsRUFFQSxFQUVBLEVBRUEsRUFFQSxFQUVBLEVBRUEsRUF4QkEsRUFBQSxpQkFFQSxFQUFBLEVBQUEsTUFBQSxPQVFBLEtBZ0JBLEVBQUEsRUFDQSxFQUFBLENBNEJBLEtBekJBLEVBQUEsT0FDQSxLQUFBLE1BQUEsRUFBQSxNQUFBLEtBQUEsT0FJQSxFQUFBLFVBQ0EsS0FBQSxNQUFBLEVBQUEsU0FBQSxLQUFBLFVBSUEsRUFBQSxTQUNBLEtBQUEsTUFBQSxFQUFBLFFBQUEsS0FBQSxTQUlBLEVBQUEsWUFDQSxLQUFBLFVBQUEsRUFBQSxXQUlBLFNBQUEsRUFBQSxVQUNBLEtBQUEsUUFBQSxFQUFBLFNBSUEsRUFBQSxFQUFBLE1BNkJBLEdBNUJBLEVBQUEsT0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLFFBQUEsT0FBQSxHQUNBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxRQUFBLFdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEtBQUEsS0FFQSxFQUFBLElBQUEsRUFBQSxPQUFBLFFBQUEsT0FDQSxFQUFBLEVBQUEsTUFBQSxLQUNBLEVBQUEsUUFDQSxFQUFBLEVBQUEsUUFBQSxTQUFBLElBQUEsTUFBQSxLQUFBLFFBQUEsT0FDQSxFQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsS0FBQSxHQUNBLEVBQUEsRUFBQSxHQUdBLElBQUEsRUFBQSxTQUNBLEdBQUEsY0FJQSxHQUFBLEVBQUEsUUFBQSxNQUFBLEdBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLE1BQUEsR0FBQSxPQUFBLElBSUEsdUJBQUEsS0FBQSxHQUFBLENBS0EsR0FBQSxVQUFBLEVBQUEsS0FBQSxRQUFBLElBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBO0lBSUEsSUFBQSxFQUFBLEtBQUEsU0FBQSxHQUNBLFlBQUEsWUFDQSxFQUFBLEtBRUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLE9BSUEsSUFBQSxFQUFBLFFBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLE9BSUEsSUFBQSxNQUFBLEVBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxPQUlBLElBQUEsRUFBQSxRQUFBLEtBQUEsR0FBQSxDQWFBLElBWkEsRUFBQSxFQUFBLE1BQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxFQUFBLElBRUEsRUFDQSxFQUFBLEdBR0EsRUFBQSxFQUNBLEVBQUEsR0FJQSxHQUFBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLEtBR0EsR0FBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLE9BSUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBSUEsWUFBQSxPQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxHQUlBLEVBQ0EsRUFBQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsT0FJQSxFQUFBLGVBQUEsS0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBSUEsYUFBQSxTQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxJQUlBLElBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsSUFJQSxFQUFBLEVBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxNQUFBLEdBR0EsTUFBQSxNQUFBLFFBQUEsRUFBQSxRQUFBLFNBQUEsTUFBQSxHQUlBLEtBQUEsT0FDQSxNQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxFQUFBLElBQUEsT0FBQSxRQUFBLEVBQUEsR0FFQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxJQUFBLE9BQUEsT0FBQSxHQUFBLEdBRUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsSUFBQSxFQUFBLEVBQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLEdBQUEsRUFBQSxHQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxHQUVBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsUUFBQSxTQUFBLEVBQUEsRUFBQSxHQUVBLE1BREEsR0FBQSxLQUFBLE1BQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxVQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsSUFBQSxRQUFBLEVBQUEsS0FBQSxLQUFBLEdBQUEsR0FBQSxHQUVBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxHQUVBLE9BQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLGVBRUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxRQUFBLEdBQUEsZUFFQSxRQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxjQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsaUJBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsTUFBQSxHQUVBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxNQUNBLE9BQUEsR0FBQSxNQUFBLEVBQUEsR0FBQSxLQUFBLE1BQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLFFBQUEsVUFBQSxNQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsTUFBQSxPQUFBLElBRUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxRQUFBLEdBQUEsUUFBQSxlQUFBLEtBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBRUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBRUEsUUFBQSxTQUFBLEdBQ0EsU0FBQSxPQUFBLEdBQUEsV0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLElBRUEsTUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLEdBQUEsR0FBQSxJQUFBLEdBQUEsS0FFQSxNQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEdBQUEsTUFFQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsR0FBQSxJQUVBLE9BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEtBQUEsRUFBQSxNQUFBLFFBQUEsUUFBQSxFQUFBLE1BQUEsR0FFQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUVBLFVBQUEsT0FBQSxHQUFBLEtBQUEsRUFBQSxFQUFBLFNBRUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxRQUFBLEdBQUEsUUFBQSxJQUVBLElBQUEsU0FBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEdBRUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxHQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUFBLEdBQUEsR0FBQSxHQUFBLEdBRUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsR0FBQSxHQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsR0FDQSxNQUFBLFlBQUEsRUFBQSxRQUFBLGFBQUEsTUFFQSxJQUFBLFNBQUEsR0FDQSxNQUFBLFdBQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxRQUFBLEdBRUEsTUFBQSxTQUFBLEdBQ0EsT0FBQSxHQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsS0FBQSxFQUFBLEtBRUEsS0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE1BQUEsRUFBQSxLQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxNQUFBLEtBQUEsTUFBQSxLQUFBLFVBQUEsS0FFQSxJQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxRQUFBLEdBQUEsRUFBQSxJQUVBLElBQUEsU0FBQSxHQUVBLE1BREEsU0FBQSxJQUFBLEdBQ0EsSUFLQSxrQkFBQSxRQUFBLFVBQUEsT0FDQSxPQUFBLFVBQUEsS0FBQSxXQUNBLE1BQUEsTUFBQSxRQUFBLGFBQUEsTUFLQSxtQkFBQSxTQUFBLE9BQUEsUUFDQSxPQUFBLFFBQUEsS0FFQSxrQkFBQSxTQUFBLE9BQUEsS0FDQSxPQUFBLFdBQ0EsTUFBQSxPSmhlQSxJQUFBLFFBQUEsU0FBQSxHQUVBLFlBNkNBLFNBQUEsS0FJQSxHQUNBLEdBREEsRUFBQSxFQUFBLFVBT0EsT0FMQSxZQUFBLFdBQ0EsR0FBQSxZQUFBLFVBQUEsTUFBQSxNQUFBLFNBQUEsVUFBQSxZQUNBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsSUFDQSxLQUNBLEVBQUEsVUFRQSxRQUFBLEdBQUEsR0FHQSxDQUFBLEdBQUEsTUFDQSxJQUNBLEdBQUEsT0FhQSxNQVhBLEdBQUEsS0FBQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxPQUVBLEdBQUEsS0FBQSxFQUFBLElBQUEsR0FBQSxLQUFBLFNBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLElBQ0EsS0FBQSxXQUNBLEVBQUEsR0FBQSxFQUFBLEdBQUEsU0FLQSxFQUFBLEtBQUEsTUFBQSxLQUFBLEdBQUEsVUFRQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEVBRUEsS0FDQSxFQUFBLDBEQUVBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxDQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQUlBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsT0FDQSxFQUFBLEVBQUEsSUFBQSxFQUVBLEdBQUEsS0FBQSxFQUFBLFVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxPQVVBLFFBQUEsR0FBQSxFQUFBLEdBRUEsR0FxQkEsR0FDQSxFQXRCQSxLQUNBLEVBQUEsbXNCQW1CQSxFQUFBLEVBQUEsU0FHQSxRQUFBLEdBQ0EsSUFBQSxJQUNBLEVBQUEsWUFDQSxFQUFBLFFBQ0EsTUFDQSxLQUFBLE1BQ0EsRUFBQSxVQUNBLEVBQUEsTUFDQSxNQUNBLEtBQUEsS0FDQSxFQUFBLGVBQ0EsRUFBQSxXQUNBLE1BQ0EsS0FBQSxLQUNBLEVBQUEsa0JBQ0EsRUFBQSxjQUNBLE1BQ0EsS0FBQSxLQUNBLEVBQUEsY0FDQSxFQUFBLFVBQ0EsTUFDQSxLQUFBLFFBQ0EsRUFBQSxlQUNBLEVBQUEsV0FDQSxNQUNBLEtBQUEsUUFDQSxFQUFBLGFBQ0EsRUFBQSxVQUtBLEdBQUEsR0FBQSxFQUFBLFNBQUEsU0FDQSxFQUFBLEtBQUEsS0FBQSxFQUFBLEVBQUEsVUFDQSxFQUFBLEdBQUEsTUFBQSxFQUFBLGFBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxDQUNBLEdBQUEsS0FBQSxNQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsR0FBQSxFQUVBLElBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxRQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxZQUNBLEdBQUEsUUFBQSxFQUFBLEVBRUEsSUFBQSxHQUFBLEVBQUEsVUFDQSxHQUFBLFFBQUEsRUFBQSxFQUNBLElBQUEsR0FBQSxFQUFBLFlBQ0EsR0FBQSxRQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxDQUdBLElBQUEsSUFBQSxLQUFBLFNBQUEsRUFDQSxHQUFBLElBQUEsQ0FFQSxJQUFBLElBQUEsS0FBQSxTQUFBLEVBQ0EsR0FBQSxJQUFBLENBSUEsSUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLElBQUEsQ0FHQSxJQUNBLE1BQUEsRUFDQSxJQUFBLEVBQUEsS0FDQSxZQUFBLEVBQUEsS0FDQSxZQUFBLEVBQUEsWUFDQSxVQUFBLEVBQUEsVUFDQSxpQkFBQSxFQUNBLFNBQUEsRUFDQSxVQUFBLEVBQUEsY0FDQSxPQUFBLEVBQUEsT0FDQSxTQUFBLEVBQUEsU0FDQSxJQUFBLE9BQUEsRUFDQSxJQUFBLE9BQUEsRUFDQSxTQUFBLE9BQUEsRUFHQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxPQUFBLEdBTUEsUUFBQSxHQUFBLEdBRUEsR0FBQSxHQUFBLEdBQUEsRUFDQSxLQUNBLEVBQUEsaUZBRUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLEdBQUEsTUFBQSxLQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQVFBLFFBQUEsS0FDQSxHQUNBLEdBQUEsRUFEQSxFQUFBLEdBQUEsTUFHQSxJQUNBLEdBQUEsUUFDQSxFQUFBLFFBQ0EsSUFBQSxHQUFBLDZKQUtBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLENBRUEsRUFBQSxRQUFBLEVBQUEsVUFBQSxNQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsbUJBQUEsU0FDQSxRQUFBLE9BRUEsTUFBQSxPQUNBLElBQUEsWUFHQSxFQUFBLEVBQUEsRUFBQSxFQU9BLEtBTkEsRUFBQSxLQUFBLE1BQ0EsSUFBQSxFQUNBLElBQUEsSUFFQSxFQUFBLE1BQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxRQUFBLEVBQUEsR0FBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxDQUVBLEdBQUEsTUFBQSxNQUNBLE1BQUEsRUFDQSxJQUFBLEtBS0EsR0FBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEdBU0EsUUFBQSxLQUVBLEdBQUEsTUFDQSxFQUFBLG1GQUVBLEdBQUEsUUFBQSxTQUFBLEdBRUEsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsRUFFQSxJQUNBLFFBQUEsRUFDQSxHQUFBLEVBR0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxLQUFBLE1BQUEsT0FBQSxLQVFBLFFBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSxFQUNBLEVBQUEsRUFBQSxFQUVBLEVBQUEsRUFBQSxlQUNBLE9BQ0EsS0FBQSxLQUFBLEtBQUEsRUFBQSxJQUFBLEdBQUEsTUFDQSxPQUVBLEVBQUEsU0FBQSxHQUFBLEVBQUEsU0FBQSxHQUFBLENBQ0EsR0FBQSxLQUNBLEtBQUEsSUFRQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsU0FBQSxFQUFBLElBQUEsUUFDQSxHQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLEtBQ0EsRUFBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsSUFDQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxLQW1CQSxRQUFBLEtBcURBLFFBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQ0EsS0FBQSxTQUFBLEtBQUEsVUFDQSxLQUFBLFVBQUEsS0FBQSxXQUNBLEtBQUEsY0FBQSxFQUFBLFFBQ0EsS0FBQSxjQUFBLEVBQUEsUUFDQSxHQUFBLEVBQ0EsR0FBQSxFQUdBLEVBQUEsR0FBQSxtQkFBQSxHQUVBLEVBQUEsR0FBQSxzQkFBQSxHQUdBLFFBQUEsS0FDQSxJQUNBLEdBQUEsRUFDQSxFQUFBLElBQUEsbUJBQUEsR0FDQSxFQUFBLElBQUEsc0JBQUEsSUFJQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEVBQUEsQ0FFQSxHQUFBLEdBQUEsRUFBQSxRQUFBLEtBQUEsY0FDQSxFQUFBLEVBQUEsUUFBQSxLQUFBLGFBR0EsR0FBQSxLQUFBLElBQUEsR0FBQSxHQUFBLEtBQUEsSUFBQSxHQUFBLENBRUEsSUFBQSxHQUFBLEtBQUEsU0FBQSxFQUNBLEVBQUEsS0FBQSxVQUFBLENBRUEsR0FBQSxJQUNBLEVBQUEsR0FHQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEVBQUEsS0FBQSxJQUFBLEdBQUEsS0FDQSxFQUFBLEVBQUEsS0FBQSxJQUFBLEdBQUEsSUFHQSxFQUFBLEVBQUEsR0FBQSxLQUFBLElBQUEsS0FDQSxFQUFBLEVBQUEsR0FBQSxLQUFBLElBQUEsSUFHQSxFQUFBLE1BQUEsS0FDQSxJQUFBLEVBQUEsS0FDQSxLQUFBLEVBQUEsT0FFQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLE9BRUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxNQUVBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsS0FDQSxLQUFBLEVBQUEsUUFVQSxRQUFBLEtBQ0EsR0FBQSxHQUFBLFNBQUEsRUFBQSxNQUFBLElBQUEsUUFDQSxHQUFBLFNBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxHQVFBLFFBQUEsS0FDQSxHQUFBLEdBQUEsR0FBQSxTQUFBLEVBQUEsTUFBQSxLQUFBLE1BQ0EsR0FBQSxFQUFBLEdBUUEsUUFBQSxHQUFBLEdBQ0EsSUFBQSxFQUFBLENBQ0EsR0FBQSxDQUNBLElBQUEsR0FBQSxTQUFBLGlCQUFBLEVBQUEsUUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLEdBQUEsR0FBQSxpQkFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLFFBQUEsaUJBRUEsRUFBQSxFQUFBLEtBQUEsS0FBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLEtBQUEsS0FDQSxHQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsU0FBQSxFQUFBLElBQUEsU0FBQSxHQUFBLEVBQUEsT0FDQSxHQUFBLFNBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxJQVVBLFFBQUEsR0FBQSxHQWlDQSxRQUFBLEtBQ0EsSUFBQSxTQUFBLEVBQUEsSUFBQSxXQUNBLEVBQUEsT0FBQSxTQUNBLE9BQUEsR0FDQSxJQUFBLFNBbENBLElBRUEsRUFBQSxNQUNBLElBQUEscUJBQ0EsTUFDQSxPQUFBLEdBRUEsU0FBQSxPQUNBLE9BQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxFQUNBLEtBQUEsY0FDQSxLQUFBLEdBQ0EsRUFDQSxLQUFBLFNBQUEsY0FDQSxPQUFBLE1BQ0Esc0JBQUEsRUFDQSxlQUFBLElBRUEsRUFBQSxTQUNBLE1BQUEsR0FDQSxJQUFBLFFBQUEsV0FDQSxFQUFBLEtBQUEsV0FBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsaUJBQ0EsVUFvQkEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxlQUFBLEtBQUEsU0FBQSxNQUFBLEtBQUEsRUFFQSxHQUFBLFNBQUEsSUFDQSxFQUFBLFlBQUEsR0FDQSxFQUFBLE1BQUEsWUFBQSxZQUVBLEVBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxTQUFBLFdBT0EsUUFBQSxLQUNBLEVBQUEsUUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxLQUFBLGdCQUFBLEVBQUEsS0FBQSxRQUFBLFdBVUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsQ0FDQSxHQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxLQUNBLEVBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLElBQ0EsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsS0FRQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGVBQUEsS0FBQSxTQUFBLE1BQUEsS0FBQSxHQUNBLEVBQUEsRUFBQSxJQUFBLE9BQUEsTUFBQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLElBQUEsT0FBQSxNQUFBLE1BQUEsR0FDQSxFQUFBLEVBQUEsTUFDQSxRQUFBLEdBQ0EsSUFBQSxZQUVBLEVBQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsTUFBQSxFQUFBLEtBRUEsRUFBQSxJQUFBLE1BQUEsRUFBQSxNQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsTUFFQSxNQUNBLEtBQUEsV0FFQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsS0FFQSxFQUFBLElBQUEsTUFBQSxFQUFBLE1BQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxRQVdBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsZUFBQSxLQUFBLFNBQUEsTUFBQSxLQUFBLEdBQ0EsRUFBQSxTQUFBLEVBQUEsSUFBQSxRQUlBLFFBSEEsRUFBQSxrQkFDQSxRQUFBLElBQUEsR0FFQSxHQUNBLElBQUEsVUFDQSxFQUFBLEtBQUEsTUFBQSxTQUFBLEVBQUEsSUFDQSxNQUNBLEtBQUEsV0FDQSxFQUFBLEtBQUEsTUFBQSxTQUFBLEVBQUEsTUF6VEEsR0FBQSxHQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsU0FFQSxHQURBLEVBQUEsWUFDQSxFQUFBLFNBQ0EsR0FBQSxFQUNBLEdBQUEsRUFFQSxFQUFBLEVBQUEsMENBQ0EsSUFDQSxHQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxLQUFBLGFBRUEsSUFBQSxHQUFBLEVBQUEsTUFFQSxFQUFBLEVBQUEseUNBQ0EsSUFDQSxHQUFBLEtBQUEsRUFBQSxXQUNBLEVBQUEsS0FBQSxLQUFBLFdBQUEsRUFBQSxNQUFBLFVBRUEsSUFBQSxHQUFBLEVBQUEsS0FHQSxHQUFBLEtBQUEsb0JBQUEsU0FJQSxFQUFBLEdBQUEsdUJBQUEsR0FPQSxFQUFBLEdBQUEsUUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLGFBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxLQUFBLEdBQ0EsSUFHQSxFQUFBLEdBQUEsUUFBQSxLQUFBLEdBR0EsRUFBQSxHQUFBLFFBQUEsT0FBQSxHQUVBLEVBQUEsR0FBQSxRQUFBLE9BQUEsR0FrUkEsUUFBQSxLQUVBLEdBQUEsR0FBQSxFQUFBLHNDQUNBLEVBQUEsNEJBRUEsS0FDQSxFQUFBLDBFQUVBLEdBQUEsVUFHQSxFQUFBLElBQUEsR0FDQSxLQUFBLFNBQUEsR0FDQSxFQUFBLENBRUEsSUFBQSxNQUNBLEVBQUEsdUtBTUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBRUEsS0FBQSxRQUFBLGFBQUEsRUFDQSxHQUNBLE1BQUEsRUFDQSxRQUFBLEdBR0EsRUFBQSxPQUFBLEtBQUEsRUFFQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsSUFJQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEtBQUEsZ0JBQUEsT0FBQSxHQUVBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLEdBR0EsRUFBQSxLQUFBLEVBQUEsS0FBQSxjQUFBLFdBRUEsSUFBQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEtBQUEsYUFDQSxFQUFBLE1BQUEsS0FBQSxVQUFBLFNBQUEsU0FJQSxFQUNBLEtBQUEsU0FBQSxjQUNBLE9BQUEsTUFDQSxzQkFBQSxFQUNBLGVBQUEsTUFXQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsK0JBRUEsS0FDQSxFQUFBLGlIQUtBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQUdBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLEdBQ0EsRUFDQSxLQUFBLFNBQ0EsY0FDQSxPQUFBLE1BQ0Esc0JBQUEsRUFDQSxlQUFBLElBUUEsUUFBQSxLQWtFQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLFVBQ0EsRUFBQSxFQUFBLFNBQUEsT0FDQSxFQUFBLEVBQUEsTUFBQSxLQUFBLFdBQ0EsRUFBQSxFQUFBLEtBQUEsY0FBQSxPQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxhQUFBLEdBR0EsSUFVQSxFQUFBLFlBQUEsT0FDQSxFQUFBLEtBQUEsVUFBQSxZQUFBLFNBVEEsRUFBQSxZQUFBLE9BQ0EsRUFBQSxPQUNBLEVBQUEsS0FBQSxVQUFBLFlBQUEsT0FFQSxFQUFBLE1BQUEsUUFBQSxTQUFBLEVBQUEsS0FBQSxRQVFBLEVBQ0EsS0FBQSxTQUNBLGVBQ0EsY0FDQSxPQUFBLFdBa0JBLFFBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQ0EsSUFBQSxHQUFBLEVBQUEsTUFBQSxPQUFBLGNBQUEsS0FBQSxXQUNBLEVBQUEsRUFBQSxLQUFBLGNBQUEsT0FBQSxXQUNBLE1BQUEsR0FBQSxNQUFBLEtBQUEsYUFBQSxHQUdBLEdBQUEsTUFBQSxZQUFBLE9BQ0EsRUFBQSxLQUFBLFVBQUEsWUFBQSxPQVFBLFFBQUEsS0FDQSxFQUFBLE1BQUEsWUFBQSxVQUNBLEVBQUEsT0FBQSxRQUNBLEVBQ0EsS0FBQSxTQUNBLGVBQ0EsY0FDQSxPQUFBLE1BQ0EsZUFBQSxJQUVBLEVBQ0EsS0FBQSxTQUNBLGVBQ0EsY0FDQSxPQUFBLFFBU0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxTQUNBLEVBQUEsRUFBQSxLQUFBLGNBQ0EsRUFBQSxFQUFBLE1BQUEsU0FBQSxTQUVBLElBQUEsRUFDQSxFQUFBLE9BQ0EsRUFBQSxNQUFBLFlBQUEsY0FDQSxDQUNBLEdBQUEsR0FBQSxFQUFBLE9BQUEsV0FDQSxNQUFBLEdBQUEsTUFBQSxLQUFBLFVBQUEsR0FFQSxHQUFBLE9BQ0EsRUFBQSxJQUFBLEdBQUEsT0FDQSxFQUFBLE1BQUEsU0FBQSxVQUdBLEVBQ0EsS0FBQSxTQUNBLGVBQ0EsY0FDQSxPQUFBLFFBUUEsUUFBQSxLQUNBLENBQUEsR0FBQSxHQUFBLEVBQUEsY0FDQSxFQUFBLEVBQUEsS0FDQSxHQUFBLEtBQUEsY0FDQSxFQUFBLFFBQUEsR0FBQSxLQUFBLEdBQUEsSUFBQSxHQUFBLFFBQUEsR0FDQSxRQUFBLElBQUEsR0FyTEEsRUFBQSxHQUFBLFFBQUEsYUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLFNBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLGFBQUEsR0FHQSxFQUFBLEtBQUEsY0FBQSxHQUFBLFFBQUEsRUFHQSxJQUFBLEdBQ0EsRUFBQSxFQUFBLDBCQUFBLFVBQ0EsTUFBQSxRQUNBLGlCQUFBLEVBRUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFNBQUEsYUFBQSxNQUdBLEdBRkEsS0FBQSxVQUFBLEVBQUEsS0FBQSxLQUVBLEVBQUEsU0FBQSxLQUNBLE9BQUEsSUFFQSxHQUFBLE9BQUEsR0FDQSxFQUFBLFNBRUEsRUFBQSxFQUFBLElBSUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLFVBQUEsUUFHQSxFQUFBLEVBQUEscUNBQUEsSUFBQSxHQUFBLFNBQ0EsR0FBQSxLQUFBLE1BQUEsR0FFQSxHQUNBLEtBQUEsRUFBQSxLQUFBLEVBQUEsS0FDQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsR0FHQSxFQUFBLEVBQUEsSUFFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FDQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxTQWwxQkEsR0FBQSxJQUFBLE1BQUEsTUFBQSxVQUFBLFNBQUEsWUFBQSxXQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsRUFBQSxHQUVBLEVBQUEsR0FDQSxFQUFBLElBRUEsRUFBQSxFQUFBLEdBR0EsRUFBQSxHQUFBLE1BQ0EsR0FDQSxFQUFBLFFBQUEsRUFBQSxXQUFBLEdBQ0EsRUFBQSxRQUFBLEVBQUEsYUFBQSxHQUdBLEdBQUEsUUFBQSxLQUFBLE1BQUEsb0JBRUEsSUFBQSxHQUFBLEVBQUEsYUFDQSxFQUFBLEVBQUEsdUJBQ0EsRUFBQSxFQUFBLGlCQUNBLEVBQUEsRUFBQSxrQkFFQSxFQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLGVBQ0EsRUFBQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxlQUNBLEVBQUEsRUFBQSxrQkFFQSxFQUFBLEVBQUEsb0JBQ0EsRUFBQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLEVBQUEsbUJBQ0EsRUFBQSxFQUFBLG9CQTI5QkEsT0FuQ0EsWUFFQSxFQUFBLE1BRUEsRUFBQSxHQUFBLEdBQUEsR0FDQSxHQUFBLEtBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxFQUNBLEVBQUEsS0FFQSxLQUFBLFdBQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLElBQ0EsSUFDQSxJQUNBLElBRUEsSUFFQSxJQUNBLElBRUEsVUFTQSxFQUFBLEdBQUEsT0FBQSxXQUNBLE1BQUEsTUFBQSxPQUFBLEdBR0EsTUFFQSxNQStEQSxPQUFBLFVBQUEsSUFBQSxXQUdBLElBQUEsR0FGQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLElBQUEsRUFBQSxLQUFBLEdBQ0EsT0FBQSxJQUVBLE1BQUEsVUFBQSxJQUFBLFdBR0EsSUFBQSxHQUZBLEdBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsSUFBQSxFQUFBLEtBQUEsR0FDQSxPQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogIGpxdWVyeS1zb3J0YWJsZS5qcyB2MC45LjEyXHJcbiAqICBodHRwOi8vam9obm55LmdpdGh1Yi5jb20vanF1ZXJ5LXNvcnRhYmxlL1xyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogIENvcHlyaWdodCAoYykgMjAxMiBKb25hcyB2b24gQW5kcmlhblxyXG4gKiAgQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxyXG4gKiAgbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XHJcbiAqICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0XHJcbiAqICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cclxuICogICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHRcclxuICogICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxyXG4gKiAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxyXG4gKiAgKiBUaGUgbmFtZSBvZiB0aGUgYXV0aG9yIG1heSBub3QgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHNcclxuICogICAgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXHJcbiAqXHJcbiAqICBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcclxuICogIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXHJcbiAqICBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXHJcbiAqICBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCA8Q09QWVJJR0hUIEhPTERFUj4gQkUgTElBQkxFIEZPUiBBTllcclxuICogIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXHJcbiAqICAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XHJcbiAqICBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkRcclxuICogIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXHJcbiAqICAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xyXG4gKiAgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXHJcbihmdW5jdGlvbigkLCB3aW5kb3csIHBsdWdpbk5hbWUsIHVuZGVmaW5lZCkge1xyXG4gICAgdmFyIGV2ZW50TmFtZXMsXHJcbiAgICAgICAgY29udGFpbmVyRGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIGl0ZW1zIGNhbiBiZSBkcmFnZ2VkIGZyb20gdGhpcyBjb250YWluZXJcclxuICAgICAgICAgICAgZHJhZzogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgaXRlbXMgY2FuIGJlIGRyb3BlZCBvbnRvIHRoaXMgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGRyb3A6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIEV4Y2x1ZGUgaXRlbXMgZnJvbSBiZWluZyBkcmFnZ2FibGUsIGlmIHRoZVxyXG4gICAgICAgICAgICAvLyBzZWxlY3RvciBtYXRjaGVzIHRoZSBpdGVtXHJcbiAgICAgICAgICAgIGV4Y2x1ZGU6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIHNlYXJjaCBmb3IgbmVzdGVkIGNvbnRhaW5lcnMgd2l0aGluIGFuIGl0ZW1cclxuICAgICAgICAgICAgbmVzdGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCB0aGUgaXRlbXMgYXJlIGFzc3VtZWQgdG8gYmUgYXJyYW5nZWQgdmVydGljYWxseVxyXG4gICAgICAgICAgICB2ZXJ0aWNhbDogdHJ1ZVxyXG4gICAgICAgIH0sIC8vIGVuZCBjb250YWluZXIgZGVmYXVsdHNcclxuICAgICAgICBncm91cERlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGV4ZWN1dGVkIGFmdGVyIHRoZSBwbGFjZWhvbGRlciBoYXMgYmVlbiBtb3ZlZC5cclxuICAgICAgICAgICAgLy8gJGNsb3Nlc3RJdGVtT3JDb250YWluZXIgY29udGFpbnMgdGhlIGNsb3Nlc3QgaXRlbSwgdGhlIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgIC8vIGhhcyBiZWVuIHB1dCBhdCBvciB0aGUgY2xvc2VzdCBlbXB0eSBDb250YWluZXIsIHRoZSBwbGFjZWhvbGRlciBoYXNcclxuICAgICAgICAgICAgLy8gYmVlbiBhcHBlbmRlZCB0by5cclxuICAgICAgICAgICAgYWZ0ZXJNb3ZlOiBmdW5jdGlvbigkcGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgJGNsb3Nlc3RJdGVtT3JDb250YWluZXIpIHt9LFxyXG4gICAgICAgICAgICAvLyBUaGUgZXhhY3QgY3NzIHBhdGggYmV0d2VlbiB0aGUgY29udGFpbmVyIGFuZCBpdHMgaXRlbXMsIGUuZy4gXCI+IHRib2R5XCJcclxuICAgICAgICAgICAgY29udGFpbmVyUGF0aDogXCJcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNzcyBzZWxlY3RvciBvZiB0aGUgY29udGFpbmVyc1xyXG4gICAgICAgICAgICBjb250YWluZXJTZWxlY3RvcjogXCJvbCwgdWxcIixcclxuICAgICAgICAgICAgLy8gRGlzdGFuY2UgdGhlIG1vdXNlIGhhcyB0byB0cmF2ZWwgdG8gc3RhcnQgZHJhZ2dpbmdcclxuICAgICAgICAgICAgZGlzdGFuY2U6IDAsXHJcbiAgICAgICAgICAgIC8vIFRpbWUgaW4gbWlsbGlzZWNvbmRzIGFmdGVyIG1vdXNlZG93biB1bnRpbCBkcmFnZ2luZyBzaG91bGQgc3RhcnQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgb3B0aW9uIGNhbiBiZSB1c2VkIHRvIHByZXZlbnQgdW53YW50ZWQgZHJhZ3Mgd2hlbiBjbGlja2luZyBvbiBhbiBlbGVtZW50LlxyXG4gICAgICAgICAgICBkZWxheTogMCxcclxuICAgICAgICAgICAgLy8gVGhlIGNzcyBzZWxlY3RvciBvZiB0aGUgZHJhZyBoYW5kbGVcclxuICAgICAgICAgICAgaGFuZGxlOiBcIlwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgZXhhY3QgY3NzIHBhdGggYmV0d2VlbiB0aGUgaXRlbSBhbmQgaXRzIHN1YmNvbnRhaW5lcnNcclxuICAgICAgICAgICAgaXRlbVBhdGg6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjc3Mgc2VsZWN0b3Igb2YgdGhlIGl0ZW1zXHJcbiAgICAgICAgICAgIGl0ZW1TZWxlY3RvcjogXCJsaVwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY2xhc3MgZ2l2ZW4gdG8gXCJib2R5XCIgd2hpbGUgYW4gaXRlbSBpcyBiZWluZyBkcmFnZ2VkXHJcbiAgICAgICAgICAgIGJvZHlDbGFzczogXCJkcmFnZ2luZ1wiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY2xhc3MgZ2l2aW5nIHRvIGFuIGl0ZW0gd2hpbGUgYmVpbmcgZHJhZ2dlZFxyXG4gICAgICAgICAgICBkcmFnZ2VkQ2xhc3M6IFwiZHJhZ2dlZFwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY2xhc3Mgb2YgdGhlIHBsYWNlaG9sZGVyIChtdXN0IG1hdGNoIHBsYWNlaG9sZGVyIG9wdGlvbiBtYXJrdXApXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ2xhc3M6IFwicGxhY2Vob2xkZXJcIixcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGRyYWdnZWQgaXRlbSBtYXkgYmUgaW5zaWRlIHRoZSBjb250YWluZXIuXHJcbiAgICAgICAgICAgIC8vIFVzZSB3aXRoIGNhcmUsIHNpbmNlIHRoZSBzZWFyY2ggZm9yIGEgdmFsaWQgY29udGFpbmVyIGVudGFpbHMgYSBkZXB0aCBmaXJzdCBzZWFyY2hcclxuICAgICAgICAgICAgLy8gYW5kIG1heSBiZSBxdWl0ZSBleHBlbnNpdmUuXHJcbiAgICAgICAgICAgIGlzVmFsaWRUYXJnZXQ6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIEV4ZWN1dGVkIGJlZm9yZSBvbkRyb3AgaWYgcGxhY2Vob2xkZXIgaXMgZGV0YWNoZWQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgaGFwcGVucyBpZiBwdWxsUGxhY2Vob2xkZXIgaXMgc2V0IHRvIGZhbHNlIGFuZCB0aGUgZHJvcCBvY2N1cnMgb3V0c2lkZSBhIGNvbnRhaW5lci5cclxuICAgICAgICAgICAgb25DYW5jZWw6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlciwgZXZlbnQpIHt9LFxyXG4gICAgICAgICAgICAvLyBFeGVjdXRlZCBhdCB0aGUgYmVnaW5uaW5nIG9mIGEgbW91c2UgbW92ZSBldmVudC5cclxuICAgICAgICAgICAgLy8gVGhlIFBsYWNlaG9sZGVyIGhhcyBub3QgYmVlbiBtb3ZlZCB5ZXQuXHJcbiAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24oJGl0ZW0sIHBvc2l0aW9uLCBfc3VwZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5jc3MocG9zaXRpb24pXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENhbGxlZCBhZnRlciB0aGUgZHJhZyBoYXMgYmVlbiBzdGFydGVkLFxyXG4gICAgICAgICAgICAvLyB0aGF0IGlzIHRoZSBtb3VzZSBidXR0b24gaXMgYmVlaW5nIGhlbGQgZG93biBhbmRcclxuICAgICAgICAgICAgLy8gdGhlIG1vdXNlIGlzIG1vdmluZy5cclxuICAgICAgICAgICAgLy8gVGhlIGNvbnRhaW5lciBpcyB0aGUgY2xvc2VzdCBpbml0aWFsaXplZCBjb250YWluZXIuXHJcbiAgICAgICAgICAgIC8vIFRoZXJlZm9yZSBpdCBtaWdodCBub3QgYmUgdGhlIGNvbnRhaW5lciwgdGhhdCBhY3R1YWxseSBjb250YWlucyB0aGUgaXRlbS5cclxuICAgICAgICAgICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlciwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRpdGVtLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAkaXRlbS5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJGl0ZW0ud2lkdGgoKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKGNvbnRhaW5lci5ncm91cC5vcHRpb25zLmRyYWdnZWRDbGFzcylcclxuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKGNvbnRhaW5lci5ncm91cC5vcHRpb25zLmJvZHlDbGFzcylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gQ2FsbGVkIHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyBiZWVpbmcgcmVsZWFzZWRcclxuICAgICAgICAgICAgb25Ecm9wOiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5yZW1vdmVDbGFzcyhjb250YWluZXIuZ3JvdXAub3B0aW9ucy5kcmFnZ2VkQ2xhc3MpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKVxyXG4gICAgICAgICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoY29udGFpbmVyLmdyb3VwLm9wdGlvbnMuYm9keUNsYXNzKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBDYWxsZWQgb24gbW91c2Vkb3duLiBJZiBmYWxzeSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIGRyYWdnaW5nIHdpbGwgbm90IHN0YXJ0LlxyXG4gICAgICAgICAgICAvLyBJZ25vcmUgaWYgZWxlbWVudCBjbGlja2VkIGlzIGlucHV0LCBzZWxlY3Qgb3IgdGV4dGFyZWFcclxuICAgICAgICAgICAgb25Nb3VzZWRvd246IGZ1bmN0aW9uKCRpdGVtLCBfc3VwZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5ub2RlTmFtZS5tYXRjaCgvXihpbnB1dHxzZWxlY3R8dGV4dGFyZWEpJC9pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBUZW1wbGF0ZSBmb3IgdGhlIHBsYWNlaG9sZGVyLiBDYW4gYmUgYW55IHZhbGlkIGpRdWVyeSBpbnB1dFxyXG4gICAgICAgICAgICAvLyBlLmcuIGEgc3RyaW5nLCBhIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAgICAvLyBUaGUgcGxhY2Vob2xkZXIgbXVzdCBoYXZlIHRoZSBjbGFzcyBcInBsYWNlaG9sZGVyXCJcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICc8bGkgY2xhc3M9XCJwbGFjZWhvbGRlclwiLz4nLFxyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCB0aGUgcG9zaXRpb24gb2YgdGhlIHBsYWNlaG9sZGVyIGlzIGNhbGN1bGF0ZWQgb24gZXZlcnkgbW91c2Vtb3ZlLlxyXG4gICAgICAgICAgICAvLyBJZiBmYWxzZSwgaXQgaXMgb25seSBjYWxjdWxhdGVkIHdoZW4gdGhlIG1vdXNlIGlzIGFib3ZlIGEgY29udGFpbmVyLlxyXG4gICAgICAgICAgICBwdWxsUGxhY2Vob2xkZXI6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIFNwZWNpZmllcyBzZXJpYWxpemF0aW9uIG9mIHRoZSBjb250YWluZXIgZ3JvdXAuXHJcbiAgICAgICAgICAgIC8vIFRoZSBwYWlyICRwYXJlbnQvJGNoaWxkcmVuIGlzIGVpdGhlciBjb250YWluZXIvaXRlbXMgb3IgaXRlbS9zdWJjb250YWluZXJzLlxyXG4gICAgICAgICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKCRwYXJlbnQsICRjaGlsZHJlbiwgcGFyZW50SXNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSAkLmV4dGVuZCh7fSwgJHBhcmVudC5kYXRhKCkpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudElzQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbJGNoaWxkcmVuXVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJGNoaWxkcmVuWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNoaWxkcmVuID0gJGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5zdWJDb250YWluZXJzXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0LnNvcnRhYmxlXHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBTZXQgdG9sZXJhbmNlIHdoaWxlIGRyYWdnaW5nLiBQb3NpdGl2ZSB2YWx1ZXMgZGVjcmVhc2Ugc2Vuc2l0aXZpdHksXHJcbiAgICAgICAgICAgIC8vIG5lZ2F0aXZlIHZhbHVlcyBpbmNyZWFzZSBpdC5cclxuICAgICAgICAgICAgdG9sZXJhbmNlOiAwXHJcbiAgICAgICAgfSwgLy8gZW5kIGdyb3VwIGRlZmF1bHRzXHJcbiAgICAgICAgY29udGFpbmVyR3JvdXBzID0ge30sXHJcbiAgICAgICAgZ3JvdXBDb3VudGVyID0gMCxcclxuICAgICAgICBlbXB0eUJveCA9IHtcclxuICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICBib3R0b206IDAsXHJcbiAgICAgICAgICAgIHJpZ2h0OiAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBldmVudE5hbWVzID0ge1xyXG4gICAgICAgICAgICBzdGFydDogXCJ0b3VjaHN0YXJ0LnNvcnRhYmxlIG1vdXNlZG93bi5zb3J0YWJsZVwiLFxyXG4gICAgICAgICAgICBkcm9wOiBcInRvdWNoZW5kLnNvcnRhYmxlIHRvdWNoY2FuY2VsLnNvcnRhYmxlIG1vdXNldXAuc29ydGFibGVcIixcclxuICAgICAgICAgICAgZHJhZzogXCJ0b3VjaG1vdmUuc29ydGFibGUgbW91c2Vtb3ZlLnNvcnRhYmxlXCIsXHJcbiAgICAgICAgICAgIHNjcm9sbDogXCJzY3JvbGwuc29ydGFibGVcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3ViQ29udGFpbmVyS2V5ID0gXCJzdWJDb250YWluZXJzXCJcclxuXHJcbiAgICAvKlxyXG4gICAgICogYSBpcyBBcnJheSBbbGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tXVxyXG4gICAgICogYiBpcyBhcnJheSBbbGVmdCwgdG9wXVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBkKGEsIGIpIHtcclxuICAgICAgICB2YXIgeCA9IE1hdGgubWF4KDAsIGFbMF0gLSBiWzBdLCBiWzBdIC0gYVsxXSksXHJcbiAgICAgICAgICAgIHkgPSBNYXRoLm1heCgwLCBhWzJdIC0gYlsxXSwgYlsxXSAtIGFbM10pXHJcbiAgICAgICAgcmV0dXJuIHggKyB5O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldERpbWVuc2lvbnMoYXJyYXksIGRpbWVuc2lvbnMsIHRvbGVyYW5jZSwgdXNlT2Zmc2V0KSB7XHJcbiAgICAgICAgdmFyIGkgPSBhcnJheS5sZW5ndGgsXHJcbiAgICAgICAgICAgIG9mZnNldE1ldGhvZCA9IHVzZU9mZnNldCA/IFwib2Zmc2V0XCIgOiBcInBvc2l0aW9uXCJcclxuICAgICAgICB0b2xlcmFuY2UgPSB0b2xlcmFuY2UgfHwgMFxyXG5cclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgIHZhciBlbCA9IGFycmF5W2ldLmVsID8gYXJyYXlbaV0uZWwgOiAkKGFycmF5W2ldKSxcclxuICAgICAgICAgICAgICAgIC8vIHVzZSBmaXR0aW5nIG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgcG9zID0gZWxbb2Zmc2V0TWV0aG9kXSgpXHJcbiAgICAgICAgICAgIHBvcy5sZWZ0ICs9IHBhcnNlSW50KGVsLmNzcygnbWFyZ2luLWxlZnQnKSwgMTApXHJcbiAgICAgICAgICAgIHBvcy50b3AgKz0gcGFyc2VJbnQoZWwuY3NzKCdtYXJnaW4tdG9wJyksIDEwKVxyXG4gICAgICAgICAgICBkaW1lbnNpb25zW2ldID0gW1xyXG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgLSB0b2xlcmFuY2UsXHJcbiAgICAgICAgICAgICAgICBwb3MubGVmdCArIGVsLm91dGVyV2lkdGgoKSArIHRvbGVyYW5jZSxcclxuICAgICAgICAgICAgICAgIHBvcy50b3AgLSB0b2xlcmFuY2UsXHJcbiAgICAgICAgICAgICAgICBwb3MudG9wICsgZWwub3V0ZXJIZWlnaHQoKSArIHRvbGVyYW5jZVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJlbGF0aXZlUG9zaXRpb24ocG9pbnRlciwgZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBvZmZzZXQgPSBlbGVtZW50Lm9mZnNldCgpXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGVmdDogcG9pbnRlci5sZWZ0IC0gb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgIHRvcDogcG9pbnRlci50b3AgLSBvZmZzZXQudG9wXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNvcnRCeURpc3RhbmNlRGVzYyhkaW1lbnNpb25zLCBwb2ludGVyLCBsYXN0UG9pbnRlcikge1xyXG4gICAgICAgIHBvaW50ZXIgPSBbcG9pbnRlci5sZWZ0LCBwb2ludGVyLnRvcF1cclxuICAgICAgICBsYXN0UG9pbnRlciA9IGxhc3RQb2ludGVyICYmIFtsYXN0UG9pbnRlci5sZWZ0LCBsYXN0UG9pbnRlci50b3BdXHJcblxyXG4gICAgICAgIHZhciBkaW0sXHJcbiAgICAgICAgICAgIGkgPSBkaW1lbnNpb25zLmxlbmd0aCxcclxuICAgICAgICAgICAgZGlzdGFuY2VzID0gW11cclxuXHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICBkaW0gPSBkaW1lbnNpb25zW2ldXHJcbiAgICAgICAgICAgIGRpc3RhbmNlc1tpXSA9IFtpLCBkKGRpbSwgcG9pbnRlciksIGxhc3RQb2ludGVyICYmIGQoZGltLCBsYXN0UG9pbnRlcildXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpc3RhbmNlcyA9IGRpc3RhbmNlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJbMV0gLSBhWzFdIHx8IGJbMl0gLSBhWzJdIHx8IGJbMF0gLSBhWzBdXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy8gbGFzdCBlbnRyeSBpcyB0aGUgY2xvc2VzdFxyXG4gICAgICAgIHJldHVybiBkaXN0YW5jZXNcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBDb250YWluZXJHcm91cChvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIGdyb3VwRGVmYXVsdHMsIG9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJzID0gW11cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucm9vdEdyb3VwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsUHJveHkgPSAkLnByb3h5KHRoaXMuc2Nyb2xsLCB0aGlzKVxyXG4gICAgICAgICAgICB0aGlzLmRyYWdQcm94eSA9ICQucHJveHkodGhpcy5kcmFnLCB0aGlzKVxyXG4gICAgICAgICAgICB0aGlzLmRyb3BQcm94eSA9ICQucHJveHkodGhpcy5kcm9wLCB0aGlzKVxyXG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gJCh0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIpXHJcblxyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuaXNWYWxpZFRhcmdldClcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5pc1ZhbGlkVGFyZ2V0ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIENvbnRhaW5lckdyb3VwLmdldCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoIWNvbnRhaW5lckdyb3Vwc1tvcHRpb25zLmdyb3VwXSkge1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ncm91cCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5ncm91cCA9IGdyb3VwQ291bnRlcisrXHJcblxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyR3JvdXBzW29wdGlvbnMuZ3JvdXBdID0gbmV3IENvbnRhaW5lckdyb3VwKG9wdGlvbnMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyR3JvdXBzW29wdGlvbnMuZ3JvdXBdXHJcbiAgICB9XHJcblxyXG4gICAgQ29udGFpbmVyR3JvdXAucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGRyYWdJbml0OiBmdW5jdGlvbihlLCBpdGVtQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGRvY3VtZW50ID0gJChpdGVtQ29udGFpbmVyLmVsWzBdLm93bmVyRG9jdW1lbnQpXHJcblxyXG4gICAgICAgICAgICAvLyBnZXQgaXRlbSB0byBkcmFnXHJcbiAgICAgICAgICAgIHRoaXMuaXRlbSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QodGhpcy5vcHRpb25zLml0ZW1TZWxlY3RvcilcclxuICAgICAgICAgICAgdGhpcy5pdGVtQ29udGFpbmVyID0gaXRlbUNvbnRhaW5lclxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXRlbS5pcyh0aGlzLm9wdGlvbnMuZXhjbHVkZSkgfHxcclxuICAgICAgICAgICAgICAgICF0aGlzLm9wdGlvbnMub25Nb3VzZWRvd24odGhpcy5pdGVtLCBncm91cERlZmF1bHRzLm9uTW91c2Vkb3duLCBlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9pbnRlcihlKVxyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxpc3RlbmVycygnb24nKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXR1cERlbGF5VGltZXIoKVxyXG4gICAgICAgICAgICB0aGlzLmRyYWdJbml0RG9uZSA9IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyYWc6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGlzdGFuY2VNZXQoZSkgfHwgIXRoaXMuZGVsYXlNZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRHJhZ1N0YXJ0KHRoaXMuaXRlbSwgdGhpcy5pdGVtQ29udGFpbmVyLCBncm91cERlZmF1bHRzLm9uRHJhZ1N0YXJ0LCBlKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtLmJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IHRydWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRQb2ludGVyKGUpXHJcbiAgICAgICAgICAgIC8vIHBsYWNlIGl0ZW0gdW5kZXIgdGhlIGN1cnNvclxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25EcmFnKHRoaXMuaXRlbSxcclxuICAgICAgICAgICAgICAgIGdldFJlbGF0aXZlUG9zaXRpb24odGhpcy5wb2ludGVyLCB0aGlzLml0ZW0ub2Zmc2V0UGFyZW50KCkpLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBEZWZhdWx0cy5vbkRyYWcsXHJcbiAgICAgICAgICAgICAgICBlKVxyXG5cclxuICAgICAgICAgICAgdmFyIHggPSBlLnBhZ2VYIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWCxcclxuICAgICAgICAgICAgICAgIHkgPSBlLnBhZ2VZIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWSxcclxuICAgICAgICAgICAgICAgIGJveCA9IHRoaXMuc2FtZVJlc3VsdEJveCxcclxuICAgICAgICAgICAgICAgIHQgPSB0aGlzLm9wdGlvbnMudG9sZXJhbmNlXHJcblxyXG4gICAgICAgICAgICBpZiAoIWJveCB8fCBib3gudG9wIC0gdCA+IHkgfHwgYm94LmJvdHRvbSArIHQgPCB5IHx8IGJveC5sZWZ0IC0gdCA+IHggfHwgYm94LnJpZ2h0ICsgdCA8IHgpXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VhcmNoVmFsaWRUYXJnZXQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuZGV0YWNoKClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RBcHBlbmRlZEl0ZW0gPSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRyb3A6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVMaXN0ZW5lcnMoJ29mZicpXHJcblxyXG4gICAgICAgICAgICB0aGlzLmRyYWdJbml0RG9uZSA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvY2Vzc2luZyBEcm9wLCBjaGVjayBpZiBwbGFjZWhvbGRlciBpcyBkZXRhY2hlZFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIuY2xvc2VzdChcImh0bWxcIilbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5iZWZvcmUodGhpcy5pdGVtKS5kZXRhY2goKVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNhbmNlbCh0aGlzLml0ZW0sIHRoaXMuaXRlbUNvbnRhaW5lciwgZ3JvdXBEZWZhdWx0cy5vbkNhbmNlbCwgZSlcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25Ecm9wKHRoaXMuaXRlbSwgdGhpcy5nZXRDb250YWluZXIodGhpcy5pdGVtKSwgZ3JvdXBEZWZhdWx0cy5vbkRyb3AsIGUpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2xlYW51cFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckRpbWVuc2lvbnMoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhck9mZnNldFBhcmVudCgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RBcHBlbmRlZEl0ZW0gPSB0aGlzLnNhbWVSZXN1bHRCb3ggPSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWFyY2hWYWxpZFRhcmdldDogZnVuY3Rpb24ocG9pbnRlciwgbGFzdFBvaW50ZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFwb2ludGVyKSB7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyID0gdGhpcy5yZWxhdGl2ZVBvaW50ZXIgfHwgdGhpcy5wb2ludGVyXHJcbiAgICAgICAgICAgICAgICBsYXN0UG9pbnRlciA9IHRoaXMubGFzdFJlbGF0aXZlUG9pbnRlciB8fCB0aGlzLmxhc3RQb2ludGVyXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZXMgPSBzb3J0QnlEaXN0YW5jZURlc2ModGhpcy5nZXRDb250YWluZXJEaW1lbnNpb25zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UG9pbnRlciksXHJcbiAgICAgICAgICAgICAgICBpID0gZGlzdGFuY2VzLmxlbmd0aFxyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZGlzdGFuY2VzW2ldWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gZGlzdGFuY2VzW2ldWzFdXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFkaXN0YW5jZSB8fCB0aGlzLm9wdGlvbnMucHVsbFBsYWNlaG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyc1tpbmRleF1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuJGdldE9mZnNldFBhcmVudCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50ID0gY29udGFpbmVyLmdldEl0ZW1PZmZzZXRQYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRlciA9IGdldFJlbGF0aXZlUG9zaXRpb24ocG9pbnRlciwgb2Zmc2V0UGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXIgPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKGxhc3RQb2ludGVyLCBvZmZzZXRQYXJlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5zZWFyY2hWYWxpZFRhcmdldChwb2ludGVyLCBsYXN0UG9pbnRlcikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zYW1lUmVzdWx0Qm94KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1lUmVzdWx0Qm94ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3ZlUGxhY2Vob2xkZXI6IGZ1bmN0aW9uKGNvbnRhaW5lciwgaXRlbSwgbWV0aG9kLCBzYW1lUmVzdWx0Qm94KSB7XHJcbiAgICAgICAgICAgIHZhciBsYXN0QXBwZW5kZWRJdGVtID0gdGhpcy5sYXN0QXBwZW5kZWRJdGVtXHJcbiAgICAgICAgICAgIGlmICghc2FtZVJlc3VsdEJveCAmJiBsYXN0QXBwZW5kZWRJdGVtICYmIGxhc3RBcHBlbmRlZEl0ZW1bMF0gPT09IGl0ZW1bMF0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpdGVtW21ldGhvZF0odGhpcy5wbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgdGhpcy5sYXN0QXBwZW5kZWRJdGVtID0gaXRlbVxyXG4gICAgICAgICAgICB0aGlzLnNhbWVSZXN1bHRCb3ggPSBzYW1lUmVzdWx0Qm94XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5hZnRlck1vdmUodGhpcy5wbGFjZWhvbGRlciwgY29udGFpbmVyLCBpdGVtKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0Q29udGFpbmVyRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250YWluZXJEaW1lbnNpb25zKVxyXG4gICAgICAgICAgICAgICAgc2V0RGltZW5zaW9ucyh0aGlzLmNvbnRhaW5lcnMsIHRoaXMuY29udGFpbmVyRGltZW5zaW9ucyA9IFtdLCB0aGlzLm9wdGlvbnMudG9sZXJhbmNlLCAhdGhpcy4kZ2V0T2Zmc2V0UGFyZW50KCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lckRpbWVuc2lvbnNcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldENvbnRhaW5lcjogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHRoaXMub3B0aW9ucy5jb250YWluZXJTZWxlY3RvcikuZGF0YShwbHVnaW5OYW1lKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJGdldE9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9mZnNldFBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGggLSAxLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IHRoaXMuY29udGFpbmVyc1tpXS5nZXRJdGVtT2Zmc2V0UGFyZW50KClcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yb290R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXRQYXJlbnRbMF0gIT0gdGhpcy5jb250YWluZXJzW2ldLmdldEl0ZW1PZmZzZXRQYXJlbnQoKVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgZXZlcnkgY29udGFpbmVyIGhhcyB0aGUgc2FtZSBvZmZzZXQgcGFyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIHBvc2l0aW9uKCkgd2hpY2ggaXMgcmVsYXRpdmUgdG8gdGhpcyBwYXJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgdXNlIG9mZnNldCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21wYXJlICNzZXREaW1lbnNpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXRQYXJlbnRcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldFBvaW50ZXI6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50ZXIgPSB0aGlzLmdldFBvaW50ZXIoZSlcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLiRnZXRPZmZzZXRQYXJlbnQoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlbGF0aXZlUG9pbnRlciA9IGdldFJlbGF0aXZlUG9zaXRpb24ocG9pbnRlciwgdGhpcy4kZ2V0T2Zmc2V0UGFyZW50KCkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RSZWxhdGl2ZVBvaW50ZXIgPSB0aGlzLnJlbGF0aXZlUG9pbnRlclxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWxhdGl2ZVBvaW50ZXIgPSByZWxhdGl2ZVBvaW50ZXJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5sYXN0UG9pbnRlciA9IHRoaXMucG9pbnRlclxyXG4gICAgICAgICAgICB0aGlzLnBvaW50ZXIgPSBwb2ludGVyXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkaXN0YW5jZU1ldDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudFBvaW50ZXIgPSB0aGlzLmdldFBvaW50ZXIoZSlcclxuICAgICAgICAgICAgcmV0dXJuIChNYXRoLm1heChcclxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHRoaXMucG9pbnRlci5sZWZ0IC0gY3VycmVudFBvaW50ZXIubGVmdCksXHJcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLnBvaW50ZXIudG9wIC0gY3VycmVudFBvaW50ZXIudG9wKVxyXG4gICAgICAgICAgICApID49IHRoaXMub3B0aW9ucy5kaXN0YW5jZSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFBvaW50ZXI6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IGUucGFnZVggfHwgZS5vcmlnaW5hbEV2ZW50LnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgdG9wOiBlLnBhZ2VZIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXR1cERlbGF5VGltZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXNcclxuICAgICAgICAgICAgdGhpcy5kZWxheU1ldCA9ICF0aGlzLm9wdGlvbnMuZGVsYXlcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgZGVsYXkgdGltZXIgaWYgbmVlZGVkXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kZWxheU1ldCkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX21vdXNlRGVsYXlUaW1lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3VzZURlbGF5VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoYXQuZGVsYXlNZXQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZGVsYXkpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNjcm9sbDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyRGltZW5zaW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyT2Zmc2V0UGFyZW50KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0b2dnbGVMaXN0ZW5lcnM6IGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBldmVudHMgPSBbJ2RyYWcnLCAnZHJvcCcsICdzY3JvbGwnXVxyXG5cclxuICAgICAgICAgICAgJC5lYWNoKGV2ZW50cywgZnVuY3Rpb24oaSwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoYXQuJGRvY3VtZW50W21ldGhvZF0oZXZlbnROYW1lc1tldmVudF0sIHRoYXRbZXZlbnQgKyAnUHJveHknXSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsZWFyT2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5vZmZzZXRQYXJlbnQgPSB1bmRlZmluZWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNsZWFyIGNvbnRhaW5lciBhbmQgaXRlbSBkaW1lbnNpb25zXHJcbiAgICAgICAgY2xlYXJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5fY2xlYXJEaW1lbnNpb25zKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyYXZlcnNlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzKVxyXG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuY29udGFpbmVycy5sZW5ndGhcclxuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJzW2ldLnRyYXZlcnNlKGNhbGxiYWNrKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfY2xlYXJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJEaW1lbnNpb25zID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckdyb3Vwc1t0aGlzLm9wdGlvbnMuZ3JvdXBdID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRhaW5lcihlbGVtZW50LCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5lbCA9IGVsZW1lbnRcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgY29udGFpbmVyRGVmYXVsdHMsIG9wdGlvbnMpXHJcblxyXG4gICAgICAgIHRoaXMuZ3JvdXAgPSBDb250YWluZXJHcm91cC5nZXQodGhpcy5vcHRpb25zKVxyXG4gICAgICAgIHRoaXMucm9vdEdyb3VwID0gdGhpcy5vcHRpb25zLnJvb3RHcm91cCB8fCB0aGlzLmdyb3VwXHJcbiAgICAgICAgdGhpcy5oYW5kbGUgPSB0aGlzLnJvb3RHcm91cC5vcHRpb25zLmhhbmRsZSB8fCB0aGlzLnJvb3RHcm91cC5vcHRpb25zLml0ZW1TZWxlY3RvclxyXG5cclxuICAgICAgICB2YXIgaXRlbVBhdGggPSB0aGlzLnJvb3RHcm91cC5vcHRpb25zLml0ZW1QYXRoXHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSBpdGVtUGF0aCA/IHRoaXMuZWwuZmluZChpdGVtUGF0aCkgOiB0aGlzLmVsXHJcblxyXG4gICAgICAgIHRoaXMudGFyZ2V0Lm9uKGV2ZW50TmFtZXMuc3RhcnQsIHRoaXMuaGFuZGxlLCAkLnByb3h5KHRoaXMuZHJhZ0luaXQsIHRoaXMpKVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRyb3ApXHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXAuY29udGFpbmVycy5wdXNoKHRoaXMpXHJcbiAgICB9XHJcblxyXG4gICAgQ29udGFpbmVyLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBkcmFnSW5pdDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgcm9vdEdyb3VwID0gdGhpcy5yb290R3JvdXBcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJlxyXG4gICAgICAgICAgICAgICAgIXJvb3RHcm91cC5kcmFnSW5pdERvbmUgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5kcmFnICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzVmFsaWREcmFnKGUpKSB7XHJcbiAgICAgICAgICAgICAgICByb290R3JvdXAuZHJhZ0luaXQoZSwgdGhpcylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaXNWYWxpZERyYWc6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUud2hpY2ggPT0gMSB8fFxyXG4gICAgICAgICAgICAgICAgZS50eXBlID09IFwidG91Y2hzdGFydFwiICYmIGUub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCA9PSAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZWFyY2hWYWxpZFRhcmdldDogZnVuY3Rpb24ocG9pbnRlciwgbGFzdFBvaW50ZXIpIHtcclxuICAgICAgICAgICAgdmFyIGRpc3RhbmNlcyA9IHNvcnRCeURpc3RhbmNlRGVzYyh0aGlzLmdldEl0ZW1EaW1lbnNpb25zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlcixcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UG9pbnRlciksXHJcbiAgICAgICAgICAgICAgICBpID0gZGlzdGFuY2VzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHJvb3RHcm91cCA9IHRoaXMucm9vdEdyb3VwLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRUYXJnZXQgPSAhcm9vdEdyb3VwLm9wdGlvbnMuaXNWYWxpZFRhcmdldCB8fFxyXG4gICAgICAgICAgICAgICAgcm9vdEdyb3VwLm9wdGlvbnMuaXNWYWxpZFRhcmdldChyb290R3JvdXAuaXRlbSwgdGhpcylcclxuXHJcbiAgICAgICAgICAgIGlmICghaSAmJiB2YWxpZFRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcm9vdEdyb3VwLm1vdmVQbGFjZWhvbGRlcih0aGlzLCB0aGlzLnRhcmdldCwgXCJhcHBlbmRcIilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGRpc3RhbmNlc1tpXVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBkaXN0YW5jZXNbaV1bMV1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRpc3RhbmNlICYmIHRoaXMuaGFzQ2hpbGRHcm91cChpbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gdGhpcy5nZXRDb250YWluZXJHcm91cChpbmRleCkuc2VhcmNoVmFsaWRUYXJnZXQocG9pbnRlciwgbGFzdFBvaW50ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWxpZFRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVQbGFjZWhvbGRlcihpbmRleCwgcG9pbnRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtb3ZlUGxhY2Vob2xkZXI6IGZ1bmN0aW9uKGluZGV4LCBwb2ludGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gJCh0aGlzLml0ZW1zW2luZGV4XSksXHJcbiAgICAgICAgICAgICAgICBkaW0gPSB0aGlzLml0ZW1EaW1lbnNpb25zW2luZGV4XSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiYWZ0ZXJcIixcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gaXRlbS5vdXRlcldpZHRoKCksXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBpdGVtLm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBpdGVtLm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogb2Zmc2V0LmxlZnQgKyB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IG9mZnNldC50b3AsXHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBvZmZzZXQudG9wICsgaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudmVydGljYWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB5Q2VudGVyID0gKGRpbVsyXSArIGRpbVszXSkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIGluVXBwZXJIYWxmID0gcG9pbnRlci50b3AgPD0geUNlbnRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGluVXBwZXJIYWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gXCJiZWZvcmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3guYm90dG9tIC09IGhlaWdodCAvIDJcclxuICAgICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3gudG9wICs9IGhlaWdodCAvIDJcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciB4Q2VudGVyID0gKGRpbVswXSArIGRpbVsxXSkgLyAyLFxyXG4gICAgICAgICAgICAgICAgICAgIGluTGVmdEhhbGYgPSBwb2ludGVyLmxlZnQgPD0geENlbnRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGluTGVmdEhhbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBcImJlZm9yZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveC5yaWdodCAtPSB3aWR0aCAvIDJcclxuICAgICAgICAgICAgICAgIH0gZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3gubGVmdCArPSB3aWR0aCAvIDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNDaGlsZEdyb3VwKGluZGV4KSlcclxuICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3ggPSBlbXB0eUJveFxyXG4gICAgICAgICAgICB0aGlzLnJvb3RHcm91cC5tb3ZlUGxhY2Vob2xkZXIodGhpcywgaXRlbSwgbWV0aG9kLCBzYW1lUmVzdWx0Qm94KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0SXRlbURpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXRlbURpbWVuc2lvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLiRnZXRDaGlsZHJlbih0aGlzLmVsLCBcIml0ZW1cIikuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiOm5vdCguXCIgKyB0aGlzLmdyb3VwLm9wdGlvbnMucGxhY2Vob2xkZXJDbGFzcyArIFwiLCAuXCIgKyB0aGlzLmdyb3VwLm9wdGlvbnMuZHJhZ2dlZENsYXNzICsgXCIpXCJcclxuICAgICAgICAgICAgICAgICkuZ2V0KClcclxuICAgICAgICAgICAgICAgIHNldERpbWVuc2lvbnModGhpcy5pdGVtcywgdGhpcy5pdGVtRGltZW5zaW9ucyA9IFtdLCB0aGlzLm9wdGlvbnMudG9sZXJhbmNlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLml0ZW1EaW1lbnNpb25zXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRJdGVtT2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCxcclxuICAgICAgICAgICAgICAgIGVsID0gdGhpcy5lbFxyXG4gICAgICAgICAgICAgICAgLy8gU2luY2UgZWwgbWlnaHQgYmUgZW1wdHkgd2UgaGF2ZSB0byBjaGVjayBlbCBpdHNlbGYgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBjYW4gbm90IGRvIHNvbWV0aGluZyBsaWtlIGVsLmNoaWxkcmVuKCkuZmlyc3QoKS5vZmZzZXRQYXJlbnQoKVxyXG4gICAgICAgICAgICBpZiAoZWwuY3NzKFwicG9zaXRpb25cIikgPT09IFwicmVsYXRpdmVcIiB8fCBlbC5jc3MoXCJwb3NpdGlvblwiKSA9PT0gXCJhYnNvbHV0ZVwiIHx8IGVsLmNzcyhcInBvc2l0aW9uXCIpID09PSBcImZpeGVkXCIpXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBlbFxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBlbC5vZmZzZXRQYXJlbnQoKVxyXG4gICAgICAgICAgICByZXR1cm4gb2Zmc2V0UGFyZW50XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYXNDaGlsZEdyb3VwOiBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm5lc3RlZCAmJiB0aGlzLmdldENvbnRhaW5lckdyb3VwKGluZGV4KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0Q29udGFpbmVyR3JvdXA6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEdyb3VwID0gJC5kYXRhKHRoaXMuaXRlbXNbaW5kZXhdLCBzdWJDb250YWluZXJLZXkpXHJcbiAgICAgICAgICAgIGlmIChjaGlsZEdyb3VwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZENvbnRhaW5lcnMgPSB0aGlzLiRnZXRDaGlsZHJlbih0aGlzLml0ZW1zW2luZGV4XSwgXCJjb250YWluZXJcIilcclxuICAgICAgICAgICAgICAgIGNoaWxkR3JvdXAgPSBmYWxzZVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZENvbnRhaW5lcnNbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdEdyb3VwOiB0aGlzLnJvb3RHcm91cCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwQ291bnRlcisrXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZEdyb3VwID0gY2hpbGRDb250YWluZXJzW3BsdWdpbk5hbWVdKG9wdGlvbnMpLmRhdGEocGx1Z2luTmFtZSkuZ3JvdXBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQuZGF0YSh0aGlzLml0ZW1zW2luZGV4XSwgc3ViQ29udGFpbmVyS2V5LCBjaGlsZEdyb3VwKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZEdyb3VwXHJcbiAgICAgICAgfSxcclxuICAgICAgICAkZ2V0Q2hpbGRyZW46IGZ1bmN0aW9uKHBhcmVudCwgdHlwZSkge1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMucm9vdEdyb3VwLm9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBwYXRoID0gb3B0aW9uc1t0eXBlICsgXCJQYXRoXCJdLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBvcHRpb25zW3R5cGUgKyBcIlNlbGVjdG9yXCJdXHJcblxyXG4gICAgICAgICAgICBwYXJlbnQgPSAkKHBhcmVudClcclxuICAgICAgICAgICAgaWYgKHBhdGgpXHJcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuZmluZChwYXRoKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5jaGlsZHJlbihzZWxlY3RvcilcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9zZXJpYWxpemU6IGZ1bmN0aW9uKHBhcmVudCwgaXNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgY2hpbGRUeXBlID0gaXNDb250YWluZXIgPyBcIml0ZW1cIiA6IFwiY29udGFpbmVyXCIsXHJcblxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSB0aGlzLiRnZXRDaGlsZHJlbihwYXJlbnQsIGNoaWxkVHlwZSkubm90KHRoaXMub3B0aW9ucy5leGNsdWRlKS5tYXAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuX3NlcmlhbGl6ZSgkKHRoaXMpLCAhaXNDb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICB9KS5nZXQoKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm9vdEdyb3VwLm9wdGlvbnMuc2VyaWFsaXplKHBhcmVudCwgY2hpbGRyZW4sIGlzQ29udGFpbmVyKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJhdmVyc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICQuZWFjaCh0aGlzLml0ZW1zIHx8IFtdLCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSAkLmRhdGEodGhpcywgc3ViQ29udGFpbmVyS2V5KVxyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwKVxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLnRyYXZlcnNlKGNhbGxiYWNrKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfY2xlYXJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtRGltZW5zaW9ucyA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5vZmYoZXZlbnROYW1lcy5zdGFydCwgdGhpcy5oYW5kbGUpO1xyXG4gICAgICAgICAgICB0aGlzLmVsLnJlbW92ZURhdGEocGx1Z2luTmFtZSlcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZHJvcClcclxuICAgICAgICAgICAgICAgIHRoaXMuZ3JvdXAuY29udGFpbmVycyA9ICQuZ3JlcCh0aGlzLmdyb3VwLmNvbnRhaW5lcnMsIGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWwgIT0gdGhhdFxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICQuZWFjaCh0aGlzLml0ZW1zIHx8IFtdLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQucmVtb3ZlRGF0YSh0aGlzLCBzdWJDb250YWluZXJLZXkpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBBUEkgPSB7XHJcbiAgICAgICAgZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5kaXNhYmxlZCA9IGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5kaXNhYmxlZCA9IHRydWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXJpYWxpemUodGhpcy5lbCwgdHJ1ZSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Ll9jbGVhckRpbWVuc2lvbnMoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuX2Rlc3Ryb3koKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgJC5leHRlbmQoQ29udGFpbmVyLnByb3RvdHlwZSwgQVBJKVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogalF1ZXJ5IEFQSVxyXG4gICAgICpcclxuICAgICAqIFBhcmFtZXRlcnMgYXJlXHJcbiAgICAgKiAgIGVpdGhlciBvcHRpb25zIG9uIGluaXRcclxuICAgICAqICAgb3IgYSBtZXRob2QgbmFtZSBmb2xsb3dlZCBieSBhcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0aG9kXHJcbiAgICAgKi9cclxuICAgICQuZm5bcGx1Z2luTmFtZV0gPSBmdW5jdGlvbihtZXRob2RPck9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgJHQgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgb2JqZWN0ID0gJHQuZGF0YShwbHVnaW5OYW1lKVxyXG5cclxuICAgICAgICAgICAgaWYgKG9iamVjdCAmJiBBUElbbWV0aG9kT3JPcHRpb25zXSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBBUElbbWV0aG9kT3JPcHRpb25zXS5hcHBseShvYmplY3QsIGFyZ3MpIHx8IHRoaXNcclxuICAgICAgICAgICAgZWxzZSBpZiAoIW9iamVjdCAmJiAobWV0aG9kT3JPcHRpb25zID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBtZXRob2RPck9wdGlvbnMgPT09IFwib2JqZWN0XCIpKVxyXG4gICAgICAgICAgICAgICAgJHQuZGF0YShwbHVnaW5OYW1lLCBuZXcgQ29udGFpbmVyKCR0LCBtZXRob2RPck9wdGlvbnMpKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXNcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG59KShqcTExMSwgd2luZG93LCAnc29ydGFibGUnKTsiLCIvKiEgbmFub1Njcm9sbGVySlMgLSB2MC44LjQgLSAyMDE0XG4gKiBodHRwOi8vamFtZXNmbG9yZW50aW5vLmdpdGh1Yi5jb20vbmFub1Njcm9sbGVySlMvXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgSmFtZXMgRmxvcmVudGlubzsgTGljZW5zZWQgTUlUICovXG4oZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBCUk9XU0VSX0lTX0lFNywgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEgsIERPTVNDUk9MTCwgRE9XTiwgRFJBRywgRU5URVIsIEtFWURPV04sIEtFWVVQLCBNT1VTRURPV04sIE1PVVNFRU5URVIsIE1PVVNFTU9WRSwgTU9VU0VVUCwgTU9VU0VXSEVFTCwgTmFub1Njcm9sbCwgUEFORURPV04sIFJFU0laRSwgU0NST0xMLCBTQ1JPTExCQVIsIFRPVUNITU9WRSwgVVAsIFdIRUVMLCBjQUYsIGRlZmF1bHRzLCBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGgsIGhhc1RyYW5zZm9ybSwgaXNGRldpdGhCdWdneVNjcm9sbGJhciwgckFGLCB0cmFuc2Zvcm0sIF9lbGVtZW50U3R5bGUsIF9wcmVmaXhTdHlsZSwgX3ZlbmRvcjtcbiAgICBkZWZhdWx0cyA9IHtcblxuICAgICAgICAvKipcbiAgICAgIGEgY2xhc3NuYW1lIGZvciB0aGUgcGFuZSBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHBhbmVDbGFzc1xuICAgICAgQHR5cGUgU3RyaW5nXG4gICAgICBAZGVmYXVsdCAnbmFuby1wYW5lJ1xuICAgICAqL1xuICAgICAgICBwYW5lQ2xhc3M6ICduYW5vLXBhbmUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBjbGFzc25hbWUgZm9yIHRoZSBzbGlkZXIgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBzbGlkZXJDbGFzc1xuICAgICAgQHR5cGUgU3RyaW5nXG4gICAgICBAZGVmYXVsdCAnbmFuby1zbGlkZXInXG4gICAgICovXG4gICAgICAgIHNsaWRlckNsYXNzOiAnbmFuby1zbGlkZXInLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBjbGFzc25hbWUgZm9yIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgY29udGVudENsYXNzXG4gICAgICBAdHlwZSBTdHJpbmdcbiAgICAgIEBkZWZhdWx0ICduYW5vLWNvbnRlbnQnXG4gICAgICovXG4gICAgICAgIGNvbnRlbnRDbGFzczogJ25hbm8tY29udGVudCcsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIHNldHRpbmcgdG8gZW5hYmxlIG5hdGl2ZSBzY3JvbGxpbmcgaW4gaU9TIGRldmljZXMuXG4gICAgICBAcHJvcGVydHkgaU9TTmF0aXZlU2Nyb2xsaW5nXG4gICAgICBAdHlwZSBCb29sZWFuXG4gICAgICBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgICAgICBpT1NOYXRpdmVTY3JvbGxpbmc6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBzZXR0aW5nIHRvIHByZXZlbnQgdGhlIHJlc3Qgb2YgdGhlIHBhZ2UgYmVpbmdcbiAgICAgIHNjcm9sbGVkIHdoZW4gdXNlciBzY3JvbGxzIHRoZSBgLmNvbnRlbnRgIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgcHJldmVudFBhZ2VTY3JvbGxpbmdcbiAgICAgIEB0eXBlIEJvb2xlYW5cbiAgICAgIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgIGEgc2V0dGluZyB0byBkaXNhYmxlIGJpbmRpbmcgdG8gdGhlIHJlc2l6ZSBldmVudC5cbiAgICAgIEBwcm9wZXJ0eSBkaXNhYmxlUmVzaXplXG4gICAgICBAdHlwZSBCb29sZWFuXG4gICAgICBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgICAgICBkaXNhYmxlUmVzaXplOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgIGEgc2V0dGluZyB0byBtYWtlIHRoZSBzY3JvbGxiYXIgYWx3YXlzIHZpc2libGUuXG4gICAgICBAcHJvcGVydHkgYWx3YXlzVmlzaWJsZVxuICAgICAgQHR5cGUgQm9vbGVhblxuICAgICAgQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICAgICAgYWx3YXlzVmlzaWJsZTogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIGRlZmF1bHQgdGltZW91dCBmb3IgdGhlIGBmbGFzaCgpYCBtZXRob2QuXG4gICAgICBAcHJvcGVydHkgZmxhc2hEZWxheVxuICAgICAgQHR5cGUgTnVtYmVyXG4gICAgICBAZGVmYXVsdCAxNTAwXG4gICAgICovXG4gICAgICAgIGZsYXNoRGVsYXk6IDE1MDAsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIG1pbmltdW0gaGVpZ2h0IGZvciB0aGUgYC5zbGlkZXJgIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgc2xpZGVyTWluSGVpZ2h0XG4gICAgICBAdHlwZSBOdW1iZXJcbiAgICAgIEBkZWZhdWx0IDIwXG4gICAgICovXG4gICAgICAgIHNsaWRlck1pbkhlaWdodDogMjAsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIG1heGltdW0gaGVpZ2h0IGZvciB0aGUgYC5zbGlkZXJgIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgc2xpZGVyTWF4SGVpZ2h0XG4gICAgICBAdHlwZSBOdW1iZXJcbiAgICAgIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICAgICAgc2xpZGVyTWF4SGVpZ2h0OiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgYW4gYWx0ZXJuYXRlIGRvY3VtZW50IGNvbnRleHQuXG4gICAgICBAcHJvcGVydHkgZG9jdW1lbnRDb250ZXh0XG4gICAgICBAdHlwZSBEb2N1bWVudFxuICAgICAgQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgICAgICBkb2N1bWVudENvbnRleHQ6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICBhbiBhbHRlcm5hdGUgd2luZG93IGNvbnRleHQuXG4gICAgICBAcHJvcGVydHkgd2luZG93Q29udGV4dFxuICAgICAgQHR5cGUgV2luZG93XG4gICAgICBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgICAgIHdpbmRvd0NvbnRleHQ6IG51bGxcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFNDUk9MTEJBUlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBTQ1JPTExCQVIgPSAnc2Nyb2xsYmFyJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBTQ1JPTExcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgU0NST0xMID0gJ3Njcm9sbCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VET1dOXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VET1dOID0gJ21vdXNlZG93bic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VFTlRFUlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFRU5URVIgPSAnbW91c2VlbnRlcic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VNT1ZFXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFTU9WRSA9ICdtb3VzZW1vdmUnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFV0hFRUxcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRVdIRUVMID0gJ21vdXNld2hlZWwnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFVVBcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VVUCA9ICdtb3VzZXVwJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBSRVNJWkVcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBSRVNJWkUgPSAncmVzaXplJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBEUkFHXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIERSQUcgPSAnZHJhZyc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgRU5URVJcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgRU5URVIgPSAnZW50ZXInO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFVQXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFVQID0gJ3VwJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBQQU5FRE9XTlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBQQU5FRE9XTiA9ICdwYW5lZG93bic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgRE9NU0NST0xMXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIERPTVNDUk9MTCA9ICdET01Nb3VzZVNjcm9sbCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgRE9XTlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBET1dOID0gJ2Rvd24nO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFdIRUVMXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFdIRUVMID0gJ3doZWVsJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBLRVlET1dOXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEtFWURPV04gPSAna2V5ZG93bic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgS0VZVVBcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgS0VZVVAgPSAna2V5dXAnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFRPVUNITU9WRVxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBUT1VDSE1PVkUgPSAndG91Y2htb3ZlJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBCUk9XU0VSX0lTX0lFN1xuICAgIEB0eXBlIEJvb2xlYW5cbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgQlJPV1NFUl9JU19JRTcgPSB3aW5kb3cubmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInICYmIC9tc2llIDcuL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24pICYmIHdpbmRvdy5BY3RpdmVYT2JqZWN0O1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEJST1dTRVJfU0NST0xMQkFSX1dJRFRIXG4gICAgQHR5cGUgTnVtYmVyXG4gICAgQHN0YXRpY1xuICAgIEBkZWZhdWx0IG51bGxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCA9IG51bGw7XG4gICAgckFGID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgICBjQUYgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU7XG4gICAgX2VsZW1lbnRTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlO1xuICAgIF92ZW5kb3IgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpLCB0cmFuc2Zvcm0sIHZlbmRvciwgdmVuZG9ycywgX2ksIF9sZW47XG4gICAgICAgIHZlbmRvcnMgPSBbJ3QnLCAnd2Via2l0VCcsICdNb3pUJywgJ21zVCcsICdPVCddO1xuICAgICAgICBmb3IgKGkgPSBfaSA9IDAsIF9sZW4gPSB2ZW5kb3JzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkge1xuICAgICAgICAgICAgdmVuZG9yID0gdmVuZG9yc1tpXTtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IHZlbmRvcnNbaV0gKyAncmFuc2Zvcm0nO1xuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybSBpbiBfZWxlbWVudFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZlbmRvcnNbaV0uc3Vic3RyKDAsIHZlbmRvcnNbaV0ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pKCk7XG4gICAgX3ByZWZpeFN0eWxlID0gZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgaWYgKF92ZW5kb3IgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF92ZW5kb3IgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF92ZW5kb3IgKyBzdHlsZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0eWxlLnN1YnN0cigxKTtcbiAgICB9O1xuICAgIHRyYW5zZm9ybSA9IF9wcmVmaXhTdHlsZSgndHJhbnNmb3JtJyk7XG4gICAgaGFzVHJhbnNmb3JtID0gdHJhbnNmb3JtICE9PSBmYWxzZTtcblxuICAgIC8qKlxuICAgIFJldHVybnMgYnJvd3NlcidzIG5hdGl2ZSBzY3JvbGxiYXIgd2lkdGhcbiAgICBAbWV0aG9kIGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aFxuICAgIEByZXR1cm4ge051bWJlcn0gdGhlIHNjcm9sbGJhciB3aWR0aCBpbiBwaXhlbHNcbiAgICBAc3RhdGljXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvdXRlciwgb3V0ZXJTdHlsZSwgc2Nyb2xsYmFyV2lkdGg7XG4gICAgICAgIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG91dGVyU3R5bGUgPSBvdXRlci5zdHlsZTtcbiAgICAgICAgb3V0ZXJTdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIG91dGVyU3R5bGUud2lkdGggPSAnMTAwcHgnO1xuICAgICAgICBvdXRlclN0eWxlLmhlaWdodCA9ICcxMDBweCc7XG4gICAgICAgIG91dGVyU3R5bGUub3ZlcmZsb3cgPSBTQ1JPTEw7XG4gICAgICAgIG91dGVyU3R5bGUudG9wID0gJy05OTk5cHgnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyKTtcbiAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBvdXRlci5vZmZzZXRXaWR0aCAtIG91dGVyLmNsaWVudFdpZHRoO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcbiAgICAgICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoO1xuICAgIH07XG4gICAgaXNGRldpdGhCdWdneVNjcm9sbGJhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaXNPU1hGRiwgdWEsIHZlcnNpb247XG4gICAgICAgIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgICAgIGlzT1NYRkYgPSAvKD89LitNYWMgT1MgWCkoPz0uK0ZpcmVmb3gpLy50ZXN0KHVhKTtcbiAgICAgICAgaWYgKCFpc09TWEZGKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmVyc2lvbiA9IC9GaXJlZm94XFwvXFxkezJ9XFwuLy5leGVjKHVhKTtcbiAgICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uWzBdLnJlcGxhY2UoL1xcRCsvZywgJycpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc09TWEZGICYmICt2ZXJzaW9uID4gMjM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgIEBjbGFzcyBOYW5vU2Nyb2xsXG4gICAgQHBhcmFtIGVsZW1lbnQge0hUTUxFbGVtZW50fE5vZGV9IHRoZSBtYWluIGVsZW1lbnRcbiAgICBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBuYW5vU2Nyb2xsZXIncyBvcHRpb25zXG4gICAgQGNvbnN0cnVjdG9yXG4gICAqL1xuICAgIE5hbm9TY3JvbGwgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgIGZ1bmN0aW9uIE5hbm9TY3JvbGwoZWwsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuZWwgPSBlbDtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCB8fCAoQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggPSBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGgoKSk7XG4gICAgICAgICAgICB0aGlzLiRlbCA9ICQodGhpcy5lbCk7XG4gICAgICAgICAgICB0aGlzLmRvYyA9ICQodGhpcy5vcHRpb25zLmRvY3VtZW50Q29udGV4dCB8fCBkb2N1bWVudCk7XG4gICAgICAgICAgICB0aGlzLndpbiA9ICQodGhpcy5vcHRpb25zLndpbmRvd0NvbnRleHQgfHwgd2luZG93KTtcbiAgICAgICAgICAgIHRoaXMuYm9keSA9IHRoaXMuZG9jLmZpbmQoJ2JvZHknKTtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQgPSB0aGlzLiRlbC5jaGlsZHJlbihcIi5cIiArIG9wdGlvbnMuY29udGVudENsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuYXR0cigndGFiaW5kZXgnLCB0aGlzLm9wdGlvbnMudGFiSW5kZXggfHwgMCk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQgPSB0aGlzLiRjb250ZW50WzBdO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaU9TTmF0aXZlU2Nyb2xsaW5nICYmICh0aGlzLmVsLnN0eWxlLldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nICE9IG51bGwpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uYXRpdmVTY3JvbGxpbmcoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jcmVhdGVFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgUHJldmVudHMgdGhlIHJlc3Qgb2YgdGhlIHBhZ2UgYmVpbmcgc2Nyb2xsZWRcbiAgICAgIHdoZW4gdXNlciBzY3JvbGxzIHRoZSBgLm5hbm8tY29udGVudGAgZWxlbWVudC5cbiAgICAgIEBtZXRob2QgcHJldmVudFNjcm9sbGluZ1xuICAgICAgQHBhcmFtIGV2ZW50IHtFdmVudH1cbiAgICAgIEBwYXJhbSBkaXJlY3Rpb24ge1N0cmluZ30gU2Nyb2xsIGRpcmVjdGlvbiAodXAgb3IgZG93bilcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUucHJldmVudFNjcm9sbGluZyA9IGZ1bmN0aW9uKGUsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gRE9NU0NST0xMKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRE9XTiAmJiBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsID4gMCB8fCBkaXJlY3Rpb24gPT09IFVQICYmIGUub3JpZ2luYWxFdmVudC5kZXRhaWwgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gTU9VU0VXSEVFTCkge1xuICAgICAgICAgICAgICAgIGlmICghZS5vcmlnaW5hbEV2ZW50IHx8ICFlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IERPV04gJiYgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPCAwIHx8IGRpcmVjdGlvbiA9PT0gVVAgJiYgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEVuYWJsZSBpT1MgbmF0aXZlIHNjcm9sbGluZ1xuICAgICAgQG1ldGhvZCBuYXRpdmVTY3JvbGxpbmdcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUubmF0aXZlU2Nyb2xsaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmc6ICd0b3VjaCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFVwZGF0ZXMgdGhvc2UgbmFub1Njcm9sbGVyIHByb3BlcnRpZXMgdGhhdFxuICAgICAgYXJlIHJlbGF0ZWQgdG8gY3VycmVudCBzY3JvbGxiYXIgcG9zaXRpb24uXG4gICAgICBAbWV0aG9kIHVwZGF0ZVNjcm9sbFZhbHVlc1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS51cGRhdGVTY3JvbGxWYWx1ZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50LCBkaXJlY3Rpb247XG4gICAgICAgICAgICBjb250ZW50ID0gdGhpcy5jb250ZW50O1xuICAgICAgICAgICAgdGhpcy5tYXhTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbEhlaWdodCAtIGNvbnRlbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wcmV2U2Nyb2xsVG9wID0gdGhpcy5jb250ZW50U2Nyb2xsVG9wIHx8IDA7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgPSBjb250ZW50LnNjcm9sbFRvcDtcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IHRoaXMuY29udGVudFNjcm9sbFRvcCA+IHRoaXMucHJldmlvdXNQb3NpdGlvbiA/IFwiZG93blwiIDogdGhpcy5jb250ZW50U2Nyb2xsVG9wIDwgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID8gXCJ1cFwiIDogXCJzYW1lXCI7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSB0aGlzLmNvbnRlbnRTY3JvbGxUb3A7XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uICE9PSBcInNhbWVcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJ3VwZGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHRoaXMuY29udGVudFNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5tYXhTY3JvbGxUb3AsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogZGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhTbGlkZXJUb3AgPSB0aGlzLnBhbmVIZWlnaHQgLSB0aGlzLnNsaWRlckhlaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlclRvcCA9IHRoaXMubWF4U2Nyb2xsVG9wID09PSAwID8gMCA6IHRoaXMuY29udGVudFNjcm9sbFRvcCAqIHRoaXMubWF4U2xpZGVyVG9wIC8gdGhpcy5tYXhTY3JvbGxUb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFVwZGF0ZXMgQ1NTIHN0eWxlcyBmb3IgY3VycmVudCBzY3JvbGwgcG9zaXRpb24uXG4gICAgICBVc2VzIENTUyAyZCB0cmFuc2Zyb21zIGFuZCBgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZWAgaWYgYXZhaWxhYmxlLlxuICAgICAgQG1ldGhvZCBzZXRPblNjcm9sbFN0eWxlc1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zZXRPblNjcm9sbFN0eWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNzc1ZhbHVlO1xuICAgICAgICAgICAgaWYgKGhhc1RyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIGNzc1ZhbHVlID0ge307XG4gICAgICAgICAgICAgICAgY3NzVmFsdWVbdHJhbnNmb3JtXSA9IFwidHJhbnNsYXRlKDAsIFwiICsgdGhpcy5zbGlkZXJUb3AgKyBcInB4KVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjc3NWYWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLnNsaWRlclRvcFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAockFGKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNBRiAmJiB0aGlzLnNjcm9sbFJBRikge1xuICAgICAgICAgICAgICAgICAgICBjQUYodGhpcy5zY3JvbGxSQUYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFJBRiA9IHJBRigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsUkFGID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zbGlkZXIuY3NzKGNzc1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLmNzcyhjc3NWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIENyZWF0ZXMgZXZlbnQgcmVsYXRlZCBtZXRob2RzXG4gICAgICBAbWV0aG9kIGNyZWF0ZUV2ZW50c1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5jcmVhdGVFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgICAgICAgICAgIGRvd246IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNCZWluZ0RyYWdnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub2Zmc2V0WSA9IGUucGFnZVkgLSBfdGhpcy5zbGlkZXIub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5zbGlkZXIuaXMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub2Zmc2V0WSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYW5lLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRvYy5iaW5kKE1PVVNFTU9WRSwgX3RoaXMuZXZlbnRzW0RSQUddKS5iaW5kKE1PVVNFVVAsIF90aGlzLmV2ZW50c1tVUF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYm9keS5iaW5kKE1PVVNFRU5URVIsIF90aGlzLmV2ZW50c1tFTlRFUl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIGRyYWc6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSA9IGUucGFnZVkgLSBfdGhpcy4kZWwub2Zmc2V0KCkudG9wIC0gX3RoaXMucGFuZVRvcCAtIChfdGhpcy5vZmZzZXRZIHx8IF90aGlzLnNsaWRlckhlaWdodCAqIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID49IF90aGlzLm1heFNjcm9sbFRvcCAmJiBfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSBfdGhpcy5tYXhTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPT09IDAgJiYgX3RoaXMucHJldlNjcm9sbFRvcCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGx0b3AnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICB1cDogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0JlaW5nRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFuZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2MudW5iaW5kKE1PVVNFTU9WRSwgX3RoaXMuZXZlbnRzW0RSQUddKS51bmJpbmQoTU9VU0VVUCwgX3RoaXMuZXZlbnRzW1VQXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ib2R5LnVuYmluZChNT1VTRUVOVEVSLCBfdGhpcy5ldmVudHNbRU5URVJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICByZXNpemU6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICBwYW5lZG93bjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZID0gKGUub2Zmc2V0WSB8fCBlLm9yaWdpbmFsRXZlbnQubGF5ZXJZKSAtIChfdGhpcy5zbGlkZXJIZWlnaHQgKiAwLjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ldmVudHMuZG93bihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICBzY3JvbGw6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlU2Nyb2xsVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNCZWluZ0RyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlclkgPSBfdGhpcy5zbGlkZXJUb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0T25TY3JvbGxTdHlsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA+PSBfdGhpcy5tYXhTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5wcmV2ZW50UGFnZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2ZW50U2Nyb2xsaW5nKGUsIERPV04pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldlNjcm9sbFRvcCAhPT0gX3RoaXMubWF4U2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGxlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5wcmV2ZW50UGFnZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcmV2ZW50U2Nyb2xsaW5nKGUsIFVQKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZTY3JvbGxUb3AgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ3Njcm9sbHRvcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICB3aGVlbDogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSBlLmRlbHRhIHx8IGUud2hlZWxEZWx0YSB8fCAoZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhKSB8fCAtZS5kZXRhaWwgfHwgKGUub3JpZ2luYWxFdmVudCAmJiAtZS5vcmlnaW5hbEV2ZW50LmRldGFpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZICs9IC1kZWx0YSAvIDM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICBlbnRlcjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaXNCZWluZ0RyYWdnZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGUuYnV0dG9ucyB8fCBlLndoaWNoKSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoX3JlZiA9IF90aGlzLmV2ZW50cylbVVBdLmFwcGx5KF9yZWYsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEFkZHMgZXZlbnQgbGlzdGVuZXJzIHdpdGggalF1ZXJ5LlxuICAgICAgQG1ldGhvZCBhZGRFdmVudHNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRzO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudHMoKTtcbiAgICAgICAgICAgIGV2ZW50cyA9IHRoaXMuZXZlbnRzO1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZGlzYWJsZVJlc2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMud2luLmJpbmQoUkVTSVpFLCBldmVudHNbUkVTSVpFXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIuYmluZChNT1VTRURPV04sIGV2ZW50c1tET1dOXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLmJpbmQoTU9VU0VET1dOLCBldmVudHNbUEFORURPV05dKS5iaW5kKFwiXCIgKyBNT1VTRVdIRUVMICsgXCIgXCIgKyBET01TQ1JPTEwsIGV2ZW50c1tXSEVFTF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC5iaW5kKFwiXCIgKyBTQ1JPTEwgKyBcIiBcIiArIE1PVVNFV0hFRUwgKyBcIiBcIiArIERPTVNDUk9MTCArIFwiIFwiICsgVE9VQ0hNT1ZFLCBldmVudHNbU0NST0xMXSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzIHdpdGggalF1ZXJ5LlxuICAgICAgQG1ldGhvZCByZW1vdmVFdmVudHNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUucmVtb3ZlRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRzO1xuICAgICAgICAgICAgZXZlbnRzID0gdGhpcy5ldmVudHM7XG4gICAgICAgICAgICB0aGlzLndpbi51bmJpbmQoUkVTSVpFLCBldmVudHNbUkVTSVpFXSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIudW5iaW5kKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLnVuYmluZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC51bmJpbmQoXCJcIiArIFNDUk9MTCArIFwiIFwiICsgTU9VU0VXSEVFTCArIFwiIFwiICsgRE9NU0NST0xMICsgXCIgXCIgKyBUT1VDSE1PVkUsIGV2ZW50c1tTQ1JPTExdKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgR2VuZXJhdGVzIG5hbm9TY3JvbGxlcidzIHNjcm9sbGJhciBhbmQgZWxlbWVudHMgZm9yIGl0LlxuICAgICAgQG1ldGhvZCBnZW5lcmF0ZVxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRDbGFzcywgY3NzUnVsZSwgY3VycmVudFBhZGRpbmcsIG9wdGlvbnMsIHBhbmUsIHBhbmVDbGFzcywgc2xpZGVyQ2xhc3M7XG4gICAgICAgICAgICBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuICAgICAgICAgICAgcGFuZUNsYXNzID0gb3B0aW9ucy5wYW5lQ2xhc3MsIHNsaWRlckNsYXNzID0gb3B0aW9ucy5zbGlkZXJDbGFzcywgY29udGVudENsYXNzID0gb3B0aW9ucy5jb250ZW50Q2xhc3M7XG4gICAgICAgICAgICBpZiAoIShwYW5lID0gdGhpcy4kZWwuY2hpbGRyZW4oXCIuXCIgKyBwYW5lQ2xhc3MpKS5sZW5ndGggJiYgIXBhbmUuY2hpbGRyZW4oXCIuXCIgKyBzbGlkZXJDbGFzcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuYXBwZW5kKFwiPGRpdiBjbGFzcz1cXFwiXCIgKyBwYW5lQ2xhc3MgKyBcIlxcXCI+PGRpdiBjbGFzcz1cXFwiXCIgKyBzbGlkZXJDbGFzcyArIFwiXFxcIiAvPjwvZGl2PlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFuZSA9IHRoaXMuJGVsLmNoaWxkcmVuKFwiLlwiICsgcGFuZUNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyID0gdGhpcy5wYW5lLmZpbmQoXCIuXCIgKyBzbGlkZXJDbGFzcyk7XG4gICAgICAgICAgICBpZiAoQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggPT09IDAgJiYgaXNGRldpdGhCdWdneVNjcm9sbGJhcigpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhZGRpbmcgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmNvbnRlbnQsIG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctcmlnaHQnKS5yZXBsYWNlKC9bXjAtOS5dKy9nLCAnJyk7XG4gICAgICAgICAgICAgICAgY3NzUnVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0xNCxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZ1JpZ2h0OiArY3VycmVudFBhZGRpbmcgKyAxNFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEJST1dTRVJfU0NST0xMQkFSX1dJRFRIKSB7XG4gICAgICAgICAgICAgICAgY3NzUnVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC1CUk9XU0VSX1NDUk9MTEJBUl9XSURUSFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ2hhcy1zY3JvbGxiYXInKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjc3NSdWxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyhjc3NSdWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBAbWV0aG9kIHJlc3RvcmVcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRzKCk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFJlc2V0cyBuYW5vU2Nyb2xsZXIncyBzY3JvbGxiYXIuXG4gICAgICBAbWV0aG9kIHJlc2V0XG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoKTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQsIGNvbnRlbnRIZWlnaHQsIGNvbnRlbnRQb3NpdGlvbiwgY29udGVudFN0eWxlLCBjb250ZW50U3R5bGVPdmVyZmxvd1ksIHBhbmVCb3R0b20sIHBhbmVIZWlnaHQsIHBhbmVPdXRlckhlaWdodCwgcGFuZVRvcCwgcGFyZW50TWF4SGVpZ2h0LCByaWdodCwgc2xpZGVySGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50SGVpZ2h0ID0gdGhpcy5jb250ZW50LnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuJGVsLmZpbmQoXCIuXCIgKyB0aGlzLm9wdGlvbnMucGFuZUNsYXNzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlKCkuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGVudCA9IHRoaXMuY29udGVudDtcbiAgICAgICAgICAgIGNvbnRlbnRTdHlsZSA9IGNvbnRlbnQuc3R5bGU7XG4gICAgICAgICAgICBjb250ZW50U3R5bGVPdmVyZmxvd1kgPSBjb250ZW50U3R5bGUub3ZlcmZsb3dZO1xuICAgICAgICAgICAgaWYgKEJST1dTRVJfSVNfSUU3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuJGNvbnRlbnQuaGVpZ2h0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnRIZWlnaHQgPSBjb250ZW50LnNjcm9sbEhlaWdodCArIEJST1dTRVJfU0NST0xMQkFSX1dJRFRIO1xuICAgICAgICAgICAgcGFyZW50TWF4SGVpZ2h0ID0gcGFyc2VJbnQodGhpcy4kZWwuY3NzKFwibWF4LWhlaWdodFwiKSwgMTApO1xuICAgICAgICAgICAgaWYgKHBhcmVudE1heEhlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5oZWlnaHQoXCJcIik7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuaGVpZ2h0KGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ID4gcGFyZW50TWF4SGVpZ2h0ID8gcGFyZW50TWF4SGVpZ2h0IDogY29udGVudC5zY3JvbGxIZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFuZUhlaWdodCA9IHRoaXMucGFuZS5vdXRlckhlaWdodChmYWxzZSk7XG4gICAgICAgICAgICBwYW5lVG9wID0gcGFyc2VJbnQodGhpcy5wYW5lLmNzcygndG9wJyksIDEwKTtcbiAgICAgICAgICAgIHBhbmVCb3R0b20gPSBwYXJzZUludCh0aGlzLnBhbmUuY3NzKCdib3R0b20nKSwgMTApO1xuICAgICAgICAgICAgcGFuZU91dGVySGVpZ2h0ID0gcGFuZUhlaWdodCArIHBhbmVUb3AgKyBwYW5lQm90dG9tO1xuICAgICAgICAgICAgc2xpZGVySGVpZ2h0ID0gTWF0aC5yb3VuZChwYW5lT3V0ZXJIZWlnaHQgLyBjb250ZW50SGVpZ2h0ICogcGFuZU91dGVySGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChzbGlkZXJIZWlnaHQgPCB0aGlzLm9wdGlvbnMuc2xpZGVyTWluSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc2xpZGVySGVpZ2h0ID0gdGhpcy5vcHRpb25zLnNsaWRlck1pbkhlaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKHRoaXMub3B0aW9ucy5zbGlkZXJNYXhIZWlnaHQgIT0gbnVsbCkgJiYgc2xpZGVySGVpZ2h0ID4gdGhpcy5vcHRpb25zLnNsaWRlck1heEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNsaWRlckhlaWdodCA9IHRoaXMub3B0aW9ucy5zbGlkZXJNYXhIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29udGVudFN0eWxlT3ZlcmZsb3dZID09PSBTQ1JPTEwgJiYgY29udGVudFN0eWxlLm92ZXJmbG93WCAhPT0gU0NST0xMKSB7XG4gICAgICAgICAgICAgICAgc2xpZGVySGVpZ2h0ICs9IEJST1dTRVJfU0NST0xMQkFSX1dJRFRIO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXhTbGlkZXJUb3AgPSBwYW5lT3V0ZXJIZWlnaHQgLSBzbGlkZXJIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSBjb250ZW50SGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wYW5lSGVpZ2h0ID0gcGFuZUhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucGFuZU91dGVySGVpZ2h0ID0gcGFuZU91dGVySGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5zbGlkZXJIZWlnaHQgPSBzbGlkZXJIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnBhbmVUb3AgPSBwYW5lVG9wO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXIuaGVpZ2h0KHNsaWRlckhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5zY3JvbGwoKTtcbiAgICAgICAgICAgIHRoaXMucGFuZS5zaG93KCk7XG4gICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICgoY29udGVudC5zY3JvbGxIZWlnaHQgPT09IGNvbnRlbnQuY2xpZW50SGVpZ2h0KSB8fCAodGhpcy5wYW5lLm91dGVySGVpZ2h0KHRydWUpID49IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICYmIGNvbnRlbnRTdHlsZU92ZXJmbG93WSAhPT0gU0NST0xMKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsLmNsaWVudEhlaWdodCA9PT0gY29udGVudC5zY3JvbGxIZWlnaHQgJiYgY29udGVudFN0eWxlT3ZlcmZsb3dZID09PSBTQ1JPTEwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGFuZS5jc3Moe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6ICh0aGlzLm9wdGlvbnMuYWx3YXlzVmlzaWJsZSA/IDEgOiAnJyksXG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogKHRoaXMub3B0aW9ucy5hbHdheXNWaXNpYmxlID8gJ3Zpc2libGUnIDogJycpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbnRQb3NpdGlvbiA9IHRoaXMuJGNvbnRlbnQuY3NzKCdwb3NpdGlvbicpO1xuICAgICAgICAgICAgaWYgKGNvbnRlbnRQb3NpdGlvbiA9PT0gJ3N0YXRpYycgfHwgY29udGVudFBvc2l0aW9uID09PSAncmVsYXRpdmUnKSB7XG4gICAgICAgICAgICAgICAgcmlnaHQgPSBwYXJzZUludCh0aGlzLiRjb250ZW50LmNzcygncmlnaHQnKSwgMTApO1xuICAgICAgICAgICAgICAgIGlmIChyaWdodCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogcmlnaHRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEBtZXRob2Qgc2Nyb2xsXG4gICAgICBAcHJpdmF0ZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsOiAndG9wJyB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyWSA9IE1hdGgubWF4KDAsIHRoaXMuc2xpZGVyWSk7XG4gICAgICAgICAgICB0aGlzLnNsaWRlclkgPSBNYXRoLm1pbih0aGlzLm1heFNsaWRlclRvcCwgdGhpcy5zbGlkZXJZKTtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuc2Nyb2xsVG9wKHRoaXMubWF4U2Nyb2xsVG9wICogdGhpcy5zbGlkZXJZIC8gdGhpcy5tYXhTbGlkZXJUb3ApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Nyb2xsVmFsdWVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRPblNjcm9sbFN0eWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFNjcm9sbCBhdCB0aGUgYm90dG9tIHdpdGggYW4gb2Zmc2V0IHZhbHVlXG4gICAgICBAbWV0aG9kIHNjcm9sbEJvdHRvbVxuICAgICAgQHBhcmFtIG9mZnNldFkge051bWJlcn1cbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbEJvdHRvbTogdmFsdWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsQm90dG9tID0gZnVuY3Rpb24ob2Zmc2V0WSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC5zY3JvbGxUb3AodGhpcy5jb250ZW50SGVpZ2h0IC0gdGhpcy4kY29udGVudC5oZWlnaHQoKSAtIG9mZnNldFkpLnRyaWdnZXIoTU9VU0VXSEVFTCk7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKS5yZXN0b3JlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgU2Nyb2xsIGF0IHRoZSB0b3Agd2l0aCBhbiBvZmZzZXQgdmFsdWVcbiAgICAgIEBtZXRob2Qgc2Nyb2xsVG9wXG4gICAgICBAcGFyYW0gb2Zmc2V0WSB7TnVtYmVyfVxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsVG9wOiB2YWx1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGxUb3AgPSBmdW5jdGlvbihvZmZzZXRZKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnNjcm9sbFRvcCgrb2Zmc2V0WSkudHJpZ2dlcihNT1VTRVdIRUVMKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpLnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBTY3JvbGwgdG8gYW4gZWxlbWVudFxuICAgICAgQG1ldGhvZCBzY3JvbGxUb1xuICAgICAgQHBhcmFtIG5vZGUge05vZGV9IEEgbm9kZSB0byBzY3JvbGwgdG8uXG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGxUbzogJCgnI2Ffbm9kZScpIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbFRvID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUb3AodGhpcy4kZWwuZmluZChub2RlKS5nZXQoMCkub2Zmc2V0VG9wKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBUbyBzdG9wIHRoZSBvcGVyYXRpb24uXG4gICAgICBUaGlzIG9wdGlvbiB3aWxsIHRlbGwgdGhlIHBsdWdpbiB0byBkaXNhYmxlIGFsbCBldmVudCBiaW5kaW5ncyBhbmQgaGlkZSB0aGUgZ2FkZ2V0IHNjcm9sbGJhciBmcm9tIHRoZSBVSS5cbiAgICAgIEBtZXRob2Qgc3RvcFxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc3RvcDogdHJ1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoY0FGICYmIHRoaXMuc2Nyb2xsUkFGKSB7XG4gICAgICAgICAgICAgICAgY0FGKHRoaXMuc2Nyb2xsUkFGKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFJBRiA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudHMoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIERlc3Ryb3lzIG5hbm9TY3JvbGxlciBhbmQgcmVzdG9yZXMgYnJvd3NlcidzIG5hdGl2ZSBzY3JvbGxiYXIuXG4gICAgICBAbWV0aG9kIGRlc3Ryb3lcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IGRlc3Ryb3k6IHRydWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcgJiYgdGhpcy5wYW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChCUk9XU0VSX0lTX0lFNykge1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuaGVpZ2h0KCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiRlbC5oYXNDbGFzcygnaGFzLXNjcm9sbGJhcicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ2hhcy1zY3JvbGxiYXInKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFRvIGZsYXNoIHRoZSBzY3JvbGxiYXIgZ2FkZ2V0IGZvciBhbiBhbW91bnQgb2YgdGltZSBkZWZpbmVkIGluIHBsdWdpbiBzZXR0aW5ncyAoZGVmYXVsdHMgdG8gMSw1cykuXG4gICAgICBVc2VmdWwgaWYgeW91IHdhbnQgdG8gc2hvdyB0aGUgdXNlciAoZS5nLiBvbiBwYWdlbG9hZCkgdGhhdCB0aGVyZSBpcyBtb3JlIGNvbnRlbnQgd2FpdGluZyBmb3IgaGltLlxuICAgICAgQG1ldGhvZCBmbGFzaFxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgZmxhc2g6IHRydWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuZmxhc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgIHRoaXMucGFuZS5hZGRDbGFzcygnZmxhc2hlZCcpO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnBhbmUucmVtb3ZlQ2xhc3MoJ2ZsYXNoZWQnKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkodGhpcyksIHRoaXMub3B0aW9ucy5mbGFzaERlbGF5KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBOYW5vU2Nyb2xsO1xuXG4gICAgfSkoKTtcbiAgICAkLmZuLm5hbm9TY3JvbGxlciA9IGZ1bmN0aW9uKHNldHRpbmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucywgc2Nyb2xsYmFyO1xuICAgICAgICAgICAgaWYgKCEoc2Nyb2xsYmFyID0gdGhpcy5uYW5vc2Nyb2xsZXIpKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMubmFub3Njcm9sbGVyID0gc2Nyb2xsYmFyID0gbmV3IE5hbm9TY3JvbGwodGhpcywgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MgJiYgdHlwZW9mIHNldHRpbmdzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgJC5leHRlbmQoc2Nyb2xsYmFyLm9wdGlvbnMsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsQm90dG9tICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxCb3R0b20oc2V0dGluZ3Muc2Nyb2xsQm90dG9tKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbFRvcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsVG9wKHNldHRpbmdzLnNjcm9sbFRvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGxUbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvKHNldHRpbmdzLnNjcm9sbFRvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxCb3R0b20oMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGwgPT09ICd0b3AnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsICYmIHNldHRpbmdzLnNjcm9sbCBpbnN0YW5jZW9mICQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUbyhzZXR0aW5ncy5zY3JvbGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc3RvcCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmRlc3Ryb3kpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5mbGFzaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLmZsYXNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5yZXNldCgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgICQuZm4ubmFub1Njcm9sbGVyLkNvbnN0cnVjdG9yID0gTmFub1Njcm9sbDtcbn0pKGpxMTExLCB3aW5kb3csIGRvY3VtZW50KTsiLCIvKlxuICogQGZpbGVPdmVydmlldyBUb3VjaFN3aXBlIC0galF1ZXJ5IFBsdWdpblxuICogQHZlcnNpb24gMS42LjZcbiAqXG4gKiBAYXV0aG9yIE1hdHQgQnJ5c29uIGh0dHA6Ly93d3cuZ2l0aHViLmNvbS9tYXR0YnJ5c29uXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXR0YnJ5c29uL1RvdWNoU3dpcGUtSnF1ZXJ5LVBsdWdpblxuICogQHNlZSBodHRwOi8vbGFicy5za2lua2Vycy5jb20vdG91Y2hTd2lwZS9cbiAqIEBzZWUgaHR0cDovL3BsdWdpbnMuanF1ZXJ5LmNvbS9wcm9qZWN0L3RvdWNoU3dpcGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAgTWF0dCBCcnlzb25cbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLlxuICpcbiAqL1xuXG4oZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgJiYgZGVmaW5lLmFtZC5qcTExMSkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHMuXG4gICAgICAgIGZhY3RvcnkoanExMTEpO1xuICAgIH1cbn0oZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLy9Db25zdGFudHNcbiAgICB2YXIgTEVGVCA9IFwibGVmdFwiLFxuICAgICAgICBSSUdIVCA9IFwicmlnaHRcIixcbiAgICAgICAgVVAgPSBcInVwXCIsXG4gICAgICAgIERPV04gPSBcImRvd25cIixcbiAgICAgICAgSU4gPSBcImluXCIsXG4gICAgICAgIE9VVCA9IFwib3V0XCIsXG5cbiAgICAgICAgTk9ORSA9IFwibm9uZVwiLFxuICAgICAgICBBVVRPID0gXCJhdXRvXCIsXG5cbiAgICAgICAgU1dJUEUgPSBcInN3aXBlXCIsXG4gICAgICAgIFBJTkNIID0gXCJwaW5jaFwiLFxuICAgICAgICBUQVAgPSBcInRhcFwiLFxuICAgICAgICBET1VCTEVfVEFQID0gXCJkb3VibGV0YXBcIixcbiAgICAgICAgTE9OR19UQVAgPSBcImxvbmd0YXBcIixcbiAgICAgICAgSE9MRCA9IFwiaG9sZFwiLFxuXG4gICAgICAgIEhPUklaT05UQUwgPSBcImhvcml6b250YWxcIixcbiAgICAgICAgVkVSVElDQUwgPSBcInZlcnRpY2FsXCIsXG5cbiAgICAgICAgQUxMX0ZJTkdFUlMgPSBcImFsbFwiLFxuXG4gICAgICAgIERPVUJMRV9UQVBfVEhSRVNIT0xEID0gMTAsXG5cbiAgICAgICAgUEhBU0VfU1RBUlQgPSBcInN0YXJ0XCIsXG4gICAgICAgIFBIQVNFX01PVkUgPSBcIm1vdmVcIixcbiAgICAgICAgUEhBU0VfRU5EID0gXCJlbmRcIixcbiAgICAgICAgUEhBU0VfQ0FOQ0VMID0gXCJjYW5jZWxcIixcblxuICAgICAgICBTVVBQT1JUU19UT1VDSCA9ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyxcblxuICAgICAgICBTVVBQT1JUU19QT0lOVEVSX0lFMTAgPSB3aW5kb3cubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQgJiYgIXdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQsXG5cbiAgICAgICAgU1VQUE9SVFNfUE9JTlRFUiA9IHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQgfHwgd2luZG93Lm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLFxuXG4gICAgICAgIFBMVUdJTl9OUyA9ICdUb3VjaFN3aXBlJztcblxuXG5cbiAgICAvKipcblx0KiBUaGUgZGVmYXVsdCBjb25maWd1cmF0aW9uLCBhbmQgYXZhaWxhYmxlIG9wdGlvbnMgdG8gY29uZmlndXJlIHRvdWNoIHN3aXBlIHdpdGguXG5cdCogWW91IGNhbiBzZXQgdGhlIGRlZmF1bHQgdmFsdWVzIGJ5IHVwZGF0aW5nIGFueSBvZiB0aGUgcHJvcGVydGllcyBwcmlvciB0byBpbnN0YW50aWF0aW9uLlxuXHQqIEBuYW1lICQuZm4uc3dpcGUuZGVmYXVsdHNcblx0KiBAbmFtZXNwYWNlXG5cdCogQHByb3BlcnR5IHtpbnR9IFtmaW5nZXJzPTFdIFRoZSBudW1iZXIgb2YgZmluZ2VycyB0byBkZXRlY3QgaW4gYSBzd2lwZS4gQW55IHN3aXBlcyB0aGF0IGRvIG5vdCBtZWV0IHRoaXMgcmVxdWlyZW1lbnQgd2lsbCBOT1QgdHJpZ2dlciBzd2lwZSBoYW5kbGVycy5cblx0KiBAcHJvcGVydHkge2ludH0gW3RocmVzaG9sZD03NV0gVGhlIG51bWJlciBvZiBwaXhlbHMgdGhhdCB0aGUgdXNlciBtdXN0IG1vdmUgdGhlaXIgZmluZ2VyIGJ5IGJlZm9yZSBpdCBpcyBjb25zaWRlcmVkIGEgc3dpcGUuXG5cdCogQHByb3BlcnR5IHtpbnR9IFtjYW5jZWxUaHJlc2hvbGQ9bnVsbF0gVGhlIG51bWJlciBvZiBwaXhlbHMgdGhhdCB0aGUgdXNlciBtdXN0IG1vdmUgdGhlaXIgZmluZ2VyIGJhY2sgZnJvbSB0aGUgb3JpZ2luYWwgc3dpcGUgZGlyZWN0aW9uIHRvIGNhbmNlbCB0aGUgZ2VzdHVyZS5cblx0KiBAcHJvcGVydHkge2ludH0gW3BpbmNoVGhyZXNob2xkPTIwXSBUaGUgbnVtYmVyIG9mIHBpeGVscyB0aGF0IHRoZSB1c2VyIG11c3QgcGluY2ggdGhlaXIgZmluZ2VyIGJ5IGJlZm9yZSBpdCBpcyBjb25zaWRlcmVkIGEgcGluY2guXG5cdCogQHByb3BlcnR5IHtpbnR9IFttYXhUaW1lVGhyZXNob2xkPW51bGxdIFRpbWUsIGluIG1pbGxpc2Vjb25kcywgYmV0d2VlbiB0b3VjaFN0YXJ0IGFuZCB0b3VjaEVuZCBtdXN0IE5PVCBleGNlZWQgaW4gb3JkZXIgdG8gYmUgY29uc2lkZXJlZCBhIHN3aXBlLlxuXHQqIEBwcm9wZXJ0eSB7aW50fSBbZmluZ2VyUmVsZWFzZVRocmVzaG9sZD0yNTBdIFRpbWUgaW4gbWlsbGlzZWNvbmRzIGJldHdlZW4gcmVsZWFzaW5nIG11bHRpcGxlIGZpbmdlcnMuICBJZiAyIGZpbmdlcnMgYXJlIGRvd24sIGFuZCBhcmUgcmVsZWFzZWQgb25lIGFmdGVyIHRoZSBvdGhlciwgaWYgdGhleSBhcmUgd2l0aGluIHRoaXMgdGhyZXNob2xkLCBpdCBjb3VudHMgYXMgYSBzaW11bHRhbmVvdXMgcmVsZWFzZS5cblx0KiBAcHJvcGVydHkge2ludH0gW2xvbmdUYXBUaHJlc2hvbGQ9NTAwXSBUaW1lIGluIG1pbGxpc2Vjb25kcyBiZXR3ZWVuIHRhcCBhbmQgcmVsZWFzZSBmb3IgYSBsb25nIHRhcFxuXHQqIEBwcm9wZXJ0eSB7aW50fSBbZG91YmxlVGFwVGhyZXNob2xkPTIwMF0gVGltZSBpbiBtaWxsaXNlY29uZHMgYmV0d2VlbiAyIHRhcHMgdG8gY291bnQgYXMgYSBkb3VibGUgdGFwXG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3N3aXBlPW51bGxdIEEgaGFuZGxlciB0byBjYXRjaCBhbGwgc3dpcGVzLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6c3dpcGV9XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3N3aXBlTGVmdD1udWxsXSBBIGhhbmRsZXIgdGhhdCBpcyB0cmlnZ2VyZWQgZm9yIFwibGVmdFwiIHN3aXBlcy4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnN3aXBlTGVmdH1cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbc3dpcGVSaWdodD1udWxsXSBBIGhhbmRsZXIgdGhhdCBpcyB0cmlnZ2VyZWQgZm9yIFwicmlnaHRcIiBzd2lwZXMuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZSNldmVudDpzd2lwZVJpZ2h0fVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtzd2lwZVVwPW51bGxdIEEgaGFuZGxlciB0aGF0IGlzIHRyaWdnZXJlZCBmb3IgXCJ1cFwiIHN3aXBlcy4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnN3aXBlVXB9XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3N3aXBlRG93bj1udWxsXSBBIGhhbmRsZXIgdGhhdCBpcyB0cmlnZ2VyZWQgZm9yIFwiZG93blwiIHN3aXBlcy4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnN3aXBlRG93bn1cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbc3dpcGVTdGF0dXM9bnVsbF0gQSBoYW5kbGVyIHRyaWdnZXJlZCBmb3IgZXZlcnkgcGhhc2Ugb2YgdGhlIHN3aXBlLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6c3dpcGVTdGF0dXN9XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3BpbmNoSW49bnVsbF0gQSBoYW5kbGVyIHRyaWdnZXJlZCBmb3IgcGluY2ggaW4gZXZlbnRzLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6cGluY2hJbn1cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbcGluY2hPdXQ9bnVsbF0gQSBoYW5kbGVyIHRyaWdnZXJlZCBmb3IgcGluY2ggb3V0IGV2ZW50cy4gU2VlIHtAbGluayAkLmZuLnN3aXBlI2V2ZW50OnBpbmNoT3V0fVxuXHQqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IFtwaW5jaFN0YXR1cz1udWxsXSBBIGhhbmRsZXIgdHJpZ2dlcmVkIGZvciBldmVyeSBwaGFzZSBvZiBhIHBpbmNoLiBTZWUge0BsaW5rICQuZm4uc3dpcGUjZXZlbnQ6cGluY2hTdGF0dXN9XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW3RhcD1udWxsXSBBIGhhbmRsZXIgdHJpZ2dlcmVkIHdoZW4gYSB1c2VyIGp1c3QgdGFwcyBvbiB0aGUgaXRlbSwgcmF0aGVyIHRoYW4gc3dpcGVzIGl0LiBJZiB0aGV5IGRvIG5vdCBtb3ZlLCB0YXAgaXMgdHJpZ2dlcmVkLCBpZiB0aGV5IGRvIG1vdmUsIGl0IGlzIG5vdC5cblx0KiBAcHJvcGVydHkge2Z1bmN0aW9ufSBbZG91YmxlVGFwPW51bGxdIEEgaGFuZGxlciB0cmlnZ2VyZWQgd2hlbiBhIHVzZXIgZG91YmxlIHRhcHMgb24gdGhlIGl0ZW0uIFRoZSBkZWxheSBiZXR3ZWVuIHRhcHMgY2FuIGJlIHNldCB3aXRoIHRoZSBkb3VibGVUYXBUaHJlc2hvbGQgcHJvcGVydHkuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZS5kZWZhdWx0cyNkb3VibGVUYXBUaHJlc2hvbGR9XG5cdCogQHByb3BlcnR5IHtmdW5jdGlvbn0gW2xvbmdUYXA9bnVsbF0gQSBoYW5kbGVyIHRyaWdnZXJlZCB3aGVuIGEgdXNlciBsb25nIHRhcHMgb24gdGhlIGl0ZW0uIFRoZSBkZWxheSBiZXR3ZWVuIHN0YXJ0IGFuZCBlbmQgY2FuIGJlIHNldCB3aXRoIHRoZSBsb25nVGFwVGhyZXNob2xkIHByb3BlcnR5LiBTZWUge0BsaW5rICQuZm4uc3dpcGUuZGVmYXVsdHMjbG9uZ1RhcFRocmVzaG9sZH1cblx0KiBAcHJvcGVydHkgKGZ1bmN0aW9uKSBbaG9sZD1udWxsXSBBIGhhbmRsZXIgdHJpZ2dlcmVkIHdoZW4gYSB1c2VyIHJlYWNoZXMgbG9uZ1RhcFRocmVzaG9sZCBvbiB0aGUgaXRlbS4gU2VlIHtAbGluayAkLmZuLnN3aXBlLmRlZmF1bHRzI2xvbmdUYXBUaHJlc2hvbGR9XG5cdCogQHByb3BlcnR5IHtib29sZWFufSBbdHJpZ2dlck9uVG91Y2hFbmQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIHN3aXBlIGV2ZW50cyBhcmUgdHJpZ2dlcmVkIHdoZW4gdGhlIHRvdWNoIGVuZCBldmVudCBpcyByZWNlaXZlZCAodXNlciByZWxlYXNlcyBmaW5nZXIpLiAgSWYgZmFsc2UsIGl0IHdpbGwgYmUgdHJpZ2dlcmVkIG9uIHJlYWNoaW5nIHRoZSB0aHJlc2hvbGQsIGFuZCB0aGVuIGNhbmNlbCB0aGUgdG91Y2ggZXZlbnQgYXV0b21hdGljYWxseS5cblx0KiBAcHJvcGVydHkge2Jvb2xlYW59IFt0cmlnZ2VyT25Ub3VjaExlYXZlPWZhbHNlXSBJZiB0cnVlLCB0aGVuIHdoZW4gdGhlIHVzZXIgbGVhdmVzIHRoZSBzd2lwZSBvYmplY3QsIHRoZSBzd2lwZSB3aWxsIGVuZCBhbmQgdHJpZ2dlciBhcHByb3ByaWF0ZSBoYW5kbGVycy5cblx0KiBAcHJvcGVydHkge3N0cmluZ3x1bmRlZmluZWR9IFthbGxvd1BhZ2VTY3JvbGw9J2F1dG8nXSBIb3cgdGhlIGJyb3dzZXIgaGFuZGxlcyBwYWdlIHNjcm9sbHMgd2hlbiB0aGUgdXNlciBpcyBzd2lwaW5nIG9uIGEgdG91Y2hTd2lwZSBvYmplY3QuIFNlZSB7QGxpbmsgJC5mbi5zd2lwZS5wYWdlU2Nyb2xsfS4gIDxici8+PGJyLz5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGNvZGU+XCJhdXRvXCI8L2NvZGU+IDogYWxsIHVuZGVmaW5lZCBzd2lwZXMgd2lsbCBjYXVzZSB0aGUgcGFnZSB0byBzY3JvbGwgaW4gdGhhdCBkaXJlY3Rpb24uIDxici8+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxjb2RlPlwibm9uZVwiPC9jb2RlPiA6IHRoZSBwYWdlIHdpbGwgbm90IHNjcm9sbCB3aGVuIHVzZXIgc3dpcGVzLiA8YnIvPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8Y29kZT5cImhvcml6b250YWxcIjwvY29kZT4gOiB3aWxsIGZvcmNlIHBhZ2UgdG8gc2Nyb2xsIG9uIGhvcml6b250YWwgc3dpcGVzLiA8YnIvPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8Y29kZT5cInZlcnRpY2FsXCI8L2NvZGU+IDogd2lsbCBmb3JjZSBwYWdlIHRvIHNjcm9sbCBvbiB2ZXJ0aWNhbCBzd2lwZXMuIDxici8+XG5cdCogQHByb3BlcnR5IHtib29sZWFufSBbZmFsbGJhY2tUb01vdXNlRXZlbnRzPXRydWVdIElmIHRydWUgbW91c2UgZXZlbnRzIGFyZSB1c2VkIHdoZW4gcnVuIG9uIGEgbm9uIHRvdWNoIGRldmljZSwgZmFsc2Ugd2lsbCBzdG9wIHN3aXBlcyBiZWluZyB0cmlnZ2VyZWQgYnkgbW91c2UgZXZlbnRzIG9uIG5vbiB0b2N1aCBkZXZpY2VzLlxuXHQqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZXhjbHVkZWRFbGVtZW50cz1cImJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGEsIC5ub1N3aXBlXCJdIEEganF1ZXJ5IHNlbGVjdG9yIHRoYXQgc3BlY2lmaWVzIGNoaWxkIGVsZW1lbnRzIHRoYXQgZG8gTk9UIHRyaWdnZXIgc3dpcGVzLiBCeSBkZWZhdWx0IHRoaXMgZXhjbHVkZXMgYWxsIGZvcm0sIGlucHV0LCBzZWxlY3QsIGJ1dHRvbiwgYW5jaG9yIGFuZCAubm9Td2lwZSBlbGVtZW50cy5cblxuXHQqL1xuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgZmluZ2VyczogMSxcbiAgICAgICAgdGhyZXNob2xkOiA3NSxcbiAgICAgICAgY2FuY2VsVGhyZXNob2xkOiBudWxsLFxuICAgICAgICBwaW5jaFRocmVzaG9sZDogMjAsXG4gICAgICAgIG1heFRpbWVUaHJlc2hvbGQ6IG51bGwsXG4gICAgICAgIGZpbmdlclJlbGVhc2VUaHJlc2hvbGQ6IDI1MCxcbiAgICAgICAgbG9uZ1RhcFRocmVzaG9sZDogNTAwLFxuICAgICAgICBkb3VibGVUYXBUaHJlc2hvbGQ6IDIwMCxcbiAgICAgICAgc3dpcGU6IG51bGwsXG4gICAgICAgIHN3aXBlTGVmdDogbnVsbCxcbiAgICAgICAgc3dpcGVSaWdodDogbnVsbCxcbiAgICAgICAgc3dpcGVVcDogbnVsbCxcbiAgICAgICAgc3dpcGVEb3duOiBudWxsLFxuICAgICAgICBzd2lwZVN0YXR1czogbnVsbCxcbiAgICAgICAgcGluY2hJbjogbnVsbCxcbiAgICAgICAgcGluY2hPdXQ6IG51bGwsXG4gICAgICAgIHBpbmNoU3RhdHVzOiBudWxsLFxuICAgICAgICBjbGljazogbnVsbCwgLy9EZXByZWNhdGVkIHNpbmNlIDEuNi4yXG4gICAgICAgIHRhcDogbnVsbCxcbiAgICAgICAgZG91YmxlVGFwOiBudWxsLFxuICAgICAgICBsb25nVGFwOiBudWxsLFxuICAgICAgICBob2xkOiBudWxsLFxuICAgICAgICB0cmlnZ2VyT25Ub3VjaEVuZDogdHJ1ZSxcbiAgICAgICAgdHJpZ2dlck9uVG91Y2hMZWF2ZTogZmFsc2UsXG4gICAgICAgIGFsbG93UGFnZVNjcm9sbDogXCJhdXRvXCIsXG4gICAgICAgIGZhbGxiYWNrVG9Nb3VzZUV2ZW50czogdHJ1ZSxcbiAgICAgICAgZXhjbHVkZWRFbGVtZW50czogXCJsYWJlbCwgYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYSwgLm5vU3dpcGVcIlxuICAgIH07XG5cblxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyBUb3VjaFN3aXBlIGJlaGF2aW91ciB0byBvbmUgb3IgbW9yZSBqUXVlcnkgb2JqZWN0cy5cbiAgICAgKiBUaGUgVG91Y2hTd2lwZSBwbHVnaW4gY2FuIGJlIGluc3RhbnRpYXRlZCB2aWEgdGhpcyBtZXRob2QsIG9yIG1ldGhvZHMgd2l0aGluXG4gICAgICogVG91Y2hTd2lwZSBjYW4gYmUgZXhlY3V0ZWQgdmlhIHRoaXMgbWV0aG9kIGFzIHBlciBqUXVlcnkgcGx1Z2luIGFyY2hpdGVjdHVyZS5cbiAgICAgKiBAc2VlIFRvdWNoU3dpcGVcbiAgICAgKiBAY2xhc3NcbiAgICAgKiBAcGFyYW0ge01peGVkfSBtZXRob2QgSWYgdGhlIGN1cnJlbnQgRE9NTm9kZSBpcyBhIFRvdWNoU3dpcGUgb2JqZWN0LCBhbmQgPGNvZGU+bWV0aG9kPC9jb2RlPiBpcyBhIFRvdWNoU3dpcGUgbWV0aG9kLCB0aGVuXG4gICAgICogdGhlIDxjb2RlPm1ldGhvZDwvY29kZT4gaXMgZXhlY3V0ZWQsIGFuZCBhbnkgZm9sbG93aW5nIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRvIHRoZSBUb3VjaFN3aXBlIG1ldGhvZC5cbiAgICAgKiBJZiA8Y29kZT5tZXRob2Q8L2NvZGU+IGlzIGFuIG9iamVjdCwgdGhlbiB0aGUgVG91Y2hTd2lwZSBjbGFzcyBpcyBpbnN0YW50aWF0ZWQgb24gdGhlIGN1cnJlbnQgRE9NTm9kZSwgcGFzc2luZyB0aGVcbiAgICAgKiBjb25maWd1cmF0aW9uIHByb3BlcnRpZXMgZGVmaW5lZCBpbiB0aGUgb2JqZWN0LiBTZWUgVG91Y2hTd2lwZVxuICAgICAqXG4gICAgICovXG4gICAgJC5mbi5zd2lwZSA9IGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgcGx1Z2luID0gJHRoaXMuZGF0YShQTFVHSU5fTlMpO1xuXG4gICAgICAgIC8vQ2hlY2sgaWYgd2UgYXJlIGFscmVhZHkgaW5zdGFudGlhdGVkIGFuZCB0cnlpbmcgdG8gZXhlY3V0ZSBhIG1ldGhvZFxuICAgICAgICBpZiAocGx1Z2luICYmIHR5cGVvZiBtZXRob2QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAocGx1Z2luW21ldGhvZF0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGx1Z2luW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoJ01ldGhvZCAnICsgbWV0aG9kICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuc3dpcGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL0Vsc2Ugbm90IGluc3RhbnRpYXRlZCBhbmQgdHJ5aW5nIHRvIHBhc3MgaW5pdCBvYmplY3QgKG9yIG5vdGhpbmcpXG4gICAgICAgIGVsc2UgaWYgKCFwbHVnaW4gJiYgKHR5cGVvZiBtZXRob2QgPT09ICdvYmplY3QnIHx8ICFtZXRob2QpKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICR0aGlzO1xuICAgIH07XG5cbiAgICAvL0V4cG9zZSBvdXIgZGVmYXVsdHMgc28gYSB1c2VyIGNvdWxkIG92ZXJyaWRlIHRoZSBwbHVnaW4gZGVmYXVsdHNcbiAgICAkLmZuLnN3aXBlLmRlZmF1bHRzID0gZGVmYXVsdHM7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcGhhc2VzIHRoYXQgYSB0b3VjaCBldmVudCBnb2VzIHRocm91Z2guICBUaGUgPGNvZGU+cGhhc2U8L2NvZGU+IGlzIHBhc3NlZCB0byB0aGUgZXZlbnQgaGFuZGxlcnMuXG4gICAgICogVGhlc2UgcHJvcGVydGllcyBhcmUgcmVhZCBvbmx5LCBhdHRlbXB0aW5nIHRvIGNoYW5nZSB0aGVtIHdpbGwgbm90IGFsdGVyIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSBldmVudCBoYW5kbGVycy5cbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFBIQVNFX1NUQVJUIENvbnN0YW50IGluZGljYXRpbmcgdGhlIHN0YXJ0IHBoYXNlIG9mIHRoZSB0b3VjaCBldmVudC4gVmFsdWUgaXMgPGNvZGU+XCJzdGFydFwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gUEhBU0VfTU9WRSBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSBtb3ZlIHBoYXNlIG9mIHRoZSB0b3VjaCBldmVudC4gVmFsdWUgaXMgPGNvZGU+XCJtb3ZlXCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBQSEFTRV9FTkQgQ29uc3RhbnQgaW5kaWNhdGluZyB0aGUgZW5kIHBoYXNlIG9mIHRoZSB0b3VjaCBldmVudC4gVmFsdWUgaXMgPGNvZGU+XCJlbmRcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFBIQVNFX0NBTkNFTCBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSBjYW5jZWwgcGhhc2Ugb2YgdGhlIHRvdWNoIGV2ZW50LiBWYWx1ZSBpcyA8Y29kZT5cImNhbmNlbFwiPC9jb2RlPi5cbiAgICAgKi9cbiAgICAkLmZuLnN3aXBlLnBoYXNlcyA9IHtcbiAgICAgICAgUEhBU0VfU1RBUlQ6IFBIQVNFX1NUQVJULFxuICAgICAgICBQSEFTRV9NT1ZFOiBQSEFTRV9NT1ZFLFxuICAgICAgICBQSEFTRV9FTkQ6IFBIQVNFX0VORCxcbiAgICAgICAgUEhBU0VfQ0FOQ0VMOiBQSEFTRV9DQU5DRUxcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRpcmVjdGlvbiBjb25zdGFudHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBldmVudCBoYW5kbGVycy5cbiAgICAgKiBUaGVzZSBwcm9wZXJ0aWVzIGFyZSByZWFkIG9ubHksIGF0dGVtcHRpbmcgdG8gY2hhbmdlIHRoZW0gd2lsbCBub3QgYWx0ZXIgdGhlIHZhbHVlcyBwYXNzZWQgdG8gdGhlIGV2ZW50IGhhbmRsZXJzLlxuICAgICAqIEBuYW1lc3BhY2VcbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gTEVGVCBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSBsZWZ0IGRpcmVjdGlvbi4gVmFsdWUgaXMgPGNvZGU+XCJsZWZ0XCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBSSUdIVCBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSByaWdodCBkaXJlY3Rpb24uIFZhbHVlIGlzIDxjb2RlPlwicmlnaHRcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFVQIENvbnN0YW50IGluZGljYXRpbmcgdGhlIHVwIGRpcmVjdGlvbi4gVmFsdWUgaXMgPGNvZGU+XCJ1cFwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gRE9XTiBDb25zdGFudCBpbmRpY2F0aW5nIHRoZSBkb3duIGRpcmVjdGlvbi4gVmFsdWUgaXMgPGNvZGU+XCJjYW5jZWxcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IElOIENvbnN0YW50IGluZGljYXRpbmcgdGhlIGluIGRpcmVjdGlvbi4gVmFsdWUgaXMgPGNvZGU+XCJpblwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gT1VUIENvbnN0YW50IGluZGljYXRpbmcgdGhlIG91dCBkaXJlY3Rpb24uIFZhbHVlIGlzIDxjb2RlPlwib3V0XCI8L2NvZGU+LlxuICAgICAqL1xuICAgICQuZm4uc3dpcGUuZGlyZWN0aW9ucyA9IHtcbiAgICAgICAgTEVGVDogTEVGVCxcbiAgICAgICAgUklHSFQ6IFJJR0hULFxuICAgICAgICBVUDogVVAsXG4gICAgICAgIERPV046IERPV04sXG4gICAgICAgIElOOiBJTixcbiAgICAgICAgT1VUOiBPVVRcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGhlIHBhZ2Ugc2Nyb2xsIGNvbnN0YW50cyB0aGF0IGNhbiBiZSB1c2VkIHRvIHNldCB0aGUgdmFsdWUgb2YgPGNvZGU+YWxsb3dQYWdlU2Nyb2xsPC9jb2RlPiBvcHRpb25cbiAgICAgKiBUaGVzZSBwcm9wZXJ0aWVzIGFyZSByZWFkIG9ubHlcbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQHNlZSAkLmZuLnN3aXBlLmRlZmF1bHRzI2FsbG93UGFnZVNjcm9sbFxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBOT05FIENvbnN0YW50IGluZGljYXRpbmcgbm8gcGFnZSBzY3JvbGxpbmcgaXMgYWxsb3dlZC4gVmFsdWUgaXMgPGNvZGU+XCJub25lXCI8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBIT1JJWk9OVEFMIENvbnN0YW50IGluZGljYXRpbmcgaG9yaXpvbnRhbCBwYWdlIHNjcm9sbGluZyBpcyBhbGxvd2VkLiBWYWx1ZSBpcyA8Y29kZT5cImhvcml6b250YWxcIjwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFZFUlRJQ0FMIENvbnN0YW50IGluZGljYXRpbmcgdmVydGljYWwgcGFnZSBzY3JvbGxpbmcgaXMgYWxsb3dlZC4gVmFsdWUgaXMgPGNvZGU+XCJ2ZXJ0aWNhbFwiPC9jb2RlPi5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gQVVUTyBDb25zdGFudCBpbmRpY2F0aW5nIGVpdGhlciBob3Jpem9udGFsIG9yIHZlcnRpY2FsIHdpbGwgYmUgYWxsb3dlZCwgZGVwZW5kaW5nIG9uIHRoZSBzd2lwZSBoYW5kbGVycyByZWdpc3RlcmVkLiBWYWx1ZSBpcyA8Y29kZT5cImF1dG9cIjwvY29kZT4uXG4gICAgICovXG4gICAgJC5mbi5zd2lwZS5wYWdlU2Nyb2xsID0ge1xuICAgICAgICBOT05FOiBOT05FLFxuICAgICAgICBIT1JJWk9OVEFMOiBIT1JJWk9OVEFMLFxuICAgICAgICBWRVJUSUNBTDogVkVSVElDQUwsXG4gICAgICAgIEFVVE86IEFVVE9cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RhbnRzIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIGZpbmdlcnMgdXNlZCBpbiBhIHN3aXBlLiAgVGhlc2UgYXJlIHVzZWQgdG8gc2V0IGJvdGggdGhlIHZhbHVlIG9mIDxjb2RlPmZpbmdlcnM8L2NvZGU+IGluIHRoZVxuICAgICAqIG9wdGlvbnMgb2JqZWN0LCBhcyB3ZWxsIGFzIHRoZSB2YWx1ZSBvZiB0aGUgPGNvZGU+ZmluZ2VyczwvY29kZT4gZXZlbnQgcHJvcGVydHkuXG4gICAgICogVGhlc2UgcHJvcGVydGllcyBhcmUgcmVhZCBvbmx5LCBhdHRlbXB0aW5nIHRvIGNoYW5nZSB0aGVtIHdpbGwgbm90IGFsdGVyIHRoZSB2YWx1ZXMgcGFzc2VkIHRvIHRoZSBldmVudCBoYW5kbGVycy5cbiAgICAgKiBAbmFtZXNwYWNlXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQHNlZSAkLmZuLnN3aXBlLmRlZmF1bHRzI2ZpbmdlcnNcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gT05FIENvbnN0YW50IGluZGljYXRpbmcgMSBmaW5nZXIgaXMgdG8gYmUgZGV0ZWN0ZWQgLyB3YXMgZGV0ZWN0ZWQuIFZhbHVlIGlzIDxjb2RlPjE8L2NvZGU+LlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBUV08gQ29uc3RhbnQgaW5kaWNhdGluZyAyIGZpbmdlcnMgYXJlIHRvIGJlIGRldGVjdGVkIC8gd2VyZSBkZXRlY3RlZC4gVmFsdWUgaXMgPGNvZGU+MTwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IFRIUkVFIENvbnN0YW50IGluZGljYXRpbmcgMyBmaW5nZXIgYXJlIHRvIGJlIGRldGVjdGVkIC8gd2VyZSBkZXRlY3RlZC4gVmFsdWUgaXMgPGNvZGU+MTwvY29kZT4uXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IEFMTCBDb25zdGFudCBpbmRpY2F0aW5nIGFueSBjb21iaW5hdGlvbiBvZiBmaW5nZXIgYXJlIHRvIGJlIGRldGVjdGVkLiAgVmFsdWUgaXMgPGNvZGU+XCJhbGxcIjwvY29kZT4uXG4gICAgICovXG4gICAgJC5mbi5zd2lwZS5maW5nZXJzID0ge1xuICAgICAgICBPTkU6IDEsXG4gICAgICAgIFRXTzogMixcbiAgICAgICAgVEhSRUU6IDMsXG4gICAgICAgIEFMTDogQUxMX0ZJTkdFUlNcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGlzZSB0aGUgcGx1Z2luIGZvciBlYWNoIERPTSBlbGVtZW50IG1hdGNoZWRcbiAgICAgKiBUaGlzIGNyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIG1haW4gVG91Y2hTd2lwZSBjbGFzcyBmb3IgZWFjaCBET00gZWxlbWVudCwgYW5kIHRoZW5cbiAgICAgKiBzYXZlcyBhIHJlZmVyZW5jZSB0byB0aGF0IGluc3RhbmNlIGluIHRoZSBlbGVtZW50cyBkYXRhIHByb3BlcnR5LlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGluaXQob3B0aW9ucykge1xuICAgICAgICAvL1ByZXAgYW5kIGV4dGVuZCB0aGUgb3B0aW9uc1xuICAgICAgICBpZiAob3B0aW9ucyAmJiAob3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwgPT09IHVuZGVmaW5lZCAmJiAob3B0aW9ucy5zd2lwZSAhPT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMuc3dpcGVTdGF0dXMgIT09IHVuZGVmaW5lZCkpKSB7XG4gICAgICAgICAgICBvcHRpb25zLmFsbG93UGFnZVNjcm9sbCA9IE5PTkU7XG4gICAgICAgIH1cblxuICAgICAgICAvL0NoZWNrIGZvciBkZXByZWNhdGVkIG9wdGlvbnNcbiAgICAgICAgLy9FbnN1cmUgdGhhdCBhbnkgb2xkIGNsaWNrIGhhbmRsZXJzIGFyZSBhc3NpZ25lZCB0byB0aGUgbmV3IHRhcCwgdW5sZXNzIHdlIGhhdmUgYSB0YXBcbiAgICAgICAgaWYgKG9wdGlvbnMuY2xpY2sgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLnRhcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zLnRhcCA9IG9wdGlvbnMuY2xpY2s7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vcGFzcyBlbXB0eSBvYmplY3Qgc28gd2UgZG9udCBtb2RpZnkgdGhlIGRlZmF1bHRzXG4gICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJC5mbi5zd2lwZS5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgICAgLy9Gb3IgZWFjaCBlbGVtZW50IGluc3RhbnRpYXRlIHRoZSBwbHVnaW5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgIC8vQ2hlY2sgd2UgaGF2ZW50IGFscmVhZHkgaW5pdGlhbGlzZWQgdGhlIHBsdWdpblxuICAgICAgICAgICAgdmFyIHBsdWdpbiA9ICR0aGlzLmRhdGEoUExVR0lOX05TKTtcblxuICAgICAgICAgICAgaWYgKCFwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4gPSBuZXcgVG91Y2hTd2lwZSh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAkdGhpcy5kYXRhKFBMVUdJTl9OUywgcGx1Z2luKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFpbiBUb3VjaFN3aXBlIFBsdWdpbiBDbGFzcy5cbiAgICAgKiBEbyBub3QgdXNlIHRoaXMgdG8gY29uc3RydWN0IHlvdXIgVG91Y2hTd2lwZSBvYmplY3QsIHVzZSB0aGUgalF1ZXJ5IHBsdWdpbiBtZXRob2QgJC5mbi5zd2lwZSgpOyB7QGxpbmsgJC5mbi5zd2lwZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBuYW1lIFRvdWNoU3dpcGVcbiAgICAgKiBAcGFyYW0ge0RPTU5vZGV9IGVsZW1lbnQgVGhlIEhUTUwgRE9NIG9iamVjdCB0byBhcHBseSB0byBwbHVnaW4gdG9cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBUaGUgb3B0aW9ucyB0byBjb25maWd1cmUgdGhlIHBsdWdpbiB3aXRoLiAgQGxpbmsgeyQuZm4uc3dpcGUuZGVmYXVsdHN9XG4gICAgICogQHNlZSAkLmZoLnN3aXBlLmRlZmF1bHRzXG4gICAgICogQHNlZSAkLmZoLnN3aXBlXG4gICAgICogQGNsYXNzXG4gICAgICovXG4gICAgZnVuY3Rpb24gVG91Y2hTd2lwZShlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIHZhciB1c2VUb3VjaEV2ZW50cyA9IChTVVBQT1JUU19UT1VDSCB8fCBTVVBQT1JUU19QT0lOVEVSIHx8ICFvcHRpb25zLmZhbGxiYWNrVG9Nb3VzZUV2ZW50cyksXG4gICAgICAgICAgICBTVEFSVF9FViA9IHVzZVRvdWNoRXZlbnRzID8gKFNVUFBPUlRTX1BPSU5URVIgPyAoU1VQUE9SVFNfUE9JTlRFUl9JRTEwID8gJ01TUG9pbnRlckRvd24nIDogJ3BvaW50ZXJkb3duJykgOiAndG91Y2hzdGFydCcpIDogJ21vdXNlZG93bicsXG4gICAgICAgICAgICBNT1ZFX0VWID0gdXNlVG91Y2hFdmVudHMgPyAoU1VQUE9SVFNfUE9JTlRFUiA/IChTVVBQT1JUU19QT0lOVEVSX0lFMTAgPyAnTVNQb2ludGVyTW92ZScgOiAncG9pbnRlcm1vdmUnKSA6ICd0b3VjaG1vdmUnKSA6ICdtb3VzZW1vdmUnLFxuICAgICAgICAgICAgRU5EX0VWID0gdXNlVG91Y2hFdmVudHMgPyAoU1VQUE9SVFNfUE9JTlRFUiA/IChTVVBQT1JUU19QT0lOVEVSX0lFMTAgPyAnTVNQb2ludGVyVXAnIDogJ3BvaW50ZXJ1cCcpIDogJ3RvdWNoZW5kJykgOiAnbW91c2V1cCcsXG4gICAgICAgICAgICBMRUFWRV9FViA9IHVzZVRvdWNoRXZlbnRzID8gbnVsbCA6ICdtb3VzZWxlYXZlJywgLy93ZSBtYW51YWxseSBkZXRlY3QgbGVhdmUgb24gdG91Y2ggZGV2aWNlcywgc28gbnVsbCBldmVudCBoZXJlXG4gICAgICAgICAgICBDQU5DRUxfRVYgPSAoU1VQUE9SVFNfUE9JTlRFUiA/IChTVVBQT1JUU19QT0lOVEVSX0lFMTAgPyAnTVNQb2ludGVyQ2FuY2VsJyA6ICdwb2ludGVyY2FuY2VsJykgOiAndG91Y2hjYW5jZWwnKTtcblxuXG5cbiAgICAgICAgLy90b3VjaCBwcm9wZXJ0aWVzXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IDAsXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBudWxsLFxuICAgICAgICAgICAgZHVyYXRpb24gPSAwLFxuICAgICAgICAgICAgc3RhcnRUb3VjaGVzRGlzdGFuY2UgPSAwLFxuICAgICAgICAgICAgZW5kVG91Y2hlc0Rpc3RhbmNlID0gMCxcbiAgICAgICAgICAgIHBpbmNoWm9vbSA9IDEsXG4gICAgICAgICAgICBwaW5jaERpc3RhbmNlID0gMCxcbiAgICAgICAgICAgIHBpbmNoRGlyZWN0aW9uID0gMCxcbiAgICAgICAgICAgIG1heGltdW1zTWFwID0gbnVsbDtcblxuXG5cbiAgICAgICAgLy9qUXVlcnkgd3JhcHBlZCBlbGVtZW50IGZvciB0aGlzIGluc3RhbmNlXG4gICAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG5cbiAgICAgICAgLy9DdXJyZW50IHBoYXNlIG9mIHRoIHRvdWNoIGN5Y2xlXG4gICAgICAgIHZhciBwaGFzZSA9IFwic3RhcnRcIjtcblxuICAgICAgICAvLyB0aGUgY3VycmVudCBudW1iZXIgb2YgZmluZ2VycyBiZWluZyB1c2VkLlxuICAgICAgICB2YXIgZmluZ2VyQ291bnQgPSAwO1xuXG4gICAgICAgIC8vdHJhY2sgbW91c2UgcG9pbnRzIC8gZGVsdGFcbiAgICAgICAgdmFyIGZpbmdlckRhdGEgPSBudWxsO1xuXG4gICAgICAgIC8vdHJhY2sgdGltZXNcbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IDAsXG4gICAgICAgICAgICBlbmRUaW1lID0gMCxcbiAgICAgICAgICAgIHByZXZpb3VzVG91Y2hFbmRUaW1lID0gMCxcbiAgICAgICAgICAgIHByZXZpb3VzVG91Y2hGaW5nZXJDb3VudCA9IDAsXG4gICAgICAgICAgICBkb3VibGVUYXBTdGFydFRpbWUgPSAwO1xuXG4gICAgICAgIC8vVGltZW91dHNcbiAgICAgICAgdmFyIHNpbmdsZVRhcFRpbWVvdXQgPSBudWxsLFxuICAgICAgICAgICAgaG9sZFRpbWVvdXQgPSBudWxsO1xuXG4gICAgICAgIC8vIEFkZCBnZXN0dXJlcyB0byBhbGwgc3dpcGFibGUgYXJlYXMgaWYgc3VwcG9ydGVkXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAkZWxlbWVudC5iaW5kKFNUQVJUX0VWLCB0b3VjaFN0YXJ0KTtcbiAgICAgICAgICAgICRlbGVtZW50LmJpbmQoQ0FOQ0VMX0VWLCB0b3VjaENhbmNlbCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICQuZXJyb3IoJ2V2ZW50cyBub3Qgc3VwcG9ydGVkICcgKyBTVEFSVF9FViArICcsJyArIENBTkNFTF9FViArICcgb24galF1ZXJ5LnN3aXBlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvL1xuICAgICAgICAvL1B1YmxpYyBtZXRob2RzXG4gICAgICAgIC8vXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHJlLWVuYWJsZXMgdGhlIHN3aXBlIHBsdWdpbiB3aXRoIHRoZSBwcmV2aW91cyBjb25maWd1cmF0aW9uXG4gICAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICAgKiBAbmFtZSAkLmZuLnN3aXBlI2VuYWJsZVxuICAgICAgICAgKiBAcmV0dXJuIHtET01Ob2RlfSBUaGUgRG9tIGVsZW1lbnQgdGhhdCB3YXMgcmVnaXN0ZXJlZCB3aXRoIFRvdWNoU3dpcGVcbiAgICAgICAgICogQGV4YW1wbGUgJChcIiNlbGVtZW50XCIpLnN3aXBlKFwiZW5hYmxlXCIpO1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRlbGVtZW50LmJpbmQoU1RBUlRfRVYsIHRvdWNoU3RhcnQpO1xuICAgICAgICAgICAgJGVsZW1lbnQuYmluZChDQU5DRUxfRVYsIHRvdWNoQ2FuY2VsKTtcbiAgICAgICAgICAgIHJldHVybiAkZWxlbWVudDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogZGlzYWJsZXMgdGhlIHN3aXBlIHBsdWdpblxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQG5hbWUgJC5mbi5zd2lwZSNkaXNhYmxlXG4gICAgICAgICAqIEByZXR1cm4ge0RPTU5vZGV9IFRoZSBEb20gZWxlbWVudCB0aGF0IGlzIG5vdyByZWdpc3RlcmVkIHdpdGggVG91Y2hTd2lwZVxuICAgICAgICAgKiBAZXhhbXBsZSAkKFwiI2VsZW1lbnRcIikuc3dpcGUoXCJkaXNhYmxlXCIpO1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaXNhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIHJldHVybiAkZWxlbWVudDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVzdHJveSB0aGUgc3dpcGUgcGx1Z2luIGNvbXBsZXRlbHkuIFRvIHVzZSBhbnkgc3dpcGUgbWV0aG9kcywgeW91IG11c3QgcmUgaW5pdGlhbGlzZSB0aGUgcGx1Z2luLlxuICAgICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAgICogQG5hbWUgJC5mbi5zd2lwZSNkZXN0cm95XG4gICAgICAgICAqIEByZXR1cm4ge0RPTU5vZGV9IFRoZSBEb20gZWxlbWVudCB0aGF0IHdhcyByZWdpc3RlcmVkIHdpdGggVG91Y2hTd2lwZVxuICAgICAgICAgKiBAZXhhbXBsZSAkKFwiI2VsZW1lbnRcIikuc3dpcGUoXCJkZXN0cm95XCIpO1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICRlbGVtZW50LmRhdGEoUExVR0lOX05TLCBudWxsKTtcbiAgICAgICAgICAgIHJldHVybiAkZWxlbWVudDtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGxvd3MgcnVuIHRpbWUgdXBkYXRpbmcgb2YgdGhlIHN3aXBlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgICAqIEBuYW1lICQuZm4uc3dpcGUjb3B0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eSBUaGUgb3B0aW9uIHByb3BlcnR5IHRvIGdldCBvciBzZXRcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IFt2YWx1ZV0gVGhlIHZhbHVlIHRvIHNldCB0aGUgcHJvcGVydHkgdG9cbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBJZiBvbmx5IGEgcHJvcGVydHkgbmFtZSBpcyBwYXNzZWQsIHRoZW4gdGhhdCBwcm9wZXJ0eSB2YWx1ZSBpcyByZXR1cm5lZC5cbiAgICAgICAgICogQGV4YW1wbGUgJChcIiNlbGVtZW50XCIpLnN3aXBlKFwib3B0aW9uXCIsIFwidGhyZXNob2xkXCIpOyAvLyByZXR1cm4gdGhlIHRocmVzaG9sZFxuICAgICAgICAgKiBAZXhhbXBsZSAkKFwiI2VsZW1lbnRcIikuc3dpcGUoXCJvcHRpb25cIiwgXCJ0aHJlc2hvbGRcIiwgMTAwKTsgLy8gc2V0IHRoZSB0aHJlc2hvbGQgYWZ0ZXIgaW5pdFxuICAgICAgICAgKiBAc2VlICQuZm4uc3dpcGUuZGVmYXVsdHNcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3B0aW9uID0gZnVuY3Rpb24ocHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9uc1twcm9wZXJ0eV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zW3Byb3BlcnR5XTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcignT3B0aW9uICcgKyBwcm9wZXJ0eSArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnN3aXBlLm9wdGlvbnMnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvL1xuICAgICAgICAvLyBQcml2YXRlIG1ldGhvZHNcbiAgICAgICAgLy9cblxuICAgICAgICAvL1xuICAgICAgICAvLyBFVkVOVFNcbiAgICAgICAgLy9cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIGEgdG91Y2ggc3RhcnQgZXZlbnQuXG4gICAgICAgICAqIFN0b3BzIHRoZSBkZWZhdWx0IGNsaWNrIGV2ZW50IGZyb20gdHJpZ2dlcmluZyBhbmQgc3RvcmVzIHdoZXJlIHdlIHRvdWNoZWRcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBqcUV2ZW50IFRoZSBub3JtYWxpc2VkIGpRdWVyeSBldmVudCBvYmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0b3VjaFN0YXJ0KGpxRXZlbnQpIHtcbiAgICAgICAgICAgIC8vSWYgd2UgYWxyZWFkeSBpbiBhIHRvdWNoIGV2ZW50IChhIGZpbmdlciBhbHJlYWR5IGluIHVzZSkgdGhlbiBpZ25vcmUgc3Vic2VxdWVudCBvbmVzLi5cbiAgICAgICAgICAgIGlmIChnZXRUb3VjaEluUHJvZ3Jlc3MoKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIC8vQ2hlY2sgaWYgdGhpcyBlbGVtZW50IG1hdGNoZXMgYW55IGluIHRoZSBleGNsdWRlZCBlbGVtZW50cyBzZWxlY3RvcnMsICBvciBpdHMgcGFyZW50IGlzIGV4Y2x1ZGVkLCBpZiBzbywgRE9OJ1Qgc3dpcGVcbiAgICAgICAgICAgIGlmICgkKGpxRXZlbnQudGFyZ2V0KS5jbG9zZXN0KG9wdGlvbnMuZXhjbHVkZWRFbGVtZW50cywgJGVsZW1lbnQpLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAvL0FzIHdlIHVzZSBKcXVlcnkgYmluZCBmb3IgZXZlbnRzLCB3ZSBuZWVkIHRvIHRhcmdldCB0aGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0XG4gICAgICAgICAgICAvL0lmIHRoZXNlIGV2ZW50cyBhcmUgYmVpbmcgcHJvZ3JhbW1hdGljYWxseSB0cmlnZ2VyZWQsIHdlIGRvbid0IGhhdmUgYW4gb3JpZ2luYWwgZXZlbnQgb2JqZWN0LCBzbyB1c2UgdGhlIEpxIG9uZS5cbiAgICAgICAgICAgIHZhciBldmVudCA9IGpxRXZlbnQub3JpZ2luYWxFdmVudCA/IGpxRXZlbnQub3JpZ2luYWxFdmVudCA6IGpxRXZlbnQ7XG5cbiAgICAgICAgICAgIHZhciByZXQsXG4gICAgICAgICAgICAgICAgZXZ0ID0gU1VQUE9SVFNfVE9VQ0ggPyBldmVudC50b3VjaGVzWzBdIDogZXZlbnQ7XG5cbiAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfU1RBUlQ7XG5cbiAgICAgICAgICAgIC8vSWYgd2Ugc3VwcG9ydCB0b3VjaGVzLCBnZXQgdGhlIGZpbmdlciBjb3VudFxuICAgICAgICAgICAgaWYgKFNVUFBPUlRTX1RPVUNIKSB7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSB0b3RhbCBudW1iZXIgb2YgZmluZ2VycyB0b3VjaGluZyB0aGUgc2NyZWVuXG4gICAgICAgICAgICAgICAgZmluZ2VyQ291bnQgPSBldmVudC50b3VjaGVzLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vRWxzZSB0aGlzIGlzIHRoZSBkZXNrdG9wLCBzbyBzdG9wIHRoZSBicm93c2VyIGZyb20gZHJhZ2dpbmcgdGhlIGltYWdlXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vY2FsbCB0aGlzIG9uIGpxIGV2ZW50IHNvIHdlIGFyZSBjcm9zcyBicm93c2VyXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vY2xlYXIgdmFycy4uXG4gICAgICAgICAgICBkaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgcGluY2hEaXJlY3Rpb24gPSBudWxsO1xuICAgICAgICAgICAgZHVyYXRpb24gPSAwO1xuICAgICAgICAgICAgc3RhcnRUb3VjaGVzRGlzdGFuY2UgPSAwO1xuICAgICAgICAgICAgZW5kVG91Y2hlc0Rpc3RhbmNlID0gMDtcbiAgICAgICAgICAgIHBpbmNoWm9vbSA9IDE7XG4gICAgICAgICAgICBwaW5jaERpc3RhbmNlID0gMDtcbiAgICAgICAgICAgIGZpbmdlckRhdGEgPSBjcmVhdGVBbGxGaW5nZXJEYXRhKCk7XG4gICAgICAgICAgICBtYXhpbXVtc01hcCA9IGNyZWF0ZU1heGltdW1zRGF0YSgpO1xuICAgICAgICAgICAgY2FuY2VsTXVsdGlGaW5nZXJSZWxlYXNlKCk7XG5cblxuICAgICAgICAgICAgLy8gY2hlY2sgdGhlIG51bWJlciBvZiBmaW5nZXJzIGlzIHdoYXQgd2UgYXJlIGxvb2tpbmcgZm9yLCBvciB3ZSBhcmUgY2FwdHVyaW5nIHBpbmNoZXNcbiAgICAgICAgICAgIGlmICghU1VQUE9SVFNfVE9VQ0ggfHwgKGZpbmdlckNvdW50ID09PSBvcHRpb25zLmZpbmdlcnMgfHwgb3B0aW9ucy5maW5nZXJzID09PSBBTExfRklOR0VSUykgfHwgaGFzUGluY2hlcygpKSB7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgdG91Y2hcbiAgICAgICAgICAgICAgICBjcmVhdGVGaW5nZXJEYXRhKDAsIGV2dCk7XG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lID0gZ2V0VGltZVN0YW1wKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmluZ2VyQ291bnQgPT0gMikge1xuICAgICAgICAgICAgICAgICAgICAvL0tlZXAgdHJhY2sgb2YgdGhlIGluaXRpYWwgcGluY2ggZGlzdGFuY2UsIHNvIHdlIGNhbiBjYWxjdWxhdGUgdGhlIGRpZmYgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgLy9TdG9yZSBzZWNvbmQgZmluZ2VyIGRhdGEgYXMgc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmluZ2VyRGF0YSgxLCBldmVudC50b3VjaGVzWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUb3VjaGVzRGlzdGFuY2UgPSBlbmRUb3VjaGVzRGlzdGFuY2UgPSBjYWxjdWxhdGVUb3VjaGVzRGlzdGFuY2UoZmluZ2VyRGF0YVswXS5zdGFydCwgZmluZ2VyRGF0YVsxXS5zdGFydCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dpcGVTdGF0dXMgfHwgb3B0aW9ucy5waW5jaFN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICByZXQgPSB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9BIHRvdWNoIHdpdGggbW9yZSBvciBsZXNzIHRoYW4gdGhlIGZpbmdlcnMgd2UgYXJlIGxvb2tpbmcgZm9yLCBzbyBjYW5jZWxcbiAgICAgICAgICAgICAgICByZXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9JZiB3ZSBoYXZlIGEgcmV0dXJuIHZhbHVlIGZyb20gdGhlIHVzZXJzIGhhbmRsZXIsIHRoZW4gcmV0dXJuIGFuZCBjYW5jZWxcbiAgICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcGhhc2UgPSBQSEFTRV9DQU5DRUw7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5ob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbGRUaW1lb3V0ID0gc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignaG9sZCcsIFtldmVudC50YXJnZXRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmhvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLmhvbGQuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpLCBvcHRpb25zLmxvbmdUYXBUaHJlc2hvbGQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNldFRvdWNoSW5Qcm9ncmVzcyh0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBhIHRvdWNoIG1vdmUgZXZlbnQuXG4gICAgICAgICAqIElmIHdlIGNoYW5nZSBmaW5nZXJzIGR1cmluZyBtb3ZlLCB0aGVuIGNhbmNlbCB0aGUgZXZlbnRcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBqcUV2ZW50IFRoZSBub3JtYWxpc2VkIGpRdWVyeSBldmVudCBvYmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0b3VjaE1vdmUoanFFdmVudCkge1xuXG4gICAgICAgICAgICAvL0FzIHdlIHVzZSBKcXVlcnkgYmluZCBmb3IgZXZlbnRzLCB3ZSBuZWVkIHRvIHRhcmdldCB0aGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0XG4gICAgICAgICAgICAvL0lmIHRoZXNlIGV2ZW50cyBhcmUgYmVpbmcgcHJvZ3JhbW1hdGljYWxseSB0cmlnZ2VyZWQsIHdlIGRvbid0IGhhdmUgYW4gb3JpZ2luYWwgZXZlbnQgb2JqZWN0LCBzbyB1c2UgdGhlIEpxIG9uZS5cbiAgICAgICAgICAgIHZhciBldmVudCA9IGpxRXZlbnQub3JpZ2luYWxFdmVudCA/IGpxRXZlbnQub3JpZ2luYWxFdmVudCA6IGpxRXZlbnQ7XG5cbiAgICAgICAgICAgIC8vSWYgd2UgYXJlIGVuZGluZywgY2FuY2VsbGluZywgb3Igd2l0aGluIHRoZSB0aHJlc2hvbGQgb2YgMiBmaW5nZXJzIGJlaW5nIHJlbGVhc2VkLCBkb24ndCB0cmFjayBhbnl0aGluZy4uXG4gICAgICAgICAgICBpZiAocGhhc2UgPT09IFBIQVNFX0VORCB8fCBwaGFzZSA9PT0gUEhBU0VfQ0FOQ0VMIHx8IGluTXVsdGlGaW5nZXJSZWxlYXNlKCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgcmV0LFxuICAgICAgICAgICAgICAgIGV2dCA9IFNVUFBPUlRTX1RPVUNIID8gZXZlbnQudG91Y2hlc1swXSA6IGV2ZW50O1xuXG5cbiAgICAgICAgICAgIC8vVXBkYXRlIHRoZSAgZmluZ2VyIGRhdGFcbiAgICAgICAgICAgIHZhciBjdXJyZW50RmluZ2VyID0gdXBkYXRlRmluZ2VyRGF0YShldnQpO1xuICAgICAgICAgICAgZW5kVGltZSA9IGdldFRpbWVTdGFtcCgpO1xuXG4gICAgICAgICAgICBpZiAoU1VQUE9SVFNfVE9VQ0gpIHtcbiAgICAgICAgICAgICAgICBmaW5nZXJDb3VudCA9IGV2ZW50LnRvdWNoZXMubGVuZ3RoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5ob2xkKVxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob2xkVGltZW91dCk7XG5cbiAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfTU9WRTtcblxuICAgICAgICAgICAgLy9JZiB3ZSBoYXZlIDIgZmluZ2VycyBnZXQgVG91Y2hlcyBkaXN0YW5jZSBhcyB3ZWxsXG4gICAgICAgICAgICBpZiAoZmluZ2VyQ291bnQgPT0gMikge1xuXG4gICAgICAgICAgICAgICAgLy9LZWVwIHRyYWNrIG9mIHRoZSBpbml0aWFsIHBpbmNoIGRpc3RhbmNlLCBzbyB3ZSBjYW4gY2FsY3VsYXRlIHRoZSBkaWZmIGxhdGVyXG4gICAgICAgICAgICAgICAgLy9XZSBkbyB0aGlzIGhlcmUgYXMgd2VsbCBhcyB0aGUgc3RhcnQgZXZlbnQsIGluIGNhc2UgdGhleSBzdGFydCB3aXRoIDEgZmluZ2VyLCBhbmQgdGhlIHByZXNzIDIgZmluZ2Vyc1xuICAgICAgICAgICAgICAgIGlmIChzdGFydFRvdWNoZXNEaXN0YW5jZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vQ3JlYXRlIHNlY29uZCBmaW5nZXIgaWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZS4uLlxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVGaW5nZXJEYXRhKDEsIGV2ZW50LnRvdWNoZXNbMV0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VG91Y2hlc0Rpc3RhbmNlID0gZW5kVG91Y2hlc0Rpc3RhbmNlID0gY2FsY3VsYXRlVG91Y2hlc0Rpc3RhbmNlKGZpbmdlckRhdGFbMF0uc3RhcnQsIGZpbmdlckRhdGFbMV0uc3RhcnQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRWxzZSBqdXN0IHVwZGF0ZSB0aGUgc2Vjb25kIGZpbmdlclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVGaW5nZXJEYXRhKGV2ZW50LnRvdWNoZXNbMV0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGVuZFRvdWNoZXNEaXN0YW5jZSA9IGNhbGN1bGF0ZVRvdWNoZXNEaXN0YW5jZShmaW5nZXJEYXRhWzBdLmVuZCwgZmluZ2VyRGF0YVsxXS5lbmQpO1xuICAgICAgICAgICAgICAgICAgICBwaW5jaERpcmVjdGlvbiA9IGNhbGN1bGF0ZVBpbmNoRGlyZWN0aW9uKGZpbmdlckRhdGFbMF0uZW5kLCBmaW5nZXJEYXRhWzFdLmVuZCk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBwaW5jaFpvb20gPSBjYWxjdWxhdGVQaW5jaFpvb20oc3RhcnRUb3VjaGVzRGlzdGFuY2UsIGVuZFRvdWNoZXNEaXN0YW5jZSk7XG4gICAgICAgICAgICAgICAgcGluY2hEaXN0YW5jZSA9IE1hdGguYWJzKHN0YXJ0VG91Y2hlc0Rpc3RhbmNlIC0gZW5kVG91Y2hlc0Rpc3RhbmNlKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBpZiAoKGZpbmdlckNvdW50ID09PSBvcHRpb25zLmZpbmdlcnMgfHwgb3B0aW9ucy5maW5nZXJzID09PSBBTExfRklOR0VSUykgfHwgIVNVUFBPUlRTX1RPVUNIIHx8IGhhc1BpbmNoZXMoKSkge1xuXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gY2FsY3VsYXRlRGlyZWN0aW9uKGN1cnJlbnRGaW5nZXIuc3RhcnQsIGN1cnJlbnRGaW5nZXIuZW5kKTtcblxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgd2UgbmVlZCB0byBwcmV2ZW50IGRlZmF1bHQgZXZlbnQgKHBhZ2Ugc2Nyb2xsIC8gcGluY2ggem9vbSkgb3Igbm90XG4gICAgICAgICAgICAgICAgdmFsaWRhdGVEZWZhdWx0RXZlbnQoanFFdmVudCwgZGlyZWN0aW9uKTtcblxuICAgICAgICAgICAgICAgIC8vRGlzdGFuY2UgYW5kIGR1cmF0aW9uIGFyZSBhbGwgb2ZmIHRoZSBtYWluIGZpbmdlclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gY2FsY3VsYXRlRGlzdGFuY2UoY3VycmVudEZpbmdlci5zdGFydCwgY3VycmVudEZpbmdlci5lbmQpO1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gY2FsY3VsYXRlRHVyYXRpb24oKTtcblxuICAgICAgICAgICAgICAgIC8vQ2FjaGUgdGhlIG1heGltdW0gZGlzdGFuY2Ugd2UgbWFkZSBpbiB0aGlzIGRpcmVjdGlvblxuICAgICAgICAgICAgICAgIHNldE1heERpc3RhbmNlKGRpcmVjdGlvbiwgZGlzdGFuY2UpO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zd2lwZVN0YXR1cyB8fCBvcHRpb25zLnBpbmNoU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvL0lmIHdlIHRyaWdnZXIgZW5kIGV2ZW50cyB3aGVuIHRocmVzaG9sZCBhcmUgbWV0LCBvciB0cmlnZ2VyIGV2ZW50cyB3aGVuIHRvdWNoIGxlYXZlcyBlbGVtZW50XG4gICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kIHx8IG9wdGlvbnMudHJpZ2dlck9uVG91Y2hMZWF2ZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbkJvdW5kcyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9JZiBjaGVja2luZyBpZiB3ZSBsZWF2ZSB0aGUgZWxlbWVudCwgcnVuIHRoZSBib3VuZHMgY2hlY2sgKHdlIGNhbiB1c2UgdG91Y2hsZWF2ZSBhcyBpdHMgbm90IHN1cHBvcnRlZCBvbiB3ZWJraXQpXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRyaWdnZXJPblRvdWNoTGVhdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBnZXRib3VuZHModGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkJvdW5kcyA9IGlzSW5Cb3VuZHMoY3VycmVudEZpbmdlci5lbmQsIGJvdW5kcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgZW5kIGhhbmRsZXMgYXMgd2Ugc3dpcGUgaWYgdGhyZXNob2xkcyBtZXQgb3IgaWYgd2UgaGF2ZSBsZWZ0IHRoZSBlbGVtZW50IGlmIHRoZSB1c2VyIGhhcyBhc2tlZCB0byBjaGVjayB0aGVzZS4uXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy50cmlnZ2VyT25Ub3VjaEVuZCAmJiBpbkJvdW5kcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGhhc2UgPSBnZXROZXh0UGhhc2UoUEhBU0VfTU9WRSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy9XZSBlbmQgaWYgb3V0IG9mIGJvdW5kcyBoZXJlLCBzbyBzZXQgY3VycmVudCBwaGFzZSB0byBFTkQsIGFuZCBjaGVjayBpZiBpdHMgbW9kaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy50cmlnZ2VyT25Ub3VjaExlYXZlICYmICFpbkJvdW5kcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGhhc2UgPSBnZXROZXh0UGhhc2UoUEhBU0VfRU5EKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwaGFzZSA9PSBQSEFTRV9DQU5DRUwgfHwgcGhhc2UgPT0gUEhBU0VfRU5EKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwaGFzZSA9IFBIQVNFX0NBTkNFTDtcbiAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmV0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfQ0FOQ0VMO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIGEgdG91Y2ggZW5kIGV2ZW50LlxuICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGRpcmVjdGlvbiBhbmQgdHJpZ2dlciBldmVudHNcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBqcUV2ZW50IFRoZSBub3JtYWxpc2VkIGpRdWVyeSBldmVudCBvYmplY3QuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0b3VjaEVuZChqcUV2ZW50KSB7XG4gICAgICAgICAgICAvL0FzIHdlIHVzZSBKcXVlcnkgYmluZCBmb3IgZXZlbnRzLCB3ZSBuZWVkIHRvIHRhcmdldCB0aGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBqcUV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG5cblxuICAgICAgICAgICAgLy9JZiB3ZSBhcmUgc3RpbGwgaW4gYSB0b3VjaCB3aXRoIGFub3RoZXIgZmluZ2VyIHJldHVyblxuICAgICAgICAgICAgLy9UaGlzIGFsbG93cyB1cyB0byB3YWl0IGEgZnJhY3Rpb24gYW5kIHNlZSBpZiB0aGUgb3RoZXIgZmluZ2VyIGNvbWVzIHVwLCBpZiBpdCBkb2VzIHdpdGhpbiB0aGUgdGhyZXNob2xkLCB0aGVuIHdlIHRyZWF0IGl0IGFzIGEgbXVsdGkgcmVsZWFzZSwgbm90IGEgc2luZ2xlIHJlbGVhc2UuXG4gICAgICAgICAgICBpZiAoU1VQUE9SVFNfVE9VQ0gpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0TXVsdGlGaW5nZXJSZWxlYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9JZiBhIHByZXZpb3VzIGZpbmdlciBoYXMgYmVlbiByZWxlYXNlZCwgY2hlY2sgaG93IGxvbmcgYWdvLCBpZiB3aXRoaW4gdGhlIHRocmVzaG9sZCwgdGhlbiBhc3N1bWUgaXQgd2FzIGEgbXVsdGlmaW5nZXIgcmVsZWFzZS5cbiAgICAgICAgICAgIC8vVGhpcyBpcyB1c2VkIHRvIGFsbG93IDIgZmluZ2VycyB0byByZWxlYXNlIGZyYWN0aW9uYWxseSBhZnRlciBlYWNoIG90aGVyLCB3aGlsc3QgbWFpbnRhaW5pZyB0aGUgZXZlbnQgYXMgY29udGFpbmcgMiBmaW5nZXJzLCBub3QgMVxuICAgICAgICAgICAgaWYgKGluTXVsdGlGaW5nZXJSZWxlYXNlKCkpIHtcbiAgICAgICAgICAgICAgICBmaW5nZXJDb3VudCA9IHByZXZpb3VzVG91Y2hGaW5nZXJDb3VudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9TZXQgZW5kIG9mIHN3aXBlXG4gICAgICAgICAgICBlbmRUaW1lID0gZ2V0VGltZVN0YW1wKCk7XG5cbiAgICAgICAgICAgIC8vR2V0IGR1cmF0aW9uIGluY2FzZSBtb3ZlIHdhcyBuZXZlciBmaXJlZFxuICAgICAgICAgICAgZHVyYXRpb24gPSBjYWxjdWxhdGVEdXJhdGlvbigpO1xuXG4gICAgICAgICAgICAvL0lmIHdlIHRyaWdnZXIgaGFuZGxlcnMgYXQgZW5kIG9mIHN3aXBlIE9SLCB3ZSB0cmlnZ2VyIGR1cmluZywgYnV0IHRoZXkgZGlkbnQgdHJpZ2dlciBhbmQgd2UgYXJlIHN0aWxsIGluIHRoZSBtb3ZlIHBoYXNlXG4gICAgICAgICAgICBpZiAoZGlkU3dpcGVCYWNrVG9DYW5jZWwoKSB8fCAhdmFsaWRhdGVTd2lwZURpc3RhbmNlKCkpIHtcbiAgICAgICAgICAgICAgICBwaGFzZSA9IFBIQVNFX0NBTkNFTDtcbiAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kIHx8IChvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kID09IGZhbHNlICYmIHBoYXNlID09PSBQSEFTRV9NT1ZFKSkge1xuICAgICAgICAgICAgICAgIC8vY2FsbCB0aGlzIG9uIGpxIGV2ZW50IHNvIHdlIGFyZSBjcm9zcyBicm93c2VyXG4gICAgICAgICAgICAgICAganFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfRU5EO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL1NwZWNpYWwgY2FzZXMgLSBBIHRhcCBzaG91bGQgYWx3YXlzIGZpcmUgb24gdG91Y2ggZW5kIHJlZ2FyZGxlc3MsXG4gICAgICAgICAgICAvL1NvIGhlcmUgd2UgbWFudWFsbHkgdHJpZ2dlciB0aGUgdGFwIGVuZCBoYW5kbGVyIGJ5IGl0c2VsZlxuICAgICAgICAgICAgLy9XZSBkb250IHJ1biB0cmlnZ2VyIGhhbmRsZXIgYXMgaXQgd2lsbCByZS10cmlnZ2VyIGV2ZW50cyB0aGF0IG1heSBoYXZlIGZpcmVkIGFscmVhZHlcbiAgICAgICAgICAgIGVsc2UgaWYgKCFvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kICYmIGhhc1RhcCgpKSB7XG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBwaW5jaCBldmVudHMuLi5cbiAgICAgICAgICAgICAgICBwaGFzZSA9IFBIQVNFX0VORDtcbiAgICAgICAgICAgICAgICB0cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQsIHBoYXNlLCBUQVApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwaGFzZSA9PT0gUEhBU0VfTU9WRSkge1xuICAgICAgICAgICAgICAgIHBoYXNlID0gUEhBU0VfQ0FOQ0VMO1xuICAgICAgICAgICAgICAgIHRyaWdnZXJIYW5kbGVyKGV2ZW50LCBwaGFzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldFRvdWNoSW5Qcm9ncmVzcyhmYWxzZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBhIHRvdWNoIGNhbmNlbCBldmVudC5cbiAgICAgICAgICogQ2xlYXJzIGN1cnJlbnQgdmFyc1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRvdWNoQ2FuY2VsKCkge1xuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIHZhcmlhYmxlcyBiYWNrIHRvIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgICAgICBmaW5nZXJDb3VudCA9IDA7XG4gICAgICAgICAgICBlbmRUaW1lID0gMDtcbiAgICAgICAgICAgIHN0YXJ0VGltZSA9IDA7XG4gICAgICAgICAgICBzdGFydFRvdWNoZXNEaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICBlbmRUb3VjaGVzRGlzdGFuY2UgPSAwO1xuICAgICAgICAgICAgcGluY2hab29tID0gMTtcblxuICAgICAgICAgICAgLy9JZiB3ZSB3ZXJlIGluIHByb2dyZXNzIG9mIHRyYWNraW5nIGEgcG9zc2libGUgbXVsdGkgdG91Y2ggZW5kLCB0aGVuIHJlIHNldCBpdC5cbiAgICAgICAgICAgIGNhbmNlbE11bHRpRmluZ2VyUmVsZWFzZSgpO1xuXG4gICAgICAgICAgICBzZXRUb3VjaEluUHJvZ3Jlc3MoZmFsc2UpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBmb3IgYSB0b3VjaCBsZWF2ZSBldmVudC5cbiAgICAgICAgICogVGhpcyBpcyBvbmx5IHRyaWdnZXJlZCBvbiBkZXNrdG9wcywgaW4gdG91Y2ggd2Ugd29yayB0aGlzIG91dCBtYW51YWxseVxuICAgICAgICAgKiBhcyB0aGUgdG91Y2hsZWF2ZSBldmVudCBpcyBub3Qgc3VwcG9ydGVkIGluIHdlYmtpdFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRvdWNoTGVhdmUoanFFdmVudCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0ganFFdmVudC5vcmlnaW5hbEV2ZW50O1xuXG4gICAgICAgICAgICAvL0lmIHdlIGhhdmUgdGhlIHRyaWdnZXIgb24gbGVhdmUgcHJvcGVydHkgc2V0Li4uLlxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlck9uVG91Y2hMZWF2ZSkge1xuICAgICAgICAgICAgICAgIHBoYXNlID0gZ2V0TmV4dFBoYXNlKFBIQVNFX0VORCk7XG4gICAgICAgICAgICAgICAgdHJpZ2dlckhhbmRsZXIoZXZlbnQsIHBoYXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcGx1Z2luXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgJGVsZW1lbnQudW5iaW5kKFNUQVJUX0VWLCB0b3VjaFN0YXJ0KTtcbiAgICAgICAgICAgICRlbGVtZW50LnVuYmluZChDQU5DRUxfRVYsIHRvdWNoQ2FuY2VsKTtcbiAgICAgICAgICAgICRlbGVtZW50LnVuYmluZChNT1ZFX0VWLCB0b3VjaE1vdmUpO1xuICAgICAgICAgICAgJGVsZW1lbnQudW5iaW5kKEVORF9FViwgdG91Y2hFbmQpO1xuXG4gICAgICAgICAgICAvL3dlIG9ubHkgaGF2ZSBsZWF2ZSBldmVudHMgb24gZGVza3RvcCwgd2UgbWFudWFsbHkgY2FsY3VsYXRlIGxlYXZlIG9uIHRvdWNoIGFzIGl0cyBub3Qgc3VwcG9ydGVkIGluIHdlYmtpdFxuICAgICAgICAgICAgaWYgKExFQVZFX0VWKSB7XG4gICAgICAgICAgICAgICAgJGVsZW1lbnQudW5iaW5kKExFQVZFX0VWLCB0b3VjaExlYXZlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2V0VG91Y2hJblByb2dyZXNzKGZhbHNlKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyBpZiB0aGUgdGltZSBhbmQgZGlzdGFuY2UgdGhyZXNob2xkcyBoYXZlIGJlZW4gbWV0LCBhbmQgaWYgc28gdGhlbiB0aGUgYXBwcm9wcmlhdGUgaGFuZGxlcnMgYXJlIGZpcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0TmV4dFBoYXNlKGN1cnJlbnRQaGFzZSkge1xuXG4gICAgICAgICAgICB2YXIgbmV4dFBoYXNlID0gY3VycmVudFBoYXNlO1xuXG4gICAgICAgICAgICAvLyBFbnN1cmUgd2UgaGF2ZSB2YWxpZCBzd2lwZSAodW5kZXIgdGltZSBhbmQgb3ZlciBkaXN0YW5jZSAgYW5kIGNoZWNrIGlmIHdlIGFyZSBvdXQgb2YgYm91bmQuLi4pXG4gICAgICAgICAgICB2YXIgdmFsaWRUaW1lID0gdmFsaWRhdGVTd2lwZVRpbWUoKTtcbiAgICAgICAgICAgIHZhciB2YWxpZERpc3RhbmNlID0gdmFsaWRhdGVTd2lwZURpc3RhbmNlKCk7XG4gICAgICAgICAgICB2YXIgZGlkQ2FuY2VsID0gZGlkU3dpcGVCYWNrVG9DYW5jZWwoKTtcblxuICAgICAgICAgICAgLy9JZiB3ZSBoYXZlIGV4Y2VlZGVkIG91ciB0aW1lLCB0aGVuIGNhbmNlbFxuICAgICAgICAgICAgaWYgKCF2YWxpZFRpbWUgfHwgZGlkQ2FuY2VsKSB7XG4gICAgICAgICAgICAgICAgbmV4dFBoYXNlID0gUEhBU0VfQ0FOQ0VMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9FbHNlIGlmIHdlIGFyZSBtb3ZpbmcsIGFuZCBoYXZlIHJlYWNoZWQgZGlzdGFuY2UgdGhlbiBlbmRcbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbGlkRGlzdGFuY2UgJiYgY3VycmVudFBoYXNlID09IFBIQVNFX01PVkUgJiYgKCFvcHRpb25zLnRyaWdnZXJPblRvdWNoRW5kIHx8IG9wdGlvbnMudHJpZ2dlck9uVG91Y2hMZWF2ZSkpIHtcbiAgICAgICAgICAgICAgICBuZXh0UGhhc2UgPSBQSEFTRV9FTkQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL0Vsc2UgaWYgd2UgaGF2ZSBlbmRlZCBieSBsZWF2aW5nIGFuZCBkaWRuJ3QgcmVhY2ggZGlzdGFuY2UsIHRoZW4gY2FuY2VsXG4gICAgICAgICAgICBlbHNlIGlmICghdmFsaWREaXN0YW5jZSAmJiBjdXJyZW50UGhhc2UgPT0gUEhBU0VfRU5EICYmIG9wdGlvbnMudHJpZ2dlck9uVG91Y2hMZWF2ZSkge1xuICAgICAgICAgICAgICAgIG5leHRQaGFzZSA9IFBIQVNFX0NBTkNFTDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5leHRQaGFzZTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaWdnZXIgdGhlIHJlbGV2YW50IGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICogVGhlIGhhbmRsZXJzIGFyZSBwYXNzZWQgdGhlIG9yaWdpbmFsIGV2ZW50LCB0aGUgZWxlbWVudCB0aGF0IHdhcyBzd2lwZWQsIGFuZCBpbiB0aGUgY2FzZSBvZiB0aGUgY2F0Y2ggYWxsIGhhbmRsZXIsIHRoZSBkaXJlY3Rpb24gdGhhdCB3YXMgc3dpcGVkLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcInVwXCIsIG9yIFwiZG93blwiXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCB0aGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwaGFzZSB0aGUgcGhhc2Ugb2YgdGhlIHN3aXBlIChzdGFydCwgZW5kIGNhbmNlbCBldGMpIHtAbGluayAkLmZuLnN3aXBlLnBoYXNlc31cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0cmlnZ2VySGFuZGxlcihldmVudCwgcGhhc2UpIHtcblxuICAgICAgICAgICAgdmFyIHJldCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgLy8gU1dJUEUgR0VTVFVSRVNcbiAgICAgICAgICAgIGlmIChkaWRTd2lwZSgpIHx8IGhhc1N3aXBlcygpKSB7IC8vaGFzU3dpcGVzIGFzIHN0YXR1cyBuZWVkcyB0byBmaXJlIGV2ZW4gaWYgc3dpcGUgaXMgaW52YWxpZFxuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgc3dpcGUgZXZlbnRzLi4uXG4gICAgICAgICAgICAgICAgcmV0ID0gdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LCBwaGFzZSwgU1dJUEUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQSU5DSCBHRVNUVVJFUyAoaWYgdGhlIGFib3ZlIGRpZG4ndCBjYW5jZWwpXG4gICAgICAgICAgICBlbHNlIGlmICgoZGlkUGluY2goKSB8fCBoYXNQaW5jaGVzKCkpICYmIHJldCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIHBpbmNoIGV2ZW50cy4uLlxuICAgICAgICAgICAgICAgIHJldCA9IHRyaWdnZXJIYW5kbGVyRm9yR2VzdHVyZShldmVudCwgcGhhc2UsIFBJTkNIKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ0xJQ0sgLyBUQVAgKGlmIHRoZSBhYm92ZSBkaWRuJ3QgY2FuY2VsKVxuICAgICAgICAgICAgaWYgKGRpZERvdWJsZVRhcCgpICYmIHJldCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIHRhcCBldmVudHMuLi5cbiAgICAgICAgICAgICAgICByZXQgPSB0cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQsIHBoYXNlLCBET1VCTEVfVEFQKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ0xJQ0sgLyBUQVAgKGlmIHRoZSBhYm92ZSBkaWRuJ3QgY2FuY2VsKVxuICAgICAgICAgICAgZWxzZSBpZiAoZGlkTG9uZ1RhcCgpICYmIHJldCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIHRhcCBldmVudHMuLi5cbiAgICAgICAgICAgICAgICByZXQgPSB0cmlnZ2VySGFuZGxlckZvckdlc3R1cmUoZXZlbnQsIHBoYXNlLCBMT05HX1RBUCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENMSUNLIC8gVEFQIChpZiB0aGUgYWJvdmUgZGlkbid0IGNhbmNlbClcbiAgICAgICAgICAgIGVsc2UgaWYgKGRpZFRhcCgpICYmIHJldCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIHRhcCBldmVudC4uXG4gICAgICAgICAgICAgICAgcmV0ID0gdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LCBwaGFzZSwgVEFQKTtcbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgICAgIC8vIElmIHdlIGFyZSBjYW5jZWxsaW5nIHRoZSBnZXN0dXJlLCB0aGVuIG1hbnVhbGx5IHRyaWdnZXIgdGhlIHJlc2V0IGhhbmRsZXJcbiAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gUEhBU0VfQ0FOQ0VMKSB7XG4gICAgICAgICAgICAgICAgdG91Y2hDYW5jZWwoZXZlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZW5kaW5nIHRoZSBnZXN0dXJlLCB0aGVuIG1hbnVhbGx5IHRyaWdnZXIgdGhlIHJlc2V0IGhhbmRsZXIgSUYgYWxsIGZpbmdlcnMgYXJlIG9mZlxuICAgICAgICAgICAgaWYgKHBoYXNlID09PSBQSEFTRV9FTkQpIHtcbiAgICAgICAgICAgICAgICAvL0lmIHdlIHN1cHBvcnQgdG91Y2gsIHRoZW4gY2hlY2sgdGhhdCBhbGwgZmluZ2VycyBhcmUgb2ZmIGJlZm9yZSB3ZSBjYW5jZWxcbiAgICAgICAgICAgICAgICBpZiAoU1VQUE9SVFNfVE9VQ0gpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoQ2FuY2VsKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvdWNoQ2FuY2VsKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cblxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaWdnZXIgdGhlIHJlbGV2YW50IGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICogVGhlIGhhbmRsZXJzIGFyZSBwYXNzZWQgdGhlIG9yaWdpbmFsIGV2ZW50LCB0aGUgZWxlbWVudCB0aGF0IHdhcyBzd2lwZWQsIGFuZCBpbiB0aGUgY2FzZSBvZiB0aGUgY2F0Y2ggYWxsIGhhbmRsZXIsIHRoZSBkaXJlY3Rpb24gdGhhdCB3YXMgc3dpcGVkLCBcImxlZnRcIiwgXCJyaWdodFwiLCBcInVwXCIsIG9yIFwiZG93blwiXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCB0aGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwaGFzZSB0aGUgcGhhc2Ugb2YgdGhlIHN3aXBlIChzdGFydCwgZW5kIGNhbmNlbCBldGMpIHtAbGluayAkLmZuLnN3aXBlLnBoYXNlc31cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGdlc3R1cmUgdGhlIGdlc3R1cmUgdG8gdHJpZ2dlciBhIGhhbmRsZXIgZm9yIDogUElOQ0ggb3IgU1dJUEUge0BsaW5rICQuZm4uc3dpcGUuZ2VzdHVyZXN9XG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhbiBGYWxzZSwgdG8gaW5kaWNhdGUgdGhhdCB0aGUgZXZlbnQgc2hvdWxkIHN0b3AgcHJvcGFnYXRpb24sIG9yIHZvaWQuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdHJpZ2dlckhhbmRsZXJGb3JHZXN0dXJlKGV2ZW50LCBwaGFzZSwgZ2VzdHVyZSkge1xuXG4gICAgICAgICAgICB2YXIgcmV0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAvL1NXSVBFUy4uLi5cbiAgICAgICAgICAgIGlmIChnZXN0dXJlID09IFNXSVBFKSB7XG4gICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHN0YXR1cyBldmVyeSB0aW1lLi5cblxuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnQuLi5cbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdzd2lwZVN0YXR1cycsIFtwaGFzZSwgZGlyZWN0aW9uIHx8IG51bGwsIGRpc3RhbmNlIHx8IDAsIGR1cmF0aW9uIHx8IDAsIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dpcGVTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5zd2lwZVN0YXR1cy5jYWxsKCRlbGVtZW50LCBldmVudCwgcGhhc2UsIGRpcmVjdGlvbiB8fCBudWxsLCBkaXN0YW5jZSB8fCAwLCBkdXJhdGlvbiB8fCAwLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIC8vSWYgdGhlIHN0YXR1cyBjYW5jZWxzLCB0aGVuIGRvbnQgcnVuIHRoZSBzdWJzZXF1ZW50IGV2ZW50IGhhbmRsZXJzLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cblxuXG5cbiAgICAgICAgICAgICAgICBpZiAocGhhc2UgPT0gUEhBU0VfRU5EICYmIHZhbGlkYXRlU3dpcGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhdGNoIGFsbCBldmVudFxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdzd2lwZScsIFtkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGFdKTtcblxuICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgY2F0Y2ggYWxsIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN3aXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnN3aXBlLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiB0aGUgc3RhdHVzIGNhbmNlbHMsIHRoZW4gZG9udCBydW4gdGhlIHN1YnNlcXVlbnQgZXZlbnQgaGFuZGxlcnMuLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vdHJpZ2dlciBkaXJlY3Rpb24gc3BlY2lmaWMgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTEVGVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignc3dpcGVMZWZ0JywgW2RpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN3aXBlTGVmdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnN3aXBlTGVmdC5jYWxsKCRlbGVtZW50LCBldmVudCwgZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgUklHSFQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3N3aXBlUmlnaHQnLCBbZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dpcGVSaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnN3aXBlUmlnaHQuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGRpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFVQOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdzd2lwZVVwJywgW2RpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCwgZmluZ2VyRGF0YV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN3aXBlVXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5zd2lwZVVwLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBET1dOOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdzd2lwZURvd24nLCBbZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50LCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3dpcGVEb3duKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMuc3dpcGVEb3duLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBkaXJlY3Rpb24sIGRpc3RhbmNlLCBkdXJhdGlvbiwgZmluZ2VyQ291bnQsIGZpbmdlckRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvL1BJTkNIRVMuLi4uXG4gICAgICAgICAgICBpZiAoZ2VzdHVyZSA9PSBQSU5DSCkge1xuICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAkZWxlbWVudC50cmlnZ2VyKCdwaW5jaFN0YXR1cycsIFtwaGFzZSwgcGluY2hEaXJlY3Rpb24gfHwgbnVsbCwgcGluY2hEaXN0YW5jZSB8fCAwLCBkdXJhdGlvbiB8fCAwLCBmaW5nZXJDb3VudCwgcGluY2hab29tLCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucGluY2hTdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5waW5jaFN0YXR1cy5jYWxsKCRlbGVtZW50LCBldmVudCwgcGhhc2UsIHBpbmNoRGlyZWN0aW9uIHx8IG51bGwsIHBpbmNoRGlzdGFuY2UgfHwgMCwgZHVyYXRpb24gfHwgMCwgZmluZ2VyQ291bnQsIHBpbmNoWm9vbSwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIC8vSWYgdGhlIHN0YXR1cyBjYW5jZWxzLCB0aGVuIGRvbnQgcnVuIHRoZSBzdWJzZXF1ZW50IGV2ZW50IGhhbmRsZXJzLi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocGhhc2UgPT0gUEhBU0VfRU5EICYmIHZhbGlkYXRlUGluY2goKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocGluY2hEaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgSU46XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmlnZ2VyIHRoZSBldmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3BpbmNoSW4nLCBbcGluY2hEaXJlY3Rpb24gfHwgbnVsbCwgcGluY2hEaXN0YW5jZSB8fCAwLCBkdXJhdGlvbiB8fCAwLCBmaW5nZXJDb3VudCwgcGluY2hab29tLCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucGluY2hJbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnBpbmNoSW4uY2FsbCgkZWxlbWVudCwgZXZlbnQsIHBpbmNoRGlyZWN0aW9uIHx8IG51bGwsIHBpbmNoRGlzdGFuY2UgfHwgMCwgZHVyYXRpb24gfHwgMCwgZmluZ2VyQ291bnQsIHBpbmNoWm9vbSwgZmluZ2VyRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE9VVDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcigncGluY2hPdXQnLCBbcGluY2hEaXJlY3Rpb24gfHwgbnVsbCwgcGluY2hEaXN0YW5jZSB8fCAwLCBkdXJhdGlvbiB8fCAwLCBmaW5nZXJDb3VudCwgcGluY2hab29tLCBmaW5nZXJEYXRhXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucGluY2hPdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gb3B0aW9ucy5waW5jaE91dC5jYWxsKCRlbGVtZW50LCBldmVudCwgcGluY2hEaXJlY3Rpb24gfHwgbnVsbCwgcGluY2hEaXN0YW5jZSB8fCAwLCBkdXJhdGlvbiB8fCAwLCBmaW5nZXJDb3VudCwgcGluY2hab29tLCBmaW5nZXJEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuXG5cblxuICAgICAgICAgICAgaWYgKGdlc3R1cmUgPT0gVEFQKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBoYXNlID09PSBQSEFTRV9DQU5DRUwgfHwgcGhhc2UgPT09IFBIQVNFX0VORCkge1xuXG5cbiAgICAgICAgICAgICAgICAgICAgLy9DYW5jZWwgYW55IGV4aXN0aW5nIGRvdWJsZSB0YXBcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNpbmdsZVRhcFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAvL0NhbmNlbCBob2xkIHRpbWVvdXRcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhvbGRUaW1lb3V0KTtcblxuICAgICAgICAgICAgICAgICAgICAvL0lmIHdlIGFyZSBhbHNvIGxvb2tpbmcgZm9yIGRvdWJlbFRhcHMsIHdhaXQgaW5jYXNlIHRoaXMgaXMgb25lLi4uXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNEb3VibGVUYXAoKSAmJiAhaW5Eb3VibGVUYXAoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9DYWNoZSB0aGUgdGltZSBvZiB0aGlzIHRhcFxuICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlVGFwU3RhcnRUaW1lID0gZ2V0VGltZVN0YW1wKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTm93IHdhaXQgZm9yIHRoZSBkb3VibGUgdGFwIHRpbWVvdXQsIGFuZCB0cmlnZ2VyIHRoaXMgc2luZ2xlIHRhcFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiBpdHMgbm90IGNhbmNlbGxlZCBieSBhIGRvdWJsZSB0YXBcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZVRhcFRpbWVvdXQgPSBzZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlVGFwU3RhcnRUaW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcigndGFwJywgW2V2ZW50LnRhcmdldF0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IG9wdGlvbnMudGFwLmNhbGwoJGVsZW1lbnQsIGV2ZW50LCBldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpLCBvcHRpb25zLmRvdWJsZVRhcFRocmVzaG9sZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZVRhcFN0YXJ0VGltZSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ3RhcCcsIFtldmVudC50YXJnZXRdKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50YXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLnRhcC5jYWxsKCRlbGVtZW50LCBldmVudCwgZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2VzdHVyZSA9PSBET1VCTEVfVEFQKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBoYXNlID09PSBQSEFTRV9DQU5DRUwgfHwgcGhhc2UgPT09IFBIQVNFX0VORCkge1xuICAgICAgICAgICAgICAgICAgICAvL0NhbmNlbCBhbnkgcGVuZGluZyBzaW5nbGV0YXBcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNpbmdsZVRhcFRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICBkb3VibGVUYXBTdGFydFRpbWUgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vVHJpZ2dlciB0aGUgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudHJpZ2dlcignZG91YmxldGFwJywgW2V2ZW50LnRhcmdldF0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vRmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZG91YmxlVGFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLmRvdWJsZVRhcC5jYWxsKCRlbGVtZW50LCBldmVudCwgZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2VzdHVyZSA9PSBMT05HX1RBUCkge1xuICAgICAgICAgICAgICAgIGlmIChwaGFzZSA9PT0gUEhBU0VfQ0FOQ0VMIHx8IHBoYXNlID09PSBQSEFTRV9FTkQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9DYW5jZWwgYW55IHBlbmRpbmcgc2luZ2xldGFwIChzaG91bGRudCBiZSBvbmUpXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzaW5nbGVUYXBUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgZG91YmxlVGFwU3RhcnRUaW1lID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvL1RyaWdnZXIgdGhlIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ2xvbmd0YXAnLCBbZXZlbnQudGFyZ2V0XSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9GaXJlIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5sb25nVGFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSBvcHRpb25zLmxvbmdUYXAuY2FsbCgkZWxlbWVudCwgZXZlbnQsIGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cblxuXG5cblxuICAgICAgICAvL1xuICAgICAgICAvLyBHRVNUVVJFIFZBTElEQVRJT05cbiAgICAgICAgLy9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIHRoZSB1c2VyIGhhcyBzd2lwZSBmYXIgZW5vdWdoXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhbiBpZiA8Y29kZT50aHJlc2hvbGQ8L2NvZGU+IGhhcyBiZWVuIHNldCwgcmV0dXJuIHRydWUgaWYgdGhlIHRocmVzaG9sZCB3YXMgbWV0LCBlbHNlIGZhbHNlLlxuICAgICAgICAgKiBJZiBubyB0aHJlc2hvbGQgd2FzIHNldCwgdGhlbiB3ZSByZXR1cm4gdHJ1ZS5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVN3aXBlRGlzdGFuY2UoKSB7XG4gICAgICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgLy9JZiB3ZSBtYWRlIGl0IHBhc3QgdGhlIG1pbiBzd2lwZSBkaXN0YW5jZS4uXG4gICAgICAgICAgICBpZiAob3B0aW9ucy50aHJlc2hvbGQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YWxpZCA9IGRpc3RhbmNlID49IG9wdGlvbnMudGhyZXNob2xkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsaWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIHRoZSB1c2VyIGhhcyBzd2lwZWQgYmFjayB0byBjYW5jZWwuXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhbiBpZiA8Y29kZT5jYW5jZWxUaHJlc2hvbGQ8L2NvZGU+IGhhcyBiZWVuIHNldCwgcmV0dXJuIHRydWUgaWYgdGhlIGNhbmNlbFRocmVzaG9sZCB3YXMgbWV0LCBlbHNlIGZhbHNlLlxuICAgICAgICAgKiBJZiBubyBjYW5jZWxUaHJlc2hvbGQgd2FzIHNldCwgdGhlbiB3ZSByZXR1cm4gdHJ1ZS5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkaWRTd2lwZUJhY2tUb0NhbmNlbCgpIHtcbiAgICAgICAgICAgIHZhciBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbmNlbFRocmVzaG9sZCAhPT0gbnVsbCAmJiBkaXJlY3Rpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxsZWQgPSAoZ2V0TWF4RGlzdGFuY2UoZGlyZWN0aW9uKSAtIGRpc3RhbmNlKSA+PSBvcHRpb25zLmNhbmNlbFRocmVzaG9sZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNhbmNlbGxlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgdGhlIHVzZXIgaGFzIHBpbmNoZWQgZmFyIGVub3VnaFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW4gaWYgPGNvZGU+cGluY2hUaHJlc2hvbGQ8L2NvZGU+IGhhcyBiZWVuIHNldCwgcmV0dXJuIHRydWUgaWYgdGhlIHRocmVzaG9sZCB3YXMgbWV0LCBlbHNlIGZhbHNlLlxuICAgICAgICAgKiBJZiBubyB0aHJlc2hvbGQgd2FzIHNldCwgdGhlbiB3ZSByZXR1cm4gdHJ1ZS5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB2YWxpZGF0ZVBpbmNoRGlzdGFuY2UoKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5waW5jaFRocmVzaG9sZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwaW5jaERpc3RhbmNlID49IG9wdGlvbnMucGluY2hUaHJlc2hvbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgdGhhdCB0aGUgdGltZSB0YWtlbiB0byBzd2lwZSBtZWV0cyB0aGUgbWluaW11bSAvIG1heGltdW0gcmVxdWlyZW1lbnRzXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlU3dpcGVUaW1lKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICAgIC8vSWYgbm8gdGltZSBzZXQsIHRoZW4gcmV0dXJuIHRydWVcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4VGltZVRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIGlmIChkdXJhdGlvbiA+PSBvcHRpb25zLm1heFRpbWVUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgZGlyZWN0aW9uIG9mIHRoZSBzd2lwZSBhbmQgdGhlIHZhbHVlIGFsbG93UGFnZVNjcm9sbCB0byBzZWUgaWYgd2Ugc2hvdWxkIGFsbG93IG9yIHByZXZlbnQgdGhlIGRlZmF1bHQgYmVoYXZpb3VyIGZyb20gb2NjdXJyaW5nLlxuICAgICAgICAgKiBUaGlzIHdpbGwgZXNzZW50aWFsbHkgYWxsb3cgcGFnZSBzY3JvbGxpbmcgb3Igbm90IHdoZW4gdGhlIHVzZXIgaXMgc3dpcGluZyBvbiBhIHRvdWNoU3dpcGUgb2JqZWN0LlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0ganFFdmVudCBUaGUgbm9ybWFsaXNlZCBqUXVlcnkgcmVwcmVzZW50YXRpb24gb2YgdGhlIGV2ZW50IG9iamVjdC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIG9mIHRoZSBldmVudC4gU2VlIHtAbGluayAkLmZuLnN3aXBlLmRpcmVjdGlvbnN9XG4gICAgICAgICAqIEBzZWUgJC5mbi5zd2lwZS5kaXJlY3Rpb25zXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVEZWZhdWx0RXZlbnQoanFFdmVudCwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwgPT09IE5PTkUgfHwgaGFzUGluY2hlcygpKSB7XG4gICAgICAgICAgICAgICAganFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgYXV0byA9IG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsID09PSBBVVRPO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMRUZUOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChvcHRpb25zLnN3aXBlTGVmdCAmJiBhdXRvKSB8fCAoIWF1dG8gJiYgb3B0aW9ucy5hbGxvd1BhZ2VTY3JvbGwgIT0gSE9SSVpPTlRBTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIFJJR0hUOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChvcHRpb25zLnN3aXBlUmlnaHQgJiYgYXV0bykgfHwgKCFhdXRvICYmIG9wdGlvbnMuYWxsb3dQYWdlU2Nyb2xsICE9IEhPUklaT05UQUwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganFFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBVUDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgob3B0aW9ucy5zd2lwZVVwICYmIGF1dG8pIHx8ICghYXV0byAmJiBvcHRpb25zLmFsbG93UGFnZVNjcm9sbCAhPSBWRVJUSUNBTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIERPV046XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKG9wdGlvbnMuc3dpcGVEb3duICYmIGF1dG8pIHx8ICghYXV0byAmJiBvcHRpb25zLmFsbG93UGFnZVNjcm9sbCAhPSBWRVJUSUNBTCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqcUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gUElOQ0hFU1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIG9mIHRoZSBjdXJyZW50IHBpbmNoIG1lZXRzIHRoZSB0aHJlc2hvbGRzXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlUGluY2goKSB7XG4gICAgICAgICAgICB2YXIgaGFzQ29ycmVjdEZpbmdlckNvdW50ID0gdmFsaWRhdGVGaW5nZXJzKCk7XG4gICAgICAgICAgICB2YXIgaGFzRW5kUG9pbnQgPSB2YWxpZGF0ZUVuZFBvaW50KCk7XG4gICAgICAgICAgICB2YXIgaGFzQ29ycmVjdERpc3RhbmNlID0gdmFsaWRhdGVQaW5jaERpc3RhbmNlKCk7XG4gICAgICAgICAgICByZXR1cm4gaGFzQ29ycmVjdEZpbmdlckNvdW50ICYmIGhhc0VuZFBvaW50ICYmIGhhc0NvcnJlY3REaXN0YW5jZTtcblxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnkgUGluY2ggZXZlbnRzIGhhdmUgYmVlbiByZWdpc3RlcmVkXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc1BpbmNoZXMoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEob3B0aW9ucy5waW5jaFN0YXR1cyB8fCBvcHRpb25zLnBpbmNoSW4gfHwgb3B0aW9ucy5waW5jaE91dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBkZXRlY3RpbmcgcGluY2hlcywgYW5kIGhhdmUgb25lXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRpZFBpbmNoKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKHZhbGlkYXRlUGluY2goKSAmJiBoYXNQaW5jaGVzKCkpO1xuICAgICAgICB9XG5cblxuXG5cbiAgICAgICAgLy8gU1dJUEVTXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGN1cnJlbnQgc3dpcGUgbWVldHMgdGhlIHRocmVzaG9sZHNcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVTd2lwZSgpIHtcbiAgICAgICAgICAgIC8vQ2hlY2sgdmFsaWRpdHkgb2Ygc3dpcGVcbiAgICAgICAgICAgIHZhciBoYXNWYWxpZFRpbWUgPSB2YWxpZGF0ZVN3aXBlVGltZSgpO1xuICAgICAgICAgICAgdmFyIGhhc1ZhbGlkRGlzdGFuY2UgPSB2YWxpZGF0ZVN3aXBlRGlzdGFuY2UoKTtcbiAgICAgICAgICAgIHZhciBoYXNDb3JyZWN0RmluZ2VyQ291bnQgPSB2YWxpZGF0ZUZpbmdlcnMoKTtcbiAgICAgICAgICAgIHZhciBoYXNFbmRQb2ludCA9IHZhbGlkYXRlRW5kUG9pbnQoKTtcbiAgICAgICAgICAgIHZhciBkaWRDYW5jZWwgPSBkaWRTd2lwZUJhY2tUb0NhbmNlbCgpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGUgdXNlciBzd2lwZWQgbW9yZSB0aGFuIHRoZSBtaW5pbXVtIGxlbmd0aCwgcGVyZm9ybSB0aGUgYXBwcm9wcmlhdGUgYWN0aW9uXG4gICAgICAgICAgICAvLyBoYXNWYWxpZERpc3RhbmNlIGlzIG51bGwgd2hlbiBubyBkaXN0YW5jZSBpcyBzZXRcbiAgICAgICAgICAgIHZhciB2YWxpZCA9ICFkaWRDYW5jZWwgJiYgaGFzRW5kUG9pbnQgJiYgaGFzQ29ycmVjdEZpbmdlckNvdW50ICYmIGhhc1ZhbGlkRGlzdGFuY2UgJiYgaGFzVmFsaWRUaW1lO1xuXG4gICAgICAgICAgICByZXR1cm4gdmFsaWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIGFueSBTd2lwZSBldmVudHMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWRcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaGFzU3dpcGVzKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKG9wdGlvbnMuc3dpcGUgfHwgb3B0aW9ucy5zd2lwZVN0YXR1cyB8fCBvcHRpb25zLnN3aXBlTGVmdCB8fCBvcHRpb25zLnN3aXBlUmlnaHQgfHwgb3B0aW9ucy5zd2lwZVVwIHx8IG9wdGlvbnMuc3dpcGVEb3duKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgZGV0ZWN0aW5nIHN3aXBlcyBhbmQgaGF2ZSBvbmVcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZGlkU3dpcGUoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEodmFsaWRhdGVTd2lwZSgpICYmIGhhc1N3aXBlcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgaGF2ZSBtYXRjaGVkIHRoZSBudW1iZXIgb2YgZmluZ2VycyB3ZSBhcmUgbG9va2luZyBmb3JcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVGaW5nZXJzKCkge1xuICAgICAgICAgICAgLy9UaGUgbnVtYmVyIG9mIGZpbmdlcnMgd2Ugd2FudCB3ZXJlIG1hdGNoZWQsIG9yIG9uIGRlc2t0b3Agd2UgaWdub3JlXG4gICAgICAgICAgICByZXR1cm4gKChmaW5nZXJDb3VudCA9PT0gb3B0aW9ucy5maW5nZXJzIHx8IG9wdGlvbnMuZmluZ2VycyA9PT0gQUxMX0ZJTkdFUlMpIHx8ICFTVVBQT1JUU19UT1VDSCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGhhdmUgYW4gZW5kIHBvaW50IGZvciB0aGUgc3dpcGVcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVFbmRQb2ludCgpIHtcbiAgICAgICAgICAgIC8vV2UgaGF2ZSBhbiBlbmQgdmFsdWUgZm9yIHRoZSBmaW5nZXJcbiAgICAgICAgICAgIHJldHVybiBmaW5nZXJEYXRhWzBdLmVuZC54ICE9PSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVEFQIC8gQ0xJQ0tcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhIGNsaWNrIC8gdGFwIGV2ZW50cyBoYXZlIGJlZW4gcmVnaXN0ZXJlZFxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBoYXNUYXAoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEob3B0aW9ucy50YXApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvdWJsZSB0YXAgZXZlbnRzIGhhdmUgYmVlbiByZWdpc3RlcmVkXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc0RvdWJsZVRhcCgpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhIShvcHRpb25zLmRvdWJsZVRhcCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIGFueSBsb25nIHRhcCBldmVudHMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWRcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gaGFzTG9uZ1RhcCgpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhIShvcHRpb25zLmxvbmdUYXApO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjb3VsZCBiZSBpbiB0aGUgcHJvY2VzcyBvZiBhIGRvdWJsZSB0YXAgKG9uZSB0YXAgaGFzIG9jY3VycmVkLCB3ZSBhcmUgbGlzdGVuaW5nIGZvciBkb3VibGUgdGFwcywgYW5kIHRoZSB0aHJlc2hvbGQgaGFzbid0IHBhc3QuXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlRG91YmxlVGFwKCkge1xuICAgICAgICAgICAgaWYgKGRvdWJsZVRhcFN0YXJ0VGltZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5vdyA9IGdldFRpbWVTdGFtcCgpO1xuICAgICAgICAgICAgcmV0dXJuIChoYXNEb3VibGVUYXAoKSAmJiAoKG5vdyAtIGRvdWJsZVRhcFN0YXJ0VGltZSkgPD0gb3B0aW9ucy5kb3VibGVUYXBUaHJlc2hvbGQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgd2UgY291bGQgYmUgaW4gdGhlIHByb2Nlc3Mgb2YgYSBkb3VibGUgdGFwIChvbmUgdGFwIGhhcyBvY2N1cnJlZCwgd2UgYXJlIGxpc3RlbmluZyBmb3IgZG91YmxlIHRhcHMsIGFuZCB0aGUgdGhyZXNob2xkIGhhc24ndCBwYXN0LlxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpbkRvdWJsZVRhcCgpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZURvdWJsZVRhcCgpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGhhdmUgYSB2YWxpZCB0YXBcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVUYXAoKSB7XG4gICAgICAgICAgICByZXR1cm4gKChmaW5nZXJDb3VudCA9PT0gMSB8fCAhU1VQUE9SVFNfVE9VQ0gpICYmIChpc05hTihkaXN0YW5jZSkgfHwgZGlzdGFuY2UgPCBvcHRpb25zLnRocmVzaG9sZCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBoYXZlIGEgdmFsaWQgbG9uZyB0YXBcbiAgICAgICAgICogQHJldHVybiBCb29sZWFuXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdmFsaWRhdGVMb25nVGFwKCkge1xuICAgICAgICAgICAgLy9zbGlnaHQgdGhyZXNob2xkIG9uIG1vdmluZyBmaW5nZXJcbiAgICAgICAgICAgIHJldHVybiAoKGR1cmF0aW9uID4gb3B0aW9ucy5sb25nVGFwVGhyZXNob2xkKSAmJiAoZGlzdGFuY2UgPCBET1VCTEVfVEFQX1RIUkVTSE9MRCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgZGV0ZWN0aW5nIHRhcHMgYW5kIGhhdmUgb25lXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGRpZFRhcCgpIHtcbiAgICAgICAgICAgIC8vRW51cmUgd2UgZG9udCByZXR1cm4gMCBvciBudWxsIGZvciBmYWxzZSB2YWx1ZXNcbiAgICAgICAgICAgIHJldHVybiAhISh2YWxpZGF0ZVRhcCgpICYmIGhhc1RhcCgpKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgZGV0ZWN0aW5nIGRvdWJsZSB0YXBzIGFuZCBoYXZlIG9uZVxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkaWREb3VibGVUYXAoKSB7XG4gICAgICAgICAgICAvL0VudXJlIHdlIGRvbnQgcmV0dXJuIDAgb3IgbnVsbCBmb3IgZmFsc2UgdmFsdWVzXG4gICAgICAgICAgICByZXR1cm4gISEodmFsaWRhdGVEb3VibGVUYXAoKSAmJiBoYXNEb3VibGVUYXAoKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBkZXRlY3RpbmcgbG9uZyB0YXBzIGFuZCBoYXZlIG9uZVxuICAgICAgICAgKiBAcmV0dXJuIEJvb2xlYW5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkaWRMb25nVGFwKCkge1xuICAgICAgICAgICAgLy9FbnVyZSB3ZSBkb250IHJldHVybiAwIG9yIG51bGwgZm9yIGZhbHNlIHZhbHVlc1xuICAgICAgICAgICAgcmV0dXJuICEhKHZhbGlkYXRlTG9uZ1RhcCgpICYmIGhhc0xvbmdUYXAoKSk7XG4gICAgICAgIH1cblxuXG5cblxuICAgICAgICAvLyBNVUxUSSBGSU5HRVIgVE9VQ0hcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0YXJ0cyB0cmFja2luZyB0aGUgdGltZSBiZXR3ZWVuIDIgZmluZ2VyIHJlbGVhc2VzLCBhbmQga2VlcHMgdHJhY2sgb2YgaG93IG1hbnkgZmluZ2VycyB3ZSBpbml0aWFsbHkgaGFkIHVwXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc3RhcnRNdWx0aUZpbmdlclJlbGVhc2UoKSB7XG4gICAgICAgICAgICBwcmV2aW91c1RvdWNoRW5kVGltZSA9IGdldFRpbWVTdGFtcCgpO1xuICAgICAgICAgICAgcHJldmlvdXNUb3VjaEZpbmdlckNvdW50ID0gZXZlbnQudG91Y2hlcy5sZW5ndGggKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbmNlbHMgdGhlIHRyYWNraW5nIG9mIHRpbWUgYmV0d2VlbiAyIGZpbmdlciByZWxlYXNlcywgYW5kIHJlc2V0cyBjb3VudGVyc1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbmNlbE11bHRpRmluZ2VyUmVsZWFzZSgpIHtcbiAgICAgICAgICAgIHByZXZpb3VzVG91Y2hFbmRUaW1lID0gMDtcbiAgICAgICAgICAgIHByZXZpb3VzVG91Y2hGaW5nZXJDb3VudCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2tzIGlmIHdlIGFyZSBpbiB0aGUgdGhyZXNob2xkIGJldHdlZW4gMiBmaW5nZXJzIGJlaW5nIHJlbGVhc2VkXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGluTXVsdGlGaW5nZXJSZWxlYXNlKCkge1xuXG4gICAgICAgICAgICB2YXIgd2l0aGluVGhyZXNob2xkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChwcmV2aW91c1RvdWNoRW5kVGltZSkge1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gZ2V0VGltZVN0YW1wKCkgLSBwcmV2aW91c1RvdWNoRW5kVGltZVxuICAgICAgICAgICAgICAgIGlmIChkaWZmIDw9IG9wdGlvbnMuZmluZ2VyUmVsZWFzZVRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICB3aXRoaW5UaHJlc2hvbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHdpdGhpblRocmVzaG9sZDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGdldHMgYSBkYXRhIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCBhIHRvdWNoIGlzIGluIHByb2dyZXNzXG4gICAgICAgICAqIEByZXR1cm4gQm9vbGVhblxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdWNoSW5Qcm9ncmVzcygpIHtcbiAgICAgICAgICAgIC8vc3RyaWN0IGVxdWFsaXR5IHRvIGVuc3VyZSBvbmx5IHRydWUgYW5kIGZhbHNlIGFyZSByZXR1cm5lZFxuICAgICAgICAgICAgcmV0dXJuICEhKCRlbGVtZW50LmRhdGEoUExVR0lOX05TICsgJ19pbnRvdWNoJykgPT09IHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgYSBkYXRhIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCBhIHRvdWNoIGlzIGluIHByb2dyZXNzXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsIFRoZSB2YWx1ZSB0byBzZXQgdGhlIHByb3BlcnR5IHRvXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2V0VG91Y2hJblByb2dyZXNzKHZhbCkge1xuXG4gICAgICAgICAgICAvL0FkZCBvciByZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGRlcGVuZGluZyBvbiB0b3VjaCBzdGF0dXNcbiAgICAgICAgICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAkZWxlbWVudC5iaW5kKE1PVkVfRVYsIHRvdWNoTW92ZSk7XG4gICAgICAgICAgICAgICAgJGVsZW1lbnQuYmluZChFTkRfRVYsIHRvdWNoRW5kKTtcblxuICAgICAgICAgICAgICAgIC8vd2Ugb25seSBoYXZlIGxlYXZlIGV2ZW50cyBvbiBkZXNrdG9wLCB3ZSBtYW51YWxseSBjYWxjdWF0ZSBsZWF2ZSBvbiB0b3VjaCBhcyBpdHMgbm90IHN1cHBvcnRlZCBpbiB3ZWJraXRcbiAgICAgICAgICAgICAgICBpZiAoTEVBVkVfRVYpIHtcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQuYmluZChMRUFWRV9FViwgdG91Y2hMZWF2ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkZWxlbWVudC51bmJpbmQoTU9WRV9FViwgdG91Y2hNb3ZlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgJGVsZW1lbnQudW5iaW5kKEVORF9FViwgdG91Y2hFbmQsIGZhbHNlKTtcblxuICAgICAgICAgICAgICAgIC8vd2Ugb25seSBoYXZlIGxlYXZlIGV2ZW50cyBvbiBkZXNrdG9wLCB3ZSBtYW51YWxseSBjYWxjdWF0ZSBsZWF2ZSBvbiB0b3VjaCBhcyBpdHMgbm90IHN1cHBvcnRlZCBpbiB3ZWJraXRcbiAgICAgICAgICAgICAgICBpZiAoTEVBVkVfRVYpIHtcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQudW5iaW5kKExFQVZFX0VWLCB0b3VjaExlYXZlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vc3RyaWN0IGVxdWFsaXR5IHRvIGVuc3VyZSBvbmx5IHRydWUgYW5kIGZhbHNlIGNhbiB1cGRhdGUgdGhlIHZhbHVlXG4gICAgICAgICAgICAkZWxlbWVudC5kYXRhKFBMVUdJTl9OUyArICdfaW50b3VjaCcsIHZhbCA9PT0gdHJ1ZSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIHRoZSBmaW5nZXIgZGF0YSBmb3IgdGhlIHRvdWNoL2ZpbmdlciBpbiB0aGUgZXZlbnQgb2JqZWN0LlxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gaW5kZXggVGhlIGluZGV4IGluIHRoZSBhcnJheSB0byBzdG9yZSB0aGUgZmluZ2VyIGRhdGEgKHVzdWFsbHkgdGhlIG9yZGVyIHRoZSBmaW5nZXJzIHdlcmUgcHJlc3NlZClcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGV2dCBUaGUgZXZlbnQgb2JqZWN0IGNvbnRhaW5pbmcgZmluZ2VyIGRhdGFcbiAgICAgICAgICogQHJldHVybiBmaW5nZXIgZGF0YSBvYmplY3RcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVGaW5nZXJEYXRhKGluZGV4LCBldnQpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGV2dC5pZGVudGlmaWVyICE9PSB1bmRlZmluZWQgPyBldnQuaWRlbnRpZmllciA6IDA7XG5cbiAgICAgICAgICAgIGZpbmdlckRhdGFbaW5kZXhdLmlkZW50aWZpZXIgPSBpZDtcbiAgICAgICAgICAgIGZpbmdlckRhdGFbaW5kZXhdLnN0YXJ0LnggPSBmaW5nZXJEYXRhW2luZGV4XS5lbmQueCA9IGV2dC5wYWdlWCB8fCBldnQuY2xpZW50WDtcbiAgICAgICAgICAgIGZpbmdlckRhdGFbaW5kZXhdLnN0YXJ0LnkgPSBmaW5nZXJEYXRhW2luZGV4XS5lbmQueSA9IGV2dC5wYWdlWSB8fCBldnQuY2xpZW50WTtcblxuICAgICAgICAgICAgcmV0dXJuIGZpbmdlckRhdGFbaW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZXMgdGhlIGZpbmdlciBkYXRhIGZvciBhIHBhcnRpY3VsYXIgZXZlbnQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBldnQgVGhlIGV2ZW50IG9iamVjdCBjb250YWluaW5nIHRoZSB0b3VjaC9maW5nZXIgZGF0YSB0byB1cGFkdGVcbiAgICAgICAgICogQHJldHVybiBhIGZpbmdlciBkYXRhIG9iamVjdC5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB1cGRhdGVGaW5nZXJEYXRhKGV2dCkge1xuXG4gICAgICAgICAgICB2YXIgaWQgPSBldnQuaWRlbnRpZmllciAhPT0gdW5kZWZpbmVkID8gZXZ0LmlkZW50aWZpZXIgOiAwO1xuICAgICAgICAgICAgdmFyIGYgPSBnZXRGaW5nZXJEYXRhKGlkKTtcblxuICAgICAgICAgICAgZi5lbmQueCA9IGV2dC5wYWdlWCB8fCBldnQuY2xpZW50WDtcbiAgICAgICAgICAgIGYuZW5kLnkgPSBldnQucGFnZVkgfHwgZXZ0LmNsaWVudFk7XG5cbiAgICAgICAgICAgIHJldHVybiBmO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBmaW5nZXIgZGF0YSBvYmplY3QgYnkgaXRzIGV2ZW50IElELlxuICAgICAgICAgKiBFYWNoIHRvdWNoIGV2ZW50IGhhcyBhbiBpZGVudGlmaWVyIHByb3BlcnR5LCB3aGljaCBpcyB1c2VkXG4gICAgICAgICAqIHRvIHRyYWNrIHJlcGVhdCB0b3VjaGVzXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBpZCBUaGUgdW5pcXVlIGlkIG9mIHRoZSBmaW5nZXIgaW4gdGhlIHNlcXVlbmNlIG9mIHRvdWNoIGV2ZW50cy5cbiAgICAgICAgICogQHJldHVybiBhIGZpbmdlciBkYXRhIG9iamVjdC5cbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRGaW5nZXJEYXRhKGlkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbmdlckRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZmluZ2VyRGF0YVtpXS5pZGVudGlmaWVyID09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaW5nZXJEYXRhW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdHMgYWxsIHRoZSBmaW5nZXIgb25qZWN0cyBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBmaW5nZXIgZGF0YVxuICAgICAgICAgKiBAcmV0dXJuIEFycmF5IG9mIGZpbmdlciBvYmplY3RzXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlQWxsRmluZ2VyRGF0YSgpIHtcbiAgICAgICAgICAgIHZhciBmaW5nZXJEYXRhID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSA1OyBpKyspIHtcbiAgICAgICAgICAgICAgICBmaW5nZXJEYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzdGFydDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyOiAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmaW5nZXJEYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIG1heGltdW0gZGlzdGFuY2Ugc3dpcGVkIGluIHRoZSBnaXZlbiBkaXJlY3Rpb24uXG4gICAgICAgICAqIElmIHRoZSBuZXcgdmFsdWUgaXMgbG93ZXIgdGhhbiB0aGUgY3VycmVudCB2YWx1ZSwgdGhlIG1heCB2YWx1ZSBpcyBub3QgY2hhbmdlZC5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9ICBkaXJlY3Rpb24gVGhlIGRpcmVjdGlvbiBvZiB0aGUgc3dpcGVcbiAgICAgICAgICogQHBhcmFtIHtpbnR9ICBkaXN0YW5jZSBUaGUgZGlzdGFuY2Ugb2YgdGhlIHN3aXBlXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gc2V0TWF4RGlzdGFuY2UoZGlyZWN0aW9uLCBkaXN0YW5jZSkge1xuICAgICAgICAgICAgZGlzdGFuY2UgPSBNYXRoLm1heChkaXN0YW5jZSwgZ2V0TWF4RGlzdGFuY2UoZGlyZWN0aW9uKSk7XG4gICAgICAgICAgICBtYXhpbXVtc01hcFtkaXJlY3Rpb25dLmRpc3RhbmNlID0gZGlzdGFuY2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogZ2V0cyB0aGUgbWF4aW11bSBkaXN0YW5jZSBzd2lwZWQgaW4gdGhlIGdpdmVuIGRpcmVjdGlvbi5cbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9ICBkaXJlY3Rpb24gVGhlIGRpcmVjdGlvbiBvZiB0aGUgc3dpcGVcbiAgICAgICAgICogQHJldHVybiBpbnQgIFRoZSBkaXN0YW5jZSBvZiB0aGUgc3dpcGVcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRNYXhEaXN0YW5jZShkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChtYXhpbXVtc01hcFtkaXJlY3Rpb25dKSByZXR1cm4gbWF4aW11bXNNYXBbZGlyZWN0aW9uXS5kaXN0YW5jZTtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRzIGEgbWFwIG9mIGRpcmVjdGlvbnMgdG8gbWF4aW11bSBzd2lwZWQgdmFsdWVzLlxuICAgICAgICAgKiBAcmV0dXJuIE9iamVjdCBBIGRpY3Rpb25hcnkgb2YgbWF4aW11bSB2YWx1ZXMsIGluZGV4ZWQgYnkgZGlyZWN0aW9uLlxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU1heGltdW1zRGF0YSgpIHtcbiAgICAgICAgICAgIHZhciBtYXhEYXRhID0ge307XG4gICAgICAgICAgICBtYXhEYXRhW0xFRlRdID0gY3JlYXRlTWF4aW11bVZPKExFRlQpO1xuICAgICAgICAgICAgbWF4RGF0YVtSSUdIVF0gPSBjcmVhdGVNYXhpbXVtVk8oUklHSFQpO1xuICAgICAgICAgICAgbWF4RGF0YVtVUF0gPSBjcmVhdGVNYXhpbXVtVk8oVVApO1xuICAgICAgICAgICAgbWF4RGF0YVtET1dOXSA9IGNyZWF0ZU1heGltdW1WTyhET1dOKTtcblxuICAgICAgICAgICAgcmV0dXJuIG1heERhdGE7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG1hcCBtYXhpbXVtIHN3aXBlZCB2YWx1ZXMgZm9yIGEgZ2l2ZW4gc3dpcGUgZGlyZWN0aW9uXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBUaGUgZGlyZWN0aW9uIHRoYXQgdGhlc2UgdmFsdWVzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXG4gICAgICAgICAqIEByZXR1cm4gT2JqZWN0IE1heGltdW0gdmFsdWVzXG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTWF4aW11bVZPKGRpcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IGRpcixcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogMFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICAvL1xuICAgICAgICAvLyBNQVRIUyAvIFVUSUxTXG4gICAgICAgIC8vXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgZHVyYXRpb24gb2YgdGhlIHN3aXBlXG4gICAgICAgICAqIEByZXR1cm4gaW50XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlRHVyYXRpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGJldHdlZW4gMiB0b3VjaGVzIChwaW5jaClcbiAgICAgICAgICogQHBhcmFtIHtwb2ludH0gc3RhcnRQb2ludCBBIHBvaW50IG9iamVjdCBjb250YWluaW5nIHggYW5kIHkgY28tb3JkaW5hdGVzXG4gICAgICAgICAqIEBwYXJhbSB7cG9pbnR9IGVuZFBvaW50IEEgcG9pbnQgb2JqZWN0IGNvbnRhaW5pbmcgeCBhbmQgeSBjby1vcmRpbmF0ZXNcbiAgICAgICAgICogQHJldHVybiBpbnQ7XG4gICAgICAgICAqIEBpbm5lclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlVG91Y2hlc0Rpc3RhbmNlKHN0YXJ0UG9pbnQsIGVuZFBvaW50KSB7XG4gICAgICAgICAgICB2YXIgZGlmZlggPSBNYXRoLmFicyhzdGFydFBvaW50LnggLSBlbmRQb2ludC54KTtcbiAgICAgICAgICAgIHZhciBkaWZmWSA9IE1hdGguYWJzKHN0YXJ0UG9pbnQueSAtIGVuZFBvaW50LnkpO1xuXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnNxcnQoZGlmZlggKiBkaWZmWCArIGRpZmZZICogZGlmZlkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIHpvb20gZmFjdG9yIGJldHdlZW4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlzdGFuY2VzXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBzdGFydERpc3RhbmNlIERpc3RhbmNlIChiZXR3ZWVuIDIgZmluZ2VycykgdGhlIHVzZXIgc3RhcnRlZCBwaW5jaGluZyBhdFxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gZW5kRGlzdGFuY2UgRGlzdGFuY2UgKGJldHdlZW4gMiBmaW5nZXJzKSB0aGUgdXNlciBlbmRlZCBwaW5jaGluZyBhdFxuICAgICAgICAgKiBAcmV0dXJuIGZsb2F0IFRoZSB6b29tIHZhbHVlIGZyb20gMCB0byAxLlxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZVBpbmNoWm9vbShzdGFydERpc3RhbmNlLCBlbmREaXN0YW5jZSkge1xuICAgICAgICAgICAgdmFyIHBlcmNlbnQgPSAoZW5kRGlzdGFuY2UgLyBzdGFydERpc3RhbmNlKSAqIDE7XG4gICAgICAgICAgICByZXR1cm4gcGVyY2VudC50b0ZpeGVkKDIpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgcGluY2ggZGlyZWN0aW9uLCBlaXRoZXIgSU4gb3IgT1VUIGZvciB0aGUgZ2l2ZW4gcG9pbnRzXG4gICAgICAgICAqIEByZXR1cm4gc3RyaW5nIEVpdGhlciB7QGxpbmsgJC5mbi5zd2lwZS5kaXJlY3Rpb25zLklOfSBvciB7QGxpbmsgJC5mbi5zd2lwZS5kaXJlY3Rpb25zLk9VVH1cbiAgICAgICAgICogQHNlZSAkLmZuLnN3aXBlLmRpcmVjdGlvbnNcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVQaW5jaERpcmVjdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChwaW5jaFpvb20gPCAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9VVDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElOO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSBsZW5ndGggLyBkaXN0YW5jZSBvZiB0aGUgc3dpcGVcbiAgICAgICAgICogQHBhcmFtIHtwb2ludH0gc3RhcnRQb2ludCBBIHBvaW50IG9iamVjdCBjb250YWluaW5nIHggYW5kIHkgY28tb3JkaW5hdGVzXG4gICAgICAgICAqIEBwYXJhbSB7cG9pbnR9IGVuZFBvaW50IEEgcG9pbnQgb2JqZWN0IGNvbnRhaW5pbmcgeCBhbmQgeSBjby1vcmRpbmF0ZXNcbiAgICAgICAgICogQHJldHVybiBpbnRcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVEaXN0YW5jZShzdGFydFBvaW50LCBlbmRQb2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoTWF0aC5zcXJ0KE1hdGgucG93KGVuZFBvaW50LnggLSBzdGFydFBvaW50LngsIDIpICsgTWF0aC5wb3coZW5kUG9pbnQueSAtIHN0YXJ0UG9pbnQueSwgMikpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGFuZ2xlIG9mIHRoZSBzd2lwZVxuICAgICAgICAgKiBAcGFyYW0ge3BvaW50fSBzdGFydFBvaW50IEEgcG9pbnQgb2JqZWN0IGNvbnRhaW5pbmcgeCBhbmQgeSBjby1vcmRpbmF0ZXNcbiAgICAgICAgICogQHBhcmFtIHtwb2ludH0gZW5kUG9pbnQgQSBwb2ludCBvYmplY3QgY29udGFpbmluZyB4IGFuZCB5IGNvLW9yZGluYXRlc1xuICAgICAgICAgKiBAcmV0dXJuIGludFxuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUFuZ2xlKHN0YXJ0UG9pbnQsIGVuZFBvaW50KSB7XG4gICAgICAgICAgICB2YXIgeCA9IHN0YXJ0UG9pbnQueCAtIGVuZFBvaW50Lng7XG4gICAgICAgICAgICB2YXIgeSA9IGVuZFBvaW50LnkgLSBzdGFydFBvaW50Lnk7XG4gICAgICAgICAgICB2YXIgciA9IE1hdGguYXRhbjIoeSwgeCk7IC8vcmFkaWFuc1xuICAgICAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5yb3VuZChyICogMTgwIC8gTWF0aC5QSSk7IC8vZGVncmVlc1xuXG4gICAgICAgICAgICAvL2Vuc3VyZSB2YWx1ZSBpcyBwb3NpdGl2ZVxuICAgICAgICAgICAgaWYgKGFuZ2xlIDwgMCkge1xuICAgICAgICAgICAgICAgIGFuZ2xlID0gMzYwIC0gTWF0aC5hYnMoYW5nbGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYW5nbGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSBkaXJlY3Rpb24gb2YgdGhlIHN3aXBlXG4gICAgICAgICAqIFRoaXMgd2lsbCBhbHNvIGNhbGwgY2FsY3VsYXRlQW5nbGUgdG8gZ2V0IHRoZSBsYXRlc3QgYW5nbGUgb2Ygc3dpcGVcbiAgICAgICAgICogQHBhcmFtIHtwb2ludH0gc3RhcnRQb2ludCBBIHBvaW50IG9iamVjdCBjb250YWluaW5nIHggYW5kIHkgY28tb3JkaW5hdGVzXG4gICAgICAgICAqIEBwYXJhbSB7cG9pbnR9IGVuZFBvaW50IEEgcG9pbnQgb2JqZWN0IGNvbnRhaW5pbmcgeCBhbmQgeSBjby1vcmRpbmF0ZXNcbiAgICAgICAgICogQHJldHVybiBzdHJpbmcgRWl0aGVyIHtAbGluayAkLmZuLnN3aXBlLmRpcmVjdGlvbnMuTEVGVH0gLyB7QGxpbmsgJC5mbi5zd2lwZS5kaXJlY3Rpb25zLlJJR0hUfSAvIHtAbGluayAkLmZuLnN3aXBlLmRpcmVjdGlvbnMuRE9XTn0gLyB7QGxpbmsgJC5mbi5zd2lwZS5kaXJlY3Rpb25zLlVQfVxuICAgICAgICAgKiBAc2VlICQuZm4uc3dpcGUuZGlyZWN0aW9uc1xuICAgICAgICAgKiBAaW5uZXJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZURpcmVjdGlvbihzdGFydFBvaW50LCBlbmRQb2ludCkge1xuICAgICAgICAgICAgdmFyIGFuZ2xlID0gY2FsY3VsYXRlQW5nbGUoc3RhcnRQb2ludCwgZW5kUG9pbnQpO1xuXG4gICAgICAgICAgICBpZiAoKGFuZ2xlIDw9IDQ1KSAmJiAoYW5nbGUgPj0gMCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTEVGVDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFuZ2xlIDw9IDM2MCkgJiYgKGFuZ2xlID49IDMxNSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTEVGVDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGFuZ2xlID49IDEzNSkgJiYgKGFuZ2xlIDw9IDIyNSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUklHSFQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChhbmdsZSA+IDQ1KSAmJiAoYW5nbGUgPCAxMzUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERPV047XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBVUDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgYSBNUyB0aW1lIHN0YW1wIG9mIHRoZSBjdXJyZW50IHRpbWVcbiAgICAgICAgICogQHJldHVybiBpbnRcbiAgICAgICAgICogQGlubmVyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRUaW1lU3RhbXAoKSB7XG4gICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiBub3cuZ2V0VGltZSgpO1xuICAgICAgICB9XG5cblxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgYm91bmRzIG9iamVjdCB3aXRoIGxlZnQsIHJpZ2h0LCB0b3AgYW5kIGJvdHRvbSBwcm9wZXJ0aWVzIGZvciB0aGUgZWxlbWVudCBzcGVjaWZpZWQuXG4gICAgICAgICAqIEBwYXJhbSB7RG9tTm9kZX0gVGhlIERPTSBub2RlIHRvIGdldCB0aGUgYm91bmRzIGZvci5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldGJvdW5kcyhlbCkge1xuICAgICAgICAgICAgZWwgPSAkKGVsKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBlbC5vZmZzZXQoKTtcblxuICAgICAgICAgICAgdmFyIGJvdW5kcyA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OiBvZmZzZXQubGVmdCxcbiAgICAgICAgICAgICAgICByaWdodDogb2Zmc2V0LmxlZnQgKyBlbC5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogb2Zmc2V0LnRvcCArIGVsLm91dGVySGVpZ2h0KClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGJvdW5kcztcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrcyBpZiB0aGUgcG9pbnQgb2JqZWN0IGlzIGluIHRoZSBib3VuZHMgb2JqZWN0LlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gcG9pbnQgQSBwb2ludCBvYmplY3QuXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBwb2ludC54IFRoZSB4IHZhbHVlIG9mIHRoZSBwb2ludC5cbiAgICAgICAgICogQHBhcmFtIHtpbnR9IHBvaW50LnkgVGhlIHggdmFsdWUgb2YgdGhlIHBvaW50LlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gYm91bmRzIFRoZSBib3VuZHMgb2JqZWN0IHRvIHRlc3RcbiAgICAgICAgICogQHBhcmFtIHtpbnR9IGJvdW5kcy5sZWZ0IFRoZSBsZWZ0bW9zdCB2YWx1ZVxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gYm91bmRzLnJpZ2h0IFRoZSByaWdodHRtb3N0IHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBib3VuZHMudG9wIFRoZSB0b3Btb3N0IHZhbHVlXG4gICAgICAgICAqIEBwYXJhbSB7aW50fSBib3VuZHMuYm90dG9tIFRoZSBib3R0b21tb3N0IHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBpc0luQm91bmRzKHBvaW50LCBib3VuZHMpIHtcbiAgICAgICAgICAgIHJldHVybiAocG9pbnQueCA+IGJvdW5kcy5sZWZ0ICYmIHBvaW50LnggPCBib3VuZHMucmlnaHQgJiYgcG9pbnQueSA+IGJvdW5kcy50b3AgJiYgcG9pbnQueSA8IGJvdW5kcy5ib3R0b20pO1xuICAgICAgICB9O1xuXG5cbiAgICB9XG59KSk7IiwiLypcbiAgTWFya3VwLmpzIHYxLjUuMjA6IGh0dHA6Ly9naXRodWIuY29tL2FkYW1tYXJrL01hcmt1cC5qc1xuICBNSVQgTGljZW5zZVxuICAoYykgMjAxMSAtIDIwMTQgQWRhbSBNYXJrXG4qL1xudmFyIE1hcmsgPSB7XG4gICAgLy8gVGVtcGxhdGVzIHRvIGluY2x1ZGUsIGJ5IG5hbWUuIEEgdGVtcGxhdGUgaXMgYSBzdHJpbmcuXG4gICAgaW5jbHVkZXM6IHt9LFxuXG4gICAgLy8gR2xvYmFsIHZhcmlhYmxlcywgYnkgbmFtZS4gR2xvYmFsIHZhcmlhYmxlcyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBjb250ZXh0IHZhcmlhYmxlcy5cbiAgICBnbG9iYWxzOiB7fSxcblxuICAgIC8vIFRoZSBkZWxpbWl0ZXIgdG8gdXNlIGluIHBpcGUgZXhwcmVzc2lvbnMsIGUuZy4ge3tpZiBjb2xvcnxsaWtlPnJlZH19LlxuICAgIGRlbGltaXRlcjogXCI+XCIsXG5cbiAgICAvLyBDb2xsYXBzZSB3aGl0ZSBzcGFjZSBiZXR3ZWVuIEhUTUwgZWxlbWVudHMgaW4gdGhlIHJlc3VsdGluZyBzdHJpbmcuXG4gICAgY29tcGFjdDogZmFsc2UsXG5cbiAgICAvLyBTaGFsbG93LWNvcHkgYW4gb2JqZWN0LlxuICAgIF9jb3B5OiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICBiID0gYiB8fCBbXTtcblxuICAgICAgICBmb3IgKHZhciBpIGluIGEpIHtcbiAgICAgICAgICAgIGJbaV0gPSBhW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGI7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgdmFsdWUgb2YgYSBudW1iZXIgb3Igc2l6ZSBvZiBhbiBhcnJheS4gVGhpcyBpcyBhIGhlbHBlciBmdW5jdGlvbiBmb3Igc2V2ZXJhbCBwaXBlcy5cbiAgICBfc2l6ZTogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBBcnJheSA/IGEubGVuZ3RoIDogKGEgfHwgMCk7XG4gICAgfSxcblxuICAgIC8vIFRoaXMgb2JqZWN0IHJlcHJlc2VudHMgYW4gaXRlcmF0aW9uLiBJdCBoYXMgYW4gaW5kZXggYW5kIGxlbmd0aC5cbiAgICBfaXRlcjogZnVuY3Rpb24gKGlkeCwgc2l6ZSkge1xuICAgICAgICB0aGlzLmlkeCA9IGlkeDtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBzaXplO1xuICAgICAgICB0aGlzLnNpZ24gPSBcIiNcIjtcblxuICAgICAgICAvLyBQcmludCB0aGUgaW5kZXggaWYgXCIjXCIgb3IgdGhlIGNvdW50IGlmIFwiIyNcIi5cbiAgICAgICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlkeCArIHRoaXMuc2lnbi5sZW5ndGggLSAxO1xuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICAvLyBQYXNzIGEgdmFsdWUgdGhyb3VnaCBhIHNlcmllcyBvZiBwaXBlIGV4cHJlc3Npb25zLCBlLmcuIF9waXBlKDEyMywgW1wiYWRkPjEwXCIsXCJ0aW1lcz41XCJdKS5cbiAgICBfcGlwZTogZnVuY3Rpb24gKHZhbCwgZXhwcmVzc2lvbnMpIHtcbiAgICAgICAgdmFyIGV4cHJlc3Npb24sIHBhcnRzLCBmbiwgcmVzdWx0O1xuXG4gICAgICAgIC8vIElmIHdlIGhhdmUgZXhwcmVzc2lvbnMsIHB1bGwgb3V0IHRoZSBmaXJzdCBvbmUsIGUuZy4gXCJhZGQ+MTBcIi5cbiAgICAgICAgaWYgKChleHByZXNzaW9uID0gZXhwcmVzc2lvbnMuc2hpZnQoKSkpIHtcblxuICAgICAgICAgICAgLy8gU3BsaXQgdGhlIGV4cHJlc3Npb24gaW50byBpdHMgY29tcG9uZW50IHBhcnRzLCBlLmcuIFtcImFkZFwiLCBcIjEwXCJdLlxuICAgICAgICAgICAgcGFydHMgPSBleHByZXNzaW9uLnNwbGl0KHRoaXMuZGVsaW1pdGVyKTtcblxuICAgICAgICAgICAgLy8gUHVsbCBvdXQgdGhlIGZ1bmN0aW9uIG5hbWUsIGUuZy4gXCJhZGRcIi5cbiAgICAgICAgICAgIGZuID0gcGFydHMuc2hpZnQoKS50cmltKCk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gUnVuIHRoZSBmdW5jdGlvbiwgZS5nLiBhZGQoMTIzLCAxMCkgLi4uXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gTWFyay5waXBlc1tmbl0uYXBwbHkobnVsbCwgW3ZhbF0uY29uY2F0KHBhcnRzKSk7XG5cbiAgICAgICAgICAgICAgICAvLyAuLi4gdGhlbiBwaXBlIGFnYWluIHdpdGggcmVtYWluaW5nIGV4cHJlc3Npb25zLlxuICAgICAgICAgICAgICAgIHZhbCA9IHRoaXMuX3BpcGUocmVzdWx0LCBleHByZXNzaW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBwaXBlZCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgLy8gVE9ETyBkb2NcbiAgICBfZXZhbDogZnVuY3Rpb24gKGNvbnRleHQsIGZpbHRlcnMsIGNoaWxkKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9waXBlKGNvbnRleHQsIGZpbHRlcnMpLFxuICAgICAgICAgICAgY3R4ID0gcmVzdWx0LFxuICAgICAgICAgICAgaSA9IC0xLFxuICAgICAgICAgICAgaixcbiAgICAgICAgICAgIG9wdHM7XG5cbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBcIlwiO1xuICAgICAgICAgICAgaiA9IGN0eC5sZW5ndGg7XG5cbiAgICAgICAgICAgIHdoaWxlICgrK2kgPCBqKSB7XG4gICAgICAgICAgICAgICAgb3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlcjogbmV3IHRoaXMuX2l0ZXIoaSwgailcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGlsZCA/IE1hcmsudXAoY2hpbGQsIGN0eFtpXSwgb3B0cykgOiBjdHhbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVzdWx0IGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBNYXJrLnVwKGNoaWxkLCBjdHgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgLy8gUHJvY2VzcyB0aGUgY29udGVudHMgb2YgYW4gSUYgb3IgSUYvRUxTRSBibG9jay5cbiAgICBfdGVzdDogZnVuY3Rpb24gKGJvb2wsIGNoaWxkLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIFByb2Nlc3MgdGhlIGNoaWxkIHN0cmluZywgdGhlbiBzcGxpdCBpdCBpbnRvIHRoZSBJRiBhbmQgRUxTRSBwYXJ0cy5cbiAgICAgICAgdmFyIHN0ciA9IE1hcmsudXAoY2hpbGQsIGNvbnRleHQsIG9wdGlvbnMpLnNwbGl0KC9cXHtcXHtcXHMqZWxzZVxccypcXH1cXH0vKTtcblxuICAgICAgICAvLyBSZXR1cm4gdGhlIElGIG9yIEVMU0UgcGFydC4gSWYgbm8gRUxTRSwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgICAgcmV0dXJuIChib29sID09PSBmYWxzZSA/IHN0clsxXSA6IHN0clswXSkgfHwgXCJcIjtcbiAgICB9LFxuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSBleHRlbnQgb2YgYSBibG9jayBleHByZXNzaW9uLCBlLmcuIFwie3tmb299fS4uLnt7L2Zvb319XCJcbiAgICBfYnJpZGdlOiBmdW5jdGlvbiAodHBsLCB0a24pIHtcbiAgICAgICAgaWYgKHRrbiA9PSBcIi5cIilcbiAgICAgICAgICAgIHRrbiA9IFwiXFxcXC5cIjsgICAgLy8gcmVnZXgtc2FmZVxuICAgICAgICB2YXIgZXhwID0gXCJ7e1xcXFxzKlwiICsgdGtuICsgXCIoW14vfV0rXFxcXHcqKT99fXx7ey9cIiArIHRrbiArIFwiXFxcXHMqfX1cIixcbiAgICAgICAgICAgIHJlID0gbmV3IFJlZ0V4cChleHAsIFwiZ1wiKSxcbiAgICAgICAgICAgIHRhZ3MgPSB0cGwubWF0Y2gocmUpIHx8IFtdLFxuICAgICAgICAgICAgdCxcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICBhID0gMCxcbiAgICAgICAgICAgIGIgPSAwLFxuICAgICAgICAgICAgYyA9IC0xLFxuICAgICAgICAgICAgZCA9IDA7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHQgPSBpO1xuICAgICAgICAgICAgYyA9IHRwbC5pbmRleE9mKHRhZ3NbdF0sIGMgKyAxKTtcblxuICAgICAgICAgICAgaWYgKHRhZ3NbdF0uaW5kZXhPZihcInt7L1wiKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgYisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYSsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYSA9IHRwbC5pbmRleE9mKHRhZ3NbMF0pO1xuICAgICAgICBiID0gYSArIHRhZ3NbMF0ubGVuZ3RoO1xuICAgICAgICBkID0gYyArIHRhZ3NbdF0ubGVuZ3RoO1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgYmxvY2ssIGUuZy4gXCJ7e2Zvb319YmFye3svZm9vfX1cIiBhbmQgaXRzIGNoaWxkLCBlLmcuIFwiYmFyXCIuXG4gICAgICAgIHJldHVybiBbdHBsLnN1YnN0cmluZyhhLCBkKSwgdHBsLnN1YnN0cmluZyhiLCBjKV07XG4gICAgfVxufTtcblxuLy8gSW5qZWN0IGEgdGVtcGxhdGUgc3RyaW5nIHdpdGggY29udGV4dHVhbCBkYXRhIGFuZCByZXR1cm4gYSBuZXcgc3RyaW5nLlxuTWFyay51cCA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgY29udGV4dCwgb3B0aW9ucykge1xuICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IHt9O1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgLy8gTWF0Y2ggYWxsIHRhZ3MgbGlrZSBcInt7Li4ufX1cIi5cbiAgICB2YXIgcmUgPSAvXFx7XFx7KC4rPylcXH1cXH0vZyxcbiAgICAgICAgLy8gQWxsIHRhZ3MgaW4gdGhlIHRlbXBsYXRlLlxuICAgICAgICB0YWdzID0gdGVtcGxhdGUubWF0Y2gocmUpIHx8IFtdLFxuICAgICAgICAvLyBUaGUgdGFnIGJlaW5nIGV2YWx1YXRlZCwgZS5nLiBcInt7aGFtc3RlcnxkYW5jZX19XCIuXG4gICAgICAgIHRhZyxcbiAgICAgICAgLy8gVGhlIGV4cHJlc3Npb24gdG8gZXZhbHVhdGUgaW5zaWRlIHRoZSB0YWcsIGUuZy4gXCJoYW1zdGVyfGRhbmNlXCIuXG4gICAgICAgIHByb3AsXG4gICAgICAgIC8vIFRoZSB0b2tlbiBpdHNlbGYsIGUuZy4gXCJoYW1zdGVyXCIuXG4gICAgICAgIHRva2VuLFxuICAgICAgICAvLyBBbiBhcnJheSBvZiBwaXBlIGV4cHJlc3Npb25zLCBlLmcuIFtcIm1vcmU+MVwiLCBcImxlc3M+MlwiXS5cbiAgICAgICAgZmlsdGVycyA9IFtdLFxuICAgICAgICAvLyBEb2VzIHRoZSB0YWcgY2xvc2UgaXRzZWxmPyBlLmcuIFwie3tzdHVmZi99fVwiLlxuICAgICAgICBzZWxmeSxcbiAgICAgICAgLy8gSXMgdGhlIHRhZyBhbiBcImlmXCIgc3RhdGVtZW50P1xuICAgICAgICB0ZXN0eSxcbiAgICAgICAgLy8gVGhlIGNvbnRlbnRzIG9mIGEgYmxvY2sgdGFnLCBlLmcuIFwie3thYX19YmJ7ey9hYX19XCIgLT4gXCJiYlwiLlxuICAgICAgICBjaGlsZCxcbiAgICAgICAgLy8gVGhlIHJlc3VsdGluZyBzdHJpbmcuXG4gICAgICAgIHJlc3VsdCxcbiAgICAgICAgLy8gVGhlIGdsb2JhbCB2YXJpYWJsZSBiZWluZyBldmFsdWF0ZWQsIG9yIHVuZGVmaW5lZC5cbiAgICAgICAgZ2xvYmFsLFxuICAgICAgICAvLyBUaGUgaW5jbHVkZWQgdGVtcGxhdGUgYmVpbmcgZXZhbHVhdGVkLCBvciB1bmRlZmluZWQuXG4gICAgICAgIGluY2x1ZGUsXG4gICAgICAgIC8vIEEgcGxhY2Vob2xkZXIgdmFyaWFibGUuXG4gICAgICAgIGN0eCxcbiAgICAgICAgLy8gSXRlcmF0b3JzLlxuICAgICAgICBpID0gMCxcbiAgICAgICAgaiA9IDA7XG5cbiAgICAvLyBTZXQgY3VzdG9tIHBpcGVzLCBpZiBwcm92aWRlZC5cbiAgICBpZiAob3B0aW9ucy5waXBlcykge1xuICAgICAgICB0aGlzLl9jb3B5KG9wdGlvbnMucGlwZXMsIHRoaXMucGlwZXMpO1xuICAgIH1cblxuICAgIC8vIFNldCB0ZW1wbGF0ZXMgdG8gaW5jbHVkZSwgaWYgcHJvdmlkZWQuXG4gICAgaWYgKG9wdGlvbnMuaW5jbHVkZXMpIHtcbiAgICAgICAgdGhpcy5fY29weShvcHRpb25zLmluY2x1ZGVzLCB0aGlzLmluY2x1ZGVzKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgZ2xvYmFsIHZhcmlhYmxlcywgaWYgcHJvdmlkZWQuXG4gICAgaWYgKG9wdGlvbnMuZ2xvYmFscykge1xuICAgICAgICB0aGlzLl9jb3B5KG9wdGlvbnMuZ2xvYmFscywgdGhpcy5nbG9iYWxzKTtcbiAgICB9XG5cbiAgICAvLyBPcHRpb25hbGx5IG92ZXJyaWRlIHRoZSBkZWxpbWl0ZXIuXG4gICAgaWYgKG9wdGlvbnMuZGVsaW1pdGVyKSB7XG4gICAgICAgIHRoaXMuZGVsaW1pdGVyID0gb3B0aW9ucy5kZWxpbWl0ZXI7XG4gICAgfVxuXG4gICAgLy8gT3B0aW9uYWxseSBjb2xsYXBzZSB3aGl0ZSBzcGFjZS5cbiAgICBpZiAob3B0aW9ucy5jb21wYWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5jb21wYWN0ID0gb3B0aW9ucy5jb21wYWN0O1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCB0YWdzLCBlLmcuIHt7YX19LCB7e2J9fSwge3tjfX0sIHt7L2N9fS5cbiAgICB3aGlsZSAoKHRhZyA9IHRhZ3NbaSsrXSkpIHtcbiAgICAgICAgcmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgICBjaGlsZCA9IFwiXCI7XG4gICAgICAgIHNlbGZ5ID0gdGFnLmluZGV4T2YoXCIvfX1cIikgPiAtMTtcbiAgICAgICAgcHJvcCA9IHRhZy5zdWJzdHIoMiwgdGFnLmxlbmd0aCAtIChzZWxmeSA/IDUgOiA0KSk7XG4gICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoL2AoLis/KWAvZywgZnVuY3Rpb24gKHMsIHAxKSB7XG4gICAgICAgICAgICByZXR1cm4gTWFyay51cChcInt7XCIgKyBwMSArIFwifX1cIiwgY29udGV4dCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZXN0eSA9IHByb3AudHJpbSgpLmluZGV4T2YoXCJpZiBcIikgPT09IDA7XG4gICAgICAgIGZpbHRlcnMgPSBwcm9wLnNwbGl0KFwifFwiKTtcbiAgICAgICAgZmlsdGVycy5zaGlmdCgpOyAvLyBpbnN0ZWFkIG9mIHNwbGljZSgxKVxuICAgICAgICBwcm9wID0gcHJvcC5yZXBsYWNlKC9eXFxzKmlmLywgXCJcIikuc3BsaXQoXCJ8XCIpLnNoaWZ0KCkudHJpbSgpO1xuICAgICAgICB0b2tlbiA9IHRlc3R5ID8gXCJpZlwiIDogcHJvcC5zcGxpdChcInxcIilbMF07XG4gICAgICAgIGN0eCA9IGNvbnRleHRbcHJvcF07XG5cbiAgICAgICAgLy8gSWYgYW4gXCJpZlwiIHN0YXRlbWVudCB3aXRob3V0IGZpbHRlcnMsIGFzc3VtZSBcInt7aWYgZm9vfG5vdGVtcHR5fX1cIlxuICAgICAgICBpZiAodGVzdHkgJiYgIWZpbHRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmaWx0ZXJzID0gW1wibm90ZW1wdHlcIl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEb2VzIHRoZSB0YWcgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgY2xvc2luZyB0YWc/IElmIHNvLCBmaW5kIGl0IGFuZCBtb3ZlIHRoZSBjdXJzb3IuXG4gICAgICAgIGlmICghc2VsZnkgJiYgdGVtcGxhdGUuaW5kZXhPZihcInt7L1wiICsgdG9rZW4pID4gLTEpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2JyaWRnZSh0ZW1wbGF0ZSwgdG9rZW4pO1xuICAgICAgICAgICAgdGFnID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgY2hpbGQgPSByZXN1bHRbMV07XG4gICAgICAgICAgICBpICs9IHRhZy5tYXRjaChyZSkubGVuZ3RoIC0gMTsgLy8gZmFzdCBmb3J3YXJkXG4gICAgICAgIH1cblxuICAgICAgICAvLyBTa2lwIFwiZWxzZVwiIHRhZ3MuIFRoZXNlIGFyZSBwdWxsZWQgb3V0IGluIF90ZXN0KCkuXG4gICAgICAgIGlmICgvXlxce1xce1xccyplbHNlXFxzKlxcfVxcfSQvLnRlc3QodGFnKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGEgZ2xvYmFsIHZhcmlhYmxlLlxuICAgICAgICBlbHNlIGlmICgoZ2xvYmFsID0gdGhpcy5nbG9iYWxzW3Byb3BdKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsKGdsb2JhbCwgZmlsdGVycywgY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbiBpbmNsdWRlZCB0ZW1wbGF0ZS5cbiAgICAgICAgZWxzZSBpZiAoKGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVzW3Byb3BdKSkge1xuICAgICAgICAgICAgaWYgKGluY2x1ZGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKE1hcmsudXAoaW5jbHVkZSwgY29udGV4dCwgb3B0aW9ucyksIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhIGxvb3AgY291bnRlciAoXCIjXCIgb3IgXCIjI1wiKS5cbiAgICAgICAgZWxzZSBpZiAocHJvcC5pbmRleE9mKFwiI1wiKSA+IC0xKSB7XG4gICAgICAgICAgICBvcHRpb25zLml0ZXIuc2lnbiA9IHByb3A7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKG9wdGlvbnMuaXRlciwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIHRoZSBjdXJyZW50IGNvbnRleHQuXG4gICAgICAgIGVsc2UgaWYgKHByb3AgPT09IFwiLlwiKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKGNvbnRleHQsIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhIHZhcmlhYmxlIHdpdGggZG90IG5vdGF0aW9uLCBlLmcuIFwiYS5iLmNcIlxuICAgICAgICBlbHNlIGlmIChwcm9wLmluZGV4T2YoXCIuXCIpID4gLTEpIHtcbiAgICAgICAgICAgIHByb3AgPSBwcm9wLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgIGN0eCA9IE1hcmsuZ2xvYmFsc1twcm9wWzBdXTtcblxuICAgICAgICAgICAgaWYgKGN0eCkge1xuICAgICAgICAgICAgICAgIGogPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgY3R4ID0gY29udGV4dDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBhY3R1YWwgY29udGV4dFxuICAgICAgICAgICAgd2hpbGUgKGN0eCAmJiBqIDwgcHJvcC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjdHggPSBjdHhbcHJvcFtqKytdXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZXZhbChjdHgsIGZpbHRlcnMsIGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW4gXCJpZlwiIHN0YXRlbWVudC5cbiAgICAgICAgZWxzZSBpZiAodGVzdHkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUoY3R4LCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW4gYXJyYXksIHdoaWNoIG1pZ2h0IGJlIGEgYmxvY2sgZXhwcmVzc2lvbi5cbiAgICAgICAgZWxzZSBpZiAoY3R4IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2V2YWwoY3R4LCBmaWx0ZXJzLCBjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGEgYmxvY2sgZXhwcmVzc2lvbi5cbiAgICAgICAgZWxzZSBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGN0eCA/IE1hcmsudXAoY2hpbGQsIGN0eCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFueXRoaW5nIGVsc2UuXG4gICAgICAgIGVsc2UgaWYgKGNvbnRleHQuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUoY3R4LCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgc3BlY2lhbCBjYXNlOiBpZiB0aGUgcmVzdWx0aW5nIGNvbnRleHQgaXMgYWN0dWFsbHkgYW4gQXJyYXlcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsKHJlc3VsdCwgZmlsdGVycywgY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbiBcImlmXCIgc3RhdGVtZW50LlxuICAgICAgICBpZiAodGVzdHkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3Rlc3QocmVzdWx0LCBjaGlsZCwgY29udGV4dCwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXBsYWNlIHRoZSB0YWcsIGUuZy4gXCJ7e25hbWV9fVwiLCB3aXRoIHRoZSByZXN1bHQsIGUuZy4gXCJBZGFtXCIuXG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSh0YWcsIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gXCI/Pz9cIiA6IHJlc3VsdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29tcGFjdCA/IHRlbXBsYXRlLnJlcGxhY2UoLz5cXHMrPC9nLCBcIj48XCIpIDogdGVtcGxhdGU7XG59O1xuXG4vLyBGcmVlYmllIHBpcGVzLiBTZWUgdXNhZ2UgaW4gUkVBRE1FLm1kXG5NYXJrLnBpcGVzID0ge1xuICAgIGVtcHR5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiAhb2JqIHx8IChvYmogKyBcIlwiKS50cmltKCkubGVuZ3RoID09PSAwID8gb2JqIDogZmFsc2U7XG4gICAgfSxcbiAgICBub3RlbXB0eTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIChvYmogKyBcIlwiKS50cmltKCkubGVuZ3RoID8gb2JqIDogZmFsc2U7XG4gICAgfSxcbiAgICBibGFuazogZnVuY3Rpb24gKHN0ciwgdmFsKSB7XG4gICAgICAgIHJldHVybiAhIXN0ciB8fCBzdHIgPT09IDAgPyBzdHIgOiB2YWw7XG4gICAgfSxcbiAgICBtb3JlOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gTWFyay5fc2l6ZShhKSA+IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBsZXNzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gTWFyay5fc2l6ZShhKSA8IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBvcm1vcmU6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBNYXJrLl9zaXplKGEpID49IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBvcmxlc3M6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBNYXJrLl9zaXplKGEpIDw9IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBiZXR3ZWVuOiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICBhID0gTWFyay5fc2l6ZShhKTtcbiAgICAgICAgcmV0dXJuIGEgPj0gYiAmJiBhIDw9IGMgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBlcXVhbHM6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhID09IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBub3RlcXVhbHM6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICE9IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBsaWtlOiBmdW5jdGlvbiAoc3RyLCBwYXR0ZXJuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4sIFwiaVwiKS50ZXN0KHN0cikgPyBzdHIgOiBmYWxzZTtcbiAgICB9LFxuICAgIG5vdGxpa2U6IGZ1bmN0aW9uIChzdHIsIHBhdHRlcm4pIHtcbiAgICAgICAgcmV0dXJuICFNYXJrLnBpcGVzLmxpa2Uoc3RyLCBwYXR0ZXJuKSA/IHN0ciA6IGZhbHNlO1xuICAgIH0sXG4gICAgdXBjYXNlOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoc3RyKS50b1VwcGVyQ2FzZSgpO1xuICAgIH0sXG4gICAgZG93bmNhc2U6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnRvTG93ZXJDYXNlKCk7XG4gICAgfSxcbiAgICBjYXBjYXNlOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvKD86XnxcXHMpXFxTL2csIGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvVXBwZXJDYXNlKCk7IH0pO1xuICAgIH0sXG4gICAgY2hvcDogZnVuY3Rpb24gKHN0ciwgbikge1xuICAgICAgICByZXR1cm4gc3RyLmxlbmd0aCA+IG4gPyBzdHIuc3Vic3RyKDAsIG4pICsgXCIuLi5cIiA6IHN0cjtcbiAgICB9LFxuICAgIHRlYXNlOiBmdW5jdGlvbiAoc3RyLCBuKSB7XG4gICAgICAgIHZhciBhID0gc3RyLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgIHJldHVybiBhLnNsaWNlKDAsIG4pLmpvaW4oXCIgXCIpICsgKGEubGVuZ3RoID4gbiA/IFwiLi4uXCIgOiBcIlwiKTtcbiAgICB9LFxuICAgIHRyaW06IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci50cmltKCk7XG4gICAgfSxcbiAgICBwYWNrOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIudHJpbSgpLnJlcGxhY2UoL1xcc3syLH0vZywgXCIgXCIpO1xuICAgIH0sXG4gICAgcm91bmQ6IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoK251bSk7XG4gICAgfSxcbiAgICBjbGVhbjogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvPFxcLz9bXj5dKz4vZ2ksIFwiXCIpO1xuICAgIH0sXG4gICAgc2l6ZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmxlbmd0aDtcbiAgICB9LFxuICAgIGxlbmd0aDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmxlbmd0aDtcbiAgICB9LFxuICAgIHJldmVyc2U6IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChhcnIpLnJldmVyc2UoKTtcbiAgICB9LFxuICAgIGpvaW46IGZ1bmN0aW9uIChhcnIsIHNlcGFyYXRvcikge1xuICAgICAgICByZXR1cm4gYXJyLmpvaW4oc2VwYXJhdG9yKTtcbiAgICB9LFxuICAgIGxpbWl0OiBmdW5jdGlvbiAoYXJyLCBjb3VudCwgaWR4KSB7XG4gICAgICAgIHJldHVybiBhcnIuc2xpY2UoK2lkeCB8fCAwLCArY291bnQgKyAoK2lkeCB8fCAwKSk7XG4gICAgfSxcbiAgICBzcGxpdDogZnVuY3Rpb24gKHN0ciwgc2VwYXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBzdHIuc3BsaXQoc2VwYXJhdG9yIHx8IFwiLFwiKTtcbiAgICB9LFxuICAgIGNob29zZTogZnVuY3Rpb24gKGJvb2wsIGlmZnksIGVsc3kpIHtcbiAgICAgICAgcmV0dXJuICEhYm9vbCA/IGlmZnkgOiAoZWxzeSB8fCBcIlwiKTtcbiAgICB9LFxuICAgIHRvZ2dsZTogZnVuY3Rpb24gKG9iaiwgY3N2MSwgY3N2Miwgc3RyKSB7XG4gICAgICAgIHJldHVybiBjc3YyLnNwbGl0KFwiLFwiKVtjc3YxLm1hdGNoKC9cXHcrL2cpLmluZGV4T2Yob2JqICsgXCJcIildIHx8IHN0cjtcbiAgICB9LFxuICAgIHNvcnQ6IGZ1bmN0aW9uIChhcnIsIHByb3ApIHtcbiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhW3Byb3BdID4gYltwcm9wXSA/IDEgOiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChhcnIpLnNvcnQocHJvcCA/IGZuIDogdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIGZpeDogZnVuY3Rpb24gKG51bSwgbikge1xuICAgICAgICByZXR1cm4gKCtudW0pLnRvRml4ZWQobik7XG4gICAgfSxcbiAgICBtb2Q6IGZ1bmN0aW9uIChudW0sIG4pIHtcbiAgICAgICAgcmV0dXJuICgrbnVtKSAlICgrbik7XG4gICAgfSxcbiAgICBkaXZpc2libGU6IGZ1bmN0aW9uIChudW0sIG4pIHtcbiAgICAgICAgcmV0dXJuIG51bSAmJiAoK251bSAlIG4pID09PSAwID8gbnVtIDogZmFsc2U7XG4gICAgfSxcbiAgICBldmVuOiBmdW5jdGlvbiAobnVtKSB7XG4gICAgICAgIHJldHVybiBudW0gJiYgKCtudW0gJiAxKSA9PT0gMCA/IG51bSA6IGZhbHNlO1xuICAgIH0sXG4gICAgb2RkOiBmdW5jdGlvbiAobnVtKSB7XG4gICAgICAgIHJldHVybiBudW0gJiYgKCtudW0gJiAxKSA9PT0gMSA/IG51bSA6IGZhbHNlO1xuICAgIH0sXG4gICAgbnVtYmVyOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHN0ci5yZXBsYWNlKC9bXlxcLVxcZFxcLl0vZywgXCJcIikpO1xuICAgIH0sXG4gICAgdXJsOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUkkoc3RyKTtcbiAgICB9LFxuICAgIGJvb2w6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICEhb2JqO1xuICAgIH0sXG4gICAgZmFsc3k6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICFvYmo7XG4gICAgfSxcbiAgICBmaXJzdDogZnVuY3Rpb24gKGl0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXIuaWR4ID09PSAwO1xuICAgIH0sXG4gICAgbGFzdDogZnVuY3Rpb24gKGl0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXIuaWR4ID09PSBpdGVyLnNpemUgLSAxO1xuICAgIH0sXG4gICAgY2FsbDogZnVuY3Rpb24gKG9iaiwgZm4pIHtcbiAgICAgICAgcmV0dXJuIG9ialtmbl0uYXBwbHkob2JqLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMikpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgICAgICAgTWFyay5nbG9iYWxzW2tleV0gPSBvYmo7IHJldHVybiBcIlwiO1xuICAgIH0sXG4gICAgbG9nOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG9iaik7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxufTtcblxuLy8gU2hpbSBmb3IgSUUuXG5pZiAodHlwZW9mIFN0cmluZy5wcm90b3R5cGUudHJpbSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpOyBcbiAgICB9XG59XG5cbi8vIEV4cG9ydCBmb3IgTm9kZS5qcyBhbmQgQU1ELlxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IE1hcms7XG59XG5lbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIE1hcms7XG4gICAgfSk7XG59XG4iLCJ2YXIgZ3VpYVRWID0gKGZ1bmN0aW9uKCQpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICAvL2NvbnNvbGUubG9nKCdVc2EgalF1ZXJ5IHZlcnNpb246ICcgKyAkLmZuLmpxdWVyeSk7XHJcblxyXG4gICAgdmFyIGNhbmFsZXNVc3VhcmlvID0gWydsYTEnLCAnbGEyJywgJ2FudGVuYTMnLCAnY3VhdHJvJywgJ3RlbGVjaW5jbycsICdsYXNleHRhJ10sXHJcbiAgICAgICAgY2FuYWxlc0dsb2JhbCA9IHt9LFxyXG4gICAgICAgIGNhdGVnb3JpYXNVc3VhcmlvID0gW10sXHJcbiAgICAgICAgYXJyYXlDYW5hbGVzID0gW10sXHJcbiAgICAgICAgYXJyYXlEaWFzID0gW107XHJcbiAgICB2YXIgYWx0b0JhcnJhSG9yYXMgPSA2MCxcclxuICAgICAgICAvL2FuY2hvQmFycmFDYW5hbGVzID0gMTUwLFxyXG4gICAgICAgIGFsdG9DYW5hbCA9IDkwLFxyXG4gICAgICAgIHBpeGVsc1BvckhvcmEgPSAzMjAsXHJcbiAgICAgICAgLy8gYW5jaG9Qb3JEaWEgPSBwaXhlbHNQb3JIb3JhICogMjQsXHJcbiAgICAgICAgcGl4ZWxzUG9yTWludXRvID0gcGl4ZWxzUG9ySG9yYSAvIDYwO1xyXG5cclxuICAgIC8vIFRPRE8gQWhvcmEgbWlzbW8gZm9yemFtb3MgZXN0YSBmZWNoYSBkZSBpbmljaW9cclxuICAgIHZhciBkaWFBY3R1YWwgPSBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGhvcmFBY3R1YWwgPSB7XHJcbiAgICAgICAgICAgICdoJzogbGVmdFBhZChkaWFBY3R1YWwuZ2V0SG91cnMoKSwgMiksXHJcbiAgICAgICAgICAgICdtJzogbGVmdFBhZChkaWFBY3R1YWwuZ2V0TWludXRlcygpLCAyKVxyXG4gICAgICAgIH07XHJcbiAgICAvL2RpYUFjdHVhbC5zZXRUaW1lKERhdGUucGFyc2UoXCJNb24sIEp1bCAxNCAyMDE0IDAwOjAwOjAwIEdNVCswMjAwXCIpKTtcclxuICAgIGRpYUFjdHVhbC5zZXRUaW1lKERhdGUucGFyc2UoXCJNb24sIEp1bCAxNCAyMDE0XCIpKTtcclxuXHJcbiAgICB2YXIgJHZpZXdQb3J0ID0gJCgnLnZpZXdQb3J0Jyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yQ2F0ZWdvcmlhcyA9ICQoJy5zZWxlY3RvckNhdGVnb3JpYXMnKTtcclxuICAgIHZhciAkc2VsZWN0b3JEaWFzID0gJCgnLnNlbGVjdG9yRGlhcycpO1xyXG4gICAgdmFyICRjb250UHJvZ3JhbWFzID0gJCgnLmNvbnRQcm9ncmFtYXMnKTtcclxuICAgIC8vdmFyICRpdGVtUHJvZ3JhbWEgPSAkKCcuaXRlbVByb2dyYW1hJyk7XHJcbiAgICB2YXIgJGNvbnRDYW5hbGVzID0gJCgnLmNvbnRDYW5hbGVzJyk7XHJcbiAgICB2YXIgJGJhcnJhSG9yYXMgPSAkKCcuYmFycmFIb3JhcycpO1xyXG4gICAgdmFyICRpY29ub3NIb3JhcyA9ICQoJy5pY29ub3NIb3JhcycpO1xyXG4gICAgdmFyICRob3JhQWN0dWFsID0gJCgnLmhvcmFBY3R1YWwnKTtcclxuICAgIHZhciAkZmljaGFQcm9ncmFtYSA9ICQoJy5maWNoYVByb2dyYW1hJyk7XHJcbiAgICAvL3ZhciAkYmFycmFzQ2FuYWxlcyA9ICQoJy5iYXJyYXNDYW5hbGVzJyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yQ2FuYWxlcyA9ICQoJy5zZWxlY3RvckNhbmFsZXMnKTtcclxuICAgIHZhciAkYmFycmFMZXRyYXMgPSAkKCcuYmFycmFMZXRyYXMnKTtcclxuICAgIHZhciAkb3JkZW5DYW5hbGVzID0gJCgnLm9yZGVuQ2FuYWxlcycpO1xyXG4gICAgdmFyICRib3RvbmVzQ2FuYWxlcyA9ICQoJy5ib3RvbmVzQ2FuYWxlcycpO1xyXG4gICAgdmFyICRzdXNjcmliaXJDYW5hbGVzID0gJCgnLnN1c2NyaWJpckNhbmFsZXMnKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFjY2VkZSBhIGxhcyBjb29raWVzIGRlbCB1c3VhcmlvIHBhcmEgdmVyIHBlcnNvbmFsaXphY2nDs24gZGUgY2FuYWxlc1xyXG4gICAgICogQHJldHVybiB7YXJyYXl9IExpc3RhIGRlIGNhbmFsZXMgcGVyc29uYWxpemFkb3MgcG9yIGVsIHVzdWFyaW9cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY2FyZ2FDb29raWVzKCkge1xyXG4gICAgICAgIC8vIFRPRE8gQ2FyZ2FyIGNhbmFsZXMgZGVzZGUgdW5hIGNvb2tpZSwgeSBnZW5lcmFyIMOpc3RhIGN1YW5kbyBzZSBhY2NlZGUgcG9yIHByaW1lcmEgdmV6XHJcbiAgICAgICAgLy8gVE9ETyBDYXJnYXIgZGUgbGFzIGNvb2tpZXMgbG9zIGNhbmFsZXMgcmVzYWx0YWRvcyBkZWwgc2VsZWN0b3JDYXRlZ29yaWFzXHJcbiAgICAgICAgLy8gTMOzZ2ljYSBkZSBsZWN0dXJhIGRlIGNvb2tpZXNcclxuICAgICAgICB2YXIgZGVmID0gJC5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICBjYW5hbGVzO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNhbmFsZXMgPSBbJ3RlbGVjaW5jbycsICdhbnRlbmEzJywgJ2xhMicsICdsYTEnLCAnY3VhdHJvJywgJ2xhc2V4dGEnLCAnaGlzdG9yaWEnXTtcclxuICAgICAgICAgICAgY2F0ZWdvcmlhc1VzdWFyaW8gPSBbMSwgMiwgMywgNCwgNSwgNiwgN107XHJcbiAgICAgICAgICAgIGRlZi5yZXNvbHZlKGNhbmFsZXMpO1xyXG4gICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgIHJldHVybiBkZWYucHJvbWlzZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY2liZSBsYSBsaXN0YSBkZSBjYW5hbGVzIGEgY2FyZ2FyIHkgaGFjZSBsYXMgbGxhbWFkYXMgYXPDrW5jcm9uYXNcclxuICAgICAqIEBwYXJhbSB7YXJyYXl9IGNhbmFsZXMgTGlzdGFkbyBkZSBjYW5hbGVzIGEgY2FyZ2FyXHJcbiAgICAgKiBAcmV0dXJuIHtqc29ufSBEYXRvcyBqc29uIGRlIGxhIHByb2dyYW1hY2nDs24gYWwgY29tcGxldG8gcGFyYSBsb3MgY2FuYWxlcyBzZWxlY2Npb25hZG9zXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNhcmdhRGF0b3NDYW5hbGVzKGNhbmFsZXMpIHtcclxuICAgICAgICAvLyBDYXJnYXMgYXPDrW5jcm9uYXMgZGUgdmFyaW9zIGNhbmFsZXNcclxuICAgICAgICAvLyBwb3IgY2FkYSBjYW5hbCwgY2FyZ2EgdW4ganNvblxyXG4gICAgICAgIHZhciBqc29uID0gW10sXHJcbiAgICAgICAgICAgIHByb21pc2VzID0gW10sXHJcbiAgICAgICAgICAgIG51bUVsZW1lbnRvcyA9IGNhbmFsZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAkLndoZW4uYXBwbHkobnVsbCwgJC5tYXAoY2FuYWxlcywgZnVuY3Rpb24oY2FuYWwsIGkpIHtcclxuICAgICAgICAgICAgdmFyIGZpY2hlcm8gPSAnZGF0b3MvJyArIGNhbmFsICsgJy5qc29uJztcclxuXHJcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goJC5nZXQoZmljaGVybykuZG9uZShmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheUNhbmFsZXNbaV0gPSBqc29uW2ldID0gZGF0YTtcclxuICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGFycmF5Q2FuYWxlc1tpXSA9IGpzb25baV0gPSAnJztcclxuICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8gUmVzb2x2ZXIgZGVmZXJyZXIgY3VhbmRvIHNlIGhheWFuIGNhcmdhZG8gdG9kb3MgbG9zIGpzb25cclxuICAgICAgICByZXR1cm4gJC53aGVuLmFwcGx5KG51bGwsIHByb21pc2VzKS5wcm9taXNlKCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY2liZSBsYSBsaXN0YSBkZSBwcm9ncmFtYXMgYSBwaW50YXIgcG9yIGNhbmFsIHkgbGFuemEgZWwgcGludGFkbyBkZWwgY2FuYWxcclxuICAgICAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YVBhcnJpbGxhKGxpc3RhQ2FuYWxlcywgYXJyYXlDb21wbGV0bykge1xyXG4gICAgICAgIHZhciBsaXN0YSA9IGxpc3RhQ2FuYWxlcyB8fCBjYW5hbGVzVXN1YXJpbztcclxuICAgICAgICB2YXIgY29tcGxldG8gPSBhcnJheUNvbXBsZXRvIHx8IGFycmF5Q2FuYWxlcztcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBpZD1cInt7aWRjYW5hbH19XCIgY2xhc3M9XCJsaW5lYUNhbmFsIGNsZWFyZml4XCI+PC9kaXY+JztcclxuXHJcbiAgICAgICAgJC5lYWNoKGxpc3RhLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuaWRjYW5hbCA9IHY7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHRhZG8gPSBNYXJrLnVwKHRlbXBsYXRlLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFBpbnRhbW9zIHByb2dyYW1hcyBlbiBzdXMgY2FuYWxlc1xyXG4gICAgICAgICQuZWFjaChjb21wbGV0bywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICB2YXIgY2FuYWwgPSB2LmNhbmFsLm5vbWJyZTtcclxuICAgICAgICAgICAgdmFyIGRpdkNhbmFsID0gJCgnIycgKyBjYW5hbCk7XHJcblxyXG4gICAgICAgICAgICAkLmVhY2godi5wcm9ncmFtYXMsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBwaW50YVBhcnJpbGxhUHJvZ3JhbWEoaSwgdik7XHJcbiAgICAgICAgICAgICAgICBkaXZDYW5hbC5hcHBlbmQoZGl2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVjb3JyZSBlbCBqc29uIGRlIHByb2dyYW1hcyBkZSBkZSB1biBjYW5hbCB5IGxvcyBwaW50YSBlbiAnY29udFByb2dyYW1hcydcclxuICAgICAqIEBwYXJhbSAge2ludH0gcUNhbmFsIElkZW50aWZpY2Fkb3IgZGUgcXXDqSBjYW5hbCBwaW50YW1vc1xyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YVBhcnJpbGxhUHJvZ3JhbWEoaSwgdikge1xyXG5cclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZVByb2dyYW1hID0gJycgK1xyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cIml0ZW1Qcm9ncmFtYVwiIGlkPVwie3tpZF9wcm9ncmFtYX19XCIgZGF0YS11cmw9XCJ7e3VybF9maWNoYX19XCInICtcclxuICAgICAgICAgICAgJ3N0eWxlPVwid2lkdGg6e3tkdXJ9fTsgbGVmdDp7e2RpZmZIb3JhRGlhfX07IHVzZXItc2VsZWN0ZWQ6bm9uZTtcIj4nICtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpdGVtUHJvZ3JhbWFJbm5lciB7e2NsYXNlfX1cIj4nICtcclxuICAgICAgICAgICAgJzxhIGhyZWY9XCJodHRwOi8vZWxtdW5kby5lcy90ZWxldmlzaW9uL3Byb2dyYW1hL3t7aWRfcHJvZ3JhbWF9fVwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPnt7bm9tYnJlfX08L2E+JyArXHJcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNhdGVnb3JpYVwiPnt7Y2F0ZWdvcmlhfX08L3NwYW4+JyArXHJcbiAgICAgICAgICAgICc8aDQ+e3tub21icmV9fTwvaDQ+JyArXHJcbiAgICAgICAgICAgICd7e2lmIGVwaXNvZGlvfX08cD57e2VwaXNvZGlvfX08L3A+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJkdXJhY2lvblwiPnt7ZHVyYWNpb259fTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiZmVjaGFcIj57e2luZm9Ib3JhRHVyYWNpb259fTwvc3Bhbj4nICtcclxuICAgICAgICAgICAgJ3t7aWYgZmF2fX08c3BhbiBjbGFzcz1cImZhdm9yaXRvXCI+PGkgY2xhc3M9XCJmYSBmYS1zdGFyXCI+PC9pPjwvc3Bhbj57ey9pZn19JyArXHJcbiAgICAgICAgICAgICd7e2lmIGFsZX19PHNwYW4gY2xhc3M9XCJhbGVydGFcIj48aSBjbGFzcz1cImZhIGZhLWNsb2NrLW9cIj48L2k+PC9zcGFuPnt7L2lmfX0nICtcclxuICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAne3tpZiBzYWxlQ3J1en19PGRpdiBjbGFzcz1cIm1hc2NhcmFcIj48aSBjbGFzcz1cImZhIGZhLXBsdXNcIj48L2k+PC9kaXY+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgLy8gU2VsZWNjacOzbiBkZSBjYXRlZ29yw61hXHJcbiAgICAgICAgLy8gbUNpbmUgXCIxMDRcIiAvIG1Db25jdXJzb3MgXCJJTlRfMlwiIC8gbUNvcmF6b24gLyBtRGVwb3J0ZXMgXCI5MFwiIC9cclxuICAgICAgICAvLyBtSW5mb3JtYXRpdm9zIFwiMjBcIiAvIG1NYWdhemluZXMgXCIzMVwiIC8gbVNlcmllcyBcIjFcIlxyXG4gICAgICAgIHZhciBjYXQgPSB2LmNhdGVnb3JpYSxcclxuICAgICAgICAgICAgY2F0ZWdvcmlhLFxyXG4gICAgICAgICAgICBjbGFzZTtcclxuICAgICAgICBzd2l0Y2ggKGNhdCkge1xyXG4gICAgICAgICAgICBjYXNlIFwiMVwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdFNlcmllc1wiO1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhID0gXCJzZXJpZXNcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiMTA0XCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0Q2luZVwiO1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhID0gXCJjaW5lXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjMxXCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0TWFnYXppbmVzXCI7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSBcIm1hZ2F6aW5lc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIyMFwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdEluZm9ybWF0aXZvc1wiO1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhID0gXCJpbmZvcm1hdGl2b3NcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiOTBcIjpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gXCJjYXREZXBvcnRlc1wiO1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhID0gXCJkZXBvcnRlc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJJTlRfMlwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdENvbmN1cnNvc1wiO1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhID0gXCJjb25jdXJzb3NcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiSU5UXzFcIjpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gXCJjYXRDb3Jhem9uXCI7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSBcImNvcmF6w7NuXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEVsIGFuY2hvIHZhIGEgZGVwZW5kZXIgZGUgbGEgZHVyYWNpw7NuIGRlbCBwcm9ncmFtYVxyXG4gICAgICAgIHZhciBkdXJhY2lvbiA9IHYuZHVyYWNpb24gKyAnIG1pbnMuJztcclxuICAgICAgICB2YXIgZHVyID0gTWF0aC5jZWlsKHBpeGVsc1Bvck1pbnV0byAqIHYuZHVyYWNpb24pLFxyXG4gICAgICAgICAgICBob3JhX2luaWNpbyA9IG5ldyBEYXRlKHYuaG9yYV9pbmljaW8pLFxyXG4gICAgICAgICAgICBob3JhX2ZpbmFsID0gbmV3IERhdGUodi5ob3JhX2Zpbik7XHJcbiAgICAgICAgdmFyIGRpZmZIb3JhRGlhID0gaG9yYV9pbmljaW8gLSBkaWFBY3R1YWw7XHJcbiAgICAgICAgZGlmZkhvcmFEaWEgPSBNYXRoLmZsb29yKChNYXRoLmZsb29yKGRpZmZIb3JhRGlhIC8gMTAwMCkgLyA2MCkgKiBwaXhlbHNQb3JNaW51dG8pO1xyXG5cclxuICAgICAgICB2YXIgaG9yYV9pID0gaG9yYV9pbmljaW8uZ2V0SG91cnMoKTtcclxuICAgICAgICBob3JhX2kgPSBsZWZ0UGFkKGhvcmFfaSwgMik7XHJcbiAgICAgICAgdmFyIG1pbnNfaSA9IGhvcmFfaW5pY2lvLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBtaW5zX2kgPSBsZWZ0UGFkKG1pbnNfaSwgMik7XHJcblxyXG4gICAgICAgIHZhciBob3JhX2YgPSBob3JhX2ZpbmFsLmdldEhvdXJzKCk7XHJcbiAgICAgICAgaG9yYV9mID0gbGVmdFBhZChob3JhX2YsIDIpO1xyXG4gICAgICAgIHZhciBtaW5zX2YgPSBob3JhX2ZpbmFsLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBtaW5zX2YgPSBsZWZ0UGFkKG1pbnNfZiwgMik7XHJcblxyXG4gICAgICAgIHZhciBpbmZvSG9yYUR1cmFjaW9uID0gJycgKyBob3JhX2kgKyAnOicgKyBtaW5zX2kgKyAnIC0gJyArIGhvcmFfZiArICc6JyArIG1pbnNfZjtcclxuXHJcbiAgICAgICAgLy8gVE9ETyBSYW5kb20gcGFyYSBwb2RlciB2ZXIgcHJvZ3JhbWFzIGZhdm9yaXRvcyB5IGFsZXJ0YXMgZGUgcHJvZ3JhbWFzLiBFTElNSU5BUlxyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpICogMTAwIDwgNSkge1xyXG4gICAgICAgICAgICB2YXIgZmF2ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgKiAxMDAgPCA1KSB7XHJcbiAgICAgICAgICAgIHZhciBhbGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVE9ETyBTaSBlbCBwcm9ncmFtYSBlcyBtZW5vciBkZSAxNSBtaW51dG9zLCBhcGFyZWNlIHVuYSBjcnV6XHJcbiAgICAgICAgaWYgKHYuZHVyYWNpb24gPCAxNSkge1xyXG4gICAgICAgICAgICB2YXIgc2FsZUNydXogPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgY2xhc2U6IGNsYXNlLFxyXG4gICAgICAgICAgICBkdXI6IGR1ciArICdweCcsXHJcbiAgICAgICAgICAgIGRpZmZIb3JhRGlhOiBkaWZmSG9yYURpYSArICdweCcsXHJcbiAgICAgICAgICAgIGlkX3Byb2dyYW1hOiB2LmlkX3Byb2dyYW1hLFxyXG4gICAgICAgICAgICB1cmxfZmljaGE6IHYudXJsX2ZpY2hhLFxyXG4gICAgICAgICAgICBpbmZvSG9yYUR1cmFjaW9uOiBpbmZvSG9yYUR1cmFjaW9uLFxyXG4gICAgICAgICAgICBkdXJhY2lvbjogZHVyYWNpb24sXHJcbiAgICAgICAgICAgIGNhdGVnb3JpYTogY2F0ZWdvcmlhLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgIG5vbWJyZTogdi5ub21icmUsXHJcbiAgICAgICAgICAgIGVwaXNvZGlvOiB2LmVwaXNvZGlvLFxyXG4gICAgICAgICAgICBmYXY6IGZhdiB8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgYWxlOiBhbGUgfCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHNhbGVDcnV6OiBzYWxlQ3J1eiB8IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciByZXN1bHRhZG8gPSBNYXJrLnVwKHRlbXBsYXRlUHJvZ3JhbWEsIGNvbnRleHQpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRhZG87XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgbG9zIGljb25vcyBkZSBjYW5hbGVzIGVuIGVsIGNvbXBvbmVudGUgJ2NvbnRDYW5hbGVzJ1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUNhbmFsZXMobGlzdGFDYW5hbGVzKSB7XHJcblxyXG4gICAgICAgIHZhciBsaXN0YSA9IGxpc3RhQ2FuYWxlcyB8fCBjYW5hbGVzVXN1YXJpbztcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwiaXRlbUNhbmFsXCI+PGltZyBzcmM9XCJodHRwOi8vZXN0YXRpY29zLmVsbXVuZG8uZXN7e2ljb25vfX1cIiAvPjwvZGl2Pic7XHJcblxyXG4gICAgICAgICQuZWFjaChsaXN0YSwgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBjb250ZXh0Lmljb25vID0gYXJyYXlDYW5hbGVzW2ldLmNhbmFsLmljb25vO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICRjb250Q2FuYWxlcy5hcHBlbmQocmVzdWx0YWRvKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1bmEgYmFycmEgaG9yaXpvbmFsIGNvbiBsYSBtYXJjYSBkZSBob3JhcywgcXVlIHNlIGRlc3BsYXphIGNvbiBlbCB2aWV3UG9ydFxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUhvcmFzUGFycmlsbGEoKSB7XHJcbiAgICAgICAgdmFyIGRpYSA9IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIGksIGo7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgY29udGV4dC5kaWFzID0gW107XHJcbiAgICAgICAgY29udGV4dC5ob3JhcyA9IFtdO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9ICcnICtcclxuICAgICAgICAgICAgJ3t7ZGlhc319PGRpdiBjbGFzcz1cIml0ZW1EaWFcIiBzdHlsZT1cImxlZnQ6e3twb3N9fXB4XCI+e3tkaWF9fTwvZGl2Pnt7L2RpYXN9fScgK1xyXG4gICAgICAgICAgICAne3tob3Jhc319PGRpdiBjbGFzcz1cIml0ZW1Ib3Jhc1wiIHN0eWxlPVwibGVmdDp7e3Bvc319cHg7XCI+e3t0ZXh0b319PC9kaXY+e3svaG9yYXN9fSc7XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1bmEgYmFycmEgcGFyYSBsb3MgZMOtYXMgKDQpIGRlIGxvcyBxdWUgZGlzcG9uZW1vcyBkZSBkYXRvc1xyXG4gICAgICAgIGZvciAoaiA9IDA7IGogPD0gMzsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICBkaWEuc2V0VGltZShkaWFBY3R1YWwuZ2V0VGltZSgpICsgKGogKiA4NjQwMDAwMCkpO1xyXG4gICAgICAgICAgICB2YXIgZGlhVGV4dCA9IGRpYS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywge1xyXG4gICAgICAgICAgICAgICAgd2Vla2RheTogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgICAgLy95ZWFyOiAnbnVtZXJpYycsXHJcbiAgICAgICAgICAgICAgICBtb250aDogJ2xvbmcnLFxyXG4gICAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYydcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbERpYSA9IChqICogcGl4ZWxzUG9ySG9yYSAqIDI0KTtcclxuICAgICAgICAgICAgY29udGV4dC5kaWFzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgJ2RpYSc6IGRpYVRleHQsXHJcbiAgICAgICAgICAgICAgICAncG9zJzogbERpYVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXJyYXlEaWFzLnB1c2goW2RpYVRleHQsIGxEaWFdKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAyNDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGxlZnRQYWQoaSwgMikgKyBcIjowMFwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIGwgPSAoaiAqIHBpeGVsc1BvckhvcmEgKiAyNCkgKyBpICogcGl4ZWxzUG9ySG9yYTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmhvcmFzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICd0ZXh0byc6IHQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3Bvcyc6IGxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgJGJhcnJhSG9yYXMuYXBwZW5kKHJlc3VsdGFkbyk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBpbnRhIHVuIHNlbGVjdG9yIGRlIGFjY2VzbyBkaXJlY3RvIGEgbG9zIGTDrWFzIGluY2x1w61kb3MgZW4gbGEgcHJvZ3JhbWFjacOzblxyXG4gICAgICogRGVwZW5kZW1vcyBkZSBhcnJheURpYXMgcXVlIGhhIGdlbmVyYWRvIGRhdG9zIGVuIHBpbnRhSG9yYXNQYXJyaWxsYVxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YVNlbGVjdG9yRGlhcygpIHtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGxpIGNsYXNzPVwiaXRlbURpYVwiIGRhdGEtcHg9XCJ7e3B4fX1cIj48YSBocmVmPVwiamF2YXNjcmlwdDovL1wiPnt7ZGlhVGV4dH19PC9hPjwvbGk+JztcclxuXHJcbiAgICAgICAgYXJyYXlEaWFzLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkaWFUZXh0ID0gaXRlbVswXTtcclxuICAgICAgICAgICAgdmFyIHB4ID0gaXRlbVsxXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICBkaWFUZXh0OiBkaWFUZXh0LFxyXG4gICAgICAgICAgICAgICAgcHg6IHB4XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICRzZWxlY3RvckRpYXMuZmluZCgndWwnKS5hcHBlbmQocmVzdWx0YWRvKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1bmEgZnJhbmphIHF1ZSBtYXJjYSBsYSBob3JhIGFjdHVhbCBlbiBlbCBjb21wb25lbnRlIFBhcnJpbGxhXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhSG9yYUFjdHVhbCgpIHtcclxuXHJcbiAgICAgICAgdmFyIGhvcmFzID0gaG9yYUFjdHVhbC5oLFxyXG4gICAgICAgICAgICBtaW51dG9zID0gaG9yYUFjdHVhbC5tO1xyXG5cclxuICAgICAgICB2YXIgZGl2SG9yYSA9ICQoJy5ob3JhQWN0dWFsJylcclxuICAgICAgICAgICAgLmhpZGUoKVxyXG4gICAgICAgICAgICAuZmluZCgncCcpLnRleHQoaG9yYXMgKyBcIjpcIiArIG1pbnV0b3MpLmVuZCgpXHJcbiAgICAgICAgICAgIC5zaG93KCk7XHJcblxyXG4gICAgICAgIHZhciBwb3NYID0gcGFyc2VJbnQoaG9yYXMpICogcGl4ZWxzUG9ySG9yYSArIHBhcnNlSW50KG1pbnV0b3MpICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgIGRpdkhvcmEuY3NzKHtcclxuICAgICAgICAgICAgJ2xlZnQnOiBwb3NYXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2l0w7phIGxhIFBhcnJpbGxhIGVuIGVsIG1vbWVudG8gYWN0dWFsLCBmZWNoYSB5IGhvcmFcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2l0dWFQYXJyaWxsYUFob3JhKCkge1xyXG4gICAgICAgIHZhciBtaXRhZEFuY2hvVmlld3BvcnQgPSAkdmlld1BvcnQud2lkdGgoKSAqIC41O1xyXG4gICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkaG9yYUFjdHVhbC5jc3MoJ2xlZnQnKSk7XHJcbiAgICAgICAgbXVldmVBID0gcGFyc2VJbnQobWl0YWRBbmNob1ZpZXdwb3J0IC0gbXVldmVBKTtcclxuXHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAnbGVmdCc6IG11ZXZlQSArICdweCdcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICRiYXJyYUhvcmFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgJ2xlZnQnOiBtdWV2ZUEgKyAncHgnXHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICB2YXIgaG9yYUxlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLmgpICogcGl4ZWxzUG9ySG9yYTtcclxuICAgICAgICB2YXIgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgIHZhciBwb3NYID0gaG9yYUxlZnQgKyBtaW51dG9zTGVmdCArIG11ZXZlQTtcclxuICAgICAgICAkaG9yYUFjdHVhbC5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9idGVuZHLDrWFtb3MgZGF0b3MgZGUgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZSB1c3VhcmlvIHZhbGlkYWRvIChzaSBodWJpZXJhKVxyXG4gICAgICogQHJldHVybiB7anNvbn0gT2JqZXRvIGpzb24gY29uIHRvZG9zIGxvcyBwcm9ncmFtYXMgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZWwgdXN1YXJpb1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYXJnYUluZm9Vc3VhcmlvKCkge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNvcmEgbG9zIHByb2dyYW1hcyBlbiBQYXJyaWxsYSBjb24gbGFzIGFsZXJ0YXMgeSBmYXZvcml0b3MgcmVjb3JyaWVuZG8gZWwganNvbiBkZSB1c3VhcmlvXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFQcm9nc1VzdWFyaW8oKSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzb2NpYSB0b2RvcyBsb3MgZXZlbnQgbGlzdGVuZXJzIGEgbG9zIGRpZmVyZW50ZXMgZWxlbWVudG9zIGRlIHVpXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbGFuemFIYW5kbGVycygpIHtcclxuXHJcbiAgICAgICAgdmFyIGFsdG9WaWV3cG9ydCA9ICR2aWV3UG9ydC5oZWlnaHQoKSxcclxuICAgICAgICAgICAgYW5jaG9WaWV3cG9ydCA9ICR2aWV3UG9ydC53aWR0aCgpLFxyXG4gICAgICAgICAgICBhbHRvQ29udFByb2dyYW1hcyA9ICRjb250UHJvZ3JhbWFzLmhlaWdodCgpLFxyXG4gICAgICAgICAgICBhbmNob0NvbnRQcm9ncmFtYXMgPSAkY29udFByb2dyYW1hcy5vZmZzZXRXaWR0aCxcclxuICAgICAgICAgICAgYW5jaG9CYXJyYUNhbmFsZXMgPSAkY29udENhbmFsZXMud2lkdGgoKTtcclxuICAgICAgICB2YXIgaXNEcmFnID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHNlSGFNb3ZpZG8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIHByaW1lcm9zRGl2ID0gJCgnLmNvbnRQcm9ncmFtYXMgPiBkaXYgPiBkaXY6Zmlyc3QtY2hpbGQnKSxcclxuICAgICAgICAgICAgb2Zmc2V0c0l6ZGEgPSBbXTtcclxuICAgICAgICAkLmVhY2gocHJpbWVyb3NEaXYsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgb2Zmc2V0c0l6ZGEucHVzaCh0aGlzLm9mZnNldExlZnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBtaW5JemRhID0gb2Zmc2V0c0l6ZGEubWluKCk7XHJcblxyXG4gICAgICAgIHZhciB1bHRpbW9zRGl2ID0gJCgnLmNvbnRQcm9ncmFtYXMgPiBkaXYgPiBkaXY6bGFzdC1jaGlsZCcpLFxyXG4gICAgICAgICAgICBvZmZzZXRzRHJjaCA9IFtdO1xyXG4gICAgICAgICQuZWFjaCh1bHRpbW9zRGl2LCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIG9mZnNldHNEcmNoLnB1c2godGhpcy5vZmZzZXRMZWZ0ICsgJCh0aGlzKS53aWR0aCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbWF4RHJjaCA9IG9mZnNldHNEcmNoLm1heCgpO1xyXG5cclxuICAgICAgICAvLyBOb3MgY2FyZ2Ftb3MgZWwgcHJlbG9hZGVyXHJcbiAgICAgICAgJHZpZXdQb3J0LmZpbmQoJy5wcmVsb2FkLXdyYXBwZXInKS5yZW1vdmUoKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2Vkb3duL3RvdWNoc3RhcnRcclxuICAgICAgICAkY29udFByb2dyYW1hcy5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCBkcmFnT24pO1xyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2V1cC90b3VjaGVuZFxyXG4gICAgICAgIC8vICRjb250UHJvZ3JhbWFzLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgZHJhZ09mZik7XHJcbiAgICAgICAgLy8gR2VuZXJhbW9zIHVuIGhhbmRsZXIgcGFyYSBtb3VzZW1vdmUvdG91Y2htb3ZlXHJcbiAgICAgICAgLy8gJGNvbnRQcm9ncmFtYXMub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCBkcmFnTW92ZSk7XHJcblxyXG4gICAgICAgIC8vIFNhY2EgcGFuZWwgY29uIGluZm9ybWFjacOzbiBhamF4IGRlIHByb2dyYW1hXHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMub24oJ2NsaWNrJywgY2xpY2tQcm9ncmFtYSk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZXIgcGFyYSBsYSBzZWxlY2Npw7NuIGRlIHVuYSBob3JhXHJcbiAgICAgICAgJGJhcnJhSG9yYXMub24oJ2NsaWNrJywgJy5pdGVtSG9yYXMnLCBjbGlja0hvcmEpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgZmlsdHJhZG8gcG9yIGNhdGVnb3LDrWFzXHJcbiAgICAgICAgJHNlbGVjdG9yQ2F0ZWdvcmlhcy5vbignY2xpY2snLCAnbGknLCBtYXJjYUNhdGVnb3JpYSk7XHJcbiAgICAgICAgbWFyY2FyQ2F0ZWdvcmlhc1NlbGVjY2lvbmFkYXMoKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIHNlbGVjY2nDs24gZGUgZMOtYVxyXG4gICAgICAgICRzZWxlY3RvckRpYXMub24oJ2NsaWNrJywgJ2xpJywgY2xpY2tEaWEpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgYm90b25lcyBhcnJpYmEvYWJham8gZGUgY2FuYWxlc1xyXG4gICAgICAgICRib3RvbmVzQ2FuYWxlcy5vbignY2xpY2snLCAnLmJ0bicsIGNsaWNrTmF2Q2FuYWxlcyk7XHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIGJvdG9uZXMgaXpkYS9kcmNoYSBkZWwgdmlld3BvcnRcclxuICAgICAgICAkaWNvbm9zSG9yYXMub24oJ2NsaWNrJywgJy5idG4nLCBjbGlja05hdkhvcmFzKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhZ09uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUb3AgPSB0aGlzLm9mZnNldFRvcDtcclxuICAgICAgICAgICAgdGhpcy5zdGFydExlZnQgPSB0aGlzLm9mZnNldExlZnQ7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbE1vdXNlWCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbE1vdXNlWSA9IGV2ZW50LmNsaWVudFk7XHJcbiAgICAgICAgICAgIGlzRHJhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHNlSGFNb3ZpZG8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2V1cC90b3VjaGVuZFxyXG4gICAgICAgICAgICAkY29udFByb2dyYW1hcy5vbignbW91c2V1cCB0b3VjaGVuZCcsIGRyYWdPZmYpO1xyXG4gICAgICAgICAgICAvLyBHZW5lcmFtb3MgdW4gaGFuZGxlciBwYXJhIG1vdXNlbW92ZS90b3VjaG1vdmVcclxuICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCBkcmFnTW92ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhZ09mZihldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnKSB7XHJcbiAgICAgICAgICAgICAgICBpc0RyYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLm9mZignbW91c2V1cCB0b3VjaGVuZCcsIGRyYWdPZmYpO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMub2ZmKCdtb3VzZW1vdmUgdG91Y2htb3ZlJywgZHJhZ01vdmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhZ01vdmUoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGlzRHJhZykge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkWCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLmluaXRpYWxNb3VzZVg7XHJcbiAgICAgICAgICAgICAgICB2YXIgZFkgPSBldmVudC5jbGllbnRZIC0gdGhpcy5pbml0aWFsTW91c2VZO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1hcmNhbW9zIGNvbiB1biBmbGFnIHNpIGhhIGhhYmlkbyBkaWZlcmVuY2lhIGRlIG3DoXMgZGUgMyBww614ZWxlc1xyXG4gICAgICAgICAgICAgICAgc2VIYU1vdmlkbyA9IE1hdGguYWJzKGRYKSA+IDIgfHwgTWF0aC5hYnMoZFkpID4gMjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbnRvcCA9IHRoaXMuc3RhcnRUb3AgKyBkWTtcclxuICAgICAgICAgICAgICAgIHZhciBubGVmdCA9IHRoaXMuc3RhcnRMZWZ0ICsgZFg7XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIHRvcCAoYWx0byAkYmFycmFIb3JhcylcclxuICAgICAgICAgICAgICAgIGlmIChudG9wID4gYWx0b0JhcnJhSG9yYXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBudG9wID0gYWx0b0JhcnJhSG9yYXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIGJvdHRvbSAoYWx0b1ZpZXdwb3J0IC0gYWx0b1Byb2dyYW1hcylcclxuICAgICAgICAgICAgICAgIGlmIChudG9wIDwgKGFsdG9WaWV3cG9ydCAtIGFsdG9Db250UHJvZ3JhbWFzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG50b3AgPSAoYWx0b1ZpZXdwb3J0IC0gYWx0b0NvbnRQcm9ncmFtYXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTMOtbWl0ZSByaWdodCAoNzBweCBhbmNobyAkY29udENhbmFsZXMpXHJcbiAgICAgICAgICAgICAgICBpZiAobmxlZnQgPiBhbmNob0JhcnJhQ2FuYWxlcyArIE1hdGguYWJzKG1pbkl6ZGEpICsgNTApIHtcclxuICAgICAgICAgICAgICAgICAgICBubGVmdCA9IGFuY2hvQmFycmFDYW5hbGVzICsgTWF0aC5hYnMobWluSXpkYSkgKyA1MDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEzDrW1pdGUgbGVmdCAoYW5jaG9WaWV3cG9ydCBtZW5vcyBlbCBhbmNobyB0b3RhbCBkZSBwcm9ncmFtYXMpXHJcbiAgICAgICAgICAgICAgICBpZiAobmxlZnQgPCBhbmNob1ZpZXdwb3J0IC0gNTAgLSBNYXRoLmFicyhtYXhEcmNoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5sZWZ0ID0gYW5jaG9WaWV3cG9ydCAtIDUwIC0gTWF0aC5hYnMobWF4RHJjaCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiBudG9wICsgJ3B4JyxcclxuICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IG5sZWZ0ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkY29udENhbmFsZXMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAndG9wJzogbnRvcCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGJhcnJhSG9yYXMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IG5sZWZ0ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaG9yYUxlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLmgpICogcGl4ZWxzUG9ySG9yYSxcclxuICAgICAgICAgICAgICAgICAgICBtaW51dG9zTGVmdCA9IHBhcnNlSW50KGhvcmFBY3R1YWwubSkgKiBwaXhlbHNQb3JNaW51dG8sXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWCA9IGhvcmFMZWZ0ICsgbWludXRvc0xlZnQgKyBubGVmdDtcclxuICAgICAgICAgICAgICAgICRob3JhQWN0dWFsLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBwb3NYICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYW5kbGVyIGRlbCBjbGljayBlbiB1biBpdGVtSG9yYXNcclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgT2JqZXRvIGV2ZW50byBjb24gdG9kYSBsYSBpbmZvIGRlbCBjbGlja1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja0hvcmEoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIG11ZXZlQSA9IHBhcnNlSW50KCQodGhpcykuY3NzKCdsZWZ0JykpO1xyXG4gICAgICAgICAgICBtdWV2ZUEgPSBwYXJzZUludCgoYW5jaG9WaWV3cG9ydCAqIC41KSAtIG11ZXZlQSk7XHJcbiAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKG11ZXZlQSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBkZWwgY2xpY2sgZW4gdW4gZMOtYVxyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBPYmpldG8gZXZlbnQgY29uIHRvZGEgbGEgaW5mbyBkZWwgY2xpY2tcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tEaWEoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIG11ZXZlQSA9IHBhcnNlSW50KCQodGhpcykuZGF0YSgncHgnKSkgKiAtMTtcclxuICAgICAgICAgICAgbXVldmVQcm9ncmFtYXNBUHVudG8obXVldmVBICsgYW5jaG9CYXJyYUNhbmFsZXMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhbmRsZXIgZGVsIGNsaWNrIGVuIHVuIGl0ZW1Qcm9ncmFtYVxyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBPYmpldG8gZXZlbnRvIGNvbiB0b2RhIGxhIGluZm8gZGVsIGNsaWNrXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrUHJvZ3JhbWEoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKCFzZUhhTW92aWRvKSB7XHJcbiAgICAgICAgICAgICAgICBpc0RyYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKSxcclxuICAgICAgICAgICAgICAgICAgICAkZWxlbVBhZHJlID0gJChlbGVtKS5pcygnLml0ZW1Qcm9ncmFtYScpID8gJChlbGVtKSA6ICQoZWxlbSkuY2xvc2VzdCgnLml0ZW1Qcm9ncmFtYScpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwcm9nVXJsID0gJGVsZW1QYWRyZS5maW5kKCdhJykuYXR0cignaHJlZicpLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2dJZCA9ICRlbGVtUGFkcmUuYXR0cignaWQnKTtcclxuICAgICAgICAgICAgICAgIGNhcmdhRmljaGFQcm9ncmFtYShwcm9nSWQsIHByb2dVcmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkZWxlbVBhZHJlLmNzcygnbGVmdCcpKSArICRlbGVtUGFkcmUud2lkdGgoKSAqIC41O1xyXG4gICAgICAgICAgICAgICAgbXVldmVBID0gcGFyc2VJbnQoKGFuY2hvVmlld3BvcnQgKiAuNSkgLSBtdWV2ZUEpO1xyXG4gICAgICAgICAgICAgICAgbXVldmVQcm9ncmFtYXNBUHVudG8obXVldmVBKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcmdhIHBvciBhamF4IGxhIGluZm9ybWFjacOzbiBiw6FzaWNhIGRlIGxhIGZpY2hhIGRlIHByb2dyYW1hXHJcbiAgICAgICAgICogQHBhcmFtICB7aW50fSBwcm9nSWQgIElkIGRlbCBwcm9ncmFtYVxyXG4gICAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gcHJvZ1VybCBVcmwgY29tcGxldGEgZGUgbGEgcnV0YSBwYXJhIGNhcmdhciBsYSBmaWNoYVxyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjYXJnYUZpY2hhUHJvZ3JhbWEocHJvZ0lkLCBwcm9nVXJsKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8gUHJvYmFyIGVuIGVudG9ybm8gZGUgcHJ1ZWJhcyBlbG11bmRvLmVzXHJcbiAgICAgICAgICAgIC8vcHJvZ1VybCA9ICdodHRwOi8vd3d3LmVsbXVuZG8uZXMnICsgcHJvZ1VybDtcclxuICAgICAgICAgICAgY2llcnJhRmljaGEoKTtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiZmljaGFQcm9ncmFtYS5odG1sXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3Byb2dJZCc6IHByb2dJZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGh0bWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLmNvbnRlbmlkbycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGh0bWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGw6ICd0b3AnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudFBhZ2VTY3JvbGxpbmc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCwgJ3N3aW5nJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hLmZpbmQoJy5jaWVycmEnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpZXJyYUZpY2hhKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNpZXJyYUZpY2hhKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KCRmaWNoYVByb2dyYW1hLmNzcygncmlnaHQnKSkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYS5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtcGl4ZWxzUG9ySG9yYVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCwgJ3N3aW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1hcmNhIGNvbW8gYWN0aXZhcyBsYXMgY2F0ZWdvcsOtYXMgZGUgcHJvZ3JhbWEgc2VsZWNjaW9uYWRhc1xyXG4gICAgICAgICAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBPYmpldG8gZGUgZXZlbnRvIGNvbXBsZXRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIG1hcmNhQ2F0ZWdvcmlhKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzZSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzBdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRjb250UHJvZ3JhbWFzLmhhc0NsYXNzKGNsYXNlKSkge1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMucmVtb3ZlQ2xhc3MoY2xhc2UpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5hZGRDbGFzcyhjbGFzZSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3Rpdm8nKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1hcmNhIHRvZGFzIGxhcyBjYXRlZ29yw61hcyBzZWxlY2Npb25hZGFzIHBvciBkZWZlY3RvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIG1hcmNhckNhdGVnb3JpYXNTZWxlY2Npb25hZGFzKCkge1xyXG4gICAgICAgICAgICBpZiAoY2F0ZWdvcmlhc1VzdWFyaW8ubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgICAgICAgICQuZWFjaChjYXRlZ29yaWFzVXN1YXJpbywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICAgICAgICAgIHYrKztcclxuICAgICAgICAgICAgICAgICAgICAkc2VsZWN0b3JDYXRlZ29yaWFzLmZpbmQoJ2xpOm50aC1jaGlsZCgnICsgdiArICcpJykudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTXVldmUgZWwgY29udFByb2dyYW1hcyBhIGxhIHBvc2ljacOzbiBkYWRhXHJcbiAgICAgICAgICogQHBhcmFtICB7aW50fSBjb29yZFggQ29vcmRlbmFkYSBsZWZ0XHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKGNvb3JkWCkge1xyXG4gICAgICAgICAgICB2YXIgbmxlZnQgPSBjb29yZFggfHwgMDtcclxuICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBubGVmdCArICdweCdcclxuICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgJGJhcnJhSG9yYXMuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBubGVmdCArICdweCdcclxuICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgdmFyIGhvcmFMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5oKSAqIHBpeGVsc1BvckhvcmE7XHJcbiAgICAgICAgICAgIHZhciBtaW51dG9zTGVmdCA9IHBhcnNlSW50KGhvcmFBY3R1YWwubSkgKiBwaXhlbHNQb3JNaW51dG87XHJcbiAgICAgICAgICAgIHZhciBwb3NYID0gaG9yYUxlZnQgKyBtaW51dG9zTGVmdCArIG5sZWZ0O1xyXG4gICAgICAgICAgICAkaG9yYUFjdHVhbC5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAnbGVmdCc6IHBvc1ggKyAncHgnXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVzcGxhemEgbGEgdmlzdGEgZGUgdmlld3BvcnQgYXJyaWJhL2FiYWpvXHJcbiAgICAgICAgICogQHBhcmFtICB7ZXZlbnR9IGV2ZW50IE9iamV0byBjb24gdG9kYSBsYSBpbmZvcm1hY2nDs24gZGVsIGV2ZW50b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja05hdkNhbmFsZXMoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNlID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMV07XHJcbiAgICAgICAgICAgIHZhciBwb3NZUHJvZ3JhbWFzID0gJGNvbnRQcm9ncmFtYXMuY3NzKCd0b3AnKS5zcGxpdCgncHgnKVswXTtcclxuICAgICAgICAgICAgdmFyIHBvc1lDYW5hbGVzID0gJGNvbnRDYW5hbGVzLmNzcygndG9wJykuc3BsaXQoJ3B4JylbMF07XHJcbiAgICAgICAgICAgIHZhciBudW1DYW5hbGVzID0gJGNvbnRDYW5hbGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgc3dpdGNoIChjbGFzZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYnRuQXJyaWJhJzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlbW9zIGNvbnRQcm9ncmFtYXMgeSBjb250Q2FuYWxlc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3NZQ2FuYWxlcyAtIGFsdG9DYW5hbCA+IGFsdG9CYXJyYUhvcmFzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250Q2FuYWxlcy5jc3MoJ3RvcCcsIHBvc1lDYW5hbGVzIC0gYWx0b0NhbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuY3NzKCd0b3AnLCBwb3NZUHJvZ3JhbWFzIC0gYWx0b0NhbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udENhbmFsZXMuY3NzKCd0b3AnLCBhbHRvQmFycmFIb3JhcyArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5jc3MoJ3RvcCcsIGFsdG9CYXJyYUhvcmFzICsgJ3B4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYnRuQWJham8nOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1vdmVtb3MgY29udFByb2dyYW1hcyB5IGNvbnRDYW5hbGVzXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heCA9IHBvc1lDYW5hbGVzIC0gbnVtQ2FuYWxlcyAqIGFsdG9DYW5hbDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF4ID4gcG9zWUNhbmFsZXMgKyBhbHRvQ2FuYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRDYW5hbGVzLmNzcygndG9wJywgcG9zWUNhbmFsZXMgKyBhbHRvQ2FuYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5jc3MoJ3RvcCcsIHBvc1lQcm9ncmFtYXMgKyBhbHRvQ2FuYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250Q2FuYWxlcy5jc3MoJ3RvcCcsIG1heCArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5jc3MoJ3RvcCcsIG1heCArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlc3BsYXphIGxhIHZpc3RhIGRlbCB2aWV3cG9ydCBhIGxvcyBsYWRvc1xyXG4gICAgICAgICAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBPYmpldG8gY29uIHRvZGEgbGEgaW5mb3JtYWNpw7NuIGRlbCBldmVudG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tOYXZIb3JhcyhldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY2xhc2UgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVsxXTtcclxuICAgICAgICAgICAgdmFyIHBvc1ggPSBwYXJzZUludCgkY29udFByb2dyYW1hcy5jc3MoJ2xlZnQnKSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwb3NYKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoY2xhc2UpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2J0bkl6ZGEnOlxyXG4gICAgICAgICAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKE1hdGguZmxvb3IocGFyc2VJbnQocG9zWCArIHBpeGVsc1BvckhvcmEpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdidG5EcmNoYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgbXVldmVQcm9ncmFtYXNBUHVudG8oTWF0aC5mbG9vcihwYXJzZUludChwb3NYIC0gcGl4ZWxzUG9ySG9yYSkpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSBlbCB0b3RhbCBkZSBjYW5hbGVzIGEgbG9zIHF1ZSBzZSBwdWVkZSBzdXNjcmliaXIgeSBsYXMgbGV0cmFzIGNvcnJlc3BvbmRpZW50ZXNcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFMaXN0YWRvQ2FuYWxlc1N1c2NyaXBjaW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgdWxMZXRyYXMgPSAkKCc8dWwgY2xhc3M9XCJsaXN0YUNhbmFsZXMgY2xlYXJmaXhcIj4nKSxcclxuICAgICAgICAgICAgZmljaGVybyA9ICdkYXRvcy9saXN0YWRvY2FuYWxlcy5qc29uJztcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHRMZXRyYXMgPSB7fSxcclxuICAgICAgICAgICAgdGVtcGxhdGVMZXRyYXMgPSAne3tsZXRyYXN9fTxsaSBjbGFzcz1cIml0ZW1MZXRyYVwiIGRhdGEtbGV0cmE9XCJ7ey59fVwiPnt7Ln19PC9saT57ey9sZXRyYXN9fSc7XHJcblxyXG4gICAgICAgIGNvbnRleHRMZXRyYXMubGV0cmFzID0gW107XHJcblxyXG4gICAgICAgIC8vIChHZW5lcmEgZWwgYmFja2VuZClcclxuICAgICAgICAkLmdldChmaWNoZXJvKVxyXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5hbGVzR2xvYmFsID0gZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dENhbmFsZXMgPSB7fSxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZUNhbmFsZXMgPSAne3tjYW5hbGVzfX08bGkgY2xhc3M9XCJpdGVtQ2FuYWxcIiBkYXRhLWxldHJhPVwie3tjdXJyZW50TGV0cmF9fVwiICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICdkYXRhLWlkY2FuYWw9XCJ7e2lkX3Byb2dyYW1hfX1cIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjaGVja1wiPjwvc3Bhbj4nICtcclxuICAgICAgICAgICAgICAgICAgICAvLyc8aW1nIHNyYz1cInt7aWNvbm99fVwiIC8+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3t7bm9tYnJlX2NvbXBsZXRvfGNob3A+MjN9fTwvbGk+e3svY2FuYWxlc319JztcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goY2FuYWxlc0dsb2JhbCwgZnVuY3Rpb24oaSwgdikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBNYXJrLmdsb2JhbHMuY3VycmVudExldHJhID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q2FuYWxlcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0cmE6IGksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmFsZXM6IHZcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0TGV0cmFzLmxldHJhcy5wdXNoKGkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0Q2FuYWxlcyA9IE1hcmsudXAodGVtcGxhdGVDYW5hbGVzLCBjb250ZXh0Q2FuYWxlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdWxMZXRyYXMuYXBwZW5kKHJlc3VsdENhbmFsZXMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTGlzdGFkbyBjb24gdG9kYXMgbGFzIGxldHJhc1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdExldHJhcyA9IE1hcmsudXAodGVtcGxhdGVMZXRyYXMsIGNvbnRleHRMZXRyYXMpO1xyXG4gICAgICAgICAgICAgICAgJGJhcnJhTGV0cmFzLmZpbmQoJy5saXN0YUxldHJhcycpLmFwcGVuZChyZXN1bHRMZXRyYXMpO1xyXG4gICAgICAgICAgICAgICAgLy8gTGlzdGFkbyBkZSB0b2RvcyBsb3MgY2FuYWxlc1xyXG4gICAgICAgICAgICAgICAgJGJhcnJhTGV0cmFzLmZpbmQoJy5uYW5vLWNvbnRlbnQnKS5odG1sKHVsTGV0cmFzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0NvbXByb2JhbW9zIHNpIHlhIGVzdGFtb3Mgc3VzY3JpdG9zIGEgY2FkYSBjYW5hbFxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCRiYXJyYUxldHJhcy5maW5kKCcuaXRlbUNhbmFsJyksIGZ1bmN0aW9uKGksIHYpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmFsZXNVc3VhcmlvLmluZGV4T2YoJCh0aGlzKS5kYXRhKCdpZGNhbmFsJykpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmNoZWNrJykuYWRkQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRiYXJyYUxldHJhc1xyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSBsb3MgY2FuYWxlcyBhIGxvcyBxdWUgZXN0w6Egc3VzY3JpdG8gZWwgdXN1YXJpbyAobyBkZWZlY3RvKVxyXG4gICAgICogUGVybWl0ZSByZW9yZGVuYXIgbG9zIGNhbmFsZXMsIGRlc3VzY3JpYmlyc2UgeSBndWFyZGFyIGxhIGNvbmZpZ3VyYWNpw7NuXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhTGlzdGFkb0NhbmFsZXNTZWxlY2Npb25hZG9zKCkge1xyXG5cclxuICAgICAgICB2YXIgdWxDYW5hbGVzID0gJCgnPHVsIGNsYXNzPVwib3JkZW4gdmVydGljYWxcIj4nKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGxpIGNsYXNzPVwiaXRlbUNhbmFsXCIgZGF0YS1pZGNhbmFsPVwie3tub21icmV9fVwiPicgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjaGVjayBzZWxcIj48L3NwYW4+JyArXHJcbiAgICAgICAgICAgIC8vJzxpbWcgc3JjPVwiaHR0cDovL2VzdGF0aWNvcy5lbG11bmRvLmVze3tpY29ub319XCIgLz4nICtcclxuICAgICAgICAgICAgJ3t7bm9tYnJlX2NvbXBsZXRvfGNob3A+MjN9fTwvbGk+JztcclxuXHJcbiAgICAgICAgJC5lYWNoKGFycmF5Q2FuYWxlcywgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBjb250ZXh0ID0gdi5jYW5hbDtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICB1bENhbmFsZXMuYXBwZW5kKHJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRvcmRlbkNhbmFsZXMuZmluZCgnLm5hbm8tY29udGVudCcpLmh0bWwodWxDYW5hbGVzKTtcclxuICAgICAgICAkb3JkZW5DYW5hbGVzXHJcbiAgICAgICAgICAgIC5maW5kKCcubmFubycpXHJcbiAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBbbGFuemFIYW5kbGVyc1N1c2NyaXBpY2lvbiBkZXNjcmlwdGlvbl1cclxuICAgICAqIEByZXR1cm4ge1t0eXBlXX0gW2Rlc2NyaXB0aW9uXVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBsYW56YUhhbmRsZXJzU3VzY3JpcGljaW9uKCkge1xyXG5cclxuICAgICAgICAvLyBDbGljayBlbiBpdGVtcyBkZSBzdXNjcmlwY2nDs25cclxuICAgICAgICAkYmFycmFMZXRyYXMub24oJ2NsaWNrJywgJy5pdGVtQ2FuYWwnLCBjbGlja0l0ZW1DYW5hbCk7XHJcblxyXG4gICAgICAgIC8vIENsaWNrIGVuIGNoZWNrcyBlbiBlbCBwYW5lbCBkZSBzdXNjcml0b3NcclxuICAgICAgICAkb3JkZW5DYW5hbGVzLm9uKCdjbGljaycsICcuY2hlY2snLCBjbGlja0NoZWNrT3JkZW5DYW5hbCk7XHJcblxyXG4gICAgICAgIC8vIENsaWNrIGVuIHN1c2NyaWJpckNhbmFsZXMgcXVlIGhhY2UgYXBhcmVjZXIgZWwgc2VsZWN0b3JcclxuICAgICAgICAkc3VzY3JpYmlyQ2FuYWxlcy5vbignY2xpY2snLCB0b2dnbGVTdXNjcmlwY2lvbik7XHJcblxyXG4gICAgICAgIC8vIENsaWNrIGVuIGxldHJhcyBkZSBmaWx0cm9cclxuICAgICAgICAkYmFycmFMZXRyYXMub24oJ2NsaWNrJywgJy5pdGVtTGV0cmEnLCBjbGlja0ZpbHRyb0xldHJhKTtcclxuXHJcbiAgICAgICAgLy8gSW50cm9kdWNjacOzbiBkZSB0ZXh0byBlbiBjYW1wbyB0eHRCdXNjYXJcclxuICAgICAgICAkYmFycmFMZXRyYXMuZmluZCgnLmZhLXNlYXJjaCcpLm9uKCdjbGljaycsIGZpbHRyb0NhbmFsKTtcclxuXHJcbiAgICAgICAgLy8gUmVvcmRlbmFjacOzbiBkZSBlbGVtZW50b3MgZGUgY2FuYWwsIGRyYWcgJiBkcm9wXHJcbiAgICAgICAgdmFyIGFkanVzdG1lbnQ7XHJcbiAgICAgICAgdmFyIGdyb3VwID0gJCgnLm9yZGVuQ2FuYWxlcyB1bC5vcmRlbicpLnNvcnRhYmxlKHtcclxuICAgICAgICAgICAgZ3JvdXA6ICdvcmRlbicsXHJcbiAgICAgICAgICAgIHB1bGxQbGFjZWhvbGRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gYW5pbWF0aW9uIG9uIGRyb3BcclxuICAgICAgICAgICAgb25Ecm9wOiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZ3JvdXAuc29ydGFibGUoXCJzZXJpYWxpemVcIikuZ2V0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsICcgJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyICRjbG9uZWRJdGVtID0gJCgnPGxpLz4nKS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5iZWZvcmUoJGNsb25lZEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgJGNsb25lZEl0ZW0uZGV0YWNoKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3N1cGVyKCRpdGVtLCBjb250YWluZXIpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gc2V0ICRpdGVtIHJlbGF0aXZlIHRvIGN1cnNvciBwb3NpdGlvblxyXG4gICAgICAgICAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gJGl0ZW0ub2Zmc2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlciA9IGNvbnRhaW5lci5yb290R3JvdXAucG9pbnRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZW5lbW9zIGVuIGN1ZW50YSBsYSBwb3NpY2nDs24gZGVsIG5hbm9TY3JvbGxlciBlbiBlc2UgbW9tZW50b1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvc0luaVNjcm9sbGVyID0gJCgnLm9yZGVuQ2FuYWxlcyAubmFubyAubmFuby1jb250ZW50JykuZ2V0KDApLnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgIHBvc0luaVNjcm9sbGVyID0gTWF0aC5mbG9vcihwb3NJbmlTY3JvbGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgYWRqdXN0bWVudCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBwb2ludGVyLmxlZnQgLSBvZmZzZXQubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IHBvaW50ZXIudG9wIC0gb2Zmc2V0LnRvcCAtIHBvc0luaVNjcm9sbGVyXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIF9zdXBlcigkaXRlbSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25EcmFnOiBmdW5jdGlvbigkaXRlbSwgcG9zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICRpdGVtLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCAtIGFkanVzdG1lbnQubGVmdCxcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCAtIGFkanVzdG1lbnQudG9wXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBkZSBjbGlja2FyIGVuIHVuIGl0ZW1DYW5hbCBkZSBsYSBsaXN0YSBkZSBjYW5hbGVzIGRlIHN1c2NyaXBjacOzblxyXG4gICAgICAgICAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBFdmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tJdGVtQ2FuYWwoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkY2hlY2sgPSAkKHRoaXMpLmZpbmQoJy5jaGVjaycpO1xyXG4gICAgICAgICAgICB2YXIgYm9vbCA9ICRjaGVjay5oYXNDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgIHZhciBpZGNhbmFsID0gJCh0aGlzKS5kYXRhKCdpZGNhbmFsJyk7XHJcbiAgICAgICAgICAgIHZhciAkaXRlbXNDYW5hbCA9ICRvcmRlbkNhbmFsZXMuZmluZCgnLml0ZW1DYW5hbCcpLmZpbHRlcihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgnaWRjYW5hbCcpID09PSBpZGNhbmFsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghYm9vbCkgeyAvLyBzaSBudWVzdHJvIGVsZW1lbnRvIG5vIGVzdMOhIHNlbGVjY2lvbmFkb1xyXG5cclxuICAgICAgICAgICAgICAgICRjaGVjay50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoJGl0ZW1zQ2FuYWwubGVuZ3RoKSB7IC8vIHNpIHlhIGV4aXN0ZSBlc3RlIGNhbmFsIGVuIGVsIHBhbmVsIGRlIG9yZGVuXHJcbiAgICAgICAgICAgICAgICAgICAgJGl0ZW1zQ2FuYWwuZmluZCgnLmNoZWNrJykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gc2kgbm8gZXhpc3RlIGVzdGUgY2FuYWwgZW4gZWwgcGFuZWwgZGUgb3JkZW5cclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNsb25lKCkuYXBwZW5kVG8oJG9yZGVuQ2FuYWxlcy5maW5kKCd1bCcpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIHNpIG51ZXN0cm8gZWxlbWVudG8gZXN0w6Egc2VsZWNjaW9uYWRvXHJcbiAgICAgICAgICAgICAgICAkY2hlY2sudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAgICAgJGl0ZW1zQ2FuYWwuZmluZCgnLmNoZWNrJykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkb3JkZW5DYW5hbGVzXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcigpXHJcbiAgICAgICAgICAgICAgICAubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6ICdib3R0b20nXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGdW5jaW9uYWxpZGFkIHBhcmEgcmVvcmRlbmFyIGxvcyBlbGVtZW50b3MgaXRlbUNhbmFsIGVuIGVsIHBhbmVsIGRlIG9yZGVuXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IEV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja09yZGVuQ2FuYWwoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnY2xpY2sgZW4gaXRlbUNhbmFsJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBkZSBjbGlja2FyIGVsIGNoZWNrYm94IGVuIGxvcyBpdGVtc0NhbmFsIGRlbCBwYW5lbCBkZSBvcmRlblxyXG4gICAgICAgICAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBFdmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tDaGVja09yZGVuQ2FuYWwoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciBpZGNhbmFsID0gJCh0aGlzKS5wYXJlbnQoJy5pdGVtQ2FuYWwnKS5kYXRhKCdpZGNhbmFsJyk7XHJcbiAgICAgICAgICAgIHZhciAkaXRlbXNDYW5hbCA9ICRiYXJyYUxldHJhcy5maW5kKCcuaXRlbUNhbmFsJykuZmlsdGVyKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5kYXRhKCdpZGNhbmFsJykgPT09IGlkY2FuYWw7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICRpdGVtc0NhbmFsLmZpbmQoJy5jaGVjaycpLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYWNlIGFwYXJlY2VyIG8gZGVzYXBhcmVjZXIgbGEgY2FwYSBjb24gdG9kYSBsYSBpbmZvcm1hY2nDs24gZGUgc3VzY3JpcGNpw7NuXHJcbiAgICAgICAgICogQHBhcmFtICB7RXZlbnR9IGV2ZW50IEV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVTdXNjcmlwY2lvbihldmVudCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3Rpdm8nKTtcclxuICAgICAgICAgICAgJHNlbGVjdG9yQ2FuYWxlcy50b2dnbGUoJ2Zhc3QnKTtcclxuICAgICAgICAgICAgJG9yZGVuQ2FuYWxlc1xyXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJylcclxuICAgICAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgICAgICBhbHdheXNWaXNpYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJGJhcnJhTGV0cmFzXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKVxyXG4gICAgICAgICAgICAgICAgLm5hbm9TY3JvbGxlcigpXHJcbiAgICAgICAgICAgICAgICAubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGw6ICd0b3AnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGaWx0cmEgbGEgc2VsZWNjacOzbiBkZSBjYW5hbGVzIHBvciBzdSBsZXRyYSBkZSBjb21pZW56b1xyXG4gICAgICAgICAqIEBwYXJhbSAge0V2ZW50fSBldmVudCBFdmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tGaWx0cm9MZXRyYShldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgbGV0cmEgPSAkKHRoaXMpLmRhdGEoJ2xldHJhJyk7XHJcbiAgICAgICAgICAgIHZhciAkY29sZWNjaW9uID0gJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtQ2FuYWwnKTtcclxuICAgICAgICAgICAgdmFyIHlhQ2xpY2thZG8gPSAkKHRoaXMpLmhhc0NsYXNzKCdhY3Rpdm8nKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh5YUNsaWNrYWRvKSB7XHJcbiAgICAgICAgICAgICAgICAkY29sZWNjaW9uLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyICRzZWwgPSAkY29sZWNjaW9uLmZpbHRlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5kYXRhKCdsZXRyYScpID09IGxldHJhO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkc2VsLnNob3coKTtcclxuICAgICAgICAgICAgICAgICRjb2xlY2Npb24ubm90KCRzZWwpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkYmFycmFMZXRyYXNcclxuICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpXHJcbiAgICAgICAgICAgICAgICAubmFub1Njcm9sbGVyKClcclxuICAgICAgICAgICAgICAgIC5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRmlsdHJhIGxhIHNlbGVjY2nDs24gZGUgY2FuYWxlcyBwb3IgdW5hIGNhZGVuYSBkZSB0ZXh0b1xyXG4gICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30gY2FkZW5hIFRleHRvIHBhcmEgY29tcGFyYXIgY29uIGVsIG5vbWJyZSBkZWwgY2FuYWxcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZmlsdHJvQ2FuYWwoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNhbXBvVHh0ID0gJCgnI3R4dEJ1c2NhcicpLFxyXG4gICAgICAgICAgICAgICAgY2FkZW5hID0gY2FtcG9UeHQudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciAkY29sZWNjaW9uID0gJGJhcnJhTGV0cmFzLmZpbmQoJy5pdGVtQ2FuYWwnKTtcclxuICAgICAgICAgICAgaWYgKGNhZGVuYS5sZW5ndGggPj0gMyAmJiBjYWRlbmEgIT0gJyAnICYmIGNhZGVuYSAhPSAnJyAmJiBjYWRlbmEgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjYWRlbmEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqIElOSVQgKiovXHJcbiAgICAoZnVuY3Rpb24gaW5pdCgpIHtcclxuXHJcbiAgICAgICAgJHNlbGVjdG9yQ2FuYWxlcy5oaWRlKCk7XHJcblxyXG4gICAgICAgIHZhciBjYXJnYUluZm9Db29raWVzID0gY2FyZ2FDb29raWVzKCk7XHJcbiAgICAgICAgdmFyIGNhcmdhSW5mb0NhbmFsZXMgPSBjYXJnYUluZm9Db29raWVzLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5hbGVzVXN1YXJpbyA9IHJlcztcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYXJnYURhdG9zQ2FuYWxlcyhjYW5hbGVzVXN1YXJpbyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcGludGFDYW5hbGVzKGNhbmFsZXNVc3VhcmlvKTsgLy8gUGludGFyIGVuIGVsIG9yZGVuIGVuIHF1ZSBsbGVnYW4gZGUgbGEgY29va2llXHJcbiAgICAgICAgICAgICAgICBwaW50YVBhcnJpbGxhKGNhbmFsZXNVc3VhcmlvLCBhcnJheUNhbmFsZXMpOyAvLyBQaW50YXIgZW4gZWwgb3JkZW4gZW4gcXVlIGxsZWdhbiBkZSBsYSBjb29raWVcclxuICAgICAgICAgICAgICAgIHBpbnRhSG9yYXNQYXJyaWxsYSgpOyAvLyBQaW50YXIgbGEgYmFycmEgc3VwZXJpb3IgZGUgaG9yYXJpb1xyXG4gICAgICAgICAgICAgICAgcGludGFIb3JhQWN0dWFsKCk7IC8vIFBvc2ljaW9uYSBlbCBtYXJjYWRvciBkZSBob3JhIGFjdHVhbCBlbiBsYSBwYXJyaWxsYVxyXG4gICAgICAgICAgICAgICAgcGludGFTZWxlY3RvckRpYXMoKTsgLy8gUGludGFtb3MgbG9zIGxpdGVyYWxlcyBkZSBsb3MgZMOtYXMgY29udGVtcGxhZG9zIGVuIHBhcnJpbGxhXHJcbiAgICAgICAgICAgICAgICBzaXR1YVBhcnJpbGxhQWhvcmEoKTsgLy8gUG9zaWNpb25hIGxhIHBhcnJpbGxhIHkgZWxlbWVudG9zIGVuIGxhIGZlY2hhIHkgaG9yYSBhY3R1YWxcclxuXHJcbiAgICAgICAgICAgICAgICBsYW56YUhhbmRsZXJzKCk7IC8vIExhbnphIHRvZG9zIGxvcyBldmVudCBsaXN0ZW5lcnNcclxuXHJcbiAgICAgICAgICAgICAgICBwaW50YUxpc3RhZG9DYW5hbGVzU2VsZWNjaW9uYWRvcygpOyAvLyBQaW50YW1vcyBlbCDDoXJlYSBkZSBjYW5hbGVzIHNlbGVjY2lvbmFkb3NcclxuICAgICAgICAgICAgICAgIHBpbnRhTGlzdGFkb0NhbmFsZXNTdXNjcmlwY2lvbigpOyAvLyBQaW50YW1vcyBlbCBzZWxlY3RvciBkZSBjYW5hbGVzIGNvbXBsZXRvIGFsIHBpZVxyXG5cclxuICAgICAgICAgICAgICAgIGxhbnphSGFuZGxlcnNTdXNjcmlwaWNpb24oKTsgLy8gTGFuemEgdG9kb3MgbG9zIGV2ZW50cyBsaXN0ZW5lcnMgZGUgc3VzY3JpcGNpw7NuIGEgY2FuYWxlc1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy9jYXJnYUluZm9Vc3VhcmlvKCk7IC8vIENhcmdhIGxhIGluZm9ybWFjacOzbiBzb2JyZSBwcm9ncmFtYXMgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZSB1biB1c3VhcmlvIHZhbGlkYWRvXHJcbiAgICAgICAgLy9waW50YVByb2dzVXN1YXJpbygpOyAvLyBNb2RpZmljYSBsYXMgY2xhc2VzIGRlIGxvcyBwcm9ncmFtYXMgcXVlIGVsIHVzdWFyaW8gdGVuZ2EgY29tbyBmYXZvcml0b3MgbyBhbGVydGFzXHJcblxyXG4gICAgfSkoKTtcclxuXHJcbiAgICAvKiogSGVscGVyICoqL1xyXG4gICAgJC5mbi5leGlzdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG5cclxufSkoanExMTEpO1xyXG5cclxuLyoqXHJcbiAqIENyZWEgdW5hIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWUgIE5vbWJyZSBkZSBsYSBjb29raWVcclxuICogQHBhcmFtICB7b2JqZWN0fSB2YWx1ZSBWYWxvciBkZSBsYSBjb29raWVcclxuICogQHBhcmFtICB7aW50fSBkYXlzICBOw7ptZXJvIGRlIGTDrWFzIGRlIHZpZ2VuY2lhXHJcbiAqIEByZXR1cm4ge31cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUNvb2tpZShuYW1lLCB2YWx1ZSwgZGF5cykge1xyXG4gICAgdmFyIGV4cGlyZXM7XHJcblxyXG4gICAgaWYgKGRheXMpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgKGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XHJcbiAgICAgICAgZXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b0dNVFN0cmluZygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBleHBpcmVzID0gXCJcIjtcclxuICAgIH1cclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IGVzY2FwZShuYW1lKSArIFwiPVwiICsgZXNjYXBlKHZhbHVlKSArIGV4cGlyZXMgKyBcIjsgcGF0aD0vXCI7XHJcbn1cclxuLyoqXHJcbiAqIExlZSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSBOb21icmUgZGUgbGEgY29va2llXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICBWYWxvciBkZSBsYSBjb29raWVcclxuICovXHJcbmZ1bmN0aW9uIHJlYWRDb29raWUobmFtZSkge1xyXG4gICAgdmFyIG5hbWVFUSA9IGVzY2FwZShuYW1lKSArIFwiPVwiO1xyXG4gICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGMgPSBjYVtpXTtcclxuICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT09ICcgJykgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTtcclxuICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWVFUSkgPT09IDApIHJldHVybiB1bmVzY2FwZShjLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoLCBjLmxlbmd0aCkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuLyoqXHJcbiAqIEVsaW1pbmEgdW5hIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWUgTm9tYnJlIGRlIGxhIGNvb2tpZVxyXG4gKiBAcmV0dXJuIHt9XHJcbiAqL1xyXG5mdW5jdGlvbiBlcmFzZUNvb2tpZShuYW1lKSB7XHJcbiAgICBjcmVhdGVDb29raWUobmFtZSwgXCJcIiwgLTEpO1xyXG59XHJcblxyXG4vKipcclxuICogRGV2dWVsdmUgdW4gbsO6bWVybyBjb21vIGNhZGVuYSBmb3JtYXRlYWRhIGNvbiBjZXJvcyBhIGxhIGl6ZGFcclxuICogQHBhcmFtICB7bnVtYmVyfSBudW1iZXIgICAgICAgRWwgbsO6bWVybyBvcmlnaW5hbFxyXG4gKiBAcGFyYW0gIHtpbnRlZ2VyfSB0YXJnZXRMZW5ndGggTsO6bWVybyBkZSBjYXJhY3RlcmVzIHF1ZSBxdWVyZW1vcyBvYnRlbmVyXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICAgICAgIENhZGVuYSBjb21wdWVzdGEgZGUgY2Vyb3MgeSBlbCBuw7ptZXJvIG9yaWdpbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBsZWZ0UGFkKG51bWJlciwgdGFyZ2V0TGVuZ3RoKSB7XHJcbiAgICB2YXIgb3V0cHV0ID0gbnVtYmVyICsgJyc7XHJcbiAgICB3aGlsZSAob3V0cHV0Lmxlbmd0aCA8IHRhcmdldExlbmd0aCkge1xyXG4gICAgICAgIG91dHB1dCA9ICcwJyArIG91dHB1dDtcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm90b3RpcG8gcGFyYSBvYnRlbmVyIG7Dum1lcm9zIG3DoXhpbW8geSBtw61uaW1vIGVuIHVuIGFycmF5XHJcbiAqIEByZXR1cm4ge2ludH0gRGV2dWVsdmUgZWwgbWF4L21pbiBkZSB1biBhcnJheSBkYWRvXHJcbiAqL1xyXG5BcnJheS5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbWF4ID0gdGhpc1swXTtcclxuICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgaWYgKHRoaXNbaV0gPiBtYXgpIG1heCA9IHRoaXNbaV07XHJcbiAgICByZXR1cm4gbWF4O1xyXG59O1xyXG5BcnJheS5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbWluID0gdGhpc1swXTtcclxuICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aDtcclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspXHJcbiAgICAgICAgaWYgKHRoaXNbaV0gPCBtaW4pIG1pbiA9IHRoaXNbaV07XHJcbiAgICByZXR1cm4gbWluO1xyXG59OyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==