function createCookie(t,e,i){var n;if(i){var s=new Date;s.setTime(s.getTime()+24*i*60*60*1e3),n="; expires="+s.toGMTString()}else n="";document.cookie=escape(t)+"="+escape(e)+n+"; path=/"}function readCookie(t){for(var e=escape(t)+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(e))return unescape(s.substring(e.length,s.length))}return null}function eraseCookie(t){createCookie(t,"",-1)}function leftPad(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}!function(t,e,i,n){function s(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),n=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+n}function o(e,i,n,s){var o=e.length,r=s?"offset":"position";for(n=n||0;o--;){var a=e[o].el?e[o].el:t(e[o]),l=a[r]();l.left+=parseInt(a.css("margin-left"),10),l.top+=parseInt(a.css("margin-top"),10),i[o]=[l.left-n,l.left+a.outerWidth()+n,l.top-n,l.top+a.outerHeight()+n]}}function r(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function a(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var n,o=t.length,r=[];o--;)n=t[o],r[o]=[o,s(n,e),i&&s(n,i)];return r=r.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function l(e){this.options=t.extend({},u,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=n))}function c(e,i){this.el=e,this.options=t.extend({},p,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var n=this.rootGroup.options.itemPath;this.target=n?this.el.find(n):this.el,this.target.on(h.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var h,p={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},u={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",placeholderClass:"placeholder",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(t,e){t.css(e)},onDragStart:function(e,i){e.css({height:e.height(),width:e.width()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){return i.target.nodeName.match(/^(input|select|textarea)$/i)?void 0:(i.preventDefault(),!0)},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(e,i,n){var s=t.extend({},e.data());return n?[i]:(i[0]&&(s.children=i),delete s.subContainers,delete s.sortable,s)},tolerance:0},f={},d=0,g={left:0,top:0,bottom:0,right:0},h={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},v="subContainers";l.get=function(t){return f[t.group]||(t.group===n&&(t.group=d++),f[t.group]=new l(t)),f[t.group]},l.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,u.onMousedown,e)&&(this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,u.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,r(this.pointer,this.item.offsetParent()),u.onDrag,t);var e=t.pageX||t.originalEvent.pageX,i=t.pageY||t.originalEvent.pageY,s=this.sameResultBox,o=this.options.tolerance;(!s||s.top-o>i||s.bottom+o<i||s.left-o>e||s.right+o<e)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=n))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,u.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),u.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),s=i.length;s--;){var o=i[s][0],l=i[s][1];if(!l||this.options.pullPlaceholder){var c=this.containers[o];if(!c.disabled){if(!this.$getOffsetParent()){var h=c.getItemOffsetParent();t=r(t,h),e=r(e,h)}if(c.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(t,e,i,n){var s=this.lastAppendedItem;(n||!s||s[0]!==e[0])&&(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=n,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||o(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===n){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=r(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){return{left:t.pageX||t.originalEvent.pageX,top:t.pageY||t.originalEvent.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,n=["drag","drop","scroll"];t.each(n,function(t,n){i.$document[e](h[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=n},_destroy:function(){f[this.options.group]=n}},c.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=a(this.getItemDimensions(),t,e),n=i.length,s=this.rootGroup,o=!s.options.isValidTarget||s.options.isValidTarget(s.item,this);if(!n&&o)return s.movePlaceholder(this,this.target,"append"),!0;for(;n--;){var r=i[n][0],l=i[n][1];if(!l&&this.hasChildGroup(r)){var c=this.getContainerGroup(r).searchValidTarget(t,e);if(c)return!0}else if(o)return this.movePlaceholder(r,t),!0}},movePlaceholder:function(e,i){var n=t(this.items[e]),s=this.itemDimensions[e],o="after",r=n.outerWidth(),a=n.outerHeight(),l=n.offset(),c={left:l.left,right:l.left+r,top:l.top,bottom:l.top+a};if(this.options.vertical){var h=(s[2]+s[3])/2,p=i.top<=h;p?(o="before",c.bottom-=a/2):c.top+=a/2}else{var u=(s[0]+s[1])/2,f=i.left<=u;f?(o="before",c.right-=r/2):c.left+=r/2}this.hasChildGroup(e)&&(c=g),this.rootGroup.movePlaceholder(this,n,o,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),o(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var s=t.data(this.items[e],v);if(s===n){var o=this.$getChildren(this.items[e],"container");if(s=!1,o[0]){var r=t.extend({},this.options,{rootGroup:this.rootGroup,group:d++});s=o[i](r).data(i).group}t.data(this.items[e],v,s)}return s},$getChildren:function(e,i){var n=this.rootGroup.options,s=n[i+"Path"],o=n[i+"Selector"];return e=t(e),s&&(e=e.find(s)),e.children(o)},_serialize:function(e,i){var n=this,s=i?"item":"container",o=this.$getChildren(e,s).not(this.options.exclude).map(function(){return n._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,o,i)},traverse:function(e){t.each(this.items||[],function(){var i=t.data(this,v);i&&i.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=n},_destroy:function(){var e=this;this.target.off(h.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,v)})}};var m={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(c.prototype,m),t.fn[i]=function(e){var s=Array.prototype.slice.call(arguments,1);return this.map(function(){var o=t(this),r=o.data(i);return r&&m[e]?m[e].apply(r,s)||this:(r||e!==n&&"object"!=typeof e||o.data(i,new c(o,e)),this)})}}(jq111,window,"sortable"),function(t,e,i){"use strict";var n,s,o,r,a,l,c,h,p,u,f,d,g,v,m,b,x,y,S,C,T,w,M,P,D,k,_,$,I,O,H;M={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},y="scrollbar",x="scroll",p="mousedown",u="mouseenter",f="mousemove",g="mousewheel",d="mouseup",b="resize",a="drag",l="enter",C="up",m="panedown",o="DOMMouseScroll",r="down",T="wheel",c="keydown",h="keyup",S="touchmove",n="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,s=null,_=e.requestAnimationFrame,w=e.cancelAnimationFrame,I=i.createElement("div").style,H=function(){var t,e,i,n,s,o;for(n=["t","webkitT","MozT","msT","OT"],t=s=0,o=n.length;o>s;t=++s)if(i=n[t],e=n[t]+"ransform",e in I)return n[t].substr(0,n[t].length-1);return!1}(),O=function(t){return H===!1?!1:""===H?t:H+t.charAt(0).toUpperCase()+t.substr(1)},$=O("transform"),D=$!==!1,P=function(){var t,e,n;return t=i.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=x,e.top="-9999px",i.body.appendChild(t),n=t.offsetWidth-t.clientWidth,i.body.removeChild(t),n},k=function(){var t,i,n;return i=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),t&&+n>23):!1},v=function(){function c(n,o){this.el=n,this.options=o,s||(s=P()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+o.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===o)(e===r&&t.originalEvent.detail>0||e===C&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===g){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===r&&t.originalEvent.wheelDelta<0||e===C&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;D?(t={},t[$]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},_?(w&&this.scrollRAF&&w(this.scrollRAF),this.scrollRAF=_(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(f,t.events[a]).bind(d,t.events[C]),t.body.bind(u,t.events[l]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(f,t.events[a]).unbind(d,t.events[C]),t.body.unbind(u,t.events[l]),!1}}(this),resize:function(t){return function(){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,r),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,C),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var i;if(null!=e)return i=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,i&&(t.sliderY+=-i/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var i;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(i=t.events)[C].apply(i,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(b,t[b]),this.iOSNativeScrolling||(this.slider.bind(p,t[r]),this.pane.bind(p,t[m]).bind(""+g+" "+o,t[T])),this.$content.bind(""+x+" "+g+" "+o+" "+S,t[x])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(b,t[b]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+x+" "+g+" "+o+" "+S,t[x])},c.prototype.generate=function(){var t,i,n,o,r,a,l;return o=this.options,a=o.paneClass,l=o.sliderClass,t=o.contentClass,(r=this.$el.children("."+a)).length||r.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===s&&k()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+n+14}):s&&(i={right:-s},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,i,o,r,a,l,c,h,p,u,f;return this.iOSNativeScrolling?(this.contentHeight=this.content.scrollHeight,void 0):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,o=t.style,r=o.overflowY,n&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+s,p=parseInt(this.$el.css("max-height"),10),p>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>p?p:t.scrollHeight)),l=this.pane.outerHeight(!1),h=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+h+a,f=Math.round(c/e*c),f<this.options.sliderMinHeight?f=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&f>this.options.sliderMaxHeight&&(f=this.options.sliderMaxHeight),r===x&&o.overflowX!==x&&(f+=s),this.maxSliderTop=c-f,this.contentHeight=e,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=f,this.paneTop=h,this.slider.height(f),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&r!==x?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&r===x?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),("static"===i||"relative"===i)&&(u=parseInt(this.$content.css("right"),10),u&&this.$content.css({right:"",marginRight:u})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return w&&this.scrollRAF&&(w(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=t.extend({},M,e),this.nanoscroller=n=new v(this,i)),e&&"object"==typeof e){if(t.extend(n.options,e),null!=e.scrollBottom)return n.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return n.scrollTop(e.scrollTop);if(e.scrollTo)return n.scrollTo(e.scrollTo);if("bottom"===e.scroll)return n.scrollBottom(0);if("top"===e.scroll)return n.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return n.scrollTo(e.scroll);if(e.stop)return n.stop();if(e.destroy)return n.destroy();if(e.flash)return n.flash()}return n.reset()})},t.fn.nanoScroller.Constructor=v}(jq111,window,document);var Mark={includes:{},globals:{},delimiter:">",compact:!1,_copy:function(t,e){e=e||[];for(var i in t)e[i]=t[i];return e},_size:function(t){return t instanceof Array?t.length:t||0},_iter:function(t,e){this.idx=t,this.size=e,this.length=e,this.sign="#",this.toString=function(){return this.idx+this.sign.length-1}},_pipe:function(t,e){var i,n,s,o;if(i=e.shift()){n=i.split(this.delimiter),s=n.shift().trim();try{o=Mark.pipes[s].apply(null,[t].concat(n)),t=this._pipe(o,e)}catch(r){}}return t},_eval:function(t,e,i){var n,s,o=this._pipe(t,e),r=o,a=-1;if(o instanceof Array)for(o="",n=r.length;++a<n;)s={iter:new this._iter(a,n)},o+=i?Mark.up(i,r[a],s):r[a];else o instanceof Object&&(o=Mark.up(i,r));return o},_test:function(t,e,i,n){var s=Mark.up(e,i,n).split(/\{\{\s*else\s*\}\}/);return(t===!1?s[1]:s[0])||""},_bridge:function(t,e){"."==e&&(e="\\.");var i,n,s="{{\\s*"+e+"([^/}]+\\w*)?}}|{{/"+e+"\\s*}}",o=new RegExp(s,"g"),r=t.match(o)||[],a=0,l=0,c=-1,h=0;for(n=0;n<r.length&&(i=n,c=t.indexOf(r[i],c+1),r[i].indexOf("{{/")>-1?l++:a++,a!==l);n++);return a=t.indexOf(r[0]),l=a+r[0].length,h=c+r[i].length,[t.substring(a,h),t.substring(l,c)]}};Mark.up=function(t,e,i){e=e||{},i=i||{};var n,s,o,r,a,l,c,h,p,u,f=/\{\{(.+?)\}\}/g,d=t.match(f)||[],g=[],v=0,m=0;for(i.pipes&&this._copy(i.pipes,this.pipes),i.includes&&this._copy(i.includes,this.includes),i.globals&&this._copy(i.globals,this.globals),i.delimiter&&(this.delimiter=i.delimiter),void 0!==i.compact&&(this.compact=i.compact);n=d[v++];)if(c=void 0,l="",r=n.indexOf("/}}")>-1,s=n.substr(2,n.length-(r?5:4)),s=s.replace(/`(.+?)`/g,function(t,i){return Mark.up("{{"+i+"}}",e)}),a=0===s.trim().indexOf("if "),g=s.split("|"),g.shift(),s=s.replace(/^\s*if/,"").split("|").shift().trim(),o=a?"if":s.split("|")[0],u=e[s],a&&!g.length&&(g=["notempty"]),!r&&t.indexOf("{{/"+o)>-1&&(c=this._bridge(t,o),n=c[0],l=c[1],v+=n.match(f).length-1),!/^\{\{\s*else\s*\}\}$/.test(n)){if(void 0!==(h=this.globals[s]))c=this._eval(h,g,l);else if(p=this.includes[s])p instanceof Function&&(p=p()),c=this._pipe(Mark.up(p,e,i),g);else if(s.indexOf("#")>-1)i.iter.sign=s,c=this._pipe(i.iter,g);else if("."===s)c=this._pipe(e,g);else if(s.indexOf(".")>-1){for(s=s.split("."),u=Mark.globals[s[0]],u?m=1:(m=0,u=e);u&&m<s.length;)u=u[s[m++]];c=this._eval(u,g,l)}else a?c=this._pipe(u,g):u instanceof Array?c=this._eval(u,g,l):l?c=u?Mark.up(l,u):void 0:e.hasOwnProperty(s)&&(c=this._pipe(u,g));c instanceof Array&&(c=this._eval(c,g,l)),a&&(c=this._test(c,l,e,i)),t=t.replace(n,void 0===c?"???":c)}return this.compact?t.replace(/>\s+</g,"><"):t},Mark.pipes={empty:function(t){return t&&0!==(t+"").trim().length?!1:t},notempty:function(t){return t&&(t+"").trim().length?t:!1},blank:function(t,e){return t||0===t?t:e},more:function(t,e){return Mark._size(t)>e?t:!1},less:function(t,e){return Mark._size(t)<e?t:!1},ormore:function(t,e){return Mark._size(t)>=e?t:!1},orless:function(t,e){return Mark._size(t)<=e?t:!1},between:function(t,e,i){return t=Mark._size(t),t>=e&&i>=t?t:!1},equals:function(t,e){return t==e?t:!1},notequals:function(t,e){return t!=e?t:!1},like:function(t,e){return new RegExp(e,"i").test(t)?t:!1},notlike:function(t,e){return Mark.pipes.like(t,e)?!1:t},upcase:function(t){return String(t).toUpperCase()},downcase:function(t){return String(t).toLowerCase()},capcase:function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},chop:function(t,e){return t.length>e?t.substr(0,e)+"...":t},tease:function(t,e){var i=t.split(/\s+/);return i.slice(0,e).join(" ")+(i.length>e?"...":"")},trim:function(t){return t.trim()},pack:function(t){return t.trim().replace(/\s{2,}/g," ")},round:function(t){return Math.round(+t)},clean:function(t){return String(t).replace(/<\/?[^>]+>/gi,"")},size:function(t){return t.length},length:function(t){return t.length},reverse:function(t){return[].concat(t).reverse()},join:function(t,e){return t.join(e)},limit:function(t,e,i){return t.slice(+i||0,+e+(+i||0))},split:function(t,e){return t.split(e||",")},choose:function(t,e,i){return t?e:i||""},toggle:function(t,e,i,n){return i.split(",")[e.match(/\w+/g).indexOf(t+"")]||n},sort:function(t,e){var i=function(t,i){return t[e]>i[e]?1:-1};return[].concat(t).sort(e?i:void 0)},fix:function(t,e){return(+t).toFixed(e)},mod:function(t,e){return+t%+e},divisible:function(t,e){return t&&+t%e===0?t:!1},even:function(t){return t&&0===(1&+t)?t:!1},odd:function(t){return t&&1===(1&+t)?t:!1},number:function(t){return parseFloat(t.replace(/[^\-\d\.]/g,""))},url:function(t){return encodeURI(t)},bool:function(t){return!!t},falsy:function(t){return!t},first:function(t){return 0===t.idx},last:function(t){return t.idx===t.size-1},call:function(t,e){return t[e].apply(t,[].slice.call(arguments,2))},set:function(t,e){return Mark.globals[e]=t,""},log:function(t){return console.log(t),t}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof module&&module.exports?module.exports=Mark:"function"==typeof define&&define.amd&&define(function(){return Mark});var guiaTV=function(t){"use strict";function e(){var e,i=t.Deferred();return setTimeout(function(){e=["telecinco","antena3","la2","la1","cuatro","lasexta","historia"],v=[1,2,3,4,5,6,7],i.resolve(e)},3e3),i.promise()}function i(e){{var i=[],n=[];e.length}return t.when.apply(null,t.map(e,function(e,s){var o="datos/"+e+".json";n.push(t.get(o).done(function(t){m[s]=i[s]=t}).fail(function(){m[s]=i[s]=""}))})),t.when.apply(null,n).promise()}function n(e,i){var n=e||d,o=i||m,r={},a='<div id="{{idcanal}}" class="lineaCanal clearfix"></div>';t.each(n,function(t,e){r.idcanal=e;var i=Mark.up(a,r);k.append(i)}),t.each(o,function(e,i){var n=i.canal.nombre,o=t("#"+n);t.each(i.programas,function(t,e){var i=s(t,e);o.append(i)})})}function s(t,e){var i,n,s={},o='<div class="itemPrograma" id="{{id_programa}}" data-url="{{url_ficha}}"style="width:{{dur}}; left:{{diffHoraDia}}; user-selected:none;"><div class="itemProgramaInner {{clase}}"><a href="http://elmundo.es/television/programa/{{id_programa}}" style="display:none;">{{nombre}}</a><span class="categoria">{{categoria}}</span><h4>{{nombre}}</h4>{{if episodio}}<p>{{episodio}}</p>{{/if}}<span class="duracion">{{duracion}}</span><span class="fecha">{{infoHoraDuracion}}</span>{{if fav}}<span class="favorito"><i class="fa fa-star"></i></span>{{/if}}{{if ale}}<span class="alerta"><i class="fa fa-clock-o"></i></span>{{/if}}</div></div>"',r=e.categoria;switch(r){case"1":n="catSeries",i="series";break;case"104":n="catCine",i="cine";break;case"31":n="catMagazines",i="magazines";break;case"20":n="catInformativos",i="informativos";break;case"90":n="catDeportes",i="deportes";break;case"INT_2":n="catConcursos",i="concursos";break;case"INT_1":n="catCorazon",i="coraz√≥n"}var a=e.duracion+" mins.",l=Math.ceil(C*e.duracion),c=new Date(e.hora_inicio),h=new Date(e.hora_fin),p=c-T;p=Math.floor(Math.floor(p/1e3)/60*C);var u=c.getHours();u=leftPad(u,2);var f=c.getMinutes();f=leftPad(f,2);var d=h.getHours();d=leftPad(d,2);var g=h.getMinutes();g=leftPad(g,2);var v=""+u+":"+f+" - "+d+":"+g;if(100*Math.random()<5)var m=!0;if(100*Math.random()<5)var b=!0;s={clase:n,dur:l+"px",diffHoraDia:p+"px",id_programa:e.id_programa,url_ficha:e.url_ficha,infoHoraDuracion:v,duracion:a,categoria:i.toUpperCase(),nombre:e.nombre,episodio:e.episodio,fav:void 0|m,ale:void 0|b};var x=Mark.up(o,s);return x}function o(e){var i=e||d,n={},s='<div class="itemCanal"><img src="http://estaticos.elmundo.es{{icono}}" /></div>';t.each(i,function(t){n.icono=m[t].canal.icono;var e=Mark.up(s,n);_.append(e)})}function r(){var t,e,i=new Date,n={};n.dias=[],n.horas=[];var s='{{dias}}<div class="itemDia" style="left:{{pos}}px">{{dia}}</div>{{/dias}}{{horas}}<div class="itemHoras" style="left:{{pos}}px;">{{texto}}</div>{{/horas}}';for(e=0;3>=e;e++){i.setTime(T.getTime()+864e5*e);var o=i.toLocaleDateString("es-ES",{weekday:"long",month:"long",day:"numeric"}),r=e*S*24;for(n.dias.push({dia:o,pos:r}),b.push([o,r]),t=0;24>t;t++){var a=leftPad(t,2)+":00",l=e*S*24+t*S;n.horas.push({texto:a,pos:l})}}var c=Mark.up(s,n);$.append(c)}function a(){var t={},e='<li class="itemDia" data-px="{{px}}"><a href="javascript://">{{diaText}}</a></li>';b.forEach(function(i){var n=i[0],s=i[1];t={diaText:n,px:s};var o=Mark.up(e,t);D.find("ul").append(o)})}function l(){var e=w.h,i=w.m,n=t(".horaActual").hide().find("p").text(e+":"+i).end().show(),s=parseInt(e)*S+parseInt(i)*C;n.css({left:s})}function c(){var t=.5*M.width(),e=parseInt(O.css("left"));e=parseInt(t-e),k.stop().animate({left:e+"px"},300),$.stop().animate({left:e+"px"},300);var i=parseInt(w.h)*S,n=parseInt(w.m)*C,s=i+n+e;O.stop().animate({left:s+"px"},300)}function h(){function e(t){t.preventDefault(),this.startTop=this.offsetTop,this.startLeft=this.offsetLeft,this.initialMouseX=t.clientX,this.initialMouseY=t.clientY,b=!0,T=!1,k.on("mouseup touchend",i),k.on("mousemove touchmove",n)}function i(){b&&(b=!1,k.off("mouseup touchend",i),k.off("mousemove touchmove",n))}function n(e){if(b){var i=e.clientX-this.initialMouseX,n=e.clientY-this.initialMouseY;T=Math.abs(i)>2||Math.abs(n)>2;var s=this.startTop+n,o=this.startLeft+i;s>x&&(s=x),f-g>s&&(s=f-g),o>m+Math.abs(Y)+50&&(o=m+Math.abs(Y)+50),o<d-50-Math.abs(R)&&(o=d-50-Math.abs(R)),t(this).css({top:s+"px",left:o+"px"}),_.css({top:s+"px"}),$.css({left:o+"px"});var r=parseInt(w.h)*S,a=parseInt(w.m)*C,l=r+a+o;O.css({left:l+"px"})}}function s(){var e=parseInt(t(this).css("left"));e=parseInt(.5*d-e),h(e)}function o(){var e=-1*parseInt(t(this).data("px"));h(e+m)}function r(e){if(!T){b=!1;var i=document.elementFromPoint(e.clientX,e.clientY),n=t(i).is(".itemPrograma")?t(i):t(i).closest(".itemPrograma"),s=n.find("a").attr("href"),o=n.attr("id");a(o,s);var r=parseInt(n.css("left"))+.5*n.width();r=parseInt(.5*d-r),h(r)}}function a(e){function i(){0===parseInt(H.css("right"))&&H.stop().animate({right:-S},300,"swing")}i(),t.ajax({url:"fichaPrograma.html",data:{progId:e},dataType:"html",cache:!1}).done(function(t){H.find(".contenido").html(t),H.find(".nano").nanoScroller({scroll:"top",preventPageScrolling:!0,alwaysVisible:!0}),H.animate({right:0},500,"swing",function(){H.find(".cierra").on("click",function(t){t.preventDefault(),i()})})})}function l(e){var i=t(e.currentTarget).attr("class").split(" ")[0];k.hasClass(i)?(k.removeClass(i),t(this).removeClass("activo")):(k.addClass(i),t(this).addClass("activo"))}function c(){v.length>=1&&t.each(v,function(t,e){e++,P.find("li:nth-child("+e+")").trigger("click")})}function h(t){var e=t||0;k.stop().animate({left:e+"px"},300),$.stop().animate({left:e+"px"},300);var i=parseInt(w.h)*S,n=parseInt(w.m)*C,s=i+n+e;O.stop().animate({left:s+"px"},300)}function p(e){var i=t(e.currentTarget).attr("class").split(" ")[1],n=k.css("top").split("px")[0],s=_.css("top").split("px")[0],o=_.length;switch(i){case"btnArriba":s-y>x?(_.css("top",s-y),k.css("top",n-y)):(_.css("top",x+"px"),k.css("top",x+"px"));break;case"btnAbajo":var r=s-o*y;r>s+y?(_.css("top",s+y),k.css("top",n+y)):(_.css("top",r+"px"),k.css("top",r+"px"))}}function u(e){var i=t(e.currentTarget).attr("class").split(" ")[1],n=parseInt(k.css("left"));switch(e.stopPropagation(),console.log(n),i){case"btnIzda":h(Math.floor(parseInt(n+S)));break;case"btnDrcha":h(Math.floor(parseInt(n-S)))}}var f=M.height(),d=M.width(),g=k.height(),m=(k.offsetWidth,_.width()),b=!1,T=!1,A=t(".contProgramas > div > div:first-child"),E=[];t.each(A,function(){E.push(this.offsetLeft)});var Y=E.min(),G=t(".contProgramas > div > div:last-child"),V=[];t.each(G,function(){V.push(this.offsetLeft+t(this).width())});var R=V.max();M.find(".preload-wrapper").remove(),k.on("mousedown touchstart",e),k.on("click",r),$.on("click",".itemHoras",s),P.on("click","li",l),c(),D.on("click","li",o),z.on("click",".btn",p),I.on("click",".btn",u)}function p(){var e=t("<ul>"),i="datos/listadocanales.json";t.get(i).done(function(i){g=i;var n={},s='<li class="itemLetra"><h4>{{letra}}</h4><div class="divLetra nano"><div class="nano-content"><ul>{{canales}}<li class="itemCanal" data-idcanal="{{id_programa}}"><img src="{{icono}}" />{{nombre_completo}}<span class="check"></span></li>{{/canales}}</ul></div></div></li>';
t.each(g,function(t,i){n={letra:t,canales:i};var o=Mark.up(s,n);e.append(o)}),A.html(e),t.each(A.find(".itemCanal"),function(){-1!=d.indexOf(t(this).data("idcanal"))&&t(this).find(".check").addClass("sel")}),A.find(".nano").nanoScroller({scroll:"top",flash:!0,preventPageScrolling:!0})})}function u(){var e=t('<ul class="orden vertical">'),i={},n='<li class="itemCanal" data-idcanal="{{nombre}}"><img src="http://estaticos.elmundo.es{{icono}}" />{{nombre_completo}}<span class="check sel"></span></li>';t.each(m,function(t,s){i=s.canal;var o=Mark.up(n,i);e.append(o)}),E.find(".nano-content").html(e),E.find(".nano").nanoScroller({scroll:"top",flash:!0,preventPageScrolling:!0})}function f(){function e(){var e=t(this).find(".check"),i=e.hasClass("sel"),n=t(this).data("idcanal"),s=E.find(".itemCanal").filter(function(){return t(this).data("idcanal")===n});i?(e.toggleClass("sel"),s.find(".check").toggleClass("sel")):(e.toggleClass("sel"),s.length?s.find(".check").toggleClass("sel"):t(this).clone().appendTo(E.find("ul"))),E.find(".nano").nanoScroller().nanoScroller({scroll:"bottom"})}function i(e){e.stopPropagation();var i=t(this).parent(".itemCanal").data("idcanal"),n=A.find(".itemCanal").filter(function(){return t(this).data("idcanal")===i});t(this).toggleClass("sel"),n.find(".check").toggleClass("sel")}A.on("click",".itemCanal",e);var n,s=t(".ordenCanales ul.orden").sortable({group:"orden",pullPlaceholder:!0,onDrop:function(e,i,n){var o=s.sortable("serialize").get(),r=(JSON.stringify(o,null," "),t("<li/>").css({height:0}));e.before(r),r.detach(),n(e,i)},onDragStart:function(e,i,s){var o=e.offset(),r=i.rootGroup.pointer,a=t(".ordenCanales .nano .nano-content").get(0).scrollTop;a=Math.floor(a),n={left:r.left-o.left,top:r.top-o.top-a},s(e,i)},onDrag:function(t,e){t.css({left:e.left-n.left,top:e.top-n.top})}});E.on("click",".check",i)}var d=["la1","la2","antena3","cuatro","telecinco","lasexta"],g={},v=[],m=[],b=[],x=60,y=90,S=320,C=S/60,T=new Date,w={h:leftPad(T.getHours(),2),m:leftPad(T.getMinutes(),2)};T.setTime(Date.parse("Mon, Jul 14 2014"));var M=t(".viewPort"),P=t(".selectorCategorias"),D=t(".selectorDias"),k=t(".contProgramas"),_=t(".contCanales"),$=t(".barraHoras"),I=t(".iconosHoras"),O=t(".horaActual"),H=t(".fichaPrograma"),A=t(".barraLetras"),E=t(".ordenCanales"),z=t(".botonesCanales");return function(){{var t=e();t.then(function(t){return d=t,i(d)}).done(function(){o(d),n(d,m),r(),l(),a(),c(),h(),p(),u(),f()})}}(),t.fn.exists=function(){return this.length>0},this}(jq111);Array.prototype.max=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]>t&&(t=this[i]);return t},Array.prototype.min=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]<t&&(t=this[i]);return t};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS1zb3J0YWJsZS5qcyIsImpxdWVyeS5uYW5vc2Nyb2xsZXIuanMiLCJtYXJrdXAuanMiLCJhcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeTZCQSxRQUFBLGNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUVBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxHQUFBLEtBQ0EsR0FBQSxRQUFBLEVBQUEsVUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLEVBQUEsa0JBRUEsR0FBQSxFQUVBLFVBQUEsT0FBQSxPQUFBLEdBQUEsSUFBQSxPQUFBLEdBQUEsRUFBQSxXQU9BLFFBQUEsWUFBQSxHQUdBLElBQUEsR0FGQSxHQUFBLE9BQUEsR0FBQSxJQUNBLEVBQUEsU0FBQSxPQUFBLE1BQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUVBLElBREEsR0FBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxPQUNBLElBQUEsSUFBQSxFQUFBLFFBQUEsR0FBQSxNQUFBLFVBQUEsRUFBQSxVQUFBLEVBQUEsT0FBQSxFQUFBLFNBRUEsTUFBQSxNQU9BLFFBQUEsYUFBQSxHQUNBLGFBQUEsRUFBQSxHQUFBLElBU0EsUUFBQSxTQUFBLEVBQUEsR0FFQSxJQURBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxJQUFBLENBRUEsT0FBQSxJQzM3QkEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQWlJQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsRUFBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEVBR0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsU0FBQSxVQUdBLEtBRkEsRUFBQSxHQUFBLEVBRUEsS0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsSUFFQSxFQUFBLEVBQUEsSUFDQSxHQUFBLE1BQUEsU0FBQSxFQUFBLElBQUEsZUFBQSxJQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsSUFBQSxjQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxFQUFBLGFBQUEsRUFDQSxFQUFBLElBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxjQUFBLElBS0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLFFBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQU1BLEtBSkEsR0FBQSxHQUNBLEVBQUEsRUFBQSxPQUNBLEtBRUEsS0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxHQU9BLE9BTEEsR0FBQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsS0FPQSxRQUFBLEdBQUEsR0FDQSxLQUFBLFFBQUEsRUFBQSxVQUFBLEVBQUEsR0FDQSxLQUFBLGNBRUEsS0FBQSxRQUFBLFlBQ0EsS0FBQSxZQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsTUFDQSxLQUFBLFVBQUEsRUFBQSxNQUFBLEtBQUEsS0FBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLE1BQUEsS0FBQSxLQUFBLE1BQ0EsS0FBQSxZQUFBLEVBQUEsS0FBQSxRQUFBLGFBRUEsRUFBQSxnQkFDQSxLQUFBLFFBQUEsY0FBQSxJQW1PQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxFQUNBLEtBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxHQUVBLEtBQUEsTUFBQSxFQUFBLElBQUEsS0FBQSxTQUNBLEtBQUEsVUFBQSxLQUFBLFFBQUEsV0FBQSxLQUFBLE1BQ0EsS0FBQSxPQUFBLEtBQUEsVUFBQSxRQUFBLFFBQUEsS0FBQSxVQUFBLFFBQUEsWUFFQSxJQUFBLEdBQUEsS0FBQSxVQUFBLFFBQUEsUUFDQSxNQUFBLE9BQUEsRUFBQSxLQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUEsR0FFQSxLQUFBLE9BQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxPQUFBLEVBQUEsTUFBQSxLQUFBLFNBQUEsT0FFQSxLQUFBLFFBQUEsTUFDQSxLQUFBLE1BQUEsV0FBQSxLQUFBLE1BbGJBLEdBQUEsR0FDQSxHQUVBLE1BQUEsRUFFQSxNQUFBLEVBR0EsUUFBQSxHQUVBLFFBQUEsRUFFQSxVQUFBLEdBRUEsR0FLQSxVQUFBLGFBRUEsY0FBQSxHQUVBLGtCQUFBLFNBRUEsU0FBQSxFQUdBLE1BQUEsRUFFQSxPQUFBLEdBRUEsU0FBQSxHQUVBLGFBQUEsS0FFQSxVQUFBLFdBRUEsYUFBQSxVQUVBLGlCQUFBLGNBSUEsY0FBQSxXQUNBLE9BQUEsR0FJQSxTQUFBLGFBR0EsT0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsSUFPQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FDQSxPQUFBLEVBQUEsU0FDQSxNQUFBLEVBQUEsVUFFQSxFQUFBLFNBQUEsRUFBQSxNQUFBLFFBQUEsY0FDQSxFQUFBLFFBQUEsU0FBQSxFQUFBLE1BQUEsUUFBQSxZQUdBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQUEsTUFBQSxRQUFBLGNBQUEsV0FBQSxTQUNBLEVBQUEsUUFBQSxZQUFBLEVBQUEsTUFBQSxRQUFBLFlBSUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLFNBQUEsTUFBQSw4QkFBQSxRQUNBLEVBQUEsa0JBQ0EsSUFNQSxZQUFBLDRCQUdBLGlCQUFBLEVBR0EsVUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxPQUVBLE9BQUEsSUFDQSxJQUNBLEVBQUEsS0FDQSxFQUFBLFNBQUEsU0FHQSxHQUFBLG9CQUNBLEdBQUEsU0FFQSxJQUlBLFVBQUEsR0FFQSxLQUNBLEVBQUEsRUFDQSxHQUNBLEtBQUEsRUFDQSxJQUFBLEVBQ0EsT0FBQSxFQUNBLE1BQUEsR0FFQSxHQUNBLE1BQUEseUNBQ0EsS0FBQSwwREFDQSxLQUFBLHdDQUNBLE9BQUEsbUJBRUEsRUFBQSxlQTJFQSxHQUFBLElBQUEsU0FBQSxHQVFBLE1BUEEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxRQUFBLElBQ0EsRUFBQSxNQUFBLEtBRUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxHQUFBLElBR0EsRUFBQSxFQUFBLFFBR0EsRUFBQSxXQUNBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxVQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsZUFHQSxLQUFBLEtBQUEsRUFBQSxFQUFBLFFBQUEsUUFBQSxLQUFBLFFBQUEsY0FDQSxLQUFBLGNBQUEsR0FFQSxLQUFBLEtBQUEsR0FBQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFFBQUEsWUFBQSxLQUFBLEtBQUEsRUFBQSxZQUFBLEtBSUEsS0FBQSxXQUFBLEdBQ0EsS0FBQSxnQkFBQSxNQUVBLEtBQUEsa0JBQ0EsS0FBQSxjQUFBLElBRUEsS0FBQSxTQUFBLEdBQ0EsSUFBQSxLQUFBLFNBQUEsQ0FDQSxJQUFBLEtBQUEsWUFBQSxLQUFBLEtBQUEsU0FDQSxNQUVBLE1BQUEsUUFBQSxZQUFBLEtBQUEsS0FBQSxLQUFBLGNBQUEsRUFBQSxZQUFBLEdBQ0EsS0FBQSxLQUFBLE9BQUEsS0FBQSxhQUNBLEtBQUEsVUFBQSxFQUdBLEtBQUEsV0FBQSxHQUVBLEtBQUEsUUFBQSxPQUFBLEtBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxLQUFBLEtBQUEsZ0JBQ0EsRUFBQSxPQUNBLEVBRUEsSUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxFQUFBLEtBQUEsY0FDQSxFQUFBLEtBQUEsUUFBQSxZQUVBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FDQSxLQUFBLHNCQUNBLEtBQUEsWUFBQSxTQUNBLEtBQUEsaUJBQUEsS0FHQSxLQUFBLFNBQUEsR0FDQSxLQUFBLGdCQUFBLE9BRUEsS0FBQSxjQUFBLEVBRUEsS0FBQSxXQUVBLEtBQUEsWUFBQSxRQUFBLFFBQUEsR0FDQSxLQUFBLFlBQUEsT0FBQSxLQUFBLE1BQUEsU0FFQSxLQUFBLFFBQUEsU0FBQSxLQUFBLEtBQUEsS0FBQSxjQUFBLEVBQUEsU0FBQSxHQUVBLEtBQUEsUUFBQSxPQUFBLEtBQUEsS0FBQSxLQUFBLGFBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxHQUdBLEtBQUEsa0JBQ0EsS0FBQSxvQkFDQSxLQUFBLGlCQUFBLEtBQUEsY0FBQSxFQUNBLEtBQUEsVUFBQSxJQUdBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxLQUFBLGlCQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEscUJBQUEsS0FBQSxZQVFBLEtBTEEsR0FBQSxHQUFBLEVBQUEsS0FBQSx5QkFDQSxFQUNBLEdBQ0EsRUFBQSxFQUFBLE9BRUEsS0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxFQUVBLEtBQUEsR0FBQSxLQUFBLFFBQUEsZ0JBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxXQUFBLEVBQ0EsS0FBQSxFQUFBLFNBQUEsQ0FDQSxJQUFBLEtBQUEsbUJBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxxQkFDQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLGtCQUFBLEVBQUEsR0FDQSxPQUFBLElBSUEsS0FBQSxnQkFDQSxLQUFBLGNBQUEsSUFFQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsa0JBQ0EsSUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLE1BR0EsRUFBQSxHQUFBLEtBQUEsYUFDQSxLQUFBLGlCQUFBLEVBQ0EsS0FBQSxjQUFBLEVBQ0EsS0FBQSxRQUFBLFVBQUEsS0FBQSxZQUFBLEVBQUEsS0FFQSx1QkFBQSxXQUdBLE1BRkEsTUFBQSxxQkFDQSxFQUFBLEtBQUEsV0FBQSxLQUFBLHVCQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUEsb0JBQ0EsS0FBQSxxQkFFQSxhQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxLQUFBLFFBQUEsbUJBQUEsS0FBQSxJQUVBLGlCQUFBLFdBQ0EsR0FBQSxLQUFBLGVBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsT0FBQSxFQUNBLEVBQUEsS0FBQSxXQUFBLEdBQUEscUJBRUEsS0FBQSxLQUFBLFFBQUEsVUFDQSxLQUFBLEtBQ0EsR0FBQSxFQUFBLElBQUEsS0FBQSxXQUFBLEdBQUEsc0JBQUEsR0FBQSxDQUtBLEdBQUEsQ0FDQSxPQUtBLEtBQUEsYUFBQSxFQUVBLE1BQUEsTUFBQSxjQUVBLFdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFFQSxJQUFBLEtBQUEsbUJBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsbUJBQ0EsTUFBQSxvQkFBQSxLQUFBLGdCQUNBLEtBQUEsZ0JBQUEsRUFHQSxLQUFBLFlBQUEsS0FBQSxRQUNBLEtBQUEsUUFBQSxHQUVBLFlBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFDQSxPQUFBLE1BQUEsSUFDQSxLQUFBLElBQUEsS0FBQSxRQUFBLEtBQUEsRUFBQSxNQUNBLEtBQUEsSUFBQSxLQUFBLFFBQUEsSUFBQSxFQUFBLE9BQ0EsS0FBQSxRQUFBLFVBRUEsV0FBQSxTQUFBLEdBQ0EsT0FDQSxLQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsUUFHQSxnQkFBQSxXQUNBLEdBQUEsR0FBQSxJQUNBLE1BQUEsVUFBQSxLQUFBLFFBQUEsTUFHQSxLQUFBLFdBQ0EsYUFBQSxLQUFBLGtCQUNBLEtBQUEsaUJBQUEsV0FBQSxXQUNBLEVBQUEsVUFBQSxHQUNBLEtBQUEsUUFBQSxTQUdBLE9BQUEsV0FDQSxLQUFBLGtCQUNBLEtBQUEscUJBRUEsZ0JBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEdBQUEsT0FBQSxPQUFBLFNBRUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxhQUdBLGtCQUFBLFdBQ0EsS0FBQSxhQUFBLEdBR0EsZ0JBQUEsV0FDQSxLQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsc0JBR0EsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUVBLEtBREEsR0FBQSxHQUFBLEtBQUEsV0FBQSxPQUNBLEtBQ0EsS0FBQSxXQUFBLEdBQUEsU0FBQSxJQUdBLGlCQUFBLFdBQ0EsS0FBQSxvQkFBQSxHQUVBLFNBQUEsV0FDQSxFQUFBLEtBQUEsUUFBQSxPQUFBLElBcUJBLEVBQUEsV0FDQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxXQUVBLEtBQUEsV0FDQSxFQUFBLGNBQ0EsS0FBQSxRQUFBLE1BQ0EsS0FBQSxZQUFBLElBQ0EsRUFBQSxTQUFBLEVBQUEsT0FHQSxZQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxPQUNBLGNBQUEsRUFBQSxNQUFBLEdBQUEsRUFBQSxjQUFBLFFBQUEsUUFFQSxrQkFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLG9CQUNBLEVBQ0EsR0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsVUFDQSxHQUFBLEVBQUEsUUFBQSxlQUNBLEVBQUEsUUFBQSxjQUFBLEVBQUEsS0FBQSxLQUVBLEtBQUEsR0FBQSxFQUVBLE1BREEsR0FBQSxnQkFBQSxLQUFBLEtBQUEsT0FBQSxXQUNBLENBRUEsTUFBQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsS0FBQSxHQUFBLEtBQUEsY0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsa0JBQUEsR0FBQSxrQkFBQSxFQUFBLEVBQ0EsSUFBQSxFQUNBLE9BQUEsTUFDQSxJQUFBLEVBRUEsTUFEQSxNQUFBLGdCQUFBLEVBQUEsSUFDQSxJQUlBLGdCQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsTUFBQSxJQUNBLEVBQUEsS0FBQSxlQUFBLEdBQ0EsRUFBQSxRQUNBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxjQUNBLEVBQUEsRUFBQSxTQUNBLEdBQ0EsS0FBQSxFQUFBLEtBQ0EsTUFBQSxFQUFBLEtBQUEsRUFDQSxJQUFBLEVBQUEsSUFDQSxPQUFBLEVBQUEsSUFBQSxFQUVBLElBQUEsS0FBQSxRQUFBLFNBQUEsQ0FDQSxHQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxLQUFBLENBQ0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxRQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsRUFBQSxNQUNBLENBQ0EsR0FBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsTUFBQSxDQUNBLElBQ0EsRUFBQSxTQUNBLEVBQUEsT0FBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsRUFFQSxLQUFBLGNBQUEsS0FDQSxFQUFBLEdBQ0EsS0FBQSxVQUFBLGdCQUFBLEtBQUEsRUFBQSxFQUFBLElBRUEsa0JBQUEsV0FPQSxNQU5BLE1BQUEsaUJBQ0EsS0FBQSxNQUFBLEtBQUEsYUFBQSxLQUFBLEdBQUEsUUFBQSxPQUNBLFNBQUEsS0FBQSxNQUFBLFFBQUEsaUJBQUEsTUFBQSxLQUFBLE1BQUEsUUFBQSxhQUFBLEtBQ0EsTUFDQSxFQUFBLEtBQUEsTUFBQSxLQUFBLGtCQUFBLEtBQUEsUUFBQSxZQUVBLEtBQUEsZ0JBRUEsb0JBQUEsV0FDQSxHQUFBLEdBQ0EsRUFBQSxLQUFBLEVBT0EsT0FIQSxHQURBLGFBQUEsRUFBQSxJQUFBLGFBQUEsYUFBQSxFQUFBLElBQUEsYUFBQSxVQUFBLEVBQUEsSUFBQSxZQUNBLEVBRUEsRUFBQSxnQkFHQSxjQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsUUFBQSxRQUFBLEtBQUEsa0JBQUEsSUFFQSxrQkFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxLQUFBLE1BQUEsR0FBQSxFQUNBLElBQUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsYUFBQSxLQUFBLE1BQUEsR0FBQSxZQUdBLElBRkEsR0FBQSxFQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFVBQUEsS0FBQSxTQUNBLFVBQUEsS0FBQSxVQUNBLE1BQUEsS0FFQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEtBQUEsR0FBQSxNQUVBLEVBQUEsS0FBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLEdBRUEsTUFBQSxJQUVBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsVUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsV0FNQSxPQUpBLEdBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxFQUFBLEtBQUEsSUFFQSxFQUFBLFNBQUEsSUFFQSxXQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxPQUFBLFlBRUEsRUFBQSxLQUFBLGFBQUEsRUFBQSxHQUFBLElBQUEsS0FBQSxRQUFBLFNBQUEsSUFBQSxXQUNBLE1BQUEsR0FBQSxXQUFBLEVBQUEsT0FBQSxLQUNBLEtBRUEsT0FBQSxNQUFBLFVBQUEsUUFBQSxVQUFBLEVBQUEsRUFBQSxJQUVBLFNBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxLQUFBLFVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsRUFDQSxJQUNBLEVBQUEsU0FBQSxLQUdBLEVBQUEsT0FFQSxpQkFBQSxXQUNBLEtBQUEsZUFBQSxHQUVBLFNBQUEsV0FDQSxHQUFBLEdBQUEsSUFFQSxNQUFBLE9BQUEsSUFBQSxFQUFBLE1BQUEsS0FBQSxRQUNBLEtBQUEsR0FBQSxXQUFBLEdBRUEsS0FBQSxRQUFBLE9BQ0EsS0FBQSxNQUFBLFdBQUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FHQSxFQUFBLEtBQUEsS0FBQSxVQUFBLFdBQ0EsRUFBQSxXQUFBLEtBQUEsTUFLQSxJQUFBLElBQ0EsT0FBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEtBR0EsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEtBR0EsVUFBQSxXQUNBLE1BQUEsTUFBQSxXQUFBLEtBQUEsSUFBQSxJQUVBLFFBQUEsV0FDQSxLQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsc0JBR0EsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxjQUtBLEdBQUEsT0FBQSxFQUFBLFVBQUEsR0FTQSxFQUFBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLE1BQUEsVUFBQSxNQUFBLEtBQUEsVUFBQSxFQUVBLE9BQUEsTUFBQSxJQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsS0FBQSxFQUVBLE9BQUEsSUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxJQUFBLE1BQ0EsR0FBQSxJQUFBLEdBQ0EsZ0JBQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUVBLFVBSUEsTUFBQSxPQUFBLFlDenFCQSxTQUFBLEVBQUEsRUFBQSxHQUNBLFlBQ0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUNBLElBUUEsVUFBQSxZQVFBLFlBQUEsY0FRQSxhQUFBLGVBUUEsb0JBQUEsRUFTQSxzQkFBQSxFQVFBLGVBQUEsRUFRQSxlQUFBLEVBUUEsV0FBQSxLQVFBLGdCQUFBLEdBUUEsZ0JBQUEsS0FRQSxnQkFBQSxLQVFBLGNBQUEsTUFVQSxFQUFBLFlBU0EsRUFBQSxTQVFBLEVBQUEsWUFRQSxFQUFBLGFBU0EsRUFBQSxZQVFBLEVBQUEsYUFTQSxFQUFBLFVBUUEsRUFBQSxTQVNBLEVBQUEsT0FTQSxFQUFBLFFBU0EsRUFBQSxLQVNBLEVBQUEsV0FTQSxFQUFBLGlCQVNBLEVBQUEsT0FTQSxFQUFBLFFBU0EsRUFBQSxVQVNBLEVBQUEsUUFTQSxFQUFBLFlBU0EsRUFBQSxnQ0FBQSxFQUFBLFVBQUEsU0FBQSxXQUFBLEtBQUEsRUFBQSxVQUFBLGFBQUEsRUFBQSxjQVNBLEVBQUEsS0FDQSxFQUFBLEVBQUEsc0JBQ0EsRUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxjQUFBLE9BQUEsTUFDQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FFQSxLQURBLEdBQUEsSUFBQSxVQUFBLE9BQUEsTUFBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLEVBR0EsR0FGQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxXQUNBLElBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxPQUFBLEVBQUEsRUFBQSxHQUFBLE9BQUEsRUFHQSxRQUFBLEtBRUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLEdBQ0EsRUFFQSxLQUFBLEVBQ0EsRUFFQSxFQUFBLEVBQUEsT0FBQSxHQUFBLGNBQUEsRUFBQSxPQUFBLElBRUEsRUFBQSxFQUFBLGFBQ0EsRUFBQSxLQUFBLEVBU0EsRUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLENBV0EsT0FWQSxHQUFBLEVBQUEsY0FBQSxPQUNBLEVBQUEsRUFBQSxNQUNBLEVBQUEsU0FBQSxXQUNBLEVBQUEsTUFBQSxRQUNBLEVBQUEsT0FBQSxRQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsSUFBQSxVQUNBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsRUFBQSxFQUFBLFlBQUEsRUFBQSxZQUNBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsR0FFQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FHQSxPQUZBLEdBQUEsRUFBQSxVQUFBLFdBQ0EsRUFBQSw4QkFBQSxLQUFBLEtBSUEsRUFBQSxtQkFBQSxLQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsR0FBQSxRQUFBLE9BQUEsS0FFQSxJQUFBLEVBQUEsS0FOQSxHQWVBLEVBQUEsV0FDQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxFQUNBLEtBQUEsUUFBQSxFQUNBLElBQUEsRUFBQSxLQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsSUFDQSxLQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsaUJBQUEsR0FDQSxLQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsZUFBQSxHQUNBLEtBQUEsS0FBQSxLQUFBLElBQUEsS0FBQSxRQUNBLEtBQUEsU0FBQSxLQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsY0FDQSxLQUFBLFNBQUEsS0FBQSxXQUFBLEtBQUEsUUFBQSxVQUFBLEdBQ0EsS0FBQSxRQUFBLEtBQUEsU0FBQSxHQUNBLEtBQUEsaUJBQUEsRUFDQSxLQUFBLFFBQUEsb0JBQUEsTUFBQSxLQUFBLEdBQUEsTUFBQSx3QkFDQSxLQUFBLGtCQUVBLEtBQUEsV0FFQSxLQUFBLGVBQ0EsS0FBQSxZQUNBLEtBQUEsUUFzaUJBLE1BemhCQSxHQUFBLFVBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxLQUFBLFNBR0EsR0FBQSxFQUFBLE9BQUEsR0FDQSxJQUFBLEdBQUEsRUFBQSxjQUFBLE9BQUEsR0FBQSxJQUFBLEdBQUEsRUFBQSxjQUFBLE9BQUEsSUFDQSxFQUFBLHFCQUVBLElBQUEsRUFBQSxPQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsZ0JBQUEsRUFBQSxjQUFBLFdBQ0EsUUFFQSxJQUFBLEdBQUEsRUFBQSxjQUFBLFdBQUEsR0FBQSxJQUFBLEdBQUEsRUFBQSxjQUFBLFdBQUEsSUFDQSxFQUFBLG1CQVlBLEVBQUEsVUFBQSxnQkFBQSxXQUNBLEtBQUEsU0FBQSxLQUNBLHdCQUFBLFVBRUEsS0FBQSxvQkFBQSxFQUNBLEtBQUEsVUFBQSxHQVdBLEVBQUEsVUFBQSxtQkFBQSxXQUNBLEdBQUEsR0FBQSxDQUNBLEdBQUEsS0FBQSxRQUNBLEtBQUEsYUFBQSxFQUFBLGFBQUEsRUFBQSxhQUNBLEtBQUEsY0FBQSxLQUFBLGtCQUFBLEVBQ0EsS0FBQSxpQkFBQSxFQUFBLFVBQ0EsRUFBQSxLQUFBLGlCQUFBLEtBQUEsaUJBQUEsT0FBQSxLQUFBLGlCQUFBLEtBQUEsaUJBQUEsS0FBQSxPQUNBLEtBQUEsaUJBQUEsS0FBQSxpQkFDQSxTQUFBLEdBQ0EsS0FBQSxJQUFBLFFBQUEsVUFDQSxTQUFBLEtBQUEsaUJBQ0EsUUFBQSxLQUFBLGFBQ0EsVUFBQSxJQUdBLEtBQUEscUJBQ0EsS0FBQSxhQUFBLEtBQUEsV0FBQSxLQUFBLGFBQ0EsS0FBQSxVQUFBLElBQUEsS0FBQSxhQUFBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLGFBQUEsS0FBQSxlQVlBLEVBQUEsVUFBQSxrQkFBQSxXQUNBLEdBQUEsRUFDQSxJQUNBLEtBQ0EsRUFBQSxHQUFBLGdCQUFBLEtBQUEsVUFBQSxPQUVBLEdBQ0EsSUFBQSxLQUFBLFdBR0EsR0FDQSxHQUFBLEtBQUEsV0FDQSxFQUFBLEtBQUEsV0FFQSxLQUFBLFVBQUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxZQUVBLE1BREEsR0FBQSxVQUFBLEtBQ0EsRUFBQSxPQUFBLElBQUEsS0FFQSxRQUVBLEtBQUEsT0FBQSxJQUFBLElBV0EsRUFBQSxVQUFBLGFBQUEsV0FDQSxLQUFBLFFBQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBU0EsTUFSQSxHQUFBLGdCQUFBLEVBQ0EsRUFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsU0FBQSxJQUNBLEVBQUEsT0FBQSxHQUFBLEVBQUEsVUFDQSxFQUFBLFFBQUEsR0FFQSxFQUFBLEtBQUEsU0FBQSxVQUNBLEVBQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsS0FBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLEtBQ0EsSUFFQSxNQUNBLEtBQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQVFBLE1BUEEsR0FBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxFQUFBLGNBQ0EsRUFBQSxTQUNBLEVBQUEsa0JBQUEsRUFBQSxjQUFBLEVBQUEsZ0JBQUEsRUFBQSxhQUNBLEVBQUEsSUFBQSxRQUFBLGFBQ0EsSUFBQSxFQUFBLGtCQUFBLElBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLGNBRUEsSUFFQSxNQUNBLEdBQUEsU0FBQSxHQUNBLE1BQUEsWUFLQSxNQUpBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLEtBQUEsWUFBQSxVQUNBLEVBQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLEtBQ0EsSUFFQSxNQUNBLE9BQUEsU0FBQSxHQUNBLE1BQUEsWUFDQSxFQUFBLFVBRUEsTUFDQSxTQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FJQSxNQUhBLEdBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLFFBQUEsR0FBQSxFQUFBLGFBQ0EsRUFBQSxTQUNBLEVBQUEsT0FBQSxLQUFBLElBQ0EsSUFFQSxNQUNBLE9BQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLEVBQUEscUJBQ0EsRUFBQSxpQkFHQSxFQUFBLHFCQUNBLEVBQUEsUUFBQSxFQUFBLFVBQ0EsRUFBQSxxQkFFQSxNQUFBLElBR0EsRUFBQSxrQkFBQSxFQUFBLGNBQ0EsRUFBQSxRQUFBLHNCQUNBLEVBQUEsaUJBQUEsRUFBQSxHQUVBLEVBQUEsZ0JBQUEsRUFBQSxjQUNBLEVBQUEsSUFBQSxRQUFBLGNBRUEsSUFBQSxFQUFBLG1CQUNBLEVBQUEsUUFBQSxzQkFDQSxFQUFBLGlCQUFBLEVBQUEsR0FFQSxJQUFBLEVBQUEsZUFDQSxFQUFBLElBQUEsUUFBQSxrQkFJQSxNQUNBLE1BQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLEdBQUEsRUFDQSxJQUFBLE1BQUEsRUFRQSxNQUxBLEdBQUEsRUFBQSxPQUFBLEVBQUEsWUFBQSxFQUFBLGVBQUEsRUFBQSxjQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsZ0JBQUEsRUFBQSxjQUFBLE9BQ0EsSUFDQSxFQUFBLFVBQUEsRUFBQSxHQUVBLEVBQUEsVUFDQSxJQUVBLE1BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsRUFBQSxlQUdBLE1BQUEsTUFBQSxFQUFBLFNBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxRQUFBLEdBQUEsTUFBQSxFQUFBLFdBREEsU0FJQSxRQVdBLEVBQUEsVUFBQSxVQUFBLFdBQ0EsR0FBQSxFQUNBLE1BQUEsZUFDQSxFQUFBLEtBQUEsT0FDQSxLQUFBLFFBQUEsZUFDQSxLQUFBLElBQUEsS0FBQSxFQUFBLEVBQUEsSUFFQSxLQUFBLHFCQUNBLEtBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBRUEsS0FBQSxTQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FVQSxFQUFBLFVBQUEsYUFBQSxXQUNBLEdBQUEsRUFDQSxHQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLHFCQUNBLEtBQUEsT0FBQSxTQUNBLEtBQUEsS0FBQSxVQUVBLEtBQUEsU0FBQSxPQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBV0EsRUFBQSxVQUFBLFNBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBdUJBLE9BdEJBLEdBQUEsS0FBQSxRQUNBLEVBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxjQUNBLEVBQUEsS0FBQSxJQUFBLFNBQUEsSUFBQSxJQUFBLFFBQUEsRUFBQSxTQUFBLElBQUEsR0FBQSxRQUNBLEtBQUEsSUFBQSxPQUFBLGVBQUEsRUFBQSxpQkFBQSxFQUFBLGNBRUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxTQUFBLElBQUEsR0FDQSxLQUFBLE9BQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxHQUNBLElBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxpQkFBQSxLQUFBLFFBQUEsTUFBQSxpQkFBQSxpQkFBQSxRQUFBLFlBQUEsSUFDQSxHQUNBLE1BQUEsSUFDQSxjQUFBLEVBQUEsS0FFQSxJQUNBLEdBQ0EsT0FBQSxHQUVBLEtBQUEsSUFBQSxTQUFBLGtCQUVBLE1BQUEsR0FDQSxLQUFBLFNBQUEsSUFBQSxHQUVBLE1BU0EsRUFBQSxVQUFBLFFBQUEsV0FDQSxLQUFBLFNBQUEsRUFDQSxLQUFBLG9CQUNBLEtBQUEsS0FBQSxPQUVBLEtBQUEsYUFZQSxFQUFBLFVBQUEsTUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxNQUFBLG9CQUNBLEtBQUEsY0FBQSxLQUFBLFFBQUEsYUFDQSxTQUVBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxRQUFBLFdBQUEsUUFDQSxLQUFBLFdBQUEsT0FFQSxLQUFBLFNBQ0EsS0FBQSxVQUVBLEVBQUEsS0FBQSxRQUNBLEVBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxVQUNBLEdBQ0EsS0FBQSxTQUFBLEtBQ0EsT0FBQSxLQUFBLFNBQUEsV0FHQSxFQUFBLEVBQUEsYUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLElBQUEsSUFBQSxjQUFBLElBQ0EsRUFBQSxJQUNBLEtBQUEsSUFBQSxPQUFBLElBQ0EsS0FBQSxJQUFBLE9BQUEsRUFBQSxhQUFBLEVBQUEsRUFBQSxFQUFBLGVBRUEsRUFBQSxLQUFBLEtBQUEsYUFBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLEtBQUEsSUFBQSxPQUFBLElBQ0EsRUFBQSxTQUFBLEtBQUEsS0FBQSxJQUFBLFVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLGdCQUNBLEVBQUEsS0FBQSxRQUFBLGdCQUNBLE1BQUEsS0FBQSxRQUFBLGlCQUFBLEVBQUEsS0FBQSxRQUFBLGtCQUNBLEVBQUEsS0FBQSxRQUFBLGlCQUVBLElBQUEsR0FBQSxFQUFBLFlBQUEsSUFDQSxHQUFBLEdBRUEsS0FBQSxhQUFBLEVBQUEsRUFDQSxLQUFBLGNBQUEsRUFDQSxLQUFBLFdBQUEsRUFDQSxLQUFBLGdCQUFBLEVBQ0EsS0FBQSxhQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxPQUFBLE9BQUEsR0FDQSxLQUFBLE9BQUEsU0FDQSxLQUFBLEtBQUEsT0FDQSxLQUFBLFVBQUEsRUFDQSxFQUFBLGVBQUEsRUFBQSxjQUFBLEtBQUEsS0FBQSxhQUFBLElBQUEsRUFBQSxjQUFBLElBQUEsR0FDQSxLQUFBLEtBQUEsT0FDQSxLQUFBLFVBQUEsR0FDQSxLQUFBLEdBQUEsZUFBQSxFQUFBLGNBQUEsSUFBQSxFQUNBLEtBQUEsT0FBQSxPQUVBLEtBQUEsT0FBQSxPQUVBLEtBQUEsS0FBQSxLQUNBLFFBQUEsS0FBQSxRQUFBLGNBQUEsRUFBQSxHQUNBLFdBQUEsS0FBQSxRQUFBLGNBQUEsVUFBQSxLQUVBLEVBQUEsS0FBQSxTQUFBLElBQUEsYUFDQSxXQUFBLEdBQUEsYUFBQSxLQUNBLEVBQUEsU0FBQSxLQUFBLFNBQUEsSUFBQSxTQUFBLElBQ0EsR0FDQSxLQUFBLFNBQUEsS0FDQSxNQUFBLEdBQ0EsWUFBQSxLQUlBLE9BV0EsRUFBQSxVQUFBLE9BQUEsV0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFFBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxTQUNBLEtBQUEsUUFBQSxLQUFBLElBQUEsS0FBQSxhQUFBLEtBQUEsU0FDQSxLQUFBLFNBQUEsVUFBQSxLQUFBLGFBQUEsS0FBQSxRQUFBLEtBQUEsY0FDQSxLQUFBLHFCQUNBLEtBQUEscUJBQ0EsS0FBQSxxQkFFQSxNQVZBLFFBdUJBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFNBQUEsVUFBQSxLQUFBLGNBQUEsS0FBQSxTQUFBLFNBQUEsR0FBQSxRQUFBLEdBQ0EsS0FBQSxPQUFBLFVBQ0EsTUFMQSxRQWtCQSxFQUFBLFVBQUEsVUFBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLFVBR0EsS0FBQSxTQUFBLFdBQUEsR0FBQSxRQUFBLEdBQ0EsS0FBQSxPQUFBLFVBQ0EsTUFMQSxRQWtCQSxFQUFBLFVBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLFVBR0EsS0FBQSxVQUFBLEtBQUEsSUFBQSxLQUFBLEdBQUEsSUFBQSxHQUFBLFdBQ0EsTUFKQSxRQWlCQSxFQUFBLFVBQUEsS0FBQSxXQVVBLE1BVEEsSUFBQSxLQUFBLFlBQ0EsRUFBQSxLQUFBLFdBQ0EsS0FBQSxVQUFBLE1BRUEsS0FBQSxTQUFBLEVBQ0EsS0FBQSxlQUNBLEtBQUEsb0JBQ0EsS0FBQSxLQUFBLE9BRUEsTUFZQSxFQUFBLFVBQUEsUUFBQSxXQWlCQSxNQWhCQSxNQUFBLFNBQ0EsS0FBQSxRQUVBLEtBQUEsb0JBQUEsS0FBQSxLQUFBLFFBQ0EsS0FBQSxLQUFBLFNBRUEsR0FDQSxLQUFBLFNBQUEsT0FBQSxJQUVBLEtBQUEsU0FBQSxXQUFBLFlBQ0EsS0FBQSxJQUFBLFNBQUEsbUJBQ0EsS0FBQSxJQUFBLFlBQUEsaUJBQ0EsS0FBQSxTQUFBLEtBQ0EsTUFBQSxNQUdBLE1BYUEsRUFBQSxVQUFBLE1BQUEsV0FDQSxPQUFBLEtBQUEsb0JBR0EsS0FBQSxVQUdBLEtBQUEsUUFDQSxLQUFBLEtBQUEsU0FBQSxXQUNBLFdBQUEsU0FBQSxHQUNBLE1BQUEsWUFDQSxFQUFBLEtBQUEsWUFBQSxhQUVBLE1BQUEsS0FBQSxRQUFBLFlBQ0EsTUFiQSxRQWdCQSxLQUdBLEVBQUEsR0FBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsS0FBQSxXQUNBLEdBQUEsR0FBQSxDQUtBLEtBSkEsRUFBQSxLQUFBLGdCQUNBLEVBQUEsRUFBQSxVQUFBLEVBQUEsR0FDQSxLQUFBLGFBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxJQUVBLEdBQUEsZ0JBQUEsR0FBQSxDQUVBLEdBREEsRUFBQSxPQUFBLEVBQUEsUUFBQSxHQUNBLE1BQUEsRUFBQSxhQUNBLE1BQUEsR0FBQSxhQUFBLEVBQUEsYUFFQSxJQUFBLE1BQUEsRUFBQSxVQUNBLE1BQUEsR0FBQSxVQUFBLEVBQUEsVUFFQSxJQUFBLEVBQUEsU0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLFNBRUEsSUFBQSxXQUFBLEVBQUEsT0FDQSxNQUFBLEdBQUEsYUFBQSxFQUVBLElBQUEsUUFBQSxFQUFBLE9BQ0EsTUFBQSxHQUFBLFVBQUEsRUFFQSxJQUFBLEVBQUEsUUFBQSxFQUFBLGlCQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxPQUVBLElBQUEsRUFBQSxLQUNBLE1BQUEsR0FBQSxNQUVBLElBQUEsRUFBQSxRQUNBLE1BQUEsR0FBQSxTQUVBLElBQUEsRUFBQSxNQUNBLE1BQUEsR0FBQSxRQUdBLE1BQUEsR0FBQSxXQUdBLEVBQUEsR0FBQSxhQUFBLFlBQUEsR0FDQSxNQUFBLE9BQUEsU0M5N0JBLElBQUEsT0FFQSxZQUdBLFdBR0EsVUFBQSxJQUdBLFNBQUEsRUFHQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FFQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBR0EsT0FBQSxJQUlBLE1BQUEsU0FBQSxHQUNBLE1BQUEsYUFBQSxPQUFBLEVBQUEsT0FBQSxHQUFBLEdBSUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsRUFDQSxLQUFBLEtBQUEsRUFDQSxLQUFBLE9BQUEsRUFDQSxLQUFBLEtBQUEsSUFHQSxLQUFBLFNBQUEsV0FDQSxNQUFBLE1BQUEsSUFBQSxLQUFBLEtBQUEsT0FBQSxJQUtBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxDQUdBLElBQUEsRUFBQSxFQUFBLFFBQUEsQ0FHQSxFQUFBLEVBQUEsTUFBQSxLQUFBLFdBR0EsRUFBQSxFQUFBLFFBQUEsTUFFQSxLQUVBLEVBQUEsS0FBQSxNQUFBLEdBQUEsTUFBQSxNQUFBLEdBQUEsT0FBQSxJQUdBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FFQSxNQUFBLEtBS0EsTUFBQSxJQUlBLE1BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUdBLEdBQ0EsRUFKQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFJQSxJQUFBLFlBQUEsT0FJQSxJQUhBLEVBQUEsR0FDQSxFQUFBLEVBQUEsU0FFQSxFQUFBLEdBQ0EsR0FDQSxLQUFBLEdBQUEsTUFBQSxNQUFBLEVBQUEsSUFFQSxHQUFBLEVBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUdBLGFBQUEsVUFDQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEdBR0EsT0FBQSxJQUlBLE1BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxxQkFHQSxRQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLElBSUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLElBQ0EsRUFBQSxNQUNBLElBR0EsR0FDQSxFQUpBLEVBQUEsU0FBQSxFQUFBLHNCQUFBLEVBQUEsU0FDQSxFQUFBLEdBQUEsUUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLE1BQUEsT0FHQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsR0FDQSxFQUFBLENBRUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLEdBRUEsRUFBQSxHQUFBLFFBQUEsT0FBQSxHQUNBLElBR0EsSUFHQSxJQUFBLEdBWEEsS0FxQkEsTUFMQSxHQUFBLEVBQUEsUUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFHQSxFQUFBLFVBQUEsRUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEtBS0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEVBQUEsS0FHQSxJQUlBLEdBRUEsRUFFQSxFQUlBLEVBRUEsRUFFQSxFQUVBLEVBRUEsRUFFQSxFQUVBLEVBeEJBLEVBQUEsaUJBRUEsRUFBQSxFQUFBLE1BQUEsT0FRQSxLQWdCQSxFQUFBLEVBQ0EsRUFBQSxDQTRCQSxLQXpCQSxFQUFBLE9BQ0EsS0FBQSxNQUFBLEVBQUEsTUFBQSxLQUFBLE9BSUEsRUFBQSxVQUNBLEtBQUEsTUFBQSxFQUFBLFNBQUEsS0FBQSxVQUlBLEVBQUEsU0FDQSxLQUFBLE1BQUEsRUFBQSxRQUFBLEtBQUEsU0FJQSxFQUFBLFlBQ0EsS0FBQSxVQUFBLEVBQUEsV0FJQSxTQUFBLEVBQUEsVUFDQSxLQUFBLFFBQUEsRUFBQSxTQUlBLEVBQUEsRUFBQSxNQTZCQSxHQTVCQSxFQUFBLE9BQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxRQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsUUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxHQUFBLEtBQUEsRUFBQSxLQUFBLEtBRUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxRQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQUEsS0FDQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFFBQUEsU0FBQSxJQUFBLE1BQUEsS0FBQSxRQUFBLE9BQ0EsRUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEtBQUEsR0FDQSxFQUFBLEVBQUEsR0FHQSxJQUFBLEVBQUEsU0FDQSxHQUFBLGNBSUEsR0FBQSxFQUFBLFFBQUEsTUFBQSxHQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxNQUFBLEdBQUEsT0FBQSxJQUlBLHVCQUFBLEtBQUEsR0FBQSxDQUtBLEdBQUEsVUFBQSxFQUFBLEtBQUEsUUFBQSxJQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxPQUlBLElBQUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxZQUFBLFlBQ0EsRUFBQSxLQUVBLEVBQUEsS0FBQSxNQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxPQUlBLElBQUEsRUFBQSxRQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxPQUlBLElBQUEsTUFBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsT0FJQSxJQUFBLEVBQUEsUUFBQSxLQUFBLEdBQUEsQ0FhQSxJQVpBLEVBQUEsRUFBQSxNQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsRUFBQSxJQUVBLEVBQ0EsRUFBQSxHQUdBLEVBQUEsRUFDQSxFQUFBLEdBSUEsR0FBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxLQUdBLEdBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxPQUlBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUlBLFlBQUEsT0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsR0FJQSxFQUNBLEVBQUEsRUFBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLE9BSUEsRUFBQSxlQUFBLEtBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUlBLGFBQUEsU0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsSUFJQSxJQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxHQUdBLE1BQUEsTUFBQSxRQUFBLEVBQUEsUUFBQSxTQUFBLE1BQUEsR0FJQSxLQUFBLE9BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsRUFBQSxJQUFBLE9BQUEsUUFBQSxFQUFBLEdBRUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsSUFBQSxPQUFBLE9BQUEsR0FBQSxHQUVBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLElBQUEsRUFBQSxFQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxHQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsR0FBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxJQUFBLEVBQUEsR0FBQSxHQUVBLFFBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsS0FBQSxNQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsUUFBQSxFQUFBLEtBQUEsS0FBQSxHQUFBLEdBQUEsR0FFQSxRQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsR0FFQSxPQUFBLFNBQUEsR0FDQSxNQUFBLFFBQUEsR0FBQSxlQUVBLFNBQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLGVBRUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsY0FBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLGlCQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLE1BQUEsR0FFQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsTUFDQSxPQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsS0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxRQUFBLFVBQUEsTUFFQSxNQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsT0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLFFBQUEsZUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLE9BQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLFFBQUEsU0FBQSxHQUNBLFNBQUEsT0FBQSxHQUFBLFdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxJQUVBLE1BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEtBRUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxHQUFBLE1BRUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEdBQUEsSUFFQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsTUFBQSxRQUFBLFFBQUEsRUFBQSxNQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FFQSxVQUFBLE9BQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxTQUVBLElBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxHQUFBLFFBQUEsSUFFQSxJQUFBLFNBQUEsRUFBQSxHQUNBLE9BQUEsR0FBQSxHQUVBLFVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxHQUFBLEdBQUEsR0FBQSxHQUVBLElBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUFBLEdBQUEsR0FBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUFBLEVBQUEsUUFBQSxhQUFBLE1BRUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxXQUFBLElBRUEsS0FBQSxTQUFBLEdBQ0EsUUFBQSxHQUVBLE1BQUEsU0FBQSxHQUNBLE9BQUEsR0FFQSxNQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEVBQUEsS0FBQSxHQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsTUFBQSxLQUFBLE1BQUEsS0FBQSxVQUFBLEtBRUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsUUFBQSxHQUFBLEVBQUEsSUFFQSxJQUFBLFNBQUEsR0FFQSxNQURBLFNBQUEsSUFBQSxHQUNBLElBS0Esa0JBQUEsUUFBQSxVQUFBLE9BQ0EsT0FBQSxVQUFBLEtBQUEsV0FDQSxNQUFBLE1BQUEsUUFBQSxhQUFBLE1BS0EsbUJBQUEsU0FBQSxPQUFBLFFBQ0EsT0FBQSxRQUFBLEtBRUEsa0JBQUEsU0FBQSxPQUFBLEtBQ0EsT0FBQSxXQUNBLE1BQUEsT0hoZUEsSUFBQSxRQUFBLFNBQUEsR0FFQSxZQTJDQSxTQUFBLEtBSUEsR0FDQSxHQURBLEVBQUEsRUFBQSxVQU9BLE9BTEEsWUFBQSxXQUNBLEdBQUEsWUFBQSxVQUFBLE1BQUEsTUFBQSxTQUFBLFVBQUEsWUFDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLElBQ0EsS0FDQSxFQUFBLFVBUUEsUUFBQSxHQUFBLEdBR0EsQ0FBQSxHQUFBLE1BQ0EsSUFDQSxHQUFBLE9BYUEsTUFYQSxHQUFBLEtBQUEsTUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsT0FFQSxHQUFBLEtBQUEsRUFBQSxJQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsR0FBQSxJQUNBLEtBQUEsV0FDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLFNBS0EsRUFBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLFVBUUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxFQUVBLEtBQ0EsRUFBQSwwREFFQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsQ0FDQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsS0FJQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLE9BQ0EsRUFBQSxFQUFBLElBQUEsRUFFQSxHQUFBLEtBQUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsT0FVQSxRQUFBLEdBQUEsRUFBQSxHQUVBLEdBbUJBLEdBQ0EsRUFwQkEsS0FDQSxFQUFBLHluQkFpQkEsRUFBQSxFQUFBLFNBR0EsUUFBQSxHQUNBLElBQUEsSUFDQSxFQUFBLFlBQ0EsRUFBQSxRQUNBLE1BQ0EsS0FBQSxNQUNBLEVBQUEsVUFDQSxFQUFBLE1BQ0EsTUFDQSxLQUFBLEtBQ0EsRUFBQSxlQUNBLEVBQUEsV0FDQSxNQUNBLEtBQUEsS0FDQSxFQUFBLGtCQUNBLEVBQUEsY0FDQSxNQUNBLEtBQUEsS0FDQSxFQUFBLGNBQ0EsRUFBQSxVQUNBLE1BQ0EsS0FBQSxRQUNBLEVBQUEsZUFDQSxFQUFBLFdBQ0EsTUFDQSxLQUFBLFFBQ0EsRUFBQSxhQUNBLEVBQUEsVUFLQSxHQUFBLEdBQUEsRUFBQSxTQUFBLFNBQ0EsRUFBQSxLQUFBLEtBQUEsRUFBQSxFQUFBLFVBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxhQUNBLEVBQUEsR0FBQSxNQUFBLEVBQUEsVUFDQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEtBQUEsTUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLEdBQUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxVQUNBLEdBQUEsUUFBQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsWUFDQSxHQUFBLFFBQUEsRUFBQSxFQUVBLElBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxRQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxZQUNBLEdBQUEsUUFBQSxFQUFBLEVBRUEsSUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsQ0FHQSxJQUFBLElBQUEsS0FBQSxTQUFBLEVBQ0EsR0FBQSxJQUFBLENBRUEsSUFBQSxJQUFBLEtBQUEsU0FBQSxFQUNBLEdBQUEsSUFBQSxDQUtBLElBQ0EsTUFBQSxFQUNBLElBQUEsRUFBQSxLQUNBLFlBQUEsRUFBQSxLQUNBLFlBQUEsRUFBQSxZQUNBLFVBQUEsRUFBQSxVQUNBLGlCQUFBLEVBQ0EsU0FBQSxFQUNBLFVBQUEsRUFBQSxjQUNBLE9BQUEsRUFBQSxPQUNBLFNBQUEsRUFBQSxTQUNBLElBQUEsT0FBQSxFQUNBLElBQUEsT0FBQSxFQUdBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLE9BQUEsR0FNQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsR0FBQSxFQUNBLEtBQ0EsRUFBQSxpRkFFQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsR0FBQSxNQUFBLEtBQ0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEtBUUEsUUFBQSxLQUNBLEdBQ0EsR0FBQSxFQURBLEVBQUEsR0FBQSxNQUdBLElBQ0EsR0FBQSxRQUNBLEVBQUEsUUFDQSxJQUFBLEdBQUEsNkpBS0EsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsQ0FFQSxFQUFBLFFBQUEsRUFBQSxVQUFBLE1BQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxtQkFBQSxTQUNBLFFBQUEsT0FFQSxNQUFBLE9BQ0EsSUFBQSxZQUdBLEVBQUEsRUFBQSxFQUFBLEVBT0EsS0FOQSxFQUFBLEtBQUEsTUFDQSxJQUFBLEVBQ0EsSUFBQSxJQUVBLEVBQUEsTUFBQSxFQUFBLElBRUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLFFBQUEsRUFBQSxHQUFBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLENBRUEsR0FBQSxNQUFBLE1BQ0EsTUFBQSxFQUNBLElBQUEsS0FLQSxHQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsR0FTQSxRQUFBLEtBRUEsR0FBQSxNQUNBLEVBQUEsbUZBRUEsR0FBQSxRQUFBLFNBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUVBLElBQ0EsUUFBQSxFQUNBLEdBQUEsRUFHQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEtBQUEsTUFBQSxPQUFBLEtBUUEsUUFBQSxLQUVBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBRUEsRUFBQSxFQUFBLGVBQ0EsT0FDQSxLQUFBLEtBQUEsS0FBQSxFQUFBLElBQUEsR0FBQSxNQUNBLE9BRUEsRUFBQSxTQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsQ0FDQSxHQUFBLEtBQ0EsS0FBQSxJQVFBLFFBQUEsS0FDQSxHQUFBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsRUFBQSxTQUFBLEVBQUEsSUFBQSxRQUNBLEdBQUEsU0FBQSxFQUFBLEdBRUEsRUFBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsS0FDQSxFQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxJQUNBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLEtBbUJBLFFBQUEsS0FxREEsUUFBQSxHQUFBLEdBQ0EsRUFBQSxpQkFDQSxLQUFBLFNBQUEsS0FBQSxVQUNBLEtBQUEsVUFBQSxLQUFBLFdBQ0EsS0FBQSxjQUFBLEVBQUEsUUFDQSxLQUFBLGNBQUEsRUFBQSxRQUNBLEdBQUEsRUFDQSxHQUFBLEVBR0EsRUFBQSxHQUFBLG1CQUFBLEdBRUEsRUFBQSxHQUFBLHNCQUFBLEdBR0EsUUFBQSxLQUNBLElBQ0EsR0FBQSxFQUNBLEVBQUEsSUFBQSxtQkFBQSxHQUNBLEVBQUEsSUFBQSxzQkFBQSxJQUlBLFFBQUEsR0FBQSxHQUNBLEdBQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxFQUFBLFFBQUEsS0FBQSxjQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsYUFHQSxHQUFBLEtBQUEsSUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEdBQUEsQ0FFQSxJQUFBLEdBQUEsS0FBQSxTQUFBLEVBQ0EsRUFBQSxLQUFBLFVBQUEsQ0FFQSxHQUFBLElBQ0EsRUFBQSxHQUdBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUdBLEVBQUEsRUFBQSxLQUFBLElBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxLQUFBLElBQUEsR0FBQSxJQUdBLEVBQUEsRUFBQSxHQUFBLEtBQUEsSUFBQSxLQUNBLEVBQUEsRUFBQSxHQUFBLEtBQUEsSUFBQSxJQUdBLEVBQUEsTUFBQSxLQUNBLElBQUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxPQUVBLEVBQUEsS0FDQSxJQUFBLEVBQUEsT0FFQSxFQUFBLEtBQ0EsS0FBQSxFQUFBLE1BRUEsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxLQUNBLEtBQUEsRUFBQSxRQVVBLFFBQUEsS0FDQSxHQUFBLEdBQUEsU0FBQSxFQUFBLE1BQUEsSUFBQSxRQUNBLEdBQUEsU0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEdBUUEsUUFBQSxLQUNBLEdBQUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxNQUFBLEtBQUEsTUFDQSxHQUFBLEVBQUEsR0FRQSxRQUFBLEdBQUEsR0FDQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLENBQ0EsSUFBQSxHQUFBLFNBQUEsaUJBQUEsRUFBQSxRQUFBLEVBQUEsU0FDQSxFQUFBLEVBQUEsR0FBQSxHQUFBLGlCQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsUUFBQSxpQkFFQSxFQUFBLEVBQUEsS0FBQSxLQUFBLEtBQUEsUUFDQSxFQUFBLEVBQUEsS0FBQSxLQUNBLEdBQUEsRUFBQSxFQUVBLElBQUEsR0FBQSxTQUFBLEVBQUEsSUFBQSxTQUFBLEdBQUEsRUFBQSxPQUNBLEdBQUEsU0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLElBVUEsUUFBQSxHQUFBLEdBaUNBLFFBQUEsS0FDQSxJQUFBLFNBQUEsRUFBQSxJQUFBLFdBQ0EsRUFBQSxPQUFBLFNBQ0EsT0FBQSxHQUNBLElBQUEsU0FsQ0EsSUFFQSxFQUFBLE1BQ0EsSUFBQSxxQkFDQSxNQUNBLE9BQUEsR0FFQSxTQUFBLE9BQ0EsT0FBQSxJQUVBLEtBQUEsU0FBQSxHQUNBLEVBQ0EsS0FBQSxjQUNBLEtBQUEsR0FDQSxFQUNBLEtBQUEsU0FBQSxjQUNBLE9BQUEsTUFDQSxzQkFBQSxFQUNBLGVBQUEsSUFFQSxFQUFBLFNBQ0EsTUFBQSxHQUNBLElBQUEsUUFBQSxXQUNBLEVBQUEsS0FBQSxXQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxpQkFDQSxVQW9CQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLGVBQUEsS0FBQSxTQUFBLE1BQUEsS0FBQSxFQUVBLEdBQUEsU0FBQSxJQUNBLEVBQUEsWUFBQSxHQUNBLEVBQUEsTUFBQSxZQUFBLFlBRUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLFNBQUEsV0FPQSxRQUFBLEtBQ0EsRUFBQSxRQUFBLEdBQ0EsRUFBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsSUFDQSxFQUFBLEtBQUEsZ0JBQUEsRUFBQSxLQUFBLFFBQUEsV0FVQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxDQUNBLEdBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLEtBQ0EsRUFBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsSUFDQSxJQUFBLEdBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxLQVFBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsZUFBQSxLQUFBLFNBQUEsTUFBQSxLQUFBLEdBQ0EsRUFBQSxFQUFBLElBQUEsT0FBQSxNQUFBLE1BQUEsR0FDQSxFQUFBLEVBQUEsSUFBQSxPQUFBLE1BQUEsTUFBQSxHQUNBLEVBQUEsRUFBQSxNQUNBLFFBQUEsR0FDQSxJQUFBLFlBRUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxHQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsS0FFQSxFQUFBLElBQUEsTUFBQSxFQUFBLE1BQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxNQUVBLE1BQ0EsS0FBQSxXQUVBLEdBQUEsR0FBQSxFQUFBLEVBQUEsQ0FDQSxHQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxJQUFBLE1BQUEsRUFBQSxLQUVBLEVBQUEsSUFBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLElBQUEsTUFBQSxFQUFBLFFBV0EsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxlQUFBLEtBQUEsU0FBQSxNQUFBLEtBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxJQUFBLFFBSUEsUUFIQSxFQUFBLGtCQUNBLFFBQUEsSUFBQSxHQUVBLEdBQ0EsSUFBQSxVQUNBLEVBQUEsS0FBQSxNQUFBLFNBQUEsRUFBQSxJQUNBLE1BQ0EsS0FBQSxXQUNBLEVBQUEsS0FBQSxNQUFBLFNBQUEsRUFBQSxNQXpUQSxHQUFBLEdBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxTQUVBLEdBREEsRUFBQSxZQUNBLEVBQUEsU0FDQSxHQUFBLEVBQ0EsR0FBQSxFQUVBLEVBQUEsRUFBQSwwQ0FDQSxJQUNBLEdBQUEsS0FBQSxFQUFBLFdBQ0EsRUFBQSxLQUFBLEtBQUEsYUFFQSxJQUFBLEdBQUEsRUFBQSxNQUVBLEVBQUEsRUFBQSx5Q0FDQSxJQUNBLEdBQUEsS0FBQSxFQUFBLFdBQ0EsRUFBQSxLQUFBLEtBQUEsV0FBQSxFQUFBLE1BQUEsVUFFQSxJQUFBLEdBQUEsRUFBQSxLQUdBLEdBQUEsS0FBQSxvQkFBQSxTQUlBLEVBQUEsR0FBQSx1QkFBQSxHQU9BLEVBQUEsR0FBQSxRQUFBLEdBR0EsRUFBQSxHQUFBLFFBQUEsYUFBQSxHQUdBLEVBQUEsR0FBQSxRQUFBLEtBQUEsR0FDQSxJQUdBLEVBQUEsR0FBQSxRQUFBLEtBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxPQUFBLEdBRUEsRUFBQSxHQUFBLFFBQUEsT0FBQSxHQWtSQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsUUFDQSxFQUFBLDJCQUlBLEdBQUEsSUFBQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsQ0FFQSxJQUFBLE1BQ0EsRUFBQSwrUUFLQTtFQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FFQSxHQUNBLE1BQUEsRUFDQSxRQUFBLEVBR0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEtBR0EsRUFBQSxLQUFBLEdBR0EsRUFBQSxLQUFBLEVBQUEsS0FBQSxjQUFBLFdBRUEsSUFBQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEtBQUEsYUFFQSxFQUFBLE1BQUEsS0FBQSxVQUFBLFNBQUEsU0FJQSxFQUNBLEtBQUEsU0FBQSxjQUNBLE9BQUEsTUFDQSxPQUFBLEVBQ0Esc0JBQUEsTUFXQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsK0JBRUEsS0FDQSxFQUFBLDJKQUVBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUNBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQUdBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLEdBQ0EsRUFDQSxLQUFBLFNBQUEsY0FDQSxPQUFBLE1BQ0EsT0FBQSxFQUNBLHNCQUFBLElBSUEsUUFBQSxLQTJEQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLFVBQ0EsRUFBQSxFQUFBLFNBQUEsT0FDQSxFQUFBLEVBQUEsTUFBQSxLQUFBLFdBQ0EsRUFBQSxFQUFBLEtBQUEsY0FBQSxPQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxhQUFBLEdBR0EsSUFVQSxFQUFBLFlBQUEsT0FDQSxFQUFBLEtBQUEsVUFBQSxZQUFBLFNBVEEsRUFBQSxZQUFBLE9BQ0EsRUFBQSxPQUNBLEVBQUEsS0FBQSxVQUFBLFlBQUEsT0FFQSxFQUFBLE1BQUEsUUFBQSxTQUFBLEVBQUEsS0FBQSxRQVFBLEVBQ0EsS0FBQSxTQUFBLGVBQUEsY0FDQSxPQUFBLFdBa0JBLFFBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQ0EsSUFBQSxHQUFBLEVBQUEsTUFBQSxPQUFBLGNBQUEsS0FBQSxXQUNBLEVBQUEsRUFBQSxLQUFBLGNBQUEsT0FBQSxXQUNBLE1BQUEsR0FBQSxNQUFBLEtBQUEsYUFBQSxHQUdBLEdBQUEsTUFBQSxZQUFBLE9BQ0EsRUFBQSxLQUFBLFVBQUEsWUFBQSxPQXhHQSxFQUFBLEdBQUEsUUFBQSxhQUFBLEVBR0EsSUFBQSxHQUNBLEVBQUEsRUFBQSwwQkFBQSxVQUNBLE1BQUEsUUFDQSxpQkFBQSxFQUVBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLGFBQUEsTUFHQSxHQUZBLEtBQUEsVUFBQSxFQUFBLEtBQUEsS0FFQSxFQUFBLFNBQUEsS0FDQSxPQUFBLElBRUEsR0FBQSxPQUFBLEdBQ0EsRUFBQSxTQUVBLEVBQUEsRUFBQSxJQUlBLFlBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxVQUFBLFFBR0EsRUFBQSxFQUFBLHFDQUFBLElBQUEsR0FBQSxTQUNBLEdBQUEsS0FBQSxNQUFBLEdBRUEsR0FDQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEdBR0EsRUFBQSxFQUFBLElBRUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsUUFNQSxHQUFBLEdBQUEsUUFBQSxTQUFBLEdBcHpCQSxHQUFBLElBQUEsTUFBQSxNQUFBLFVBQUEsU0FBQSxZQUFBLFdBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxFQUFBLEdBRUEsRUFBQSxHQUNBLEVBQUEsSUFFQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEdBQUEsTUFDQSxHQUNBLEVBQUEsUUFBQSxFQUFBLFdBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxhQUFBLEdBR0EsR0FBQSxRQUFBLEtBQUEsTUFBQSxvQkFFQSxJQUFBLEdBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSx1QkFDQSxFQUFBLEVBQUEsaUJBQ0EsRUFBQSxFQUFBLGtCQUVBLEVBQUEsRUFBQSxnQkFDQSxFQUFBLEVBQUEsZUFDQSxFQUFBLEVBQUEsZ0JBQ0EsRUFBQSxFQUFBLGVBQ0EsRUFBQSxFQUFBLGtCQUVBLEVBQUEsRUFBQSxnQkFDQSxFQUFBLEVBQUEsaUJBQ0EsRUFBQSxFQUFBLGtCQXUzQkEsT0FyQ0EsWUFJQSxDQUFBLEdBQUEsR0FBQSxHQUNBLEdBQUEsS0FBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEVBQ0EsRUFBQSxLQUVBLEtBQUEsV0FDQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQ0EsSUFDQSxJQUNBLElBQ0EsSUFFQSxJQUVBLElBQ0EsSUFFQSxVQVdBLEVBQUEsR0FBQSxPQUFBLFdBQ0EsTUFBQSxNQUFBLE9BQUEsR0FHQSxNQUVBLE1BK0RBLE9BQUEsVUFBQSxJQUFBLFdBR0EsSUFBQSxHQUZBLEdBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsSUFBQSxFQUFBLEtBQUEsR0FDQSxPQUFBLElBRUEsTUFBQSxVQUFBLElBQUEsV0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxHQUNBLE9BQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAganF1ZXJ5LXNvcnRhYmxlLmpzIHYwLjkuMTJcclxuICogIGh0dHA6Ly9qb2hubnkuZ2l0aHViLmNvbS9qcXVlcnktc29ydGFibGUvXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiAgQ29weXJpZ2h0IChjKSAyMDEyIEpvbmFzIHZvbiBBbmRyaWFuXHJcbiAqICBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKlxyXG4gKiAgUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XHJcbiAqICBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcclxuICogICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcclxuICogICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxyXG4gKiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxyXG4gKiAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXHJcbiAqICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXHJcbiAqICAqIFRoZSBuYW1lIG9mIHRoZSBhdXRob3IgbWF5IG5vdCBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0c1xyXG4gKiAgICBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cclxuICpcclxuICogIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORFxyXG4gKiAgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRURcclxuICogIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkVcclxuICogIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIDxDT1BZUklHSFQgSE9MREVSPiBCRSBMSUFCTEUgRk9SIEFOWVxyXG4gKiAgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVNcclxuICogIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUztcclxuICogIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORFxyXG4gKiAgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlRcclxuICogIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTXHJcbiAqICBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cclxuKGZ1bmN0aW9uKCQsIHdpbmRvdywgcGx1Z2luTmFtZSwgdW5kZWZpbmVkKSB7XHJcbiAgICB2YXIgZXZlbnROYW1lcyxcclxuICAgICAgICBjb250YWluZXJEZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgaXRlbXMgY2FuIGJlIGRyYWdnZWQgZnJvbSB0aGlzIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBkcmFnOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCBpdGVtcyBjYW4gYmUgZHJvcGVkIG9udG8gdGhpcyBjb250YWluZXJcclxuICAgICAgICAgICAgZHJvcDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gRXhjbHVkZSBpdGVtcyBmcm9tIGJlaW5nIGRyYWdnYWJsZSwgaWYgdGhlXHJcbiAgICAgICAgICAgIC8vIHNlbGVjdG9yIG1hdGNoZXMgdGhlIGl0ZW1cclxuICAgICAgICAgICAgZXhjbHVkZTogXCJcIixcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgc2VhcmNoIGZvciBuZXN0ZWQgY29udGFpbmVycyB3aXRoaW4gYW4gaXRlbVxyXG4gICAgICAgICAgICBuZXN0ZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIHRoZSBpdGVtcyBhcmUgYXNzdW1lZCB0byBiZSBhcnJhbmdlZCB2ZXJ0aWNhbGx5XHJcbiAgICAgICAgICAgIHZlcnRpY2FsOiB0cnVlXHJcbiAgICAgICAgfSwgLy8gZW5kIGNvbnRhaW5lciBkZWZhdWx0c1xyXG4gICAgICAgIGdyb3VwRGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgZXhlY3V0ZWQgYWZ0ZXIgdGhlIHBsYWNlaG9sZGVyIGhhcyBiZWVuIG1vdmVkLlxyXG4gICAgICAgICAgICAvLyAkY2xvc2VzdEl0ZW1PckNvbnRhaW5lciBjb250YWlucyB0aGUgY2xvc2VzdCBpdGVtLCB0aGUgcGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgLy8gaGFzIGJlZW4gcHV0IGF0IG9yIHRoZSBjbG9zZXN0IGVtcHR5IENvbnRhaW5lciwgdGhlIHBsYWNlaG9sZGVyIGhhc1xyXG4gICAgICAgICAgICAvLyBiZWVuIGFwcGVuZGVkIHRvLlxyXG4gICAgICAgICAgICBhZnRlck1vdmU6IGZ1bmN0aW9uKCRwbGFjZWhvbGRlciwgY29udGFpbmVyLCAkY2xvc2VzdEl0ZW1PckNvbnRhaW5lcikge30sXHJcbiAgICAgICAgICAgIC8vIFRoZSBleGFjdCBjc3MgcGF0aCBiZXR3ZWVuIHRoZSBjb250YWluZXIgYW5kIGl0cyBpdGVtcywgZS5nLiBcIj4gdGJvZHlcIlxyXG4gICAgICAgICAgICBjb250YWluZXJQYXRoOiBcIlwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY3NzIHNlbGVjdG9yIG9mIHRoZSBjb250YWluZXJzXHJcbiAgICAgICAgICAgIGNvbnRhaW5lclNlbGVjdG9yOiBcIm9sLCB1bFwiLFxyXG4gICAgICAgICAgICAvLyBEaXN0YW5jZSB0aGUgbW91c2UgaGFzIHRvIHRyYXZlbCB0byBzdGFydCBkcmFnZ2luZ1xyXG4gICAgICAgICAgICBkaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgLy8gVGltZSBpbiBtaWxsaXNlY29uZHMgYWZ0ZXIgbW91c2Vkb3duIHVudGlsIGRyYWdnaW5nIHNob3VsZCBzdGFydC5cclxuICAgICAgICAgICAgLy8gVGhpcyBvcHRpb24gY2FuIGJlIHVzZWQgdG8gcHJldmVudCB1bndhbnRlZCBkcmFncyB3aGVuIGNsaWNraW5nIG9uIGFuIGVsZW1lbnQuXHJcbiAgICAgICAgICAgIGRlbGF5OiAwLFxyXG4gICAgICAgICAgICAvLyBUaGUgY3NzIHNlbGVjdG9yIG9mIHRoZSBkcmFnIGhhbmRsZVxyXG4gICAgICAgICAgICBoYW5kbGU6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBleGFjdCBjc3MgcGF0aCBiZXR3ZWVuIHRoZSBpdGVtIGFuZCBpdHMgc3ViY29udGFpbmVyc1xyXG4gICAgICAgICAgICBpdGVtUGF0aDogXCJcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNzcyBzZWxlY3RvciBvZiB0aGUgaXRlbXNcclxuICAgICAgICAgICAgaXRlbVNlbGVjdG9yOiBcImxpXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjbGFzcyBnaXZlbiB0byBcImJvZHlcIiB3aGlsZSBhbiBpdGVtIGlzIGJlaW5nIGRyYWdnZWRcclxuICAgICAgICAgICAgYm9keUNsYXNzOiBcImRyYWdnaW5nXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjbGFzcyBnaXZpbmcgdG8gYW4gaXRlbSB3aGlsZSBiZWluZyBkcmFnZ2VkXHJcbiAgICAgICAgICAgIGRyYWdnZWRDbGFzczogXCJkcmFnZ2VkXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjbGFzcyBvZiB0aGUgcGxhY2Vob2xkZXIgKG11c3QgbWF0Y2ggcGxhY2Vob2xkZXIgb3B0aW9uIG1hcmt1cClcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXJDbGFzczogXCJwbGFjZWhvbGRlclwiLFxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZHJhZ2dlZCBpdGVtIG1heSBiZSBpbnNpZGUgdGhlIGNvbnRhaW5lci5cclxuICAgICAgICAgICAgLy8gVXNlIHdpdGggY2FyZSwgc2luY2UgdGhlIHNlYXJjaCBmb3IgYSB2YWxpZCBjb250YWluZXIgZW50YWlscyBhIGRlcHRoIGZpcnN0IHNlYXJjaFxyXG4gICAgICAgICAgICAvLyBhbmQgbWF5IGJlIHF1aXRlIGV4cGVuc2l2ZS5cclxuICAgICAgICAgICAgaXNWYWxpZFRhcmdldDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gRXhlY3V0ZWQgYmVmb3JlIG9uRHJvcCBpZiBwbGFjZWhvbGRlciBpcyBkZXRhY2hlZC5cclxuICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGlmIHB1bGxQbGFjZWhvbGRlciBpcyBzZXQgdG8gZmFsc2UgYW5kIHRoZSBkcm9wIG9jY3VycyBvdXRzaWRlIGEgY29udGFpbmVyLlxyXG4gICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyLCBldmVudCkge30sXHJcbiAgICAgICAgICAgIC8vIEV4ZWN1dGVkIGF0IHRoZSBiZWdpbm5pbmcgb2YgYSBtb3VzZSBtb3ZlIGV2ZW50LlxyXG4gICAgICAgICAgICAvLyBUaGUgUGxhY2Vob2xkZXIgaGFzIG5vdCBiZWVuIG1vdmVkIHlldC5cclxuICAgICAgICAgICAgb25EcmFnOiBmdW5jdGlvbigkaXRlbSwgcG9zaXRpb24sIF9zdXBlciwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRpdGVtLmNzcyhwb3NpdGlvbilcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gQ2FsbGVkIGFmdGVyIHRoZSBkcmFnIGhhcyBiZWVuIHN0YXJ0ZWQsXHJcbiAgICAgICAgICAgIC8vIHRoYXQgaXMgdGhlIG1vdXNlIGJ1dHRvbiBpcyBiZWVpbmcgaGVsZCBkb3duIGFuZFxyXG4gICAgICAgICAgICAvLyB0aGUgbW91c2UgaXMgbW92aW5nLlxyXG4gICAgICAgICAgICAvLyBUaGUgY29udGFpbmVyIGlzIHRoZSBjbG9zZXN0IGluaXRpYWxpemVkIGNvbnRhaW5lci5cclxuICAgICAgICAgICAgLy8gVGhlcmVmb3JlIGl0IG1pZ2h0IG5vdCBiZSB0aGUgY29udGFpbmVyLCB0aGF0IGFjdHVhbGx5IGNvbnRhaW5zIHRoZSBpdGVtLlxyXG4gICAgICAgICAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0uY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICRpdGVtLmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAkaXRlbS53aWR0aCgpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgJGl0ZW0uYWRkQ2xhc3MoY29udGFpbmVyLmdyb3VwLm9wdGlvbnMuZHJhZ2dlZENsYXNzKVxyXG4gICAgICAgICAgICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoY29udGFpbmVyLmdyb3VwLm9wdGlvbnMuYm9keUNsYXNzKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBDYWxsZWQgd2hlbiB0aGUgbW91c2UgYnV0dG9uIGlzIGJlZWluZyByZWxlYXNlZFxyXG4gICAgICAgICAgICBvbkRyb3A6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlciwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICRpdGVtLnJlbW92ZUNsYXNzKGNvbnRhaW5lci5ncm91cC5vcHRpb25zLmRyYWdnZWRDbGFzcykucmVtb3ZlQXR0cihcInN0eWxlXCIpXHJcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhjb250YWluZXIuZ3JvdXAub3B0aW9ucy5ib2R5Q2xhc3MpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENhbGxlZCBvbiBtb3VzZWRvd24uIElmIGZhbHN5IHZhbHVlIGlzIHJldHVybmVkLCB0aGUgZHJhZ2dpbmcgd2lsbCBub3Qgc3RhcnQuXHJcbiAgICAgICAgICAgIC8vIElnbm9yZSBpZiBlbGVtZW50IGNsaWNrZWQgaXMgaW5wdXQsIHNlbGVjdCBvciB0ZXh0YXJlYVxyXG4gICAgICAgICAgICBvbk1vdXNlZG93bjogZnVuY3Rpb24oJGl0ZW0sIF9zdXBlciwgZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZXZlbnQudGFyZ2V0Lm5vZGVOYW1lLm1hdGNoKC9eKGlucHV0fHNlbGVjdHx0ZXh0YXJlYSkkL2kpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIFRlbXBsYXRlIGZvciB0aGUgcGxhY2Vob2xkZXIuIENhbiBiZSBhbnkgdmFsaWQgalF1ZXJ5IGlucHV0XHJcbiAgICAgICAgICAgIC8vIGUuZy4gYSBzdHJpbmcsIGEgRE9NIGVsZW1lbnQuXHJcbiAgICAgICAgICAgIC8vIFRoZSBwbGFjZWhvbGRlciBtdXN0IGhhdmUgdGhlIGNsYXNzIFwicGxhY2Vob2xkZXJcIlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJzxsaSBjbGFzcz1cInBsYWNlaG9sZGVyXCIvPicsXHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIHRoZSBwb3NpdGlvbiBvZiB0aGUgcGxhY2Vob2xkZXIgaXMgY2FsY3VsYXRlZCBvbiBldmVyeSBtb3VzZW1vdmUuXHJcbiAgICAgICAgICAgIC8vIElmIGZhbHNlLCBpdCBpcyBvbmx5IGNhbGN1bGF0ZWQgd2hlbiB0aGUgbW91c2UgaXMgYWJvdmUgYSBjb250YWluZXIuXHJcbiAgICAgICAgICAgIHB1bGxQbGFjZWhvbGRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gU3BlY2lmaWVzIHNlcmlhbGl6YXRpb24gb2YgdGhlIGNvbnRhaW5lciBncm91cC5cclxuICAgICAgICAgICAgLy8gVGhlIHBhaXIgJHBhcmVudC8kY2hpbGRyZW4gaXMgZWl0aGVyIGNvbnRhaW5lci9pdGVtcyBvciBpdGVtL3N1YmNvbnRhaW5lcnMuXHJcbiAgICAgICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oJHBhcmVudCwgJGNoaWxkcmVuLCBwYXJlbnRJc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICQuZXh0ZW5kKHt9LCAkcGFyZW50LmRhdGEoKSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50SXNDb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFskY2hpbGRyZW5dXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgkY2hpbGRyZW5bMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuY2hpbGRyZW4gPSAkY2hpbGRyZW5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0LnN1YkNvbnRhaW5lcnNcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuc29ydGFibGVcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIFNldCB0b2xlcmFuY2Ugd2hpbGUgZHJhZ2dpbmcuIFBvc2l0aXZlIHZhbHVlcyBkZWNyZWFzZSBzZW5zaXRpdml0eSxcclxuICAgICAgICAgICAgLy8gbmVnYXRpdmUgdmFsdWVzIGluY3JlYXNlIGl0LlxyXG4gICAgICAgICAgICB0b2xlcmFuY2U6IDBcclxuICAgICAgICB9LCAvLyBlbmQgZ3JvdXAgZGVmYXVsdHNcclxuICAgICAgICBjb250YWluZXJHcm91cHMgPSB7fSxcclxuICAgICAgICBncm91cENvdW50ZXIgPSAwLFxyXG4gICAgICAgIGVtcHR5Qm94ID0ge1xyXG4gICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICAgIGJvdHRvbTogMCxcclxuICAgICAgICAgICAgcmlnaHQ6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGV2ZW50TmFtZXMgPSB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiBcInRvdWNoc3RhcnQuc29ydGFibGUgbW91c2Vkb3duLnNvcnRhYmxlXCIsXHJcbiAgICAgICAgICAgIGRyb3A6IFwidG91Y2hlbmQuc29ydGFibGUgdG91Y2hjYW5jZWwuc29ydGFibGUgbW91c2V1cC5zb3J0YWJsZVwiLFxyXG4gICAgICAgICAgICBkcmFnOiBcInRvdWNobW92ZS5zb3J0YWJsZSBtb3VzZW1vdmUuc29ydGFibGVcIixcclxuICAgICAgICAgICAgc2Nyb2xsOiBcInNjcm9sbC5zb3J0YWJsZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWJDb250YWluZXJLZXkgPSBcInN1YkNvbnRhaW5lcnNcIlxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBhIGlzIEFycmF5IFtsZWZ0LCByaWdodCwgdG9wLCBib3R0b21dXHJcbiAgICAgKiBiIGlzIGFycmF5IFtsZWZ0LCB0b3BdXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGQoYSwgYikge1xyXG4gICAgICAgIHZhciB4ID0gTWF0aC5tYXgoMCwgYVswXSAtIGJbMF0sIGJbMF0gLSBhWzFdKSxcclxuICAgICAgICAgICAgeSA9IE1hdGgubWF4KDAsIGFbMl0gLSBiWzFdLCBiWzFdIC0gYVszXSlcclxuICAgICAgICByZXR1cm4geCArIHk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0RGltZW5zaW9ucyhhcnJheSwgZGltZW5zaW9ucywgdG9sZXJhbmNlLCB1c2VPZmZzZXQpIHtcclxuICAgICAgICB2YXIgaSA9IGFycmF5Lmxlbmd0aCxcclxuICAgICAgICAgICAgb2Zmc2V0TWV0aG9kID0gdXNlT2Zmc2V0ID8gXCJvZmZzZXRcIiA6IFwicG9zaXRpb25cIlxyXG4gICAgICAgIHRvbGVyYW5jZSA9IHRvbGVyYW5jZSB8fCAwXHJcblxyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgdmFyIGVsID0gYXJyYXlbaV0uZWwgPyBhcnJheVtpXS5lbCA6ICQoYXJyYXlbaV0pLFxyXG4gICAgICAgICAgICAgICAgLy8gdXNlIGZpdHRpbmcgbWV0aG9kXHJcbiAgICAgICAgICAgICAgICBwb3MgPSBlbFtvZmZzZXRNZXRob2RdKClcclxuICAgICAgICAgICAgcG9zLmxlZnQgKz0gcGFyc2VJbnQoZWwuY3NzKCdtYXJnaW4tbGVmdCcpLCAxMClcclxuICAgICAgICAgICAgcG9zLnRvcCArPSBwYXJzZUludChlbC5jc3MoJ21hcmdpbi10b3AnKSwgMTApXHJcbiAgICAgICAgICAgIGRpbWVuc2lvbnNbaV0gPSBbXHJcbiAgICAgICAgICAgICAgICBwb3MubGVmdCAtIHRvbGVyYW5jZSxcclxuICAgICAgICAgICAgICAgIHBvcy5sZWZ0ICsgZWwub3V0ZXJXaWR0aCgpICsgdG9sZXJhbmNlLFxyXG4gICAgICAgICAgICAgICAgcG9zLnRvcCAtIHRvbGVyYW5jZSxcclxuICAgICAgICAgICAgICAgIHBvcy50b3AgKyBlbC5vdXRlckhlaWdodCgpICsgdG9sZXJhbmNlXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UmVsYXRpdmVQb3NpdGlvbihwb2ludGVyLCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIG9mZnNldCA9IGVsZW1lbnQub2Zmc2V0KClcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBsZWZ0OiBwb2ludGVyLmxlZnQgLSBvZmZzZXQubGVmdCxcclxuICAgICAgICAgICAgdG9wOiBwb2ludGVyLnRvcCAtIG9mZnNldC50b3BcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc29ydEJ5RGlzdGFuY2VEZXNjKGRpbWVuc2lvbnMsIHBvaW50ZXIsIGxhc3RQb2ludGVyKSB7XHJcbiAgICAgICAgcG9pbnRlciA9IFtwb2ludGVyLmxlZnQsIHBvaW50ZXIudG9wXVxyXG4gICAgICAgIGxhc3RQb2ludGVyID0gbGFzdFBvaW50ZXIgJiYgW2xhc3RQb2ludGVyLmxlZnQsIGxhc3RQb2ludGVyLnRvcF1cclxuXHJcbiAgICAgICAgdmFyIGRpbSxcclxuICAgICAgICAgICAgaSA9IGRpbWVuc2lvbnMubGVuZ3RoLFxyXG4gICAgICAgICAgICBkaXN0YW5jZXMgPSBbXVxyXG5cclxuICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgIGRpbSA9IGRpbWVuc2lvbnNbaV1cclxuICAgICAgICAgICAgZGlzdGFuY2VzW2ldID0gW2ksIGQoZGltLCBwb2ludGVyKSwgbGFzdFBvaW50ZXIgJiYgZChkaW0sIGxhc3RQb2ludGVyKV1cclxuICAgICAgICB9XHJcbiAgICAgICAgZGlzdGFuY2VzID0gZGlzdGFuY2VzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgICByZXR1cm4gYlsxXSAtIGFbMV0gfHwgYlsyXSAtIGFbMl0gfHwgYlswXSAtIGFbMF1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvLyBsYXN0IGVudHJ5IGlzIHRoZSBjbG9zZXN0XHJcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlc1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIENvbnRhaW5lckdyb3VwKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZ3JvdXBEZWZhdWx0cywgb3B0aW9ucylcclxuICAgICAgICB0aGlzLmNvbnRhaW5lcnMgPSBbXVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5yb290R3JvdXApIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxQcm94eSA9ICQucHJveHkodGhpcy5zY3JvbGwsIHRoaXMpXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ1Byb3h5ID0gJC5wcm94eSh0aGlzLmRyYWcsIHRoaXMpXHJcbiAgICAgICAgICAgIHRoaXMuZHJvcFByb3h5ID0gJC5wcm94eSh0aGlzLmRyb3AsIHRoaXMpXHJcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSAkKHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcilcclxuXHJcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5pc1ZhbGlkVGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmlzVmFsaWRUYXJnZXQgPSB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQ29udGFpbmVyR3JvdXAuZ2V0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIGlmICghY29udGFpbmVyR3JvdXBzW29wdGlvbnMuZ3JvdXBdKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmdyb3VwID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmdyb3VwID0gZ3JvdXBDb3VudGVyKytcclxuXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXJHcm91cHNbb3B0aW9ucy5ncm91cF0gPSBuZXcgQ29udGFpbmVyR3JvdXAob3B0aW9ucylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXJHcm91cHNbb3B0aW9ucy5ncm91cF1cclxuICAgIH1cclxuXHJcbiAgICBDb250YWluZXJHcm91cC5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgZHJhZ0luaXQ6IGZ1bmN0aW9uKGUsIGl0ZW1Db250YWluZXIpIHtcclxuICAgICAgICAgICAgdGhpcy4kZG9jdW1lbnQgPSAkKGl0ZW1Db250YWluZXIuZWxbMF0ub3duZXJEb2N1bWVudClcclxuXHJcbiAgICAgICAgICAgIC8vIGdldCBpdGVtIHRvIGRyYWdcclxuICAgICAgICAgICAgdGhpcy5pdGVtID0gJChlLnRhcmdldCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMuaXRlbVNlbGVjdG9yKVxyXG4gICAgICAgICAgICB0aGlzLml0ZW1Db250YWluZXIgPSBpdGVtQ29udGFpbmVyXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pdGVtLmlzKHRoaXMub3B0aW9ucy5leGNsdWRlKSB8fFxyXG4gICAgICAgICAgICAgICAgIXRoaXMub3B0aW9ucy5vbk1vdXNlZG93bih0aGlzLml0ZW0sIGdyb3VwRGVmYXVsdHMub25Nb3VzZWRvd24sIGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRQb2ludGVyKGUpXHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTGlzdGVuZXJzKCdvbicpXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldHVwRGVsYXlUaW1lcigpXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0luaXREb25lID0gdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJhZzogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5kaXN0YW5jZU1ldChlKSB8fCAhdGhpcy5kZWxheU1ldClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25EcmFnU3RhcnQodGhpcy5pdGVtLCB0aGlzLml0ZW1Db250YWluZXIsIGdyb3VwRGVmYXVsdHMub25EcmFnU3RhcnQsIGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW0uYmVmb3JlKHRoaXMucGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFBvaW50ZXIoZSlcclxuICAgICAgICAgICAgLy8gcGxhY2UgaXRlbSB1bmRlciB0aGUgY3Vyc29yXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRyYWcodGhpcy5pdGVtLFxyXG4gICAgICAgICAgICAgICAgZ2V0UmVsYXRpdmVQb3NpdGlvbih0aGlzLnBvaW50ZXIsIHRoaXMuaXRlbS5vZmZzZXRQYXJlbnQoKSksXHJcbiAgICAgICAgICAgICAgICBncm91cERlZmF1bHRzLm9uRHJhZyxcclxuICAgICAgICAgICAgICAgIGUpXHJcblxyXG4gICAgICAgICAgICB2YXIgeCA9IGUucGFnZVggfHwgZS5vcmlnaW5hbEV2ZW50LnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgeSA9IGUucGFnZVkgfHwgZS5vcmlnaW5hbEV2ZW50LnBhZ2VZLFxyXG4gICAgICAgICAgICAgICAgYm94ID0gdGhpcy5zYW1lUmVzdWx0Qm94LFxyXG4gICAgICAgICAgICAgICAgdCA9IHRoaXMub3B0aW9ucy50b2xlcmFuY2VcclxuXHJcbiAgICAgICAgICAgIGlmICghYm94IHx8IGJveC50b3AgLSB0ID4geSB8fCBib3guYm90dG9tICsgdCA8IHkgfHwgYm94LmxlZnQgLSB0ID4geCB8fCBib3gucmlnaHQgKyB0IDwgeClcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZWFyY2hWYWxpZFRhcmdldCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5kZXRhY2goKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdEFwcGVuZGVkSXRlbSA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZHJvcDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxpc3RlbmVycygnb2ZmJylcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ0luaXREb25lID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBwcm9jZXNzaW5nIERyb3AsIGNoZWNrIGlmIHBsYWNlaG9sZGVyIGlzIGRldGFjaGVkXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbGFjZWhvbGRlci5jbG9zZXN0KFwiaHRtbFwiKVswXSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLmJlZm9yZSh0aGlzLml0ZW0pLmRldGFjaCgpXHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2FuY2VsKHRoaXMuaXRlbSwgdGhpcy5pdGVtQ29udGFpbmVyLCBncm91cERlZmF1bHRzLm9uQ2FuY2VsLCBlKVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRyb3AodGhpcy5pdGVtLCB0aGlzLmdldENvbnRhaW5lcih0aGlzLml0ZW0pLCBncm91cERlZmF1bHRzLm9uRHJvcCwgZSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhbnVwXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyRGltZW5zaW9ucygpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyT2Zmc2V0UGFyZW50KClcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEFwcGVuZGVkSXRlbSA9IHRoaXMuc2FtZVJlc3VsdEJveCA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlYXJjaFZhbGlkVGFyZ2V0OiBmdW5jdGlvbihwb2ludGVyLCBsYXN0UG9pbnRlcikge1xyXG4gICAgICAgICAgICBpZiAoIXBvaW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHBvaW50ZXIgPSB0aGlzLnJlbGF0aXZlUG9pbnRlciB8fCB0aGlzLnBvaW50ZXJcclxuICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyID0gdGhpcy5sYXN0UmVsYXRpdmVQb2ludGVyIHx8IHRoaXMubGFzdFBvaW50ZXJcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRpc3RhbmNlcyA9IHNvcnRCeURpc3RhbmNlRGVzYyh0aGlzLmdldENvbnRhaW5lckRpbWVuc2lvbnMoKSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyKSxcclxuICAgICAgICAgICAgICAgIGkgPSBkaXN0YW5jZXMubGVuZ3RoXHJcblxyXG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBkaXN0YW5jZXNbaV1bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSBkaXN0YW5jZXNbaV1bMV1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWRpc3RhbmNlIHx8IHRoaXMub3B0aW9ucy5wdWxsUGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJzW2luZGV4XVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGFpbmVyLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy4kZ2V0T2Zmc2V0UGFyZW50KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSBjb250YWluZXIuZ2V0SXRlbU9mZnNldFBhcmVudCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludGVyID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihwb2ludGVyLCBvZmZzZXRQYXJlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UG9pbnRlciA9IGdldFJlbGF0aXZlUG9zaXRpb24obGFzdFBvaW50ZXIsIG9mZnNldFBhcmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLnNlYXJjaFZhbGlkVGFyZ2V0KHBvaW50ZXIsIGxhc3RQb2ludGVyKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNhbWVSZXN1bHRCb3gpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhbWVSZXN1bHRCb3ggPSB1bmRlZmluZWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vdmVQbGFjZWhvbGRlcjogZnVuY3Rpb24oY29udGFpbmVyLCBpdGVtLCBtZXRob2QsIHNhbWVSZXN1bHRCb3gpIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RBcHBlbmRlZEl0ZW0gPSB0aGlzLmxhc3RBcHBlbmRlZEl0ZW1cclxuICAgICAgICAgICAgaWYgKCFzYW1lUmVzdWx0Qm94ICYmIGxhc3RBcHBlbmRlZEl0ZW0gJiYgbGFzdEFwcGVuZGVkSXRlbVswXSA9PT0gaXRlbVswXSlcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGl0ZW1bbWV0aG9kXSh0aGlzLnBsYWNlaG9sZGVyKVxyXG4gICAgICAgICAgICB0aGlzLmxhc3RBcHBlbmRlZEl0ZW0gPSBpdGVtXHJcbiAgICAgICAgICAgIHRoaXMuc2FtZVJlc3VsdEJveCA9IHNhbWVSZXN1bHRCb3hcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmFmdGVyTW92ZSh0aGlzLnBsYWNlaG9sZGVyLCBjb250YWluZXIsIGl0ZW0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRDb250YWluZXJEaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lckRpbWVuc2lvbnMpXHJcbiAgICAgICAgICAgICAgICBzZXREaW1lbnNpb25zKHRoaXMuY29udGFpbmVycywgdGhpcy5jb250YWluZXJEaW1lbnNpb25zID0gW10sIHRoaXMub3B0aW9ucy50b2xlcmFuY2UsICF0aGlzLiRnZXRPZmZzZXRQYXJlbnQoKSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyRGltZW5zaW9uc1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0Q29udGFpbmVyOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmNsb3Nlc3QodGhpcy5vcHRpb25zLmNvbnRhaW5lclNlbGVjdG9yKS5kYXRhKHBsdWdpbk5hbWUpXHJcbiAgICAgICAgfSxcclxuICAgICAgICAkZ2V0T2Zmc2V0UGFyZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2Zmc2V0UGFyZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gdGhpcy5jb250YWluZXJzW2ldLmdldEl0ZW1PZmZzZXRQYXJlbnQoKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLnJvb3RHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldFBhcmVudFswXSAhPSB0aGlzLmNvbnRhaW5lcnNbaV0uZ2V0SXRlbU9mZnNldFBhcmVudCgpWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBldmVyeSBjb250YWluZXIgaGFzIHRoZSBzYW1lIG9mZnNldCBwYXJlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2UgcG9zaXRpb24oKSB3aGljaCBpcyByZWxhdGl2ZSB0byB0aGlzIHBhcmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB1c2Ugb2Zmc2V0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBhcmUgI3NldERpbWVuc2lvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZnNldFBhcmVudFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0UG9pbnRlcjogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgcG9pbnRlciA9IHRoaXMuZ2V0UG9pbnRlcihlKVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuJGdldE9mZnNldFBhcmVudCgpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpdmVQb2ludGVyID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihwb2ludGVyLCB0aGlzLiRnZXRPZmZzZXRQYXJlbnQoKSlcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFJlbGF0aXZlUG9pbnRlciA9IHRoaXMucmVsYXRpdmVQb2ludGVyXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGF0aXZlUG9pbnRlciA9IHJlbGF0aXZlUG9pbnRlclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxhc3RQb2ludGVyID0gdGhpcy5wb2ludGVyXHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRlciA9IHBvaW50ZXJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc3RhbmNlTWV0OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50UG9pbnRlciA9IHRoaXMuZ2V0UG9pbnRlcihlKVxyXG4gICAgICAgICAgICByZXR1cm4gKE1hdGgubWF4KFxyXG4gICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5wb2ludGVyLmxlZnQgLSBjdXJyZW50UG9pbnRlci5sZWZ0KSxcclxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHRoaXMucG9pbnRlci50b3AgLSBjdXJyZW50UG9pbnRlci50b3ApXHJcbiAgICAgICAgICAgICkgPj0gdGhpcy5vcHRpb25zLmRpc3RhbmNlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0UG9pbnRlcjogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGVmdDogZS5wYWdlWCB8fCBlLm9yaWdpbmFsRXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgICAgICB0b3A6IGUucGFnZVkgfHwgZS5vcmlnaW5hbEV2ZW50LnBhZ2VZXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldHVwRGVsYXlUaW1lcjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpc1xyXG4gICAgICAgICAgICB0aGlzLmRlbGF5TWV0ID0gIXRoaXMub3B0aW9ucy5kZWxheVxyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBkZWxheSB0aW1lciBpZiBuZWVkZWRcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRlbGF5TWV0KSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fbW91c2VEZWxheVRpbWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21vdXNlRGVsYXlUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5kZWxheU1ldCA9IHRydWVcclxuICAgICAgICAgICAgICAgIH0sIHRoaXMub3B0aW9ucy5kZWxheSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJEaW1lbnNpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPZmZzZXRQYXJlbnQoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvZ2dsZUxpc3RlbmVyczogZnVuY3Rpb24obWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGV2ZW50cyA9IFsnZHJhZycsICdkcm9wJywgJ3Njcm9sbCddXHJcblxyXG4gICAgICAgICAgICAkLmVhY2goZXZlbnRzLCBmdW5jdGlvbihpLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC4kZG9jdW1lbnRbbWV0aG9kXShldmVudE5hbWVzW2V2ZW50XSwgdGhhdFtldmVudCArICdQcm94eSddKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xlYXJPZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLm9mZnNldFBhcmVudCA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgY2xlYXIgY29udGFpbmVyIGFuZCBpdGVtIGRpbWVuc2lvbnNcclxuICAgICAgICBjbGVhckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Ll9jbGVhckRpbWVuc2lvbnMoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJhdmVyc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMpXHJcbiAgICAgICAgICAgIHZhciBpID0gdGhpcy5jb250YWluZXJzLmxlbmd0aFxyXG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lcnNbaV0udHJhdmVyc2UoY2FsbGJhY2spXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIF9jbGVhckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckRpbWVuc2lvbnMgPSB1bmRlZmluZWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyR3JvdXBzW3RoaXMub3B0aW9ucy5ncm91cF0gPSB1bmRlZmluZWRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udGFpbmVyKGVsZW1lbnQsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmVsID0gZWxlbWVudFxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBjb250YWluZXJEZWZhdWx0cywgb3B0aW9ucylcclxuXHJcbiAgICAgICAgdGhpcy5ncm91cCA9IENvbnRhaW5lckdyb3VwLmdldCh0aGlzLm9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5yb290R3JvdXAgPSB0aGlzLm9wdGlvbnMucm9vdEdyb3VwIHx8IHRoaXMuZ3JvdXBcclxuICAgICAgICB0aGlzLmhhbmRsZSA9IHRoaXMucm9vdEdyb3VwLm9wdGlvbnMuaGFuZGxlIHx8IHRoaXMucm9vdEdyb3VwLm9wdGlvbnMuaXRlbVNlbGVjdG9yXHJcblxyXG4gICAgICAgIHZhciBpdGVtUGF0aCA9IHRoaXMucm9vdEdyb3VwLm9wdGlvbnMuaXRlbVBhdGhcclxuICAgICAgICB0aGlzLnRhcmdldCA9IGl0ZW1QYXRoID8gdGhpcy5lbC5maW5kKGl0ZW1QYXRoKSA6IHRoaXMuZWxcclxuXHJcbiAgICAgICAgdGhpcy50YXJnZXQub24oZXZlbnROYW1lcy5zdGFydCwgdGhpcy5oYW5kbGUsICQucHJveHkodGhpcy5kcmFnSW5pdCwgdGhpcykpXHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZHJvcClcclxuICAgICAgICAgICAgdGhpcy5ncm91cC5jb250YWluZXJzLnB1c2godGhpcylcclxuICAgIH1cclxuXHJcbiAgICBDb250YWluZXIucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGRyYWdJbml0OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciByb290R3JvdXAgPSB0aGlzLnJvb3RHcm91cFxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmXHJcbiAgICAgICAgICAgICAgICAhcm9vdEdyb3VwLmRyYWdJbml0RG9uZSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRyYWcgJiZcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNWYWxpZERyYWcoZSkpIHtcclxuICAgICAgICAgICAgICAgIHJvb3RHcm91cC5kcmFnSW5pdChlLCB0aGlzKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpc1ZhbGlkRHJhZzogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZS53aGljaCA9PSAxIHx8XHJcbiAgICAgICAgICAgICAgICBlLnR5cGUgPT0gXCJ0b3VjaHN0YXJ0XCIgJiYgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMubGVuZ3RoID09IDFcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNlYXJjaFZhbGlkVGFyZ2V0OiBmdW5jdGlvbihwb2ludGVyLCBsYXN0UG9pbnRlcikge1xyXG4gICAgICAgICAgICB2YXIgZGlzdGFuY2VzID0gc29ydEJ5RGlzdGFuY2VEZXNjKHRoaXMuZ2V0SXRlbURpbWVuc2lvbnMoKSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyKSxcclxuICAgICAgICAgICAgICAgIGkgPSBkaXN0YW5jZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcm9vdEdyb3VwID0gdGhpcy5yb290R3JvdXAsXHJcbiAgICAgICAgICAgICAgICB2YWxpZFRhcmdldCA9ICFyb290R3JvdXAub3B0aW9ucy5pc1ZhbGlkVGFyZ2V0IHx8XHJcbiAgICAgICAgICAgICAgICByb290R3JvdXAub3B0aW9ucy5pc1ZhbGlkVGFyZ2V0KHJvb3RHcm91cC5pdGVtLCB0aGlzKVxyXG5cclxuICAgICAgICAgICAgaWYgKCFpICYmIHZhbGlkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByb290R3JvdXAubW92ZVBsYWNlaG9sZGVyKHRoaXMsIHRoaXMudGFyZ2V0LCBcImFwcGVuZFwiKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZGlzdGFuY2VzW2ldWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGRpc3RhbmNlc1tpXVsxXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZGlzdGFuY2UgJiYgdGhpcy5oYXNDaGlsZEdyb3VwKGluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSB0aGlzLmdldENvbnRhaW5lckdyb3VwKGluZGV4KS5zZWFyY2hWYWxpZFRhcmdldChwb2ludGVyLCBsYXN0UG9pbnRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZhbGlkVGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVBsYWNlaG9sZGVyKGluZGV4LCBwb2ludGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vdmVQbGFjZWhvbGRlcjogZnVuY3Rpb24oaW5kZXgsIHBvaW50ZXIpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSAkKHRoaXMuaXRlbXNbaW5kZXhdKSxcclxuICAgICAgICAgICAgICAgIGRpbSA9IHRoaXMuaXRlbURpbWVuc2lvbnNbaW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kID0gXCJhZnRlclwiLFxyXG4gICAgICAgICAgICAgICAgd2lkdGggPSBpdGVtLm91dGVyV2lkdGgoKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IGl0ZW0ub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IGl0ZW0ub2Zmc2V0KCksXHJcbiAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBvZmZzZXQubGVmdCArIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogb2Zmc2V0LnRvcCxcclxuICAgICAgICAgICAgICAgICAgICBib3R0b206IG9mZnNldC50b3AgKyBoZWlnaHRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy52ZXJ0aWNhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHlDZW50ZXIgPSAoZGltWzJdICsgZGltWzNdKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5VcHBlckhhbGYgPSBwb2ludGVyLnRvcCA8PSB5Q2VudGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5VcHBlckhhbGYpIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSBcImJlZm9yZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveC5ib3R0b20gLT0gaGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveC50b3AgKz0gaGVpZ2h0IC8gMlxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHhDZW50ZXIgPSAoZGltWzBdICsgZGltWzFdKSAvIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5MZWZ0SGFsZiA9IHBvaW50ZXIubGVmdCA8PSB4Q2VudGVyXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5MZWZ0SGFsZikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiYmVmb3JlXCJcclxuICAgICAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94LnJpZ2h0IC09IHdpZHRoIC8gMlxyXG4gICAgICAgICAgICAgICAgfSBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveC5sZWZ0ICs9IHdpZHRoIC8gMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0NoaWxkR3JvdXAoaW5kZXgpKVxyXG4gICAgICAgICAgICAgICAgc2FtZVJlc3VsdEJveCA9IGVtcHR5Qm94XHJcbiAgICAgICAgICAgIHRoaXMucm9vdEdyb3VwLm1vdmVQbGFjZWhvbGRlcih0aGlzLCBpdGVtLCBtZXRob2QsIHNhbWVSZXN1bHRCb3gpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRJdGVtRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pdGVtRGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuJGdldENoaWxkcmVuKHRoaXMuZWwsIFwiaXRlbVwiKS5maWx0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgXCI6bm90KC5cIiArIHRoaXMuZ3JvdXAub3B0aW9ucy5wbGFjZWhvbGRlckNsYXNzICsgXCIsIC5cIiArIHRoaXMuZ3JvdXAub3B0aW9ucy5kcmFnZ2VkQ2xhc3MgKyBcIilcIlxyXG4gICAgICAgICAgICAgICAgKS5nZXQoKVxyXG4gICAgICAgICAgICAgICAgc2V0RGltZW5zaW9ucyh0aGlzLml0ZW1zLCB0aGlzLml0ZW1EaW1lbnNpb25zID0gW10sIHRoaXMub3B0aW9ucy50b2xlcmFuY2UpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXRlbURpbWVuc2lvbnNcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldEl0ZW1PZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0UGFyZW50LFxyXG4gICAgICAgICAgICAgICAgZWwgPSB0aGlzLmVsXHJcbiAgICAgICAgICAgICAgICAvLyBTaW5jZSBlbCBtaWdodCBiZSBlbXB0eSB3ZSBoYXZlIHRvIGNoZWNrIGVsIGl0c2VsZiBhbmRcclxuICAgICAgICAgICAgICAgIC8vIGNhbiBub3QgZG8gc29tZXRoaW5nIGxpa2UgZWwuY2hpbGRyZW4oKS5maXJzdCgpLm9mZnNldFBhcmVudCgpXHJcbiAgICAgICAgICAgIGlmIChlbC5jc3MoXCJwb3NpdGlvblwiKSA9PT0gXCJyZWxhdGl2ZVwiIHx8IGVsLmNzcyhcInBvc2l0aW9uXCIpID09PSBcImFic29sdXRlXCIgfHwgZWwuY3NzKFwicG9zaXRpb25cIikgPT09IFwiZml4ZWRcIilcclxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IGVsXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IGVsLm9mZnNldFBhcmVudCgpXHJcbiAgICAgICAgICAgIHJldHVybiBvZmZzZXRQYXJlbnRcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhc0NoaWxkR3JvdXA6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubmVzdGVkICYmIHRoaXMuZ2V0Q29udGFpbmVyR3JvdXAoaW5kZXgpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRDb250YWluZXJHcm91cDogZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkR3JvdXAgPSAkLmRhdGEodGhpcy5pdGVtc1tpbmRleF0sIHN1YkNvbnRhaW5lcktleSlcclxuICAgICAgICAgICAgaWYgKGNoaWxkR3JvdXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkQ29udGFpbmVycyA9IHRoaXMuJGdldENoaWxkcmVuKHRoaXMuaXRlbXNbaW5kZXhdLCBcImNvbnRhaW5lclwiKVxyXG4gICAgICAgICAgICAgICAgY2hpbGRHcm91cCA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ29udGFpbmVyc1swXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb290R3JvdXA6IHRoaXMucm9vdEdyb3VwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cDogZ3JvdXBDb3VudGVyKytcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkR3JvdXAgPSBjaGlsZENvbnRhaW5lcnNbcGx1Z2luTmFtZV0ob3B0aW9ucykuZGF0YShwbHVnaW5OYW1lKS5ncm91cFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJC5kYXRhKHRoaXMuaXRlbXNbaW5kZXhdLCBzdWJDb250YWluZXJLZXksIGNoaWxkR3JvdXApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNoaWxkR3JvdXBcclxuICAgICAgICB9LFxyXG4gICAgICAgICRnZXRDaGlsZHJlbjogZnVuY3Rpb24ocGFyZW50LCB0eXBlKSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5yb290R3JvdXAub3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIHBhdGggPSBvcHRpb25zW3R5cGUgKyBcIlBhdGhcIl0sXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IG9wdGlvbnNbdHlwZSArIFwiU2VsZWN0b3JcIl1cclxuXHJcbiAgICAgICAgICAgIHBhcmVudCA9ICQocGFyZW50KVxyXG4gICAgICAgICAgICBpZiAocGF0aClcclxuICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5maW5kKHBhdGgpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50LmNoaWxkcmVuKHNlbGVjdG9yKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX3NlcmlhbGl6ZTogZnVuY3Rpb24ocGFyZW50LCBpc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBjaGlsZFR5cGUgPSBpc0NvbnRhaW5lciA/IFwiaXRlbVwiIDogXCJjb250YWluZXJcIixcclxuXHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IHRoaXMuJGdldENoaWxkcmVuKHBhcmVudCwgY2hpbGRUeXBlKS5ub3QodGhpcy5vcHRpb25zLmV4Y2x1ZGUpLm1hcChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5fc2VyaWFsaXplKCQodGhpcyksICFpc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgIH0pLmdldCgpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb290R3JvdXAub3B0aW9ucy5zZXJpYWxpemUocGFyZW50LCBjaGlsZHJlbiwgaXNDb250YWluZXIpXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0cmF2ZXJzZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgJC5lYWNoKHRoaXMuaXRlbXMgfHwgW10sIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBncm91cCA9ICQuZGF0YSh0aGlzLCBzdWJDb250YWluZXJLZXkpXHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXApXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAudHJhdmVyc2UoY2FsbGJhY2spXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY2FsbGJhY2sodGhpcylcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9jbGVhckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW1EaW1lbnNpb25zID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Lm9mZihldmVudE5hbWVzLnN0YXJ0LCB0aGlzLmhhbmRsZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRGF0YShwbHVnaW5OYW1lKVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kcm9wKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5ncm91cC5jb250YWluZXJzID0gJC5ncmVwKHRoaXMuZ3JvdXAuY29udGFpbmVycywgZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbCAhPSB0aGF0XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgJC5lYWNoKHRoaXMuaXRlbXMgfHwgW10sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJC5yZW1vdmVEYXRhKHRoaXMsIHN1YkNvbnRhaW5lcktleSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIEFQSSA9IHtcclxuICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmRpc2FibGVkID0gZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0LmRpc2FibGVkID0gdHJ1ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlcmlhbGl6ZSh0aGlzLmVsLCB0cnVlKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuX2NsZWFyRGltZW5zaW9ucygpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5fZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAkLmV4dGVuZChDb250YWluZXIucHJvdG90eXBlLCBBUEkpXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBqUXVlcnkgQVBJXHJcbiAgICAgKlxyXG4gICAgICogUGFyYW1ldGVycyBhcmVcclxuICAgICAqICAgZWl0aGVyIG9wdGlvbnMgb24gaW5pdFxyXG4gICAgICogICBvciBhIG1ldGhvZCBuYW1lIGZvbGxvd2VkIGJ5IGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtZXRob2RcclxuICAgICAqL1xyXG4gICAgJC5mbltwbHVnaW5OYW1lXSA9IGZ1bmN0aW9uKG1ldGhvZE9yT3B0aW9ucykge1xyXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciAkdCA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBvYmplY3QgPSAkdC5kYXRhKHBsdWdpbk5hbWUpXHJcblxyXG4gICAgICAgICAgICBpZiAob2JqZWN0ICYmIEFQSVttZXRob2RPck9wdGlvbnNdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEFQSVttZXRob2RPck9wdGlvbnNdLmFwcGx5KG9iamVjdCwgYXJncykgfHwgdGhpc1xyXG4gICAgICAgICAgICBlbHNlIGlmICghb2JqZWN0ICYmIChtZXRob2RPck9wdGlvbnMgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gXCJvYmplY3RcIikpXHJcbiAgICAgICAgICAgICAgICAkdC5kYXRhKHBsdWdpbk5hbWUsIG5ldyBDb250YWluZXIoJHQsIG1ldGhvZE9yT3B0aW9ucykpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbn0pKGpxMTExLCB3aW5kb3csICdzb3J0YWJsZScpOyIsIi8qISBuYW5vU2Nyb2xsZXJKUyAtIHYwLjguNCAtIDIwMTRcbiAqIGh0dHA6Ly9qYW1lc2Zsb3JlbnRpbm8uZ2l0aHViLmNvbS9uYW5vU2Nyb2xsZXJKUy9cbiAqIENvcHlyaWdodCAoYykgMjAxNCBKYW1lcyBGbG9yZW50aW5vOyBMaWNlbnNlZCBNSVQgKi9cbihmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50KSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIEJST1dTRVJfSVNfSUU3LCBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCwgRE9NU0NST0xMLCBET1dOLCBEUkFHLCBFTlRFUiwgS0VZRE9XTiwgS0VZVVAsIE1PVVNFRE9XTiwgTU9VU0VFTlRFUiwgTU9VU0VNT1ZFLCBNT1VTRVVQLCBNT1VTRVdIRUVMLCBOYW5vU2Nyb2xsLCBQQU5FRE9XTiwgUkVTSVpFLCBTQ1JPTEwsIFNDUk9MTEJBUiwgVE9VQ0hNT1ZFLCBVUCwgV0hFRUwsIGNBRiwgZGVmYXVsdHMsIGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aCwgaGFzVHJhbnNmb3JtLCBpc0ZGV2l0aEJ1Z2d5U2Nyb2xsYmFyLCByQUYsIHRyYW5zZm9ybSwgX2VsZW1lbnRTdHlsZSwgX3ByZWZpeFN0eWxlLCBfdmVuZG9yO1xuICAgIGRlZmF1bHRzID0ge1xuXG4gICAgICAgIC8qKlxuICAgICAgYSBjbGFzc25hbWUgZm9yIHRoZSBwYW5lIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgcGFuZUNsYXNzXG4gICAgICBAdHlwZSBTdHJpbmdcbiAgICAgIEBkZWZhdWx0ICduYW5vLXBhbmUnXG4gICAgICovXG4gICAgICAgIHBhbmVDbGFzczogJ25hbm8tcGFuZScsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIGNsYXNzbmFtZSBmb3IgdGhlIHNsaWRlciBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHNsaWRlckNsYXNzXG4gICAgICBAdHlwZSBTdHJpbmdcbiAgICAgIEBkZWZhdWx0ICduYW5vLXNsaWRlcidcbiAgICAgKi9cbiAgICAgICAgc2xpZGVyQ2xhc3M6ICduYW5vLXNsaWRlcicsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIGNsYXNzbmFtZSBmb3IgdGhlIGNvbnRlbnQgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBjb250ZW50Q2xhc3NcbiAgICAgIEB0eXBlIFN0cmluZ1xuICAgICAgQGRlZmF1bHQgJ25hbm8tY29udGVudCdcbiAgICAgKi9cbiAgICAgICAgY29udGVudENsYXNzOiAnbmFuby1jb250ZW50JyxcblxuICAgICAgICAvKipcbiAgICAgIGEgc2V0dGluZyB0byBlbmFibGUgbmF0aXZlIHNjcm9sbGluZyBpbiBpT1MgZGV2aWNlcy5cbiAgICAgIEBwcm9wZXJ0eSBpT1NOYXRpdmVTY3JvbGxpbmdcbiAgICAgIEB0eXBlIEJvb2xlYW5cbiAgICAgIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgICAgIGlPU05hdGl2ZVNjcm9sbGluZzogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIHNldHRpbmcgdG8gcHJldmVudCB0aGUgcmVzdCBvZiB0aGUgcGFnZSBiZWluZ1xuICAgICAgc2Nyb2xsZWQgd2hlbiB1c2VyIHNjcm9sbHMgdGhlIGAuY29udGVudGAgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBwcmV2ZW50UGFnZVNjcm9sbGluZ1xuICAgICAgQHR5cGUgQm9vbGVhblxuICAgICAgQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICAgICAgcHJldmVudFBhZ2VTY3JvbGxpbmc6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBzZXR0aW5nIHRvIGRpc2FibGUgYmluZGluZyB0byB0aGUgcmVzaXplIGV2ZW50LlxuICAgICAgQHByb3BlcnR5IGRpc2FibGVSZXNpemVcbiAgICAgIEB0eXBlIEJvb2xlYW5cbiAgICAgIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgICAgIGRpc2FibGVSZXNpemU6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBzZXR0aW5nIHRvIG1ha2UgdGhlIHNjcm9sbGJhciBhbHdheXMgdmlzaWJsZS5cbiAgICAgIEBwcm9wZXJ0eSBhbHdheXNWaXNpYmxlXG4gICAgICBAdHlwZSBCb29sZWFuXG4gICAgICBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgICAgICBhbHdheXNWaXNpYmxlOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgIGEgZGVmYXVsdCB0aW1lb3V0IGZvciB0aGUgYGZsYXNoKClgIG1ldGhvZC5cbiAgICAgIEBwcm9wZXJ0eSBmbGFzaERlbGF5XG4gICAgICBAdHlwZSBOdW1iZXJcbiAgICAgIEBkZWZhdWx0IDE1MDBcbiAgICAgKi9cbiAgICAgICAgZmxhc2hEZWxheTogMTUwMCxcblxuICAgICAgICAvKipcbiAgICAgIGEgbWluaW11bSBoZWlnaHQgZm9yIHRoZSBgLnNsaWRlcmAgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBzbGlkZXJNaW5IZWlnaHRcbiAgICAgIEB0eXBlIE51bWJlclxuICAgICAgQGRlZmF1bHQgMjBcbiAgICAgKi9cbiAgICAgICAgc2xpZGVyTWluSGVpZ2h0OiAyMCxcblxuICAgICAgICAvKipcbiAgICAgIGEgbWF4aW11bSBoZWlnaHQgZm9yIHRoZSBgLnNsaWRlcmAgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBzbGlkZXJNYXhIZWlnaHRcbiAgICAgIEB0eXBlIE51bWJlclxuICAgICAgQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgICAgICBzbGlkZXJNYXhIZWlnaHQ6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICBhbiBhbHRlcm5hdGUgZG9jdW1lbnQgY29udGV4dC5cbiAgICAgIEBwcm9wZXJ0eSBkb2N1bWVudENvbnRleHRcbiAgICAgIEB0eXBlIERvY3VtZW50XG4gICAgICBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgICAgIGRvY3VtZW50Q29udGV4dDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgIGFuIGFsdGVybmF0ZSB3aW5kb3cgY29udGV4dC5cbiAgICAgIEBwcm9wZXJ0eSB3aW5kb3dDb250ZXh0XG4gICAgICBAdHlwZSBXaW5kb3dcbiAgICAgIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICAgICAgd2luZG93Q29udGV4dDogbnVsbFxuICAgIH07XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgU0NST0xMQkFSXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFNDUk9MTEJBUiA9ICdzY3JvbGxiYXInO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFNDUk9MTFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBTQ1JPTEwgPSAnc2Nyb2xsJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRURPV05cbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRURPV04gPSAnbW91c2Vkb3duJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRUVOVEVSXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VFTlRFUiA9ICdtb3VzZWVudGVyJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRU1PVkVcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VNT1ZFID0gJ21vdXNlbW92ZSc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VXSEVFTFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFV0hFRUwgPSAnbW91c2V3aGVlbCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgTU9VU0VVUFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRVVQID0gJ21vdXNldXAnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFJFU0laRVxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFJFU0laRSA9ICdyZXNpemUnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IERSQUdcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgRFJBRyA9ICdkcmFnJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBFTlRFUlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBFTlRFUiA9ICdlbnRlcic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgVVBcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgVVAgPSAndXAnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IFBBTkVET1dOXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFBBTkVET1dOID0gJ3BhbmVkb3duJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBET01TQ1JPTExcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgRE9NU0NST0xMID0gJ0RPTU1vdXNlU2Nyb2xsJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBET1dOXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIERPV04gPSAnZG93bic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgV0hFRUxcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgV0hFRUwgPSAnd2hlZWwnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEtFWURPV05cbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgS0VZRE9XTiA9ICdrZXlkb3duJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBLRVlVUFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBLRVlVUCA9ICdrZXl1cCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgVE9VQ0hNT1ZFXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFRPVUNITU9WRSA9ICd0b3VjaG1vdmUnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEJST1dTRVJfSVNfSUU3XG4gICAgQHR5cGUgQm9vbGVhblxuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBCUk9XU0VSX0lTX0lFNyA9IHdpbmRvdy5uYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicgJiYgL21zaWUgNy4vaS50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbikgJiYgd2luZG93LkFjdGl2ZVhPYmplY3Q7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEhcbiAgICBAdHlwZSBOdW1iZXJcbiAgICBAc3RhdGljXG4gICAgQGRlZmF1bHQgbnVsbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID0gbnVsbDtcbiAgICByQUYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuICAgIGNBRiA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZTtcbiAgICBfZWxlbWVudFN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7XG4gICAgX3ZlbmRvciA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGksIHRyYW5zZm9ybSwgdmVuZG9yLCB2ZW5kb3JzLCBfaSwgX2xlbjtcbiAgICAgICAgdmVuZG9ycyA9IFsndCcsICd3ZWJraXRUJywgJ01velQnLCAnbXNUJywgJ09UJ107XG4gICAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IHZlbmRvcnMubGVuZ3RoOyBfaSA8IF9sZW47IGkgPSArK19pKSB7XG4gICAgICAgICAgICB2ZW5kb3IgPSB2ZW5kb3JzW2ldO1xuICAgICAgICAgICAgdHJhbnNmb3JtID0gdmVuZG9yc1tpXSArICdyYW5zZm9ybSc7XG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtIGluIF9lbGVtZW50U3R5bGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmVuZG9yc1tpXS5zdWJzdHIoMCwgdmVuZG9yc1tpXS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkoKTtcbiAgICBfcHJlZml4U3R5bGUgPSBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICBpZiAoX3ZlbmRvciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX3ZlbmRvciA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHlsZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3ZlbmRvciArIHN0eWxlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3R5bGUuc3Vic3RyKDEpO1xuICAgIH07XG4gICAgdHJhbnNmb3JtID0gX3ByZWZpeFN0eWxlKCd0cmFuc2Zvcm0nKTtcbiAgICBoYXNUcmFuc2Zvcm0gPSB0cmFuc2Zvcm0gIT09IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgUmV0dXJucyBicm93c2VyJ3MgbmF0aXZlIHNjcm9sbGJhciB3aWR0aFxuICAgIEBtZXRob2QgZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoXG4gICAgQHJldHVybiB7TnVtYmVyfSB0aGUgc2Nyb2xsYmFyIHdpZHRoIGluIHBpeGVsc1xuICAgIEBzdGF0aWNcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG91dGVyLCBvdXRlclN0eWxlLCBzY3JvbGxiYXJXaWR0aDtcbiAgICAgICAgb3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgb3V0ZXJTdHlsZSA9IG91dGVyLnN0eWxlO1xuICAgICAgICBvdXRlclN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgb3V0ZXJTdHlsZS53aWR0aCA9ICcxMDBweCc7XG4gICAgICAgIG91dGVyU3R5bGUuaGVpZ2h0ID0gJzEwMHB4JztcbiAgICAgICAgb3V0ZXJTdHlsZS5vdmVyZmxvdyA9IFNDUk9MTDtcbiAgICAgICAgb3V0ZXJTdHlsZS50b3AgPSAnLTk5OTlweCc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3V0ZXIpO1xuICAgICAgICBzY3JvbGxiYXJXaWR0aCA9IG91dGVyLm9mZnNldFdpZHRoIC0gb3V0ZXIuY2xpZW50V2lkdGg7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3V0ZXIpO1xuICAgICAgICByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7XG4gICAgfTtcbiAgICBpc0ZGV2l0aEJ1Z2d5U2Nyb2xsYmFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpc09TWEZGLCB1YSwgdmVyc2lvbjtcbiAgICAgICAgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgICAgaXNPU1hGRiA9IC8oPz0uK01hYyBPUyBYKSg/PS4rRmlyZWZveCkvLnRlc3QodWEpO1xuICAgICAgICBpZiAoIWlzT1NYRkYpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2ZXJzaW9uID0gL0ZpcmVmb3hcXC9cXGR7Mn1cXC4vLmV4ZWModWEpO1xuICAgICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICAgICAgdmVyc2lvbiA9IHZlcnNpb25bMF0ucmVwbGFjZSgvXFxEKy9nLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlzT1NYRkYgJiYgK3ZlcnNpb24gPiAyMztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgQGNsYXNzIE5hbm9TY3JvbGxcbiAgICBAcGFyYW0gZWxlbWVudCB7SFRNTEVsZW1lbnR8Tm9kZX0gdGhlIG1haW4gZWxlbWVudFxuICAgIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IG5hbm9TY3JvbGxlcidzIG9wdGlvbnNcbiAgICBAY29uc3RydWN0b3JcbiAgICovXG4gICAgTmFub1Njcm9sbCA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgZnVuY3Rpb24gTmFub1Njcm9sbChlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5lbCA9IGVsO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICAgIEJST1dTRVJfU0NST0xMQkFSX1dJRFRIIHx8IChCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCA9IGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aCgpKTtcbiAgICAgICAgICAgIHRoaXMuJGVsID0gJCh0aGlzLmVsKTtcbiAgICAgICAgICAgIHRoaXMuZG9jID0gJCh0aGlzLm9wdGlvbnMuZG9jdW1lbnRDb250ZXh0IHx8IGRvY3VtZW50KTtcbiAgICAgICAgICAgIHRoaXMud2luID0gJCh0aGlzLm9wdGlvbnMud2luZG93Q29udGV4dCB8fCB3aW5kb3cpO1xuICAgICAgICAgICAgdGhpcy5ib2R5ID0gdGhpcy5kb2MuZmluZCgnYm9keScpO1xuICAgICAgICAgICAgdGhpcy4kY29udGVudCA9IHRoaXMuJGVsLmNoaWxkcmVuKFwiLlwiICsgb3B0aW9ucy5jb250ZW50Q2xhc3MpO1xuICAgICAgICAgICAgdGhpcy4kY29udGVudC5hdHRyKCd0YWJpbmRleCcsIHRoaXMub3B0aW9ucy50YWJJbmRleCB8fCAwKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuJGNvbnRlbnRbMF07XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pT1NOYXRpdmVTY3JvbGxpbmcgJiYgKHRoaXMuZWwuc3R5bGUuV2Via2l0T3ZlcmZsb3dTY3JvbGxpbmcgIT0gbnVsbCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hdGl2ZVNjcm9sbGluZygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdlbmVyYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5hZGRFdmVudHMoKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLyoqXG4gICAgICBQcmV2ZW50cyB0aGUgcmVzdCBvZiB0aGUgcGFnZSBiZWluZyBzY3JvbGxlZFxuICAgICAgd2hlbiB1c2VyIHNjcm9sbHMgdGhlIGAubmFuby1jb250ZW50YCBlbGVtZW50LlxuICAgICAgQG1ldGhvZCBwcmV2ZW50U2Nyb2xsaW5nXG4gICAgICBAcGFyYW0gZXZlbnQge0V2ZW50fVxuICAgICAgQHBhcmFtIGRpcmVjdGlvbiB7U3RyaW5nfSBTY3JvbGwgZGlyZWN0aW9uICh1cCBvciBkb3duKVxuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5wcmV2ZW50U2Nyb2xsaW5nID0gZnVuY3Rpb24oZSwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSBET01TQ1JPTEwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBET1dOICYmIGUub3JpZ2luYWxFdmVudC5kZXRhaWwgPiAwIHx8IGRpcmVjdGlvbiA9PT0gVVAgJiYgZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBNT1VTRVdIRUVMKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlLm9yaWdpbmFsRXZlbnQgfHwgIWUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gRE9XTiAmJiBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA8IDAgfHwgZGlyZWN0aW9uID09PSBVUCAmJiBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgRW5hYmxlIGlPUyBuYXRpdmUgc2Nyb2xsaW5nXG4gICAgICBAbWV0aG9kIG5hdGl2ZVNjcm9sbGluZ1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5uYXRpdmVTY3JvbGxpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcbiAgICAgICAgICAgICAgICBXZWJraXRPdmVyZmxvd1Njcm9sbGluZzogJ3RvdWNoJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlPU05hdGl2ZVNjcm9sbGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgVXBkYXRlcyB0aG9zZSBuYW5vU2Nyb2xsZXIgcHJvcGVydGllcyB0aGF0XG4gICAgICBhcmUgcmVsYXRlZCB0byBjdXJyZW50IHNjcm9sbGJhciBwb3NpdGlvbi5cbiAgICAgIEBtZXRob2QgdXBkYXRlU2Nyb2xsVmFsdWVzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnVwZGF0ZVNjcm9sbFZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQsIGRpcmVjdGlvbjtcbiAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7XG4gICAgICAgICAgICB0aGlzLm1heFNjcm9sbFRvcCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0IC0gY29udGVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnByZXZTY3JvbGxUb3AgPSB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgfHwgMDtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFNjcm9sbFRvcCA9IGNvbnRlbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgZGlyZWN0aW9uID0gdGhpcy5jb250ZW50U2Nyb2xsVG9wID4gdGhpcy5wcmV2aW91c1Bvc2l0aW9uID8gXCJkb3duXCIgOiB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgPCB0aGlzLnByZXZpb3VzUG9zaXRpb24gPyBcInVwXCIgOiBcInNhbWVcIjtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IHRoaXMuY29udGVudFNjcm9sbFRvcDtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gIT09IFwic2FtZVwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwudHJpZ2dlcigndXBkYXRlJywge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy5jb250ZW50U2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiB0aGlzLm1heFNjcm9sbFRvcCxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBkaXJlY3Rpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1heFNsaWRlclRvcCA9IHRoaXMucGFuZUhlaWdodCAtIHRoaXMuc2xpZGVySGVpZ2h0O1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyVG9wID0gdGhpcy5tYXhTY3JvbGxUb3AgPT09IDAgPyAwIDogdGhpcy5jb250ZW50U2Nyb2xsVG9wICogdGhpcy5tYXhTbGlkZXJUb3AgLyB0aGlzLm1heFNjcm9sbFRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgVXBkYXRlcyBDU1Mgc3R5bGVzIGZvciBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbi5cbiAgICAgIFVzZXMgQ1NTIDJkIHRyYW5zZnJvbXMgYW5kIGB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBpZiBhdmFpbGFibGUuXG4gICAgICBAbWV0aG9kIHNldE9uU2Nyb2xsU3R5bGVzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNldE9uU2Nyb2xsU3R5bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY3NzVmFsdWU7XG4gICAgICAgICAgICBpZiAoaGFzVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgY3NzVmFsdWUgPSB7fTtcbiAgICAgICAgICAgICAgICBjc3NWYWx1ZVt0cmFuc2Zvcm1dID0gXCJ0cmFuc2xhdGUoMCwgXCIgKyB0aGlzLnNsaWRlclRvcCArIFwicHgpXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNzc1ZhbHVlID0ge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHRoaXMuc2xpZGVyVG9wXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyQUYpIHtcbiAgICAgICAgICAgICAgICBpZiAoY0FGICYmIHRoaXMuc2Nyb2xsUkFGKSB7XG4gICAgICAgICAgICAgICAgICAgIGNBRih0aGlzLnNjcm9sbFJBRik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsUkFGID0gckFGKChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGxSQUYgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNsaWRlci5jc3MoY3NzVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIuY3NzKGNzc1ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgQ3JlYXRlcyBldmVudCByZWxhdGVkIG1ldGhvZHNcbiAgICAgIEBtZXRob2QgY3JlYXRlRXZlbnRzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmNyZWF0ZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSB7XG4gICAgICAgICAgICAgICAgZG93bjogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pc0JlaW5nRHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vZmZzZXRZID0gZS5wYWdlWSAtIF90aGlzLnNsaWRlci5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnNsaWRlci5pcyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vZmZzZXRZID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBhbmUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jLmJpbmQoTU9VU0VNT1ZFLCBfdGhpcy5ldmVudHNbRFJBR10pLmJpbmQoTU9VU0VVUCwgX3RoaXMuZXZlbnRzW1VQXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ib2R5LmJpbmQoTU9VU0VFTlRFUiwgX3RoaXMuZXZlbnRzW0VOVEVSXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgZHJhZzogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZID0gZS5wYWdlWSAtIF90aGlzLiRlbC5vZmZzZXQoKS50b3AgLSBfdGhpcy5wYW5lVG9wIC0gKF90aGlzLm9mZnNldFkgfHwgX3RoaXMuc2xpZGVySGVpZ2h0ICogMC41KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPj0gX3RoaXMubWF4U2Nyb2xsVG9wICYmIF90aGlzLnByZXZTY3JvbGxUb3AgIT09IF90aGlzLm1heFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGxlbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA9PT0gMCAmJiBfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ3Njcm9sbHRvcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHVwOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzQmVpbmdEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYW5lLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRvYy51bmJpbmQoTU9VU0VNT1ZFLCBfdGhpcy5ldmVudHNbRFJBR10pLnVuYmluZChNT1VTRVVQLCBfdGhpcy5ldmVudHNbVVBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJvZHkudW5iaW5kKE1PVVNFRU5URVIsIF90aGlzLmV2ZW50c1tFTlRFUl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHJlc2l6ZTogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHBhbmVkb3duOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlclkgPSAoZS5vZmZzZXRZIHx8IGUub3JpZ2luYWxFdmVudC5sYXllclkpIC0gKF90aGlzLnNsaWRlckhlaWdodCAqIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmV2ZW50cy5kb3duKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHNjcm9sbDogKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVTY3JvbGxWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0JlaW5nRHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSA9IF90aGlzLnNsaWRlclRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRPblNjcm9sbFN0eWxlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID49IF90aGlzLm1heFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnByZXZlbnRQYWdlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZlbnRTY3JvbGxpbmcoZSwgRE9XTik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSBfdGhpcy5tYXhTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ3Njcm9sbGVuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnByZXZlbnRQYWdlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnByZXZlbnRTY3JvbGxpbmcoZSwgVVApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucHJldlNjcm9sbFRvcCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsdG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIHdoZWVsOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YSA9IGUuZGVsdGEgfHwgZS53aGVlbERlbHRhIHx8IChlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEpIHx8IC1lLmRldGFpbCB8fCAoZS5vcmlnaW5hbEV2ZW50ICYmIC1lLm9yaWdpbmFsRXZlbnQuZGV0YWlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWx0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlclkgKz0gLWRlbHRhIC8gMztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpLFxuICAgICAgICAgICAgICAgIGVudGVyOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pc0JlaW5nRHJhZ2dlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZS5idXR0b25zIHx8IGUud2hpY2gpICE9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfcmVmID0gX3RoaXMuZXZlbnRzKVtVUF0uYXBwbHkoX3JlZiwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgQWRkcyBldmVudCBsaXN0ZW5lcnMgd2l0aCBqUXVlcnkuXG4gICAgICBAbWV0aG9kIGFkZEV2ZW50c1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5hZGRFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBldmVudHM7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50cygpO1xuICAgICAgICAgICAgZXZlbnRzID0gdGhpcy5ldmVudHM7XG4gICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5kaXNhYmxlUmVzaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aW4uYmluZChSRVNJWkUsIGV2ZW50c1tSRVNJWkVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci5iaW5kKE1PVVNFRE9XTiwgZXZlbnRzW0RPV05dKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUuYmluZChNT1VTRURPV04sIGV2ZW50c1tQQU5FRE9XTl0pLmJpbmQoXCJcIiArIE1PVVNFV0hFRUwgKyBcIiBcIiArIERPTVNDUk9MTCwgZXZlbnRzW1dIRUVMXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LmJpbmQoXCJcIiArIFNDUk9MTCArIFwiIFwiICsgTU9VU0VXSEVFTCArIFwiIFwiICsgRE9NU0NST0xMICsgXCIgXCIgKyBUT1VDSE1PVkUsIGV2ZW50c1tTQ1JPTExdKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgUmVtb3ZlcyBldmVudCBsaXN0ZW5lcnMgd2l0aCBqUXVlcnkuXG4gICAgICBAbWV0aG9kIHJlbW92ZUV2ZW50c1xuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5yZW1vdmVFdmVudHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBldmVudHM7XG4gICAgICAgICAgICBldmVudHMgPSB0aGlzLmV2ZW50cztcbiAgICAgICAgICAgIHRoaXMud2luLnVuYmluZChSRVNJWkUsIGV2ZW50c1tSRVNJWkVdKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci51bmJpbmQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUudW5iaW5kKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnVuYmluZChcIlwiICsgU0NST0xMICsgXCIgXCIgKyBNT1VTRVdIRUVMICsgXCIgXCIgKyBET01TQ1JPTEwgKyBcIiBcIiArIFRPVUNITU9WRSwgZXZlbnRzW1NDUk9MTF0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBHZW5lcmF0ZXMgbmFub1Njcm9sbGVyJ3Mgc2Nyb2xsYmFyIGFuZCBlbGVtZW50cyBmb3IgaXQuXG4gICAgICBAbWV0aG9kIGdlbmVyYXRlXG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmdlbmVyYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudENsYXNzLCBjc3NSdWxlLCBjdXJyZW50UGFkZGluZywgb3B0aW9ucywgcGFuZSwgcGFuZUNsYXNzLCBzbGlkZXJDbGFzcztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICBwYW5lQ2xhc3MgPSBvcHRpb25zLnBhbmVDbGFzcywgc2xpZGVyQ2xhc3MgPSBvcHRpb25zLnNsaWRlckNsYXNzLCBjb250ZW50Q2xhc3MgPSBvcHRpb25zLmNvbnRlbnRDbGFzcztcbiAgICAgICAgICAgIGlmICghKHBhbmUgPSB0aGlzLiRlbC5jaGlsZHJlbihcIi5cIiArIHBhbmVDbGFzcykpLmxlbmd0aCAmJiAhcGFuZS5jaGlsZHJlbihcIi5cIiArIHNsaWRlckNsYXNzKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQoXCI8ZGl2IGNsYXNzPVxcXCJcIiArIHBhbmVDbGFzcyArIFwiXFxcIj48ZGl2IGNsYXNzPVxcXCJcIiArIHNsaWRlckNsYXNzICsgXCJcXFwiIC8+PC9kaXY+XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYW5lID0gdGhpcy4kZWwuY2hpbGRyZW4oXCIuXCIgKyBwYW5lQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXIgPSB0aGlzLnBhbmUuZmluZChcIi5cIiArIHNsaWRlckNsYXNzKTtcbiAgICAgICAgICAgIGlmIChCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCA9PT0gMCAmJiBpc0ZGV2l0aEJ1Z2d5U2Nyb2xsYmFyKCkpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFkZGluZyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuY29udGVudCwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1yaWdodCcpLnJlcGxhY2UoL1teMC05Ll0rL2csICcnKTtcbiAgICAgICAgICAgICAgICBjc3NSdWxlID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogLTE0LFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6ICtjdXJyZW50UGFkZGluZyArIDE0XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEgpIHtcbiAgICAgICAgICAgICAgICBjc3NSdWxlID0ge1xuICAgICAgICAgICAgICAgICAgICByaWdodDogLUJST1dTRVJfU0NST0xMQkFSX1dJRFRIXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcygnaGFzLXNjcm9sbGJhcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNzc1J1bGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKGNzc1J1bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEBtZXRob2QgcmVzdG9yZVxuICAgICAgQHByaXZhdGVcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5yZXN0b3JlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRFdmVudHMoKTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgUmVzZXRzIG5hbm9TY3JvbGxlcidzIHNjcm9sbGJhci5cbiAgICAgIEBtZXRob2QgcmVzZXRcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcigpO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCwgY29udGVudEhlaWdodCwgY29udGVudFBvc2l0aW9uLCBjb250ZW50U3R5bGUsIGNvbnRlbnRTdHlsZU92ZXJmbG93WSwgcGFuZUJvdHRvbSwgcGFuZUhlaWdodCwgcGFuZU91dGVySGVpZ2h0LCBwYW5lVG9wLCBwYXJlbnRNYXhIZWlnaHQsIHJpZ2h0LCBzbGlkZXJIZWlnaHQ7XG4gICAgICAgICAgICBpZiAodGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRIZWlnaHQgPSB0aGlzLmNvbnRlbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy4kZWwuZmluZChcIi5cIiArIHRoaXMub3B0aW9ucy5wYW5lQ2xhc3MpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGUoKS5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50ID0gdGhpcy5jb250ZW50O1xuICAgICAgICAgICAgY29udGVudFN0eWxlID0gY29udGVudC5zdHlsZTtcbiAgICAgICAgICAgIGNvbnRlbnRTdHlsZU92ZXJmbG93WSA9IGNvbnRlbnRTdHlsZS5vdmVyZmxvd1k7XG4gICAgICAgICAgICBpZiAoQlJPV1NFUl9JU19JRTcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy4kY29udGVudC5oZWlnaHQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGVudEhlaWdodCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEg7XG4gICAgICAgICAgICBwYXJlbnRNYXhIZWlnaHQgPSBwYXJzZUludCh0aGlzLiRlbC5jc3MoXCJtYXgtaGVpZ2h0XCIpLCAxMCk7XG4gICAgICAgICAgICBpZiAocGFyZW50TWF4SGVpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmhlaWdodChcIlwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5oZWlnaHQoY29udGVudC5zY3JvbGxIZWlnaHQgPiBwYXJlbnRNYXhIZWlnaHQgPyBwYXJlbnRNYXhIZWlnaHQgOiBjb250ZW50LnNjcm9sbEhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYW5lSGVpZ2h0ID0gdGhpcy5wYW5lLm91dGVySGVpZ2h0KGZhbHNlKTtcbiAgICAgICAgICAgIHBhbmVUb3AgPSBwYXJzZUludCh0aGlzLnBhbmUuY3NzKCd0b3AnKSwgMTApO1xuICAgICAgICAgICAgcGFuZUJvdHRvbSA9IHBhcnNlSW50KHRoaXMucGFuZS5jc3MoJ2JvdHRvbScpLCAxMCk7XG4gICAgICAgICAgICBwYW5lT3V0ZXJIZWlnaHQgPSBwYW5lSGVpZ2h0ICsgcGFuZVRvcCArIHBhbmVCb3R0b207XG4gICAgICAgICAgICBzbGlkZXJIZWlnaHQgPSBNYXRoLnJvdW5kKHBhbmVPdXRlckhlaWdodCAvIGNvbnRlbnRIZWlnaHQgKiBwYW5lT3V0ZXJIZWlnaHQpO1xuICAgICAgICAgICAgaWYgKHNsaWRlckhlaWdodCA8IHRoaXMub3B0aW9ucy5zbGlkZXJNaW5IZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzbGlkZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuc2xpZGVyTWluSGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIGlmICgodGhpcy5vcHRpb25zLnNsaWRlck1heEhlaWdodCAhPSBudWxsKSAmJiBzbGlkZXJIZWlnaHQgPiB0aGlzLm9wdGlvbnMuc2xpZGVyTWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc2xpZGVySGVpZ2h0ID0gdGhpcy5vcHRpb25zLnNsaWRlck1heEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb250ZW50U3R5bGVPdmVyZmxvd1kgPT09IFNDUk9MTCAmJiBjb250ZW50U3R5bGUub3ZlcmZsb3dYICE9PSBTQ1JPTEwpIHtcbiAgICAgICAgICAgICAgICBzbGlkZXJIZWlnaHQgKz0gQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1heFNsaWRlclRvcCA9IHBhbmVPdXRlckhlaWdodCAtIHNsaWRlckhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEhlaWdodCA9IGNvbnRlbnRIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnBhbmVIZWlnaHQgPSBwYW5lSGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wYW5lT3V0ZXJIZWlnaHQgPSBwYW5lT3V0ZXJIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnNsaWRlckhlaWdodCA9IHNsaWRlckhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucGFuZVRvcCA9IHBhbmVUb3A7XG4gICAgICAgICAgICB0aGlzLnNsaWRlci5oZWlnaHQoc2xpZGVySGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnNjcm9sbCgpO1xuICAgICAgICAgICAgdGhpcy5wYW5lLnNob3coKTtcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKChjb250ZW50LnNjcm9sbEhlaWdodCA9PT0gY29udGVudC5jbGllbnRIZWlnaHQpIHx8ICh0aGlzLnBhbmUub3V0ZXJIZWlnaHQodHJ1ZSkgPj0gY29udGVudC5zY3JvbGxIZWlnaHQgJiYgY29udGVudFN0eWxlT3ZlcmZsb3dZICE9PSBTQ1JPTEwpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWwuY2xpZW50SGVpZ2h0ID09PSBjb250ZW50LnNjcm9sbEhlaWdodCAmJiBjb250ZW50U3R5bGVPdmVyZmxvd1kgPT09IFNDUk9MTCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLmhpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wYW5lLmNzcyh7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogKHRoaXMub3B0aW9ucy5hbHdheXNWaXNpYmxlID8gMSA6ICcnKSxcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAodGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGUgPyAndmlzaWJsZScgOiAnJylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGVudFBvc2l0aW9uID0gdGhpcy4kY29udGVudC5jc3MoJ3Bvc2l0aW9uJyk7XG4gICAgICAgICAgICBpZiAoY29udGVudFBvc2l0aW9uID09PSAnc3RhdGljJyB8fCBjb250ZW50UG9zaXRpb24gPT09ICdyZWxhdGl2ZScpIHtcbiAgICAgICAgICAgICAgICByaWdodCA9IHBhcnNlSW50KHRoaXMuJGNvbnRlbnQuY3NzKCdyaWdodCcpLCAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKHJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0OiByaWdodFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgQG1ldGhvZCBzY3JvbGxcbiAgICAgIEBwcml2YXRlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGw6ICd0b3AnIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zbGlkZXJZID0gTWF0aC5tYXgoMCwgdGhpcy5zbGlkZXJZKTtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyWSA9IE1hdGgubWluKHRoaXMubWF4U2xpZGVyVG9wLCB0aGlzLnNsaWRlclkpO1xuICAgICAgICAgICAgdGhpcy4kY29udGVudC5zY3JvbGxUb3AodGhpcy5tYXhTY3JvbGxUb3AgKiB0aGlzLnNsaWRlclkgLyB0aGlzLm1heFNsaWRlclRvcCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxWYWx1ZXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9uU2Nyb2xsU3R5bGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgU2Nyb2xsIGF0IHRoZSBib3R0b20gd2l0aCBhbiBvZmZzZXQgdmFsdWVcbiAgICAgIEBtZXRob2Qgc2Nyb2xsQm90dG9tXG4gICAgICBAcGFyYW0gb2Zmc2V0WSB7TnVtYmVyfVxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsQm90dG9tOiB2YWx1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGxCb3R0b20gPSBmdW5jdGlvbihvZmZzZXRZKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnNjcm9sbFRvcCh0aGlzLmNvbnRlbnRIZWlnaHQgLSB0aGlzLiRjb250ZW50LmhlaWdodCgpIC0gb2Zmc2V0WSkudHJpZ2dlcihNT1VTRVdIRUVMKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcCgpLnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBTY3JvbGwgYXQgdGhlIHRvcCB3aXRoIGFuIG9mZnNldCB2YWx1ZVxuICAgICAgQG1ldGhvZCBzY3JvbGxUb3BcbiAgICAgIEBwYXJhbSBvZmZzZXRZIHtOdW1iZXJ9XG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGxUb3A6IHZhbHVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbFRvcCA9IGZ1bmN0aW9uKG9mZnNldFkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuc2Nyb2xsVG9wKCtvZmZzZXRZKS50cmlnZ2VyKE1PVVNFV0hFRUwpO1xuICAgICAgICAgICAgdGhpcy5zdG9wKCkucmVzdG9yZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFNjcm9sbCB0byBhbiBlbGVtZW50XG4gICAgICBAbWV0aG9kIHNjcm9sbFRvXG4gICAgICBAcGFyYW0gbm9kZSB7Tm9kZX0gQSBub2RlIHRvIHNjcm9sbCB0by5cbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbFRvOiAkKCcjYV9ub2RlJykgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsVG8gPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCh0aGlzLiRlbC5maW5kKG5vZGUpLmdldCgwKS5vZmZzZXRUb3ApO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFRvIHN0b3AgdGhlIG9wZXJhdGlvbi5cbiAgICAgIFRoaXMgb3B0aW9uIHdpbGwgdGVsbCB0aGUgcGx1Z2luIHRvIGRpc2FibGUgYWxsIGV2ZW50IGJpbmRpbmdzIGFuZCBoaWRlIHRoZSBnYWRnZXQgc2Nyb2xsYmFyIGZyb20gdGhlIFVJLlxuICAgICAgQG1ldGhvZCBzdG9wXG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzdG9wOiB0cnVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChjQUYgJiYgdGhpcy5zY3JvbGxSQUYpIHtcbiAgICAgICAgICAgICAgICBjQUYodGhpcy5zY3JvbGxSQUYpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsUkFGID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50cygpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgRGVzdHJveXMgbmFub1Njcm9sbGVyIGFuZCByZXN0b3JlcyBicm93c2VyJ3MgbmF0aXZlIHNjcm9sbGJhci5cbiAgICAgIEBtZXRob2QgZGVzdHJveVxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgZGVzdHJveTogdHJ1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZyAmJiB0aGlzLnBhbmUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEJST1dTRVJfSVNfSUU3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5oZWlnaHQoJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJGVsLmhhc0NsYXNzKCdoYXMtc2Nyb2xsYmFyJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcygnaGFzLXNjcm9sbGJhcicpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgVG8gZmxhc2ggdGhlIHNjcm9sbGJhciBnYWRnZXQgZm9yIGFuIGFtb3VudCBvZiB0aW1lIGRlZmluZWQgaW4gcGx1Z2luIHNldHRpbmdzIChkZWZhdWx0cyB0byAxLDVzKS5cbiAgICAgIFVzZWZ1bCBpZiB5b3Ugd2FudCB0byBzaG93IHRoZSB1c2VyIChlLmcuIG9uIHBhZ2Vsb2FkKSB0aGF0IHRoZXJlIGlzIG1vcmUgY29udGVudCB3YWl0aW5nIGZvciBoaW0uXG4gICAgICBAbWV0aG9kIGZsYXNoXG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBmbGFzaDogdHJ1ZSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5mbGFzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgdGhpcy5wYW5lLmFkZENsYXNzKCdmbGFzaGVkJyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFuZS5yZW1vdmVDbGFzcygnZmxhc2hlZCcpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSh0aGlzKSwgdGhpcy5vcHRpb25zLmZsYXNoRGVsYXkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIE5hbm9TY3JvbGw7XG5cbiAgICB9KSgpO1xuICAgICQuZm4ubmFub1Njcm9sbGVyID0gZnVuY3Rpb24oc2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zLCBzY3JvbGxiYXI7XG4gICAgICAgICAgICBpZiAoIShzY3JvbGxiYXIgPSB0aGlzLm5hbm9zY3JvbGxlcikpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgdGhpcy5uYW5vc2Nyb2xsZXIgPSBzY3JvbGxiYXIgPSBuZXcgTmFub1Njcm9sbCh0aGlzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncyAmJiB0eXBlb2Ygc2V0dGluZ3MgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAkLmV4dGVuZChzY3JvbGxiYXIub3B0aW9ucywgc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGxCb3R0b20gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbEJvdHRvbShzZXR0aW5ncy5zY3JvbGxCb3R0b20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsVG9wICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUb3Aoc2V0dGluZ3Muc2Nyb2xsVG9wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbFRvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsVG8oc2V0dGluZ3Muc2Nyb2xsVG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsID09PSAnYm90dG9tJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbEJvdHRvbSgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGwgJiYgc2V0dGluZ3Muc2Nyb2xsIGluc3RhbmNlb2YgJCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvKHNldHRpbmdzLnNjcm9sbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zdG9wKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuZGVzdHJveSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmZsYXNoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuZmxhc2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnJlc2V0KCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJC5mbi5uYW5vU2Nyb2xsZXIuQ29uc3RydWN0b3IgPSBOYW5vU2Nyb2xsO1xufSkoanExMTEsIHdpbmRvdywgZG9jdW1lbnQpOyIsIi8qXG4gIE1hcmt1cC5qcyB2MS41LjIwOiBodHRwOi8vZ2l0aHViLmNvbS9hZGFtbWFyay9NYXJrdXAuanNcbiAgTUlUIExpY2Vuc2VcbiAgKGMpIDIwMTEgLSAyMDE0IEFkYW0gTWFya1xuKi9cbnZhciBNYXJrID0ge1xuICAgIC8vIFRlbXBsYXRlcyB0byBpbmNsdWRlLCBieSBuYW1lLiBBIHRlbXBsYXRlIGlzIGEgc3RyaW5nLlxuICAgIGluY2x1ZGVzOiB7fSxcblxuICAgIC8vIEdsb2JhbCB2YXJpYWJsZXMsIGJ5IG5hbWUuIEdsb2JhbCB2YXJpYWJsZXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgY29udGV4dCB2YXJpYWJsZXMuXG4gICAgZ2xvYmFsczoge30sXG5cbiAgICAvLyBUaGUgZGVsaW1pdGVyIHRvIHVzZSBpbiBwaXBlIGV4cHJlc3Npb25zLCBlLmcuIHt7aWYgY29sb3J8bGlrZT5yZWR9fS5cbiAgICBkZWxpbWl0ZXI6IFwiPlwiLFxuXG4gICAgLy8gQ29sbGFwc2Ugd2hpdGUgc3BhY2UgYmV0d2VlbiBIVE1MIGVsZW1lbnRzIGluIHRoZSByZXN1bHRpbmcgc3RyaW5nLlxuICAgIGNvbXBhY3Q6IGZhbHNlLFxuXG4gICAgLy8gU2hhbGxvdy1jb3B5IGFuIG9iamVjdC5cbiAgICBfY29weTogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgYiA9IGIgfHwgW107XG5cbiAgICAgICAgZm9yICh2YXIgaSBpbiBhKSB7XG4gICAgICAgICAgICBiW2ldID0gYVtpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBiO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIHZhbHVlIG9mIGEgbnVtYmVyIG9yIHNpemUgb2YgYW4gYXJyYXkuIFRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gZm9yIHNldmVyYWwgcGlwZXMuXG4gICAgX3NpemU6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiBhIGluc3RhbmNlb2YgQXJyYXkgPyBhLmxlbmd0aCA6IChhIHx8IDApO1xuICAgIH0sXG5cbiAgICAvLyBUaGlzIG9iamVjdCByZXByZXNlbnRzIGFuIGl0ZXJhdGlvbi4gSXQgaGFzIGFuIGluZGV4IGFuZCBsZW5ndGguXG4gICAgX2l0ZXI6IGZ1bmN0aW9uIChpZHgsIHNpemUpIHtcbiAgICAgICAgdGhpcy5pZHggPSBpZHg7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gc2l6ZTtcbiAgICAgICAgdGhpcy5zaWduID0gXCIjXCI7XG5cbiAgICAgICAgLy8gUHJpbnQgdGhlIGluZGV4IGlmIFwiI1wiIG9yIHRoZSBjb3VudCBpZiBcIiMjXCIuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pZHggKyB0aGlzLnNpZ24ubGVuZ3RoIC0gMTtcbiAgICAgICAgfTtcbiAgICB9LFxuXG4gICAgLy8gUGFzcyBhIHZhbHVlIHRocm91Z2ggYSBzZXJpZXMgb2YgcGlwZSBleHByZXNzaW9ucywgZS5nLiBfcGlwZSgxMjMsIFtcImFkZD4xMFwiLFwidGltZXM+NVwiXSkuXG4gICAgX3BpcGU6IGZ1bmN0aW9uICh2YWwsIGV4cHJlc3Npb25zKSB7XG4gICAgICAgIHZhciBleHByZXNzaW9uLCBwYXJ0cywgZm4sIHJlc3VsdDtcblxuICAgICAgICAvLyBJZiB3ZSBoYXZlIGV4cHJlc3Npb25zLCBwdWxsIG91dCB0aGUgZmlyc3Qgb25lLCBlLmcuIFwiYWRkPjEwXCIuXG4gICAgICAgIGlmICgoZXhwcmVzc2lvbiA9IGV4cHJlc3Npb25zLnNoaWZ0KCkpKSB7XG5cbiAgICAgICAgICAgIC8vIFNwbGl0IHRoZSBleHByZXNzaW9uIGludG8gaXRzIGNvbXBvbmVudCBwYXJ0cywgZS5nLiBbXCJhZGRcIiwgXCIxMFwiXS5cbiAgICAgICAgICAgIHBhcnRzID0gZXhwcmVzc2lvbi5zcGxpdCh0aGlzLmRlbGltaXRlcik7XG5cbiAgICAgICAgICAgIC8vIFB1bGwgb3V0IHRoZSBmdW5jdGlvbiBuYW1lLCBlLmcuIFwiYWRkXCIuXG4gICAgICAgICAgICBmbiA9IHBhcnRzLnNoaWZ0KCkudHJpbSgpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFJ1biB0aGUgZnVuY3Rpb24sIGUuZy4gYWRkKDEyMywgMTApIC4uLlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IE1hcmsucGlwZXNbZm5dLmFwcGx5KG51bGwsIFt2YWxdLmNvbmNhdChwYXJ0cykpO1xuXG4gICAgICAgICAgICAgICAgLy8gLi4uIHRoZW4gcGlwZSBhZ2FpbiB3aXRoIHJlbWFpbmluZyBleHByZXNzaW9ucy5cbiAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLl9waXBlKHJlc3VsdCwgZXhwcmVzc2lvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgcGlwZWQgdmFsdWUuXG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcblxuICAgIC8vIFRPRE8gZG9jXG4gICAgX2V2YWw6IGZ1bmN0aW9uIChjb250ZXh0LCBmaWx0ZXJzLCBjaGlsZCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5fcGlwZShjb250ZXh0LCBmaWx0ZXJzKSxcbiAgICAgICAgICAgIGN0eCA9IHJlc3VsdCxcbiAgICAgICAgICAgIGkgPSAtMSxcbiAgICAgICAgICAgIGosXG4gICAgICAgICAgICBvcHRzO1xuXG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgICAgIGogPSBjdHgubGVuZ3RoO1xuXG4gICAgICAgICAgICB3aGlsZSAoKytpIDwgaikge1xuICAgICAgICAgICAgICAgIG9wdHMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXI6IG5ldyB0aGlzLl9pdGVyKGksIGopXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gY2hpbGQgPyBNYXJrLnVwKGNoaWxkLCBjdHhbaV0sIG9wdHMpIDogY3R4W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gTWFyay51cChjaGlsZCwgY3R4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIC8vIFByb2Nlc3MgdGhlIGNvbnRlbnRzIG9mIGFuIElGIG9yIElGL0VMU0UgYmxvY2suXG4gICAgX3Rlc3Q6IGZ1bmN0aW9uIChib29sLCBjaGlsZCwgY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBQcm9jZXNzIHRoZSBjaGlsZCBzdHJpbmcsIHRoZW4gc3BsaXQgaXQgaW50byB0aGUgSUYgYW5kIEVMU0UgcGFydHMuXG4gICAgICAgIHZhciBzdHIgPSBNYXJrLnVwKGNoaWxkLCBjb250ZXh0LCBvcHRpb25zKS5zcGxpdCgvXFx7XFx7XFxzKmVsc2VcXHMqXFx9XFx9Lyk7XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBJRiBvciBFTFNFIHBhcnQuIElmIG5vIEVMU0UsIHJldHVybiBhbiBlbXB0eSBzdHJpbmcuXG4gICAgICAgIHJldHVybiAoYm9vbCA9PT0gZmFsc2UgPyBzdHJbMV0gOiBzdHJbMF0pIHx8IFwiXCI7XG4gICAgfSxcblxuICAgIC8vIERldGVybWluZSB0aGUgZXh0ZW50IG9mIGEgYmxvY2sgZXhwcmVzc2lvbiwgZS5nLiBcInt7Zm9vfX0uLi57ey9mb299fVwiXG4gICAgX2JyaWRnZTogZnVuY3Rpb24gKHRwbCwgdGtuKSB7XG4gICAgICAgIGlmICh0a24gPT0gXCIuXCIpXG4gICAgICAgICAgICB0a24gPSBcIlxcXFwuXCI7ICAgIC8vIHJlZ2V4LXNhZmVcbiAgICAgICAgdmFyIGV4cCA9IFwie3tcXFxccypcIiArIHRrbiArIFwiKFteL31dK1xcXFx3Kik/fX18e3svXCIgKyB0a24gKyBcIlxcXFxzKn19XCIsXG4gICAgICAgICAgICByZSA9IG5ldyBSZWdFeHAoZXhwLCBcImdcIiksXG4gICAgICAgICAgICB0YWdzID0gdHBsLm1hdGNoKHJlKSB8fCBbXSxcbiAgICAgICAgICAgIHQsXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgYSA9IDAsXG4gICAgICAgICAgICBiID0gMCxcbiAgICAgICAgICAgIGMgPSAtMSxcbiAgICAgICAgICAgIGQgPSAwO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0ID0gaTtcbiAgICAgICAgICAgIGMgPSB0cGwuaW5kZXhPZih0YWdzW3RdLCBjICsgMSk7XG5cbiAgICAgICAgICAgIGlmICh0YWdzW3RdLmluZGV4T2YoXCJ7ey9cIikgPiAtMSkge1xuICAgICAgICAgICAgICAgIGIrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGErKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGEgPSB0cGwuaW5kZXhPZih0YWdzWzBdKTtcbiAgICAgICAgYiA9IGEgKyB0YWdzWzBdLmxlbmd0aDtcbiAgICAgICAgZCA9IGMgKyB0YWdzW3RdLmxlbmd0aDtcblxuICAgICAgICAvLyBSZXR1cm4gdGhlIGJsb2NrLCBlLmcuIFwie3tmb299fWJhcnt7L2Zvb319XCIgYW5kIGl0cyBjaGlsZCwgZS5nLiBcImJhclwiLlxuICAgICAgICByZXR1cm4gW3RwbC5zdWJzdHJpbmcoYSwgZCksIHRwbC5zdWJzdHJpbmcoYiwgYyldO1xuICAgIH1cbn07XG5cbi8vIEluamVjdCBhIHRlbXBsYXRlIHN0cmluZyB3aXRoIGNvbnRleHR1YWwgZGF0YSBhbmQgcmV0dXJuIGEgbmV3IHN0cmluZy5cbk1hcmsudXAgPSBmdW5jdGlvbiAodGVtcGxhdGUsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCB7fTtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIC8vIE1hdGNoIGFsbCB0YWdzIGxpa2UgXCJ7ey4uLn19XCIuXG4gICAgdmFyIHJlID0gL1xce1xceyguKz8pXFx9XFx9L2csXG4gICAgICAgIC8vIEFsbCB0YWdzIGluIHRoZSB0ZW1wbGF0ZS5cbiAgICAgICAgdGFncyA9IHRlbXBsYXRlLm1hdGNoKHJlKSB8fCBbXSxcbiAgICAgICAgLy8gVGhlIHRhZyBiZWluZyBldmFsdWF0ZWQsIGUuZy4gXCJ7e2hhbXN0ZXJ8ZGFuY2V9fVwiLlxuICAgICAgICB0YWcsXG4gICAgICAgIC8vIFRoZSBleHByZXNzaW9uIHRvIGV2YWx1YXRlIGluc2lkZSB0aGUgdGFnLCBlLmcuIFwiaGFtc3RlcnxkYW5jZVwiLlxuICAgICAgICBwcm9wLFxuICAgICAgICAvLyBUaGUgdG9rZW4gaXRzZWxmLCBlLmcuIFwiaGFtc3RlclwiLlxuICAgICAgICB0b2tlbixcbiAgICAgICAgLy8gQW4gYXJyYXkgb2YgcGlwZSBleHByZXNzaW9ucywgZS5nLiBbXCJtb3JlPjFcIiwgXCJsZXNzPjJcIl0uXG4gICAgICAgIGZpbHRlcnMgPSBbXSxcbiAgICAgICAgLy8gRG9lcyB0aGUgdGFnIGNsb3NlIGl0c2VsZj8gZS5nLiBcInt7c3R1ZmYvfX1cIi5cbiAgICAgICAgc2VsZnksXG4gICAgICAgIC8vIElzIHRoZSB0YWcgYW4gXCJpZlwiIHN0YXRlbWVudD9cbiAgICAgICAgdGVzdHksXG4gICAgICAgIC8vIFRoZSBjb250ZW50cyBvZiBhIGJsb2NrIHRhZywgZS5nLiBcInt7YWF9fWJie3svYWF9fVwiIC0+IFwiYmJcIi5cbiAgICAgICAgY2hpbGQsXG4gICAgICAgIC8vIFRoZSByZXN1bHRpbmcgc3RyaW5nLlxuICAgICAgICByZXN1bHQsXG4gICAgICAgIC8vIFRoZSBnbG9iYWwgdmFyaWFibGUgYmVpbmcgZXZhbHVhdGVkLCBvciB1bmRlZmluZWQuXG4gICAgICAgIGdsb2JhbCxcbiAgICAgICAgLy8gVGhlIGluY2x1ZGVkIHRlbXBsYXRlIGJlaW5nIGV2YWx1YXRlZCwgb3IgdW5kZWZpbmVkLlxuICAgICAgICBpbmNsdWRlLFxuICAgICAgICAvLyBBIHBsYWNlaG9sZGVyIHZhcmlhYmxlLlxuICAgICAgICBjdHgsXG4gICAgICAgIC8vIEl0ZXJhdG9ycy5cbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGogPSAwO1xuXG4gICAgLy8gU2V0IGN1c3RvbSBwaXBlcywgaWYgcHJvdmlkZWQuXG4gICAgaWYgKG9wdGlvbnMucGlwZXMpIHtcbiAgICAgICAgdGhpcy5fY29weShvcHRpb25zLnBpcGVzLCB0aGlzLnBpcGVzKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgdGVtcGxhdGVzIHRvIGluY2x1ZGUsIGlmIHByb3ZpZGVkLlxuICAgIGlmIChvcHRpb25zLmluY2x1ZGVzKSB7XG4gICAgICAgIHRoaXMuX2NvcHkob3B0aW9ucy5pbmNsdWRlcywgdGhpcy5pbmNsdWRlcyk7XG4gICAgfVxuXG4gICAgLy8gU2V0IGdsb2JhbCB2YXJpYWJsZXMsIGlmIHByb3ZpZGVkLlxuICAgIGlmIChvcHRpb25zLmdsb2JhbHMpIHtcbiAgICAgICAgdGhpcy5fY29weShvcHRpb25zLmdsb2JhbHMsIHRoaXMuZ2xvYmFscyk7XG4gICAgfVxuXG4gICAgLy8gT3B0aW9uYWxseSBvdmVycmlkZSB0aGUgZGVsaW1pdGVyLlxuICAgIGlmIChvcHRpb25zLmRlbGltaXRlcikge1xuICAgICAgICB0aGlzLmRlbGltaXRlciA9IG9wdGlvbnMuZGVsaW1pdGVyO1xuICAgIH1cblxuICAgIC8vIE9wdGlvbmFsbHkgY29sbGFwc2Ugd2hpdGUgc3BhY2UuXG4gICAgaWYgKG9wdGlvbnMuY29tcGFjdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuY29tcGFjdCA9IG9wdGlvbnMuY29tcGFjdDtcbiAgICB9XG5cbiAgICAvLyBMb29wIHRocm91Z2ggdGFncywgZS5nLiB7e2F9fSwge3tifX0sIHt7Y319LCB7ey9jfX0uXG4gICAgd2hpbGUgKCh0YWcgPSB0YWdzW2krK10pKSB7XG4gICAgICAgIHJlc3VsdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY2hpbGQgPSBcIlwiO1xuICAgICAgICBzZWxmeSA9IHRhZy5pbmRleE9mKFwiL319XCIpID4gLTE7XG4gICAgICAgIHByb3AgPSB0YWcuc3Vic3RyKDIsIHRhZy5sZW5ndGggLSAoc2VsZnkgPyA1IDogNCkpO1xuICAgICAgICBwcm9wID0gcHJvcC5yZXBsYWNlKC9gKC4rPylgL2csIGZ1bmN0aW9uIChzLCBwMSkge1xuICAgICAgICAgICAgcmV0dXJuIE1hcmsudXAoXCJ7e1wiICsgcDEgKyBcIn19XCIsIGNvbnRleHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGVzdHkgPSBwcm9wLnRyaW0oKS5pbmRleE9mKFwiaWYgXCIpID09PSAwO1xuICAgICAgICBmaWx0ZXJzID0gcHJvcC5zcGxpdChcInxcIik7XG4gICAgICAgIGZpbHRlcnMuc2hpZnQoKTsgLy8gaW5zdGVhZCBvZiBzcGxpY2UoMSlcbiAgICAgICAgcHJvcCA9IHByb3AucmVwbGFjZSgvXlxccyppZi8sIFwiXCIpLnNwbGl0KFwifFwiKS5zaGlmdCgpLnRyaW0oKTtcbiAgICAgICAgdG9rZW4gPSB0ZXN0eSA/IFwiaWZcIiA6IHByb3Auc3BsaXQoXCJ8XCIpWzBdO1xuICAgICAgICBjdHggPSBjb250ZXh0W3Byb3BdO1xuXG4gICAgICAgIC8vIElmIGFuIFwiaWZcIiBzdGF0ZW1lbnQgd2l0aG91dCBmaWx0ZXJzLCBhc3N1bWUgXCJ7e2lmIGZvb3xub3RlbXB0eX19XCJcbiAgICAgICAgaWYgKHRlc3R5ICYmICFmaWx0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgZmlsdGVycyA9IFtcIm5vdGVtcHR5XCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG9lcyB0aGUgdGFnIGhhdmUgYSBjb3JyZXNwb25kaW5nIGNsb3NpbmcgdGFnPyBJZiBzbywgZmluZCBpdCBhbmQgbW92ZSB0aGUgY3Vyc29yLlxuICAgICAgICBpZiAoIXNlbGZ5ICYmIHRlbXBsYXRlLmluZGV4T2YoXCJ7ey9cIiArIHRva2VuKSA+IC0xKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9icmlkZ2UodGVtcGxhdGUsIHRva2VuKTtcbiAgICAgICAgICAgIHRhZyA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgIGNoaWxkID0gcmVzdWx0WzFdO1xuICAgICAgICAgICAgaSArPSB0YWcubWF0Y2gocmUpLmxlbmd0aCAtIDE7IC8vIGZhc3QgZm9yd2FyZFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2tpcCBcImVsc2VcIiB0YWdzLiBUaGVzZSBhcmUgcHVsbGVkIG91dCBpbiBfdGVzdCgpLlxuICAgICAgICBpZiAoL15cXHtcXHtcXHMqZWxzZVxccypcXH1cXH0kLy50ZXN0KHRhZykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhIGdsb2JhbCB2YXJpYWJsZS5cbiAgICAgICAgZWxzZSBpZiAoKGdsb2JhbCA9IHRoaXMuZ2xvYmFsc1twcm9wXSkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZXZhbChnbG9iYWwsIGZpbHRlcnMsIGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW4gaW5jbHVkZWQgdGVtcGxhdGUuXG4gICAgICAgIGVsc2UgaWYgKChpbmNsdWRlID0gdGhpcy5pbmNsdWRlc1twcm9wXSkpIHtcbiAgICAgICAgICAgIGlmIChpbmNsdWRlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShNYXJrLnVwKGluY2x1ZGUsIGNvbnRleHQsIG9wdGlvbnMpLCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYSBsb29wIGNvdW50ZXIgKFwiI1wiIG9yIFwiIyNcIikuXG4gICAgICAgIGVsc2UgaWYgKHByb3AuaW5kZXhPZihcIiNcIikgPiAtMSkge1xuICAgICAgICAgICAgb3B0aW9ucy5pdGVyLnNpZ24gPSBwcm9wO1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShvcHRpb25zLml0ZXIsIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyB0aGUgY3VycmVudCBjb250ZXh0LlxuICAgICAgICBlbHNlIGlmIChwcm9wID09PSBcIi5cIikge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fcGlwZShjb250ZXh0LCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYSB2YXJpYWJsZSB3aXRoIGRvdCBub3RhdGlvbiwgZS5nLiBcImEuYi5jXCJcbiAgICAgICAgZWxzZSBpZiAocHJvcC5pbmRleE9mKFwiLlwiKSA+IC0xKSB7XG4gICAgICAgICAgICBwcm9wID0gcHJvcC5zcGxpdChcIi5cIik7XG4gICAgICAgICAgICBjdHggPSBNYXJrLmdsb2JhbHNbcHJvcFswXV07XG5cbiAgICAgICAgICAgIGlmIChjdHgpIHtcbiAgICAgICAgICAgICAgICBqID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgIGN0eCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgYWN0dWFsIGNvbnRleHRcbiAgICAgICAgICAgIHdoaWxlIChjdHggJiYgaiA8IHByb3AubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY3R4ID0gY3R4W3Byb3BbaisrXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2V2YWwoY3R4LCBmaWx0ZXJzLCBjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFuIFwiaWZcIiBzdGF0ZW1lbnQuXG4gICAgICAgIGVsc2UgaWYgKHRlc3R5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKGN0eCwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFuIGFycmF5LCB3aGljaCBtaWdodCBiZSBhIGJsb2NrIGV4cHJlc3Npb24uXG4gICAgICAgIGVsc2UgaWYgKGN0eCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsKGN0eCwgZmlsdGVycywgY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhIGJsb2NrIGV4cHJlc3Npb24uXG4gICAgICAgIGVsc2UgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjdHggPyBNYXJrLnVwKGNoaWxkLCBjdHgpIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbnl0aGluZyBlbHNlLlxuICAgICAgICBlbHNlIGlmIChjb250ZXh0Lmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKGN0eCwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIHNwZWNpYWwgY2FzZTogaWYgdGhlIHJlc3VsdGluZyBjb250ZXh0IGlzIGFjdHVhbGx5IGFuIEFycmF5XG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZXZhbChyZXN1bHQsIGZpbHRlcnMsIGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW4gXCJpZlwiIHN0YXRlbWVudC5cbiAgICAgICAgaWYgKHRlc3R5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl90ZXN0KHJlc3VsdCwgY2hpbGQsIGNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgdGFnLCBlLmcuIFwie3tuYW1lfX1cIiwgd2l0aCB0aGUgcmVzdWx0LCBlLmcuIFwiQWRhbVwiLlxuICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlLnJlcGxhY2UodGFnLCByZXN1bHQgPT09IHVuZGVmaW5lZCA/IFwiPz8/XCIgOiByZXN1bHQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbXBhY3QgPyB0ZW1wbGF0ZS5yZXBsYWNlKC8+XFxzKzwvZywgXCI+PFwiKSA6IHRlbXBsYXRlO1xufTtcblxuLy8gRnJlZWJpZSBwaXBlcy4gU2VlIHVzYWdlIGluIFJFQURNRS5tZFxuTWFyay5waXBlcyA9IHtcbiAgICBlbXB0eTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gIW9iaiB8fCAob2JqICsgXCJcIikudHJpbSgpLmxlbmd0aCA9PT0gMCA/IG9iaiA6IGZhbHNlO1xuICAgIH0sXG4gICAgbm90ZW1wdHk6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiAob2JqICsgXCJcIikudHJpbSgpLmxlbmd0aCA/IG9iaiA6IGZhbHNlO1xuICAgIH0sXG4gICAgYmxhbms6IGZ1bmN0aW9uIChzdHIsIHZhbCkge1xuICAgICAgICByZXR1cm4gISFzdHIgfHwgc3RyID09PSAwID8gc3RyIDogdmFsO1xuICAgIH0sXG4gICAgbW9yZTogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hcmsuX3NpemUoYSkgPiBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgbGVzczogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE1hcmsuX3NpemUoYSkgPCBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgb3Jtb3JlOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gTWFyay5fc2l6ZShhKSA+PSBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgb3JsZXNzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gTWFyay5fc2l6ZShhKSA8PSBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgYmV0d2VlbjogZnVuY3Rpb24gKGEsIGIsIGMpIHtcbiAgICAgICAgYSA9IE1hcmsuX3NpemUoYSk7XG4gICAgICAgIHJldHVybiBhID49IGIgJiYgYSA8PSBjID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgZXF1YWxzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA9PSBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgbm90ZXF1YWxzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gYSAhPSBiID8gYSA6IGZhbHNlO1xuICAgIH0sXG4gICAgbGlrZTogZnVuY3Rpb24gKHN0ciwgcGF0dGVybikge1xuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwYXR0ZXJuLCBcImlcIikudGVzdChzdHIpID8gc3RyIDogZmFsc2U7XG4gICAgfSxcbiAgICBub3RsaWtlOiBmdW5jdGlvbiAoc3RyLCBwYXR0ZXJuKSB7XG4gICAgICAgIHJldHVybiAhTWFyay5waXBlcy5saWtlKHN0ciwgcGF0dGVybikgPyBzdHIgOiBmYWxzZTtcbiAgICB9LFxuICAgIHVwY2FzZTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHN0cikudG9VcHBlckNhc2UoKTtcbiAgICB9LFxuICAgIGRvd25jYXNlOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoc3RyKS50b0xvd2VyQ2FzZSgpO1xuICAgIH0sXG4gICAgY2FwY2FzZTogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyg/Ol58XFxzKVxcUy9nLCBmdW5jdGlvbiAoYSkgeyByZXR1cm4gYS50b1VwcGVyQ2FzZSgpOyB9KTtcbiAgICB9LFxuICAgIGNob3A6IGZ1bmN0aW9uIChzdHIsIG4pIHtcbiAgICAgICAgcmV0dXJuIHN0ci5sZW5ndGggPiBuID8gc3RyLnN1YnN0cigwLCBuKSArIFwiLi4uXCIgOiBzdHI7XG4gICAgfSxcbiAgICB0ZWFzZTogZnVuY3Rpb24gKHN0ciwgbikge1xuICAgICAgICB2YXIgYSA9IHN0ci5zcGxpdCgvXFxzKy8pO1xuICAgICAgICByZXR1cm4gYS5zbGljZSgwLCBuKS5qb2luKFwiIFwiKSArIChhLmxlbmd0aCA+IG4gPyBcIi4uLlwiIDogXCJcIik7XG4gICAgfSxcbiAgICB0cmltOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIudHJpbSgpO1xuICAgIH0sXG4gICAgcGFjazogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnRyaW0oKS5yZXBsYWNlKC9cXHN7Mix9L2csIFwiIFwiKTtcbiAgICB9LFxuICAgIHJvdW5kOiBmdW5jdGlvbiAobnVtKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKCtudW0pO1xuICAgIH0sXG4gICAgY2xlYW46IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoLzxcXC8/W14+XSs+L2dpLCBcIlwiKTtcbiAgICB9LFxuICAgIHNpemU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iai5sZW5ndGg7XG4gICAgfSxcbiAgICBsZW5ndGg6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iai5sZW5ndGg7XG4gICAgfSxcbiAgICByZXZlcnNlOiBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQoYXJyKS5yZXZlcnNlKCk7XG4gICAgfSxcbiAgICBqb2luOiBmdW5jdGlvbiAoYXJyLCBzZXBhcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIGFyci5qb2luKHNlcGFyYXRvcik7XG4gICAgfSxcbiAgICBsaW1pdDogZnVuY3Rpb24gKGFyciwgY291bnQsIGlkeCkge1xuICAgICAgICByZXR1cm4gYXJyLnNsaWNlKCtpZHggfHwgMCwgK2NvdW50ICsgKCtpZHggfHwgMCkpO1xuICAgIH0sXG4gICAgc3BsaXQ6IGZ1bmN0aW9uIChzdHIsIHNlcGFyYXRvcikge1xuICAgICAgICByZXR1cm4gc3RyLnNwbGl0KHNlcGFyYXRvciB8fCBcIixcIik7XG4gICAgfSxcbiAgICBjaG9vc2U6IGZ1bmN0aW9uIChib29sLCBpZmZ5LCBlbHN5KSB7XG4gICAgICAgIHJldHVybiAhIWJvb2wgPyBpZmZ5IDogKGVsc3kgfHwgXCJcIik7XG4gICAgfSxcbiAgICB0b2dnbGU6IGZ1bmN0aW9uIChvYmosIGNzdjEsIGNzdjIsIHN0cikge1xuICAgICAgICByZXR1cm4gY3N2Mi5zcGxpdChcIixcIilbY3N2MS5tYXRjaCgvXFx3Ky9nKS5pbmRleE9mKG9iaiArIFwiXCIpXSB8fCBzdHI7XG4gICAgfSxcbiAgICBzb3J0OiBmdW5jdGlvbiAoYXJyLCBwcm9wKSB7XG4gICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYVtwcm9wXSA+IGJbcHJvcF0gPyAxIDogLTE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBbXS5jb25jYXQoYXJyKS5zb3J0KHByb3AgPyBmbiA6IHVuZGVmaW5lZCk7XG4gICAgfSxcbiAgICBmaXg6IGZ1bmN0aW9uIChudW0sIG4pIHtcbiAgICAgICAgcmV0dXJuICgrbnVtKS50b0ZpeGVkKG4pO1xuICAgIH0sXG4gICAgbW9kOiBmdW5jdGlvbiAobnVtLCBuKSB7XG4gICAgICAgIHJldHVybiAoK251bSkgJSAoK24pO1xuICAgIH0sXG4gICAgZGl2aXNpYmxlOiBmdW5jdGlvbiAobnVtLCBuKSB7XG4gICAgICAgIHJldHVybiBudW0gJiYgKCtudW0gJSBuKSA9PT0gMCA/IG51bSA6IGZhbHNlO1xuICAgIH0sXG4gICAgZXZlbjogZnVuY3Rpb24gKG51bSkge1xuICAgICAgICByZXR1cm4gbnVtICYmICgrbnVtICYgMSkgPT09IDAgPyBudW0gOiBmYWxzZTtcbiAgICB9LFxuICAgIG9kZDogZnVuY3Rpb24gKG51bSkge1xuICAgICAgICByZXR1cm4gbnVtICYmICgrbnVtICYgMSkgPT09IDEgPyBudW0gOiBmYWxzZTtcbiAgICB9LFxuICAgIG51bWJlcjogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChzdHIucmVwbGFjZSgvW15cXC1cXGRcXC5dL2csIFwiXCIpKTtcbiAgICB9LFxuICAgIHVybDogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJKHN0cik7XG4gICAgfSxcbiAgICBib29sOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiAhIW9iajtcbiAgICB9LFxuICAgIGZhbHN5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiAhb2JqO1xuICAgIH0sXG4gICAgZmlyc3Q6IGZ1bmN0aW9uIChpdGVyKSB7XG4gICAgICAgIHJldHVybiBpdGVyLmlkeCA9PT0gMDtcbiAgICB9LFxuICAgIGxhc3Q6IGZ1bmN0aW9uIChpdGVyKSB7XG4gICAgICAgIHJldHVybiBpdGVyLmlkeCA9PT0gaXRlci5zaXplIC0gMTtcbiAgICB9LFxuICAgIGNhbGw6IGZ1bmN0aW9uIChvYmosIGZuKSB7XG4gICAgICAgIHJldHVybiBvYmpbZm5dLmFwcGx5KG9iaiwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpKTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgIE1hcmsuZ2xvYmFsc1trZXldID0gb2JqOyByZXR1cm4gXCJcIjtcbiAgICB9LFxuICAgIGxvZzogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBjb25zb2xlLmxvZyhvYmopO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbn07XG5cbi8vIFNoaW0gZm9yIElFLlxuaWYgKHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnRyaW0gIT09IFwiZnVuY3Rpb25cIikge1xuICAgIFN0cmluZy5wcm90b3R5cGUudHJpbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKTsgXG4gICAgfVxufVxuXG4vLyBFeHBvcnQgZm9yIE5vZGUuanMgYW5kIEFNRC5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBNYXJrO1xufVxuZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBNYXJrO1xuICAgIH0pO1xufVxuIiwidmFyIGd1aWFUViA9IChmdW5jdGlvbigkKSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgLy9jb25zb2xlLmxvZygnVXNhIGpRdWVyeSB2ZXJzaW9uOiAnICsgJC5mbi5qcXVlcnkpO1xyXG5cclxuICAgIHZhciBjYW5hbGVzVXN1YXJpbyA9IFsnbGExJywgJ2xhMicsICdhbnRlbmEzJywgJ2N1YXRybycsICd0ZWxlY2luY28nLCAnbGFzZXh0YSddLFxyXG4gICAgICAgIGNhbmFsZXNHbG9iYWwgPSB7fSxcclxuICAgICAgICBjYXRlZ29yaWFzVXN1YXJpbyA9IFtdLFxyXG4gICAgICAgIGFycmF5Q2FuYWxlcyA9IFtdLFxyXG4gICAgICAgIGFycmF5RGlhcyA9IFtdO1xyXG4gICAgdmFyIGFsdG9CYXJyYUhvcmFzID0gNjAsXHJcbiAgICAgICAgLy9hbmNob0JhcnJhQ2FuYWxlcyA9IDE1MCxcclxuICAgICAgICBhbHRvQ2FuYWwgPSA5MCxcclxuICAgICAgICBwaXhlbHNQb3JIb3JhID0gMzIwLFxyXG4gICAgICAgIC8vIGFuY2hvUG9yRGlhID0gcGl4ZWxzUG9ySG9yYSAqIDI0LFxyXG4gICAgICAgIHBpeGVsc1Bvck1pbnV0byA9IHBpeGVsc1BvckhvcmEgLyA2MDtcclxuXHJcbiAgICAvLyBUT0RPIEFob3JhIG1pc21vIGZvcnphbW9zIGVzdGEgZmVjaGEgZGUgaW5pY2lvXHJcbiAgICB2YXIgZGlhQWN0dWFsID0gbmV3IERhdGUoKSxcclxuICAgICAgICBob3JhQWN0dWFsID0ge1xyXG4gICAgICAgICAgICAnaCc6IGxlZnRQYWQoZGlhQWN0dWFsLmdldEhvdXJzKCksIDIpLFxyXG4gICAgICAgICAgICAnbSc6IGxlZnRQYWQoZGlhQWN0dWFsLmdldE1pbnV0ZXMoKSwgMilcclxuICAgICAgICB9O1xyXG4gICAgLy9kaWFBY3R1YWwuc2V0VGltZShEYXRlLnBhcnNlKFwiTW9uLCBKdWwgMTQgMjAxNCAwMDowMDowMCBHTVQrMDIwMFwiKSk7XHJcbiAgICBkaWFBY3R1YWwuc2V0VGltZShEYXRlLnBhcnNlKFwiTW9uLCBKdWwgMTQgMjAxNFwiKSk7XHJcblxyXG4gICAgdmFyICR2aWV3UG9ydCA9ICQoJy52aWV3UG9ydCcpO1xyXG4gICAgdmFyICRzZWxlY3RvckNhdGVnb3JpYXMgPSAkKCcuc2VsZWN0b3JDYXRlZ29yaWFzJyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yRGlhcyA9ICQoJy5zZWxlY3RvckRpYXMnKTtcclxuICAgIHZhciAkY29udFByb2dyYW1hcyA9ICQoJy5jb250UHJvZ3JhbWFzJyk7XHJcbiAgICAvL3ZhciAkaXRlbVByb2dyYW1hID0gJCgnLml0ZW1Qcm9ncmFtYScpO1xyXG4gICAgdmFyICRjb250Q2FuYWxlcyA9ICQoJy5jb250Q2FuYWxlcycpO1xyXG4gICAgdmFyICRiYXJyYUhvcmFzID0gJCgnLmJhcnJhSG9yYXMnKTtcclxuICAgIHZhciAkaWNvbm9zSG9yYXMgPSAkKCcuaWNvbm9zSG9yYXMnKTtcclxuICAgIHZhciAkaG9yYUFjdHVhbCA9ICQoJy5ob3JhQWN0dWFsJyk7XHJcbiAgICB2YXIgJGZpY2hhUHJvZ3JhbWEgPSAkKCcuZmljaGFQcm9ncmFtYScpO1xyXG4gICAgLy92YXIgJGJhcnJhc0NhbmFsZXMgPSAkKCcuYmFycmFzQ2FuYWxlcycpO1xyXG4gICAgdmFyICRiYXJyYUxldHJhcyA9ICQoJy5iYXJyYUxldHJhcycpO1xyXG4gICAgdmFyICRvcmRlbkNhbmFsZXMgPSAkKCcub3JkZW5DYW5hbGVzJyk7XHJcbiAgICB2YXIgJGJvdG9uZXNDYW5hbGVzID0gJCgnLmJvdG9uZXNDYW5hbGVzJyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY2NlZGUgYSBsYXMgY29va2llcyBkZWwgdXN1YXJpbyBwYXJhIHZlciBwZXJzb25hbGl6YWNpw7NuIGRlIGNhbmFsZXNcclxuICAgICAqIEByZXR1cm4ge2FycmF5fSBMaXN0YSBkZSBjYW5hbGVzIHBlcnNvbmFsaXphZG9zIHBvciBlbCB1c3VhcmlvXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNhcmdhQ29va2llcygpIHtcclxuICAgICAgICAvLyBUT0RPIENhcmdhciBjYW5hbGVzIGRlc2RlIHVuYSBjb29raWUsIHkgZ2VuZXJhciDDqXN0YSBjdWFuZG8gc2UgYWNjZWRlIHBvciBwcmltZXJhIHZlelxyXG4gICAgICAgIC8vIFRPRE8gQ2FyZ2FyIGRlIGxhcyBjb29raWVzIGxvcyBjYW5hbGVzIHJlc2FsdGFkb3MgZGVsIHNlbGVjdG9yQ2F0ZWdvcmlhc1xyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgbGVjdHVyYSBkZSBjb29raWVzXHJcbiAgICAgICAgdmFyIGRlZiA9ICQuRGVmZXJyZWQoKSxcclxuICAgICAgICAgICAgY2FuYWxlcztcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjYW5hbGVzID0gWyd0ZWxlY2luY28nLCAnYW50ZW5hMycsICdsYTInLCAnbGExJywgJ2N1YXRybycsICdsYXNleHRhJywgJ2hpc3RvcmlhJ107XHJcbiAgICAgICAgICAgIGNhdGVnb3JpYXNVc3VhcmlvID0gWzEsIDIsIDMsIDQsIDUsIDYsIDddO1xyXG4gICAgICAgICAgICBkZWYucmVzb2x2ZShjYW5hbGVzKTtcclxuICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICByZXR1cm4gZGVmLnByb21pc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNpYmUgbGEgbGlzdGEgZGUgY2FuYWxlcyBhIGNhcmdhciB5IGhhY2UgbGFzIGxsYW1hZGFzIGFzw61uY3JvbmFzXHJcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBjYW5hbGVzIExpc3RhZG8gZGUgY2FuYWxlcyBhIGNhcmdhclxyXG4gICAgICogQHJldHVybiB7anNvbn0gRGF0b3MganNvbiBkZSBsYSBwcm9ncmFtYWNpw7NuIGFsIGNvbXBsZXRvIHBhcmEgbG9zIGNhbmFsZXMgc2VsZWNjaW9uYWRvc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYXJnYURhdG9zQ2FuYWxlcyhjYW5hbGVzKSB7XHJcbiAgICAgICAgLy8gQ2FyZ2FzIGFzw61uY3JvbmFzIGRlIHZhcmlvcyBjYW5hbGVzXHJcbiAgICAgICAgLy8gcG9yIGNhZGEgY2FuYWwsIGNhcmdhIHVuIGpzb25cclxuICAgICAgICB2YXIganNvbiA9IFtdLFxyXG4gICAgICAgICAgICBwcm9taXNlcyA9IFtdLFxyXG4gICAgICAgICAgICBudW1FbGVtZW50b3MgPSBjYW5hbGVzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgJC53aGVuLmFwcGx5KG51bGwsICQubWFwKGNhbmFsZXMsIGZ1bmN0aW9uKGNhbmFsLCBpKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWNoZXJvID0gJ2RhdG9zLycgKyBjYW5hbCArICcuanNvbic7XHJcblxyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKCQuZ2V0KGZpY2hlcm8pLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlDYW5hbGVzW2ldID0ganNvbltpXSA9IGRhdGE7XHJcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheUNhbmFsZXNbaV0gPSBqc29uW2ldID0gJyc7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIC8vIFJlc29sdmVyIGRlZmVycmVyIGN1YW5kbyBzZSBoYXlhbiBjYXJnYWRvIHRvZG9zIGxvcyBqc29uXHJcbiAgICAgICAgcmV0dXJuICQud2hlbi5hcHBseShudWxsLCBwcm9taXNlcykucHJvbWlzZSgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNpYmUgbGEgbGlzdGEgZGUgcHJvZ3JhbWFzIGEgcGludGFyIHBvciBjYW5hbCB5IGxhbnphIGVsIHBpbnRhZG8gZGVsIGNhbmFsXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFQYXJyaWxsYShsaXN0YUNhbmFsZXMsIGFycmF5Q29tcGxldG8pIHtcclxuICAgICAgICB2YXIgbGlzdGEgPSBsaXN0YUNhbmFsZXMgfHwgY2FuYWxlc1VzdWFyaW87XHJcbiAgICAgICAgdmFyIGNvbXBsZXRvID0gYXJyYXlDb21wbGV0byB8fCBhcnJheUNhbmFsZXM7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxkaXYgaWQ9XCJ7e2lkY2FuYWx9fVwiIGNsYXNzPVwibGluZWFDYW5hbCBjbGVhcmZpeFwiPjwvZGl2Pic7XHJcblxyXG4gICAgICAgICQuZWFjaChsaXN0YSwgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBjb250ZXh0LmlkY2FuYWwgPSB2O1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmFwcGVuZChyZXN1bHRhZG8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQaW50YW1vcyBwcm9ncmFtYXMgZW4gc3VzIGNhbmFsZXNcclxuICAgICAgICAkLmVhY2goY29tcGxldG8sIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgdmFyIGNhbmFsID0gdi5jYW5hbC5ub21icmU7XHJcbiAgICAgICAgICAgIHZhciBkaXZDYW5hbCA9ICQoJyMnICsgY2FuYWwpO1xyXG5cclxuICAgICAgICAgICAgJC5lYWNoKHYucHJvZ3JhbWFzLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gcGludGFQYXJyaWxsYVByb2dyYW1hKGksIHYpO1xyXG4gICAgICAgICAgICAgICAgZGl2Q2FuYWwuYXBwZW5kKGRpdik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY29ycmUgZWwganNvbiBkZSBwcm9ncmFtYXMgZGUgZGUgdW4gY2FuYWwgeSBsb3MgcGludGEgZW4gJ2NvbnRQcm9ncmFtYXMnXHJcbiAgICAgKiBAcGFyYW0gIHtpbnR9IHFDYW5hbCBJZGVudGlmaWNhZG9yIGRlIHF1w6kgY2FuYWwgcGludGFtb3NcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFQYXJyaWxsYVByb2dyYW1hKGksIHYpIHtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGVQcm9ncmFtYSA9ICcnICtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpdGVtUHJvZ3JhbWFcIiBpZD1cInt7aWRfcHJvZ3JhbWF9fVwiIGRhdGEtdXJsPVwie3t1cmxfZmljaGF9fVwiJyArXHJcbiAgICAgICAgICAgICdzdHlsZT1cIndpZHRoOnt7ZHVyfX07IGxlZnQ6e3tkaWZmSG9yYURpYX19OyB1c2VyLXNlbGVjdGVkOm5vbmU7XCI+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaXRlbVByb2dyYW1hSW5uZXIge3tjbGFzZX19XCI+JyArXHJcbiAgICAgICAgICAgICc8YSBocmVmPVwiaHR0cDovL2VsbXVuZG8uZXMvdGVsZXZpc2lvbi9wcm9ncmFtYS97e2lkX3Byb2dyYW1hfX1cIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj57e25vbWJyZX19PC9hPicgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjYXRlZ29yaWFcIj57e2NhdGVnb3JpYX19PC9zcGFuPicgK1xyXG4gICAgICAgICAgICAnPGg0Pnt7bm9tYnJlfX08L2g0PicgK1xyXG4gICAgICAgICAgICAne3tpZiBlcGlzb2Rpb319PHA+e3tlcGlzb2Rpb319PC9wPnt7L2lmfX0nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiZHVyYWNpb25cIj57e2R1cmFjaW9ufX08L3NwYW4+JyArXHJcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImZlY2hhXCI+e3tpbmZvSG9yYUR1cmFjaW9ufX08L3NwYW4+JyArXHJcbiAgICAgICAgICAgICd7e2lmIGZhdn19PHNwYW4gY2xhc3M9XCJmYXZvcml0b1wiPjxpIGNsYXNzPVwiZmEgZmEtc3RhclwiPjwvaT48L3NwYW4+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAne3tpZiBhbGV9fTxzcGFuIGNsYXNzPVwiYWxlcnRhXCI+PGkgY2xhc3M9XCJmYSBmYS1jbG9jay1vXCI+PC9pPjwvc3Bhbj57ey9pZn19JyArXHJcbiAgICAgICAgICAgICc8L2Rpdj48L2Rpdj5cIic7XHJcblxyXG4gICAgICAgIC8vIFNlbGVjY2nDs24gZGUgY2F0ZWdvcsOtYVxyXG4gICAgICAgIC8vIG1DaW5lIFwiMTA0XCIgLyBtQ29uY3Vyc29zIFwiSU5UXzJcIiAvIG1Db3Jhem9uIC8gbURlcG9ydGVzIFwiOTBcIiAvXHJcbiAgICAgICAgLy8gbUluZm9ybWF0aXZvcyBcIjIwXCIgLyBtTWFnYXppbmVzIFwiMzFcIiAvIG1TZXJpZXMgXCIxXCJcclxuICAgICAgICB2YXIgY2F0ID0gdi5jYXRlZ29yaWEsXHJcbiAgICAgICAgICAgIGNhdGVnb3JpYSxcclxuICAgICAgICAgICAgY2xhc2U7XHJcbiAgICAgICAgc3dpdGNoIChjYXQpIHtcclxuICAgICAgICAgICAgY2FzZSBcIjFcIjpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gXCJjYXRTZXJpZXNcIjtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9IFwic2VyaWVzXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjEwNFwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdENpbmVcIjtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9IFwiY2luZVwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIzMVwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdE1hZ2F6aW5lc1wiO1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhID0gXCJtYWdhemluZXNcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiMjBcIjpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gXCJjYXRJbmZvcm1hdGl2b3NcIjtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9IFwiaW5mb3JtYXRpdm9zXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjkwXCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0RGVwb3J0ZXNcIjtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9IFwiZGVwb3J0ZXNcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiSU5UXzJcIjpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gXCJjYXRDb25jdXJzb3NcIjtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9IFwiY29uY3Vyc29zXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIklOVF8xXCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0Q29yYXpvblwiO1xyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcmlhID0gXCJjb3JhesOzblwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBFbCBhbmNobyB2YSBhIGRlcGVuZGVyIGRlIGxhIGR1cmFjacOzbiBkZWwgcHJvZ3JhbWFcclxuICAgICAgICB2YXIgZHVyYWNpb24gPSB2LmR1cmFjaW9uICsgJyBtaW5zLic7XHJcbiAgICAgICAgdmFyIGR1ciA9IE1hdGguY2VpbChwaXhlbHNQb3JNaW51dG8gKiB2LmR1cmFjaW9uKSxcclxuICAgICAgICAgICAgaG9yYV9pbmljaW8gPSBuZXcgRGF0ZSh2LmhvcmFfaW5pY2lvKSxcclxuICAgICAgICAgICAgaG9yYV9maW5hbCA9IG5ldyBEYXRlKHYuaG9yYV9maW4pO1xyXG4gICAgICAgIHZhciBkaWZmSG9yYURpYSA9IGhvcmFfaW5pY2lvIC0gZGlhQWN0dWFsO1xyXG4gICAgICAgIGRpZmZIb3JhRGlhID0gTWF0aC5mbG9vcigoTWF0aC5mbG9vcihkaWZmSG9yYURpYSAvIDEwMDApIC8gNjApICogcGl4ZWxzUG9yTWludXRvKTtcclxuXHJcbiAgICAgICAgdmFyIGhvcmFfaSA9IGhvcmFfaW5pY2lvLmdldEhvdXJzKCk7XHJcbiAgICAgICAgaG9yYV9pID0gbGVmdFBhZChob3JhX2ksIDIpO1xyXG4gICAgICAgIHZhciBtaW5zX2kgPSBob3JhX2luaWNpby5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgbWluc19pID0gbGVmdFBhZChtaW5zX2ksIDIpO1xyXG5cclxuICAgICAgICB2YXIgaG9yYV9mID0gaG9yYV9maW5hbC5nZXRIb3VycygpO1xyXG4gICAgICAgIGhvcmFfZiA9IGxlZnRQYWQoaG9yYV9mLCAyKTtcclxuICAgICAgICB2YXIgbWluc19mID0gaG9yYV9maW5hbC5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgbWluc19mID0gbGVmdFBhZChtaW5zX2YsIDIpO1xyXG5cclxuICAgICAgICB2YXIgaW5mb0hvcmFEdXJhY2lvbiA9ICcnICsgaG9yYV9pICsgJzonICsgbWluc19pICsgJyAtICcgKyBob3JhX2YgKyAnOicgKyBtaW5zX2Y7XHJcblxyXG4gICAgICAgIC8vIFRPRE8gUmFuZG9tIHBhcmEgcG9kZXIgdmVyIHByb2dyYW1hcyBmYXZvcml0b3MgeSBhbGVydGFzIGRlIHByb2dyYW1hcy4gRUxJTUlOQVJcclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSAqIDEwMCA8IDUpIHtcclxuICAgICAgICAgICAgdmFyIGZhdiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpICogMTAwIDwgNSkge1xyXG4gICAgICAgICAgICB2YXIgYWxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRPRE8gU2kgZWwgZWxlbWVudG8gZXMgcGVxdWXDsW8sIGFwYXJlY2UgdW5hIGNydXpcclxuXHJcbiAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgY2xhc2U6IGNsYXNlLFxyXG4gICAgICAgICAgICBkdXI6IGR1ciArICdweCcsXHJcbiAgICAgICAgICAgIGRpZmZIb3JhRGlhOiBkaWZmSG9yYURpYSArICdweCcsXHJcbiAgICAgICAgICAgIGlkX3Byb2dyYW1hOiB2LmlkX3Byb2dyYW1hLFxyXG4gICAgICAgICAgICB1cmxfZmljaGE6IHYudXJsX2ZpY2hhLFxyXG4gICAgICAgICAgICBpbmZvSG9yYUR1cmFjaW9uOiBpbmZvSG9yYUR1cmFjaW9uLFxyXG4gICAgICAgICAgICBkdXJhY2lvbjogZHVyYWNpb24sXHJcbiAgICAgICAgICAgIGNhdGVnb3JpYTogY2F0ZWdvcmlhLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgIG5vbWJyZTogdi5ub21icmUsXHJcbiAgICAgICAgICAgIGVwaXNvZGlvOiB2LmVwaXNvZGlvLFxyXG4gICAgICAgICAgICBmYXY6IGZhdiB8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgYWxlOiBhbGUgfCB1bmRlZmluZWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZVByb2dyYW1hLCBjb250ZXh0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0YWRvO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBpbnRhIGxvcyBpY29ub3MgZGUgY2FuYWxlcyBlbiBlbCBjb21wb25lbnRlICdjb250Q2FuYWxlcydcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFDYW5hbGVzKGxpc3RhQ2FuYWxlcykge1xyXG5cclxuICAgICAgICB2YXIgbGlzdGEgPSBsaXN0YUNhbmFsZXMgfHwgY2FuYWxlc1VzdWFyaW87XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIml0ZW1DYW5hbFwiPjxpbWcgc3JjPVwiaHR0cDovL2VzdGF0aWNvcy5lbG11bmRvLmVze3tpY29ub319XCIgLz48L2Rpdj4nO1xyXG5cclxuICAgICAgICAkLmVhY2gobGlzdGEsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgY29udGV4dC5pY29ubyA9IGFycmF5Q2FuYWxlc1tpXS5jYW5hbC5pY29ubztcclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkY29udENhbmFsZXMuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgdW5hIGJhcnJhIGhvcml6b25hbCBjb24gbGEgbWFyY2EgZGUgaG9yYXMsIHF1ZSBzZSBkZXNwbGF6YSBjb24gZWwgdmlld1BvcnRcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFIb3Jhc1BhcnJpbGxhKCkge1xyXG4gICAgICAgIHZhciBkaWEgPSBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBpLCBqO1xyXG5cclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIGNvbnRleHQuZGlhcyA9IFtdO1xyXG4gICAgICAgIGNvbnRleHQuaG9yYXMgPSBbXTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnJyArXHJcbiAgICAgICAgICAgICd7e2RpYXN9fTxkaXYgY2xhc3M9XCJpdGVtRGlhXCIgc3R5bGU9XCJsZWZ0Ont7cG9zfX1weFwiPnt7ZGlhfX08L2Rpdj57ey9kaWFzfX0nICtcclxuICAgICAgICAgICAgJ3t7aG9yYXN9fTxkaXYgY2xhc3M9XCJpdGVtSG9yYXNcIiBzdHlsZT1cImxlZnQ6e3twb3N9fXB4O1wiPnt7dGV4dG99fTwvZGl2Pnt7L2hvcmFzfX0nO1xyXG5cclxuICAgICAgICAvLyBHZW5lcmFtb3MgdW5hIGJhcnJhIHBhcmEgbG9zIGTDrWFzICg0KSBkZSBsb3MgcXVlIGRpc3BvbmVtb3MgZGUgZGF0b3NcclxuICAgICAgICBmb3IgKGogPSAwOyBqIDw9IDM7IGorKykge1xyXG5cclxuICAgICAgICAgICAgZGlhLnNldFRpbWUoZGlhQWN0dWFsLmdldFRpbWUoKSArIChqICogODY0MDAwMDApKTtcclxuICAgICAgICAgICAgdmFyIGRpYVRleHQgPSBkaWEudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycsIHtcclxuICAgICAgICAgICAgICAgIHdlZWtkYXk6ICdsb25nJyxcclxuICAgICAgICAgICAgICAgIC8veWVhcjogJ251bWVyaWMnLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6ICdsb25nJyxcclxuICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxEaWEgPSAoaiAqIHBpeGVsc1BvckhvcmEgKiAyNCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZGlhcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICdkaWEnOiBkaWFUZXh0LFxyXG4gICAgICAgICAgICAgICAgJ3Bvcyc6IGxEaWFcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFycmF5RGlhcy5wdXNoKFtkaWFUZXh0LCBsRGlhXSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMjQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBsZWZ0UGFkKGksIDIpICsgXCI6MDBcIjtcclxuICAgICAgICAgICAgICAgIHZhciBsID0gKGogKiBwaXhlbHNQb3JIb3JhICogMjQpICsgaSAqIHBpeGVsc1BvckhvcmE7XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5ob3Jhcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAndGV4dG8nOiB0LFxyXG4gICAgICAgICAgICAgICAgICAgICdwb3MnOiBsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICRiYXJyYUhvcmFzLmFwcGVuZChyZXN1bHRhZG8pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1biBzZWxlY3RvciBkZSBhY2Nlc28gZGlyZWN0byBhIGxvcyBkw61hcyBpbmNsdcOtZG9zIGVuIGxhIHByb2dyYW1hY2nDs25cclxuICAgICAqIERlcGVuZGVtb3MgZGUgYXJyYXlEaWFzIHF1ZSBoYSBnZW5lcmFkbyBkYXRvcyBlbiBwaW50YUhvcmFzUGFycmlsbGFcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFTZWxlY3RvckRpYXMoKSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaSBjbGFzcz1cIml0ZW1EaWFcIiBkYXRhLXB4PVwie3tweH19XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Ly9cIj57e2RpYVRleHR9fTwvYT48L2xpPic7XHJcblxyXG4gICAgICAgIGFycmF5RGlhcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlhVGV4dCA9IGl0ZW1bMF07XHJcbiAgICAgICAgICAgIHZhciBweCA9IGl0ZW1bMV07XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgZGlhVGV4dDogZGlhVGV4dCxcclxuICAgICAgICAgICAgICAgIHB4OiBweFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkc2VsZWN0b3JEaWFzLmZpbmQoJ3VsJykuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgdW5hIGZyYW5qYSBxdWUgbWFyY2EgbGEgaG9yYSBhY3R1YWwgZW4gZWwgY29tcG9uZW50ZSBQYXJyaWxsYVxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUhvcmFBY3R1YWwoKSB7XHJcblxyXG4gICAgICAgIHZhciBob3JhcyA9IGhvcmFBY3R1YWwuaCxcclxuICAgICAgICAgICAgbWludXRvcyA9IGhvcmFBY3R1YWwubTtcclxuXHJcbiAgICAgICAgdmFyIGRpdkhvcmEgPSAkKCcuaG9yYUFjdHVhbCcpXHJcbiAgICAgICAgICAgIC5oaWRlKClcclxuICAgICAgICAgICAgLmZpbmQoJ3AnKS50ZXh0KGhvcmFzICsgXCI6XCIgKyBtaW51dG9zKS5lbmQoKVxyXG4gICAgICAgICAgICAuc2hvdygpO1xyXG5cclxuICAgICAgICB2YXIgcG9zWCA9IHBhcnNlSW50KGhvcmFzKSAqIHBpeGVsc1BvckhvcmEgKyBwYXJzZUludChtaW51dG9zKSAqIHBpeGVsc1Bvck1pbnV0bztcclxuICAgICAgICBkaXZIb3JhLmNzcyh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogcG9zWFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpdMO6YSBsYSBQYXJyaWxsYSBlbiBlbCBtb21lbnRvIGFjdHVhbCwgZmVjaGEgeSBob3JhXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNpdHVhUGFycmlsbGFBaG9yYSgpIHtcclxuICAgICAgICB2YXIgbWl0YWRBbmNob1ZpZXdwb3J0ID0gJHZpZXdQb3J0LndpZHRoKCkgKiAuNTtcclxuICAgICAgICB2YXIgbXVldmVBID0gcGFyc2VJbnQoJGhvcmFBY3R1YWwuY3NzKCdsZWZ0JykpO1xyXG4gICAgICAgIG11ZXZlQSA9IHBhcnNlSW50KG1pdGFkQW5jaG9WaWV3cG9ydCAtIG11ZXZlQSk7XHJcblxyXG4gICAgICAgICRjb250UHJvZ3JhbWFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgJ2xlZnQnOiBtdWV2ZUEgKyAncHgnXHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAkYmFycmFIb3Jhcy5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogbXVldmVBICsgJ3B4J1xyXG4gICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgdmFyIGhvcmFMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5oKSAqIHBpeGVsc1BvckhvcmE7XHJcbiAgICAgICAgdmFyIG1pbnV0b3NMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5tKSAqIHBpeGVsc1Bvck1pbnV0bztcclxuICAgICAgICB2YXIgcG9zWCA9IGhvcmFMZWZ0ICsgbWludXRvc0xlZnQgKyBtdWV2ZUE7XHJcbiAgICAgICAgJGhvcmFBY3R1YWwuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAnbGVmdCc6IHBvc1ggKyAncHgnXHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRlbmRyw61hbW9zIGRhdG9zIGRlIGZhdm9yaXRvcyB5IGFsZXJ0YXMgZGUgdXN1YXJpbyB2YWxpZGFkbyAoc2kgaHViaWVyYSlcclxuICAgICAqIEByZXR1cm4ge2pzb259IE9iamV0byBqc29uIGNvbiB0b2RvcyBsb3MgcHJvZ3JhbWFzIGZhdm9yaXRvcyB5IGFsZXJ0YXMgZGVsIHVzdWFyaW9cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY2FyZ2FJbmZvVXN1YXJpbygpIHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVjb3JhIGxvcyBwcm9ncmFtYXMgZW4gUGFycmlsbGEgY29uIGxhcyBhbGVydGFzIHkgZmF2b3JpdG9zIHJlY29ycmllbmRvIGVsIGpzb24gZGUgdXN1YXJpb1xyXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhUHJvZ3NVc3VhcmlvKCkge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBc29jaWEgdG9kb3MgbG9zIGV2ZW50IGxpc3RlbmVycyBhIGxvcyBkaWZlcmVudGVzIGVsZW1lbnRvcyBkZSB1aVxyXG4gICAgICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGxhbnphSGFuZGxlcnMoKSB7XHJcblxyXG4gICAgICAgIHZhciBhbHRvVmlld3BvcnQgPSAkdmlld1BvcnQuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgIGFuY2hvVmlld3BvcnQgPSAkdmlld1BvcnQud2lkdGgoKSxcclxuICAgICAgICAgICAgYWx0b0NvbnRQcm9ncmFtYXMgPSAkY29udFByb2dyYW1hcy5oZWlnaHQoKSxcclxuICAgICAgICAgICAgYW5jaG9Db250UHJvZ3JhbWFzID0gJGNvbnRQcm9ncmFtYXMub2Zmc2V0V2lkdGgsXHJcbiAgICAgICAgICAgIGFuY2hvQmFycmFDYW5hbGVzID0gJGNvbnRDYW5hbGVzLndpZHRoKCk7XHJcbiAgICAgICAgdmFyIGlzRHJhZyA9IGZhbHNlLFxyXG4gICAgICAgICAgICBzZUhhTW92aWRvID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciBwcmltZXJvc0RpdiA9ICQoJy5jb250UHJvZ3JhbWFzID4gZGl2ID4gZGl2OmZpcnN0LWNoaWxkJyksXHJcbiAgICAgICAgICAgIG9mZnNldHNJemRhID0gW107XHJcbiAgICAgICAgJC5lYWNoKHByaW1lcm9zRGl2LCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIG9mZnNldHNJemRhLnB1c2godGhpcy5vZmZzZXRMZWZ0KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbWluSXpkYSA9IG9mZnNldHNJemRhLm1pbigpO1xyXG5cclxuICAgICAgICB2YXIgdWx0aW1vc0RpdiA9ICQoJy5jb250UHJvZ3JhbWFzID4gZGl2ID4gZGl2Omxhc3QtY2hpbGQnKSxcclxuICAgICAgICAgICAgb2Zmc2V0c0RyY2ggPSBbXTtcclxuICAgICAgICAkLmVhY2godWx0aW1vc0RpdiwgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBvZmZzZXRzRHJjaC5wdXNoKHRoaXMub2Zmc2V0TGVmdCArICQodGhpcykud2lkdGgoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG1heERyY2ggPSBvZmZzZXRzRHJjaC5tYXgoKTtcclxuXHJcbiAgICAgICAgLy8gTm9zIGNhcmdhbW9zIGVsIHByZWxvYWRlclxyXG4gICAgICAgICR2aWV3UG9ydC5maW5kKCcucHJlbG9hZC13cmFwcGVyJykucmVtb3ZlKCk7XHJcblxyXG5cclxuICAgICAgICAvLyBHZW5lcmFtb3MgdW4gaGFuZGxlciBwYXJhIG1vdXNlZG93bi90b3VjaHN0YXJ0XHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMub24oJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgZHJhZ09uKTtcclxuICAgICAgICAvLyBHZW5lcmFtb3MgdW4gaGFuZGxlciBwYXJhIG1vdXNldXAvdG91Y2hlbmRcclxuICAgICAgICAvLyAkY29udFByb2dyYW1hcy5vbignbW91c2V1cCB0b3VjaGVuZCcsIGRyYWdPZmYpO1xyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2Vtb3ZlL3RvdWNobW92ZVxyXG4gICAgICAgIC8vICRjb250UHJvZ3JhbWFzLm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJywgZHJhZ01vdmUpO1xyXG5cclxuICAgICAgICAvLyBTYWNhIHBhbmVsIGNvbiBpbmZvcm1hY2nDs24gYWpheCBkZSBwcm9ncmFtYVxyXG4gICAgICAgICRjb250UHJvZ3JhbWFzLm9uKCdjbGljaycsIGNsaWNrUHJvZ3JhbWEpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgbGEgc2VsZWNjacOzbiBkZSB1bmEgaG9yYVxyXG4gICAgICAgICRiYXJyYUhvcmFzLm9uKCdjbGljaycsICcuaXRlbUhvcmFzJywgY2xpY2tIb3JhKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIGZpbHRyYWRvIHBvciBjYXRlZ29yw61hc1xyXG4gICAgICAgICRzZWxlY3RvckNhdGVnb3JpYXMub24oJ2NsaWNrJywgJ2xpJywgbWFyY2FDYXRlZ29yaWEpO1xyXG4gICAgICAgIG1hcmNhckNhdGVnb3JpYXNTZWxlY2Npb25hZGFzKCk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZXIgcGFyYSBzZWxlY2Npw7NuIGRlIGTDrWFcclxuICAgICAgICAkc2VsZWN0b3JEaWFzLm9uKCdjbGljaycsICdsaScsIGNsaWNrRGlhKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIGJvdG9uZXMgYXJyaWJhL2FiYWpvIGRlIGNhbmFsZXNcclxuICAgICAgICAkYm90b25lc0NhbmFsZXMub24oJ2NsaWNrJywgJy5idG4nLCBjbGlja05hdkNhbmFsZXMpO1xyXG4gICAgICAgIC8vIEhhbmRsZXIgcGFyYSBib3RvbmVzIGl6ZGEvZHJjaGEgZGVsIHZpZXdwb3J0XHJcbiAgICAgICAgJGljb25vc0hvcmFzLm9uKCdjbGljaycsICcuYnRuJywgY2xpY2tOYXZIb3Jhcyk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRyYWdPbihldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0VG9wID0gdGhpcy5vZmZzZXRUb3A7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRMZWZ0ID0gdGhpcy5vZmZzZXRMZWZ0O1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxNb3VzZVggPSBldmVudC5jbGllbnRYO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxNb3VzZVkgPSBldmVudC5jbGllbnRZO1xyXG4gICAgICAgICAgICBpc0RyYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICBzZUhhTW92aWRvID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBHZW5lcmFtb3MgdW4gaGFuZGxlciBwYXJhIG1vdXNldXAvdG91Y2hlbmRcclxuICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMub24oJ21vdXNldXAgdG91Y2hlbmQnLCBkcmFnT2ZmKTtcclxuICAgICAgICAgICAgLy8gR2VuZXJhbW9zIHVuIGhhbmRsZXIgcGFyYSBtb3VzZW1vdmUvdG91Y2htb3ZlXHJcbiAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJywgZHJhZ01vdmUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRyYWdPZmYoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGlzRHJhZykge1xyXG4gICAgICAgICAgICAgICAgaXNEcmFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkY29udFByb2dyYW1hcy5vZmYoJ21vdXNldXAgdG91Y2hlbmQnLCBkcmFnT2ZmKTtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLm9mZignbW91c2Vtb3ZlIHRvdWNobW92ZScsIGRyYWdNb3ZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRyYWdNb3ZlKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0RyYWcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZFggPSBldmVudC5jbGllbnRYIC0gdGhpcy5pbml0aWFsTW91c2VYO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRZID0gZXZlbnQuY2xpZW50WSAtIHRoaXMuaW5pdGlhbE1vdXNlWTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBNYXJjYW1vcyBjb24gdW4gZmxhZyBzaSBoYSBoYWJpZG8gZGlmZXJlbmNpYSBkZSBtw6FzIGRlIDMgcMOteGVsZXNcclxuICAgICAgICAgICAgICAgIHNlSGFNb3ZpZG8gPSBNYXRoLmFicyhkWCkgPiAyIHx8IE1hdGguYWJzKGRZKSA+IDI7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG50b3AgPSB0aGlzLnN0YXJ0VG9wICsgZFk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmxlZnQgPSB0aGlzLnN0YXJ0TGVmdCArIGRYO1xyXG4gICAgICAgICAgICAgICAgLy8gTMOtbWl0ZSB0b3AgKGFsdG8gJGJhcnJhSG9yYXMpXHJcbiAgICAgICAgICAgICAgICBpZiAobnRvcCA+IGFsdG9CYXJyYUhvcmFzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnRvcCA9IGFsdG9CYXJyYUhvcmFzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTMOtbWl0ZSBib3R0b20gKGFsdG9WaWV3cG9ydCAtIGFsdG9Qcm9ncmFtYXMpXHJcbiAgICAgICAgICAgICAgICBpZiAobnRvcCA8IChhbHRvVmlld3BvcnQgLSBhbHRvQ29udFByb2dyYW1hcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBudG9wID0gKGFsdG9WaWV3cG9ydCAtIGFsdG9Db250UHJvZ3JhbWFzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEzDrW1pdGUgcmlnaHQgKDcwcHggYW5jaG8gJGNvbnRDYW5hbGVzKVxyXG4gICAgICAgICAgICAgICAgaWYgKG5sZWZ0ID4gYW5jaG9CYXJyYUNhbmFsZXMgKyBNYXRoLmFicyhtaW5JemRhKSArIDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmxlZnQgPSBhbmNob0JhcnJhQ2FuYWxlcyArIE1hdGguYWJzKG1pbkl6ZGEpICsgNTA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIGxlZnQgKGFuY2hvVmlld3BvcnQgbWVub3MgZWwgYW5jaG8gdG90YWwgZGUgcHJvZ3JhbWFzKVxyXG4gICAgICAgICAgICAgICAgaWYgKG5sZWZ0IDwgYW5jaG9WaWV3cG9ydCAtIDUwIC0gTWF0aC5hYnMobWF4RHJjaCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBubGVmdCA9IGFuY2hvVmlld3BvcnQgLSA1MCAtIE1hdGguYWJzKG1heERyY2gpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAndG9wJzogbnRvcCArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBubGVmdCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRDYW5hbGVzLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IG50b3AgKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRiYXJyYUhvcmFzLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnOiBubGVmdCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhvcmFMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5oKSAqIHBpeGVsc1BvckhvcmEsXHJcbiAgICAgICAgICAgICAgICAgICAgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1ggPSBob3JhTGVmdCArIG1pbnV0b3NMZWZ0ICsgbmxlZnQ7XHJcbiAgICAgICAgICAgICAgICAkaG9yYUFjdHVhbC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBkZWwgY2xpY2sgZW4gdW4gaXRlbUhvcmFzXHJcbiAgICAgICAgICogQHBhcmFtICB7ZXZlbnR9IGV2ZW50IE9iamV0byBldmVudG8gY29uIHRvZGEgbGEgaW5mbyBkZWwgY2xpY2tcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tIb3JhKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkKHRoaXMpLmNzcygnbGVmdCcpKTtcclxuICAgICAgICAgICAgbXVldmVBID0gcGFyc2VJbnQoKGFuY2hvVmlld3BvcnQgKiAuNSkgLSBtdWV2ZUEpO1xyXG4gICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhtdWV2ZUEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhbmRsZXIgZGVsIGNsaWNrIGVuIHVuIGTDrWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgT2JqZXRvIGV2ZW50IGNvbiB0b2RhIGxhIGluZm8gZGVsIGNsaWNrXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrRGlhKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkKHRoaXMpLmRhdGEoJ3B4JykpICogLTE7XHJcbiAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKG11ZXZlQSArIGFuY2hvQmFycmFDYW5hbGVzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYW5kbGVyIGRlbCBjbGljayBlbiB1biBpdGVtUHJvZ3JhbWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgT2JqZXRvIGV2ZW50byBjb24gdG9kYSBsYSBpbmZvIGRlbCBjbGlja1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja1Byb2dyYW1hKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmICghc2VIYU1vdmlkbykge1xyXG4gICAgICAgICAgICAgICAgaXNEcmFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSksXHJcbiAgICAgICAgICAgICAgICAgICAgJGVsZW1QYWRyZSA9ICQoZWxlbSkuaXMoJy5pdGVtUHJvZ3JhbWEnKSA/ICQoZWxlbSkgOiAkKGVsZW0pLmNsb3Nlc3QoJy5pdGVtUHJvZ3JhbWEnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvZ1VybCA9ICRlbGVtUGFkcmUuZmluZCgnYScpLmF0dHIoJ2hyZWYnKSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9nSWQgPSAkZWxlbVBhZHJlLmF0dHIoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgICBjYXJnYUZpY2hhUHJvZ3JhbWEocHJvZ0lkLCBwcm9nVXJsKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbXVldmVBID0gcGFyc2VJbnQoJGVsZW1QYWRyZS5jc3MoJ2xlZnQnKSkgKyAkZWxlbVBhZHJlLndpZHRoKCkgKiAuNTtcclxuICAgICAgICAgICAgICAgIG11ZXZlQSA9IHBhcnNlSW50KChhbmNob1ZpZXdwb3J0ICogLjUpIC0gbXVldmVBKTtcclxuICAgICAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKG11ZXZlQSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXJnYSBwb3IgYWpheCBsYSBpbmZvcm1hY2nDs24gYsOhc2ljYSBkZSBsYSBmaWNoYSBkZSBwcm9ncmFtYVxyXG4gICAgICAgICAqIEBwYXJhbSAge2ludH0gcHJvZ0lkICBJZCBkZWwgcHJvZ3JhbWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHByb2dVcmwgVXJsIGNvbXBsZXRhIGRlIGxhIHJ1dGEgcGFyYSBjYXJnYXIgbGEgZmljaGFcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2FyZ2FGaWNoYVByb2dyYW1hKHByb2dJZCwgcHJvZ1VybCkge1xyXG4gICAgICAgICAgICAvLyBUT0RPIFByb2JhciBlbiBlbnRvcm5vIGRlIHBydWViYXMgZWxtdW5kby5lc1xyXG4gICAgICAgICAgICAvL3Byb2dVcmwgPSAnaHR0cDovL3d3dy5lbG11bmRvLmVzJyArIHByb2dVcmw7XHJcbiAgICAgICAgICAgIGNpZXJyYUZpY2hhKCk7XHJcblxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcImZpY2hhUHJvZ3JhbWEuaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICdwcm9nSWQnOiBwcm9nSWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLFxyXG4gICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZShmdW5jdGlvbihodG1sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5jb250ZW5pZG8nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuaHRtbChodG1sKTtcclxuICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLm5hbm8nKS5uYW5vU2Nyb2xsZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzVmlzaWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcclxuICAgICAgICAgICAgICAgICAgICB9LCA1MDAsICdzd2luZycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYS5maW5kKCcuY2llcnJhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaWVycmFGaWNoYSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjaWVycmFGaWNoYSgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCgkZmljaGFQcm9ncmFtYS5jc3MoJ3JpZ2h0JykpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGZpY2hhUHJvZ3JhbWEuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogLXBpeGVsc1BvckhvcmFcclxuICAgICAgICAgICAgICAgICAgICB9LCAzMDAsICdzd2luZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXJjYSBjb21vIGFjdGl2YXMgbGFzIGNhdGVnb3LDrWFzIGRlIHByb2dyYW1hIHNlbGVjY2lvbmFkYXNcclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgT2JqZXRvIGRlIGV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtYXJjYUNhdGVnb3JpYShldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY2xhc2UgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2NsYXNzJykuc3BsaXQoJyAnKVswXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkY29udFByb2dyYW1hcy5oYXNDbGFzcyhjbGFzZSkpIHtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLnJlbW92ZUNsYXNzKGNsYXNlKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuYWRkQ2xhc3MoY2xhc2UpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXJjYSB0b2RhcyBsYXMgY2F0ZWdvcsOtYXMgc2VsZWNjaW9uYWRhcyBwb3IgZGVmZWN0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtYXJjYXJDYXRlZ29yaWFzU2VsZWNjaW9uYWRhcygpIHtcclxuICAgICAgICAgICAgaWYgKGNhdGVnb3JpYXNVc3VhcmlvLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goY2F0ZWdvcmlhc1VzdWFyaW8sIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgICAgICAgICB2Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdG9yQ2F0ZWdvcmlhcy5maW5kKCdsaTpudGgtY2hpbGQoJyArIHYgKyAnKScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE11ZXZlIGVsIGNvbnRQcm9ncmFtYXMgYSBsYSBwb3NpY2nDs24gZGFkYVxyXG4gICAgICAgICAqIEBwYXJhbSAge2ludH0gY29vcmRYIENvb3JkZW5hZGEgbGVmdFxyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtdWV2ZVByb2dyYW1hc0FQdW50byhjb29yZFgpIHtcclxuICAgICAgICAgICAgdmFyIG5sZWZ0ID0gY29vcmRYIHx8IDA7XHJcbiAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogbmxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICRiYXJyYUhvcmFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogbmxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgIHZhciBob3JhTGVmdCA9IHBhcnNlSW50KGhvcmFBY3R1YWwuaCkgKiBwaXhlbHNQb3JIb3JhO1xyXG4gICAgICAgICAgICB2YXIgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgICAgICB2YXIgcG9zWCA9IGhvcmFMZWZ0ICsgbWludXRvc0xlZnQgKyBubGVmdDtcclxuICAgICAgICAgICAgJGhvcmFBY3R1YWwuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBwb3NYICsgJ3B4J1xyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlc3BsYXphIGxhIHZpc3RhIGRlIHZpZXdwb3J0IGFycmliYS9hYmFqb1xyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBPYmpldG8gY29uIHRvZGEgbGEgaW5mb3JtYWNpw7NuIGRlbCBldmVudG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tOYXZDYW5hbGVzKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzZSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpWzFdO1xyXG4gICAgICAgICAgICB2YXIgcG9zWVByb2dyYW1hcyA9ICRjb250UHJvZ3JhbWFzLmNzcygndG9wJykuc3BsaXQoJ3B4JylbMF07XHJcbiAgICAgICAgICAgIHZhciBwb3NZQ2FuYWxlcyA9ICRjb250Q2FuYWxlcy5jc3MoJ3RvcCcpLnNwbGl0KCdweCcpWzBdO1xyXG4gICAgICAgICAgICB2YXIgbnVtQ2FuYWxlcyA9ICRjb250Q2FuYWxlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoY2xhc2UpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2J0bkFycmliYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTW92ZW1vcyBjb250UHJvZ3JhbWFzIHkgY29udENhbmFsZXNcclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zWUNhbmFsZXMgLSBhbHRvQ2FuYWwgPiBhbHRvQmFycmFIb3Jhcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udENhbmFsZXMuY3NzKCd0b3AnLCBwb3NZQ2FuYWxlcyAtIGFsdG9DYW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmNzcygndG9wJywgcG9zWVByb2dyYW1hcyAtIGFsdG9DYW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRDYW5hbGVzLmNzcygndG9wJywgYWx0b0JhcnJhSG9yYXMgKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuY3NzKCd0b3AnLCBhbHRvQmFycmFIb3JhcyArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2J0bkFiYWpvJzpcclxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlbW9zIGNvbnRQcm9ncmFtYXMgeSBjb250Q2FuYWxlc1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXggPSBwb3NZQ2FuYWxlcyAtIG51bUNhbmFsZXMgKiBhbHRvQ2FuYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heCA+IHBvc1lDYW5hbGVzICsgYWx0b0NhbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250Q2FuYWxlcy5jc3MoJ3RvcCcsIHBvc1lDYW5hbGVzICsgYWx0b0NhbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuY3NzKCd0b3AnLCBwb3NZUHJvZ3JhbWFzICsgYWx0b0NhbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY29udENhbmFsZXMuY3NzKCd0b3AnLCBtYXggKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuY3NzKCd0b3AnLCBtYXggKyAncHgnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXNwbGF6YSBsYSB2aXN0YSBkZWwgdmlld3BvcnQgYSBsb3MgbGFkb3NcclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZlbnQgT2JqZXRvIGNvbiB0b2RhIGxhIGluZm9ybWFjacOzbiBkZWwgZXZlbnRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrTmF2SG9yYXMoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNlID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMV07XHJcbiAgICAgICAgICAgIHZhciBwb3NYID0gcGFyc2VJbnQoJGNvbnRQcm9ncmFtYXMuY3NzKCdsZWZ0JykpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocG9zWCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGNsYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdidG5JemRhJzpcclxuICAgICAgICAgICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhNYXRoLmZsb29yKHBhcnNlSW50KHBvc1ggKyBwaXhlbHNQb3JIb3JhKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYnRuRHJjaGEnOlxyXG4gICAgICAgICAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKE1hdGguZmxvb3IocGFyc2VJbnQocG9zWCAtIHBpeGVsc1BvckhvcmEpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgZWwgdG90YWwgZGUgY2FuYWxlcyBhIGxvcyBxdWUgc2UgcHVlZGUgc3VzY3JpYmlyIHkgbGFzIGxldHJhcyBjb3JyZXNwb25kaWVudGVzXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhTGlzdGFkb0NhbmFsZXNTdXNjcmlwY2lvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIHVsTGV0cmFzID0gJCgnPHVsPicpLFxyXG4gICAgICAgICAgICBmaWNoZXJvID0gJ2RhdG9zL2xpc3RhZG9jYW5hbGVzLmpzb24nO1xyXG5cclxuICAgICAgICAvLyBUT0RPIG1vdmVyIGxhIGNhcmdhIGEgdW5hIGZ1bmNpw7NuIGRpZmVyZW50ZSBjb24gcHJvbWlzZXNcclxuICAgICAgICAvLyAoR2VuZXJhIGVsIGJhY2tlbmQpXHJcbiAgICAgICAgJC5nZXQoZmljaGVybylcclxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FuYWxlc0dsb2JhbCA9IGRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUxldHJhID0gJzxsaSBjbGFzcz1cIml0ZW1MZXRyYVwiPjxoND57e2xldHJhfX08L2g0PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZGl2TGV0cmEgbmFub1wiPjxkaXYgY2xhc3M9XCJuYW5vLWNvbnRlbnRcIj48dWw+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3t7Y2FuYWxlc319PGxpIGNsYXNzPVwiaXRlbUNhbmFsXCIgZGF0YS1pZGNhbmFsPVwie3tpZF9wcm9ncmFtYX19XCI+PGltZyBzcmM9XCJ7e2ljb25vfX1cIiAvPnt7bm9tYnJlX2NvbXBsZXRvfX08c3BhbiBjbGFzcz1cImNoZWNrXCI+PC9zcGFuPjwvbGk+e3svY2FuYWxlc319JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvdWw+PC9kaXY+PC9kaXY+PC9saT4nO1xyXG5cclxuICAgICAgICAgICAgICAgICQuZWFjaChjYW5hbGVzR2xvYmFsLCBmdW5jdGlvbihpLCB2KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldHJhOiBpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5hbGVzOiB2XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdExldHJhID0gTWFyay51cCh0ZW1wbGF0ZUxldHJhLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB1bExldHJhcy5hcHBlbmQocmVzdWx0TGV0cmEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGJhcnJhTGV0cmFzLmh0bWwodWxMZXRyYXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vQ29tcHJvYmFtb3Mgc2kgeWEgZXN0YW1vcyBzdXNjcml0b3MgYSBlc2UgY2FuYWxcclxuICAgICAgICAgICAgICAgICQuZWFjaCgkYmFycmFMZXRyYXMuZmluZCgnLml0ZW1DYW5hbCcpLCBmdW5jdGlvbihpLCB2KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5hbGVzVXN1YXJpby5pbmRleE9mKCQodGhpcykuZGF0YSgnaWRjYW5hbCcpKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCQodGhpcykuZGF0YSgnaWRjYW5hbCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2hlY2snKS5hZGRDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGJhcnJhTGV0cmFzXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJykubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2g6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSBsb3MgY2FuYWxlcyBhIGxvcyBxdWUgZXN0w6Egc3VzY3JpdG8gZWwgdXN1YXJpbyAobyBkZWZlY3RvKVxyXG4gICAgICogUGVybWl0ZSByZW9yZGVuYXIgbG9zIGNhbmFsZXMsIGRlc3VzY3JpYmlyc2UgeSBndWFyZGFyIGxhIGNvbmZpZ3VyYWNpw7NuXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhTGlzdGFkb0NhbmFsZXNTZWxlY2Npb25hZG9zKCkge1xyXG5cclxuICAgICAgICB2YXIgdWxDYW5hbGVzID0gJCgnPHVsIGNsYXNzPVwib3JkZW4gdmVydGljYWxcIj4nKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGxpIGNsYXNzPVwiaXRlbUNhbmFsXCIgZGF0YS1pZGNhbmFsPVwie3tub21icmV9fVwiPjxpbWcgc3JjPVwiaHR0cDovL2VzdGF0aWNvcy5lbG11bmRvLmVze3tpY29ub319XCIgLz57e25vbWJyZV9jb21wbGV0b319PHNwYW4gY2xhc3M9XCJjaGVjayBzZWxcIj48L3NwYW4+PC9saT4nO1xyXG5cclxuICAgICAgICAkLmVhY2goYXJyYXlDYW5hbGVzLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQgPSB2LmNhbmFsO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIHVsQ2FuYWxlcy5hcHBlbmQocmVzdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJG9yZGVuQ2FuYWxlcy5maW5kKCcubmFuby1jb250ZW50JykuaHRtbCh1bENhbmFsZXMpO1xyXG4gICAgICAgICRvcmRlbkNhbmFsZXNcclxuICAgICAgICAgICAgLmZpbmQoJy5uYW5vJykubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICBmbGFzaDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBsYW56YUhhbmRsZXJzU3VzY3JpcGljaW9uKCkge1xyXG5cclxuICAgICAgICAvKnZhciAkYmFycmFMZXRyYXMgPSAkKCcuYmFycmFMZXRyYXMnKTtcclxuICAgICAgICB2YXIgJG9yZGVuQ2FuYWxlcyA9ICQoJy5vcmRlbkNhbmFsZXMnKTsqL1xyXG5cclxuICAgICAgICAvLyBDbGljayBlbiBpdGVtcyBkZSBzdXNjcmlwY2nDs25cclxuICAgICAgICAkYmFycmFMZXRyYXMub24oJ2NsaWNrJywgJy5pdGVtQ2FuYWwnLCBjbGlja0l0ZW1DYW5hbCk7XHJcblxyXG4gICAgICAgIC8vIFJlb3JkZW5hY2nDs24gZGUgZWxlbWVudG9zIGRlIGNhbmFsLCBkcmFnICYgZHJvcFxyXG4gICAgICAgIHZhciBhZGp1c3RtZW50O1xyXG4gICAgICAgIHZhciBncm91cCA9ICQoJy5vcmRlbkNhbmFsZXMgdWwub3JkZW4nKS5zb3J0YWJsZSh7XHJcbiAgICAgICAgICAgIGdyb3VwOiAnb3JkZW4nLFxyXG4gICAgICAgICAgICBwdWxsUGxhY2Vob2xkZXI6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIGFuaW1hdGlvbiBvbiBkcm9wXHJcbiAgICAgICAgICAgIG9uRHJvcDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdyb3VwLnNvcnRhYmxlKFwic2VyaWFsaXplXCIpLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAnICcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkY2xvbmVkSXRlbSA9ICQoJzxsaS8+JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0uYmVmb3JlKCRjbG9uZWRJdGVtKTtcclxuICAgICAgICAgICAgICAgICRjbG9uZWRJdGVtLmRldGFjaCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9zdXBlcigkaXRlbSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCAkaXRlbSByZWxhdGl2ZSB0byBjdXJzb3IgcG9zaXRpb25cclxuICAgICAgICAgICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9ICRpdGVtLm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXIgPSBjb250YWluZXIucm9vdEdyb3VwLnBvaW50ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGVuZW1vcyBlbiBjdWVudGEgbGEgcG9zaWNpw7NuIGRlbCBuYW5vU2Nyb2xsZXIgZW4gZXNlIG1vbWVudG9cclxuICAgICAgICAgICAgICAgIHZhciBwb3NJbmlTY3JvbGxlciA9ICQoJy5vcmRlbkNhbmFsZXMgLm5hbm8gLm5hbm8tY29udGVudCcpLmdldCgwKS5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBwb3NJbmlTY3JvbGxlciA9IE1hdGguZmxvb3IocG9zSW5pU2Nyb2xsZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFkanVzdG1lbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9pbnRlci5sZWZ0IC0gb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBwb2ludGVyLnRvcCAtIG9mZnNldC50b3AgLSBwb3NJbmlTY3JvbGxlclxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc3VwZXIoJGl0ZW0sIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24oJGl0ZW0sIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgLSBhZGp1c3RtZW50LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgLSBhZGp1c3RtZW50LnRvcFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ2xpY2sgZW4gY2hlY2tzIGVuIGVsIHBhbmVsIGRlIHN1c2NyaXRvc1xyXG4gICAgICAgICRvcmRlbkNhbmFsZXMub24oJ2NsaWNrJywgJy5jaGVjaycsIGNsaWNrQ2hlY2tPcmRlbkNhbmFsKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBkZSBjbGlja2FyIGVuIHVuIGl0ZW1DYW5hbCBkZSBsYSBsaXN0YSBkZSBjYW5hbGVzIGRlIHN1c2NyaXBjacOzblxyXG4gICAgICAgICAqIEBwYXJhbSAge1tldmVudF19IGV2ZW50IEV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja0l0ZW1DYW5hbChldmVudCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICRjaGVjayA9ICQodGhpcykuZmluZCgnLmNoZWNrJyk7XHJcbiAgICAgICAgICAgIHZhciBib29sID0gJGNoZWNrLmhhc0NsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgdmFyIGlkY2FuYWwgPSAkKHRoaXMpLmRhdGEoJ2lkY2FuYWwnKTtcclxuICAgICAgICAgICAgdmFyICRpdGVtc0NhbmFsID0gJG9yZGVuQ2FuYWxlcy5maW5kKCcuaXRlbUNhbmFsJykuZmlsdGVyKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5kYXRhKCdpZGNhbmFsJykgPT09IGlkY2FuYWw7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFib29sKSB7IC8vIHNpIG51ZXN0cm8gZWxlbWVudG8gbm8gZXN0w6Egc2VsZWNjaW9uYWRvXHJcblxyXG4gICAgICAgICAgICAgICAgJGNoZWNrLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgIGlmICgkaXRlbXNDYW5hbC5sZW5ndGgpIHsgLy8gc2kgeWEgZXhpc3RlIGVzdGUgY2FuYWwgZW4gZWwgcGFuZWwgZGUgb3JkZW5cclxuICAgICAgICAgICAgICAgICAgICAkaXRlbXNDYW5hbC5maW5kKCcuY2hlY2snKS50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBzaSBubyBleGlzdGUgZXN0ZSBjYW5hbCBlbiBlbCBwYW5lbCBkZSBvcmRlblxyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvbmUoKS5hcHBlbmRUbygkb3JkZW5DYW5hbGVzLmZpbmQoJ3VsJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gc2kgbnVlc3RybyBlbGVtZW50byBlc3TDoSBzZWxlY2Npb25hZG9cclxuICAgICAgICAgICAgICAgICRjaGVjay50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAkaXRlbXNDYW5hbC5maW5kKCcuY2hlY2snKS50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRvcmRlbkNhbmFsZXNcclxuICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpLm5hbm9TY3JvbGxlcigpLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAnYm90dG9tJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBwYXJhIHJlb3JkZW5hciBsb3MgZWxlbWVudG9zIGl0ZW1DYW5hbCBlbiBlbCBwYW5lbCBkZSBvcmRlblxyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBFdmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tPcmRlbkNhbmFsKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBlbiBpdGVtQ2FuYWwnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGdW5jaW9uYWxpZGFkIGRlIGNsaWNrYXIgZWwgY2hlY2tib3ggZW4gbG9zIGl0ZW1zQ2FuYWwgZGVsIHBhbmVsIGRlIG9yZGVuXHJcbiAgICAgICAgICogQHBhcmFtICB7W2V2ZW50XX0gZXZlbnQgRXZlbnRvIGNvbXBsZXRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrQ2hlY2tPcmRlbkNhbmFsKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB2YXIgaWRjYW5hbCA9ICQodGhpcykucGFyZW50KCcuaXRlbUNhbmFsJykuZGF0YSgnaWRjYW5hbCcpO1xyXG4gICAgICAgICAgICB2YXIgJGl0ZW1zQ2FuYWwgPSAkYmFycmFMZXRyYXMuZmluZCgnLml0ZW1DYW5hbCcpLmZpbHRlcihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgnaWRjYW5hbCcpID09PSBpZGNhbmFsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAkaXRlbXNDYW5hbC5maW5kKCcuY2hlY2snKS50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBJTklUICoqL1xyXG4gICAgKGZ1bmN0aW9uIGluaXQoKSB7XHJcblxyXG4gICAgICAgIC8vY29uc29sZS50aW1lKCdJbml0Jyk7XHJcblxyXG4gICAgICAgIHZhciBjYXJnYUluZm9Db29raWVzID0gY2FyZ2FDb29raWVzKCk7XHJcbiAgICAgICAgdmFyIGNhcmdhSW5mb0NhbmFsZXMgPSBjYXJnYUluZm9Db29raWVzLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5hbGVzVXN1YXJpbyA9IHJlcztcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYXJnYURhdG9zQ2FuYWxlcyhjYW5hbGVzVXN1YXJpbyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcGludGFDYW5hbGVzKGNhbmFsZXNVc3VhcmlvKTsgLy8gUGludGFyIGVuIGVsIG9yZGVuIGVuIHF1ZSBsbGVnYW4gZGUgbGEgY29va2llXHJcbiAgICAgICAgICAgICAgICBwaW50YVBhcnJpbGxhKGNhbmFsZXNVc3VhcmlvLCBhcnJheUNhbmFsZXMpOyAvLyBQaW50YXIgZW4gZWwgb3JkZW4gZW4gcXVlIGxsZWdhbiBkZSBsYSBjb29raWVcclxuICAgICAgICAgICAgICAgIHBpbnRhSG9yYXNQYXJyaWxsYSgpOyAvLyBQaW50YXIgbGEgYmFycmEgc3VwZXJpb3IgZGUgaG9yYXJpb1xyXG4gICAgICAgICAgICAgICAgcGludGFIb3JhQWN0dWFsKCk7IC8vIFBvc2ljaW9uYSBlbCBtYXJjYWRvciBkZSBob3JhIGFjdHVhbCBlbiBsYSBwYXJyaWxsYVxyXG4gICAgICAgICAgICAgICAgcGludGFTZWxlY3RvckRpYXMoKTsgLy8gUGludGFtb3MgbG9zIGxpdGVyYWxlcyBkZSBsb3MgZMOtYXMgY29udGVtcGxhZG9zIGVuIHBhcnJpbGxhXHJcbiAgICAgICAgICAgICAgICBzaXR1YVBhcnJpbGxhQWhvcmEoKTsgLy8gUG9zaWNpb25hIGxhIHBhcnJpbGxhIHkgZWxlbWVudG9zIGVuIGxhIGZlY2hhIHkgaG9yYSBhY3R1YWxcclxuXHJcbiAgICAgICAgICAgICAgICBsYW56YUhhbmRsZXJzKCk7IC8vIExhbnphIHRvZG9zIGxvcyBldmVudCBsaXN0ZW5lcnNcclxuXHJcbiAgICAgICAgICAgICAgICBwaW50YUxpc3RhZG9DYW5hbGVzU3VzY3JpcGNpb24oKTsgLy8gUGludGFtb3MgZWwgc2VsZWN0b3IgZGUgY2FuYWxlcyBjb21wbGV0byBhbCBwaWVcclxuICAgICAgICAgICAgICAgIHBpbnRhTGlzdGFkb0NhbmFsZXNTZWxlY2Npb25hZG9zKCk7IC8vIFBpbnRhbW9zIGVsIMOhcmVhIGRlIGNhbmFsZXMgc2VsZWNjaW9uYWRvc1xyXG5cclxuICAgICAgICAgICAgICAgIGxhbnphSGFuZGxlcnNTdXNjcmlwaWNpb24oKTsgLy8gTGFuemEgdG9kb3MgbG9zIGV2ZW50cyBsaXN0ZW5lcnMgZGUgc3VzY3JpcGNpw7NuIGEgY2FuYWxlc1xyXG5cclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS50aW1lRW5kKCdJbml0Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL2NhcmdhSW5mb1VzdWFyaW8oKTsgLy8gQ2FyZ2EgbGEgaW5mb3JtYWNpw7NuIHNvYnJlIHByb2dyYW1hcyBmYXZvcml0b3MgeSBhbGVydGFzIGRlIHVuIHVzdWFyaW8gdmFsaWRhZG9cclxuICAgICAgICAvL3BpbnRhUHJvZ3NVc3VhcmlvKCk7IC8vIE1vZGlmaWNhIGxhcyBjbGFzZXMgZGUgbG9zIHByb2dyYW1hcyBxdWUgZWwgdXN1YXJpbyB0ZW5nYSBjb21vIGZhdm9yaXRvcyBvIGFsZXJ0YXNcclxuXHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qKiBIZWxwZXIgKiovXHJcbiAgICAkLmZuLmV4aXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcblxyXG59KShqcTExMSk7XHJcblxyXG4vKipcclxuICogQ3JlYSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSAgTm9tYnJlIGRlIGxhIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtvYmplY3R9IHZhbHVlIFZhbG9yIGRlIGxhIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtpbnR9IGRheXMgIE7Dum1lcm8gZGUgZMOtYXMgZGUgdmlnZW5jaWFcclxuICogQHJldHVybiB7fVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ29va2llKG5hbWUsIHZhbHVlLCBkYXlzKSB7XHJcbiAgICB2YXIgZXhwaXJlcztcclxuXHJcbiAgICBpZiAoZGF5cykge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAoZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICBleHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvR01UU3RyaW5nKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV4cGlyZXMgPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgZG9jdW1lbnQuY29va2llID0gZXNjYXBlKG5hbWUpICsgXCI9XCIgKyBlc2NhcGUodmFsdWUpICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIjtcclxufVxyXG4vKipcclxuICogTGVlIHVuYSBjb29raWVcclxuICogQHBhcmFtICB7c3RyaW5nfSBuYW1lIE5vbWJyZSBkZSBsYSBjb29raWVcclxuICogQHJldHVybiB7c3RyaW5nfSAgICAgIFZhbG9yIGRlIGxhIGNvb2tpZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVhZENvb2tpZShuYW1lKSB7XHJcbiAgICB2YXIgbmFtZUVRID0gZXNjYXBlKG5hbWUpICsgXCI9XCI7XHJcbiAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IGNhW2ldO1xyXG4gICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PT0gJyAnKSBjID0gYy5zdWJzdHJpbmcoMSwgYy5sZW5ndGgpO1xyXG4gICAgICAgIGlmIChjLmluZGV4T2YobmFtZUVRKSA9PT0gMCkgcmV0dXJuIHVuZXNjYXBlKGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4vKipcclxuICogRWxpbWluYSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSBOb21icmUgZGUgbGEgY29va2llXHJcbiAqIEByZXR1cm4ge31cclxuICovXHJcbmZ1bmN0aW9uIGVyYXNlQ29va2llKG5hbWUpIHtcclxuICAgIGNyZWF0ZUNvb2tpZShuYW1lLCBcIlwiLCAtMSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXZ1ZWx2ZSB1biBuw7ptZXJvIGNvbW8gY2FkZW5hIGZvcm1hdGVhZGEgY29uIGNlcm9zIGEgbGEgaXpkYVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAgICAgICBFbCBuw7ptZXJvIG9yaWdpbmFsXHJcbiAqIEBwYXJhbSAge2ludGVnZXJ9IHRhcmdldExlbmd0aCBOw7ptZXJvIGRlIGNhcmFjdGVyZXMgcXVlIHF1ZXJlbW9zIG9idGVuZXJcclxuICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgICAgQ2FkZW5hIGNvbXB1ZXN0YSBkZSBjZXJvcyB5IGVsIG7Dum1lcm8gb3JpZ2luYWxcclxuICovXHJcbmZ1bmN0aW9uIGxlZnRQYWQobnVtYmVyLCB0YXJnZXRMZW5ndGgpIHtcclxuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgKyAnJztcclxuICAgIHdoaWxlIChvdXRwdXQubGVuZ3RoIDwgdGFyZ2V0TGVuZ3RoKSB7XHJcbiAgICAgICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb3RvdGlwbyBwYXJhIG9idGVuZXIgbsO6bWVyb3MgbcOheGltbyB5IG3DrW5pbW8gZW4gdW4gYXJyYXlcclxuICogQHJldHVybiB7aW50fSBEZXZ1ZWx2ZSBlbCBtYXgvbWluIGRlIHVuIGFycmF5IGRhZG9cclxuICovXHJcbkFycmF5LnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtYXggPSB0aGlzWzBdO1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKylcclxuICAgICAgICBpZiAodGhpc1tpXSA+IG1heCkgbWF4ID0gdGhpc1tpXTtcclxuICAgIHJldHVybiBtYXg7XHJcbn07XHJcbkFycmF5LnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtaW4gPSB0aGlzWzBdO1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKylcclxuICAgICAgICBpZiAodGhpc1tpXSA8IG1pbikgbWluID0gdGhpc1tpXTtcclxuICAgIHJldHVybiBtaW47XHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9