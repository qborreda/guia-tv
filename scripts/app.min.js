function createCookie(t,e,i){var n;if(i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),n="; expires="+o.toGMTString()}else n="";document.cookie=escape(t)+"="+escape(e)+n+"; path=/"}function readCookie(t){for(var e=escape(t)+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return unescape(o.substring(e.length,o.length))}return null}function eraseCookie(t){createCookie(t,"",-1)}function leftPad(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}!function(t,e,i,n){function o(t,e){var i=Math.max(0,t[0]-e[0],e[0]-t[1]),n=Math.max(0,t[2]-e[1],e[1]-t[3]);return i+n}function s(e,i,n,o){var s=e.length,r=o?"offset":"position";for(n=n||0;s--;){var a=e[s].el?e[s].el:t(e[s]),l=a[r]();l.left+=parseInt(a.css("margin-left"),10),l.top+=parseInt(a.css("margin-top"),10),i[s]=[l.left-n,l.left+a.outerWidth()+n,l.top-n,l.top+a.outerHeight()+n]}}function r(t,e){var i=e.offset();return{left:t.left-i.left,top:t.top-i.top}}function a(t,e,i){e=[e.left,e.top],i=i&&[i.left,i.top];for(var n,s=t.length,r=[];s--;)n=t[s],r[s]=[s,o(n,e),i&&o(n,i)];return r=r.sort(function(t,e){return e[1]-t[1]||e[2]-t[2]||e[0]-t[0]})}function l(e){this.options=t.extend({},u,e),this.containers=[],this.options.rootGroup||(this.scrollProxy=t.proxy(this.scroll,this),this.dragProxy=t.proxy(this.drag,this),this.dropProxy=t.proxy(this.drop,this),this.placeholder=t(this.options.placeholder),e.isValidTarget||(this.options.isValidTarget=n))}function c(e,i){this.el=e,this.options=t.extend({},p,i),this.group=l.get(this.options),this.rootGroup=this.options.rootGroup||this.group,this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var n=this.rootGroup.options.itemPath;this.target=n?this.el.find(n):this.el,this.target.on(h.start,this.handle,t.proxy(this.dragInit,this)),this.options.drop&&this.group.containers.push(this)}var h,p={drag:!0,drop:!0,exclude:"",nested:!0,vertical:!0},u={afterMove:function(){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",bodyClass:"dragging",draggedClass:"dragged",placeholderClass:"placeholder",isValidTarget:function(){return!0},onCancel:function(){},onDrag:function(t,e){t.css(e)},onDragStart:function(e,i){e.css({height:e.height(),width:e.width()}),e.addClass(i.group.options.draggedClass),t("body").addClass(i.group.options.bodyClass)},onDrop:function(e,i){e.removeClass(i.group.options.draggedClass).removeAttr("style"),t("body").removeClass(i.group.options.bodyClass)},onMousedown:function(t,e,i){return i.target.nodeName.match(/^(input|select|textarea)$/i)?void 0:(i.preventDefault(),!0)},placeholder:'<li class="placeholder"/>',pullPlaceholder:!0,serialize:function(e,i,n){var o=t.extend({},e.data());return n?[i]:(i[0]&&(o.children=i),delete o.subContainers,delete o.sortable,o)},tolerance:0},f={},d=0,g={left:0,top:0,bottom:0,right:0},h={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"},v="subContainers";l.get=function(t){return f[t.group]||(t.group===n&&(t.group=d++),f[t.group]=new l(t)),f[t.group]},l.prototype={dragInit:function(e,i){this.$document=t(i.el[0].ownerDocument),this.item=t(e.target).closest(this.options.itemSelector),this.itemContainer=i,!this.item.is(this.options.exclude)&&this.options.onMousedown(this.item,u.onMousedown,e)&&(this.setPointer(e),this.toggleListeners("on"),this.setupDelayTimer(),this.dragInitDone=!0)},drag:function(t){if(!this.dragging){if(!this.distanceMet(t)||!this.delayMet)return;this.options.onDragStart(this.item,this.itemContainer,u.onDragStart,t),this.item.before(this.placeholder),this.dragging=!0}this.setPointer(t),this.options.onDrag(this.item,r(this.pointer,this.item.offsetParent()),u.onDrag,t);var e=t.pageX||t.originalEvent.pageX,i=t.pageY||t.originalEvent.pageY,o=this.sameResultBox,s=this.options.tolerance;(!o||o.top-s>i||o.bottom+s<i||o.left-s>e||o.right+s<e)&&(this.searchValidTarget()||(this.placeholder.detach(),this.lastAppendedItem=n))},drop:function(t){this.toggleListeners("off"),this.dragInitDone=!1,this.dragging&&(this.placeholder.closest("html")[0]?this.placeholder.before(this.item).detach():this.options.onCancel(this.item,this.itemContainer,u.onCancel,t),this.options.onDrop(this.item,this.getContainer(this.item),u.onDrop,t),this.clearDimensions(),this.clearOffsetParent(),this.lastAppendedItem=this.sameResultBox=n,this.dragging=!1)},searchValidTarget:function(t,e){t||(t=this.relativePointer||this.pointer,e=this.lastRelativePointer||this.lastPointer);for(var i=a(this.getContainerDimensions(),t,e),o=i.length;o--;){var s=i[o][0],l=i[o][1];if(!l||this.options.pullPlaceholder){var c=this.containers[s];if(!c.disabled){if(!this.$getOffsetParent()){var h=c.getItemOffsetParent();t=r(t,h),e=r(e,h)}if(c.searchValidTarget(t,e))return!0}}}this.sameResultBox&&(this.sameResultBox=n)},movePlaceholder:function(t,e,i,n){var o=this.lastAppendedItem;(n||!o||o[0]!==e[0])&&(e[i](this.placeholder),this.lastAppendedItem=e,this.sameResultBox=n,this.options.afterMove(this.placeholder,t,e))},getContainerDimensions:function(){return this.containerDimensions||s(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent()),this.containerDimensions},getContainer:function(t){return t.closest(this.options.containerSelector).data(i)},$getOffsetParent:function(){if(this.offsetParent===n){var t=this.containers.length-1,e=this.containers[t].getItemOffsetParent();if(!this.options.rootGroup)for(;t--;)if(e[0]!=this.containers[t].getItemOffsetParent()[0]){e=!1;break}this.offsetParent=e}return this.offsetParent},setPointer:function(t){var e=this.getPointer(t);if(this.$getOffsetParent()){var i=r(e,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer,this.relativePointer=i}this.lastPointer=this.pointer,this.pointer=e},distanceMet:function(t){var e=this.getPointer(t);return Math.max(Math.abs(this.pointer.left-e.left),Math.abs(this.pointer.top-e.top))>=this.options.distance},getPointer:function(t){return{left:t.pageX||t.originalEvent.pageX,top:t.pageY||t.originalEvent.pageY}},setupDelayTimer:function(){var t=this;this.delayMet=!this.options.delay,this.delayMet||(clearTimeout(this._mouseDelayTimer),this._mouseDelayTimer=setTimeout(function(){t.delayMet=!0},this.options.delay))},scroll:function(){this.clearDimensions(),this.clearOffsetParent()},toggleListeners:function(e){var i=this,n=["drag","drop","scroll"];t.each(n,function(t,n){i.$document[e](h[n],i[n+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=n},clearDimensions:function(){this.traverse(function(t){t._clearDimensions()})},traverse:function(t){t(this);for(var e=this.containers.length;e--;)this.containers[e].traverse(t)},_clearDimensions:function(){this.containerDimensions=n},_destroy:function(){f[this.options.group]=n}},c.prototype={dragInit:function(t){var e=this.rootGroup;!this.disabled&&!e.dragInitDone&&this.options.drag&&this.isValidDrag(t)&&e.dragInit(t,this)},isValidDrag:function(t){return 1==t.which||"touchstart"==t.type&&1==t.originalEvent.touches.length},searchValidTarget:function(t,e){var i=a(this.getItemDimensions(),t,e),n=i.length,o=this.rootGroup,s=!o.options.isValidTarget||o.options.isValidTarget(o.item,this);if(!n&&s)return o.movePlaceholder(this,this.target,"append"),!0;for(;n--;){var r=i[n][0],l=i[n][1];if(!l&&this.hasChildGroup(r)){var c=this.getContainerGroup(r).searchValidTarget(t,e);if(c)return!0}else if(s)return this.movePlaceholder(r,t),!0}},movePlaceholder:function(e,i){var n=t(this.items[e]),o=this.itemDimensions[e],s="after",r=n.outerWidth(),a=n.outerHeight(),l=n.offset(),c={left:l.left,right:l.left+r,top:l.top,bottom:l.top+a};if(this.options.vertical){var h=(o[2]+o[3])/2,p=i.top<=h;p?(s="before",c.bottom-=a/2):c.top+=a/2}else{var u=(o[0]+o[1])/2,f=i.left<=u;f?(s="before",c.right-=r/2):c.left+=r/2}this.hasChildGroup(e)&&(c=g),this.rootGroup.movePlaceholder(this,n,s,c)},getItemDimensions:function(){return this.itemDimensions||(this.items=this.$getChildren(this.el,"item").filter(":not(."+this.group.options.placeholderClass+", ."+this.group.options.draggedClass+")").get(),s(this.items,this.itemDimensions=[],this.options.tolerance)),this.itemDimensions},getItemOffsetParent:function(){var t,e=this.el;return t="relative"===e.css("position")||"absolute"===e.css("position")||"fixed"===e.css("position")?e:e.offsetParent()},hasChildGroup:function(t){return this.options.nested&&this.getContainerGroup(t)},getContainerGroup:function(e){var o=t.data(this.items[e],v);if(o===n){var s=this.$getChildren(this.items[e],"container");if(o=!1,s[0]){var r=t.extend({},this.options,{rootGroup:this.rootGroup,group:d++});o=s[i](r).data(i).group}t.data(this.items[e],v,o)}return o},$getChildren:function(e,i){var n=this.rootGroup.options,o=n[i+"Path"],s=n[i+"Selector"];return e=t(e),o&&(e=e.find(o)),e.children(s)},_serialize:function(e,i){var n=this,o=i?"item":"container",s=this.$getChildren(e,o).not(this.options.exclude).map(function(){return n._serialize(t(this),!i)}).get();return this.rootGroup.options.serialize(e,s,i)},traverse:function(e){t.each(this.items||[],function(){var i=t.data(this,v);i&&i.traverse(e)}),e(this)},_clearDimensions:function(){this.itemDimensions=n},_destroy:function(){var e=this;this.target.off(h.start,this.handle),this.el.removeData(i),this.options.drop&&(this.group.containers=t.grep(this.group.containers,function(t){return t!=e})),t.each(this.items||[],function(){t.removeData(this,v)})}};var m={enable:function(){this.traverse(function(t){t.disabled=!1})},disable:function(){this.traverse(function(t){t.disabled=!0})},serialize:function(){return this._serialize(this.el,!0)},refresh:function(){this.traverse(function(t){t._clearDimensions()})},destroy:function(){this.traverse(function(t){t._destroy()})}};t.extend(c.prototype,m),t.fn[i]=function(e){var o=Array.prototype.slice.call(arguments,1);return this.map(function(){var s=t(this),r=s.data(i);return r&&m[e]?m[e].apply(r,o)||this:(r||e!==n&&"object"!=typeof e||s.data(i,new c(s,e)),this)})}}(jq111,window,"sortable"),function(t,e,i){"use strict";var n,o,s,r,a,l,c,h,p,u,f,d,g,v,m,b,y,x,S,C,T,w,M,D,P,k,_,$,O,I,H;M={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},x="scrollbar",y="scroll",p="mousedown",u="mouseenter",f="mousemove",g="mousewheel",d="mouseup",b="resize",a="drag",l="enter",C="up",m="panedown",s="DOMMouseScroll",r="down",T="wheel",c="keydown",h="keyup",S="touchmove",n="Microsoft Internet Explorer"===e.navigator.appName&&/msie 7./i.test(e.navigator.appVersion)&&e.ActiveXObject,o=null,_=e.requestAnimationFrame,w=e.cancelAnimationFrame,O=i.createElement("div").style,H=function(){var t,e,i,n,o,s;for(n=["t","webkitT","MozT","msT","OT"],t=o=0,s=n.length;s>o;t=++o)if(i=n[t],e=n[t]+"ransform",e in O)return n[t].substr(0,n[t].length-1);return!1}(),I=function(t){return H===!1?!1:""===H?t:H+t.charAt(0).toUpperCase()+t.substr(1)},$=I("transform"),P=$!==!1,D=function(){var t,e,n;return t=i.createElement("div"),e=t.style,e.position="absolute",e.width="100px",e.height="100px",e.overflow=y,e.top="-9999px",i.body.appendChild(t),n=t.offsetWidth-t.clientWidth,i.body.removeChild(t),n},k=function(){var t,i,n;return i=e.navigator.userAgent,(t=/(?=.+Mac OS X)(?=.+Firefox)/.test(i))?(n=/Firefox\/\d{2}\./.exec(i),n&&(n=n[0].replace(/\D+/g,"")),t&&+n>23):!1},v=function(){function c(n,s){this.el=n,this.options=s,o||(o=D()),this.$el=t(this.el),this.doc=t(this.options.documentContext||i),this.win=t(this.options.windowContext||e),this.body=this.doc.find("body"),this.$content=this.$el.children("."+s.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return c.prototype.preventScrolling=function(t,e){if(this.isActive)if(t.type===s)(e===r&&t.originalEvent.detail>0||e===C&&t.originalEvent.detail<0)&&t.preventDefault();else if(t.type===g){if(!t.originalEvent||!t.originalEvent.wheelDelta)return;(e===r&&t.originalEvent.wheelDelta<0||e===C&&t.originalEvent.wheelDelta>0)&&t.preventDefault()}},c.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},c.prototype.updateScrollValues=function(){var t,e;t=this.content,this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,e=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==e&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:e}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},c.prototype.setOnScrollStyles=function(){var t;P?(t={},t[$]="translate(0, "+this.sliderTop+"px)"):t={top:this.sliderTop},_?(w&&this.scrollRAF&&w(this.scrollRAF),this.scrollRAF=_(function(e){return function(){return e.scrollRAF=null,e.slider.css(t)}}(this))):this.slider.css(t)},c.prototype.createEvents=function(){this.events={down:function(t){return function(e){return t.isBeingDragged=!0,t.offsetY=e.pageY-t.slider.offset().top,t.slider.is(e.target)||(t.offsetY=0),t.pane.addClass("active"),t.doc.bind(f,t.events[a]).bind(d,t.events[C]),t.body.bind(u,t.events[l]),!1}}(this),drag:function(t){return function(e){return t.sliderY=e.pageY-t.$el.offset().top-t.paneTop-(t.offsetY||.5*t.sliderHeight),t.scroll(),t.contentScrollTop>=t.maxScrollTop&&t.prevScrollTop!==t.maxScrollTop?t.$el.trigger("scrollend"):0===t.contentScrollTop&&0!==t.prevScrollTop&&t.$el.trigger("scrolltop"),!1}}(this),up:function(t){return function(){return t.isBeingDragged=!1,t.pane.removeClass("active"),t.doc.unbind(f,t.events[a]).unbind(d,t.events[C]),t.body.unbind(u,t.events[l]),!1}}(this),resize:function(t){return function(){t.reset()}}(this),panedown:function(t){return function(e){return t.sliderY=(e.offsetY||e.originalEvent.layerY)-.5*t.sliderHeight,t.scroll(),t.events.down(e),!1}}(this),scroll:function(t){return function(e){t.updateScrollValues(),t.isBeingDragged||(t.iOSNativeScrolling||(t.sliderY=t.sliderTop,t.setOnScrollStyles()),null!=e&&(t.contentScrollTop>=t.maxScrollTop?(t.options.preventPageScrolling&&t.preventScrolling(e,r),t.prevScrollTop!==t.maxScrollTop&&t.$el.trigger("scrollend")):0===t.contentScrollTop&&(t.options.preventPageScrolling&&t.preventScrolling(e,C),0!==t.prevScrollTop&&t.$el.trigger("scrolltop"))))}}(this),wheel:function(t){return function(e){var i;if(null!=e)return i=e.delta||e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.detail||e.originalEvent&&-e.originalEvent.detail,i&&(t.sliderY+=-i/3),t.scroll(),!1}}(this),enter:function(t){return function(e){var i;if(t.isBeingDragged)return 1!==(e.buttons||e.which)?(i=t.events)[C].apply(i,arguments):void 0}}(this)}},c.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(b,t[b]),this.iOSNativeScrolling||(this.slider.bind(p,t[r]),this.pane.bind(p,t[m]).bind(""+g+" "+s,t[T])),this.$content.bind(""+y+" "+g+" "+s+" "+S,t[y])},c.prototype.removeEvents=function(){var t;t=this.events,this.win.unbind(b,t[b]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+y+" "+g+" "+s+" "+S,t[y])},c.prototype.generate=function(){var t,i,n,s,r,a,l;return s=this.options,a=s.paneClass,l=s.sliderClass,t=s.contentClass,(r=this.$el.children("."+a)).length||r.children("."+l).length||this.$el.append('<div class="'+a+'"><div class="'+l+'" /></div>'),this.pane=this.$el.children("."+a),this.slider=this.pane.find("."+l),0===o&&k()?(n=e.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),i={right:-14,paddingRight:+n+14}):o&&(i={right:-o},this.$el.addClass("has-scrollbar")),null!=i&&this.$content.css(i),this},c.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},c.prototype.reset=function(){var t,e,i,s,r,a,l,c,h,p,u,f;return this.iOSNativeScrolling?(this.contentHeight=this.content.scrollHeight,void 0):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),t=this.content,s=t.style,r=s.overflowY,n&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+o,p=parseInt(this.$el.css("max-height"),10),p>0&&(this.$el.height(""),this.$el.height(t.scrollHeight>p?p:t.scrollHeight)),l=this.pane.outerHeight(!1),h=parseInt(this.pane.css("top"),10),a=parseInt(this.pane.css("bottom"),10),c=l+h+a,f=Math.round(c/e*c),f<this.options.sliderMinHeight?f=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&f>this.options.sliderMaxHeight&&(f=this.options.sliderMaxHeight),r===y&&s.overflowX!==y&&(f+=o),this.maxSliderTop=c-f,this.contentHeight=e,this.paneHeight=l,this.paneOuterHeight=c,this.sliderHeight=f,this.paneTop=h,this.slider.height(f),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&r!==y?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&r===y?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),i=this.$content.css("position"),("static"===i||"relative"===i)&&(u=parseInt(this.$content.css("right"),10),u&&this.$content.css({right:"",marginRight:u})),this)},c.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},c.prototype.scrollBottom=function(t){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTop=function(t){return this.isActive?(this.$content.scrollTop(+t).trigger(g),this.stop().restore(),this):void 0},c.prototype.scrollTo=function(t){return this.isActive?(this.scrollTop(this.$el.find(t).get(0).offsetTop),this):void 0},c.prototype.stop=function(){return w&&this.scrollRAF&&(w(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},c.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),n&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},c.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(t){return function(){t.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},c}(),t.fn.nanoScroller=function(e){return this.each(function(){var i,n;if((n=this.nanoscroller)||(i=t.extend({},M,e),this.nanoscroller=n=new v(this,i)),e&&"object"==typeof e){if(t.extend(n.options,e),null!=e.scrollBottom)return n.scrollBottom(e.scrollBottom);if(null!=e.scrollTop)return n.scrollTop(e.scrollTop);if(e.scrollTo)return n.scrollTo(e.scrollTo);if("bottom"===e.scroll)return n.scrollBottom(0);if("top"===e.scroll)return n.scrollTop(0);if(e.scroll&&e.scroll instanceof t)return n.scrollTo(e.scroll);if(e.stop)return n.stop();if(e.destroy)return n.destroy();if(e.flash)return n.flash()}return n.reset()})},t.fn.nanoScroller.Constructor=v}(jq111,window,document);var Mark={includes:{},globals:{},delimiter:">",compact:!1,_copy:function(t,e){e=e||[];for(var i in t)e[i]=t[i];return e},_size:function(t){return t instanceof Array?t.length:t||0},_iter:function(t,e){this.idx=t,this.size=e,this.length=e,this.sign="#",this.toString=function(){return this.idx+this.sign.length-1}},_pipe:function(t,e){var i,n,o,s;if(i=e.shift()){n=i.split(this.delimiter),o=n.shift().trim();try{s=Mark.pipes[o].apply(null,[t].concat(n)),t=this._pipe(s,e)}catch(r){}}return t},_eval:function(t,e,i){var n,o,s=this._pipe(t,e),r=s,a=-1;if(s instanceof Array)for(s="",n=r.length;++a<n;)o={iter:new this._iter(a,n)},s+=i?Mark.up(i,r[a],o):r[a];else s instanceof Object&&(s=Mark.up(i,r));return s},_test:function(t,e,i,n){var o=Mark.up(e,i,n).split(/\{\{\s*else\s*\}\}/);return(t===!1?o[1]:o[0])||""},_bridge:function(t,e){"."==e&&(e="\\.");var i,n,o="{{\\s*"+e+"([^/}]+\\w*)?}}|{{/"+e+"\\s*}}",s=new RegExp(o,"g"),r=t.match(s)||[],a=0,l=0,c=-1,h=0;for(n=0;n<r.length&&(i=n,c=t.indexOf(r[i],c+1),r[i].indexOf("{{/")>-1?l++:a++,a!==l);n++);return a=t.indexOf(r[0]),l=a+r[0].length,h=c+r[i].length,[t.substring(a,h),t.substring(l,c)]}};Mark.up=function(t,e,i){e=e||{},i=i||{};var n,o,s,r,a,l,c,h,p,u,f=/\{\{(.+?)\}\}/g,d=t.match(f)||[],g=[],v=0,m=0;for(i.pipes&&this._copy(i.pipes,this.pipes),i.includes&&this._copy(i.includes,this.includes),i.globals&&this._copy(i.globals,this.globals),i.delimiter&&(this.delimiter=i.delimiter),void 0!==i.compact&&(this.compact=i.compact);n=d[v++];)if(c=void 0,l="",r=n.indexOf("/}}")>-1,o=n.substr(2,n.length-(r?5:4)),o=o.replace(/`(.+?)`/g,function(t,i){return Mark.up("{{"+i+"}}",e)}),a=0===o.trim().indexOf("if "),g=o.split("|"),g.shift(),o=o.replace(/^\s*if/,"").split("|").shift().trim(),s=a?"if":o.split("|")[0],u=e[o],a&&!g.length&&(g=["notempty"]),!r&&t.indexOf("{{/"+s)>-1&&(c=this._bridge(t,s),n=c[0],l=c[1],v+=n.match(f).length-1),!/^\{\{\s*else\s*\}\}$/.test(n)){if(void 0!==(h=this.globals[o]))c=this._eval(h,g,l);else if(p=this.includes[o])p instanceof Function&&(p=p()),c=this._pipe(Mark.up(p,e,i),g);else if(o.indexOf("#")>-1)i.iter.sign=o,c=this._pipe(i.iter,g);else if("."===o)c=this._pipe(e,g);else if(o.indexOf(".")>-1){for(o=o.split("."),u=Mark.globals[o[0]],u?m=1:(m=0,u=e);u&&m<o.length;)u=u[o[m++]];c=this._eval(u,g,l)}else a?c=this._pipe(u,g):u instanceof Array?c=this._eval(u,g,l):l?c=u?Mark.up(l,u):void 0:e.hasOwnProperty(o)&&(c=this._pipe(u,g));c instanceof Array&&(c=this._eval(c,g,l)),a&&(c=this._test(c,l,e,i)),t=t.replace(n,void 0===c?"???":c)}return this.compact?t.replace(/>\s+</g,"><"):t},Mark.pipes={empty:function(t){return t&&0!==(t+"").trim().length?!1:t},notempty:function(t){return t&&(t+"").trim().length?t:!1},blank:function(t,e){return t||0===t?t:e},more:function(t,e){return Mark._size(t)>e?t:!1},less:function(t,e){return Mark._size(t)<e?t:!1},ormore:function(t,e){return Mark._size(t)>=e?t:!1},orless:function(t,e){return Mark._size(t)<=e?t:!1},between:function(t,e,i){return t=Mark._size(t),t>=e&&i>=t?t:!1},equals:function(t,e){return t==e?t:!1},notequals:function(t,e){return t!=e?t:!1},like:function(t,e){return new RegExp(e,"i").test(t)?t:!1},notlike:function(t,e){return Mark.pipes.like(t,e)?!1:t},upcase:function(t){return String(t).toUpperCase()},downcase:function(t){return String(t).toLowerCase()},capcase:function(t){return t.replace(/(?:^|\s)\S/g,function(t){return t.toUpperCase()})},chop:function(t,e){return t.length>e?t.substr(0,e)+"...":t},tease:function(t,e){var i=t.split(/\s+/);return i.slice(0,e).join(" ")+(i.length>e?"...":"")},trim:function(t){return t.trim()},pack:function(t){return t.trim().replace(/\s{2,}/g," ")},round:function(t){return Math.round(+t)},clean:function(t){return String(t).replace(/<\/?[^>]+>/gi,"")},size:function(t){return t.length},length:function(t){return t.length},reverse:function(t){return[].concat(t).reverse()},join:function(t,e){return t.join(e)},limit:function(t,e,i){return t.slice(+i||0,+e+(+i||0))},split:function(t,e){return t.split(e||",")},choose:function(t,e,i){return t?e:i||""},toggle:function(t,e,i,n){return i.split(",")[e.match(/\w+/g).indexOf(t+"")]||n},sort:function(t,e){var i=function(t,i){return t[e]>i[e]?1:-1};return[].concat(t).sort(e?i:void 0)},fix:function(t,e){return(+t).toFixed(e)},mod:function(t,e){return+t%+e},divisible:function(t,e){return t&&+t%e===0?t:!1},even:function(t){return t&&0===(1&+t)?t:!1},odd:function(t){return t&&1===(1&+t)?t:!1},number:function(t){return parseFloat(t.replace(/[^\-\d\.]/g,""))},url:function(t){return encodeURI(t)},bool:function(t){return!!t},falsy:function(t){return!t},first:function(t){return 0===t.idx},last:function(t){return t.idx===t.size-1},call:function(t,e){return t[e].apply(t,[].slice.call(arguments,2))},set:function(t,e){return Mark.globals[e]=t,""},log:function(t){return console.log(t),t}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof module&&module.exports?module.exports=Mark:"function"==typeof define&&define.amd&&define(function(){return Mark});var guiaTV=function(t){"use strict";function e(){var e,i=t.Deferred();return setTimeout(function(){e=["telecinco","antena3","la2","la1","cuatro","lasexta","historia"],v=[2,4,5,7],i.resolve(e)},3e3),i.promise()}function i(e){{var i=[],n=[];e.length}return t.when.apply(null,t.map(e,function(e,o){var s="datos/"+e+".json";n.push(t.get(s).done(function(t){m[o]=i[o]=t}).fail(function(){m[o]=i[o]=""}))})),t.when.apply(null,n).promise()}function n(e,i){var n=e||d,s=i||m,r={},a='<div id="{{idcanal}}" class="lineaCanal clearfix"></div>';t.each(n,function(t,e){r.idcanal=e;var i=Mark.up(a,r);P.append(i)}),t.each(s,function(e,i){var n=i.canal.nombre,s=t("#"+n);t.each(i.programas,function(t,e){var i=o(t,e);s.append(i)})})}function o(t,e){var i,n,o={},s='<div class="itemPrograma" id="{{id_programa}}" data-url="{{url_ficha}}"style="width:{{dur}}; left:{{diffHoraDia}}; user-selected:none;"><div class="itemProgramaInner {{clase}}"><a href="http://elmundo.es/television/programa/{{id_programa}}" style="display:none;">{{nombre}}</a><span class="categoria">{{categoria}}</span><h4>{{nombre}}</h4>{{if episodio}}<p>{{episodio}}</p>{{/if}}<span class="duracion">{{duracion}}</span><span class="fecha">{{infoHoraDuracion}}</span>{{if fav}}<span class="favorito"><i class="fa fa-bookmark"></i></span>{{/if}}{{if ale}}<span class="alerta"><i class="fa fa-clock-o"></i></span>{{/if}}</div></div>"',r=e.categoria;switch(r){case"1":n="catSeries",i="series";break;case"104":n="catCine",i="cine";break;case"31":n="catMagazines",i="magazines";break;case"20":n="catInformativos",i="informativos";break;case"90":n="catDeportes",i="deportes";break;case"INT_2":n="catConcursos",i="concursos";break;case"INT_1":n="catCorazon",i="corazón"}var a=e.duracion+" mins.",l=Math.floor(S*e.duracion),c=new Date(e.hora_inicio),h=new Date(e.hora_fin),p=Math.floor(c-C);p=Math.floor(p/1e3/60*S);var u=c.getHours();u=leftPad(u,2);var f=c.getMinutes();f=leftPad(f,2);var d=h.getHours();d=leftPad(d,2);var g=h.getMinutes();g=leftPad(g,2);var v=""+u+":"+f+" - "+d+":"+g;if(100*Math.random()<5)var m=!0;if(100*Math.random()<5)var b=!0;o={clase:n,dur:l+"px",diffHoraDia:p+"px",id_programa:e.id_programa,url_ficha:e.url_ficha,infoHoraDuracion:v,duracion:a,categoria:i.toUpperCase(),nombre:e.nombre,episodio:e.episodio,fav:void 0|m,ale:void 0|b};var y=Mark.up(s,o);return y}function s(e){var i=e||d,n={},o='<div class="itemCanal"><img src="http://estaticos.elmundo.es{{icono}}" /></div>';t.each(i,function(t){n.icono=m[t].canal.icono;var e=Mark.up(o,n);k.append(e)})}function r(){var e,i,n=new Date;for(i=0;3>=i;i++){n.setTime(C.getTime()+864e5*i);var o=n.toLocaleDateString("es-ES",{weekday:"long",month:"long",day:"numeric"}),s=i*x*24,r=t("<div/>").text(o).addClass("itemDia").css({left:s});for(_.append(r),b.push([o,s]),e=0;24>e;e++){var a=e+":00",l=i*x*24+e*x,c=t("<div/>").text(a).addClass("itemHoras").css({left:l});_.append(c)}}}function a(){var t={},e='<li class="itemDia" data-px="{{px}}"><a href="javascript://">{{diaText}}</a></li>';b.forEach(function(i){var n=i[0],o=i[1];t={diaText:n,px:o};var s=Mark.up(e,t);D.find("ul").append(s)})}function l(){var e=T.h,i=T.m,n=t(".horaActual").hide().find("p").text(e+":"+i).end().show(),o=parseInt(e)*x+parseInt(i)*S;n.css({left:o})}function c(){var t=w.width()/2,e=parseInt($.css("left"));e=parseInt(t-e),P.stop().animate({left:e+"px"},300),_.stop().animate({left:e+"px"},300);var i=parseInt(T.h)*x,n=parseInt(T.m)*S,o=i+n+e;$.stop().animate({left:o+"px"},300)}function h(){function e(t){console.log(this),t.preventDefault(),this.startTop=this.offsetTop,this.startLeft=this.offsetLeft,this.initialMouseX=t.clientX,this.initialMouseY=t.clientY,g=!0,m=!1,P.on("mouseup touchend",i),P.on("mousemove touchmove",n)}function i(){g&&(g=!1,P.off("mouseup touchend",i),P.off("mousemove touchmove",n))}function n(e){if(g){var i=e.clientX-this.initialMouseX,n=e.clientY-this.initialMouseY;m=Math.abs(i)>2||Math.abs(n)>2;var o=this.startTop+n,s=this.startLeft+i;o>y&&(o=y),p-f>o&&(o=p-f),s>d+Math.abs(I)+50&&(s=d+Math.abs(I)+50),s<u-50-Math.abs(E)&&(s=u-50-Math.abs(E)),t(this).css({top:o+"px",left:s+"px"}),k.css({top:o+"px"}),_.css({left:s+"px"});var r=parseInt(T.h)*x,a=parseInt(T.m)*S,l=r+a+s;$.css({left:l+"px"})}}function o(){var e=parseInt(t(this).css("left"));e=parseInt(u/2-e),h(e)}function s(){var e=-1*parseInt(t(this).data("px"));h(e)}function r(e){if(!m){g=!1;var i=document.elementFromPoint(e.clientX,e.clientY),n=t(i).is(".itemPrograma")?t(i):t(i).closest(".itemPrograma"),o=n.find("a").attr("href"),s=n.attr("id");a(s,o);var r=parseInt(n.css("left"))+n.width()/2;r=parseInt(u/2-r),h(r)}}function a(e){function i(){t("<div/>").text("X").addClass("cierra").appendTo(O).on("click",function(t){t.preventDefault(),n(),this.remove()})}function n(){0===parseInt(O.css("right"))&&O.stop().animate({right:-300},300,"swing")}n(),t.ajax({url:"fichaPrograma.html",data:{progId:e},dataType:"html",cache:!1}).done(function(t){O.find(".contenido").html(t),O.find(".nano").nanoScroller({scroll:"top"}),O.animate({right:0},500,"swing",i)})}function l(e){var i=t(e.currentTarget).attr("class").split(" ")[0];console.log(i),P.hasClass(i)?(P.removeClass(i),t(this).removeClass("activo")):(P.addClass(i),t(this).addClass("activo"))}function c(){v.length>=1&&t.each(v,function(t,e){M.find("li:nth-child("+e+")").trigger("click")})}function h(t){var e=t||0;P.stop().animate({left:e+"px"},300),_.stop().animate({left:e+"px"},300);var i=parseInt(T.h)*x,n=parseInt(T.m)*S,o=i+n+e;$.stop().animate({left:o+"px"},300)}var p=w.height(),u=w.width(),f=P.height(),d=(P.offsetWidth,k.width()),g=!1,m=!1,b=t(".contProgramas > div > div:first-child"),C=[];t.each(b,function(){C.push(this.offsetLeft)});var I=C.min(),H=t(".contProgramas > div > div:last-child"),A=[];t.each(H,function(){A.push(this.offsetLeft+t(this).width())});var E=A.max();w.find(".preload-wrapper").remove(),P.on("mousedown touchstart",e),P.on("click",r),_.on("click",".itemHoras",o),M.on("click","li",l),c(),D.on("click","li",s)}function p(){var e=t("<ul>"),i="datos/listadocanales.json";t.get(i).done(function(i){g=i;var n={},o='<li class="itemLetra"><h4>{{letra}}</h4><div class="divLetra nano"><div class="nano-content"><ul>{{canales}}<li class="itemCanal" data-idcanal="{{id_programa}}"><img src="{{icono}}" />{{nombre_completo}}<span class="check"></span></li>{{/canales}}</ul></div></div></li>';t.each(g,function(t,i){n={letra:t,canales:i};var s=Mark.up(o,n);e.append(s)}),I.html(e),t.each(I.find(".itemCanal"),function(){-1!=d.indexOf(t(this).data("idcanal"))&&t(this).find(".check").addClass("sel")}),I.find(".nano").nanoScroller({scroll:"top",flash:!0,preventPageScrolling:!0})})}function u(){var e=t('<ul class="orden vertical">'),i={},n='<li class="itemCanal" data-idcanal="{{nombre}}"><img src="http://estaticos.elmundo.es{{icono}}" />{{nombre_completo}}<span class="check sel"></span></li>';t.each(m,function(t,o){i=o.canal;
var s=Mark.up(n,i);e.append(s)}),H.find(".nano-content").html(e),H.find(".nano").nanoScroller({scroll:"top",flash:!0,preventPageScrolling:!0})}function f(){function e(){var e=t(this).find(".check"),i=e.hasClass("sel"),n=t(this).data("idcanal"),o=H.find(".itemCanal").filter(function(){return t(this).data("idcanal")===n});i?(e.toggleClass("sel"),o.find(".check").toggleClass("sel")):(e.toggleClass("sel"),o.length?o.find(".check").toggleClass("sel"):t(this).clone().appendTo(H.find("ul"))),H.find(".nano").nanoScroller().nanoScroller({scroll:"bottom"})}function i(e){e.stopPropagation();var i=t(this).parent(".itemCanal").data("idcanal"),n=I.find(".itemCanal").filter(function(){return t(this).data("idcanal")===i});t(this).toggleClass("sel"),n.find(".check").toggleClass("sel")}I.on("click",".itemCanal",e);var n,o=t(".ordenCanales ul.orden").sortable({group:"orden",pullPlaceholder:!0,onDrop:function(e,i,n){var s=o.sortable("serialize").get(),r=(JSON.stringify(s,null," "),t("<li/>").css({height:0}));e.before(r),r.detach(),n(e,i)},onDragStart:function(e,i,o){var s=e.offset(),r=i.rootGroup.pointer,a=t(".ordenCanales .nano .nano-content").get(0).scrollTop;a=Math.floor(a),n={left:r.left-s.left,top:r.top-s.top-a},o(e,i)},onDrag:function(t,e){t.css({left:e.left-n.left,top:e.top-n.top})}});H.on("click",".check",i)}var d=["la1","la2","antena3","cuatro","telecinco","lasexta"],g={},v=[],m=[],b=[],y=35,x=260,S=x/60,C=new Date,T={h:leftPad(C.getHours(),2),m:leftPad(C.getMinutes(),2)};C.setTime(Date.parse("Mon, Jul 14 2014"));var w=t(".viewPort"),M=t(".selectorCategorias"),D=t(".selectorDias"),P=t(".contProgramas"),k=t(".contCanales"),_=t(".barraHoras"),$=t(".horaActual"),O=t(".fichaPrograma"),I=(t(".barrasCanales"),t(".barraLetras")),H=t(".ordenCanales");return function(){{var t=e();t.then(function(t){return d=t,i(d)}).done(function(){s(d),n(d,m),r(),l(),a(),c(),h(),p(),u(),f()})}}(),t.fn.exists=function(){return this.length>0},this}(jq111);Array.prototype.max=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]>t&&(t=this[i]);return t},Array.prototype.min=function(){for(var t=this[0],e=this.length,i=1;e>i;i++)this[i]<t&&(t=this[i]);return t};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS1zb3J0YWJsZS5qcyIsImpxdWVyeS5uYW5vc2Nyb2xsZXIuanMiLCJtYXJrdXAuanMiLCJhcHAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeTJCQSxRQUFBLGNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUVBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxHQUFBLEtBQ0EsR0FBQSxRQUFBLEVBQUEsVUFBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEtBQ0EsRUFBQSxhQUFBLEVBQUEsa0JBRUEsR0FBQSxFQUVBLFVBQUEsT0FBQSxPQUFBLEdBQUEsSUFBQSxPQUFBLEdBQUEsRUFBQSxXQU9BLFFBQUEsWUFBQSxHQUdBLElBQUEsR0FGQSxHQUFBLE9BQUEsR0FBQSxJQUNBLEVBQUEsU0FBQSxPQUFBLE1BQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsSUFBQSxDQUVBLElBREEsR0FBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxPQUNBLElBQUEsSUFBQSxFQUFBLFFBQUEsR0FBQSxNQUFBLFVBQUEsRUFBQSxVQUFBLEVBQUEsT0FBQSxFQUFBLFNBRUEsTUFBQSxNQU9BLFFBQUEsYUFBQSxHQUNBLGFBQUEsRUFBQSxHQUFBLElBU0EsUUFBQSxTQUFBLEVBQUEsR0FFQSxJQURBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQ0EsRUFBQSxJQUFBLENBRUEsT0FBQSxJQzMzQkEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQWlJQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsRUFBQSxLQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQ0EsT0FBQSxHQUFBLEVBR0EsUUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsU0FBQSxVQUdBLEtBRkEsRUFBQSxHQUFBLEVBRUEsS0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsSUFFQSxFQUFBLEVBQUEsSUFDQSxHQUFBLE1BQUEsU0FBQSxFQUFBLElBQUEsZUFBQSxJQUNBLEVBQUEsS0FBQSxTQUFBLEVBQUEsSUFBQSxjQUFBLElBQ0EsRUFBQSxJQUNBLEVBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxFQUFBLGFBQUEsRUFDQSxFQUFBLElBQUEsRUFDQSxFQUFBLElBQUEsRUFBQSxjQUFBLElBS0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLFFBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsS0FJQSxRQUFBLEdBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxJQU1BLEtBSkEsR0FBQSxHQUNBLEVBQUEsRUFBQSxPQUNBLEtBRUEsS0FDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxHQU9BLE9BTEEsR0FBQSxFQUFBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsS0FPQSxRQUFBLEdBQUEsR0FDQSxLQUFBLFFBQUEsRUFBQSxVQUFBLEVBQUEsR0FDQSxLQUFBLGNBRUEsS0FBQSxRQUFBLFlBQ0EsS0FBQSxZQUFBLEVBQUEsTUFBQSxLQUFBLE9BQUEsTUFDQSxLQUFBLFVBQUEsRUFBQSxNQUFBLEtBQUEsS0FBQSxNQUNBLEtBQUEsVUFBQSxFQUFBLE1BQUEsS0FBQSxLQUFBLE1BQ0EsS0FBQSxZQUFBLEVBQUEsS0FBQSxRQUFBLGFBRUEsRUFBQSxnQkFDQSxLQUFBLFFBQUEsY0FBQSxJQW1PQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxFQUNBLEtBQUEsUUFBQSxFQUFBLFVBQUEsRUFBQSxHQUVBLEtBQUEsTUFBQSxFQUFBLElBQUEsS0FBQSxTQUNBLEtBQUEsVUFBQSxLQUFBLFFBQUEsV0FBQSxLQUFBLE1BQ0EsS0FBQSxPQUFBLEtBQUEsVUFBQSxRQUFBLFFBQUEsS0FBQSxVQUFBLFFBQUEsWUFFQSxJQUFBLEdBQUEsS0FBQSxVQUFBLFFBQUEsUUFDQSxNQUFBLE9BQUEsRUFBQSxLQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUEsR0FFQSxLQUFBLE9BQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxPQUFBLEVBQUEsTUFBQSxLQUFBLFNBQUEsT0FFQSxLQUFBLFFBQUEsTUFDQSxLQUFBLE1BQUEsV0FBQSxLQUFBLE1BbGJBLEdBQUEsR0FDQSxHQUVBLE1BQUEsRUFFQSxNQUFBLEVBR0EsUUFBQSxHQUVBLFFBQUEsRUFFQSxVQUFBLEdBRUEsR0FLQSxVQUFBLGFBRUEsY0FBQSxHQUVBLGtCQUFBLFNBRUEsU0FBQSxFQUdBLE1BQUEsRUFFQSxPQUFBLEdBRUEsU0FBQSxHQUVBLGFBQUEsS0FFQSxVQUFBLFdBRUEsYUFBQSxVQUVBLGlCQUFBLGNBSUEsY0FBQSxXQUNBLE9BQUEsR0FJQSxTQUFBLGFBR0EsT0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLElBQUEsSUFPQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FDQSxPQUFBLEVBQUEsU0FDQSxNQUFBLEVBQUEsVUFFQSxFQUFBLFNBQUEsRUFBQSxNQUFBLFFBQUEsY0FDQSxFQUFBLFFBQUEsU0FBQSxFQUFBLE1BQUEsUUFBQSxZQUdBLE9BQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQUEsTUFBQSxRQUFBLGNBQUEsV0FBQSxTQUNBLEVBQUEsUUFBQSxZQUFBLEVBQUEsTUFBQSxRQUFBLFlBSUEsWUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLFNBQUEsTUFBQSw4QkFBQSxRQUNBLEVBQUEsa0JBQ0EsSUFNQSxZQUFBLDRCQUdBLGlCQUFBLEVBR0EsVUFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQSxPQUVBLE9BQUEsSUFDQSxJQUNBLEVBQUEsS0FDQSxFQUFBLFNBQUEsU0FHQSxHQUFBLG9CQUNBLEdBQUEsU0FFQSxJQUlBLFVBQUEsR0FFQSxLQUNBLEVBQUEsRUFDQSxHQUNBLEtBQUEsRUFDQSxJQUFBLEVBQ0EsT0FBQSxFQUNBLE1BQUEsR0FFQSxHQUNBLE1BQUEseUNBQ0EsS0FBQSwwREFDQSxLQUFBLHdDQUNBLE9BQUEsbUJBRUEsRUFBQSxlQTJFQSxHQUFBLElBQUEsU0FBQSxHQVFBLE1BUEEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxRQUFBLElBQ0EsRUFBQSxNQUFBLEtBRUEsRUFBQSxFQUFBLE9BQUEsR0FBQSxHQUFBLElBR0EsRUFBQSxFQUFBLFFBR0EsRUFBQSxXQUNBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxVQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsZUFHQSxLQUFBLEtBQUEsRUFBQSxFQUFBLFFBQUEsUUFBQSxLQUFBLFFBQUEsY0FDQSxLQUFBLGNBQUEsR0FFQSxLQUFBLEtBQUEsR0FBQSxLQUFBLFFBQUEsVUFDQSxLQUFBLFFBQUEsWUFBQSxLQUFBLEtBQUEsRUFBQSxZQUFBLEtBSUEsS0FBQSxXQUFBLEdBQ0EsS0FBQSxnQkFBQSxNQUVBLEtBQUEsa0JBQ0EsS0FBQSxjQUFBLElBRUEsS0FBQSxTQUFBLEdBQ0EsSUFBQSxLQUFBLFNBQUEsQ0FDQSxJQUFBLEtBQUEsWUFBQSxLQUFBLEtBQUEsU0FDQSxNQUVBLE1BQUEsUUFBQSxZQUFBLEtBQUEsS0FBQSxLQUFBLGNBQUEsRUFBQSxZQUFBLEdBQ0EsS0FBQSxLQUFBLE9BQUEsS0FBQSxhQUNBLEtBQUEsVUFBQSxFQUdBLEtBQUEsV0FBQSxHQUVBLEtBQUEsUUFBQSxPQUFBLEtBQUEsS0FDQSxFQUFBLEtBQUEsUUFBQSxLQUFBLEtBQUEsZ0JBQ0EsRUFBQSxPQUNBLEVBRUEsSUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxFQUFBLEtBQUEsY0FDQSxFQUFBLEtBQUEsUUFBQSxZQUVBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsS0FDQSxLQUFBLHNCQUNBLEtBQUEsWUFBQSxTQUNBLEtBQUEsaUJBQUEsS0FHQSxLQUFBLFNBQUEsR0FDQSxLQUFBLGdCQUFBLE9BRUEsS0FBQSxjQUFBLEVBRUEsS0FBQSxXQUVBLEtBQUEsWUFBQSxRQUFBLFFBQUEsR0FDQSxLQUFBLFlBQUEsT0FBQSxLQUFBLE1BQUEsU0FFQSxLQUFBLFFBQUEsU0FBQSxLQUFBLEtBQUEsS0FBQSxjQUFBLEVBQUEsU0FBQSxHQUVBLEtBQUEsUUFBQSxPQUFBLEtBQUEsS0FBQSxLQUFBLGFBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxHQUdBLEtBQUEsa0JBQ0EsS0FBQSxvQkFDQSxLQUFBLGlCQUFBLEtBQUEsY0FBQSxFQUNBLEtBQUEsVUFBQSxJQUdBLGtCQUFBLFNBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxLQUFBLGlCQUFBLEtBQUEsUUFDQSxFQUFBLEtBQUEscUJBQUEsS0FBQSxZQVFBLEtBTEEsR0FBQSxHQUFBLEVBQUEsS0FBQSx5QkFDQSxFQUNBLEdBQ0EsRUFBQSxFQUFBLE9BRUEsS0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxFQUVBLEtBQUEsR0FBQSxLQUFBLFFBQUEsZ0JBQUEsQ0FDQSxHQUFBLEdBQUEsS0FBQSxXQUFBLEVBQ0EsS0FBQSxFQUFBLFNBQUEsQ0FDQSxJQUFBLEtBQUEsbUJBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxxQkFDQSxHQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEdBRUEsR0FBQSxFQUFBLGtCQUFBLEVBQUEsR0FDQSxPQUFBLElBSUEsS0FBQSxnQkFDQSxLQUFBLGNBQUEsSUFFQSxnQkFBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsa0JBQ0EsSUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLE1BR0EsRUFBQSxHQUFBLEtBQUEsYUFDQSxLQUFBLGlCQUFBLEVBQ0EsS0FBQSxjQUFBLEVBQ0EsS0FBQSxRQUFBLFVBQUEsS0FBQSxZQUFBLEVBQUEsS0FFQSx1QkFBQSxXQUdBLE1BRkEsTUFBQSxxQkFDQSxFQUFBLEtBQUEsV0FBQSxLQUFBLHVCQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUEsb0JBQ0EsS0FBQSxxQkFFQSxhQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFBQSxLQUFBLFFBQUEsbUJBQUEsS0FBQSxJQUVBLGlCQUFBLFdBQ0EsR0FBQSxLQUFBLGVBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsT0FBQSxFQUNBLEVBQUEsS0FBQSxXQUFBLEdBQUEscUJBRUEsS0FBQSxLQUFBLFFBQUEsVUFDQSxLQUFBLEtBQ0EsR0FBQSxFQUFBLElBQUEsS0FBQSxXQUFBLEdBQUEsc0JBQUEsR0FBQSxDQUtBLEdBQUEsQ0FDQSxPQUtBLEtBQUEsYUFBQSxFQUVBLE1BQUEsTUFBQSxjQUVBLFdBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFFQSxJQUFBLEtBQUEsbUJBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEtBQUEsbUJBQ0EsTUFBQSxvQkFBQSxLQUFBLGdCQUNBLEtBQUEsZ0JBQUEsRUFHQSxLQUFBLFlBQUEsS0FBQSxRQUNBLEtBQUEsUUFBQSxHQUVBLFlBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUEsRUFDQSxPQUFBLE1BQUEsSUFDQSxLQUFBLElBQUEsS0FBQSxRQUFBLEtBQUEsRUFBQSxNQUNBLEtBQUEsSUFBQSxLQUFBLFFBQUEsSUFBQSxFQUFBLE9BQ0EsS0FBQSxRQUFBLFVBRUEsV0FBQSxTQUFBLEdBQ0EsT0FDQSxLQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsTUFDQSxJQUFBLEVBQUEsT0FBQSxFQUFBLGNBQUEsUUFHQSxnQkFBQSxXQUNBLEdBQUEsR0FBQSxJQUNBLE1BQUEsVUFBQSxLQUFBLFFBQUEsTUFHQSxLQUFBLFdBQ0EsYUFBQSxLQUFBLGtCQUNBLEtBQUEsaUJBQUEsV0FBQSxXQUNBLEVBQUEsVUFBQSxHQUNBLEtBQUEsUUFBQSxTQUdBLE9BQUEsV0FDQSxLQUFBLGtCQUNBLEtBQUEscUJBRUEsZ0JBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEdBQUEsT0FBQSxPQUFBLFNBRUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxhQUdBLGtCQUFBLFdBQ0EsS0FBQSxhQUFBLEdBR0EsZ0JBQUEsV0FDQSxLQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsc0JBR0EsU0FBQSxTQUFBLEdBQ0EsRUFBQSxLQUVBLEtBREEsR0FBQSxHQUFBLEtBQUEsV0FBQSxPQUNBLEtBQ0EsS0FBQSxXQUFBLEdBQUEsU0FBQSxJQUdBLGlCQUFBLFdBQ0EsS0FBQSxvQkFBQSxHQUVBLFNBQUEsV0FDQSxFQUFBLEtBQUEsUUFBQSxPQUFBLElBcUJBLEVBQUEsV0FDQSxTQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsS0FBQSxXQUVBLEtBQUEsV0FDQSxFQUFBLGNBQ0EsS0FBQSxRQUFBLE1BQ0EsS0FBQSxZQUFBLElBQ0EsRUFBQSxTQUFBLEVBQUEsT0FHQSxZQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxPQUNBLGNBQUEsRUFBQSxNQUFBLEdBQUEsRUFBQSxjQUFBLFFBQUEsUUFFQSxrQkFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLG9CQUNBLEVBQ0EsR0FDQSxFQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsVUFDQSxHQUFBLEVBQUEsUUFBQSxlQUNBLEVBQUEsUUFBQSxjQUFBLEVBQUEsS0FBQSxLQUVBLEtBQUEsR0FBQSxFQUVBLE1BREEsR0FBQSxnQkFBQSxLQUFBLEtBQUEsT0FBQSxXQUNBLENBRUEsTUFBQSxLQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxHQUFBLEVBQ0EsS0FBQSxHQUFBLEtBQUEsY0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsa0JBQUEsR0FBQSxrQkFBQSxFQUFBLEVBQ0EsSUFBQSxFQUNBLE9BQUEsTUFDQSxJQUFBLEVBRUEsTUFEQSxNQUFBLGdCQUFBLEVBQUEsSUFDQSxJQUlBLGdCQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEtBQUEsTUFBQSxJQUNBLEVBQUEsS0FBQSxlQUFBLEdBQ0EsRUFBQSxRQUNBLEVBQUEsRUFBQSxhQUNBLEVBQUEsRUFBQSxjQUNBLEVBQUEsRUFBQSxTQUNBLEdBQ0EsS0FBQSxFQUFBLEtBQ0EsTUFBQSxFQUFBLEtBQUEsRUFDQSxJQUFBLEVBQUEsSUFDQSxPQUFBLEVBQUEsSUFBQSxFQUVBLElBQUEsS0FBQSxRQUFBLFNBQUEsQ0FDQSxHQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUNBLEVBQUEsRUFBQSxLQUFBLENBQ0EsSUFDQSxFQUFBLFNBQ0EsRUFBQSxRQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsRUFBQSxNQUNBLENBQ0EsR0FBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFDQSxFQUFBLEVBQUEsTUFBQSxDQUNBLElBQ0EsRUFBQSxTQUNBLEVBQUEsT0FBQSxFQUFBLEdBRUEsRUFBQSxNQUFBLEVBQUEsRUFFQSxLQUFBLGNBQUEsS0FDQSxFQUFBLEdBQ0EsS0FBQSxVQUFBLGdCQUFBLEtBQUEsRUFBQSxFQUFBLElBRUEsa0JBQUEsV0FPQSxNQU5BLE1BQUEsaUJBQ0EsS0FBQSxNQUFBLEtBQUEsYUFBQSxLQUFBLEdBQUEsUUFBQSxPQUNBLFNBQUEsS0FBQSxNQUFBLFFBQUEsaUJBQUEsTUFBQSxLQUFBLE1BQUEsUUFBQSxhQUFBLEtBQ0EsTUFDQSxFQUFBLEtBQUEsTUFBQSxLQUFBLGtCQUFBLEtBQUEsUUFBQSxZQUVBLEtBQUEsZ0JBRUEsb0JBQUEsV0FDQSxHQUFBLEdBQ0EsRUFBQSxLQUFBLEVBT0EsT0FIQSxHQURBLGFBQUEsRUFBQSxJQUFBLGFBQUEsYUFBQSxFQUFBLElBQUEsYUFBQSxVQUFBLEVBQUEsSUFBQSxZQUNBLEVBRUEsRUFBQSxnQkFHQSxjQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsUUFBQSxRQUFBLEtBQUEsa0JBQUEsSUFFQSxrQkFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxLQUFBLE1BQUEsR0FBQSxFQUNBLElBQUEsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLEtBQUEsYUFBQSxLQUFBLE1BQUEsR0FBQSxZQUdBLElBRkEsR0FBQSxFQUVBLEVBQUEsR0FBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLFVBQUEsS0FBQSxTQUNBLFVBQUEsS0FBQSxVQUNBLE1BQUEsS0FFQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEtBQUEsR0FBQSxNQUVBLEVBQUEsS0FBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLEdBRUEsTUFBQSxJQUVBLGFBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEtBQUEsVUFBQSxRQUNBLEVBQUEsRUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLEVBQUEsV0FNQSxPQUpBLEdBQUEsRUFBQSxHQUNBLElBQ0EsRUFBQSxFQUFBLEtBQUEsSUFFQSxFQUFBLFNBQUEsSUFFQSxXQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxPQUFBLFlBRUEsRUFBQSxLQUFBLGFBQUEsRUFBQSxHQUFBLElBQUEsS0FBQSxRQUFBLFNBQUEsSUFBQSxXQUNBLE1BQUEsR0FBQSxXQUFBLEVBQUEsT0FBQSxLQUNBLEtBRUEsT0FBQSxNQUFBLFVBQUEsUUFBQSxVQUFBLEVBQUEsRUFBQSxJQUVBLFNBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxLQUFBLFVBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsRUFDQSxJQUNBLEVBQUEsU0FBQSxLQUdBLEVBQUEsT0FFQSxpQkFBQSxXQUNBLEtBQUEsZUFBQSxHQUVBLFNBQUEsV0FDQSxHQUFBLEdBQUEsSUFFQSxNQUFBLE9BQUEsSUFBQSxFQUFBLE1BQUEsS0FBQSxRQUNBLEtBQUEsR0FBQSxXQUFBLEdBRUEsS0FBQSxRQUFBLE9BQ0EsS0FBQSxNQUFBLFdBQUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FHQSxFQUFBLEtBQUEsS0FBQSxVQUFBLFdBQ0EsRUFBQSxXQUFBLEtBQUEsTUFLQSxJQUFBLElBQ0EsT0FBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEtBR0EsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxVQUFBLEtBR0EsVUFBQSxXQUNBLE1BQUEsTUFBQSxXQUFBLEtBQUEsSUFBQSxJQUVBLFFBQUEsV0FDQSxLQUFBLFNBQUEsU0FBQSxHQUNBLEVBQUEsc0JBR0EsUUFBQSxXQUNBLEtBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxjQUtBLEdBQUEsT0FBQSxFQUFBLFVBQUEsR0FTQSxFQUFBLEdBQUEsR0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLE1BQUEsVUFBQSxNQUFBLEtBQUEsVUFBQSxFQUVBLE9BQUEsTUFBQSxJQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFDQSxFQUFBLEVBQUEsS0FBQSxFQUVBLE9BQUEsSUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxJQUFBLE1BQ0EsR0FBQSxJQUFBLEdBQ0EsZ0JBQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxJQUVBLFVBSUEsTUFBQSxPQUFBLFlDenFCQSxTQUFBLEVBQUEsRUFBQSxHQUNBLFlBQ0EsSUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUNBLElBUUEsVUFBQSxZQVFBLFlBQUEsY0FRQSxhQUFBLGVBUUEsb0JBQUEsRUFTQSxzQkFBQSxFQVFBLGVBQUEsRUFRQSxlQUFBLEVBUUEsV0FBQSxLQVFBLGdCQUFBLEdBUUEsZ0JBQUEsS0FRQSxnQkFBQSxLQVFBLGNBQUEsTUFVQSxFQUFBLFlBU0EsRUFBQSxTQVFBLEVBQUEsWUFRQSxFQUFBLGFBU0EsRUFBQSxZQVFBLEVBQUEsYUFTQSxFQUFBLFVBUUEsRUFBQSxTQVNBLEVBQUEsT0FTQSxFQUFBLFFBU0EsRUFBQSxLQVNBLEVBQUEsV0FTQSxFQUFBLGlCQVNBLEVBQUEsT0FTQSxFQUFBLFFBU0EsRUFBQSxVQVNBLEVBQUEsUUFTQSxFQUFBLFlBU0EsRUFBQSxnQ0FBQSxFQUFBLFVBQUEsU0FBQSxXQUFBLEtBQUEsRUFBQSxVQUFBLGFBQUEsRUFBQSxjQVNBLEVBQUEsS0FDQSxFQUFBLEVBQUEsc0JBQ0EsRUFBQSxFQUFBLHFCQUNBLEVBQUEsRUFBQSxjQUFBLE9BQUEsTUFDQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FFQSxLQURBLEdBQUEsSUFBQSxVQUFBLE9BQUEsTUFBQSxNQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLEVBR0EsR0FGQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FBQSxXQUNBLElBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxPQUFBLEVBQUEsRUFBQSxHQUFBLE9BQUEsRUFHQSxRQUFBLEtBRUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLEdBQ0EsRUFFQSxLQUFBLEVBQ0EsRUFFQSxFQUFBLEVBQUEsT0FBQSxHQUFBLGNBQUEsRUFBQSxPQUFBLElBRUEsRUFBQSxFQUFBLGFBQ0EsRUFBQSxLQUFBLEVBU0EsRUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLENBV0EsT0FWQSxHQUFBLEVBQUEsY0FBQSxPQUNBLEVBQUEsRUFBQSxNQUNBLEVBQUEsU0FBQSxXQUNBLEVBQUEsTUFBQSxRQUNBLEVBQUEsT0FBQSxRQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsSUFBQSxVQUNBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsRUFBQSxFQUFBLFlBQUEsRUFBQSxZQUNBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsR0FFQSxFQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsQ0FHQSxPQUZBLEdBQUEsRUFBQSxVQUFBLFdBQ0EsRUFBQSw4QkFBQSxLQUFBLEtBSUEsRUFBQSxtQkFBQSxLQUFBLEdBQ0EsSUFDQSxFQUFBLEVBQUEsR0FBQSxRQUFBLE9BQUEsS0FFQSxJQUFBLEVBQUEsS0FOQSxHQWVBLEVBQUEsV0FDQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEtBQUEsR0FBQSxFQUNBLEtBQUEsUUFBQSxFQUNBLElBQUEsRUFBQSxLQUNBLEtBQUEsSUFBQSxFQUFBLEtBQUEsSUFDQSxLQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsaUJBQUEsR0FDQSxLQUFBLElBQUEsRUFBQSxLQUFBLFFBQUEsZUFBQSxHQUNBLEtBQUEsS0FBQSxLQUFBLElBQUEsS0FBQSxRQUNBLEtBQUEsU0FBQSxLQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsY0FDQSxLQUFBLFNBQUEsS0FBQSxXQUFBLEtBQUEsUUFBQSxVQUFBLEdBQ0EsS0FBQSxRQUFBLEtBQUEsU0FBQSxHQUNBLEtBQUEsaUJBQUEsRUFDQSxLQUFBLFFBQUEsb0JBQUEsTUFBQSxLQUFBLEdBQUEsTUFBQSx3QkFDQSxLQUFBLGtCQUVBLEtBQUEsV0FFQSxLQUFBLGVBQ0EsS0FBQSxZQUNBLEtBQUEsUUFzaUJBLE1BemhCQSxHQUFBLFVBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxLQUFBLFNBR0EsR0FBQSxFQUFBLE9BQUEsR0FDQSxJQUFBLEdBQUEsRUFBQSxjQUFBLE9BQUEsR0FBQSxJQUFBLEdBQUEsRUFBQSxjQUFBLE9BQUEsSUFDQSxFQUFBLHFCQUVBLElBQUEsRUFBQSxPQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsZ0JBQUEsRUFBQSxjQUFBLFdBQ0EsUUFFQSxJQUFBLEdBQUEsRUFBQSxjQUFBLFdBQUEsR0FBQSxJQUFBLEdBQUEsRUFBQSxjQUFBLFdBQUEsSUFDQSxFQUFBLG1CQVlBLEVBQUEsVUFBQSxnQkFBQSxXQUNBLEtBQUEsU0FBQSxLQUNBLHdCQUFBLFVBRUEsS0FBQSxvQkFBQSxFQUNBLEtBQUEsVUFBQSxHQVdBLEVBQUEsVUFBQSxtQkFBQSxXQUNBLEdBQUEsR0FBQSxDQUNBLEdBQUEsS0FBQSxRQUNBLEtBQUEsYUFBQSxFQUFBLGFBQUEsRUFBQSxhQUNBLEtBQUEsY0FBQSxLQUFBLGtCQUFBLEVBQ0EsS0FBQSxpQkFBQSxFQUFBLFVBQ0EsRUFBQSxLQUFBLGlCQUFBLEtBQUEsaUJBQUEsT0FBQSxLQUFBLGlCQUFBLEtBQUEsaUJBQUEsS0FBQSxPQUNBLEtBQUEsaUJBQUEsS0FBQSxpQkFDQSxTQUFBLEdBQ0EsS0FBQSxJQUFBLFFBQUEsVUFDQSxTQUFBLEtBQUEsaUJBQ0EsUUFBQSxLQUFBLGFBQ0EsVUFBQSxJQUdBLEtBQUEscUJBQ0EsS0FBQSxhQUFBLEtBQUEsV0FBQSxLQUFBLGFBQ0EsS0FBQSxVQUFBLElBQUEsS0FBQSxhQUFBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLGFBQUEsS0FBQSxlQVlBLEVBQUEsVUFBQSxrQkFBQSxXQUNBLEdBQUEsRUFDQSxJQUNBLEtBQ0EsRUFBQSxHQUFBLGdCQUFBLEtBQUEsVUFBQSxPQUVBLEdBQ0EsSUFBQSxLQUFBLFdBR0EsR0FDQSxHQUFBLEtBQUEsV0FDQSxFQUFBLEtBQUEsV0FFQSxLQUFBLFVBQUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxZQUVBLE1BREEsR0FBQSxVQUFBLEtBQ0EsRUFBQSxPQUFBLElBQUEsS0FFQSxRQUVBLEtBQUEsT0FBQSxJQUFBLElBV0EsRUFBQSxVQUFBLGFBQUEsV0FDQSxLQUFBLFFBQ0EsS0FBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBU0EsTUFSQSxHQUFBLGdCQUFBLEVBQ0EsRUFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsU0FBQSxJQUNBLEVBQUEsT0FBQSxHQUFBLEVBQUEsVUFDQSxFQUFBLFFBQUEsR0FFQSxFQUFBLEtBQUEsU0FBQSxVQUNBLEVBQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsS0FBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxPQUFBLEtBQ0EsSUFFQSxNQUNBLEtBQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQVFBLE1BUEEsR0FBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsU0FBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxFQUFBLGNBQ0EsRUFBQSxTQUNBLEVBQUEsa0JBQUEsRUFBQSxjQUFBLEVBQUEsZ0JBQUEsRUFBQSxhQUNBLEVBQUEsSUFBQSxRQUFBLGFBQ0EsSUFBQSxFQUFBLGtCQUFBLElBQUEsRUFBQSxlQUNBLEVBQUEsSUFBQSxRQUFBLGNBRUEsSUFFQSxNQUNBLEdBQUEsU0FBQSxHQUNBLE1BQUEsWUFLQSxNQUpBLEdBQUEsZ0JBQUEsRUFDQSxFQUFBLEtBQUEsWUFBQSxVQUNBLEVBQUEsSUFBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsT0FBQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxPQUFBLEtBQ0EsSUFFQSxNQUNBLE9BQUEsU0FBQSxHQUNBLE1BQUEsWUFDQSxFQUFBLFVBRUEsTUFDQSxTQUFBLFNBQUEsR0FDQSxNQUFBLFVBQUEsR0FJQSxNQUhBLEdBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxjQUFBLFFBQUEsR0FBQSxFQUFBLGFBQ0EsRUFBQSxTQUNBLEVBQUEsT0FBQSxLQUFBLElBQ0EsSUFFQSxNQUNBLE9BQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLEVBQUEscUJBQ0EsRUFBQSxpQkFHQSxFQUFBLHFCQUNBLEVBQUEsUUFBQSxFQUFBLFVBQ0EsRUFBQSxxQkFFQSxNQUFBLElBR0EsRUFBQSxrQkFBQSxFQUFBLGNBQ0EsRUFBQSxRQUFBLHNCQUNBLEVBQUEsaUJBQUEsRUFBQSxHQUVBLEVBQUEsZ0JBQUEsRUFBQSxjQUNBLEVBQUEsSUFBQSxRQUFBLGNBRUEsSUFBQSxFQUFBLG1CQUNBLEVBQUEsUUFBQSxzQkFDQSxFQUFBLGlCQUFBLEVBQUEsR0FFQSxJQUFBLEVBQUEsZUFDQSxFQUFBLElBQUEsUUFBQSxrQkFJQSxNQUNBLE1BQUEsU0FBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLEdBQUEsRUFDQSxJQUFBLE1BQUEsRUFRQSxNQUxBLEdBQUEsRUFBQSxPQUFBLEVBQUEsWUFBQSxFQUFBLGVBQUEsRUFBQSxjQUFBLGFBQUEsRUFBQSxRQUFBLEVBQUEsZ0JBQUEsRUFBQSxjQUFBLE9BQ0EsSUFDQSxFQUFBLFVBQUEsRUFBQSxHQUVBLEVBQUEsVUFDQSxJQUVBLE1BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxVQUFBLEdBQ0EsR0FBQSxFQUNBLElBQUEsRUFBQSxlQUdBLE1BQUEsTUFBQSxFQUFBLFNBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxRQUFBLEdBQUEsTUFBQSxFQUFBLFdBREEsU0FJQSxRQVdBLEVBQUEsVUFBQSxVQUFBLFdBQ0EsR0FBQSxFQUNBLE1BQUEsZUFDQSxFQUFBLEtBQUEsT0FDQSxLQUFBLFFBQUEsZUFDQSxLQUFBLElBQUEsS0FBQSxFQUFBLEVBQUEsSUFFQSxLQUFBLHFCQUNBLEtBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxJQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBRUEsS0FBQSxTQUFBLEtBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsS0FVQSxFQUFBLFVBQUEsYUFBQSxXQUNBLEdBQUEsRUFDQSxHQUFBLEtBQUEsT0FDQSxLQUFBLElBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLHFCQUNBLEtBQUEsT0FBQSxTQUNBLEtBQUEsS0FBQSxVQUVBLEtBQUEsU0FBQSxPQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBV0EsRUFBQSxVQUFBLFNBQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBdUJBLE9BdEJBLEdBQUEsS0FBQSxRQUNBLEVBQUEsRUFBQSxVQUFBLEVBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxjQUNBLEVBQUEsS0FBQSxJQUFBLFNBQUEsSUFBQSxJQUFBLFFBQUEsRUFBQSxTQUFBLElBQUEsR0FBQSxRQUNBLEtBQUEsSUFBQSxPQUFBLGVBQUEsRUFBQSxpQkFBQSxFQUFBLGNBRUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxTQUFBLElBQUEsR0FDQSxLQUFBLE9BQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxHQUNBLElBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxpQkFBQSxLQUFBLFFBQUEsTUFBQSxpQkFBQSxpQkFBQSxRQUFBLFlBQUEsSUFDQSxHQUNBLE1BQUEsSUFDQSxjQUFBLEVBQUEsS0FFQSxJQUNBLEdBQ0EsT0FBQSxHQUVBLEtBQUEsSUFBQSxTQUFBLGtCQUVBLE1BQUEsR0FDQSxLQUFBLFNBQUEsSUFBQSxHQUVBLE1BU0EsRUFBQSxVQUFBLFFBQUEsV0FDQSxLQUFBLFNBQUEsRUFDQSxLQUFBLG9CQUNBLEtBQUEsS0FBQSxPQUVBLEtBQUEsYUFZQSxFQUFBLFVBQUEsTUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQ0EsT0FBQSxNQUFBLG9CQUNBLEtBQUEsY0FBQSxLQUFBLFFBQUEsYUFDQSxTQUVBLEtBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxRQUFBLFdBQUEsUUFDQSxLQUFBLFdBQUEsT0FFQSxLQUFBLFNBQ0EsS0FBQSxVQUVBLEVBQUEsS0FBQSxRQUNBLEVBQUEsRUFBQSxNQUNBLEVBQUEsRUFBQSxVQUNBLEdBQ0EsS0FBQSxTQUFBLEtBQ0EsT0FBQSxLQUFBLFNBQUEsV0FHQSxFQUFBLEVBQUEsYUFBQSxFQUNBLEVBQUEsU0FBQSxLQUFBLElBQUEsSUFBQSxjQUFBLElBQ0EsRUFBQSxJQUNBLEtBQUEsSUFBQSxPQUFBLElBQ0EsS0FBQSxJQUFBLE9BQUEsRUFBQSxhQUFBLEVBQUEsRUFBQSxFQUFBLGVBRUEsRUFBQSxLQUFBLEtBQUEsYUFBQSxHQUNBLEVBQUEsU0FBQSxLQUFBLEtBQUEsSUFBQSxPQUFBLElBQ0EsRUFBQSxTQUFBLEtBQUEsS0FBQSxJQUFBLFVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLGdCQUNBLEVBQUEsS0FBQSxRQUFBLGdCQUNBLE1BQUEsS0FBQSxRQUFBLGlCQUFBLEVBQUEsS0FBQSxRQUFBLGtCQUNBLEVBQUEsS0FBQSxRQUFBLGlCQUVBLElBQUEsR0FBQSxFQUFBLFlBQUEsSUFDQSxHQUFBLEdBRUEsS0FBQSxhQUFBLEVBQUEsRUFDQSxLQUFBLGNBQUEsRUFDQSxLQUFBLFdBQUEsRUFDQSxLQUFBLGdCQUFBLEVBQ0EsS0FBQSxhQUFBLEVBQ0EsS0FBQSxRQUFBLEVBQ0EsS0FBQSxPQUFBLE9BQUEsR0FDQSxLQUFBLE9BQUEsU0FDQSxLQUFBLEtBQUEsT0FDQSxLQUFBLFVBQUEsRUFDQSxFQUFBLGVBQUEsRUFBQSxjQUFBLEtBQUEsS0FBQSxhQUFBLElBQUEsRUFBQSxjQUFBLElBQUEsR0FDQSxLQUFBLEtBQUEsT0FDQSxLQUFBLFVBQUEsR0FDQSxLQUFBLEdBQUEsZUFBQSxFQUFBLGNBQUEsSUFBQSxFQUNBLEtBQUEsT0FBQSxPQUVBLEtBQUEsT0FBQSxPQUVBLEtBQUEsS0FBQSxLQUNBLFFBQUEsS0FBQSxRQUFBLGNBQUEsRUFBQSxHQUNBLFdBQUEsS0FBQSxRQUFBLGNBQUEsVUFBQSxLQUVBLEVBQUEsS0FBQSxTQUFBLElBQUEsYUFDQSxXQUFBLEdBQUEsYUFBQSxLQUNBLEVBQUEsU0FBQSxLQUFBLFNBQUEsSUFBQSxTQUFBLElBQ0EsR0FDQSxLQUFBLFNBQUEsS0FDQSxNQUFBLEdBQ0EsWUFBQSxLQUlBLE9BV0EsRUFBQSxVQUFBLE9BQUEsV0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFFBQUEsS0FBQSxJQUFBLEVBQUEsS0FBQSxTQUNBLEtBQUEsUUFBQSxLQUFBLElBQUEsS0FBQSxhQUFBLEtBQUEsU0FDQSxLQUFBLFNBQUEsVUFBQSxLQUFBLGFBQUEsS0FBQSxRQUFBLEtBQUEsY0FDQSxLQUFBLHFCQUNBLEtBQUEscUJBQ0EsS0FBQSxxQkFFQSxNQVZBLFFBdUJBLEVBQUEsVUFBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsVUFHQSxLQUFBLFNBQUEsVUFBQSxLQUFBLGNBQUEsS0FBQSxTQUFBLFNBQUEsR0FBQSxRQUFBLEdBQ0EsS0FBQSxPQUFBLFVBQ0EsTUFMQSxRQWtCQSxFQUFBLFVBQUEsVUFBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLFVBR0EsS0FBQSxTQUFBLFdBQUEsR0FBQSxRQUFBLEdBQ0EsS0FBQSxPQUFBLFVBQ0EsTUFMQSxRQWtCQSxFQUFBLFVBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxNQUFBLFVBR0EsS0FBQSxVQUFBLEtBQUEsSUFBQSxLQUFBLEdBQUEsSUFBQSxHQUFBLFdBQ0EsTUFKQSxRQWlCQSxFQUFBLFVBQUEsS0FBQSxXQVVBLE1BVEEsSUFBQSxLQUFBLFlBQ0EsRUFBQSxLQUFBLFdBQ0EsS0FBQSxVQUFBLE1BRUEsS0FBQSxTQUFBLEVBQ0EsS0FBQSxlQUNBLEtBQUEsb0JBQ0EsS0FBQSxLQUFBLE9BRUEsTUFZQSxFQUFBLFVBQUEsUUFBQSxXQWlCQSxNQWhCQSxNQUFBLFNBQ0EsS0FBQSxRQUVBLEtBQUEsb0JBQUEsS0FBQSxLQUFBLFFBQ0EsS0FBQSxLQUFBLFNBRUEsR0FDQSxLQUFBLFNBQUEsT0FBQSxJQUVBLEtBQUEsU0FBQSxXQUFBLFlBQ0EsS0FBQSxJQUFBLFNBQUEsbUJBQ0EsS0FBQSxJQUFBLFlBQUEsaUJBQ0EsS0FBQSxTQUFBLEtBQ0EsTUFBQSxNQUdBLE1BYUEsRUFBQSxVQUFBLE1BQUEsV0FDQSxPQUFBLEtBQUEsb0JBR0EsS0FBQSxVQUdBLEtBQUEsUUFDQSxLQUFBLEtBQUEsU0FBQSxXQUNBLFdBQUEsU0FBQSxHQUNBLE1BQUEsWUFDQSxFQUFBLEtBQUEsWUFBQSxhQUVBLE1BQUEsS0FBQSxRQUFBLFlBQ0EsTUFiQSxRQWdCQSxLQUdBLEVBQUEsR0FBQSxhQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsS0FBQSxXQUNBLEdBQUEsR0FBQSxDQUtBLEtBSkEsRUFBQSxLQUFBLGdCQUNBLEVBQUEsRUFBQSxVQUFBLEVBQUEsR0FDQSxLQUFBLGFBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxJQUVBLEdBQUEsZ0JBQUEsR0FBQSxDQUVBLEdBREEsRUFBQSxPQUFBLEVBQUEsUUFBQSxHQUNBLE1BQUEsRUFBQSxhQUNBLE1BQUEsR0FBQSxhQUFBLEVBQUEsYUFFQSxJQUFBLE1BQUEsRUFBQSxVQUNBLE1BQUEsR0FBQSxVQUFBLEVBQUEsVUFFQSxJQUFBLEVBQUEsU0FDQSxNQUFBLEdBQUEsU0FBQSxFQUFBLFNBRUEsSUFBQSxXQUFBLEVBQUEsT0FDQSxNQUFBLEdBQUEsYUFBQSxFQUVBLElBQUEsUUFBQSxFQUFBLE9BQ0EsTUFBQSxHQUFBLFVBQUEsRUFFQSxJQUFBLEVBQUEsUUFBQSxFQUFBLGlCQUFBLEdBQ0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxPQUVBLElBQUEsRUFBQSxLQUNBLE1BQUEsR0FBQSxNQUVBLElBQUEsRUFBQSxRQUNBLE1BQUEsR0FBQSxTQUVBLElBQUEsRUFBQSxNQUNBLE1BQUEsR0FBQSxRQUdBLE1BQUEsR0FBQSxXQUdBLEVBQUEsR0FBQSxhQUFBLFlBQUEsR0FDQSxNQUFBLE9BQUEsU0M5N0JBLElBQUEsT0FFQSxZQUdBLFdBR0EsVUFBQSxJQUdBLFNBQUEsRUFHQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FFQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsR0FBQSxFQUFBLEVBR0EsT0FBQSxJQUlBLE1BQUEsU0FBQSxHQUNBLE1BQUEsYUFBQSxPQUFBLEVBQUEsT0FBQSxHQUFBLEdBSUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsRUFDQSxLQUFBLEtBQUEsRUFDQSxLQUFBLE9BQUEsRUFDQSxLQUFBLEtBQUEsSUFHQSxLQUFBLFNBQUEsV0FDQSxNQUFBLE1BQUEsSUFBQSxLQUFBLEtBQUEsT0FBQSxJQUtBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxDQUdBLElBQUEsRUFBQSxFQUFBLFFBQUEsQ0FHQSxFQUFBLEVBQUEsTUFBQSxLQUFBLFdBR0EsRUFBQSxFQUFBLFFBQUEsTUFFQSxLQUVBLEVBQUEsS0FBQSxNQUFBLEdBQUEsTUFBQSxNQUFBLEdBQUEsT0FBQSxJQUdBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FFQSxNQUFBLEtBS0EsTUFBQSxJQUlBLE1BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUdBLEdBQ0EsRUFKQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsRUFJQSxJQUFBLFlBQUEsT0FJQSxJQUhBLEVBQUEsR0FDQSxFQUFBLEVBQUEsU0FFQSxFQUFBLEdBQ0EsR0FDQSxLQUFBLEdBQUEsTUFBQSxNQUFBLEVBQUEsSUFFQSxHQUFBLEVBQUEsS0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUdBLGFBQUEsVUFDQSxFQUFBLEtBQUEsR0FBQSxFQUFBLEdBR0EsT0FBQSxJQUlBLE1BQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUVBLEdBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxxQkFHQSxRQUFBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLElBSUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLElBQ0EsRUFBQSxNQUNBLElBR0EsR0FDQSxFQUpBLEVBQUEsU0FBQSxFQUFBLHNCQUFBLEVBQUEsU0FDQSxFQUFBLEdBQUEsUUFBQSxFQUFBLEtBQ0EsRUFBQSxFQUFBLE1BQUEsT0FHQSxFQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsR0FDQSxFQUFBLENBRUEsS0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLEdBRUEsRUFBQSxHQUFBLFFBQUEsT0FBQSxHQUNBLElBR0EsSUFHQSxJQUFBLEdBWEEsS0FxQkEsTUFMQSxHQUFBLEVBQUEsUUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxPQUNBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFHQSxFQUFBLFVBQUEsRUFBQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEtBS0EsTUFBQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxNQUNBLEVBQUEsS0FHQSxJQUlBLEdBRUEsRUFFQSxFQUlBLEVBRUEsRUFFQSxFQUVBLEVBRUEsRUFFQSxFQUVBLEVBeEJBLEVBQUEsaUJBRUEsRUFBQSxFQUFBLE1BQUEsT0FRQSxLQWdCQSxFQUFBLEVBQ0EsRUFBQSxDQTRCQSxLQXpCQSxFQUFBLE9BQ0EsS0FBQSxNQUFBLEVBQUEsTUFBQSxLQUFBLE9BSUEsRUFBQSxVQUNBLEtBQUEsTUFBQSxFQUFBLFNBQUEsS0FBQSxVQUlBLEVBQUEsU0FDQSxLQUFBLE1BQUEsRUFBQSxRQUFBLEtBQUEsU0FJQSxFQUFBLFlBQ0EsS0FBQSxVQUFBLEVBQUEsV0FJQSxTQUFBLEVBQUEsVUFDQSxLQUFBLFFBQUEsRUFBQSxTQUlBLEVBQUEsRUFBQSxNQTZCQSxHQTVCQSxFQUFBLE9BQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxRQUFBLE9BQUEsR0FDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsUUFBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxHQUFBLEtBQUEsRUFBQSxLQUFBLEtBRUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxRQUFBLE9BQ0EsRUFBQSxFQUFBLE1BQUEsS0FDQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFFBQUEsU0FBQSxJQUFBLE1BQUEsS0FBQSxRQUFBLE9BQ0EsRUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEtBQUEsR0FDQSxFQUFBLEVBQUEsR0FHQSxJQUFBLEVBQUEsU0FDQSxHQUFBLGNBSUEsR0FBQSxFQUFBLFFBQUEsTUFBQSxHQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUNBLEdBQUEsRUFBQSxNQUFBLEdBQUEsT0FBQSxJQUlBLHVCQUFBLEtBQUEsR0FBQSxDQUtBLEdBQUEsVUFBQSxFQUFBLEtBQUEsUUFBQSxJQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxPQUlBLElBQUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxZQUFBLFlBQ0EsRUFBQSxLQUVBLEVBQUEsS0FBQSxNQUFBLEtBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxPQUlBLElBQUEsRUFBQSxRQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxPQUlBLElBQUEsTUFBQSxFQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsT0FJQSxJQUFBLEVBQUEsUUFBQSxLQUFBLEdBQUEsQ0FhQSxJQVpBLEVBQUEsRUFBQSxNQUFBLEtBQ0EsRUFBQSxLQUFBLFFBQUEsRUFBQSxJQUVBLEVBQ0EsRUFBQSxHQUdBLEVBQUEsRUFDQSxFQUFBLEdBSUEsR0FBQSxFQUFBLEVBQUEsUUFDQSxFQUFBLEVBQUEsRUFBQSxLQUdBLEdBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxPQUlBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUlBLFlBQUEsT0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsR0FJQSxFQUNBLEVBQUEsRUFBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLE9BSUEsRUFBQSxlQUFBLEtBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUlBLGFBQUEsU0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsSUFJQSxJQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLElBSUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxHQUdBLE1BQUEsTUFBQSxRQUFBLEVBQUEsUUFBQSxTQUFBLE1BQUEsR0FJQSxLQUFBLE9BQ0EsTUFBQSxTQUFBLEdBQ0EsTUFBQSxJQUFBLEtBQUEsRUFBQSxJQUFBLE9BQUEsUUFBQSxFQUFBLEdBRUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsSUFBQSxPQUFBLE9BQUEsR0FBQSxHQUVBLE1BQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxJQUFBLElBQUEsRUFBQSxFQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxHQUFBLEVBQUEsR0FBQSxHQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxNQUFBLE1BQUEsR0FBQSxFQUFBLEdBQUEsR0FFQSxPQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsTUFBQSxJQUFBLEVBQUEsR0FBQSxHQUVBLFFBQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsS0FBQSxNQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsVUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsRUFBQSxHQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLElBQUEsUUFBQSxFQUFBLEtBQUEsS0FBQSxHQUFBLEdBQUEsR0FFQSxRQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsTUFBQSxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsR0FFQSxPQUFBLFNBQUEsR0FDQSxNQUFBLFFBQUEsR0FBQSxlQUVBLFNBQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLGVBRUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLFFBQUEsY0FBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLGlCQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLE9BQUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLE1BQUEsR0FFQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsTUFDQSxPQUFBLEdBQUEsTUFBQSxFQUFBLEdBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsS0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsUUFFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxRQUFBLFVBQUEsTUFFQSxNQUFBLFNBQUEsR0FDQSxNQUFBLE1BQUEsT0FBQSxJQUVBLE1BQUEsU0FBQSxHQUNBLE1BQUEsUUFBQSxHQUFBLFFBQUEsZUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLE9BQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxRQUVBLFFBQUEsU0FBQSxHQUNBLFNBQUEsT0FBQSxHQUFBLFdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxJQUVBLE1BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxHQUFBLEdBQUEsSUFBQSxHQUFBLEtBRUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxHQUFBLE1BRUEsT0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLEdBQUEsSUFFQSxPQUFBLFNBQUEsRUFBQSxFQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsTUFBQSxRQUFBLFFBQUEsRUFBQSxNQUFBLEdBRUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FFQSxVQUFBLE9BQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxTQUVBLElBQUEsU0FBQSxFQUFBLEdBQ0EsUUFBQSxHQUFBLFFBQUEsSUFFQSxJQUFBLFNBQUEsRUFBQSxHQUNBLE9BQUEsR0FBQSxHQUVBLFVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsR0FFQSxLQUFBLFNBQUEsR0FDQSxNQUFBLElBQUEsS0FBQSxHQUFBLEdBQUEsR0FBQSxHQUVBLElBQUEsU0FBQSxHQUNBLE1BQUEsSUFBQSxLQUFBLEdBQUEsR0FBQSxHQUFBLEdBRUEsT0FBQSxTQUFBLEdBQ0EsTUFBQSxZQUFBLEVBQUEsUUFBQSxhQUFBLE1BRUEsSUFBQSxTQUFBLEdBQ0EsTUFBQSxXQUFBLElBRUEsS0FBQSxTQUFBLEdBQ0EsUUFBQSxHQUVBLE1BQUEsU0FBQSxHQUNBLE9BQUEsR0FFQSxNQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsRUFBQSxLQUVBLEtBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxNQUFBLEVBQUEsS0FBQSxHQUVBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsTUFBQSxLQUFBLE1BQUEsS0FBQSxVQUFBLEtBRUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLE1BQUEsUUFBQSxHQUFBLEVBQUEsSUFFQSxJQUFBLFNBQUEsR0FFQSxNQURBLFNBQUEsSUFBQSxHQUNBLElBS0Esa0JBQUEsUUFBQSxVQUFBLE9BQ0EsT0FBQSxVQUFBLEtBQUEsV0FDQSxNQUFBLE1BQUEsUUFBQSxhQUFBLE1BS0EsbUJBQUEsU0FBQSxPQUFBLFFBQ0EsT0FBQSxRQUFBLEtBRUEsa0JBQUEsU0FBQSxPQUFBLEtBQ0EsT0FBQSxXQUNBLE1BQUEsT0hoZUEsSUFBQSxRQUFBLFNBQUEsR0FFQSxZQXlDQSxTQUFBLEtBSUEsR0FDQSxHQURBLEVBQUEsRUFBQSxVQU9BLE9BTEEsWUFBQSxXQUNBLEdBQUEsWUFBQSxVQUFBLE1BQUEsTUFBQSxTQUFBLFVBQUEsWUFDQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLElBQ0EsS0FDQSxFQUFBLFVBUUEsUUFBQSxHQUFBLEdBR0EsQ0FBQSxHQUFBLE1BQ0EsSUFDQSxHQUFBLE9BYUEsTUFYQSxHQUFBLEtBQUEsTUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxTQUFBLEVBQUEsT0FFQSxHQUFBLEtBQUEsRUFBQSxJQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxHQUFBLEVBQUEsR0FBQSxJQUNBLEtBQUEsV0FDQSxFQUFBLEdBQUEsRUFBQSxHQUFBLFNBS0EsRUFBQSxLQUFBLE1BQUEsS0FBQSxHQUFBLFVBUUEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxFQUVBLEtBQ0EsRUFBQSwwREFFQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsQ0FDQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsS0FJQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxNQUFBLE9BQ0EsRUFBQSxFQUFBLElBQUEsRUFFQSxHQUFBLEtBQUEsRUFBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFDQSxHQUFBLE9BQUEsT0FVQSxRQUFBLEdBQUEsRUFBQSxHQUVBLEdBbUJBLEdBQ0EsRUFwQkEsS0FDQSxFQUFBLDZuQkFpQkEsRUFBQSxFQUFBLFNBR0EsUUFBQSxHQUNBLElBQUEsSUFDQSxFQUFBLFlBQ0EsRUFBQSxRQUNBLE1BQ0EsS0FBQSxNQUNBLEVBQUEsVUFDQSxFQUFBLE1BQ0EsTUFDQSxLQUFBLEtBQ0EsRUFBQSxlQUNBLEVBQUEsV0FDQSxNQUNBLEtBQUEsS0FDQSxFQUFBLGtCQUNBLEVBQUEsY0FDQSxNQUNBLEtBQUEsS0FDQSxFQUFBLGNBQ0EsRUFBQSxVQUNBLE1BQ0EsS0FBQSxRQUNBLEVBQUEsZUFDQSxFQUFBLFdBQ0EsTUFDQSxLQUFBLFFBQ0EsRUFBQSxhQUNBLEVBQUEsVUFLQSxHQUFBLEdBQUEsRUFBQSxTQUFBLFNBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLFVBQ0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxhQUNBLEVBQUEsR0FBQSxNQUFBLEVBQUEsVUFDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQ0EsR0FBQSxLQUFBLE1BQUEsRUFBQSxJQUFBLEdBQUEsRUFFQSxJQUFBLEdBQUEsRUFBQSxVQUNBLEdBQUEsUUFBQSxFQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsWUFDQSxHQUFBLFFBQUEsRUFBQSxFQUVBLElBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxRQUFBLEVBQUEsRUFDQSxJQUFBLEdBQUEsRUFBQSxZQUNBLEdBQUEsUUFBQSxFQUFBLEVBRUEsSUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsQ0FHQSxJQUFBLElBQUEsS0FBQSxTQUFBLEVBQ0EsR0FBQSxJQUFBLENBRUEsSUFBQSxJQUFBLEtBQUEsU0FBQSxFQUNBLEdBQUEsSUFBQSxDQUtBLElBQ0EsTUFBQSxFQUNBLElBQUEsRUFBQSxLQUNBLFlBQUEsRUFBQSxLQUNBLFlBQUEsRUFBQSxZQUNBLFVBQUEsRUFBQSxVQUNBLGlCQUFBLEVBQ0EsU0FBQSxFQUNBLFVBQUEsRUFBQSxjQUNBLE9BQUEsRUFBQSxPQUNBLFNBQUEsRUFBQSxTQUNBLElBQUEsT0FBQSxFQUNBLElBQUEsT0FBQSxFQUdBLElBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLE9BQUEsR0FNQSxRQUFBLEdBQUEsR0FFQSxHQUFBLEdBQUEsR0FBQSxFQUNBLEtBQ0EsRUFBQSxpRkFFQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsR0FBQSxNQUFBLEtBQ0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEtBUUEsUUFBQSxLQUNBLEdBQ0EsR0FBQSxFQURBLEVBQUEsR0FBQSxLQUlBLEtBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLENBRUEsRUFBQSxRQUFBLEVBQUEsVUFBQSxNQUFBLEVBQ0EsSUFBQSxHQUFBLEVBQUEsbUJBQUEsU0FDQSxRQUFBLE9BRUEsTUFBQSxPQUNBLElBQUEsWUFHQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxVQUFBLEtBQUEsR0FDQSxTQUFBLFdBQ0EsS0FDQSxLQUFBLEdBTUEsS0FKQSxFQUFBLE9BQUEsR0FFQSxFQUFBLE1BQUEsRUFBQSxJQUVBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsR0FBQSxFQUFBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLFVBQUEsS0FBQSxHQUNBLFNBQUEsYUFDQSxLQUNBLEtBQUEsR0FFQSxHQUFBLE9BQUEsS0FXQSxRQUFBLEtBRUEsR0FBQSxNQUNBLEVBQUEsbUZBRUEsR0FBQSxRQUFBLFNBQUEsR0FFQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxFQUVBLElBQ0EsUUFBQSxFQUNBLEdBQUEsRUFHQSxJQUFBLEdBQUEsS0FBQSxHQUFBLEVBQUEsRUFDQSxHQUFBLEtBQUEsTUFBQSxPQUFBLEtBUUEsUUFBQSxLQUVBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsRUFBQSxFQUFBLEVBRUEsRUFBQSxFQUFBLGVBQ0EsT0FDQSxLQUFBLEtBQUEsS0FBQSxFQUFBLElBQUEsR0FBQSxNQUNBLE9BRUEsRUFBQSxTQUFBLEdBQUEsRUFBQSxTQUFBLEdBQUEsQ0FDQSxHQUFBLEtBQ0EsS0FBQSxJQVFBLFFBQUEsS0FDQSxHQUFBLEdBQUEsRUFBQSxRQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsSUFBQSxRQUNBLEdBQUEsU0FBQSxFQUFBLEdBRUEsRUFBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsS0FDQSxFQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxJQUNBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLEtBbUJBLFFBQUEsS0F1REEsUUFBQSxHQUFBLEdBQ0EsUUFBQSxJQUFBLE1BQ0EsRUFBQSxpQkFDQSxLQUFBLFNBQUEsS0FBQSxVQUNBLEtBQUEsVUFBQSxLQUFBLFdBQ0EsS0FBQSxjQUFBLEVBQUEsUUFDQSxLQUFBLGNBQUEsRUFBQSxRQUNBLEdBQUEsRUFDQSxHQUFBLEVBR0EsRUFBQSxHQUFBLG1CQUFBLEdBRUEsRUFBQSxHQUFBLHNCQUFBLEdBR0EsUUFBQSxLQUNBLElBQ0EsR0FBQSxFQUNBLEVBQUEsSUFBQSxtQkFBQSxHQUNBLEVBQUEsSUFBQSxzQkFBQSxJQUlBLFFBQUEsR0FBQSxHQUNBLEdBQUEsRUFBQSxDQUVBLEdBQUEsR0FBQSxFQUFBLFFBQUEsS0FBQSxjQUNBLEVBQUEsRUFBQSxRQUFBLEtBQUEsYUFHQSxHQUFBLEtBQUEsSUFBQSxHQUFBLEdBQUEsS0FBQSxJQUFBLEdBQUEsQ0FFQSxJQUFBLEdBQUEsS0FBQSxTQUFBLEVBQ0EsRUFBQSxLQUFBLFVBQUEsQ0FFQSxHQUFBLElBQ0EsRUFBQSxHQUdBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUdBLEVBQUEsRUFBQSxLQUFBLElBQUEsR0FBQSxLQUNBLEVBQUEsRUFBQSxLQUFBLElBQUEsR0FBQSxJQUdBLEVBQUEsRUFBQSxHQUFBLEtBQUEsSUFBQSxLQUNBLEVBQUEsRUFBQSxHQUFBLEtBQUEsSUFBQSxJQUdBLEVBQUEsTUFBQSxLQUNBLElBQUEsRUFBQSxLQUNBLEtBQUEsRUFBQSxPQUVBLEVBQUEsS0FDQSxJQUFBLEVBQUEsT0FFQSxFQUFBLEtBQ0EsS0FBQSxFQUFBLE1BRUEsSUFBQSxHQUFBLFNBQUEsRUFBQSxHQUFBLEVBQ0EsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLENBQ0EsR0FBQSxLQUNBLEtBQUEsRUFBQSxRQVVBLFFBQUEsS0FDQSxHQUFBLEdBQUEsU0FBQSxFQUFBLE1BQUEsSUFBQSxRQUNBLEdBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEdBUUEsUUFBQSxLQUNBLEdBQUEsR0FBQSxHQUFBLFNBQUEsRUFBQSxNQUFBLEtBQUEsTUFDQSxHQUFBLEdBUUEsUUFBQSxHQUFBLEdBQ0EsSUFBQSxFQUFBLENBQ0EsR0FBQSxDQUNBLElBQUEsR0FBQSxTQUFBLGlCQUFBLEVBQUEsUUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLEdBQUEsR0FBQSxpQkFBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLFFBQUEsaUJBRUEsRUFBQSxFQUFBLEtBQUEsS0FBQSxLQUFBLFFBQ0EsRUFBQSxFQUFBLEtBQUEsS0FDQSxHQUFBLEVBQUEsRUFFQSxJQUFBLEdBQUEsU0FBQSxFQUFBLElBQUEsU0FBQSxFQUFBLFFBQUEsQ0FDQSxHQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxJQVVBLFFBQUEsR0FBQSxHQTBCQSxRQUFBLEtBQ0EsRUFBQSxVQUNBLEtBQUEsS0FDQSxTQUFBLFVBQ0EsU0FBQSxHQUNBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxpQkFDQSxJQUNBLEtBQUEsV0FJQSxRQUFBLEtBQ0EsSUFBQSxTQUFBLEVBQUEsSUFBQSxXQUNBLEVBQUEsT0FBQSxTQUNBLE1BQUEsTUFDQSxJQUFBLFNBdkNBLElBRUEsRUFBQSxNQUNBLElBQUEscUJBQ0EsTUFDQSxPQUFBLEdBRUEsU0FBQSxPQUNBLE9BQUEsSUFFQSxLQUFBLFNBQUEsR0FDQSxFQUNBLEtBQUEsY0FDQSxLQUFBLEdBQ0EsRUFDQSxLQUFBLFNBQUEsY0FDQSxPQUFBLFFBRUEsRUFBQSxTQUNBLE1BQUEsR0FDQSxJQUFBLFFBQUEsS0F5QkEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFBQSxlQUFBLEtBQUEsU0FBQSxNQUFBLEtBQUEsRUFDQSxTQUFBLElBQUEsR0FFQSxFQUFBLFNBQUEsSUFDQSxFQUFBLFlBQUEsR0FDQSxFQUFBLE1BQUEsWUFBQSxZQUVBLEVBQUEsU0FBQSxHQUNBLEVBQUEsTUFBQSxTQUFBLFdBSUEsUUFBQSxLQUNBLEVBQUEsUUFBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxnQkFBQSxFQUFBLEtBQUEsUUFBQSxXQVVBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLENBQ0EsR0FBQSxPQUFBLFNBQ0EsS0FBQSxFQUFBLE1BQ0EsS0FDQSxFQUFBLE9BQUEsU0FDQSxLQUFBLEVBQUEsTUFDQSxJQUNBLElBQUEsR0FBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFDQSxFQUFBLEVBQUEsRUFBQSxDQUNBLEdBQUEsT0FBQSxTQUNBLEtBQUEsRUFBQSxNQUNBLEtBNVBBLEdBQUEsR0FBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLFFBQ0EsRUFBQSxFQUFBLFNBRUEsR0FEQSxFQUFBLFlBQ0EsRUFBQSxTQUNBLEdBQUEsRUFDQSxHQUFBLEVBRUEsRUFBQSxFQUFBLDBDQUNBLElBQ0EsR0FBQSxLQUFBLEVBQUEsV0FDQSxFQUFBLEtBQUEsS0FBQSxhQUVBLElBQUEsR0FBQSxFQUFBLE1BRUEsRUFBQSxFQUFBLHlDQUNBLElBQ0EsR0FBQSxLQUFBLEVBQUEsV0FDQSxFQUFBLEtBQUEsS0FBQSxXQUFBLEVBQUEsTUFBQSxVQUVBLElBQUEsR0FBQSxFQUFBLEtBR0EsR0FBQSxLQUFBLG9CQUFBLFNBSUEsRUFBQSxHQUFBLHVCQUFBLEdBT0EsRUFBQSxHQUFBLFFBQUEsR0FHQSxFQUFBLEdBQUEsUUFBQSxhQUFBLEdBR0EsRUFBQSxHQUFBLFFBQUEsS0FBQSxHQUNBLElBR0EsRUFBQSxHQUFBLFFBQUEsS0FBQSxHQXdOQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsUUFDQSxFQUFBLDJCQUlBLEdBQUEsSUFBQSxHQUNBLEtBQUEsU0FBQSxHQUNBLEVBQUEsQ0FFQSxJQUFBLE1BQ0EsRUFBQSwrUUFLQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FFQSxHQUNBLE1BQUEsRUFDQSxRQUFBLEVBR0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxFQUFBLEVBQ0EsR0FBQSxPQUFBLEtBR0EsRUFBQSxLQUFBLEdBR0EsRUFBQSxLQUFBLEVBQUEsS0FBQSxjQUFBLFdBRUEsSUFBQSxFQUFBLFFBQUEsRUFBQSxNQUFBLEtBQUEsYUFFQSxFQUFBLE1BQUEsS0FBQSxVQUFBLFNBQUEsU0FJQSxFQUNBLEtBQUEsU0FBQSxjQUNBLE9BQUEsTUFDQSxPQUFBLEVBQ0Esc0JBQUEsTUFXQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsK0JBRUEsS0FDQSxFQUFBLDJKQUVBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUNBO0dBQUEsR0FBQSxLQUFBLEdBQUEsRUFBQSxFQUNBLEdBQUEsT0FBQSxLQUdBLEVBQUEsS0FBQSxpQkFBQSxLQUFBLEdBQ0EsRUFDQSxLQUFBLFNBQUEsY0FDQSxPQUFBLE1BQ0EsT0FBQSxFQUNBLHNCQUFBLElBSUEsUUFBQSxLQTJEQSxRQUFBLEtBRUEsR0FBQSxHQUFBLEVBQUEsTUFBQSxLQUFBLFVBQ0EsRUFBQSxFQUFBLFNBQUEsT0FDQSxFQUFBLEVBQUEsTUFBQSxLQUFBLFdBQ0EsRUFBQSxFQUFBLEtBQUEsY0FBQSxPQUFBLFdBQ0EsTUFBQSxHQUFBLE1BQUEsS0FBQSxhQUFBLEdBR0EsSUFVQSxFQUFBLFlBQUEsT0FDQSxFQUFBLEtBQUEsVUFBQSxZQUFBLFNBVEEsRUFBQSxZQUFBLE9BQ0EsRUFBQSxPQUNBLEVBQUEsS0FBQSxVQUFBLFlBQUEsT0FFQSxFQUFBLE1BQUEsUUFBQSxTQUFBLEVBQUEsS0FBQSxRQVFBLEVBQ0EsS0FBQSxTQUFBLGVBQUEsY0FDQSxPQUFBLFdBa0JBLFFBQUEsR0FBQSxHQUNBLEVBQUEsaUJBQ0EsSUFBQSxHQUFBLEVBQUEsTUFBQSxPQUFBLGNBQUEsS0FBQSxXQUNBLEVBQUEsRUFBQSxLQUFBLGNBQUEsT0FBQSxXQUNBLE1BQUEsR0FBQSxNQUFBLEtBQUEsYUFBQSxHQUdBLEdBQUEsTUFBQSxZQUFBLE9BQ0EsRUFBQSxLQUFBLFVBQUEsWUFBQSxPQXhHQSxFQUFBLEdBQUEsUUFBQSxhQUFBLEVBR0EsSUFBQSxHQUNBLEVBQUEsRUFBQSwwQkFBQSxVQUNBLE1BQUEsUUFDQSxpQkFBQSxFQUVBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLGFBQUEsTUFHQSxHQUZBLEtBQUEsVUFBQSxFQUFBLEtBQUEsS0FFQSxFQUFBLFNBQUEsS0FDQSxPQUFBLElBRUEsR0FBQSxPQUFBLEdBQ0EsRUFBQSxTQUVBLEVBQUEsRUFBQSxJQUlBLFlBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxVQUFBLFFBR0EsRUFBQSxFQUFBLHFDQUFBLElBQUEsR0FBQSxTQUNBLEdBQUEsS0FBQSxNQUFBLEdBRUEsR0FDQSxLQUFBLEVBQUEsS0FBQSxFQUFBLEtBQ0EsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEdBR0EsRUFBQSxFQUFBLElBRUEsT0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQ0EsS0FBQSxFQUFBLEtBQUEsRUFBQSxLQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsUUFNQSxHQUFBLEdBQUEsUUFBQSxTQUFBLEdBcHZCQSxHQUFBLElBQUEsTUFBQSxNQUFBLFVBQUEsU0FBQSxZQUFBLFdBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxFQUFBLEdBR0EsRUFBQSxJQUNBLEVBQUEsRUFBQSxHQUlBLEVBQUEsR0FBQSxNQUNBLEdBQ0EsRUFBQSxRQUFBLEVBQUEsV0FBQSxHQUNBLEVBQUEsUUFBQSxFQUFBLGFBQUEsR0FHQSxHQUFBLFFBQUEsS0FBQSxNQUFBLG9CQUVBLElBQUEsR0FBQSxFQUFBLGFBQ0EsRUFBQSxFQUFBLHVCQUNBLEVBQUEsRUFBQSxpQkFDQSxFQUFBLEVBQUEsa0JBRUEsRUFBQSxFQUFBLGdCQUNBLEVBQUEsRUFBQSxlQUNBLEVBQUEsRUFBQSxlQUNBLEVBQUEsRUFBQSxrQkFFQSxHQURBLEVBQUEsa0JBQ0EsRUFBQSxpQkFDQSxFQUFBLEVBQUEsZ0JBeXpCQSxPQXJDQSxZQUlBLENBQUEsR0FBQSxHQUFBLEdBQ0EsR0FBQSxLQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsRUFDQSxFQUFBLEtBRUEsS0FBQSxXQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FDQSxJQUNBLElBQ0EsSUFDQSxJQUVBLElBRUEsSUFDQSxJQUVBLFVBV0EsRUFBQSxHQUFBLE9BQUEsV0FDQSxNQUFBLE1BQUEsT0FBQSxHQUdBLE1BRUEsTUErREEsT0FBQSxVQUFBLElBQUEsV0FHQSxJQUFBLEdBRkEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxJQUFBLEVBQUEsS0FBQSxHQUNBLE9BQUEsSUFFQSxNQUFBLFVBQUEsSUFBQSxXQUdBLElBQUEsR0FGQSxHQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLElBQUEsRUFBQSxLQUFBLEdBQ0EsT0FBQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICBqcXVlcnktc29ydGFibGUuanMgdjAuOS4xMlxyXG4gKiAgaHR0cDovL2pvaG5ueS5naXRodWIuY29tL2pxdWVyeS1zb3J0YWJsZS9cclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTIgSm9uYXMgdm9uIEFuZHJpYW5cclxuICogIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqICBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcclxuICogIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxyXG4gKiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxyXG4gKiAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXHJcbiAqICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XHJcbiAqICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGVcclxuICogICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cclxuICogICogVGhlIG5hbWUgb2YgdGhlIGF1dGhvciBtYXkgbm90IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzXHJcbiAqICAgIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxyXG4gKlxyXG4gKiAgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXHJcbiAqICBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxyXG4gKiAgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxyXG4gKiAgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgPENPUFlSSUdIVCBIT0xERVI+IEJFIExJQUJMRSBGT1IgQU5ZXHJcbiAqICBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xyXG4gKiAgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xyXG4gKiAgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EXHJcbiAqICBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxyXG4gKiAgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcclxuICogIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblxyXG4oZnVuY3Rpb24oJCwgd2luZG93LCBwbHVnaW5OYW1lLCB1bmRlZmluZWQpIHtcclxuICAgIHZhciBldmVudE5hbWVzLFxyXG4gICAgICAgIGNvbnRhaW5lckRlZmF1bHRzID0ge1xyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCBpdGVtcyBjYW4gYmUgZHJhZ2dlZCBmcm9tIHRoaXMgY29udGFpbmVyXHJcbiAgICAgICAgICAgIGRyYWc6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIElmIHRydWUsIGl0ZW1zIGNhbiBiZSBkcm9wZWQgb250byB0aGlzIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBkcm9wOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBFeGNsdWRlIGl0ZW1zIGZyb20gYmVpbmcgZHJhZ2dhYmxlLCBpZiB0aGVcclxuICAgICAgICAgICAgLy8gc2VsZWN0b3IgbWF0Y2hlcyB0aGUgaXRlbVxyXG4gICAgICAgICAgICBleGNsdWRlOiBcIlwiLFxyXG4gICAgICAgICAgICAvLyBJZiB0cnVlLCBzZWFyY2ggZm9yIG5lc3RlZCBjb250YWluZXJzIHdpdGhpbiBhbiBpdGVtXHJcbiAgICAgICAgICAgIG5lc3RlZDogdHJ1ZSxcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgdGhlIGl0ZW1zIGFyZSBhc3N1bWVkIHRvIGJlIGFycmFuZ2VkIHZlcnRpY2FsbHlcclxuICAgICAgICAgICAgdmVydGljYWw6IHRydWVcclxuICAgICAgICB9LCAvLyBlbmQgY29udGFpbmVyIGRlZmF1bHRzXHJcbiAgICAgICAgZ3JvdXBEZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBleGVjdXRlZCBhZnRlciB0aGUgcGxhY2Vob2xkZXIgaGFzIGJlZW4gbW92ZWQuXHJcbiAgICAgICAgICAgIC8vICRjbG9zZXN0SXRlbU9yQ29udGFpbmVyIGNvbnRhaW5zIHRoZSBjbG9zZXN0IGl0ZW0sIHRoZSBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAvLyBoYXMgYmVlbiBwdXQgYXQgb3IgdGhlIGNsb3Nlc3QgZW1wdHkgQ29udGFpbmVyLCB0aGUgcGxhY2Vob2xkZXIgaGFzXHJcbiAgICAgICAgICAgIC8vIGJlZW4gYXBwZW5kZWQgdG8uXHJcbiAgICAgICAgICAgIGFmdGVyTW92ZTogZnVuY3Rpb24oJHBsYWNlaG9sZGVyLCBjb250YWluZXIsICRjbG9zZXN0SXRlbU9yQ29udGFpbmVyKSB7fSxcclxuICAgICAgICAgICAgLy8gVGhlIGV4YWN0IGNzcyBwYXRoIGJldHdlZW4gdGhlIGNvbnRhaW5lciBhbmQgaXRzIGl0ZW1zLCBlLmcuIFwiPiB0Ym9keVwiXHJcbiAgICAgICAgICAgIGNvbnRhaW5lclBhdGg6IFwiXCIsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjc3Mgc2VsZWN0b3Igb2YgdGhlIGNvbnRhaW5lcnNcclxuICAgICAgICAgICAgY29udGFpbmVyU2VsZWN0b3I6IFwib2wsIHVsXCIsXHJcbiAgICAgICAgICAgIC8vIERpc3RhbmNlIHRoZSBtb3VzZSBoYXMgdG8gdHJhdmVsIHRvIHN0YXJ0IGRyYWdnaW5nXHJcbiAgICAgICAgICAgIGRpc3RhbmNlOiAwLFxyXG4gICAgICAgICAgICAvLyBUaW1lIGluIG1pbGxpc2Vjb25kcyBhZnRlciBtb3VzZWRvd24gdW50aWwgZHJhZ2dpbmcgc2hvdWxkIHN0YXJ0LlxyXG4gICAgICAgICAgICAvLyBUaGlzIG9wdGlvbiBjYW4gYmUgdXNlZCB0byBwcmV2ZW50IHVud2FudGVkIGRyYWdzIHdoZW4gY2xpY2tpbmcgb24gYW4gZWxlbWVudC5cclxuICAgICAgICAgICAgZGVsYXk6IDAsXHJcbiAgICAgICAgICAgIC8vIFRoZSBjc3Mgc2VsZWN0b3Igb2YgdGhlIGRyYWcgaGFuZGxlXHJcbiAgICAgICAgICAgIGhhbmRsZTogXCJcIixcclxuICAgICAgICAgICAgLy8gVGhlIGV4YWN0IGNzcyBwYXRoIGJldHdlZW4gdGhlIGl0ZW0gYW5kIGl0cyBzdWJjb250YWluZXJzXHJcbiAgICAgICAgICAgIGl0ZW1QYXRoOiBcIlwiLFxyXG4gICAgICAgICAgICAvLyBUaGUgY3NzIHNlbGVjdG9yIG9mIHRoZSBpdGVtc1xyXG4gICAgICAgICAgICBpdGVtU2VsZWN0b3I6IFwibGlcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNsYXNzIGdpdmVuIHRvIFwiYm9keVwiIHdoaWxlIGFuIGl0ZW0gaXMgYmVpbmcgZHJhZ2dlZFxyXG4gICAgICAgICAgICBib2R5Q2xhc3M6IFwiZHJhZ2dpbmdcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNsYXNzIGdpdmluZyB0byBhbiBpdGVtIHdoaWxlIGJlaW5nIGRyYWdnZWRcclxuICAgICAgICAgICAgZHJhZ2dlZENsYXNzOiBcImRyYWdnZWRcIixcclxuICAgICAgICAgICAgLy8gVGhlIGNsYXNzIG9mIHRoZSBwbGFjZWhvbGRlciAobXVzdCBtYXRjaCBwbGFjZWhvbGRlciBvcHRpb24gbWFya3VwKVxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlckNsYXNzOiBcInBsYWNlaG9sZGVyXCIsXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBkcmFnZ2VkIGl0ZW0gbWF5IGJlIGluc2lkZSB0aGUgY29udGFpbmVyLlxyXG4gICAgICAgICAgICAvLyBVc2Ugd2l0aCBjYXJlLCBzaW5jZSB0aGUgc2VhcmNoIGZvciBhIHZhbGlkIGNvbnRhaW5lciBlbnRhaWxzIGEgZGVwdGggZmlyc3Qgc2VhcmNoXHJcbiAgICAgICAgICAgIC8vIGFuZCBtYXkgYmUgcXVpdGUgZXhwZW5zaXZlLlxyXG4gICAgICAgICAgICBpc1ZhbGlkVGFyZ2V0OiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBFeGVjdXRlZCBiZWZvcmUgb25Ecm9wIGlmIHBsYWNlaG9sZGVyIGlzIGRldGFjaGVkLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGhhcHBlbnMgaWYgcHVsbFBsYWNlaG9sZGVyIGlzIHNldCB0byBmYWxzZSBhbmQgdGhlIGRyb3Agb2NjdXJzIG91dHNpZGUgYSBjb250YWluZXIuXHJcbiAgICAgICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIsIGV2ZW50KSB7fSxcclxuICAgICAgICAgICAgLy8gRXhlY3V0ZWQgYXQgdGhlIGJlZ2lubmluZyBvZiBhIG1vdXNlIG1vdmUgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIFRoZSBQbGFjZWhvbGRlciBoYXMgbm90IGJlZW4gbW92ZWQgeWV0LlxyXG4gICAgICAgICAgICBvbkRyYWc6IGZ1bmN0aW9uKCRpdGVtLCBwb3NpdGlvbiwgX3N1cGVyLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0uY3NzKHBvc2l0aW9uKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBDYWxsZWQgYWZ0ZXIgdGhlIGRyYWcgaGFzIGJlZW4gc3RhcnRlZCxcclxuICAgICAgICAgICAgLy8gdGhhdCBpcyB0aGUgbW91c2UgYnV0dG9uIGlzIGJlZWluZyBoZWxkIGRvd24gYW5kXHJcbiAgICAgICAgICAgIC8vIHRoZSBtb3VzZSBpcyBtb3ZpbmcuXHJcbiAgICAgICAgICAgIC8vIFRoZSBjb250YWluZXIgaXMgdGhlIGNsb3Nlc3QgaW5pdGlhbGl6ZWQgY29udGFpbmVyLlxyXG4gICAgICAgICAgICAvLyBUaGVyZWZvcmUgaXQgbWlnaHQgbm90IGJlIHRoZSBjb250YWluZXIsIHRoYXQgYWN0dWFsbHkgY29udGFpbnMgdGhlIGl0ZW0uXHJcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbigkaXRlbSwgY29udGFpbmVyLCBfc3VwZXIsIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJGl0ZW0uaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICRpdGVtLndpZHRoKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAkaXRlbS5hZGRDbGFzcyhjb250YWluZXIuZ3JvdXAub3B0aW9ucy5kcmFnZ2VkQ2xhc3MpXHJcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhjb250YWluZXIuZ3JvdXAub3B0aW9ucy5ib2R5Q2xhc3MpXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENhbGxlZCB3aGVuIHRoZSBtb3VzZSBidXR0b24gaXMgYmVlaW5nIHJlbGVhc2VkXHJcbiAgICAgICAgICAgIG9uRHJvcDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0ucmVtb3ZlQ2xhc3MoY29udGFpbmVyLmdyb3VwLm9wdGlvbnMuZHJhZ2dlZENsYXNzKS5yZW1vdmVBdHRyKFwic3R5bGVcIilcclxuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKGNvbnRhaW5lci5ncm91cC5vcHRpb25zLmJvZHlDbGFzcylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gQ2FsbGVkIG9uIG1vdXNlZG93bi4gSWYgZmFsc3kgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBkcmFnZ2luZyB3aWxsIG5vdCBzdGFydC5cclxuICAgICAgICAgICAgLy8gSWdub3JlIGlmIGVsZW1lbnQgY2xpY2tlZCBpcyBpbnB1dCwgc2VsZWN0IG9yIHRleHRhcmVhXHJcbiAgICAgICAgICAgIG9uTW91c2Vkb3duOiBmdW5jdGlvbigkaXRlbSwgX3N1cGVyLCBldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQubm9kZU5hbWUubWF0Y2goL14oaW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gVGVtcGxhdGUgZm9yIHRoZSBwbGFjZWhvbGRlci4gQ2FuIGJlIGFueSB2YWxpZCBqUXVlcnkgaW5wdXRcclxuICAgICAgICAgICAgLy8gZS5nLiBhIHN0cmluZywgYSBET00gZWxlbWVudC5cclxuICAgICAgICAgICAgLy8gVGhlIHBsYWNlaG9sZGVyIG11c3QgaGF2ZSB0aGUgY2xhc3MgXCJwbGFjZWhvbGRlclwiXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnPGxpIGNsYXNzPVwicGxhY2Vob2xkZXJcIi8+JyxcclxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgdGhlIHBvc2l0aW9uIG9mIHRoZSBwbGFjZWhvbGRlciBpcyBjYWxjdWxhdGVkIG9uIGV2ZXJ5IG1vdXNlbW92ZS5cclxuICAgICAgICAgICAgLy8gSWYgZmFsc2UsIGl0IGlzIG9ubHkgY2FsY3VsYXRlZCB3aGVuIHRoZSBtb3VzZSBpcyBhYm92ZSBhIGNvbnRhaW5lci5cclxuICAgICAgICAgICAgcHVsbFBsYWNlaG9sZGVyOiB0cnVlLFxyXG4gICAgICAgICAgICAvLyBTcGVjaWZpZXMgc2VyaWFsaXphdGlvbiBvZiB0aGUgY29udGFpbmVyIGdyb3VwLlxyXG4gICAgICAgICAgICAvLyBUaGUgcGFpciAkcGFyZW50LyRjaGlsZHJlbiBpcyBlaXRoZXIgY29udGFpbmVyL2l0ZW1zIG9yIGl0ZW0vc3ViY29udGFpbmVycy5cclxuICAgICAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbigkcGFyZW50LCAkY2hpbGRyZW4sIHBhcmVudElzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gJC5leHRlbmQoe30sICRwYXJlbnQuZGF0YSgpKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRJc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyRjaGlsZHJlbl1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCRjaGlsZHJlblswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5jaGlsZHJlbiA9ICRjaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuc3ViQ29udGFpbmVyc1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5zb3J0YWJsZVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gU2V0IHRvbGVyYW5jZSB3aGlsZSBkcmFnZ2luZy4gUG9zaXRpdmUgdmFsdWVzIGRlY3JlYXNlIHNlbnNpdGl2aXR5LFxyXG4gICAgICAgICAgICAvLyBuZWdhdGl2ZSB2YWx1ZXMgaW5jcmVhc2UgaXQuXHJcbiAgICAgICAgICAgIHRvbGVyYW5jZTogMFxyXG4gICAgICAgIH0sIC8vIGVuZCBncm91cCBkZWZhdWx0c1xyXG4gICAgICAgIGNvbnRhaW5lckdyb3VwcyA9IHt9LFxyXG4gICAgICAgIGdyb3VwQ291bnRlciA9IDAsXHJcbiAgICAgICAgZW1wdHlCb3ggPSB7XHJcbiAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgYm90dG9tOiAwLFxyXG4gICAgICAgICAgICByaWdodDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXZlbnROYW1lcyA9IHtcclxuICAgICAgICAgICAgc3RhcnQ6IFwidG91Y2hzdGFydC5zb3J0YWJsZSBtb3VzZWRvd24uc29ydGFibGVcIixcclxuICAgICAgICAgICAgZHJvcDogXCJ0b3VjaGVuZC5zb3J0YWJsZSB0b3VjaGNhbmNlbC5zb3J0YWJsZSBtb3VzZXVwLnNvcnRhYmxlXCIsXHJcbiAgICAgICAgICAgIGRyYWc6IFwidG91Y2htb3ZlLnNvcnRhYmxlIG1vdXNlbW92ZS5zb3J0YWJsZVwiLFxyXG4gICAgICAgICAgICBzY3JvbGw6IFwic2Nyb2xsLnNvcnRhYmxlXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIHN1YkNvbnRhaW5lcktleSA9IFwic3ViQ29udGFpbmVyc1wiXHJcblxyXG4gICAgLypcclxuICAgICAqIGEgaXMgQXJyYXkgW2xlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbV1cclxuICAgICAqIGIgaXMgYXJyYXkgW2xlZnQsIHRvcF1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZChhLCBiKSB7XHJcbiAgICAgICAgdmFyIHggPSBNYXRoLm1heCgwLCBhWzBdIC0gYlswXSwgYlswXSAtIGFbMV0pLFxyXG4gICAgICAgICAgICB5ID0gTWF0aC5tYXgoMCwgYVsyXSAtIGJbMV0sIGJbMV0gLSBhWzNdKVxyXG4gICAgICAgIHJldHVybiB4ICsgeTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXREaW1lbnNpb25zKGFycmF5LCBkaW1lbnNpb25zLCB0b2xlcmFuY2UsIHVzZU9mZnNldCkge1xyXG4gICAgICAgIHZhciBpID0gYXJyYXkubGVuZ3RoLFxyXG4gICAgICAgICAgICBvZmZzZXRNZXRob2QgPSB1c2VPZmZzZXQgPyBcIm9mZnNldFwiIDogXCJwb3NpdGlvblwiXHJcbiAgICAgICAgdG9sZXJhbmNlID0gdG9sZXJhbmNlIHx8IDBcclxuXHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICB2YXIgZWwgPSBhcnJheVtpXS5lbCA/IGFycmF5W2ldLmVsIDogJChhcnJheVtpXSksXHJcbiAgICAgICAgICAgICAgICAvLyB1c2UgZml0dGluZyBtZXRob2RcclxuICAgICAgICAgICAgICAgIHBvcyA9IGVsW29mZnNldE1ldGhvZF0oKVxyXG4gICAgICAgICAgICBwb3MubGVmdCArPSBwYXJzZUludChlbC5jc3MoJ21hcmdpbi1sZWZ0JyksIDEwKVxyXG4gICAgICAgICAgICBwb3MudG9wICs9IHBhcnNlSW50KGVsLmNzcygnbWFyZ2luLXRvcCcpLCAxMClcclxuICAgICAgICAgICAgZGltZW5zaW9uc1tpXSA9IFtcclxuICAgICAgICAgICAgICAgIHBvcy5sZWZ0IC0gdG9sZXJhbmNlLFxyXG4gICAgICAgICAgICAgICAgcG9zLmxlZnQgKyBlbC5vdXRlcldpZHRoKCkgKyB0b2xlcmFuY2UsXHJcbiAgICAgICAgICAgICAgICBwb3MudG9wIC0gdG9sZXJhbmNlLFxyXG4gICAgICAgICAgICAgICAgcG9zLnRvcCArIGVsLm91dGVySGVpZ2h0KCkgKyB0b2xlcmFuY2VcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRSZWxhdGl2ZVBvc2l0aW9uKHBvaW50ZXIsIGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gZWxlbWVudC5vZmZzZXQoKVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGxlZnQ6IHBvaW50ZXIubGVmdCAtIG9mZnNldC5sZWZ0LFxyXG4gICAgICAgICAgICB0b3A6IHBvaW50ZXIudG9wIC0gb2Zmc2V0LnRvcFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzb3J0QnlEaXN0YW5jZURlc2MoZGltZW5zaW9ucywgcG9pbnRlciwgbGFzdFBvaW50ZXIpIHtcclxuICAgICAgICBwb2ludGVyID0gW3BvaW50ZXIubGVmdCwgcG9pbnRlci50b3BdXHJcbiAgICAgICAgbGFzdFBvaW50ZXIgPSBsYXN0UG9pbnRlciAmJiBbbGFzdFBvaW50ZXIubGVmdCwgbGFzdFBvaW50ZXIudG9wXVxyXG5cclxuICAgICAgICB2YXIgZGltLFxyXG4gICAgICAgICAgICBpID0gZGltZW5zaW9ucy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGRpc3RhbmNlcyA9IFtdXHJcblxyXG4gICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgZGltID0gZGltZW5zaW9uc1tpXVxyXG4gICAgICAgICAgICBkaXN0YW5jZXNbaV0gPSBbaSwgZChkaW0sIHBvaW50ZXIpLCBsYXN0UG9pbnRlciAmJiBkKGRpbSwgbGFzdFBvaW50ZXIpXVxyXG4gICAgICAgIH1cclxuICAgICAgICBkaXN0YW5jZXMgPSBkaXN0YW5jZXMuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiWzFdIC0gYVsxXSB8fCBiWzJdIC0gYVsyXSB8fCBiWzBdIC0gYVswXVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIGxhc3QgZW50cnkgaXMgdGhlIGNsb3Nlc3RcclxuICAgICAgICByZXR1cm4gZGlzdGFuY2VzXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gQ29udGFpbmVyR3JvdXAob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBncm91cERlZmF1bHRzLCBvcHRpb25zKVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVycyA9IFtdXHJcblxyXG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnJvb3RHcm91cCkge1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFByb3h5ID0gJC5wcm94eSh0aGlzLnNjcm9sbCwgdGhpcylcclxuICAgICAgICAgICAgdGhpcy5kcmFnUHJveHkgPSAkLnByb3h5KHRoaXMuZHJhZywgdGhpcylcclxuICAgICAgICAgICAgdGhpcy5kcm9wUHJveHkgPSAkLnByb3h5KHRoaXMuZHJvcCwgdGhpcylcclxuICAgICAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9ICQodGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyKVxyXG5cclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmlzVmFsaWRUYXJnZXQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuaXNWYWxpZFRhcmdldCA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBDb250YWluZXJHcm91cC5nZXQgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCFjb250YWluZXJHcm91cHNbb3B0aW9ucy5ncm91cF0pIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ3JvdXAgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZ3JvdXAgPSBncm91cENvdW50ZXIrK1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lckdyb3Vwc1tvcHRpb25zLmdyb3VwXSA9IG5ldyBDb250YWluZXJHcm91cChvcHRpb25zKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lckdyb3Vwc1tvcHRpb25zLmdyb3VwXVxyXG4gICAgfVxyXG5cclxuICAgIENvbnRhaW5lckdyb3VwLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBkcmFnSW5pdDogZnVuY3Rpb24oZSwgaXRlbUNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLiRkb2N1bWVudCA9ICQoaXRlbUNvbnRhaW5lci5lbFswXS5vd25lckRvY3VtZW50KVxyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IGl0ZW0gdG8gZHJhZ1xyXG4gICAgICAgICAgICB0aGlzLml0ZW0gPSAkKGUudGFyZ2V0KS5jbG9zZXN0KHRoaXMub3B0aW9ucy5pdGVtU2VsZWN0b3IpXHJcbiAgICAgICAgICAgIHRoaXMuaXRlbUNvbnRhaW5lciA9IGl0ZW1Db250YWluZXJcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLml0ZW0uaXModGhpcy5vcHRpb25zLmV4Y2x1ZGUpIHx8XHJcbiAgICAgICAgICAgICAgICAhdGhpcy5vcHRpb25zLm9uTW91c2Vkb3duKHRoaXMuaXRlbSwgZ3JvdXBEZWZhdWx0cy5vbk1vdXNlZG93biwgZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFBvaW50ZXIoZSlcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVMaXN0ZW5lcnMoJ29uJylcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBEZWxheVRpbWVyKClcclxuICAgICAgICAgICAgdGhpcy5kcmFnSW5pdERvbmUgPSB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmFnOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRpc3RhbmNlTWV0KGUpIHx8ICF0aGlzLmRlbGF5TWV0KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRyYWdTdGFydCh0aGlzLml0ZW0sIHRoaXMuaXRlbUNvbnRhaW5lciwgZ3JvdXBEZWZhdWx0cy5vbkRyYWdTdGFydCwgZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbS5iZWZvcmUodGhpcy5wbGFjZWhvbGRlcilcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcgPSB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0UG9pbnRlcihlKVxyXG4gICAgICAgICAgICAvLyBwbGFjZSBpdGVtIHVuZGVyIHRoZSBjdXJzb3JcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRHJhZyh0aGlzLml0ZW0sXHJcbiAgICAgICAgICAgICAgICBnZXRSZWxhdGl2ZVBvc2l0aW9uKHRoaXMucG9pbnRlciwgdGhpcy5pdGVtLm9mZnNldFBhcmVudCgpKSxcclxuICAgICAgICAgICAgICAgIGdyb3VwRGVmYXVsdHMub25EcmFnLFxyXG4gICAgICAgICAgICAgICAgZSlcclxuXHJcbiAgICAgICAgICAgIHZhciB4ID0gZS5wYWdlWCB8fCBlLm9yaWdpbmFsRXZlbnQucGFnZVgsXHJcbiAgICAgICAgICAgICAgICB5ID0gZS5wYWdlWSB8fCBlLm9yaWdpbmFsRXZlbnQucGFnZVksXHJcbiAgICAgICAgICAgICAgICBib3ggPSB0aGlzLnNhbWVSZXN1bHRCb3gsXHJcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy5vcHRpb25zLnRvbGVyYW5jZVxyXG5cclxuICAgICAgICAgICAgaWYgKCFib3ggfHwgYm94LnRvcCAtIHQgPiB5IHx8IGJveC5ib3R0b20gKyB0IDwgeSB8fCBib3gubGVmdCAtIHQgPiB4IHx8IGJveC5yaWdodCArIHQgPCB4KVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlYXJjaFZhbGlkVGFyZ2V0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLmRldGFjaCgpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0QXBwZW5kZWRJdGVtID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcm9wOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTGlzdGVuZXJzKCdvZmYnKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kcmFnSW5pdERvbmUgPSBmYWxzZVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIHByb2Nlc3NpbmcgRHJvcCwgY2hlY2sgaWYgcGxhY2Vob2xkZXIgaXMgZGV0YWNoZWRcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyLmNsb3Nlc3QoXCJodG1sXCIpWzBdKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXIuYmVmb3JlKHRoaXMuaXRlbSkuZGV0YWNoKClcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25DYW5jZWwodGhpcy5pdGVtLCB0aGlzLml0ZW1Db250YWluZXIsIGdyb3VwRGVmYXVsdHMub25DYW5jZWwsIGUpXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uRHJvcCh0aGlzLml0ZW0sIHRoaXMuZ2V0Q29udGFpbmVyKHRoaXMuaXRlbSksIGdyb3VwRGVmYXVsdHMub25Ecm9wLCBlKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNsZWFudXBcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJEaW1lbnNpb25zKClcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJPZmZzZXRQYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0QXBwZW5kZWRJdGVtID0gdGhpcy5zYW1lUmVzdWx0Qm94ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VhcmNoVmFsaWRUYXJnZXQ6IGZ1bmN0aW9uKHBvaW50ZXIsIGxhc3RQb2ludGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghcG9pbnRlcikge1xyXG4gICAgICAgICAgICAgICAgcG9pbnRlciA9IHRoaXMucmVsYXRpdmVQb2ludGVyIHx8IHRoaXMucG9pbnRlclxyXG4gICAgICAgICAgICAgICAgbGFzdFBvaW50ZXIgPSB0aGlzLmxhc3RSZWxhdGl2ZVBvaW50ZXIgfHwgdGhpcy5sYXN0UG9pbnRlclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlzdGFuY2VzID0gc29ydEJ5RGlzdGFuY2VEZXNjKHRoaXMuZ2V0Q29udGFpbmVyRGltZW5zaW9ucygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXIpLFxyXG4gICAgICAgICAgICAgICAgaSA9IGRpc3RhbmNlcy5sZW5ndGhcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGRpc3RhbmNlc1tpXVswXSxcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IGRpc3RhbmNlc1tpXVsxXVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZGlzdGFuY2UgfHwgdGhpcy5vcHRpb25zLnB1bGxQbGFjZWhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcnNbaW5kZXhdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250YWluZXIuZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLiRnZXRPZmZzZXRQYXJlbnQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldFBhcmVudCA9IGNvbnRhaW5lci5nZXRJdGVtT2Zmc2V0UGFyZW50KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXIgPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKHBvaW50ZXIsIG9mZnNldFBhcmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyID0gZ2V0UmVsYXRpdmVQb3NpdGlvbihsYXN0UG9pbnRlciwgb2Zmc2V0UGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIuc2VhcmNoVmFsaWRUYXJnZXQocG9pbnRlciwgbGFzdFBvaW50ZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2FtZVJlc3VsdEJveClcclxuICAgICAgICAgICAgICAgIHRoaXMuc2FtZVJlc3VsdEJveCA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW92ZVBsYWNlaG9sZGVyOiBmdW5jdGlvbihjb250YWluZXIsIGl0ZW0sIG1ldGhvZCwgc2FtZVJlc3VsdEJveCkge1xyXG4gICAgICAgICAgICB2YXIgbGFzdEFwcGVuZGVkSXRlbSA9IHRoaXMubGFzdEFwcGVuZGVkSXRlbVxyXG4gICAgICAgICAgICBpZiAoIXNhbWVSZXN1bHRCb3ggJiYgbGFzdEFwcGVuZGVkSXRlbSAmJiBsYXN0QXBwZW5kZWRJdGVtWzBdID09PSBpdGVtWzBdKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaXRlbVttZXRob2RdKHRoaXMucGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgIHRoaXMubGFzdEFwcGVuZGVkSXRlbSA9IGl0ZW1cclxuICAgICAgICAgICAgdGhpcy5zYW1lUmVzdWx0Qm94ID0gc2FtZVJlc3VsdEJveFxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYWZ0ZXJNb3ZlKHRoaXMucGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgaXRlbSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldENvbnRhaW5lckRpbWVuc2lvbnM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyRGltZW5zaW9ucylcclxuICAgICAgICAgICAgICAgIHNldERpbWVuc2lvbnModGhpcy5jb250YWluZXJzLCB0aGlzLmNvbnRhaW5lckRpbWVuc2lvbnMgPSBbXSwgdGhpcy5vcHRpb25zLnRvbGVyYW5jZSwgIXRoaXMuJGdldE9mZnNldFBhcmVudCgpKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJEaW1lbnNpb25zXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRDb250YWluZXI6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2xvc2VzdCh0aGlzLm9wdGlvbnMuY29udGFpbmVyU2VsZWN0b3IpLmRhdGEocGx1Z2luTmFtZSlcclxuICAgICAgICB9LFxyXG4gICAgICAgICRnZXRPZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vZmZzZXRQYXJlbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoIC0gMSxcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSB0aGlzLmNvbnRhaW5lcnNbaV0uZ2V0SXRlbU9mZnNldFBhcmVudCgpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucm9vdEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0UGFyZW50WzBdICE9IHRoaXMuY29udGFpbmVyc1tpXS5nZXRJdGVtT2Zmc2V0UGFyZW50KClbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGV2ZXJ5IGNvbnRhaW5lciBoYXMgdGhlIHNhbWUgb2Zmc2V0IHBhcmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZSBwb3NpdGlvbigpIHdoaWNoIGlzIHJlbGF0aXZlIHRvIHRoaXMgcGFyZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHVzZSBvZmZzZXQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcGFyZSAjc2V0RGltZW5zaW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMub2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0UGFyZW50XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRQb2ludGVyOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludGVyID0gdGhpcy5nZXRQb2ludGVyKGUpXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy4kZ2V0T2Zmc2V0UGFyZW50KCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWxhdGl2ZVBvaW50ZXIgPSBnZXRSZWxhdGl2ZVBvc2l0aW9uKHBvaW50ZXIsIHRoaXMuJGdldE9mZnNldFBhcmVudCgpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVsYXRpdmVQb2ludGVyID0gdGhpcy5yZWxhdGl2ZVBvaW50ZXJcclxuICAgICAgICAgICAgICAgIHRoaXMucmVsYXRpdmVQb2ludGVyID0gcmVsYXRpdmVQb2ludGVyXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubGFzdFBvaW50ZXIgPSB0aGlzLnBvaW50ZXJcclxuICAgICAgICAgICAgdGhpcy5wb2ludGVyID0gcG9pbnRlclxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGlzdGFuY2VNZXQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQb2ludGVyID0gdGhpcy5nZXRQb2ludGVyKGUpXHJcbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5tYXgoXHJcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLnBvaW50ZXIubGVmdCAtIGN1cnJlbnRQb2ludGVyLmxlZnQpLFxyXG4gICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5wb2ludGVyLnRvcCAtIGN1cnJlbnRQb2ludGVyLnRvcClcclxuICAgICAgICAgICAgKSA+PSB0aGlzLm9wdGlvbnMuZGlzdGFuY2UpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRQb2ludGVyOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiBlLnBhZ2VYIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWCxcclxuICAgICAgICAgICAgICAgIHRvcDogZS5wYWdlWSB8fCBlLm9yaWdpbmFsRXZlbnQucGFnZVlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dXBEZWxheVRpbWVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzXHJcbiAgICAgICAgICAgIHRoaXMuZGVsYXlNZXQgPSAhdGhpcy5vcHRpb25zLmRlbGF5XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGRlbGF5IHRpbWVyIGlmIG5lZWRlZFxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGVsYXlNZXQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9tb3VzZURlbGF5VGltZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbW91c2VEZWxheVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmRlbGF5TWV0ID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zLmRlbGF5KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzY3JvbGw6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckRpbWVuc2lvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhck9mZnNldFBhcmVudCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdG9nZ2xlTGlzdGVuZXJzOiBmdW5jdGlvbihtZXRob2QpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRzID0gWydkcmFnJywgJ2Ryb3AnLCAnc2Nyb2xsJ11cclxuXHJcbiAgICAgICAgICAgICQuZWFjaChldmVudHMsIGZ1bmN0aW9uKGksIGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LiRkb2N1bWVudFttZXRob2RdKGV2ZW50TmFtZXNbZXZlbnRdLCB0aGF0W2V2ZW50ICsgJ1Byb3h5J10pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbGVhck9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2Zmc2V0UGFyZW50ID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBSZWN1cnNpdmVseSBjbGVhciBjb250YWluZXIgYW5kIGl0ZW0gZGltZW5zaW9uc1xyXG4gICAgICAgIGNsZWFyRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuX2NsZWFyRGltZW5zaW9ucygpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0cmF2ZXJzZTogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sodGhpcylcclxuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmNvbnRhaW5lcnMubGVuZ3RoXHJcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyc1tpXS50cmF2ZXJzZShjYWxsYmFjaylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2NsZWFyRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRGltZW5zaW9ucyA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb250YWluZXJHcm91cHNbdGhpcy5vcHRpb25zLmdyb3VwXSA9IHVuZGVmaW5lZFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBDb250YWluZXIoZWxlbWVudCwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuZWwgPSBlbGVtZW50XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIGNvbnRhaW5lckRlZmF1bHRzLCBvcHRpb25zKVxyXG5cclxuICAgICAgICB0aGlzLmdyb3VwID0gQ29udGFpbmVyR3JvdXAuZ2V0KHRoaXMub3B0aW9ucylcclxuICAgICAgICB0aGlzLnJvb3RHcm91cCA9IHRoaXMub3B0aW9ucy5yb290R3JvdXAgfHwgdGhpcy5ncm91cFxyXG4gICAgICAgIHRoaXMuaGFuZGxlID0gdGhpcy5yb290R3JvdXAub3B0aW9ucy5oYW5kbGUgfHwgdGhpcy5yb290R3JvdXAub3B0aW9ucy5pdGVtU2VsZWN0b3JcclxuXHJcbiAgICAgICAgdmFyIGl0ZW1QYXRoID0gdGhpcy5yb290R3JvdXAub3B0aW9ucy5pdGVtUGF0aFxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gaXRlbVBhdGggPyB0aGlzLmVsLmZpbmQoaXRlbVBhdGgpIDogdGhpcy5lbFxyXG5cclxuICAgICAgICB0aGlzLnRhcmdldC5vbihldmVudE5hbWVzLnN0YXJ0LCB0aGlzLmhhbmRsZSwgJC5wcm94eSh0aGlzLmRyYWdJbml0LCB0aGlzKSlcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kcm9wKVxyXG4gICAgICAgICAgICB0aGlzLmdyb3VwLmNvbnRhaW5lcnMucHVzaCh0aGlzKVxyXG4gICAgfVxyXG5cclxuICAgIENvbnRhaW5lci5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgZHJhZ0luaXQ6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIHJvb3RHcm91cCA9IHRoaXMucm9vdEdyb3VwXHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiZcclxuICAgICAgICAgICAgICAgICFyb290R3JvdXAuZHJhZ0luaXREb25lICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZHJhZyAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1ZhbGlkRHJhZyhlKSkge1xyXG4gICAgICAgICAgICAgICAgcm9vdEdyb3VwLmRyYWdJbml0KGUsIHRoaXMpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGlzVmFsaWREcmFnOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlLndoaWNoID09IDEgfHxcclxuICAgICAgICAgICAgICAgIGUudHlwZSA9PSBcInRvdWNoc3RhcnRcIiAmJiBlLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGggPT0gMVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VhcmNoVmFsaWRUYXJnZXQ6IGZ1bmN0aW9uKHBvaW50ZXIsIGxhc3RQb2ludGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXN0YW5jZXMgPSBzb3J0QnlEaXN0YW5jZURlc2ModGhpcy5nZXRJdGVtRGltZW5zaW9ucygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBvaW50ZXIpLFxyXG4gICAgICAgICAgICAgICAgaSA9IGRpc3RhbmNlcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICByb290R3JvdXAgPSB0aGlzLnJvb3RHcm91cCxcclxuICAgICAgICAgICAgICAgIHZhbGlkVGFyZ2V0ID0gIXJvb3RHcm91cC5vcHRpb25zLmlzVmFsaWRUYXJnZXQgfHxcclxuICAgICAgICAgICAgICAgIHJvb3RHcm91cC5vcHRpb25zLmlzVmFsaWRUYXJnZXQocm9vdEdyb3VwLml0ZW0sIHRoaXMpXHJcblxyXG4gICAgICAgICAgICBpZiAoIWkgJiYgdmFsaWRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJvb3RHcm91cC5tb3ZlUGxhY2Vob2xkZXIodGhpcywgdGhpcy50YXJnZXQsIFwiYXBwZW5kXCIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBkaXN0YW5jZXNbaV1bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gZGlzdGFuY2VzW2ldWzFdXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkaXN0YW5jZSAmJiB0aGlzLmhhc0NoaWxkR3JvdXAoaW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IHRoaXMuZ2V0Q29udGFpbmVyR3JvdXAoaW5kZXgpLnNlYXJjaFZhbGlkVGFyZ2V0KHBvaW50ZXIsIGxhc3RQb2ludGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsaWRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlUGxhY2Vob2xkZXIoaW5kZXgsIHBvaW50ZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW92ZVBsYWNlaG9sZGVyOiBmdW5jdGlvbihpbmRleCwgcG9pbnRlcikge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9ICQodGhpcy5pdGVtc1tpbmRleF0pLFxyXG4gICAgICAgICAgICAgICAgZGltID0gdGhpcy5pdGVtRGltZW5zaW9uc1tpbmRleF0sXHJcbiAgICAgICAgICAgICAgICBtZXRob2QgPSBcImFmdGVyXCIsXHJcbiAgICAgICAgICAgICAgICB3aWR0aCA9IGl0ZW0ub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gaXRlbS5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gaXRlbS5vZmZzZXQoKSxcclxuICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3ggPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IG9mZnNldC5sZWZ0ICsgd2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBvZmZzZXQudG9wLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogb2Zmc2V0LnRvcCArIGhlaWdodFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnZlcnRpY2FsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeUNlbnRlciA9IChkaW1bMl0gKyBkaW1bM10pIC8gMixcclxuICAgICAgICAgICAgICAgICAgICBpblVwcGVySGFsZiA9IHBvaW50ZXIudG9wIDw9IHlDZW50ZXJcclxuICAgICAgICAgICAgICAgIGlmIChpblVwcGVySGFsZikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiYmVmb3JlXCJcclxuICAgICAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94LmJvdHRvbSAtPSBoZWlnaHQgLyAyXHJcbiAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94LnRvcCArPSBoZWlnaHQgLyAyXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeENlbnRlciA9IChkaW1bMF0gKyBkaW1bMV0pIC8gMixcclxuICAgICAgICAgICAgICAgICAgICBpbkxlZnRIYWxmID0gcG9pbnRlci5sZWZ0IDw9IHhDZW50ZXJcclxuICAgICAgICAgICAgICAgIGlmIChpbkxlZnRIYWxmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gXCJiZWZvcmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNhbWVSZXN1bHRCb3gucmlnaHQgLT0gd2lkdGggLyAyXHJcbiAgICAgICAgICAgICAgICB9IGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94LmxlZnQgKz0gd2lkdGggLyAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzQ2hpbGRHcm91cChpbmRleCkpXHJcbiAgICAgICAgICAgICAgICBzYW1lUmVzdWx0Qm94ID0gZW1wdHlCb3hcclxuICAgICAgICAgICAgdGhpcy5yb290R3JvdXAubW92ZVBsYWNlaG9sZGVyKHRoaXMsIGl0ZW0sIG1ldGhvZCwgc2FtZVJlc3VsdEJveClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldEl0ZW1EaW1lbnNpb25zOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLml0ZW1EaW1lbnNpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy4kZ2V0Q2hpbGRyZW4odGhpcy5lbCwgXCJpdGVtXCIpLmZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgICBcIjpub3QoLlwiICsgdGhpcy5ncm91cC5vcHRpb25zLnBsYWNlaG9sZGVyQ2xhc3MgKyBcIiwgLlwiICsgdGhpcy5ncm91cC5vcHRpb25zLmRyYWdnZWRDbGFzcyArIFwiKVwiXHJcbiAgICAgICAgICAgICAgICApLmdldCgpXHJcbiAgICAgICAgICAgICAgICBzZXREaW1lbnNpb25zKHRoaXMuaXRlbXMsIHRoaXMuaXRlbURpbWVuc2lvbnMgPSBbXSwgdGhpcy5vcHRpb25zLnRvbGVyYW5jZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pdGVtRGltZW5zaW9uc1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0SXRlbU9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQsXHJcbiAgICAgICAgICAgICAgICBlbCA9IHRoaXMuZWxcclxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIGVsIG1pZ2h0IGJlIGVtcHR5IHdlIGhhdmUgdG8gY2hlY2sgZWwgaXRzZWxmIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIG5vdCBkbyBzb21ldGhpbmcgbGlrZSBlbC5jaGlsZHJlbigpLmZpcnN0KCkub2Zmc2V0UGFyZW50KClcclxuICAgICAgICAgICAgaWYgKGVsLmNzcyhcInBvc2l0aW9uXCIpID09PSBcInJlbGF0aXZlXCIgfHwgZWwuY3NzKFwicG9zaXRpb25cIikgPT09IFwiYWJzb2x1dGVcIiB8fCBlbC5jc3MoXCJwb3NpdGlvblwiKSA9PT0gXCJmaXhlZFwiKVxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gZWxcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0UGFyZW50ID0gZWwub2Zmc2V0UGFyZW50KClcclxuICAgICAgICAgICAgcmV0dXJuIG9mZnNldFBhcmVudFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFzQ2hpbGRHcm91cDogZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5uZXN0ZWQgJiYgdGhpcy5nZXRDb250YWluZXJHcm91cChpbmRleClcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldENvbnRhaW5lckdyb3VwOiBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRHcm91cCA9ICQuZGF0YSh0aGlzLml0ZW1zW2luZGV4XSwgc3ViQ29udGFpbmVyS2V5KVxyXG4gICAgICAgICAgICBpZiAoY2hpbGRHcm91cCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRDb250YWluZXJzID0gdGhpcy4kZ2V0Q2hpbGRyZW4odGhpcy5pdGVtc1tpbmRleF0sIFwiY29udGFpbmVyXCIpXHJcbiAgICAgICAgICAgICAgICBjaGlsZEdyb3VwID0gZmFsc2VcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDb250YWluZXJzWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RHcm91cDogdGhpcy5yb290R3JvdXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwOiBncm91cENvdW50ZXIrK1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRHcm91cCA9IGNoaWxkQ29udGFpbmVyc1twbHVnaW5OYW1lXShvcHRpb25zKS5kYXRhKHBsdWdpbk5hbWUpLmdyb3VwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkLmRhdGEodGhpcy5pdGVtc1tpbmRleF0sIHN1YkNvbnRhaW5lcktleSwgY2hpbGRHcm91cClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGRHcm91cFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJGdldENoaWxkcmVuOiBmdW5jdGlvbihwYXJlbnQsIHR5cGUpIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLnJvb3RHcm91cC5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgcGF0aCA9IG9wdGlvbnNbdHlwZSArIFwiUGF0aFwiXSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gb3B0aW9uc1t0eXBlICsgXCJTZWxlY3RvclwiXVxyXG5cclxuICAgICAgICAgICAgcGFyZW50ID0gJChwYXJlbnQpXHJcbiAgICAgICAgICAgIGlmIChwYXRoKVxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LmZpbmQocGF0aClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnQuY2hpbGRyZW4oc2VsZWN0b3IpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfc2VyaWFsaXplOiBmdW5jdGlvbihwYXJlbnQsIGlzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcyxcclxuICAgICAgICAgICAgICAgIGNoaWxkVHlwZSA9IGlzQ29udGFpbmVyID8gXCJpdGVtXCIgOiBcImNvbnRhaW5lclwiLFxyXG5cclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gdGhpcy4kZ2V0Q2hpbGRyZW4ocGFyZW50LCBjaGlsZFR5cGUpLm5vdCh0aGlzLm9wdGlvbnMuZXhjbHVkZSkubWFwKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0Ll9zZXJpYWxpemUoJCh0aGlzKSwgIWlzQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgfSkuZ2V0KClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvb3RHcm91cC5vcHRpb25zLnNlcmlhbGl6ZShwYXJlbnQsIGNoaWxkcmVuLCBpc0NvbnRhaW5lcilcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRyYXZlcnNlOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAkLmVhY2godGhpcy5pdGVtcyB8fCBbXSwgZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwID0gJC5kYXRhKHRoaXMsIHN1YkNvbnRhaW5lcktleSlcclxuICAgICAgICAgICAgICAgIGlmIChncm91cClcclxuICAgICAgICAgICAgICAgICAgICBncm91cC50cmF2ZXJzZShjYWxsYmFjaylcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjYWxsYmFjayh0aGlzKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2NsZWFyRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbURpbWVuc2lvbnMgPSB1bmRlZmluZWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50YXJnZXQub2ZmKGV2ZW50TmFtZXMuc3RhcnQsIHRoaXMuaGFuZGxlKTtcclxuICAgICAgICAgICAgdGhpcy5lbC5yZW1vdmVEYXRhKHBsdWdpbk5hbWUpXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRyb3ApXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyb3VwLmNvbnRhaW5lcnMgPSAkLmdyZXAodGhpcy5ncm91cC5jb250YWluZXJzLCBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsICE9IHRoYXRcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAkLmVhY2godGhpcy5pdGVtcyB8fCBbXSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkLnJlbW92ZURhdGEodGhpcywgc3ViQ29udGFpbmVyS2V5KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgQVBJID0ge1xyXG4gICAgICAgIGVuYWJsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuZGlzYWJsZWQgPSBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24ob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBvYmplY3QuZGlzYWJsZWQgPSB0cnVlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VyaWFsaXplKHRoaXMuZWwsIHRydWUpXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50cmF2ZXJzZShmdW5jdGlvbihvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIG9iamVjdC5fY2xlYXJEaW1lbnNpb25zKClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXZlcnNlKGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgb2JqZWN0Ll9kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICQuZXh0ZW5kKENvbnRhaW5lci5wcm90b3R5cGUsIEFQSSlcclxuXHJcbiAgICAvKipcclxuICAgICAqIGpRdWVyeSBBUElcclxuICAgICAqXHJcbiAgICAgKiBQYXJhbWV0ZXJzIGFyZVxyXG4gICAgICogICBlaXRoZXIgb3B0aW9ucyBvbiBpbml0XHJcbiAgICAgKiAgIG9yIGEgbWV0aG9kIG5hbWUgZm9sbG93ZWQgYnkgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIG1ldGhvZFxyXG4gICAgICovXHJcbiAgICAkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24obWV0aG9kT3JPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpXHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyICR0ID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIG9iamVjdCA9ICR0LmRhdGEocGx1Z2luTmFtZSlcclxuXHJcbiAgICAgICAgICAgIGlmIChvYmplY3QgJiYgQVBJW21ldGhvZE9yT3B0aW9uc10pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQVBJW21ldGhvZE9yT3B0aW9uc10uYXBwbHkob2JqZWN0LCBhcmdzKSB8fCB0aGlzXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFvYmplY3QgJiYgKG1ldGhvZE9yT3B0aW9ucyA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSBcIm9iamVjdFwiKSlcclxuICAgICAgICAgICAgICAgICR0LmRhdGEocGx1Z2luTmFtZSwgbmV3IENvbnRhaW5lcigkdCwgbWV0aG9kT3JPcHRpb25zKSlcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxufSkoanExMTEsIHdpbmRvdywgJ3NvcnRhYmxlJyk7IiwiLyohIG5hbm9TY3JvbGxlckpTIC0gdjAuOC40IC0gMjAxNFxuICogaHR0cDovL2phbWVzZmxvcmVudGluby5naXRodWIuY29tL25hbm9TY3JvbGxlckpTL1xuICogQ29weXJpZ2h0IChjKSAyMDE0IEphbWVzIEZsb3JlbnRpbm87IExpY2Vuc2VkIE1JVCAqL1xuKGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgQlJPV1NFUl9JU19JRTcsIEJST1dTRVJfU0NST0xMQkFSX1dJRFRILCBET01TQ1JPTEwsIERPV04sIERSQUcsIEVOVEVSLCBLRVlET1dOLCBLRVlVUCwgTU9VU0VET1dOLCBNT1VTRUVOVEVSLCBNT1VTRU1PVkUsIE1PVVNFVVAsIE1PVVNFV0hFRUwsIE5hbm9TY3JvbGwsIFBBTkVET1dOLCBSRVNJWkUsIFNDUk9MTCwgU0NST0xMQkFSLCBUT1VDSE1PVkUsIFVQLCBXSEVFTCwgY0FGLCBkZWZhdWx0cywgZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoLCBoYXNUcmFuc2Zvcm0sIGlzRkZXaXRoQnVnZ3lTY3JvbGxiYXIsIHJBRiwgdHJhbnNmb3JtLCBfZWxlbWVudFN0eWxlLCBfcHJlZml4U3R5bGUsIF92ZW5kb3I7XG4gICAgZGVmYXVsdHMgPSB7XG5cbiAgICAgICAgLyoqXG4gICAgICBhIGNsYXNzbmFtZSBmb3IgdGhlIHBhbmUgZWxlbWVudC5cbiAgICAgIEBwcm9wZXJ0eSBwYW5lQ2xhc3NcbiAgICAgIEB0eXBlIFN0cmluZ1xuICAgICAgQGRlZmF1bHQgJ25hbm8tcGFuZSdcbiAgICAgKi9cbiAgICAgICAgcGFuZUNsYXNzOiAnbmFuby1wYW5lJyxcblxuICAgICAgICAvKipcbiAgICAgIGEgY2xhc3NuYW1lIGZvciB0aGUgc2xpZGVyIGVsZW1lbnQuXG4gICAgICBAcHJvcGVydHkgc2xpZGVyQ2xhc3NcbiAgICAgIEB0eXBlIFN0cmluZ1xuICAgICAgQGRlZmF1bHQgJ25hbm8tc2xpZGVyJ1xuICAgICAqL1xuICAgICAgICBzbGlkZXJDbGFzczogJ25hbm8tc2xpZGVyJyxcblxuICAgICAgICAvKipcbiAgICAgIGEgY2xhc3NuYW1lIGZvciB0aGUgY29udGVudCBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IGNvbnRlbnRDbGFzc1xuICAgICAgQHR5cGUgU3RyaW5nXG4gICAgICBAZGVmYXVsdCAnbmFuby1jb250ZW50J1xuICAgICAqL1xuICAgICAgICBjb250ZW50Q2xhc3M6ICduYW5vLWNvbnRlbnQnLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBzZXR0aW5nIHRvIGVuYWJsZSBuYXRpdmUgc2Nyb2xsaW5nIGluIGlPUyBkZXZpY2VzLlxuICAgICAgQHByb3BlcnR5IGlPU05hdGl2ZVNjcm9sbGluZ1xuICAgICAgQHR5cGUgQm9vbGVhblxuICAgICAgQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICAgICAgaU9TTmF0aXZlU2Nyb2xsaW5nOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgIGEgc2V0dGluZyB0byBwcmV2ZW50IHRoZSByZXN0IG9mIHRoZSBwYWdlIGJlaW5nXG4gICAgICBzY3JvbGxlZCB3aGVuIHVzZXIgc2Nyb2xscyB0aGUgYC5jb250ZW50YCBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHByZXZlbnRQYWdlU2Nyb2xsaW5nXG4gICAgICBAdHlwZSBCb29sZWFuXG4gICAgICBAZGVmYXVsdCBmYWxzZVxuICAgICAqL1xuICAgICAgICBwcmV2ZW50UGFnZVNjcm9sbGluZzogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIHNldHRpbmcgdG8gZGlzYWJsZSBiaW5kaW5nIHRvIHRoZSByZXNpemUgZXZlbnQuXG4gICAgICBAcHJvcGVydHkgZGlzYWJsZVJlc2l6ZVxuICAgICAgQHR5cGUgQm9vbGVhblxuICAgICAgQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICAgICAgZGlzYWJsZVJlc2l6ZTogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICBhIHNldHRpbmcgdG8gbWFrZSB0aGUgc2Nyb2xsYmFyIGFsd2F5cyB2aXNpYmxlLlxuICAgICAgQHByb3BlcnR5IGFsd2F5c1Zpc2libGVcbiAgICAgIEB0eXBlIEJvb2xlYW5cbiAgICAgIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgICAgIGFsd2F5c1Zpc2libGU6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBkZWZhdWx0IHRpbWVvdXQgZm9yIHRoZSBgZmxhc2goKWAgbWV0aG9kLlxuICAgICAgQHByb3BlcnR5IGZsYXNoRGVsYXlcbiAgICAgIEB0eXBlIE51bWJlclxuICAgICAgQGRlZmF1bHQgMTUwMFxuICAgICAqL1xuICAgICAgICBmbGFzaERlbGF5OiAxNTAwLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBtaW5pbXVtIGhlaWdodCBmb3IgdGhlIGAuc2xpZGVyYCBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHNsaWRlck1pbkhlaWdodFxuICAgICAgQHR5cGUgTnVtYmVyXG4gICAgICBAZGVmYXVsdCAyMFxuICAgICAqL1xuICAgICAgICBzbGlkZXJNaW5IZWlnaHQ6IDIwLFxuXG4gICAgICAgIC8qKlxuICAgICAgYSBtYXhpbXVtIGhlaWdodCBmb3IgdGhlIGAuc2xpZGVyYCBlbGVtZW50LlxuICAgICAgQHByb3BlcnR5IHNsaWRlck1heEhlaWdodFxuICAgICAgQHR5cGUgTnVtYmVyXG4gICAgICBAZGVmYXVsdCBudWxsXG4gICAgICovXG4gICAgICAgIHNsaWRlck1heEhlaWdodDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgIGFuIGFsdGVybmF0ZSBkb2N1bWVudCBjb250ZXh0LlxuICAgICAgQHByb3BlcnR5IGRvY3VtZW50Q29udGV4dFxuICAgICAgQHR5cGUgRG9jdW1lbnRcbiAgICAgIEBkZWZhdWx0IG51bGxcbiAgICAgKi9cbiAgICAgICAgZG9jdW1lbnRDb250ZXh0OiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgYW4gYWx0ZXJuYXRlIHdpbmRvdyBjb250ZXh0LlxuICAgICAgQHByb3BlcnR5IHdpbmRvd0NvbnRleHRcbiAgICAgIEB0eXBlIFdpbmRvd1xuICAgICAgQGRlZmF1bHQgbnVsbFxuICAgICAqL1xuICAgICAgICB3aW5kb3dDb250ZXh0OiBudWxsXG4gICAgfTtcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBTQ1JPTExCQVJcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgU0NST0xMQkFSID0gJ3Njcm9sbGJhcic7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgU0NST0xMXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIFNDUk9MTCA9ICdzY3JvbGwnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFRE9XTlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFRE9XTiA9ICdtb3VzZWRvd24nO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFRU5URVJcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRUVOVEVSID0gJ21vdXNlZW50ZXInO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IE1PVVNFTU9WRVxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBNT1VTRU1PVkUgPSAnbW91c2Vtb3ZlJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRVdIRUVMXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgTU9VU0VXSEVFTCA9ICdtb3VzZXdoZWVsJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBNT1VTRVVQXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIE1PVVNFVVAgPSAnbW91c2V1cCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgUkVTSVpFXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgUkVTSVpFID0gJ3Jlc2l6ZSc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgRFJBR1xuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBEUkFHID0gJ2RyYWcnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEVOVEVSXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEVOVEVSID0gJ2VudGVyJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBVUFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBVUCA9ICd1cCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgUEFORURPV05cbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgUEFORURPV04gPSAncGFuZWRvd24nO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IERPTVNDUk9MTFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBET01TQ1JPTEwgPSAnRE9NTW91c2VTY3JvbGwnO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IERPV05cbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgRE9XTiA9ICdkb3duJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBXSEVFTFxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBXSEVFTCA9ICd3aGVlbCc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgS0VZRE9XTlxuICAgIEB0eXBlIFN0cmluZ1xuICAgIEBzdGF0aWNcbiAgICBAZmluYWxcbiAgICBAcHJpdmF0ZVxuICAgKi9cbiAgICBLRVlET1dOID0gJ2tleWRvd24nO1xuXG4gICAgLyoqXG4gICAgQHByb3BlcnR5IEtFWVVQXG4gICAgQHR5cGUgU3RyaW5nXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEtFWVVQID0gJ2tleXVwJztcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBUT1VDSE1PVkVcbiAgICBAdHlwZSBTdHJpbmdcbiAgICBAc3RhdGljXG4gICAgQGZpbmFsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgVE9VQ0hNT1ZFID0gJ3RvdWNobW92ZSc7XG5cbiAgICAvKipcbiAgICBAcHJvcGVydHkgQlJPV1NFUl9JU19JRTdcbiAgICBAdHlwZSBCb29sZWFuXG4gICAgQHN0YXRpY1xuICAgIEBmaW5hbFxuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIEJST1dTRVJfSVNfSUU3ID0gd2luZG93Lm5hdmlnYXRvci5hcHBOYW1lID09PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJyAmJiAvbXNpZSA3Li9pLnRlc3Qod2luZG93Lm5hdmlnYXRvci5hcHBWZXJzaW9uKSAmJiB3aW5kb3cuQWN0aXZlWE9iamVjdDtcblxuICAgIC8qKlxuICAgIEBwcm9wZXJ0eSBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSFxuICAgIEB0eXBlIE51bWJlclxuICAgIEBzdGF0aWNcbiAgICBAZGVmYXVsdCBudWxsXG4gICAgQHByaXZhdGVcbiAgICovXG4gICAgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggPSBudWxsO1xuICAgIHJBRiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgY0FGID0gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lO1xuICAgIF9lbGVtZW50U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcbiAgICBfdmVuZG9yID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSwgdHJhbnNmb3JtLCB2ZW5kb3IsIHZlbmRvcnMsIF9pLCBfbGVuO1xuICAgICAgICB2ZW5kb3JzID0gWyd0JywgJ3dlYmtpdFQnLCAnTW96VCcsICdtc1QnLCAnT1QnXTtcbiAgICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gdmVuZG9ycy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHtcbiAgICAgICAgICAgIHZlbmRvciA9IHZlbmRvcnNbaV07XG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSB2ZW5kb3JzW2ldICsgJ3JhbnNmb3JtJztcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0gaW4gX2VsZW1lbnRTdHlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2ZW5kb3JzW2ldLnN1YnN0cigwLCB2ZW5kb3JzW2ldLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KSgpO1xuICAgIF9wcmVmaXhTdHlsZSA9IGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgIGlmIChfdmVuZG9yID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChfdmVuZG9yID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdmVuZG9yICsgc3R5bGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHlsZS5zdWJzdHIoMSk7XG4gICAgfTtcbiAgICB0cmFuc2Zvcm0gPSBfcHJlZml4U3R5bGUoJ3RyYW5zZm9ybScpO1xuICAgIGhhc1RyYW5zZm9ybSA9IHRyYW5zZm9ybSAhPT0gZmFsc2U7XG5cbiAgICAvKipcbiAgICBSZXR1cm5zIGJyb3dzZXIncyBuYXRpdmUgc2Nyb2xsYmFyIHdpZHRoXG4gICAgQG1ldGhvZCBnZXRCcm93c2VyU2Nyb2xsYmFyV2lkdGhcbiAgICBAcmV0dXJuIHtOdW1iZXJ9IHRoZSBzY3JvbGxiYXIgd2lkdGggaW4gcGl4ZWxzXG4gICAgQHN0YXRpY1xuICAgIEBwcml2YXRlXG4gICAqL1xuICAgIGdldEJyb3dzZXJTY3JvbGxiYXJXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3V0ZXIsIG91dGVyU3R5bGUsIHNjcm9sbGJhcldpZHRoO1xuICAgICAgICBvdXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdXRlclN0eWxlID0gb3V0ZXIuc3R5bGU7XG4gICAgICAgIG91dGVyU3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBvdXRlclN0eWxlLndpZHRoID0gJzEwMHB4JztcbiAgICAgICAgb3V0ZXJTdHlsZS5oZWlnaHQgPSAnMTAwcHgnO1xuICAgICAgICBvdXRlclN0eWxlLm92ZXJmbG93ID0gU0NST0xMO1xuICAgICAgICBvdXRlclN0eWxlLnRvcCA9ICctOTk5OXB4JztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdXRlcik7XG4gICAgICAgIHNjcm9sbGJhcldpZHRoID0gb3V0ZXIub2Zmc2V0V2lkdGggLSBvdXRlci5jbGllbnRXaWR0aDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdXRlcik7XG4gICAgICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcbiAgICB9O1xuICAgIGlzRkZXaXRoQnVnZ3lTY3JvbGxiYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlzT1NYRkYsIHVhLCB2ZXJzaW9uO1xuICAgICAgICB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuICAgICAgICBpc09TWEZGID0gLyg/PS4rTWFjIE9TIFgpKD89LitGaXJlZm94KS8udGVzdCh1YSk7XG4gICAgICAgIGlmICghaXNPU1hGRikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZlcnNpb24gPSAvRmlyZWZveFxcL1xcZHsyfVxcLi8uZXhlYyh1YSk7XG4gICAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvblswXS5yZXBsYWNlKC9cXEQrL2csICcnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNPU1hGRiAmJiArdmVyc2lvbiA+IDIzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICBAY2xhc3MgTmFub1Njcm9sbFxuICAgIEBwYXJhbSBlbGVtZW50IHtIVE1MRWxlbWVudHxOb2RlfSB0aGUgbWFpbiBlbGVtZW50XG4gICAgQHBhcmFtIG9wdGlvbnMge09iamVjdH0gbmFub1Njcm9sbGVyJ3Mgb3B0aW9uc1xuICAgIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgICBOYW5vU2Nyb2xsID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICBmdW5jdGlvbiBOYW5vU2Nyb2xsKGVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmVsID0gZWw7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEggfHwgKEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID0gZ2V0QnJvd3NlclNjcm9sbGJhcldpZHRoKCkpO1xuICAgICAgICAgICAgdGhpcy4kZWwgPSAkKHRoaXMuZWwpO1xuICAgICAgICAgICAgdGhpcy5kb2MgPSAkKHRoaXMub3B0aW9ucy5kb2N1bWVudENvbnRleHQgfHwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgdGhpcy53aW4gPSAkKHRoaXMub3B0aW9ucy53aW5kb3dDb250ZXh0IHx8IHdpbmRvdyk7XG4gICAgICAgICAgICB0aGlzLmJvZHkgPSB0aGlzLmRvYy5maW5kKCdib2R5Jyk7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50ID0gdGhpcy4kZWwuY2hpbGRyZW4oXCIuXCIgKyBvcHRpb25zLmNvbnRlbnRDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LmF0dHIoJ3RhYmluZGV4JywgdGhpcy5vcHRpb25zLnRhYkluZGV4IHx8IDApO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy4kY29udGVudFswXTtcbiAgICAgICAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IDA7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmlPU05hdGl2ZVNjcm9sbGluZyAmJiAodGhpcy5lbC5zdHlsZS5XZWJraXRPdmVyZmxvd1Njcm9sbGluZyAhPSBudWxsKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF0aXZlU2Nyb2xsaW5nKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY3JlYXRlRXZlbnRzKCk7XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50cygpO1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvKipcbiAgICAgIFByZXZlbnRzIHRoZSByZXN0IG9mIHRoZSBwYWdlIGJlaW5nIHNjcm9sbGVkXG4gICAgICB3aGVuIHVzZXIgc2Nyb2xscyB0aGUgYC5uYW5vLWNvbnRlbnRgIGVsZW1lbnQuXG4gICAgICBAbWV0aG9kIHByZXZlbnRTY3JvbGxpbmdcbiAgICAgIEBwYXJhbSBldmVudCB7RXZlbnR9XG4gICAgICBAcGFyYW0gZGlyZWN0aW9uIHtTdHJpbmd9IFNjcm9sbCBkaXJlY3Rpb24gKHVwIG9yIGRvd24pXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnByZXZlbnRTY3JvbGxpbmcgPSBmdW5jdGlvbihlLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09IERPTVNDUk9MTCkge1xuICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IERPV04gJiYgZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA+IDAgfHwgZGlyZWN0aW9uID09PSBVUCAmJiBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09IE1PVVNFV0hFRUwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWUub3JpZ2luYWxFdmVudCB8fCAhZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSBET1dOICYmIGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhIDwgMCB8fCBkaXJlY3Rpb24gPT09IFVQICYmIGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBFbmFibGUgaU9TIG5hdGl2ZSBzY3JvbGxpbmdcbiAgICAgIEBtZXRob2QgbmF0aXZlU2Nyb2xsaW5nXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLm5hdGl2ZVNjcm9sbGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xuICAgICAgICAgICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBVcGRhdGVzIHRob3NlIG5hbm9TY3JvbGxlciBwcm9wZXJ0aWVzIHRoYXRcbiAgICAgIGFyZSByZWxhdGVkIHRvIGN1cnJlbnQgc2Nyb2xsYmFyIHBvc2l0aW9uLlxuICAgICAgQG1ldGhvZCB1cGRhdGVTY3JvbGxWYWx1ZXNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUudXBkYXRlU2Nyb2xsVmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCwgZGlyZWN0aW9uO1xuICAgICAgICAgICAgY29udGVudCA9IHRoaXMuY29udGVudDtcbiAgICAgICAgICAgIHRoaXMubWF4U2Nyb2xsVG9wID0gY29udGVudC5zY3JvbGxIZWlnaHQgLSBjb250ZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucHJldlNjcm9sbFRvcCA9IHRoaXMuY29udGVudFNjcm9sbFRvcCB8fCAwO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50U2Nyb2xsVG9wID0gY29udGVudC5zY3JvbGxUb3A7XG4gICAgICAgICAgICBkaXJlY3Rpb24gPSB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgPiB0aGlzLnByZXZpb3VzUG9zaXRpb24gPyBcImRvd25cIiA6IHRoaXMuY29udGVudFNjcm9sbFRvcCA8IHRoaXMucHJldmlvdXNQb3NpdGlvbiA/IFwidXBcIiA6IFwic2FtZVwiO1xuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gdGhpcy5jb250ZW50U2Nyb2xsVG9wO1xuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiAhPT0gXCJzYW1lXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKCd1cGRhdGUnLCB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLmNvbnRlbnRTY3JvbGxUb3AsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMubWF4U2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IGRpcmVjdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMubWF4U2xpZGVyVG9wID0gdGhpcy5wYW5lSGVpZ2h0IC0gdGhpcy5zbGlkZXJIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJUb3AgPSB0aGlzLm1heFNjcm9sbFRvcCA9PT0gMCA/IDAgOiB0aGlzLmNvbnRlbnRTY3JvbGxUb3AgKiB0aGlzLm1heFNsaWRlclRvcCAvIHRoaXMubWF4U2Nyb2xsVG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBVcGRhdGVzIENTUyBzdHlsZXMgZm9yIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uLlxuICAgICAgVXNlcyBDU1MgMmQgdHJhbnNmcm9tcyBhbmQgYHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWVgIGlmIGF2YWlsYWJsZS5cbiAgICAgIEBtZXRob2Qgc2V0T25TY3JvbGxTdHlsZXNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2V0T25TY3JvbGxTdHlsZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjc3NWYWx1ZTtcbiAgICAgICAgICAgIGlmIChoYXNUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICBjc3NWYWx1ZSA9IHt9O1xuICAgICAgICAgICAgICAgIGNzc1ZhbHVlW3RyYW5zZm9ybV0gPSBcInRyYW5zbGF0ZSgwLCBcIiArIHRoaXMuc2xpZGVyVG9wICsgXCJweClcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3NzVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogdGhpcy5zbGlkZXJUb3BcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJBRikge1xuICAgICAgICAgICAgICAgIGlmIChjQUYgJiYgdGhpcy5zY3JvbGxSQUYpIHtcbiAgICAgICAgICAgICAgICAgICAgY0FGKHRoaXMuc2Nyb2xsUkFGKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxSQUYgPSByQUYoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbFJBRiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2xpZGVyLmNzcyhjc3NWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcykpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci5jc3MoY3NzVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBDcmVhdGVzIGV2ZW50IHJlbGF0ZWQgbWV0aG9kc1xuICAgICAgQG1ldGhvZCBjcmVhdGVFdmVudHNcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuY3JlYXRlRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICAgICAgICAgICBkb3duOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlzQmVpbmdEcmFnZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZnNldFkgPSBlLnBhZ2VZIC0gX3RoaXMuc2xpZGVyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMuc2xpZGVyLmlzKGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9mZnNldFkgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGFuZS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kb2MuYmluZChNT1VTRU1PVkUsIF90aGlzLmV2ZW50c1tEUkFHXSkuYmluZChNT1VTRVVQLCBfdGhpcy5ldmVudHNbVVBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmJvZHkuYmluZChNT1VTRUVOVEVSLCBfdGhpcy5ldmVudHNbRU5URVJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSh0aGlzKSxcbiAgICAgICAgICAgICAgICBkcmFnOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNsaWRlclkgPSBlLnBhZ2VZIC0gX3RoaXMuJGVsLm9mZnNldCgpLnRvcCAtIF90aGlzLnBhbmVUb3AgLSAoX3RoaXMub2Zmc2V0WSB8fCBfdGhpcy5zbGlkZXJIZWlnaHQgKiAwLjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY29udGVudFNjcm9sbFRvcCA+PSBfdGhpcy5tYXhTY3JvbGxUb3AgJiYgX3RoaXMucHJldlNjcm9sbFRvcCAhPT0gX3RoaXMubWF4U2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuJGVsLnRyaWdnZXIoJ3Njcm9sbGVuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID09PSAwICYmIF90aGlzLnByZXZTY3JvbGxUb3AgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsdG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgdXA6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaXNCZWluZ0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBhbmUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZG9jLnVuYmluZChNT1VTRU1PVkUsIF90aGlzLmV2ZW50c1tEUkFHXSkudW5iaW5kKE1PVVNFVVAsIF90aGlzLmV2ZW50c1tVUF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYm9keS51bmJpbmQoTU9VU0VFTlRFUiwgX3RoaXMuZXZlbnRzW0VOVEVSXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgcmVzaXplOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgcGFuZWRvd246IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSA9IChlLm9mZnNldFkgfHwgZS5vcmlnaW5hbEV2ZW50LmxheWVyWSkgLSAoX3RoaXMuc2xpZGVySGVpZ2h0ICogMC41KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXZlbnRzLmRvd24oZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgc2Nyb2xsOiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZVNjcm9sbFZhbHVlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQmVpbmdEcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zbGlkZXJZID0gX3RoaXMuc2xpZGVyVG9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldE9uU2Nyb2xsU3R5bGVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnRTY3JvbGxUb3AgPj0gX3RoaXMubWF4U2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMucHJldmVudFBhZ2VTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJldmVudFNjcm9sbGluZyhlLCBET1dOKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnByZXZTY3JvbGxUb3AgIT09IF90aGlzLm1heFNjcm9sbFRvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kZWwudHJpZ2dlcignc2Nyb2xsZW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5jb250ZW50U2Nyb2xsVG9wID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMucHJldmVudFBhZ2VTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJldmVudFNjcm9sbGluZyhlLCBVUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5wcmV2U2Nyb2xsVG9wICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRlbC50cmlnZ2VyKCdzY3JvbGx0b3AnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgd2hlZWw6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhID0gZS5kZWx0YSB8fCBlLndoZWVsRGVsdGEgfHwgKGUub3JpZ2luYWxFdmVudCAmJiBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSkgfHwgLWUuZGV0YWlsIHx8IChlLm9yaWdpbmFsRXZlbnQgJiYgLWUub3JpZ2luYWxFdmVudC5kZXRhaWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2xpZGVyWSArPSAtZGVsdGEgLyAzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkodGhpcyksXG4gICAgICAgICAgICAgICAgZW50ZXI6IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9yZWY7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmlzQmVpbmdEcmFnZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChlLmJ1dHRvbnMgfHwgZS53aGljaCkgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9yZWYgPSBfdGhpcy5ldmVudHMpW1VQXS5hcHBseShfcmVmLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKHRoaXMpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBBZGRzIGV2ZW50IGxpc3RlbmVycyB3aXRoIGpRdWVyeS5cbiAgICAgIEBtZXRob2QgYWRkRXZlbnRzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmFkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50cztcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRzKCk7XG4gICAgICAgICAgICBldmVudHMgPSB0aGlzLmV2ZW50cztcbiAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRpc2FibGVSZXNpemUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndpbi5iaW5kKFJFU0laRSwgZXZlbnRzW1JFU0laRV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLmJpbmQoTU9VU0VET1dOLCBldmVudHNbRE9XTl0pO1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5iaW5kKE1PVVNFRE9XTiwgZXZlbnRzW1BBTkVET1dOXSkuYmluZChcIlwiICsgTU9VU0VXSEVFTCArIFwiIFwiICsgRE9NU0NST0xMLCBldmVudHNbV0hFRUxdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuYmluZChcIlwiICsgU0NST0xMICsgXCIgXCIgKyBNT1VTRVdIRUVMICsgXCIgXCIgKyBET01TQ1JPTEwgKyBcIiBcIiArIFRPVUNITU9WRSwgZXZlbnRzW1NDUk9MTF0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBSZW1vdmVzIGV2ZW50IGxpc3RlbmVycyB3aXRoIGpRdWVyeS5cbiAgICAgIEBtZXRob2QgcmVtb3ZlRXZlbnRzXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnJlbW92ZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50cztcbiAgICAgICAgICAgIGV2ZW50cyA9IHRoaXMuZXZlbnRzO1xuICAgICAgICAgICAgdGhpcy53aW4udW5iaW5kKFJFU0laRSwgZXZlbnRzW1JFU0laRV0pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyLnVuYmluZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS51bmJpbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQudW5iaW5kKFwiXCIgKyBTQ1JPTEwgKyBcIiBcIiArIE1PVVNFV0hFRUwgKyBcIiBcIiArIERPTVNDUk9MTCArIFwiIFwiICsgVE9VQ0hNT1ZFLCBldmVudHNbU0NST0xMXSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIEdlbmVyYXRlcyBuYW5vU2Nyb2xsZXIncyBzY3JvbGxiYXIgYW5kIGVsZW1lbnRzIGZvciBpdC5cbiAgICAgIEBtZXRob2QgZ2VuZXJhdGVcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBwcml2YXRlXG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuZ2VuZXJhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50Q2xhc3MsIGNzc1J1bGUsIGN1cnJlbnRQYWRkaW5nLCBvcHRpb25zLCBwYW5lLCBwYW5lQ2xhc3MsIHNsaWRlckNsYXNzO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHBhbmVDbGFzcyA9IG9wdGlvbnMucGFuZUNsYXNzLCBzbGlkZXJDbGFzcyA9IG9wdGlvbnMuc2xpZGVyQ2xhc3MsIGNvbnRlbnRDbGFzcyA9IG9wdGlvbnMuY29udGVudENsYXNzO1xuICAgICAgICAgICAgaWYgKCEocGFuZSA9IHRoaXMuJGVsLmNoaWxkcmVuKFwiLlwiICsgcGFuZUNsYXNzKSkubGVuZ3RoICYmICFwYW5lLmNoaWxkcmVuKFwiLlwiICsgc2xpZGVyQ2xhc3MpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmFwcGVuZChcIjxkaXYgY2xhc3M9XFxcIlwiICsgcGFuZUNsYXNzICsgXCJcXFwiPjxkaXYgY2xhc3M9XFxcIlwiICsgc2xpZGVyQ2xhc3MgKyBcIlxcXCIgLz48L2Rpdj5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhbmUgPSB0aGlzLiRlbC5jaGlsZHJlbihcIi5cIiArIHBhbmVDbGFzcyk7XG4gICAgICAgICAgICB0aGlzLnNsaWRlciA9IHRoaXMucGFuZS5maW5kKFwiLlwiICsgc2xpZGVyQ2xhc3MpO1xuICAgICAgICAgICAgaWYgKEJST1dTRVJfU0NST0xMQkFSX1dJRFRIID09PSAwICYmIGlzRkZXaXRoQnVnZ3lTY3JvbGxiYXIoKSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWRkaW5nID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5jb250ZW50LCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXJpZ2h0JykucmVwbGFjZSgvW14wLTkuXSsvZywgJycpO1xuICAgICAgICAgICAgICAgIGNzc1J1bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtMTQsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogK2N1cnJlbnRQYWRkaW5nICsgMTRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChCUk9XU0VSX1NDUk9MTEJBUl9XSURUSCkge1xuICAgICAgICAgICAgICAgIGNzc1J1bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtQlJPV1NFUl9TQ1JPTExCQVJfV0lEVEhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdoYXMtc2Nyb2xsYmFyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3NzUnVsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3MoY3NzUnVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgQG1ldGhvZCByZXN0b3JlXG4gICAgICBAcHJpdmF0ZVxuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnJlc3RvcmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFuZS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZEV2ZW50cygpO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBSZXNldHMgbmFub1Njcm9sbGVyJ3Mgc2Nyb2xsYmFyLlxuICAgICAgQG1ldGhvZCByZXNldFxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKCk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250ZW50LCBjb250ZW50SGVpZ2h0LCBjb250ZW50UG9zaXRpb24sIGNvbnRlbnRTdHlsZSwgY29udGVudFN0eWxlT3ZlcmZsb3dZLCBwYW5lQm90dG9tLCBwYW5lSGVpZ2h0LCBwYW5lT3V0ZXJIZWlnaHQsIHBhbmVUb3AsIHBhcmVudE1heEhlaWdodCwgcmlnaHQsIHNsaWRlckhlaWdodDtcbiAgICAgICAgICAgIGlmICh0aGlzLmlPU05hdGl2ZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEhlaWdodCA9IHRoaXMuY29udGVudC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLiRlbC5maW5kKFwiLlwiICsgdGhpcy5vcHRpb25zLnBhbmVDbGFzcykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZSgpLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbnQgPSB0aGlzLmNvbnRlbnQ7XG4gICAgICAgICAgICBjb250ZW50U3R5bGUgPSBjb250ZW50LnN0eWxlO1xuICAgICAgICAgICAgY29udGVudFN0eWxlT3ZlcmZsb3dZID0gY29udGVudFN0eWxlLm92ZXJmbG93WTtcbiAgICAgICAgICAgIGlmIChCUk9XU0VSX0lTX0lFNykge1xuICAgICAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLiRjb250ZW50LmhlaWdodCgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50SGVpZ2h0ID0gY29udGVudC5zY3JvbGxIZWlnaHQgKyBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSDtcbiAgICAgICAgICAgIHBhcmVudE1heEhlaWdodCA9IHBhcnNlSW50KHRoaXMuJGVsLmNzcyhcIm1heC1oZWlnaHRcIiksIDEwKTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRNYXhIZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuaGVpZ2h0KFwiXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmhlaWdodChjb250ZW50LnNjcm9sbEhlaWdodCA+IHBhcmVudE1heEhlaWdodCA/IHBhcmVudE1heEhlaWdodCA6IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhbmVIZWlnaHQgPSB0aGlzLnBhbmUub3V0ZXJIZWlnaHQoZmFsc2UpO1xuICAgICAgICAgICAgcGFuZVRvcCA9IHBhcnNlSW50KHRoaXMucGFuZS5jc3MoJ3RvcCcpLCAxMCk7XG4gICAgICAgICAgICBwYW5lQm90dG9tID0gcGFyc2VJbnQodGhpcy5wYW5lLmNzcygnYm90dG9tJyksIDEwKTtcbiAgICAgICAgICAgIHBhbmVPdXRlckhlaWdodCA9IHBhbmVIZWlnaHQgKyBwYW5lVG9wICsgcGFuZUJvdHRvbTtcbiAgICAgICAgICAgIHNsaWRlckhlaWdodCA9IE1hdGgucm91bmQocGFuZU91dGVySGVpZ2h0IC8gY29udGVudEhlaWdodCAqIHBhbmVPdXRlckhlaWdodCk7XG4gICAgICAgICAgICBpZiAoc2xpZGVySGVpZ2h0IDwgdGhpcy5vcHRpb25zLnNsaWRlck1pbkhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNsaWRlckhlaWdodCA9IHRoaXMub3B0aW9ucy5zbGlkZXJNaW5IZWlnaHQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCh0aGlzLm9wdGlvbnMuc2xpZGVyTWF4SGVpZ2h0ICE9IG51bGwpICYmIHNsaWRlckhlaWdodCA+IHRoaXMub3B0aW9ucy5zbGlkZXJNYXhIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzbGlkZXJIZWlnaHQgPSB0aGlzLm9wdGlvbnMuc2xpZGVyTWF4SGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbnRlbnRTdHlsZU92ZXJmbG93WSA9PT0gU0NST0xMICYmIGNvbnRlbnRTdHlsZS5vdmVyZmxvd1ggIT09IFNDUk9MTCkge1xuICAgICAgICAgICAgICAgIHNsaWRlckhlaWdodCArPSBCUk9XU0VSX1NDUk9MTEJBUl9XSURUSDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWF4U2xpZGVyVG9wID0gcGFuZU91dGVySGVpZ2h0IC0gc2xpZGVySGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5jb250ZW50SGVpZ2h0ID0gY29udGVudEhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucGFuZUhlaWdodCA9IHBhbmVIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnBhbmVPdXRlckhlaWdodCA9IHBhbmVPdXRlckhlaWdodDtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVySGVpZ2h0ID0gc2xpZGVySGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5wYW5lVG9wID0gcGFuZVRvcDtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyLmhlaWdodChzbGlkZXJIZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5ldmVudHMuc2Nyb2xsKCk7XG4gICAgICAgICAgICB0aGlzLnBhbmUuc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAoKGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ID09PSBjb250ZW50LmNsaWVudEhlaWdodCkgfHwgKHRoaXMucGFuZS5vdXRlckhlaWdodCh0cnVlKSA+PSBjb250ZW50LnNjcm9sbEhlaWdodCAmJiBjb250ZW50U3R5bGVPdmVyZmxvd1kgIT09IFNDUk9MTCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lbC5jbGllbnRIZWlnaHQgPT09IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICYmIGNvbnRlbnRTdHlsZU92ZXJmbG93WSA9PT0gU0NST0xMKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXIuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlci5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnBhbmUuY3NzKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAodGhpcy5vcHRpb25zLmFsd2F5c1Zpc2libGUgPyAxIDogJycpLFxuICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6ICh0aGlzLm9wdGlvbnMuYWx3YXlzVmlzaWJsZSA/ICd2aXNpYmxlJyA6ICcnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250ZW50UG9zaXRpb24gPSB0aGlzLiRjb250ZW50LmNzcygncG9zaXRpb24nKTtcbiAgICAgICAgICAgIGlmIChjb250ZW50UG9zaXRpb24gPT09ICdzdGF0aWMnIHx8IGNvbnRlbnRQb3NpdGlvbiA9PT0gJ3JlbGF0aXZlJykge1xuICAgICAgICAgICAgICAgIHJpZ2h0ID0gcGFyc2VJbnQodGhpcy4kY29udGVudC5jc3MoJ3JpZ2h0JyksIDEwKTtcbiAgICAgICAgICAgICAgICBpZiAocmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IHJpZ2h0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBAbWV0aG9kIHNjcm9sbFxuICAgICAgQHByaXZhdGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbDogJ3RvcCcgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNsaWRlclkgPSBNYXRoLm1heCgwLCB0aGlzLnNsaWRlclkpO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXJZID0gTWF0aC5taW4odGhpcy5tYXhTbGlkZXJUb3AsIHRoaXMuc2xpZGVyWSk7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnNjcm9sbFRvcCh0aGlzLm1heFNjcm9sbFRvcCAqIHRoaXMuc2xpZGVyWSAvIHRoaXMubWF4U2xpZGVyVG9wKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbFZhbHVlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0T25TY3JvbGxTdHlsZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBTY3JvbGwgYXQgdGhlIGJvdHRvbSB3aXRoIGFuIG9mZnNldCB2YWx1ZVxuICAgICAgQG1ldGhvZCBzY3JvbGxCb3R0b21cbiAgICAgIEBwYXJhbSBvZmZzZXRZIHtOdW1iZXJ9XG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBzY3JvbGxCb3R0b206IHZhbHVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLnNjcm9sbEJvdHRvbSA9IGZ1bmN0aW9uKG9mZnNldFkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuc2Nyb2xsVG9wKHRoaXMuY29udGVudEhlaWdodCAtIHRoaXMuJGNvbnRlbnQuaGVpZ2h0KCkgLSBvZmZzZXRZKS50cmlnZ2VyKE1PVVNFV0hFRUwpO1xuICAgICAgICAgICAgdGhpcy5zdG9wKCkucmVzdG9yZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG5cblxuICAgICAgICAvKipcbiAgICAgIFNjcm9sbCBhdCB0aGUgdG9wIHdpdGggYW4gb2Zmc2V0IHZhbHVlXG4gICAgICBAbWV0aG9kIHNjcm9sbFRvcFxuICAgICAgQHBhcmFtIG9mZnNldFkge051bWJlcn1cbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHNjcm9sbFRvcDogdmFsdWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc2Nyb2xsVG9wID0gZnVuY3Rpb24ob2Zmc2V0WSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kY29udGVudC5zY3JvbGxUb3AoK29mZnNldFkpLnRyaWdnZXIoTU9VU0VXSEVFTCk7XG4gICAgICAgICAgICB0aGlzLnN0b3AoKS5yZXN0b3JlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgU2Nyb2xsIHRvIGFuIGVsZW1lbnRcbiAgICAgIEBtZXRob2Qgc2Nyb2xsVG9cbiAgICAgIEBwYXJhbSBub2RlIHtOb2RlfSBBIG5vZGUgdG8gc2Nyb2xsIHRvLlxuICAgICAgQGNoYWluYWJsZVxuICAgICAgQGV4YW1wbGVcbiAgICAgICAgICAkKFwiLm5hbm9cIikubmFub1Njcm9sbGVyKHsgc2Nyb2xsVG86ICQoJyNhX25vZGUnKSB9KTtcbiAgICAgKi9cblxuICAgICAgICBOYW5vU2Nyb2xsLnByb3RvdHlwZS5zY3JvbGxUbyA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9wKHRoaXMuJGVsLmZpbmQobm9kZSkuZ2V0KDApLm9mZnNldFRvcCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8qKlxuICAgICAgVG8gc3RvcCB0aGUgb3BlcmF0aW9uLlxuICAgICAgVGhpcyBvcHRpb24gd2lsbCB0ZWxsIHRoZSBwbHVnaW4gdG8gZGlzYWJsZSBhbGwgZXZlbnQgYmluZGluZ3MgYW5kIGhpZGUgdGhlIGdhZGdldCBzY3JvbGxiYXIgZnJvbSB0aGUgVUkuXG4gICAgICBAbWV0aG9kIHN0b3BcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IHN0b3A6IHRydWUgfSk7XG4gICAgICovXG5cbiAgICAgICAgTmFub1Njcm9sbC5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKGNBRiAmJiB0aGlzLnNjcm9sbFJBRikge1xuICAgICAgICAgICAgICAgIGNBRih0aGlzLnNjcm9sbFJBRik7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxSQUYgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRzKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5lLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBEZXN0cm95cyBuYW5vU2Nyb2xsZXIgYW5kIHJlc3RvcmVzIGJyb3dzZXIncyBuYXRpdmUgc2Nyb2xsYmFyLlxuICAgICAgQG1ldGhvZCBkZXN0cm95XG4gICAgICBAY2hhaW5hYmxlXG4gICAgICBAZXhhbXBsZVxuICAgICAgICAgICQoXCIubmFub1wiKS5uYW5vU2Nyb2xsZXIoeyBkZXN0cm95OiB0cnVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaU9TTmF0aXZlU2Nyb2xsaW5nICYmIHRoaXMucGFuZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmUucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQlJPV1NFUl9JU19JRTcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRjb250ZW50LmhlaWdodCgnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LnJlbW92ZUF0dHIoJ3RhYmluZGV4Jyk7XG4gICAgICAgICAgICBpZiAodGhpcy4kZWwuaGFzQ2xhc3MoJ2hhcy1zY3JvbGxiYXInKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdoYXMtc2Nyb2xsYmFyJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kY29udGVudC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICByaWdodDogJydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgLyoqXG4gICAgICBUbyBmbGFzaCB0aGUgc2Nyb2xsYmFyIGdhZGdldCBmb3IgYW4gYW1vdW50IG9mIHRpbWUgZGVmaW5lZCBpbiBwbHVnaW4gc2V0dGluZ3MgKGRlZmF1bHRzIHRvIDEsNXMpLlxuICAgICAgVXNlZnVsIGlmIHlvdSB3YW50IHRvIHNob3cgdGhlIHVzZXIgKGUuZy4gb24gcGFnZWxvYWQpIHRoYXQgdGhlcmUgaXMgbW9yZSBjb250ZW50IHdhaXRpbmcgZm9yIGhpbS5cbiAgICAgIEBtZXRob2QgZmxhc2hcbiAgICAgIEBjaGFpbmFibGVcbiAgICAgIEBleGFtcGxlXG4gICAgICAgICAgJChcIi5uYW5vXCIpLm5hbm9TY3JvbGxlcih7IGZsYXNoOiB0cnVlIH0pO1xuICAgICAqL1xuXG4gICAgICAgIE5hbm9TY3JvbGwucHJvdG90eXBlLmZsYXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pT1NOYXRpdmVTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLnBhbmUuYWRkQ2xhc3MoJ2ZsYXNoZWQnKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wYW5lLnJlbW92ZUNsYXNzKCdmbGFzaGVkJyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKHRoaXMpLCB0aGlzLm9wdGlvbnMuZmxhc2hEZWxheSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gTmFub1Njcm9sbDtcblxuICAgIH0pKCk7XG4gICAgJC5mbi5uYW5vU2Nyb2xsZXIgPSBmdW5jdGlvbihzZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMsIHNjcm9sbGJhcjtcbiAgICAgICAgICAgIGlmICghKHNjcm9sbGJhciA9IHRoaXMubmFub3Njcm9sbGVyKSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5hbm9zY3JvbGxlciA9IHNjcm9sbGJhciA9IG5ldyBOYW5vU2Nyb2xsKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNldHRpbmdzICYmIHR5cGVvZiBzZXR0aW5ncyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICQuZXh0ZW5kKHNjcm9sbGJhci5vcHRpb25zLCBzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbEJvdHRvbSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsQm90dG9tKHNldHRpbmdzLnNjcm9sbEJvdHRvbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGxUb3AgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvcChzZXR0aW5ncy5zY3JvbGxUb3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsVG8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zY3JvbGxUbyhzZXR0aW5ncy5zY3JvbGxUbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zY3JvbGwgPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsQm90dG9tKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2Nyb2xsID09PSAndG9wJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsYmFyLnNjcm9sbFRvcCgwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnNjcm9sbCAmJiBzZXR0aW5ncy5zY3JvbGwgaW5zdGFuY2VvZiAkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuc2Nyb2xsVG8oc2V0dGluZ3Muc2Nyb2xsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLnN0b3ApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5kZXN0cm95KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuZmxhc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbGJhci5mbGFzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXIucmVzZXQoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAkLmZuLm5hbm9TY3JvbGxlci5Db25zdHJ1Y3RvciA9IE5hbm9TY3JvbGw7XG59KShqcTExMSwgd2luZG93LCBkb2N1bWVudCk7IiwiLypcbiAgTWFya3VwLmpzIHYxLjUuMjA6IGh0dHA6Ly9naXRodWIuY29tL2FkYW1tYXJrL01hcmt1cC5qc1xuICBNSVQgTGljZW5zZVxuICAoYykgMjAxMSAtIDIwMTQgQWRhbSBNYXJrXG4qL1xudmFyIE1hcmsgPSB7XG4gICAgLy8gVGVtcGxhdGVzIHRvIGluY2x1ZGUsIGJ5IG5hbWUuIEEgdGVtcGxhdGUgaXMgYSBzdHJpbmcuXG4gICAgaW5jbHVkZXM6IHt9LFxuXG4gICAgLy8gR2xvYmFsIHZhcmlhYmxlcywgYnkgbmFtZS4gR2xvYmFsIHZhcmlhYmxlcyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBjb250ZXh0IHZhcmlhYmxlcy5cbiAgICBnbG9iYWxzOiB7fSxcblxuICAgIC8vIFRoZSBkZWxpbWl0ZXIgdG8gdXNlIGluIHBpcGUgZXhwcmVzc2lvbnMsIGUuZy4ge3tpZiBjb2xvcnxsaWtlPnJlZH19LlxuICAgIGRlbGltaXRlcjogXCI+XCIsXG5cbiAgICAvLyBDb2xsYXBzZSB3aGl0ZSBzcGFjZSBiZXR3ZWVuIEhUTUwgZWxlbWVudHMgaW4gdGhlIHJlc3VsdGluZyBzdHJpbmcuXG4gICAgY29tcGFjdDogZmFsc2UsXG5cbiAgICAvLyBTaGFsbG93LWNvcHkgYW4gb2JqZWN0LlxuICAgIF9jb3B5OiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICBiID0gYiB8fCBbXTtcblxuICAgICAgICBmb3IgKHZhciBpIGluIGEpIHtcbiAgICAgICAgICAgIGJbaV0gPSBhW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGI7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgdmFsdWUgb2YgYSBudW1iZXIgb3Igc2l6ZSBvZiBhbiBhcnJheS4gVGhpcyBpcyBhIGhlbHBlciBmdW5jdGlvbiBmb3Igc2V2ZXJhbCBwaXBlcy5cbiAgICBfc2l6ZTogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBBcnJheSA/IGEubGVuZ3RoIDogKGEgfHwgMCk7XG4gICAgfSxcblxuICAgIC8vIFRoaXMgb2JqZWN0IHJlcHJlc2VudHMgYW4gaXRlcmF0aW9uLiBJdCBoYXMgYW4gaW5kZXggYW5kIGxlbmd0aC5cbiAgICBfaXRlcjogZnVuY3Rpb24gKGlkeCwgc2l6ZSkge1xuICAgICAgICB0aGlzLmlkeCA9IGlkeDtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBzaXplO1xuICAgICAgICB0aGlzLnNpZ24gPSBcIiNcIjtcblxuICAgICAgICAvLyBQcmludCB0aGUgaW5kZXggaWYgXCIjXCIgb3IgdGhlIGNvdW50IGlmIFwiIyNcIi5cbiAgICAgICAgdGhpcy50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlkeCArIHRoaXMuc2lnbi5sZW5ndGggLSAxO1xuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICAvLyBQYXNzIGEgdmFsdWUgdGhyb3VnaCBhIHNlcmllcyBvZiBwaXBlIGV4cHJlc3Npb25zLCBlLmcuIF9waXBlKDEyMywgW1wiYWRkPjEwXCIsXCJ0aW1lcz41XCJdKS5cbiAgICBfcGlwZTogZnVuY3Rpb24gKHZhbCwgZXhwcmVzc2lvbnMpIHtcbiAgICAgICAgdmFyIGV4cHJlc3Npb24sIHBhcnRzLCBmbiwgcmVzdWx0O1xuXG4gICAgICAgIC8vIElmIHdlIGhhdmUgZXhwcmVzc2lvbnMsIHB1bGwgb3V0IHRoZSBmaXJzdCBvbmUsIGUuZy4gXCJhZGQ+MTBcIi5cbiAgICAgICAgaWYgKChleHByZXNzaW9uID0gZXhwcmVzc2lvbnMuc2hpZnQoKSkpIHtcblxuICAgICAgICAgICAgLy8gU3BsaXQgdGhlIGV4cHJlc3Npb24gaW50byBpdHMgY29tcG9uZW50IHBhcnRzLCBlLmcuIFtcImFkZFwiLCBcIjEwXCJdLlxuICAgICAgICAgICAgcGFydHMgPSBleHByZXNzaW9uLnNwbGl0KHRoaXMuZGVsaW1pdGVyKTtcblxuICAgICAgICAgICAgLy8gUHVsbCBvdXQgdGhlIGZ1bmN0aW9uIG5hbWUsIGUuZy4gXCJhZGRcIi5cbiAgICAgICAgICAgIGZuID0gcGFydHMuc2hpZnQoKS50cmltKCk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gUnVuIHRoZSBmdW5jdGlvbiwgZS5nLiBhZGQoMTIzLCAxMCkgLi4uXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gTWFyay5waXBlc1tmbl0uYXBwbHkobnVsbCwgW3ZhbF0uY29uY2F0KHBhcnRzKSk7XG5cbiAgICAgICAgICAgICAgICAvLyAuLi4gdGhlbiBwaXBlIGFnYWluIHdpdGggcmVtYWluaW5nIGV4cHJlc3Npb25zLlxuICAgICAgICAgICAgICAgIHZhbCA9IHRoaXMuX3BpcGUocmVzdWx0LCBleHByZXNzaW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBwaXBlZCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgLy8gVE9ETyBkb2NcbiAgICBfZXZhbDogZnVuY3Rpb24gKGNvbnRleHQsIGZpbHRlcnMsIGNoaWxkKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9waXBlKGNvbnRleHQsIGZpbHRlcnMpLFxuICAgICAgICAgICAgY3R4ID0gcmVzdWx0LFxuICAgICAgICAgICAgaSA9IC0xLFxuICAgICAgICAgICAgaixcbiAgICAgICAgICAgIG9wdHM7XG5cbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBcIlwiO1xuICAgICAgICAgICAgaiA9IGN0eC5sZW5ndGg7XG5cbiAgICAgICAgICAgIHdoaWxlICgrK2kgPCBqKSB7XG4gICAgICAgICAgICAgICAgb3B0cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlcjogbmV3IHRoaXMuX2l0ZXIoaSwgailcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBjaGlsZCA/IE1hcmsudXAoY2hpbGQsIGN0eFtpXSwgb3B0cykgOiBjdHhbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVzdWx0IGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBNYXJrLnVwKGNoaWxkLCBjdHgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgLy8gUHJvY2VzcyB0aGUgY29udGVudHMgb2YgYW4gSUYgb3IgSUYvRUxTRSBibG9jay5cbiAgICBfdGVzdDogZnVuY3Rpb24gKGJvb2wsIGNoaWxkLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIFByb2Nlc3MgdGhlIGNoaWxkIHN0cmluZywgdGhlbiBzcGxpdCBpdCBpbnRvIHRoZSBJRiBhbmQgRUxTRSBwYXJ0cy5cbiAgICAgICAgdmFyIHN0ciA9IE1hcmsudXAoY2hpbGQsIGNvbnRleHQsIG9wdGlvbnMpLnNwbGl0KC9cXHtcXHtcXHMqZWxzZVxccypcXH1cXH0vKTtcblxuICAgICAgICAvLyBSZXR1cm4gdGhlIElGIG9yIEVMU0UgcGFydC4gSWYgbm8gRUxTRSwgcmV0dXJuIGFuIGVtcHR5IHN0cmluZy5cbiAgICAgICAgcmV0dXJuIChib29sID09PSBmYWxzZSA/IHN0clsxXSA6IHN0clswXSkgfHwgXCJcIjtcbiAgICB9LFxuXG4gICAgLy8gRGV0ZXJtaW5lIHRoZSBleHRlbnQgb2YgYSBibG9jayBleHByZXNzaW9uLCBlLmcuIFwie3tmb299fS4uLnt7L2Zvb319XCJcbiAgICBfYnJpZGdlOiBmdW5jdGlvbiAodHBsLCB0a24pIHtcbiAgICAgICAgaWYgKHRrbiA9PSBcIi5cIilcbiAgICAgICAgICAgIHRrbiA9IFwiXFxcXC5cIjsgICAgLy8gcmVnZXgtc2FmZVxuICAgICAgICB2YXIgZXhwID0gXCJ7e1xcXFxzKlwiICsgdGtuICsgXCIoW14vfV0rXFxcXHcqKT99fXx7ey9cIiArIHRrbiArIFwiXFxcXHMqfX1cIixcbiAgICAgICAgICAgIHJlID0gbmV3IFJlZ0V4cChleHAsIFwiZ1wiKSxcbiAgICAgICAgICAgIHRhZ3MgPSB0cGwubWF0Y2gocmUpIHx8IFtdLFxuICAgICAgICAgICAgdCxcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICBhID0gMCxcbiAgICAgICAgICAgIGIgPSAwLFxuICAgICAgICAgICAgYyA9IC0xLFxuICAgICAgICAgICAgZCA9IDA7XG5cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHQgPSBpO1xuICAgICAgICAgICAgYyA9IHRwbC5pbmRleE9mKHRhZ3NbdF0sIGMgKyAxKTtcblxuICAgICAgICAgICAgaWYgKHRhZ3NbdF0uaW5kZXhPZihcInt7L1wiKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgYisrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYSsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYSA9IHRwbC5pbmRleE9mKHRhZ3NbMF0pO1xuICAgICAgICBiID0gYSArIHRhZ3NbMF0ubGVuZ3RoO1xuICAgICAgICBkID0gYyArIHRhZ3NbdF0ubGVuZ3RoO1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgYmxvY2ssIGUuZy4gXCJ7e2Zvb319YmFye3svZm9vfX1cIiBhbmQgaXRzIGNoaWxkLCBlLmcuIFwiYmFyXCIuXG4gICAgICAgIHJldHVybiBbdHBsLnN1YnN0cmluZyhhLCBkKSwgdHBsLnN1YnN0cmluZyhiLCBjKV07XG4gICAgfVxufTtcblxuLy8gSW5qZWN0IGEgdGVtcGxhdGUgc3RyaW5nIHdpdGggY29udGV4dHVhbCBkYXRhIGFuZCByZXR1cm4gYSBuZXcgc3RyaW5nLlxuTWFyay51cCA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgY29udGV4dCwgb3B0aW9ucykge1xuICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IHt9O1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgLy8gTWF0Y2ggYWxsIHRhZ3MgbGlrZSBcInt7Li4ufX1cIi5cbiAgICB2YXIgcmUgPSAvXFx7XFx7KC4rPylcXH1cXH0vZyxcbiAgICAgICAgLy8gQWxsIHRhZ3MgaW4gdGhlIHRlbXBsYXRlLlxuICAgICAgICB0YWdzID0gdGVtcGxhdGUubWF0Y2gocmUpIHx8IFtdLFxuICAgICAgICAvLyBUaGUgdGFnIGJlaW5nIGV2YWx1YXRlZCwgZS5nLiBcInt7aGFtc3RlcnxkYW5jZX19XCIuXG4gICAgICAgIHRhZyxcbiAgICAgICAgLy8gVGhlIGV4cHJlc3Npb24gdG8gZXZhbHVhdGUgaW5zaWRlIHRoZSB0YWcsIGUuZy4gXCJoYW1zdGVyfGRhbmNlXCIuXG4gICAgICAgIHByb3AsXG4gICAgICAgIC8vIFRoZSB0b2tlbiBpdHNlbGYsIGUuZy4gXCJoYW1zdGVyXCIuXG4gICAgICAgIHRva2VuLFxuICAgICAgICAvLyBBbiBhcnJheSBvZiBwaXBlIGV4cHJlc3Npb25zLCBlLmcuIFtcIm1vcmU+MVwiLCBcImxlc3M+MlwiXS5cbiAgICAgICAgZmlsdGVycyA9IFtdLFxuICAgICAgICAvLyBEb2VzIHRoZSB0YWcgY2xvc2UgaXRzZWxmPyBlLmcuIFwie3tzdHVmZi99fVwiLlxuICAgICAgICBzZWxmeSxcbiAgICAgICAgLy8gSXMgdGhlIHRhZyBhbiBcImlmXCIgc3RhdGVtZW50P1xuICAgICAgICB0ZXN0eSxcbiAgICAgICAgLy8gVGhlIGNvbnRlbnRzIG9mIGEgYmxvY2sgdGFnLCBlLmcuIFwie3thYX19YmJ7ey9hYX19XCIgLT4gXCJiYlwiLlxuICAgICAgICBjaGlsZCxcbiAgICAgICAgLy8gVGhlIHJlc3VsdGluZyBzdHJpbmcuXG4gICAgICAgIHJlc3VsdCxcbiAgICAgICAgLy8gVGhlIGdsb2JhbCB2YXJpYWJsZSBiZWluZyBldmFsdWF0ZWQsIG9yIHVuZGVmaW5lZC5cbiAgICAgICAgZ2xvYmFsLFxuICAgICAgICAvLyBUaGUgaW5jbHVkZWQgdGVtcGxhdGUgYmVpbmcgZXZhbHVhdGVkLCBvciB1bmRlZmluZWQuXG4gICAgICAgIGluY2x1ZGUsXG4gICAgICAgIC8vIEEgcGxhY2Vob2xkZXIgdmFyaWFibGUuXG4gICAgICAgIGN0eCxcbiAgICAgICAgLy8gSXRlcmF0b3JzLlxuICAgICAgICBpID0gMCxcbiAgICAgICAgaiA9IDA7XG5cbiAgICAvLyBTZXQgY3VzdG9tIHBpcGVzLCBpZiBwcm92aWRlZC5cbiAgICBpZiAob3B0aW9ucy5waXBlcykge1xuICAgICAgICB0aGlzLl9jb3B5KG9wdGlvbnMucGlwZXMsIHRoaXMucGlwZXMpO1xuICAgIH1cblxuICAgIC8vIFNldCB0ZW1wbGF0ZXMgdG8gaW5jbHVkZSwgaWYgcHJvdmlkZWQuXG4gICAgaWYgKG9wdGlvbnMuaW5jbHVkZXMpIHtcbiAgICAgICAgdGhpcy5fY29weShvcHRpb25zLmluY2x1ZGVzLCB0aGlzLmluY2x1ZGVzKTtcbiAgICB9XG5cbiAgICAvLyBTZXQgZ2xvYmFsIHZhcmlhYmxlcywgaWYgcHJvdmlkZWQuXG4gICAgaWYgKG9wdGlvbnMuZ2xvYmFscykge1xuICAgICAgICB0aGlzLl9jb3B5KG9wdGlvbnMuZ2xvYmFscywgdGhpcy5nbG9iYWxzKTtcbiAgICB9XG5cbiAgICAvLyBPcHRpb25hbGx5IG92ZXJyaWRlIHRoZSBkZWxpbWl0ZXIuXG4gICAgaWYgKG9wdGlvbnMuZGVsaW1pdGVyKSB7XG4gICAgICAgIHRoaXMuZGVsaW1pdGVyID0gb3B0aW9ucy5kZWxpbWl0ZXI7XG4gICAgfVxuXG4gICAgLy8gT3B0aW9uYWxseSBjb2xsYXBzZSB3aGl0ZSBzcGFjZS5cbiAgICBpZiAob3B0aW9ucy5jb21wYWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5jb21wYWN0ID0gb3B0aW9ucy5jb21wYWN0O1xuICAgIH1cblxuICAgIC8vIExvb3AgdGhyb3VnaCB0YWdzLCBlLmcuIHt7YX19LCB7e2J9fSwge3tjfX0sIHt7L2N9fS5cbiAgICB3aGlsZSAoKHRhZyA9IHRhZ3NbaSsrXSkpIHtcbiAgICAgICAgcmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgICBjaGlsZCA9IFwiXCI7XG4gICAgICAgIHNlbGZ5ID0gdGFnLmluZGV4T2YoXCIvfX1cIikgPiAtMTtcbiAgICAgICAgcHJvcCA9IHRhZy5zdWJzdHIoMiwgdGFnLmxlbmd0aCAtIChzZWxmeSA/IDUgOiA0KSk7XG4gICAgICAgIHByb3AgPSBwcm9wLnJlcGxhY2UoL2AoLis/KWAvZywgZnVuY3Rpb24gKHMsIHAxKSB7XG4gICAgICAgICAgICByZXR1cm4gTWFyay51cChcInt7XCIgKyBwMSArIFwifX1cIiwgY29udGV4dCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZXN0eSA9IHByb3AudHJpbSgpLmluZGV4T2YoXCJpZiBcIikgPT09IDA7XG4gICAgICAgIGZpbHRlcnMgPSBwcm9wLnNwbGl0KFwifFwiKTtcbiAgICAgICAgZmlsdGVycy5zaGlmdCgpOyAvLyBpbnN0ZWFkIG9mIHNwbGljZSgxKVxuICAgICAgICBwcm9wID0gcHJvcC5yZXBsYWNlKC9eXFxzKmlmLywgXCJcIikuc3BsaXQoXCJ8XCIpLnNoaWZ0KCkudHJpbSgpO1xuICAgICAgICB0b2tlbiA9IHRlc3R5ID8gXCJpZlwiIDogcHJvcC5zcGxpdChcInxcIilbMF07XG4gICAgICAgIGN0eCA9IGNvbnRleHRbcHJvcF07XG5cbiAgICAgICAgLy8gSWYgYW4gXCJpZlwiIHN0YXRlbWVudCB3aXRob3V0IGZpbHRlcnMsIGFzc3VtZSBcInt7aWYgZm9vfG5vdGVtcHR5fX1cIlxuICAgICAgICBpZiAodGVzdHkgJiYgIWZpbHRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBmaWx0ZXJzID0gW1wibm90ZW1wdHlcIl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEb2VzIHRoZSB0YWcgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgY2xvc2luZyB0YWc/IElmIHNvLCBmaW5kIGl0IGFuZCBtb3ZlIHRoZSBjdXJzb3IuXG4gICAgICAgIGlmICghc2VsZnkgJiYgdGVtcGxhdGUuaW5kZXhPZihcInt7L1wiICsgdG9rZW4pID4gLTEpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2JyaWRnZSh0ZW1wbGF0ZSwgdG9rZW4pO1xuICAgICAgICAgICAgdGFnID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgY2hpbGQgPSByZXN1bHRbMV07XG4gICAgICAgICAgICBpICs9IHRhZy5tYXRjaChyZSkubGVuZ3RoIC0gMTsgLy8gZmFzdCBmb3J3YXJkXG4gICAgICAgIH1cblxuICAgICAgICAvLyBTa2lwIFwiZWxzZVwiIHRhZ3MuIFRoZXNlIGFyZSBwdWxsZWQgb3V0IGluIF90ZXN0KCkuXG4gICAgICAgIGlmICgvXlxce1xce1xccyplbHNlXFxzKlxcfVxcfSQvLnRlc3QodGFnKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGEgZ2xvYmFsIHZhcmlhYmxlLlxuICAgICAgICBlbHNlIGlmICgoZ2xvYmFsID0gdGhpcy5nbG9iYWxzW3Byb3BdKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsKGdsb2JhbCwgZmlsdGVycywgY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbiBpbmNsdWRlZCB0ZW1wbGF0ZS5cbiAgICAgICAgZWxzZSBpZiAoKGluY2x1ZGUgPSB0aGlzLmluY2x1ZGVzW3Byb3BdKSkge1xuICAgICAgICAgICAgaWYgKGluY2x1ZGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKE1hcmsudXAoaW5jbHVkZSwgY29udGV4dCwgb3B0aW9ucyksIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhIGxvb3AgY291bnRlciAoXCIjXCIgb3IgXCIjI1wiKS5cbiAgICAgICAgZWxzZSBpZiAocHJvcC5pbmRleE9mKFwiI1wiKSA+IC0xKSB7XG4gICAgICAgICAgICBvcHRpb25zLml0ZXIuc2lnbiA9IHByb3A7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKG9wdGlvbnMuaXRlciwgZmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIHRoZSBjdXJyZW50IGNvbnRleHQuXG4gICAgICAgIGVsc2UgaWYgKHByb3AgPT09IFwiLlwiKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9waXBlKGNvbnRleHQsIGZpbHRlcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhIHZhcmlhYmxlIHdpdGggZG90IG5vdGF0aW9uLCBlLmcuIFwiYS5iLmNcIlxuICAgICAgICBlbHNlIGlmIChwcm9wLmluZGV4T2YoXCIuXCIpID4gLTEpIHtcbiAgICAgICAgICAgIHByb3AgPSBwcm9wLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgICAgIGN0eCA9IE1hcmsuZ2xvYmFsc1twcm9wWzBdXTtcblxuICAgICAgICAgICAgaWYgKGN0eCkge1xuICAgICAgICAgICAgICAgIGogPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgY3R4ID0gY29udGV4dDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBhY3R1YWwgY29udGV4dFxuICAgICAgICAgICAgd2hpbGUgKGN0eCAmJiBqIDwgcHJvcC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjdHggPSBjdHhbcHJvcFtqKytdXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fZXZhbChjdHgsIGZpbHRlcnMsIGNoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW4gXCJpZlwiIHN0YXRlbWVudC5cbiAgICAgICAgZWxzZSBpZiAodGVzdHkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUoY3R4LCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgYW4gYXJyYXksIHdoaWNoIG1pZ2h0IGJlIGEgYmxvY2sgZXhwcmVzc2lvbi5cbiAgICAgICAgZWxzZSBpZiAoY3R4IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX2V2YWwoY3R4LCBmaWx0ZXJzLCBjaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGEgYmxvY2sgZXhwcmVzc2lvbi5cbiAgICAgICAgZWxzZSBpZiAoY2hpbGQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGN0eCA/IE1hcmsudXAoY2hpbGQsIGN0eCkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmFsdWF0aW5nIGFueXRoaW5nIGVsc2UuXG4gICAgICAgIGVsc2UgaWYgKGNvbnRleHQuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3BpcGUoY3R4LCBmaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV2YWx1YXRpbmcgc3BlY2lhbCBjYXNlOiBpZiB0aGUgcmVzdWx0aW5nIGNvbnRleHQgaXMgYWN0dWFsbHkgYW4gQXJyYXlcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9ldmFsKHJlc3VsdCwgZmlsdGVycywgY2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZhbHVhdGluZyBhbiBcImlmXCIgc3RhdGVtZW50LlxuICAgICAgICBpZiAodGVzdHkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3Rlc3QocmVzdWx0LCBjaGlsZCwgY29udGV4dCwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXBsYWNlIHRoZSB0YWcsIGUuZy4gXCJ7e25hbWV9fVwiLCB3aXRoIHRoZSByZXN1bHQsIGUuZy4gXCJBZGFtXCIuXG4gICAgICAgIHRlbXBsYXRlID0gdGVtcGxhdGUucmVwbGFjZSh0YWcsIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gXCI/Pz9cIiA6IHJlc3VsdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29tcGFjdCA/IHRlbXBsYXRlLnJlcGxhY2UoLz5cXHMrPC9nLCBcIj48XCIpIDogdGVtcGxhdGU7XG59O1xuXG4vLyBGcmVlYmllIHBpcGVzLiBTZWUgdXNhZ2UgaW4gUkVBRE1FLm1kXG5NYXJrLnBpcGVzID0ge1xuICAgIGVtcHR5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIHJldHVybiAhb2JqIHx8IChvYmogKyBcIlwiKS50cmltKCkubGVuZ3RoID09PSAwID8gb2JqIDogZmFsc2U7XG4gICAgfSxcbiAgICBub3RlbXB0eTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIChvYmogKyBcIlwiKS50cmltKCkubGVuZ3RoID8gb2JqIDogZmFsc2U7XG4gICAgfSxcbiAgICBibGFuazogZnVuY3Rpb24gKHN0ciwgdmFsKSB7XG4gICAgICAgIHJldHVybiAhIXN0ciB8fCBzdHIgPT09IDAgPyBzdHIgOiB2YWw7XG4gICAgfSxcbiAgICBtb3JlOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gTWFyay5fc2l6ZShhKSA+IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBsZXNzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gTWFyay5fc2l6ZShhKSA8IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBvcm1vcmU6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBNYXJrLl9zaXplKGEpID49IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBvcmxlc3M6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBNYXJrLl9zaXplKGEpIDw9IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBiZXR3ZWVuOiBmdW5jdGlvbiAoYSwgYiwgYykge1xuICAgICAgICBhID0gTWFyay5fc2l6ZShhKTtcbiAgICAgICAgcmV0dXJuIGEgPj0gYiAmJiBhIDw9IGMgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBlcXVhbHM6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhID09IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBub3RlcXVhbHM6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICE9IGIgPyBhIDogZmFsc2U7XG4gICAgfSxcbiAgICBsaWtlOiBmdW5jdGlvbiAoc3RyLCBwYXR0ZXJuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4sIFwiaVwiKS50ZXN0KHN0cikgPyBzdHIgOiBmYWxzZTtcbiAgICB9LFxuICAgIG5vdGxpa2U6IGZ1bmN0aW9uIChzdHIsIHBhdHRlcm4pIHtcbiAgICAgICAgcmV0dXJuICFNYXJrLnBpcGVzLmxpa2Uoc3RyLCBwYXR0ZXJuKSA/IHN0ciA6IGZhbHNlO1xuICAgIH0sXG4gICAgdXBjYXNlOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoc3RyKS50b1VwcGVyQ2FzZSgpO1xuICAgIH0sXG4gICAgZG93bmNhc2U6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyhzdHIpLnRvTG93ZXJDYXNlKCk7XG4gICAgfSxcbiAgICBjYXBjYXNlOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvKD86XnxcXHMpXFxTL2csIGZ1bmN0aW9uIChhKSB7IHJldHVybiBhLnRvVXBwZXJDYXNlKCk7IH0pO1xuICAgIH0sXG4gICAgY2hvcDogZnVuY3Rpb24gKHN0ciwgbikge1xuICAgICAgICByZXR1cm4gc3RyLmxlbmd0aCA+IG4gPyBzdHIuc3Vic3RyKDAsIG4pICsgXCIuLi5cIiA6IHN0cjtcbiAgICB9LFxuICAgIHRlYXNlOiBmdW5jdGlvbiAoc3RyLCBuKSB7XG4gICAgICAgIHZhciBhID0gc3RyLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgIHJldHVybiBhLnNsaWNlKDAsIG4pLmpvaW4oXCIgXCIpICsgKGEubGVuZ3RoID4gbiA/IFwiLi4uXCIgOiBcIlwiKTtcbiAgICB9LFxuICAgIHRyaW06IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgcmV0dXJuIHN0ci50cmltKCk7XG4gICAgfSxcbiAgICBwYWNrOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIudHJpbSgpLnJlcGxhY2UoL1xcc3syLH0vZywgXCIgXCIpO1xuICAgIH0sXG4gICAgcm91bmQ6IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoK251bSk7XG4gICAgfSxcbiAgICBjbGVhbjogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvPFxcLz9bXj5dKz4vZ2ksIFwiXCIpO1xuICAgIH0sXG4gICAgc2l6ZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmxlbmd0aDtcbiAgICB9LFxuICAgIGxlbmd0aDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmxlbmd0aDtcbiAgICB9LFxuICAgIHJldmVyc2U6IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChhcnIpLnJldmVyc2UoKTtcbiAgICB9LFxuICAgIGpvaW46IGZ1bmN0aW9uIChhcnIsIHNlcGFyYXRvcikge1xuICAgICAgICByZXR1cm4gYXJyLmpvaW4oc2VwYXJhdG9yKTtcbiAgICB9LFxuICAgIGxpbWl0OiBmdW5jdGlvbiAoYXJyLCBjb3VudCwgaWR4KSB7XG4gICAgICAgIHJldHVybiBhcnIuc2xpY2UoK2lkeCB8fCAwLCArY291bnQgKyAoK2lkeCB8fCAwKSk7XG4gICAgfSxcbiAgICBzcGxpdDogZnVuY3Rpb24gKHN0ciwgc2VwYXJhdG9yKSB7XG4gICAgICAgIHJldHVybiBzdHIuc3BsaXQoc2VwYXJhdG9yIHx8IFwiLFwiKTtcbiAgICB9LFxuICAgIGNob29zZTogZnVuY3Rpb24gKGJvb2wsIGlmZnksIGVsc3kpIHtcbiAgICAgICAgcmV0dXJuICEhYm9vbCA/IGlmZnkgOiAoZWxzeSB8fCBcIlwiKTtcbiAgICB9LFxuICAgIHRvZ2dsZTogZnVuY3Rpb24gKG9iaiwgY3N2MSwgY3N2Miwgc3RyKSB7XG4gICAgICAgIHJldHVybiBjc3YyLnNwbGl0KFwiLFwiKVtjc3YxLm1hdGNoKC9cXHcrL2cpLmluZGV4T2Yob2JqICsgXCJcIildIHx8IHN0cjtcbiAgICB9LFxuICAgIHNvcnQ6IGZ1bmN0aW9uIChhcnIsIHByb3ApIHtcbiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhW3Byb3BdID4gYltwcm9wXSA/IDEgOiAtMTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFtdLmNvbmNhdChhcnIpLnNvcnQocHJvcCA/IGZuIDogdW5kZWZpbmVkKTtcbiAgICB9LFxuICAgIGZpeDogZnVuY3Rpb24gKG51bSwgbikge1xuICAgICAgICByZXR1cm4gKCtudW0pLnRvRml4ZWQobik7XG4gICAgfSxcbiAgICBtb2Q6IGZ1bmN0aW9uIChudW0sIG4pIHtcbiAgICAgICAgcmV0dXJuICgrbnVtKSAlICgrbik7XG4gICAgfSxcbiAgICBkaXZpc2libGU6IGZ1bmN0aW9uIChudW0sIG4pIHtcbiAgICAgICAgcmV0dXJuIG51bSAmJiAoK251bSAlIG4pID09PSAwID8gbnVtIDogZmFsc2U7XG4gICAgfSxcbiAgICBldmVuOiBmdW5jdGlvbiAobnVtKSB7XG4gICAgICAgIHJldHVybiBudW0gJiYgKCtudW0gJiAxKSA9PT0gMCA/IG51bSA6IGZhbHNlO1xuICAgIH0sXG4gICAgb2RkOiBmdW5jdGlvbiAobnVtKSB7XG4gICAgICAgIHJldHVybiBudW0gJiYgKCtudW0gJiAxKSA9PT0gMSA/IG51bSA6IGZhbHNlO1xuICAgIH0sXG4gICAgbnVtYmVyOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHN0ci5yZXBsYWNlKC9bXlxcLVxcZFxcLl0vZywgXCJcIikpO1xuICAgIH0sXG4gICAgdXJsOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUkkoc3RyKTtcbiAgICB9LFxuICAgIGJvb2w6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICEhb2JqO1xuICAgIH0sXG4gICAgZmFsc3k6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuICFvYmo7XG4gICAgfSxcbiAgICBmaXJzdDogZnVuY3Rpb24gKGl0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXIuaWR4ID09PSAwO1xuICAgIH0sXG4gICAgbGFzdDogZnVuY3Rpb24gKGl0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXIuaWR4ID09PSBpdGVyLnNpemUgLSAxO1xuICAgIH0sXG4gICAgY2FsbDogZnVuY3Rpb24gKG9iaiwgZm4pIHtcbiAgICAgICAgcmV0dXJuIG9ialtmbl0uYXBwbHkob2JqLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMikpO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgICAgICAgTWFyay5nbG9iYWxzW2tleV0gPSBvYmo7IHJldHVybiBcIlwiO1xuICAgIH0sXG4gICAgbG9nOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG9iaik7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxufTtcblxuLy8gU2hpbSBmb3IgSUUuXG5pZiAodHlwZW9mIFN0cmluZy5wcm90b3R5cGUudHJpbSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgU3RyaW5nLnByb3RvdHlwZS50cmltID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpOyBcbiAgICB9XG59XG5cbi8vIEV4cG9ydCBmb3IgTm9kZS5qcyBhbmQgQU1ELlxuaWYgKHR5cGVvZiBtb2R1bGUgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IE1hcms7XG59XG5lbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIE1hcms7XG4gICAgfSk7XG59XG4iLCJ2YXIgZ3VpYVRWID0gKGZ1bmN0aW9uKCQpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICAvL2NvbnNvbGUubG9nKCdVc2EgalF1ZXJ5IHZlcnNpb246ICcgKyAkLmZuLmpxdWVyeSk7XHJcblxyXG4gICAgdmFyIGNhbmFsZXNVc3VhcmlvID0gWydsYTEnLCAnbGEyJywgJ2FudGVuYTMnLCAnY3VhdHJvJywgJ3RlbGVjaW5jbycsICdsYXNleHRhJ10sXHJcbiAgICAgICAgY2FuYWxlc0dsb2JhbCA9IHt9LFxyXG4gICAgICAgIGNhdGVnb3JpYXNVc3VhcmlvID0gW10sXHJcbiAgICAgICAgYXJyYXlDYW5hbGVzID0gW10sXHJcbiAgICAgICAgYXJyYXlEaWFzID0gW107XHJcbiAgICB2YXIgYWx0b0JhcnJhSG9yYXMgPSAzNSxcclxuICAgICAgICBhbmNob0JhcnJhQ2FuYWxlcyA9IDcwLFxyXG4gICAgICAgIGFsdG9DYW5hbCA9IDkwLFxyXG4gICAgICAgIHBpeGVsc1BvckhvcmEgPSAyNjAsXHJcbiAgICAgICAgcGl4ZWxzUG9yTWludXRvID0gcGl4ZWxzUG9ySG9yYSAvIDYwLFxyXG4gICAgICAgIGFuY2hvUG9yRGlhID0gcGl4ZWxzUG9ySG9yYSAqIDI0O1xyXG5cclxuICAgIC8vIFRPRE8gQWhvcmEgbWlzbW8gZm9yemFtb3MgZXN0YSBmZWNoYSBkZSBpbmljaW9cclxuICAgIHZhciBkaWFBY3R1YWwgPSBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIGhvcmFBY3R1YWwgPSB7XHJcbiAgICAgICAgICAgICdoJzogbGVmdFBhZChkaWFBY3R1YWwuZ2V0SG91cnMoKSwgMiksXHJcbiAgICAgICAgICAgICdtJzogbGVmdFBhZChkaWFBY3R1YWwuZ2V0TWludXRlcygpLCAyKVxyXG4gICAgICAgIH07XHJcbiAgICAvL2RpYUFjdHVhbC5zZXRUaW1lKERhdGUucGFyc2UoXCJNb24sIEp1bCAxNCAyMDE0IDAwOjAwOjAwIEdNVCswMjAwXCIpKTtcclxuICAgIGRpYUFjdHVhbC5zZXRUaW1lKERhdGUucGFyc2UoXCJNb24sIEp1bCAxNCAyMDE0XCIpKTtcclxuXHJcbiAgICB2YXIgJHZpZXdQb3J0ID0gJCgnLnZpZXdQb3J0Jyk7XHJcbiAgICB2YXIgJHNlbGVjdG9yQ2F0ZWdvcmlhcyA9ICQoJy5zZWxlY3RvckNhdGVnb3JpYXMnKTtcclxuICAgIHZhciAkc2VsZWN0b3JEaWFzID0gJCgnLnNlbGVjdG9yRGlhcycpO1xyXG4gICAgdmFyICRjb250UHJvZ3JhbWFzID0gJCgnLmNvbnRQcm9ncmFtYXMnKTtcclxuICAgIC8vdmFyICRpdGVtUHJvZ3JhbWEgPSAkKCcuaXRlbVByb2dyYW1hJyk7XHJcbiAgICB2YXIgJGNvbnRDYW5hbGVzID0gJCgnLmNvbnRDYW5hbGVzJyk7XHJcbiAgICB2YXIgJGJhcnJhSG9yYXMgPSAkKCcuYmFycmFIb3JhcycpO1xyXG4gICAgdmFyICRob3JhQWN0dWFsID0gJCgnLmhvcmFBY3R1YWwnKTtcclxuICAgIHZhciAkZmljaGFQcm9ncmFtYSA9ICQoJy5maWNoYVByb2dyYW1hJyk7XHJcbiAgICB2YXIgJGJhcnJhc0NhbmFsZXMgPSAkKCcuYmFycmFzQ2FuYWxlcycpO1xyXG4gICAgdmFyICRiYXJyYUxldHJhcyA9ICQoJy5iYXJyYUxldHJhcycpO1xyXG4gICAgdmFyICRvcmRlbkNhbmFsZXMgPSAkKCcub3JkZW5DYW5hbGVzJyk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY2NlZGUgYSBsYXMgY29va2llcyBkZWwgdXN1YXJpbyBwYXJhIHZlciBwZXJzb25hbGl6YWNpw7NuIGRlIGNhbmFsZXNcclxuICAgICAqIEByZXR1cm4ge2FycmF5fSBMaXN0YSBkZSBjYW5hbGVzIHBlcnNvbmFsaXphZG9zIHBvciBlbCB1c3VhcmlvXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNhcmdhQ29va2llcygpIHtcclxuICAgICAgICAvLyBUT0RPIENhcmdhciBjYW5hbGVzIGRlc2RlIHVuYSBjb29raWUsIHkgZ2VuZXJhciDDqXN0YSBjdWFuZG8gc2UgYWNjZWRlIHBvciBwcmltZXJhIHZlelxyXG4gICAgICAgIC8vIFRPRE8gQ2FyZ2FyIGRlIGxhcyBjb29raWVzIGxvcyBjYW5hbGVzIHJlc2FsdGFkb3MgZGVsIHNlbGVjdG9yQ2F0ZWdvcmlhc1xyXG4gICAgICAgIC8vIEzDs2dpY2EgZGUgbGVjdHVyYSBkZSBjb29raWVzXHJcbiAgICAgICAgdmFyIGRlZiA9ICQuRGVmZXJyZWQoKSxcclxuICAgICAgICAgICAgY2FuYWxlcywgY2F0ZWdvcmlhcztcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjYW5hbGVzID0gWyd0ZWxlY2luY28nLCAnYW50ZW5hMycsICdsYTInLCAnbGExJywgJ2N1YXRybycsICdsYXNleHRhJywgJ2hpc3RvcmlhJ107XHJcbiAgICAgICAgICAgIGNhdGVnb3JpYXNVc3VhcmlvID0gWzIsIDQsIDUsIDddO1xyXG4gICAgICAgICAgICBkZWYucmVzb2x2ZShjYW5hbGVzKTtcclxuICAgICAgICB9LCAzMDAwKTtcclxuICAgICAgICByZXR1cm4gZGVmLnByb21pc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNpYmUgbGEgbGlzdGEgZGUgY2FuYWxlcyBhIGNhcmdhciB5IGhhY2UgbGFzIGxsYW1hZGFzIGFzw61uY3JvbmFzXHJcbiAgICAgKiBAcGFyYW0ge2FycmF5fSBjYW5hbGVzIExpc3RhZG8gZGUgY2FuYWxlcyBhIGNhcmdhclxyXG4gICAgICogQHJldHVybiB7anNvbn0gRGF0b3MganNvbiBkZSBsYSBwcm9ncmFtYWNpw7NuIGFsIGNvbXBsZXRvIHBhcmEgbG9zIGNhbmFsZXMgc2VsZWNjaW9uYWRvc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYXJnYURhdG9zQ2FuYWxlcyhjYW5hbGVzKSB7XHJcbiAgICAgICAgLy8gQ2FyZ2FzIGFzw61uY3JvbmFzIGRlIHZhcmlvcyBjYW5hbGVzXHJcbiAgICAgICAgLy8gcG9yIGNhZGEgY2FuYWwsIGNhcmdhIHVuIGpzb25cclxuICAgICAgICB2YXIganNvbiA9IFtdLFxyXG4gICAgICAgICAgICBwcm9taXNlcyA9IFtdLFxyXG4gICAgICAgICAgICBudW1FbGVtZW50b3MgPSBjYW5hbGVzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgJC53aGVuLmFwcGx5KG51bGwsICQubWFwKGNhbmFsZXMsIGZ1bmN0aW9uKGNhbmFsLCBpKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWNoZXJvID0gJ2RhdG9zLycgKyBjYW5hbCArICcuanNvbic7XHJcblxyXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKCQuZ2V0KGZpY2hlcm8pLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgYXJyYXlDYW5hbGVzW2ldID0ganNvbltpXSA9IGRhdGE7XHJcbiAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheUNhbmFsZXNbaV0gPSBqc29uW2ldID0gJyc7XHJcbiAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIC8vIFJlc29sdmVyIGRlZmVycmVyIGN1YW5kbyBzZSBoYXlhbiBjYXJnYWRvIHRvZG9zIGxvcyBqc29uXHJcbiAgICAgICAgcmV0dXJuICQud2hlbi5hcHBseShudWxsLCBwcm9taXNlcykucHJvbWlzZSgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNpYmUgbGEgbGlzdGEgZGUgcHJvZ3JhbWFzIGEgcGludGFyIHBvciBjYW5hbCB5IGxhbnphIGVsIHBpbnRhZG8gZGVsIGNhbmFsXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFQYXJyaWxsYShsaXN0YUNhbmFsZXMsIGFycmF5Q29tcGxldG8pIHtcclxuICAgICAgICB2YXIgbGlzdGEgPSBsaXN0YUNhbmFsZXMgfHwgY2FuYWxlc1VzdWFyaW87XHJcbiAgICAgICAgdmFyIGNvbXBsZXRvID0gYXJyYXlDb21wbGV0byB8fCBhcnJheUNhbmFsZXM7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxkaXYgaWQ9XCJ7e2lkY2FuYWx9fVwiIGNsYXNzPVwibGluZWFDYW5hbCBjbGVhcmZpeFwiPjwvZGl2Pic7XHJcblxyXG4gICAgICAgICQuZWFjaChsaXN0YSwgZnVuY3Rpb24oaSwgdikge1xyXG4gICAgICAgICAgICBjb250ZXh0LmlkY2FuYWwgPSB2O1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLmFwcGVuZChyZXN1bHRhZG8pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQaW50YW1vcyBwcm9ncmFtYXMgZW4gc3VzIGNhbmFsZXNcclxuICAgICAgICAkLmVhY2goY29tcGxldG8sIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgdmFyIGNhbmFsID0gdi5jYW5hbC5ub21icmU7XHJcbiAgICAgICAgICAgIHZhciBkaXZDYW5hbCA9ICQoJyMnICsgY2FuYWwpO1xyXG5cclxuICAgICAgICAgICAgJC5lYWNoKHYucHJvZ3JhbWFzLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gcGludGFQYXJyaWxsYVByb2dyYW1hKGksIHYpO1xyXG4gICAgICAgICAgICAgICAgZGl2Q2FuYWwuYXBwZW5kKGRpdik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlY29ycmUgZWwganNvbiBkZSBwcm9ncmFtYXMgZGUgZGUgdW4gY2FuYWwgeSBsb3MgcGludGEgZW4gJ2NvbnRQcm9ncmFtYXMnXHJcbiAgICAgKiBAcGFyYW0gIHtpbnR9IHFDYW5hbCBJZGVudGlmaWNhZG9yIGRlIHF1w6kgY2FuYWwgcGludGFtb3NcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFQYXJyaWxsYVByb2dyYW1hKGksIHYpIHtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGVQcm9ncmFtYSA9ICcnICtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpdGVtUHJvZ3JhbWFcIiBpZD1cInt7aWRfcHJvZ3JhbWF9fVwiIGRhdGEtdXJsPVwie3t1cmxfZmljaGF9fVwiJyArXHJcbiAgICAgICAgICAgICdzdHlsZT1cIndpZHRoOnt7ZHVyfX07IGxlZnQ6e3tkaWZmSG9yYURpYX19OyB1c2VyLXNlbGVjdGVkOm5vbmU7XCI+JyArXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaXRlbVByb2dyYW1hSW5uZXIge3tjbGFzZX19XCI+JyArXHJcbiAgICAgICAgICAgICc8YSBocmVmPVwiaHR0cDovL2VsbXVuZG8uZXMvdGVsZXZpc2lvbi9wcm9ncmFtYS97e2lkX3Byb2dyYW1hfX1cIiBzdHlsZT1cImRpc3BsYXk6bm9uZTtcIj57e25vbWJyZX19PC9hPicgK1xyXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjYXRlZ29yaWFcIj57e2NhdGVnb3JpYX19PC9zcGFuPicgK1xyXG4gICAgICAgICAgICAnPGg0Pnt7bm9tYnJlfX08L2g0PicgK1xyXG4gICAgICAgICAgICAne3tpZiBlcGlzb2Rpb319PHA+e3tlcGlzb2Rpb319PC9wPnt7L2lmfX0nICtcclxuICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiZHVyYWNpb25cIj57e2R1cmFjaW9ufX08L3NwYW4+JyArXHJcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImZlY2hhXCI+e3tpbmZvSG9yYUR1cmFjaW9ufX08L3NwYW4+JyArXHJcbiAgICAgICAgICAgICd7e2lmIGZhdn19PHNwYW4gY2xhc3M9XCJmYXZvcml0b1wiPjxpIGNsYXNzPVwiZmEgZmEtYm9va21hcmtcIj48L2k+PC9zcGFuPnt7L2lmfX0nICtcclxuICAgICAgICAgICAgJ3t7aWYgYWxlfX08c3BhbiBjbGFzcz1cImFsZXJ0YVwiPjxpIGNsYXNzPVwiZmEgZmEtY2xvY2stb1wiPjwvaT48L3NwYW4+e3svaWZ9fScgK1xyXG4gICAgICAgICAgICAnPC9kaXY+PC9kaXY+XCInO1xyXG5cclxuICAgICAgICAvLyBTZWxlY2Npw7NuIGRlIGNhdGVnb3LDrWFcclxuICAgICAgICAvLyBtQ2luZSBcIjEwNFwiIC8gbUNvbmN1cnNvcyBcIklOVF8yXCIgLyBtQ29yYXpvbiAvIG1EZXBvcnRlcyBcIjkwXCIgL1xyXG4gICAgICAgIC8vIG1JbmZvcm1hdGl2b3MgXCIyMFwiIC8gbU1hZ2F6aW5lcyBcIjMxXCIgLyBtU2VyaWVzIFwiMVwiXHJcbiAgICAgICAgdmFyIGNhdCA9IHYuY2F0ZWdvcmlhLFxyXG4gICAgICAgICAgICBjYXRlZ29yaWEsXHJcbiAgICAgICAgICAgIGNsYXNlO1xyXG4gICAgICAgIHN3aXRjaCAoY2F0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCIxXCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0U2VyaWVzXCI7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSBcInNlcmllc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIxMDRcIjpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gXCJjYXRDaW5lXCI7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSBcImNpbmVcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiMzFcIjpcclxuICAgICAgICAgICAgICAgIGNsYXNlID0gXCJjYXRNYWdhemluZXNcIjtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9IFwibWFnYXppbmVzXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjIwXCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0SW5mb3JtYXRpdm9zXCI7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSBcImluZm9ybWF0aXZvc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCI5MFwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdERlcG9ydGVzXCI7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSBcImRlcG9ydGVzXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIklOVF8yXCI6XHJcbiAgICAgICAgICAgICAgICBjbGFzZSA9IFwiY2F0Q29uY3Vyc29zXCI7XHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yaWEgPSBcImNvbmN1cnNvc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJJTlRfMVwiOlxyXG4gICAgICAgICAgICAgICAgY2xhc2UgPSBcImNhdENvcmF6b25cIjtcclxuICAgICAgICAgICAgICAgIGNhdGVnb3JpYSA9IFwiY29yYXrDs25cIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRWwgYW5jaG8gdmEgYSBkZXBlbmRlciBkZSBsYSBkdXJhY2nDs24gZGVsIHByb2dyYW1hXHJcbiAgICAgICAgdmFyIGR1cmFjaW9uID0gdi5kdXJhY2lvbiArICcgbWlucy4nO1xyXG4gICAgICAgIHZhciBkdXIgPSBNYXRoLmZsb29yKHBpeGVsc1Bvck1pbnV0byAqIHYuZHVyYWNpb24pLFxyXG4gICAgICAgICAgICBob3JhX2luaWNpbyA9IG5ldyBEYXRlKHYuaG9yYV9pbmljaW8pLFxyXG4gICAgICAgICAgICBob3JhX2ZpbmFsID0gbmV3IERhdGUodi5ob3JhX2Zpbik7XHJcbiAgICAgICAgdmFyIGRpZmZIb3JhRGlhID0gTWF0aC5mbG9vcihob3JhX2luaWNpbyAtIGRpYUFjdHVhbCk7IC8vIFRPRE8gZGlhQWN0dWFsIGZvcnphZG9cclxuICAgICAgICBkaWZmSG9yYURpYSA9IE1hdGguZmxvb3IoKChkaWZmSG9yYURpYSAvIDEwMDApIC8gNjApICogcGl4ZWxzUG9yTWludXRvKTtcclxuXHJcbiAgICAgICAgdmFyIGhvcmFfaSA9IGhvcmFfaW5pY2lvLmdldEhvdXJzKCk7XHJcbiAgICAgICAgaG9yYV9pID0gbGVmdFBhZChob3JhX2ksIDIpO1xyXG4gICAgICAgIHZhciBtaW5zX2kgPSBob3JhX2luaWNpby5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgbWluc19pID0gbGVmdFBhZChtaW5zX2ksIDIpO1xyXG5cclxuICAgICAgICB2YXIgaG9yYV9mID0gaG9yYV9maW5hbC5nZXRIb3VycygpO1xyXG4gICAgICAgIGhvcmFfZiA9IGxlZnRQYWQoaG9yYV9mLCAyKTtcclxuICAgICAgICB2YXIgbWluc19mID0gaG9yYV9maW5hbC5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgbWluc19mID0gbGVmdFBhZChtaW5zX2YsIDIpO1xyXG5cclxuICAgICAgICB2YXIgaW5mb0hvcmFEdXJhY2lvbiA9ICcnICsgaG9yYV9pICsgJzonICsgbWluc19pICsgJyAtICcgKyBob3JhX2YgKyAnOicgKyBtaW5zX2Y7XHJcblxyXG4gICAgICAgIC8vIFRPRE8gUmFuZG9tIHBhcmEgcG9kZXIgdmVyIHByb2dyYW1hcyBmYXZvcml0b3MgeSBhbGVydGFzIGRlIHByb2dyYW1hcy4gRUxJTUlOQVJcclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSAqIDEwMCA8IDUpIHtcclxuICAgICAgICAgICAgdmFyIGZhdiA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpICogMTAwIDwgNSkge1xyXG4gICAgICAgICAgICB2YXIgYWxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRPRE8gU2kgZWwgZWxlbWVudG8gZXMgcGVxdWXDsW8sIGFwYXJlY2UgdW5hIGNydXpcclxuXHJcbiAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgY2xhc2U6IGNsYXNlLFxyXG4gICAgICAgICAgICBkdXI6IGR1ciArICdweCcsXHJcbiAgICAgICAgICAgIGRpZmZIb3JhRGlhOiBkaWZmSG9yYURpYSArICdweCcsXHJcbiAgICAgICAgICAgIGlkX3Byb2dyYW1hOiB2LmlkX3Byb2dyYW1hLFxyXG4gICAgICAgICAgICB1cmxfZmljaGE6IHYudXJsX2ZpY2hhLFxyXG4gICAgICAgICAgICBpbmZvSG9yYUR1cmFjaW9uOiBpbmZvSG9yYUR1cmFjaW9uLFxyXG4gICAgICAgICAgICBkdXJhY2lvbjogZHVyYWNpb24sXHJcbiAgICAgICAgICAgIGNhdGVnb3JpYTogY2F0ZWdvcmlhLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgIG5vbWJyZTogdi5ub21icmUsXHJcbiAgICAgICAgICAgIGVwaXNvZGlvOiB2LmVwaXNvZGlvLFxyXG4gICAgICAgICAgICBmYXY6IGZhdiB8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgYWxlOiBhbGUgfCB1bmRlZmluZWRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgcmVzdWx0YWRvID0gTWFyay51cCh0ZW1wbGF0ZVByb2dyYW1hLCBjb250ZXh0KTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0YWRvO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBpbnRhIGxvcyBpY29ub3MgZGUgY2FuYWxlcyBlbiBlbCBjb21wb25lbnRlICdjb250Q2FuYWxlcydcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFDYW5hbGVzKGxpc3RhQ2FuYWxlcykge1xyXG5cclxuICAgICAgICB2YXIgbGlzdGEgPSBsaXN0YUNhbmFsZXMgfHwgY2FuYWxlc1VzdWFyaW87XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIml0ZW1DYW5hbFwiPjxpbWcgc3JjPVwiaHR0cDovL2VzdGF0aWNvcy5lbG11bmRvLmVze3tpY29ub319XCIgLz48L2Rpdj4nO1xyXG5cclxuICAgICAgICAkLmVhY2gobGlzdGEsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgY29udGV4dC5pY29ubyA9IGFycmF5Q2FuYWxlc1tpXS5jYW5hbC5pY29ubztcclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkY29udENhbmFsZXMuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgdW5hIGJhcnJhIGhvcml6b25hbCBjb24gbGEgbWFyY2EgZGUgaG9yYXMsIHF1ZSBzZSBkZXNwbGF6YSBjb24gZWwgdmlld1BvcnRcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFIb3Jhc1BhcnJpbGxhKCkge1xyXG4gICAgICAgIHZhciBkaWEgPSBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICBpLCBqO1xyXG5cclxuICAgICAgICAvLyBHZW5lcmFtb3MgdW5hIGJhcnJhIHBhcmEgbG9zIGTDrWFzICg0KSBkZSBsb3MgcXVlIGRpc3BvbmVtb3MgZGUgZGF0b3NcclxuICAgICAgICBmb3IgKGogPSAwOyBqIDw9IDM7IGorKykge1xyXG5cclxuICAgICAgICAgICAgZGlhLnNldFRpbWUoZGlhQWN0dWFsLmdldFRpbWUoKSArIChqICogODY0MDAwMDApKTtcclxuICAgICAgICAgICAgdmFyIGRpYVRleHQgPSBkaWEudG9Mb2NhbGVEYXRlU3RyaW5nKCdlcy1FUycsIHtcclxuICAgICAgICAgICAgICAgIHdlZWtkYXk6ICdsb25nJyxcclxuICAgICAgICAgICAgICAgIC8veWVhcjogJ251bWVyaWMnLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6ICdsb25nJyxcclxuICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxEaWEgPSAoaiAqIHBpeGVsc1BvckhvcmEgKiAyNCk7XHJcbiAgICAgICAgICAgIHZhciBjRGlhID0gJCgnPGRpdi8+JykudGV4dChkaWFUZXh0KVxyXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdpdGVtRGlhJylcclxuICAgICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogbERpYVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRiYXJyYUhvcmFzLmFwcGVuZChjRGlhKTtcclxuXHJcbiAgICAgICAgICAgIGFycmF5RGlhcy5wdXNoKFtkaWFUZXh0LCBsRGlhXSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMjQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBpICsgXCI6MDBcIjtcclxuICAgICAgICAgICAgICAgIHZhciBsID0gKGogKiBwaXhlbHNQb3JIb3JhICogMjQpICsgaSAqIHBpeGVsc1BvckhvcmE7XHJcbiAgICAgICAgICAgICAgICB2YXIgYyA9ICQoJzxkaXYvPicpLnRleHQodClcclxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2l0ZW1Ib3JhcycpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdsZWZ0JzogbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGJhcnJhSG9yYXMuYXBwZW5kKGMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSB1biBzZWxlY3RvciBkZSBhY2Nlc28gZGlyZWN0byBhIGxvcyBkw61hcyBpbmNsdcOtZG9zIGVuIGxhIHByb2dyYW1hY2nDs25cclxuICAgICAqIERlcGVuZGVtb3MgZGUgYXJyYXlEaWFzIHF1ZSBoYSBnZW5lcmFkbyBkYXRvcyBlbiBwaW50YUhvcmFzUGFycmlsbGFcclxuICAgICAqIEByZXR1cm4ge31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFTZWxlY3RvckRpYXMoKSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZXh0ID0ge307XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gJzxsaSBjbGFzcz1cIml0ZW1EaWFcIiBkYXRhLXB4PVwie3tweH19XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Ly9cIj57e2RpYVRleHR9fTwvYT48L2xpPic7XHJcblxyXG4gICAgICAgIGFycmF5RGlhcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlhVGV4dCA9IGl0ZW1bMF07XHJcbiAgICAgICAgICAgIHZhciBweCA9IGl0ZW1bMV07XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgZGlhVGV4dDogZGlhVGV4dCxcclxuICAgICAgICAgICAgICAgIHB4OiBweFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdGFkbyA9IE1hcmsudXAodGVtcGxhdGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAkc2VsZWN0b3JEaWFzLmZpbmQoJ3VsJykuYXBwZW5kKHJlc3VsdGFkbyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgdW5hIGZyYW5qYSBxdWUgbWFyY2EgbGEgaG9yYSBhY3R1YWwgZW4gZWwgY29tcG9uZW50ZSBQYXJyaWxsYVxyXG4gICAgICogQHJldHVybiB7fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwaW50YUhvcmFBY3R1YWwoKSB7XHJcblxyXG4gICAgICAgIHZhciBob3JhcyA9IGhvcmFBY3R1YWwuaCxcclxuICAgICAgICAgICAgbWludXRvcyA9IGhvcmFBY3R1YWwubTtcclxuXHJcbiAgICAgICAgdmFyIGRpdkhvcmEgPSAkKCcuaG9yYUFjdHVhbCcpXHJcbiAgICAgICAgICAgIC5oaWRlKClcclxuICAgICAgICAgICAgLmZpbmQoJ3AnKS50ZXh0KGhvcmFzICsgXCI6XCIgKyBtaW51dG9zKS5lbmQoKVxyXG4gICAgICAgICAgICAuc2hvdygpO1xyXG5cclxuICAgICAgICB2YXIgcG9zWCA9IHBhcnNlSW50KGhvcmFzKSAqIHBpeGVsc1BvckhvcmEgKyBwYXJzZUludChtaW51dG9zKSAqIHBpeGVsc1Bvck1pbnV0bztcclxuICAgICAgICBkaXZIb3JhLmNzcyh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogcG9zWFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpdMO6YSBsYSBQYXJyaWxsYSBlbiBlbCBtb21lbnRvIGFjdHVhbCwgZmVjaGEgeSBob3JhXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHNpdHVhUGFycmlsbGFBaG9yYSgpIHtcclxuICAgICAgICB2YXIgbWl0YWRBbmNob1ZpZXdwb3J0ID0gJHZpZXdQb3J0LndpZHRoKCkgLyAyO1xyXG4gICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkaG9yYUFjdHVhbC5jc3MoJ2xlZnQnKSk7XHJcbiAgICAgICAgbXVldmVBID0gcGFyc2VJbnQobWl0YWRBbmNob1ZpZXdwb3J0IC0gbXVldmVBKTtcclxuXHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAnbGVmdCc6IG11ZXZlQSArICdweCdcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICRiYXJyYUhvcmFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgJ2xlZnQnOiBtdWV2ZUEgKyAncHgnXHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICB2YXIgaG9yYUxlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLmgpICogcGl4ZWxzUG9ySG9yYTtcclxuICAgICAgICB2YXIgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgIHZhciBwb3NYID0gaG9yYUxlZnQgKyBtaW51dG9zTGVmdCArIG11ZXZlQTtcclxuICAgICAgICAkaG9yYUFjdHVhbC5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICdsZWZ0JzogcG9zWCArICdweCdcclxuICAgICAgICB9LCAzMDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE9idGVuZHLDrWFtb3MgZGF0b3MgZGUgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZSB1c3VhcmlvIHZhbGlkYWRvIChzaSBodWJpZXJhKVxyXG4gICAgICogQHJldHVybiB7anNvbn0gT2JqZXRvIGpzb24gY29uIHRvZG9zIGxvcyBwcm9ncmFtYXMgZmF2b3JpdG9zIHkgYWxlcnRhcyBkZWwgdXN1YXJpb1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYXJnYUluZm9Vc3VhcmlvKCkge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNvcmEgbG9zIHByb2dyYW1hcyBlbiBQYXJyaWxsYSBjb24gbGFzIGFsZXJ0YXMgeSBmYXZvcml0b3MgcmVjb3JyaWVuZG8gZWwganNvbiBkZSB1c3VhcmlvXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcGludGFQcm9nc1VzdWFyaW8oKSB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFzb2NpYSB0b2RvcyBsb3MgZXZlbnQgbGlzdGVuZXJzIGEgbG9zIGRpZmVyZW50ZXMgZWxlbWVudG9zIGRlIHVpXHJcbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbGFuemFIYW5kbGVycygpIHtcclxuXHJcbiAgICAgICAgLyp2YXIgJHZpZXdQb3J0ID0gJCgnLnZpZXdQb3J0Jyk7XHJcbiAgICAgICAgdmFyICRjb250UHJvZ3JhbWFzID0gJCgnLmNvbnRQcm9ncmFtYXMnKTtcclxuICAgICAgICB2YXIgJGNvbnRDYW5hbGVzID0gJCgnLmNvbnRDYW5hbGVzJyk7XHJcbiAgICAgICAgdmFyICRiYXJyYUhvcmFzID0gJCgnLmJhcnJhSG9yYXMnKTtcclxuICAgICAgICB2YXIgJGhvcmFBY3R1YWwgPSAkKCcuaG9yYUFjdHVhbCcpO1xyXG4gICAgICAgIHZhciAkZmljaGFQcm9ncmFtYSA9ICQoJy5maWNoYVByb2dyYW1hJyk7Ki9cclxuXHJcbiAgICAgICAgdmFyIGFsdG9WaWV3cG9ydCA9ICR2aWV3UG9ydC5oZWlnaHQoKSxcclxuICAgICAgICAgICAgYW5jaG9WaWV3cG9ydCA9ICR2aWV3UG9ydC53aWR0aCgpLFxyXG4gICAgICAgICAgICBhbHRvQ29udFByb2dyYW1hcyA9ICRjb250UHJvZ3JhbWFzLmhlaWdodCgpLFxyXG4gICAgICAgICAgICBhbmNob0NvbnRQcm9ncmFtYXMgPSAkY29udFByb2dyYW1hcy5vZmZzZXRXaWR0aCxcclxuICAgICAgICAgICAgYW5jaG9CYXJyYUNhbmFsZXMgPSAkY29udENhbmFsZXMud2lkdGgoKTtcclxuICAgICAgICB2YXIgaXNEcmFnID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHNlSGFNb3ZpZG8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIHByaW1lcm9zRGl2ID0gJCgnLmNvbnRQcm9ncmFtYXMgPiBkaXYgPiBkaXY6Zmlyc3QtY2hpbGQnKSxcclxuICAgICAgICAgICAgb2Zmc2V0c0l6ZGEgPSBbXTtcclxuICAgICAgICAkLmVhY2gocHJpbWVyb3NEaXYsIGZ1bmN0aW9uKGksIHYpIHtcclxuICAgICAgICAgICAgb2Zmc2V0c0l6ZGEucHVzaCh0aGlzLm9mZnNldExlZnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBtaW5JemRhID0gb2Zmc2V0c0l6ZGEubWluKCk7XHJcblxyXG4gICAgICAgIHZhciB1bHRpbW9zRGl2ID0gJCgnLmNvbnRQcm9ncmFtYXMgPiBkaXYgPiBkaXY6bGFzdC1jaGlsZCcpLFxyXG4gICAgICAgICAgICBvZmZzZXRzRHJjaCA9IFtdO1xyXG4gICAgICAgICQuZWFjaCh1bHRpbW9zRGl2LCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIG9mZnNldHNEcmNoLnB1c2godGhpcy5vZmZzZXRMZWZ0ICsgJCh0aGlzKS53aWR0aCgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgbWF4RHJjaCA9IG9mZnNldHNEcmNoLm1heCgpO1xyXG5cclxuICAgICAgICAvLyBOb3MgY2FyZ2Ftb3MgZWwgcHJlbG9hZGVyXHJcbiAgICAgICAgJHZpZXdQb3J0LmZpbmQoJy5wcmVsb2FkLXdyYXBwZXInKS5yZW1vdmUoKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2Vkb3duL3RvdWNoc3RhcnRcclxuICAgICAgICAkY29udFByb2dyYW1hcy5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCBkcmFnT24pO1xyXG4gICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2V1cC90b3VjaGVuZFxyXG4gICAgICAgIC8vICRjb250UHJvZ3JhbWFzLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgZHJhZ09mZik7XHJcbiAgICAgICAgLy8gR2VuZXJhbW9zIHVuIGhhbmRsZXIgcGFyYSBtb3VzZW1vdmUvdG91Y2htb3ZlXHJcbiAgICAgICAgLy8gJGNvbnRQcm9ncmFtYXMub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCBkcmFnTW92ZSk7XHJcblxyXG4gICAgICAgIC8vIFNhY2EgcGFuZWwgY29uIGluZm9ybWFjacOzbiBhamF4IGRlIHByb2dyYW1hXHJcbiAgICAgICAgJGNvbnRQcm9ncmFtYXMub24oJ2NsaWNrJywgY2xpY2tQcm9ncmFtYSk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZXIgcGFyYSBsYSBzZWxlY2Npw7NuIGRlIHVuYSBob3JhXHJcbiAgICAgICAgJGJhcnJhSG9yYXMub24oJ2NsaWNrJywgJy5pdGVtSG9yYXMnLCBjbGlja0hvcmEpO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGVyIHBhcmEgZmlsdHJhZG8gcG9yIGNhdGVnb3LDrWFzXHJcbiAgICAgICAgJHNlbGVjdG9yQ2F0ZWdvcmlhcy5vbignY2xpY2snLCAnbGknLCBtYXJjYUNhdGVnb3JpYSk7XHJcbiAgICAgICAgbWFyY2FyQ2F0ZWdvcmlhc1NlbGVjY2lvbmFkYXMoKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlciBwYXJhIHNlbGVjY2nDs24gZGUgZMOtYVxyXG4gICAgICAgICRzZWxlY3RvckRpYXMub24oJ2NsaWNrJywgJ2xpJywgY2xpY2tEaWEpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkcmFnT24oZXZlbnQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcyk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUb3AgPSB0aGlzLm9mZnNldFRvcDtcclxuICAgICAgICAgICAgdGhpcy5zdGFydExlZnQgPSB0aGlzLm9mZnNldExlZnQ7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbE1vdXNlWCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbE1vdXNlWSA9IGV2ZW50LmNsaWVudFk7XHJcbiAgICAgICAgICAgIGlzRHJhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHNlSGFNb3ZpZG8gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYW1vcyB1biBoYW5kbGVyIHBhcmEgbW91c2V1cC90b3VjaGVuZFxyXG4gICAgICAgICAgICAkY29udFByb2dyYW1hcy5vbignbW91c2V1cCB0b3VjaGVuZCcsIGRyYWdPZmYpO1xyXG4gICAgICAgICAgICAvLyBHZW5lcmFtb3MgdW4gaGFuZGxlciBwYXJhIG1vdXNlbW92ZS90b3VjaG1vdmVcclxuICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCBkcmFnTW92ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhZ09mZihldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnKSB7XHJcbiAgICAgICAgICAgICAgICBpc0RyYWcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLm9mZignbW91c2V1cCB0b3VjaGVuZCcsIGRyYWdPZmYpO1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMub2ZmKCdtb3VzZW1vdmUgdG91Y2htb3ZlJywgZHJhZ01vdmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhZ01vdmUoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGlzRHJhZykge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBkWCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLmluaXRpYWxNb3VzZVg7XHJcbiAgICAgICAgICAgICAgICB2YXIgZFkgPSBldmVudC5jbGllbnRZIC0gdGhpcy5pbml0aWFsTW91c2VZO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1hcmNhbW9zIGNvbiB1biBmbGFnIHNpIGhhIGhhYmlkbyBkaWZlcmVuY2lhIGRlIG3DoXMgZGUgMyBww614ZWxlc1xyXG4gICAgICAgICAgICAgICAgc2VIYU1vdmlkbyA9IE1hdGguYWJzKGRYKSA+IDIgfHwgTWF0aC5hYnMoZFkpID4gMjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbnRvcCA9IHRoaXMuc3RhcnRUb3AgKyBkWTtcclxuICAgICAgICAgICAgICAgIHZhciBubGVmdCA9IHRoaXMuc3RhcnRMZWZ0ICsgZFg7XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIHRvcCAoMzVweCBhbHRvICRiYXJyYUhvcmFzKVxyXG4gICAgICAgICAgICAgICAgaWYgKG50b3AgPiBhbHRvQmFycmFIb3Jhcykge1xyXG4gICAgICAgICAgICAgICAgICAgIG50b3AgPSBhbHRvQmFycmFIb3JhcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEzDrW1pdGUgYm90dG9tIChhbHRvVmlld3BvcnQgLSBhbHRvUHJvZ3JhbWFzKVxyXG4gICAgICAgICAgICAgICAgaWYgKG50b3AgPCAoYWx0b1ZpZXdwb3J0IC0gYWx0b0NvbnRQcm9ncmFtYXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnRvcCA9IChhbHRvVmlld3BvcnQgLSBhbHRvQ29udFByb2dyYW1hcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBMw61taXRlIHJpZ2h0ICg3MHB4IGFuY2hvICRjb250Q2FuYWxlcylcclxuICAgICAgICAgICAgICAgIGlmIChubGVmdCA+IGFuY2hvQmFycmFDYW5hbGVzICsgTWF0aC5hYnMobWluSXpkYSkgKyA1MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5sZWZ0ID0gYW5jaG9CYXJyYUNhbmFsZXMgKyBNYXRoLmFicyhtaW5JemRhKSArIDUwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTMOtbWl0ZSBsZWZ0IChhbmNob1ZpZXdwb3J0IG1lbm9zIGVsIGFuY2hvIHRvdGFsIGRlIHByb2dyYW1hcylcclxuICAgICAgICAgICAgICAgIGlmIChubGVmdCA8IGFuY2hvVmlld3BvcnQgLSA1MCAtIE1hdGguYWJzKG1heERyY2gpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmxlZnQgPSBhbmNob1ZpZXdwb3J0IC0gNTAgLSBNYXRoLmFicyhtYXhEcmNoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IG50b3AgKyAncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogbmxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRjb250Q2FuYWxlcy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiBudG9wICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkYmFycmFIb3Jhcy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogbmxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHZhciBob3JhTGVmdCA9IHBhcnNlSW50KGhvcmFBY3R1YWwuaCkgKiBwaXhlbHNQb3JIb3JhLFxyXG4gICAgICAgICAgICAgICAgICAgIG1pbnV0b3NMZWZ0ID0gcGFyc2VJbnQoaG9yYUFjdHVhbC5tKSAqIHBpeGVsc1Bvck1pbnV0byxcclxuICAgICAgICAgICAgICAgICAgICBwb3NYID0gaG9yYUxlZnQgKyBtaW51dG9zTGVmdCArIG5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgJGhvcmFBY3R1YWwuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAnbGVmdCc6IHBvc1ggKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhbmRsZXIgZGVsIGNsaWNrIGVuIHVuIGl0ZW1Ib3Jhc1xyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBPYmpldG8gZXZlbnRvIGNvbiB0b2RhIGxhIGluZm8gZGVsIGNsaWNrXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrSG9yYShldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgbXVldmVBID0gcGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2xlZnQnKSk7XHJcbiAgICAgICAgICAgIG11ZXZlQSA9IHBhcnNlSW50KChhbmNob1ZpZXdwb3J0IC8gMikgLSBtdWV2ZUEpO1xyXG4gICAgICAgICAgICBtdWV2ZVByb2dyYW1hc0FQdW50byhtdWV2ZUEpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhbmRsZXIgZGVsIGNsaWNrIGVuIHVuIGTDrWFcclxuICAgICAgICAgKiBAcGFyYW0gIHtldmVudH0gZXZlbnQgT2JqZXRvIGV2ZW50IGNvbiB0b2RhIGxhIGluZm8gZGVsIGNsaWNrXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrRGlhKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBtdWV2ZUEgPSBwYXJzZUludCgkKHRoaXMpLmRhdGEoJ3B4JykpICogLTE7XHJcbiAgICAgICAgICAgIG11ZXZlUHJvZ3JhbWFzQVB1bnRvKG11ZXZlQSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGFuZGxlciBkZWwgY2xpY2sgZW4gdW4gaXRlbVByb2dyYW1hXHJcbiAgICAgICAgICogQHBhcmFtICB7ZXZlbnR9IGV2ZW50IE9iamV0byBldmVudG8gY29uIHRvZGEgbGEgaW5mbyBkZWwgY2xpY2tcclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tQcm9ncmFtYShldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoIXNlSGFNb3ZpZG8pIHtcclxuICAgICAgICAgICAgICAgIGlzRHJhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpLFxyXG4gICAgICAgICAgICAgICAgICAgICRlbGVtUGFkcmUgPSAkKGVsZW0pLmlzKCcuaXRlbVByb2dyYW1hJykgPyAkKGVsZW0pIDogJChlbGVtKS5jbG9zZXN0KCcuaXRlbVByb2dyYW1hJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHByb2dVcmwgPSAkZWxlbVBhZHJlLmZpbmQoJ2EnKS5hdHRyKCdocmVmJyksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZ0lkID0gJGVsZW1QYWRyZS5hdHRyKCdpZCcpO1xyXG4gICAgICAgICAgICAgICAgY2FyZ2FGaWNoYVByb2dyYW1hKHByb2dJZCwgcHJvZ1VybCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG11ZXZlQSA9IHBhcnNlSW50KCRlbGVtUGFkcmUuY3NzKCdsZWZ0JykpICsgJGVsZW1QYWRyZS53aWR0aCgpIC8gMjtcclxuICAgICAgICAgICAgICAgIG11ZXZlQSA9IHBhcnNlSW50KChhbmNob1ZpZXdwb3J0IC8gMikgLSBtdWV2ZUEpO1xyXG4gICAgICAgICAgICAgICAgbXVldmVQcm9ncmFtYXNBUHVudG8obXVldmVBKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcmdhIHBvciBhamF4IGxhIGluZm9ybWFjacOzbiBiw6FzaWNhIGRlIGxhIGZpY2hhIGRlIHByb2dyYW1hXHJcbiAgICAgICAgICogQHBhcmFtICB7aW50fSBwcm9nSWQgIElkIGRlbCBwcm9ncmFtYVxyXG4gICAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gcHJvZ1VybCBVcmwgY29tcGxldGEgZGUgbGEgcnV0YSBwYXJhIGNhcmdhciBsYSBmaWNoYVxyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjYXJnYUZpY2hhUHJvZ3JhbWEocHJvZ0lkLCBwcm9nVXJsKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE8gUHJvYmFyIGVuIGVudG9ybm8gZGUgcHJ1ZWJhcyBlbG11bmRvLmVzXHJcbiAgICAgICAgICAgIC8vcHJvZ1VybCA9ICdodHRwOi8vd3d3LmVsbXVuZG8uZXMnICsgcHJvZ1VybDtcclxuICAgICAgICAgICAgY2llcnJhRmljaGEoKTtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiZmljaGFQcm9ncmFtYS5odG1sXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3Byb2dJZCc6IHByb2dJZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGh0bWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZCgnLmNvbnRlbmlkbycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGh0bWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGw6ICd0b3AnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICRmaWNoYVByb2dyYW1hLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCwgJ3N3aW5nJywgY3JlYUNpZXJyZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWFDaWVycmUoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2llcnJhID0gJCgnPGRpdi8+JylcclxuICAgICAgICAgICAgICAgICAgICAudGV4dCgnWCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdjaWVycmEnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbygkZmljaGFQcm9ncmFtYSlcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2llcnJhRmljaGEoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNpZXJyYUZpY2hhKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KCRmaWNoYVByb2dyYW1hLmNzcygncmlnaHQnKSkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkZmljaGFQcm9ncmFtYS5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtMzAwXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwLCAnc3dpbmcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWFyY2FDYXRlZ29yaWEoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNlID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5hdHRyKCdjbGFzcycpLnNwbGl0KCcgJylbMF07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNsYXNlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkY29udFByb2dyYW1hcy5oYXNDbGFzcyhjbGFzZSkpIHtcclxuICAgICAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLnJlbW92ZUNsYXNzKGNsYXNlKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2bycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGNvbnRQcm9ncmFtYXMuYWRkQ2xhc3MoY2xhc2UpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZvJyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWFyY2FyQ2F0ZWdvcmlhc1NlbGVjY2lvbmFkYXMoKSB7XHJcbiAgICAgICAgICAgIGlmIChjYXRlZ29yaWFzVXN1YXJpby5sZW5ndGggPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgJC5lYWNoKGNhdGVnb3JpYXNVc3VhcmlvLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdG9yQ2F0ZWdvcmlhcy5maW5kKCdsaTpudGgtY2hpbGQoJyArIHYgKyAnKScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE11ZXZlIGVsIGNvbnRQcm9ncmFtYXMgYSBsYSBwb3NpY2nDs24gZGFkYVxyXG4gICAgICAgICAqIEBwYXJhbSAge2ludH0gY29vcmRYIENvb3JkZW5hZGEgbGVmdFxyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtdWV2ZVByb2dyYW1hc0FQdW50byhjb29yZFgpIHtcclxuICAgICAgICAgICAgdmFyIG5sZWZ0ID0gY29vcmRYIHx8IDA7XHJcbiAgICAgICAgICAgICRjb250UHJvZ3JhbWFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogbmxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICRiYXJyYUhvcmFzLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogbmxlZnQgKyAncHgnXHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgIHZhciBob3JhTGVmdCA9IHBhcnNlSW50KGhvcmFBY3R1YWwuaCkgKiBwaXhlbHNQb3JIb3JhO1xyXG4gICAgICAgICAgICB2YXIgbWludXRvc0xlZnQgPSBwYXJzZUludChob3JhQWN0dWFsLm0pICogcGl4ZWxzUG9yTWludXRvO1xyXG4gICAgICAgICAgICB2YXIgcG9zWCA9IGhvcmFMZWZ0ICsgbWludXRvc0xlZnQgKyBubGVmdDtcclxuICAgICAgICAgICAgJGhvcmFBY3R1YWwuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiBwb3NYICsgJ3B4J1xyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGludGEgZWwgdG90YWwgZGUgY2FuYWxlcyBhIGxvcyBxdWUgc2UgcHVlZGUgc3VzY3JpYmlyIHkgbGFzIGxldHJhcyBjb3JyZXNwb25kaWVudGVzXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhTGlzdGFkb0NhbmFsZXNTdXNjcmlwY2lvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIHVsTGV0cmFzID0gJCgnPHVsPicpLFxyXG4gICAgICAgICAgICBmaWNoZXJvID0gJ2RhdG9zL2xpc3RhZG9jYW5hbGVzLmpzb24nO1xyXG5cclxuICAgICAgICAvLyBUT0RPIG1vdmVyIGxhIGNhcmdhIGEgdW5hIGZ1bmNpw7NuIGRpZmVyZW50ZSBjb24gcHJvbWlzZXNcclxuICAgICAgICAvLyAoR2VuZXJhIGVsIGJhY2tlbmQpXHJcbiAgICAgICAgJC5nZXQoZmljaGVybylcclxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY2FuYWxlc0dsb2JhbCA9IGRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZUxldHJhID0gJzxsaSBjbGFzcz1cIml0ZW1MZXRyYVwiPjxoND57e2xldHJhfX08L2g0PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZGl2TGV0cmEgbmFub1wiPjxkaXYgY2xhc3M9XCJuYW5vLWNvbnRlbnRcIj48dWw+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3t7Y2FuYWxlc319PGxpIGNsYXNzPVwiaXRlbUNhbmFsXCIgZGF0YS1pZGNhbmFsPVwie3tpZF9wcm9ncmFtYX19XCI+PGltZyBzcmM9XCJ7e2ljb25vfX1cIiAvPnt7bm9tYnJlX2NvbXBsZXRvfX08c3BhbiBjbGFzcz1cImNoZWNrXCI+PC9zcGFuPjwvbGk+e3svY2FuYWxlc319JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvdWw+PC9kaXY+PC9kaXY+PC9saT4nO1xyXG5cclxuICAgICAgICAgICAgICAgICQuZWFjaChjYW5hbGVzR2xvYmFsLCBmdW5jdGlvbihpLCB2KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldHJhOiBpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5hbGVzOiB2XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdExldHJhID0gTWFyay51cCh0ZW1wbGF0ZUxldHJhLCBjb250ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICB1bExldHJhcy5hcHBlbmQocmVzdWx0TGV0cmEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGJhcnJhTGV0cmFzLmh0bWwodWxMZXRyYXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vQ29tcHJvYmFtb3Mgc2kgeWEgZXN0YW1vcyBzdXNjcml0b3MgYSBlc2UgY2FuYWxcclxuICAgICAgICAgICAgICAgICQuZWFjaCgkYmFycmFMZXRyYXMuZmluZCgnLml0ZW1DYW5hbCcpLCBmdW5jdGlvbihpLCB2KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5hbGVzVXN1YXJpby5pbmRleE9mKCQodGhpcykuZGF0YSgnaWRjYW5hbCcpKSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCQodGhpcykuZGF0YSgnaWRjYW5hbCcpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2hlY2snKS5hZGRDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJGJhcnJhTGV0cmFzXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoJy5uYW5vJykubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAndG9wJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2g6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQaW50YSBsb3MgY2FuYWxlcyBhIGxvcyBxdWUgZXN0w6Egc3VzY3JpdG8gZWwgdXN1YXJpbyAobyBkZWZlY3RvKVxyXG4gICAgICogUGVybWl0ZSByZW9yZGVuYXIgbG9zIGNhbmFsZXMsIGRlc3VzY3JpYmlyc2UgeSBndWFyZGFyIGxhIGNvbmZpZ3VyYWNpw7NuXHJcbiAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHBpbnRhTGlzdGFkb0NhbmFsZXNTZWxlY2Npb25hZG9zKCkge1xyXG5cclxuICAgICAgICB2YXIgdWxDYW5hbGVzID0gJCgnPHVsIGNsYXNzPVwib3JkZW4gdmVydGljYWxcIj4nKTtcclxuXHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICB2YXIgdGVtcGxhdGUgPSAnPGxpIGNsYXNzPVwiaXRlbUNhbmFsXCIgZGF0YS1pZGNhbmFsPVwie3tub21icmV9fVwiPjxpbWcgc3JjPVwiaHR0cDovL2VzdGF0aWNvcy5lbG11bmRvLmVze3tpY29ub319XCIgLz57e25vbWJyZV9jb21wbGV0b319PHNwYW4gY2xhc3M9XCJjaGVjayBzZWxcIj48L3NwYW4+PC9saT4nO1xyXG5cclxuICAgICAgICAkLmVhY2goYXJyYXlDYW5hbGVzLCBmdW5jdGlvbihpLCB2KSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQgPSB2LmNhbmFsO1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gTWFyay51cCh0ZW1wbGF0ZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAgIHVsQ2FuYWxlcy5hcHBlbmQocmVzdWx0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJG9yZGVuQ2FuYWxlcy5maW5kKCcubmFuby1jb250ZW50JykuaHRtbCh1bENhbmFsZXMpO1xyXG4gICAgICAgICRvcmRlbkNhbmFsZXNcclxuICAgICAgICAgICAgLmZpbmQoJy5uYW5vJykubmFub1Njcm9sbGVyKHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbDogJ3RvcCcsXHJcbiAgICAgICAgICAgICAgICBmbGFzaDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHByZXZlbnRQYWdlU2Nyb2xsaW5nOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBsYW56YUhhbmRsZXJzU3VzY3JpcGljaW9uKCkge1xyXG5cclxuICAgICAgICAvKnZhciAkYmFycmFMZXRyYXMgPSAkKCcuYmFycmFMZXRyYXMnKTtcclxuICAgICAgICB2YXIgJG9yZGVuQ2FuYWxlcyA9ICQoJy5vcmRlbkNhbmFsZXMnKTsqL1xyXG5cclxuICAgICAgICAvLyBDbGljayBlbiBpdGVtcyBkZSBzdXNjcmlwY2nDs25cclxuICAgICAgICAkYmFycmFMZXRyYXMub24oJ2NsaWNrJywgJy5pdGVtQ2FuYWwnLCBjbGlja0l0ZW1DYW5hbCk7XHJcblxyXG4gICAgICAgIC8vIFJlb3JkZW5hY2nDs24gZGUgZWxlbWVudG9zIGRlIGNhbmFsLCBkcmFnICYgZHJvcFxyXG4gICAgICAgIHZhciBhZGp1c3RtZW50O1xyXG4gICAgICAgIHZhciBncm91cCA9ICQoJy5vcmRlbkNhbmFsZXMgdWwub3JkZW4nKS5zb3J0YWJsZSh7XHJcbiAgICAgICAgICAgIGdyb3VwOiAnb3JkZW4nLFxyXG4gICAgICAgICAgICBwdWxsUGxhY2Vob2xkZXI6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIGFuaW1hdGlvbiBvbiBkcm9wXHJcbiAgICAgICAgICAgIG9uRHJvcDogZnVuY3Rpb24oJGl0ZW0sIGNvbnRhaW5lciwgX3N1cGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdyb3VwLnNvcnRhYmxlKFwic2VyaWFsaXplXCIpLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAnICcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkY2xvbmVkSXRlbSA9ICQoJzxsaS8+JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGl0ZW0uYmVmb3JlKCRjbG9uZWRJdGVtKTtcclxuICAgICAgICAgICAgICAgICRjbG9uZWRJdGVtLmRldGFjaCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9zdXBlcigkaXRlbSwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCAkaXRlbSByZWxhdGl2ZSB0byBjdXJzb3IgcG9zaXRpb25cclxuICAgICAgICAgICAgb25EcmFnU3RhcnQ6IGZ1bmN0aW9uKCRpdGVtLCBjb250YWluZXIsIF9zdXBlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9ICRpdGVtLm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXIgPSBjb250YWluZXIucm9vdEdyb3VwLnBvaW50ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGVuZW1vcyBlbiBjdWVudGEgbGEgcG9zaWNpw7NuIGRlbCBuYW5vU2Nyb2xsZXIgZW4gZXNlIG1vbWVudG9cclxuICAgICAgICAgICAgICAgIHZhciBwb3NJbmlTY3JvbGxlciA9ICQoJy5vcmRlbkNhbmFsZXMgLm5hbm8gLm5hbm8tY29udGVudCcpLmdldCgwKS5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBwb3NJbmlTY3JvbGxlciA9IE1hdGguZmxvb3IocG9zSW5pU2Nyb2xsZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGFkanVzdG1lbnQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogcG9pbnRlci5sZWZ0IC0gb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBwb2ludGVyLnRvcCAtIG9mZnNldC50b3AgLSBwb3NJbmlTY3JvbGxlclxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBfc3VwZXIoJGl0ZW0sIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uRHJhZzogZnVuY3Rpb24oJGl0ZW0sIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAkaXRlbS5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHBvc2l0aW9uLmxlZnQgLSBhZGp1c3RtZW50LmxlZnQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBwb3NpdGlvbi50b3AgLSBhZGp1c3RtZW50LnRvcFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQ2xpY2sgZW4gY2hlY2tzIGVuIGVsIHBhbmVsIGRlIHN1c2NyaXRvc1xyXG4gICAgICAgICRvcmRlbkNhbmFsZXMub24oJ2NsaWNrJywgJy5jaGVjaycsIGNsaWNrQ2hlY2tPcmRlbkNhbmFsKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBkZSBjbGlja2FyIGVuIHVuIGl0ZW1DYW5hbCBkZSBsYSBsaXN0YSBkZSBjYW5hbGVzIGRlIHN1c2NyaXBjacOzblxyXG4gICAgICAgICAqIEBwYXJhbSAge1tldmVudF19IGV2ZW50IEV2ZW50byBjb21wbGV0b1xyXG4gICAgICAgICAqIEByZXR1cm4ge31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBjbGlja0l0ZW1DYW5hbChldmVudCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICRjaGVjayA9ICQodGhpcykuZmluZCgnLmNoZWNrJyk7XHJcbiAgICAgICAgICAgIHZhciBib29sID0gJGNoZWNrLmhhc0NsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgdmFyIGlkY2FuYWwgPSAkKHRoaXMpLmRhdGEoJ2lkY2FuYWwnKTtcclxuICAgICAgICAgICAgdmFyICRpdGVtc0NhbmFsID0gJG9yZGVuQ2FuYWxlcy5maW5kKCcuaXRlbUNhbmFsJykuZmlsdGVyKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5kYXRhKCdpZGNhbmFsJykgPT09IGlkY2FuYWw7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFib29sKSB7IC8vIHNpIG51ZXN0cm8gZWxlbWVudG8gbm8gZXN0w6Egc2VsZWNjaW9uYWRvXHJcblxyXG4gICAgICAgICAgICAgICAgJGNoZWNrLnRvZ2dsZUNsYXNzKCdzZWwnKTtcclxuICAgICAgICAgICAgICAgIGlmICgkaXRlbXNDYW5hbC5sZW5ndGgpIHsgLy8gc2kgeWEgZXhpc3RlIGVzdGUgY2FuYWwgZW4gZWwgcGFuZWwgZGUgb3JkZW5cclxuICAgICAgICAgICAgICAgICAgICAkaXRlbXNDYW5hbC5maW5kKCcuY2hlY2snKS50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBzaSBubyBleGlzdGUgZXN0ZSBjYW5hbCBlbiBlbCBwYW5lbCBkZSBvcmRlblxyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvbmUoKS5hcHBlbmRUbygkb3JkZW5DYW5hbGVzLmZpbmQoJ3VsJykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gc2kgbnVlc3RybyBlbGVtZW50byBlc3TDoSBzZWxlY2Npb25hZG9cclxuICAgICAgICAgICAgICAgICRjaGVjay50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgICAgICAkaXRlbXNDYW5hbC5maW5kKCcuY2hlY2snKS50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRvcmRlbkNhbmFsZXNcclxuICAgICAgICAgICAgICAgIC5maW5kKCcubmFubycpLm5hbm9TY3JvbGxlcigpLm5hbm9TY3JvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiAnYm90dG9tJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRnVuY2lvbmFsaWRhZCBwYXJhIHJlb3JkZW5hciBsb3MgZWxlbWVudG9zIGl0ZW1DYW5hbCBlbiBlbCBwYW5lbCBkZSBvcmRlblxyXG4gICAgICAgICAqIEBwYXJhbSAge2V2ZW50fSBldmVudCBFdmVudG8gY29tcGxldG9cclxuICAgICAgICAgKiBAcmV0dXJuIHt9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xpY2tPcmRlbkNhbmFsKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBlbiBpdGVtQ2FuYWwnKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGdW5jaW9uYWxpZGFkIGRlIGNsaWNrYXIgZWwgY2hlY2tib3ggZW4gbG9zIGl0ZW1zQ2FuYWwgZGVsIHBhbmVsIGRlIG9yZGVuXHJcbiAgICAgICAgICogQHBhcmFtICB7W2V2ZW50XX0gZXZlbnQgRXZlbnRvIGNvbXBsZXRvXHJcbiAgICAgICAgICogQHJldHVybiB7fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrQ2hlY2tPcmRlbkNhbmFsKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB2YXIgaWRjYW5hbCA9ICQodGhpcykucGFyZW50KCcuaXRlbUNhbmFsJykuZGF0YSgnaWRjYW5hbCcpO1xyXG4gICAgICAgICAgICB2YXIgJGl0ZW1zQ2FuYWwgPSAkYmFycmFMZXRyYXMuZmluZCgnLml0ZW1DYW5hbCcpLmZpbHRlcihmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQodGhpcykuZGF0YSgnaWRjYW5hbCcpID09PSBpZGNhbmFsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ3NlbCcpO1xyXG4gICAgICAgICAgICAkaXRlbXNDYW5hbC5maW5kKCcuY2hlY2snKS50b2dnbGVDbGFzcygnc2VsJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBJTklUICoqL1xyXG4gICAgKGZ1bmN0aW9uIGluaXQoKSB7XHJcblxyXG4gICAgICAgIC8vY29uc29sZS50aW1lKCdJbml0Jyk7XHJcblxyXG4gICAgICAgIHZhciBjYXJnYUluZm9Db29raWVzID0gY2FyZ2FDb29raWVzKCk7XHJcbiAgICAgICAgdmFyIGNhcmdhSW5mb0NhbmFsZXMgPSBjYXJnYUluZm9Db29raWVzLnRoZW4oZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5hbGVzVXN1YXJpbyA9IHJlcztcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYXJnYURhdG9zQ2FuYWxlcyhjYW5hbGVzVXN1YXJpbyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcGludGFDYW5hbGVzKGNhbmFsZXNVc3VhcmlvKTsgLy8gUGludGFyIGVuIGVsIG9yZGVuIGVuIHF1ZSBsbGVnYW4gZGUgbGEgY29va2llXHJcbiAgICAgICAgICAgICAgICBwaW50YVBhcnJpbGxhKGNhbmFsZXNVc3VhcmlvLCBhcnJheUNhbmFsZXMpOyAvLyBQaW50YXIgZW4gZWwgb3JkZW4gZW4gcXVlIGxsZWdhbiBkZSBsYSBjb29raWVcclxuICAgICAgICAgICAgICAgIHBpbnRhSG9yYXNQYXJyaWxsYSgpOyAvLyBQaW50YXIgbGEgYmFycmEgc3VwZXJpb3IgZGUgaG9yYXJpb1xyXG4gICAgICAgICAgICAgICAgcGludGFIb3JhQWN0dWFsKCk7IC8vIFBvc2ljaW9uYSBlbCBtYXJjYWRvciBkZSBob3JhIGFjdHVhbCBlbiBsYSBwYXJyaWxsYVxyXG4gICAgICAgICAgICAgICAgcGludGFTZWxlY3RvckRpYXMoKTsgLy8gUGludGFtb3MgbG9zIGxpdGVyYWxlcyBkZSBsb3MgZMOtYXMgY29udGVtcGxhZG9zIGVuIHBhcnJpbGxhXHJcbiAgICAgICAgICAgICAgICBzaXR1YVBhcnJpbGxhQWhvcmEoKTsgLy8gUG9zaWNpb25hIGxhIHBhcnJpbGxhIHkgZWxlbWVudG9zIGVuIGxhIGZlY2hhIHkgaG9yYSBhY3R1YWxcclxuXHJcbiAgICAgICAgICAgICAgICBsYW56YUhhbmRsZXJzKCk7IC8vIExhbnphIHRvZG9zIGxvcyBldmVudCBsaXN0ZW5lcnNcclxuXHJcbiAgICAgICAgICAgICAgICBwaW50YUxpc3RhZG9DYW5hbGVzU3VzY3JpcGNpb24oKTsgLy8gUGludGFtb3MgZWwgc2VsZWN0b3IgZGUgY2FuYWxlcyBjb21wbGV0byBhbCBwaWVcclxuICAgICAgICAgICAgICAgIHBpbnRhTGlzdGFkb0NhbmFsZXNTZWxlY2Npb25hZG9zKCk7IC8vIFBpbnRhbW9zIGVsIMOhcmVhIGRlIGNhbmFsZXMgc2VsZWNjaW9uYWRvc1xyXG5cclxuICAgICAgICAgICAgICAgIGxhbnphSGFuZGxlcnNTdXNjcmlwaWNpb24oKTsgLy8gTGFuemEgdG9kb3MgbG9zIGV2ZW50cyBsaXN0ZW5lcnMgZGUgc3VzY3JpcGNpw7NuIGEgY2FuYWxlc1xyXG5cclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS50aW1lRW5kKCdJbml0Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL2NhcmdhSW5mb1VzdWFyaW8oKTsgLy8gQ2FyZ2EgbGEgaW5mb3JtYWNpw7NuIHNvYnJlIHByb2dyYW1hcyBmYXZvcml0b3MgeSBhbGVydGFzIGRlIHVuIHVzdWFyaW8gdmFsaWRhZG9cclxuICAgICAgICAvL3BpbnRhUHJvZ3NVc3VhcmlvKCk7IC8vIE1vZGlmaWNhIGxhcyBjbGFzZXMgZGUgbG9zIHByb2dyYW1hcyBxdWUgZWwgdXN1YXJpbyB0ZW5nYSBjb21vIGZhdm9yaXRvcyBvIGFsZXJ0YXNcclxuXHJcbiAgICB9KSgpO1xyXG5cclxuICAgIC8qKiBIZWxwZXIgKiovXHJcbiAgICAkLmZuLmV4aXN0cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcblxyXG59KShqcTExMSk7XHJcblxyXG4vKipcclxuICogQ3JlYSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSAgTm9tYnJlIGRlIGxhIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtvYmplY3R9IHZhbHVlIFZhbG9yIGRlIGxhIGNvb2tpZVxyXG4gKiBAcGFyYW0gIHtpbnR9IGRheXMgIE7Dum1lcm8gZGUgZMOtYXMgZGUgdmlnZW5jaWFcclxuICogQHJldHVybiB7fVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ29va2llKG5hbWUsIHZhbHVlLCBkYXlzKSB7XHJcbiAgICB2YXIgZXhwaXJlcztcclxuXHJcbiAgICBpZiAoZGF5cykge1xyXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAoZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICBleHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvR01UU3RyaW5nKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGV4cGlyZXMgPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgZG9jdW1lbnQuY29va2llID0gZXNjYXBlKG5hbWUpICsgXCI9XCIgKyBlc2NhcGUodmFsdWUpICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIjtcclxufVxyXG4vKipcclxuICogTGVlIHVuYSBjb29raWVcclxuICogQHBhcmFtICB7c3RyaW5nfSBuYW1lIE5vbWJyZSBkZSBsYSBjb29raWVcclxuICogQHJldHVybiB7c3RyaW5nfSAgICAgIFZhbG9yIGRlIGxhIGNvb2tpZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVhZENvb2tpZShuYW1lKSB7XHJcbiAgICB2YXIgbmFtZUVRID0gZXNjYXBlKG5hbWUpICsgXCI9XCI7XHJcbiAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgYyA9IGNhW2ldO1xyXG4gICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PT0gJyAnKSBjID0gYy5zdWJzdHJpbmcoMSwgYy5sZW5ndGgpO1xyXG4gICAgICAgIGlmIChjLmluZGV4T2YobmFtZUVRKSA9PT0gMCkgcmV0dXJuIHVuZXNjYXBlKGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG4vKipcclxuICogRWxpbWluYSB1bmEgY29va2llXHJcbiAqIEBwYXJhbSAge3N0cmluZ30gbmFtZSBOb21icmUgZGUgbGEgY29va2llXHJcbiAqIEByZXR1cm4ge31cclxuICovXHJcbmZ1bmN0aW9uIGVyYXNlQ29va2llKG5hbWUpIHtcclxuICAgIGNyZWF0ZUNvb2tpZShuYW1lLCBcIlwiLCAtMSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXZ1ZWx2ZSB1biBuw7ptZXJvIGNvbW8gY2FkZW5hIGZvcm1hdGVhZGEgY29uIGNlcm9zIGEgbGEgaXpkYVxyXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG51bWJlciAgICAgICBFbCBuw7ptZXJvIG9yaWdpbmFsXHJcbiAqIEBwYXJhbSAge2ludGVnZXJ9IHRhcmdldExlbmd0aCBOw7ptZXJvIGRlIGNhcmFjdGVyZXMgcXVlIHF1ZXJlbW9zIG9idGVuZXJcclxuICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgICAgQ2FkZW5hIGNvbXB1ZXN0YSBkZSBjZXJvcyB5IGVsIG7Dum1lcm8gb3JpZ2luYWxcclxuICovXHJcbmZ1bmN0aW9uIGxlZnRQYWQobnVtYmVyLCB0YXJnZXRMZW5ndGgpIHtcclxuICAgIHZhciBvdXRwdXQgPSBudW1iZXIgKyAnJztcclxuICAgIHdoaWxlIChvdXRwdXQubGVuZ3RoIDwgdGFyZ2V0TGVuZ3RoKSB7XHJcbiAgICAgICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb3RvdGlwbyBwYXJhIG9idGVuZXIgbsO6bWVyb3MgbcOheGltbyB5IG3DrW5pbW8gZW4gdW4gYXJyYXlcclxuICogQHJldHVybiB7aW50fSBEZXZ1ZWx2ZSBlbCBtYXgvbWluIGRlIHVuIGFycmF5IGRhZG9cclxuICovXHJcbkFycmF5LnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtYXggPSB0aGlzWzBdO1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKylcclxuICAgICAgICBpZiAodGhpc1tpXSA+IG1heCkgbWF4ID0gdGhpc1tpXTtcclxuICAgIHJldHVybiBtYXg7XHJcbn07XHJcbkFycmF5LnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtaW4gPSB0aGlzWzBdO1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBsZW47IGkrKylcclxuICAgICAgICBpZiAodGhpc1tpXSA8IG1pbikgbWluID0gdGhpc1tpXTtcclxuICAgIHJldHVybiBtaW47XHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9